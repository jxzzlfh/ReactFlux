var KF=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);import{r as R,c as we,d as qF,a as hD,b as B_,R as zF,e as YF,g as ct,f as Xr,M as et,N as Or,h as Z,I as Rt,_ as xt,i as yt,T as hr,D as Rn,S as vs,F as dr,j as qa,k as Wn,l as j_,E as za,m as Uh,n as fD,B as ht,o as ww,P as pD,p as XF,q as cr,s as H_,t as mD,u as Ey,v as wl,w as ZF,x as V_,y as un,z as Pa,A as gD,C as Aw,G as QF,H as _y,J as vD,K as bD,L as yD,O as JF,Q as e9,U as t9,V as r9,W as ED,X as _D,Y as n9,Z as i9,$ as s9,a0 as a9,a1 as o9,a2 as Rw,a3 as l9,a4 as u9,a5 as c9,a6 as d9,a7 as h9,a8 as f9,a9 as p9,aa as m9,ab as g9,ac as v9}from"./arco-vendor-OEvToo8W.js";import{H as b9}from"./highlight-vendor-B8Jra40s.js";var Uve=KF((Vbe,Hh)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var TD={exports:{}},kg={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y9=R,E9=Symbol.for("react.element"),_9=Symbol.for("react.fragment"),T9=Object.prototype.hasOwnProperty,x9=y9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,S9={key:!0,ref:!0,__self:!0,__source:!0};function xD(t,e,r){var n,i={},s=null,a=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)T9.call(e,n)&&!S9.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:E9,type:t,key:s,ref:a,props:i,_owner:x9.current}}kg.Fragment=_9;kg.jsx=xD;kg.jsxs=xD;TD.exports=kg;var E=TD.exports,w9={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(we,function(){return{name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(r){var n=["th","st","nd","rd"],i=r%100;return"["+r+(n[(i-20)%10]||n[i]||n[0])+"]"}}})})(w9);var Cw={formatYear:"YYYY",formatMonth:"MMM YYYY",monthBeforeYear:!0,monthFormat:"MMM",yearFormat:"YYYY",today:"Today",view:{month:"Month",year:"Year",week:"Week",day:"Day"},month:{long:{January:"January",February:"February",March:"March",April:"April",May:"May",June:"June",July:"July",August:"August",September:"September",October:"October",November:"November",December:"December"},short:{January:"Jan",February:"Feb",March:"Mar",April:"Apr",May:"May",June:"Jun",July:"Jul",August:"Aug",September:"Sept",October:"Oct",November:"Nov",December:"Dec"}},week:{long:{self:"Week",monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Friday",saturday:"Saturday",sunday:"Sunday"},short:{self:"Week",monday:"Mon",tuesday:"Tue",wednesday:"Wed",thursday:"Thu",friday:"Fri",saturday:"Sat",sunday:"Sun"}}};const A9={locale:"en-US",dayjsLocale:"en",Calendar:Cw,DatePicker:{Calendar:Cw,placeholder:{date:"Select date",week:"Select week",month:"Select month",year:"Select year",quarter:"Select quarter"},placeholders:{date:["Start date","End date"],week:["Start week","End week"],month:["Start month","End month"],year:["Start year","End year"],quarter:["Start quarter","End quarter"]},selectTime:"Select time",selectDate:"Select Date",today:"Today",now:"Now",ok:"OK"},Drawer:{okText:"OK",cancelText:"Cancel"},Empty:{noData:"No data"},Modal:{okText:"OK",cancelText:"Cancel"},Pagination:{goto:"Goto",page:"Page",countPerPage:" / Page",total:"Total: {0}",prev:"Go to previous page",next:"Go to next page",currentPage:"page {0}",prevSomePages:"Previous {0} pages",nextSomePages:"Next {0} pages",pageSize:"page size"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Table:{okText:"OK",resetText:"Reset",sortAscend:"Click to sort ascending",sortDescend:"Click to sort descending",cancelSort:"Click to cancel sorting"},TimePicker:{ok:"OK",placeholder:"Select time",placeholders:["Start time","End time"],now:"Now"},Progress:{success:"Completed",error:"Failed"},Upload:{start:"Start",cancel:"Cancel",delete:"Delete",reupload:"Click to retry",upload:"Upload",preview:"Preview",drag:"Click or drag file to this area to upload",dragHover:"Release to upload",error:"Upload Error"},Typography:{copy:"Copy",copied:"Copied",edit:"Edit",fold:"Fold",unfold:"Unfold"},Transfer:{resetText:"Reset"},ImagePreview:{fullScreen:"Full Screen",rotateRight:"Rotate Right",rotateLeft:"Rotate Left",zoomIn:"Zoom In",zoomOut:"Zoom Out",originalSize:"Original Size"},Form:qF,ColorPicker:{history:"History Colors",preset:"Preset Colors",empty:"Empty"}};var R9={exports:{}};(function(t,e){(function(r,n){t.exports=n(hD())})(we,function(r){function n(a){return a&&typeof a=="object"&&"default"in a?a:{default:a}}var i=n(r),s={name:"es",monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},ordinal:function(a){return a+"º"}};return i.default.locale(s,null,!0),s})})(R9);var Iw={formatYear:"YYYY",formatMonth:"M/YYYY",monthBeforeYear:!0,today:"Hoy",view:{month:"Mes",year:"Año",week:"Semana",day:"Fecha"},month:{long:{January:"Enero",February:"Febrero",March:"Marzo",April:"Abril",May:"Mayo",June:"Junio",July:"Julio",August:"Agosto",September:"Septiembre",October:"Octubre",November:"Noviembre",December:"Diciembre"},short:{January:"Ene",February:"Feb",March:"Mar",April:"Abr",May:"May",June:"Jun",July:"Jul",August:"Ago",September:"Sep",October:"Oct",November:"Nov",December:"Dic"}},week:{long:{self:"Semana",monday:"Lunes",tuesday:"Martes",wednesday:"Miércoles",thursday:"Jueves",friday:"Viernes",saturday:"Sábado",sunday:"Domingo"},short:{self:"Semana",monday:"Lun",tuesday:"Mar",wednesday:"Mié",thursday:"Jue",friday:"Vie",saturday:"Sáb",sunday:"Dom"}}};const C9={locale:"es-ES",dayjsLocale:"es",Calendar:Iw,DatePicker:{Calendar:Iw,placeholder:{date:"Seleccionar fecha",week:"Seleccionar semana",month:"Elegir un mes",year:"Elegir un año",quarter:"Seleccionar trimestre"},placeholders:{date:["Fecha inicial","Fecha final"],week:["Semana inicial","Semana final"],month:["Mes inicial","Mes final"],year:["Año inicial","Año final"],quarter:["Trimestre inicial","Trimestre final"]},selectTime:"Seleccionar hora",selectDate:"Seleccionar fecha",today:"Hoy",now:"Ahora",ok:"Aceptar"},Drawer:{okText:"Aceptar",cancelText:"Cancelar"},Empty:{noData:"No hay datos"},Modal:{okText:"Aceptar",cancelText:"Cancelar"},Pagination:{goto:"Ir a",page:"Página",countPerPage:"/ página",total:"{0} en total",prev:"pagina anterior",next:"siguiente página",currentPage:"página {0}",prevSomePages:"Retroceder {0} páginas",nextSomePages:"Avanzar {0} páginas",pageSize:"número de página"},Popconfirm:{okText:"Aceptar",cancelText:"Cancelar"},Table:{okText:"Aceptar",resetText:"Reiniciar",sortAscend:"Click para ordenar en orden ascendente",sortDescend:"Click para ordenar en orden descendente",cancelSort:"Click para cancelar ordenamiento"},TimePicker:{ok:"Aceptar",placeholder:"Seleccionar hora",placeholders:["Hora inicial","Hora final"],now:"Ahora"},Progress:{success:"Completado",error:"Fallido"},Upload:{start:"Comienzo",cancel:"Cancelar",delete:"Eliminar",reupload:"Haga clic para intentarlo de nuevo",upload:"Haga clic para cargar",preview:"Vista Previa",drag:"Haga clic o arrastre los archivos para cargarlos aquí",dragHover:"Libera el archivo y empieza a subir",error:"Fallar"},Typography:{copy:"Copiar",copied:"Copiado",edit:"Editar",fold:"Pliegue",unfold:"Expandir"},Transfer:{resetText:"Reiniciar"},ImagePreview:{fullScreen:"Pantalla completa",rotateRight:"Gira a la derecha",rotateLeft:"Girar a la izquierda",zoomIn:"Acercar",zoomOut:"Alejar",originalSize:"Tamaño original"}};var I9={exports:{}};(function(t,e){(function(r,n){t.exports=n(hD())})(we,function(r){function n(a){return a&&typeof a=="object"&&"default"in a?a:{default:a}}var i=n(r),s={name:"fr",weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinal:function(a){return""+a+(a===1?"er":"")}};return i.default.locale(s,null,!0),s})})(I9);var kw={formatYear:"YYYY",formatMonth:"MM/YYYY",monthBeforeYear:!0,today:"Aujourd'hui",view:{month:"Mois",year:"Année",week:"Semaine",day:"Date"},month:{long:{January:"Janvier",February:"Février",March:"Mars",April:"Avril",May:"Mai",June:"Juin",July:"Juillet",August:"Août",September:"Septembre",October:"Octobre",November:"Novembre",December:"Décembre"},short:{January:"Jan",February:"Fév",March:"Mar",April:"Avr",May:"Mai",June:"Jun",July:"Jul",August:"Aoû",September:"Sep",October:"Oct",November:"Nov",December:"Déc"}},week:{long:{self:"Week",monday:"Lundi",tuesday:"Mardi",wednesday:"Mercredi",thursday:"Jeudi",friday:"Vendredi",saturday:"Samedi",sunday:"Dimanche"},short:{self:"Week",monday:"Lun",tuesday:"Mar",wednesday:"Mer",thursday:"Jeu",friday:"Ven",saturday:"Sam",sunday:"Dim"}}};const k9={locale:"fr-FR",dayjsLocale:"fr",Calendar:kw,DatePicker:{Calendar:kw,placeholder:{date:"Sélectionner une date",week:"Sélectionner une semaine",month:"Sélectionner un mois",year:"Sélectionner une année",quarter:"Sélectionner un trimestre"},placeholders:{date:["Date de début","Date de fin"],week:["Semaine de début","Semaine de fin"],month:["Mois de début","Mois de fin"],year:["Année de début","Année de fin"],quarter:["Trimestre de début","Trimestre de fin"]},selectTime:"Sélectionner l'heure",selectDate:"Sélectionner la date",today:"Aujourd'hui",now:"Maintenant",ok:"OK"},Drawer:{okText:"OK",cancelText:"Annuler"},Empty:{noData:"Aucune donnée"},Modal:{okText:"OK",cancelText:"Annuler"},Pagination:{goto:"Aller à",page:"Page",countPerPage:"/ page",total:"Total {0}",prev:"page précédente",next:"page suivante",currentPage:"page {0}",prevSomePages:"Page {0} précédente",nextSomePages:"Page {0} suivante",pageSize:"numéro de page"},Popconfirm:{okText:"OK",cancelText:"Annuler"},Table:{okText:"OK",resetText:"Réinitialiser",sortAscend:"Trier par ordre croissant",sortDescend:"Trier par ordre décroissant",cancelSort:"Annuler le tri"},TimePicker:{ok:"OK",placeholder:"Sélectionner une heure",placeholders:["Heure de début","Heure de fin"],now:"Maintenant"},Progress:{success:"Finir",error:"Échouer"},Upload:{start:"Démarrer",cancel:"Annuler",delete:"Supprimer",reupload:"Cliquez pour réessayer",upload:"Cliquez pour télécharger",preview:"Aperçu",drag:"Cliquez ou faites glisser les fichiers à télécharger ici",dragHover:"Libérez le fichier et commencez à télécharger",error:"le téléchargement a échoué"},Typography:{copy:"Copier",copied:"Copie effectuée",edit:"Éditer",fold:"Plier",unfold:"Étendre"},Transfer:{resetText:"Réinitialiser"},ImagePreview:{fullScreen:"Plein écran",rotateRight:"Tourner à droite",rotateLeft:"Tourner vers la gauche",zoomIn:"Agrandir",zoomOut:"Dézoomer",originalSize:"Format original"}};var Ty={},Lw=B_;Ty.createRoot=Lw.createRoot,Ty.hydrateRoot=Lw.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nr(){return nr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},nr.apply(this,arguments)}var xr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(xr||(xr={}));const Dw="popstate";function L9(t){t===void 0&&(t={});function e(n,i){let{pathname:s,search:a,hash:o}=n.location;return nh("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:hl(i)}return O9(e,r,null,t)}function at(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Yu(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function D9(){return Math.random().toString(36).substr(2,8)}function Ow(t,e){return{usr:t.state,key:t.key,idx:e}}function nh(t,e,r,n){return r===void 0&&(r=null),nr({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?eo(e):e,{state:r,key:e&&e.key||n||D9()})}function hl(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function eo(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function O9(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,a=i.history,o=xr.Pop,l=null,u=c();u==null&&(u=0,a.replaceState(nr({},a.state,{idx:u}),""));function c(){return(a.state||{idx:null}).idx}function d(){o=xr.Pop;let g=c(),v=g==null?null:g-u;u=g,l&&l({action:o,location:m.location,delta:v})}function h(g,v){o=xr.Push;let b=nh(m.location,g,v);u=c()+1;let y=Ow(b,u),T=m.createHref(b);try{a.pushState(y,"",T)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;i.location.assign(T)}s&&l&&l({action:o,location:m.location,delta:1})}function f(g,v){o=xr.Replace;let b=nh(m.location,g,v);u=c();let y=Ow(b,u),T=m.createHref(b);a.replaceState(y,"",T),s&&l&&l({action:o,location:m.location,delta:0})}function p(g){let v=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof g=="string"?g:hl(g);return b=b.replace(/ $/,"%20"),at(v,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,v)}let m={get action(){return o},get location(){return t(i,a)},listen(g){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Dw,d),l=g,()=>{i.removeEventListener(Dw,d),l=null}},createHref(g){return e(i,g)},createURL:p,encodeLocation(g){let v=p(g);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:f,go(g){return a.go(g)}};return m}var Ft;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ft||(Ft={}));const M9=new Set(["lazy","caseSensitive","path","id","index","children"]);function P9(t){return t.index===!0}function um(t,e,r,n){return r===void 0&&(r=[]),n===void 0&&(n={}),t.map((i,s)=>{let a=[...r,String(s)],o=typeof i.id=="string"?i.id:a.join("-");if(at(i.index!==!0||!i.children,"Cannot specify children on an index route"),at(!n[o],'Found a route id collision on id "'+o+`".  Route id's must be globally unique within Data Router usages`),P9(i)){let l=nr({},i,e(i),{id:o});return n[o]=l,l}else{let l=nr({},i,e(i),{id:o,children:void 0});return n[o]=l,i.children&&(l.children=um(i.children,e,a,n)),l}})}function $o(t,e,r){return r===void 0&&(r="/"),R0(t,e,r,!1)}function R0(t,e,r,n){let i=typeof e=="string"?eo(e):e,s=mc(i.pathname||"/",r);if(s==null)return null;let a=SD(t);F9(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let u=z9(s);o=K9(a[l],u,n)}return o}function N9(t,e){let{route:r,pathname:n,params:i}=t;return{id:r.id,pathname:n,params:i,data:e[r.id],handle:r.handle}}function SD(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(at(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let u=Ks([n,l.relativePath]),c=r.concat(l);s.children&&s.children.length>0&&(at(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),SD(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:W9(u,s.index),routesMeta:c})};return t.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let l of wD(s.path))i(s,a,l)}),e}function wD(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let a=wD(n.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function F9(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:G9(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const $9=/^:[\w-]+$/,U9=3,B9=2,j9=1,H9=10,V9=-2,Mw=t=>t==="*";function W9(t,e){let r=t.split("/"),n=r.length;return r.some(Mw)&&(n+=V9),e&&(n+=B9),r.filter(i=>!Mw(i)).reduce((i,s)=>i+($9.test(s)?U9:s===""?j9:H9),n)}function G9(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function K9(t,e,r){r===void 0&&(r=!1);let{routesMeta:n}=t,i={},s="/",a=[];for(let o=0;o<n.length;++o){let l=n[o],u=o===n.length-1,c=s==="/"?e:e.slice(s.length)||"/",d=Pw({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),h=l.route;if(!d&&u&&r&&!n[n.length-1].route.index&&(d=Pw({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!d)return null;Object.assign(i,d.params),a.push({params:i,pathname:Ks([s,d.pathname]),pathnameBase:Z9(Ks([s,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(s=Ks([s,d.pathnameBase]))}return a}function Pw(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=q9(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((u,c,d)=>{let{paramName:h,isOptional:f}=c;if(h==="*"){let m=o[d]||"";a=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=o[d];return f&&!p?u[h]=void 0:u[h]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:a,pattern:t}}function q9(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Yu(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function z9(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Yu(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function mc(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function Y9(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?eo(t):t;return{pathname:r?r.startsWith("/")?r:X9(r,e):e,search:Q9(n),hash:J9(i)}}function X9(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function Nv(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function AD(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Lg(t,e){let r=AD(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Dg(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=eo(t):(i=nr({},t),at(!i.pathname||!i.pathname.includes("?"),Nv("?","pathname","search",i)),at(!i.pathname||!i.pathname.includes("#"),Nv("#","pathname","hash",i)),at(!i.search||!i.search.includes("#"),Nv("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=r;else{let d=e.length-1;if(!n&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}o=d>=0?e[d]:"/"}let l=Y9(i,o),u=a&&a!=="/"&&a.endsWith("/"),c=(s||a===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const Ks=t=>t.join("/").replace(/\/\/+/g,"/"),Z9=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Q9=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,J9=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class cm{constructor(e,r,n,i){i===void 0&&(i=!1),this.status=e,this.statusText=r||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function Og(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const RD=["post","put","patch","delete"],e$=new Set(RD),t$=["get",...RD],r$=new Set(t$),n$=new Set([301,302,303,307,308]),i$=new Set([307,308]),Fv={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},s$={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},kc={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},W_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,a$=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),CD="remix-router-transitions";function o$(t){const e=t.window?t.window:typeof window<"u"?window:void 0,r=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",n=!r;at(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let F=t.detectErrorBoundary;i=H=>({hasErrorBoundary:F(H)})}else i=a$;let s={},a=um(t.routes,i,void 0,s),o,l=t.basename||"/",u=t.dataStrategy||d$,c=t.patchRoutesOnNavigation,d=nr({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),h=null,f=new Set,p=null,m=null,g=null,v=t.hydrationData!=null,b=$o(a,t.history.location,l),y=null;if(b==null&&!c){let F=Bn(404,{pathname:t.history.location.pathname}),{matches:H,route:Q}=Kw(a);b=H,y={[Q.id]:F}}b&&!t.hydrationData&&dt(b,a,t.history.location.pathname).active&&(b=null);let T;if(b)if(b.some(F=>F.route.lazy))T=!1;else if(!b.some(F=>F.route.loader))T=!0;else if(d.v7_partialHydration){let F=t.hydrationData?t.hydrationData.loaderData:null,H=t.hydrationData?t.hydrationData.errors:null;if(H){let Q=b.findIndex(ie=>H[ie.route.id]!==void 0);T=b.slice(0,Q+1).every(ie=>!Sy(ie.route,F,H))}else T=b.every(Q=>!Sy(Q.route,F,H))}else T=t.hydrationData!=null;else if(T=!1,b=[],d.v7_partialHydration){let F=dt(null,a,t.history.location.pathname);F.active&&F.matches&&(b=F.matches)}let x,_={historyAction:t.history.action,location:t.history.location,matches:b,initialized:T,navigation:Fv,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||y,fetchers:new Map,blockers:new Map},S=xr.Pop,A=!1,k,I=!1,C=new Map,N=null,P=!1,V=!1,M=[],U=new Set,B=new Map,X=0,te=-1,D=new Map,L=new Set,Y=new Map,$=new Map,j=new Set,z=new Map,re=new Map,ne;function ue(){if(h=t.history.listen(F=>{let{action:H,location:Q,delta:ie}=F;if(ne){ne(),ne=void 0;return}Yu(re.size===0||ie!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let me=qn({currentLocation:_.location,nextLocation:Q,historyAction:H});if(me&&ie!=null){let Ae=new Promise(He=>{ne=He});t.history.go(ie*-1),Rs(me,{state:"blocked",location:Q,proceed(){Rs(me,{state:"proceeding",proceed:void 0,reset:void 0,location:Q}),Ae.then(()=>t.history.go(ie))},reset(){let He=new Map(_.blockers);He.set(me,kc),_e({blockers:He})}});return}return Oe(H,Q)}),r){w$(e,C);let F=()=>A$(e,C);e.addEventListener("pagehide",F),N=()=>e.removeEventListener("pagehide",F)}return _.initialized||Oe(xr.Pop,_.location,{initialHydration:!0}),x}function Te(){h&&h(),N&&N(),f.clear(),k&&k.abort(),_.fetchers.forEach((F,H)=>de(H)),_.blockers.forEach((F,H)=>sa(H))}function ce(F){return f.add(F),()=>f.delete(F)}function _e(F,H){H===void 0&&(H={}),_=nr({},_,F);let Q=[],ie=[];d.v7_fetcherPersist&&_.fetchers.forEach((me,Ae)=>{me.state==="idle"&&(j.has(Ae)?ie.push(Ae):Q.push(Ae))}),[...f].forEach(me=>me(_,{deletedFetchers:ie,viewTransitionOpts:H.viewTransitionOpts,flushSync:H.flushSync===!0})),d.v7_fetcherPersist&&(Q.forEach(me=>_.fetchers.delete(me)),ie.forEach(me=>de(me)))}function De(F,H,Q){var ie,me;let{flushSync:Ae}=Q===void 0?{}:Q,He=_.actionData!=null&&_.navigation.formMethod!=null&&Ii(_.navigation.formMethod)&&_.navigation.state==="loading"&&((ie=F.state)==null?void 0:ie._isRedirect)!==!0,ge;H.actionData?Object.keys(H.actionData).length>0?ge=H.actionData:ge=null:He?ge=_.actionData:ge=null;let ve=H.loaderData?Ww(_.loaderData,H.loaderData,H.matches||[],H.errors):_.loaderData,pe=_.blockers;pe.size>0&&(pe=new Map(pe),pe.forEach((Qe,gr)=>pe.set(gr,kc)));let Se=A===!0||_.navigation.formMethod!=null&&Ii(_.navigation.formMethod)&&((me=F.state)==null?void 0:me._isRedirect)!==!0;o&&(a=o,o=void 0),P||S===xr.Pop||(S===xr.Push?t.history.push(F,F.state):S===xr.Replace&&t.history.replace(F,F.state));let Ke;if(S===xr.Pop){let Qe=C.get(_.location.pathname);Qe&&Qe.has(F.pathname)?Ke={currentLocation:_.location,nextLocation:F}:C.has(F.pathname)&&(Ke={currentLocation:F,nextLocation:_.location})}else if(I){let Qe=C.get(_.location.pathname);Qe?Qe.add(F.pathname):(Qe=new Set([F.pathname]),C.set(_.location.pathname,Qe)),Ke={currentLocation:_.location,nextLocation:F}}_e(nr({},H,{actionData:ge,loaderData:ve,historyAction:S,location:F,initialized:!0,navigation:Fv,revalidation:"idle",restoreScrollPosition:Ue(F,H.matches||_.matches),preventScrollReset:Se,blockers:pe}),{viewTransitionOpts:Ke,flushSync:Ae===!0}),S=xr.Pop,A=!1,I=!1,P=!1,V=!1,M=[]}async function nt(F,H){if(typeof F=="number"){t.history.go(F);return}let Q=xy(_.location,_.matches,l,d.v7_prependBasename,F,d.v7_relativeSplatPath,H==null?void 0:H.fromRouteId,H==null?void 0:H.relative),{path:ie,submission:me,error:Ae}=Nw(d.v7_normalizeFormMethod,!1,Q,H),He=_.location,ge=nh(_.location,ie,H&&H.state);ge=nr({},ge,t.history.encodeLocation(ge));let ve=H&&H.replace!=null?H.replace:void 0,pe=xr.Push;ve===!0?pe=xr.Replace:ve===!1||me!=null&&Ii(me.formMethod)&&me.formAction===_.location.pathname+_.location.search&&(pe=xr.Replace);let Se=H&&"preventScrollReset"in H?H.preventScrollReset===!0:void 0,Ke=(H&&H.flushSync)===!0,Qe=qn({currentLocation:He,nextLocation:ge,historyAction:pe});if(Qe){Rs(Qe,{state:"blocked",location:ge,proceed(){Rs(Qe,{state:"proceeding",proceed:void 0,reset:void 0,location:ge}),nt(F,H)},reset(){let gr=new Map(_.blockers);gr.set(Qe,kc),_e({blockers:gr})}});return}return await Oe(pe,ge,{submission:me,pendingError:Ae,preventScrollReset:Se,replace:H&&H.replace,enableViewTransition:H&&H.viewTransition,flushSync:Ke})}function ke(){if(mr(),_e({revalidation:"loading"}),_.navigation.state!=="submitting"){if(_.navigation.state==="idle"){Oe(_.historyAction,_.location,{startUninterruptedRevalidation:!0});return}Oe(S||_.historyAction,_.navigation.location,{overrideNavigation:_.navigation,enableViewTransition:I===!0})}}async function Oe(F,H,Q){k&&k.abort(),k=null,S=F,P=(Q&&Q.startUninterruptedRevalidation)===!0,se(_.location,_.matches),A=(Q&&Q.preventScrollReset)===!0,I=(Q&&Q.enableViewTransition)===!0;let ie=o||a,me=Q&&Q.overrideNavigation,Ae=$o(ie,H,l),He=(Q&&Q.flushSync)===!0,ge=dt(Ae,ie,H.pathname);if(ge.active&&ge.matches&&(Ae=ge.matches),!Ae){let{error:vt,notFoundMatches:Je,route:_t}=Ye(H.pathname);De(H,{matches:Je,loaderData:{},errors:{[_t.id]:vt}},{flushSync:He});return}if(_.initialized&&!V&&v$(_.location,H)&&!(Q&&Q.submission&&Ii(Q.submission.formMethod))){De(H,{matches:Ae},{flushSync:He});return}k=new AbortController;let ve=Al(t.history,H,k.signal,Q&&Q.submission),pe;if(Q&&Q.pendingError)pe=[Uo(Ae).route.id,{type:Ft.error,error:Q.pendingError}];else if(Q&&Q.submission&&Ii(Q.submission.formMethod)){let vt=await ar(ve,H,Q.submission,Ae,ge.active,{replace:Q.replace,flushSync:He});if(vt.shortCircuited)return;if(vt.pendingActionResult){let[Je,_t]=vt.pendingActionResult;if(Jn(_t)&&Og(_t.error)&&_t.error.status===404){k=null,De(H,{matches:vt.matches,loaderData:{},errors:{[Je]:_t.error}});return}}Ae=vt.matches||Ae,pe=vt.pendingActionResult,me=$v(H,Q.submission),He=!1,ge.active=!1,ve=Al(t.history,ve.url,ve.signal)}let{shortCircuited:Se,matches:Ke,loaderData:Qe,errors:gr}=await Et(ve,H,Ae,ge.active,me,Q&&Q.submission,Q&&Q.fetcherSubmission,Q&&Q.replace,Q&&Q.initialHydration===!0,He,pe);Se||(k=null,De(H,nr({matches:Ke||Ae},Gw(pe),{loaderData:Qe,errors:gr})))}async function ar(F,H,Q,ie,me,Ae){Ae===void 0&&(Ae={}),mr();let He=x$(H,Q);if(_e({navigation:He},{flushSync:Ae.flushSync===!0}),me){let pe=await li(ie,H.pathname,F.signal);if(pe.type==="aborted")return{shortCircuited:!0};if(pe.type==="error"){let Se=Uo(pe.partialMatches).route.id;return{matches:pe.partialMatches,pendingActionResult:[Se,{type:Ft.error,error:pe.error}]}}else if(pe.matches)ie=pe.matches;else{let{notFoundMatches:Se,error:Ke,route:Qe}=Ye(H.pathname);return{matches:Se,pendingActionResult:[Qe.id,{type:Ft.error,error:Ke}]}}}let ge,ve=nd(ie,H);if(!ve.route.action&&!ve.route.lazy)ge={type:Ft.error,error:Bn(405,{method:F.method,pathname:H.pathname,routeId:ve.route.id})};else if(ge=(await wt("action",_,F,[ve],ie,null))[ve.route.id],F.signal.aborted)return{shortCircuited:!0};if(Go(ge)){let pe;return Ae&&Ae.replace!=null?pe=Ae.replace:pe=jw(ge.response.headers.get("Location"),new URL(F.url),l)===_.location.pathname+_.location.search,await tr(F,ge,!0,{submission:Q,replace:pe}),{shortCircuited:!0}}if(Na(ge))throw Bn(400,{type:"defer-action"});if(Jn(ge)){let pe=Uo(ie,ve.route.id);return(Ae&&Ae.replace)!==!0&&(S=xr.Push),{matches:ie,pendingActionResult:[pe.route.id,ge]}}return{matches:ie,pendingActionResult:[ve.route.id,ge]}}async function Et(F,H,Q,ie,me,Ae,He,ge,ve,pe,Se){let Ke=me||$v(H,Ae),Qe=Ae||He||zw(Ke),gr=!P&&(!d.v7_partialHydration||!ve);if(ie){if(gr){let rt=Gt(Se);_e(nr({navigation:Ke},rt!==void 0?{actionData:rt}:{}),{flushSync:pe})}let Ge=await li(Q,H.pathname,F.signal);if(Ge.type==="aborted")return{shortCircuited:!0};if(Ge.type==="error"){let rt=Uo(Ge.partialMatches).route.id;return{matches:Ge.partialMatches,loaderData:{},errors:{[rt]:Ge.error}}}else if(Ge.matches)Q=Ge.matches;else{let{error:rt,notFoundMatches:jr,route:Sn}=Ye(H.pathname);return{matches:jr,loaderData:{},errors:{[Sn.id]:rt}}}}let vt=o||a,[Je,_t]=$w(t.history,_,Q,Qe,H,d.v7_partialHydration&&ve===!0,d.v7_skipActionErrorRevalidation,V,M,U,j,Y,L,vt,l,Se);if(Ot(Ge=>!(Q&&Q.some(rt=>rt.route.id===Ge))||Je&&Je.some(rt=>rt.route.id===Ge)),te=++X,Je.length===0&&_t.length===0){let Ge=ot();return De(H,nr({matches:Q,loaderData:{},errors:Se&&Jn(Se[1])?{[Se[0]]:Se[1].error}:null},Gw(Se),Ge?{fetchers:new Map(_.fetchers)}:{}),{flushSync:pe}),{shortCircuited:!0}}if(gr){let Ge={};if(!ie){Ge.navigation=Ke;let rt=Gt(Se);rt!==void 0&&(Ge.actionData=rt)}_t.length>0&&(Ge.fetchers=er(_t)),_e(Ge,{flushSync:pe})}_t.forEach(Ge=>{Me(Ge.key),Ge.controller&&B.set(Ge.key,Ge.controller)});let kn=()=>_t.forEach(Ge=>Me(Ge.key));k&&k.signal.addEventListener("abort",kn);let{loaderResults:Ur,fetcherResults:pn}=await gt(_,Q,Je,_t,F);if(F.signal.aborted)return{shortCircuited:!0};k&&k.signal.removeEventListener("abort",kn),_t.forEach(Ge=>B.delete(Ge.key));let Br=lf(Ur);if(Br)return await tr(F,Br.result,!0,{replace:ge}),{shortCircuited:!0};if(Br=lf(pn),Br)return L.add(Br.key),await tr(F,Br.result,!0,{replace:ge}),{shortCircuited:!0};let{loaderData:ui,errors:Ln}=Vw(_,Q,Ur,Se,_t,pn,z);z.forEach((Ge,rt)=>{Ge.subscribe(jr=>{(jr||Ge.done)&&z.delete(rt)})}),d.v7_partialHydration&&ve&&_.errors&&(Ln=nr({},_.errors,Ln));let sn=ot(),Dn=qt(te),mn=sn||Dn||_t.length>0;return nr({matches:Q,loaderData:ui,errors:Ln},mn?{fetchers:new Map(_.fetchers)}:{})}function Gt(F){if(F&&!Jn(F[1]))return{[F[0]]:F[1].data};if(_.actionData)return Object.keys(_.actionData).length===0?null:_.actionData}function er(F){return F.forEach(H=>{let Q=_.fetchers.get(H.key),ie=Lc(void 0,Q?Q.data:void 0);_.fetchers.set(H.key,ie)}),new Map(_.fetchers)}function jt(F,H,Q,ie){if(n)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Me(F);let me=(ie&&ie.flushSync)===!0,Ae=o||a,He=xy(_.location,_.matches,l,d.v7_prependBasename,Q,d.v7_relativeSplatPath,H,ie==null?void 0:ie.relative),ge=$o(Ae,He,l),ve=dt(ge,Ae,He);if(ve.active&&ve.matches&&(ge=ve.matches),!ge){Kt(F,H,Bn(404,{pathname:He}),{flushSync:me});return}let{path:pe,submission:Se,error:Ke}=Nw(d.v7_normalizeFormMethod,!0,He,ie);if(Ke){Kt(F,H,Ke,{flushSync:me});return}let Qe=nd(ge,pe),gr=(ie&&ie.preventScrollReset)===!0;if(Se&&Ii(Se.formMethod)){ze(F,H,pe,Qe,ge,ve.active,me,gr,Se);return}Y.set(F,{routeId:H,path:pe}),$e(F,H,pe,Qe,ge,ve.active,me,gr,Se)}async function ze(F,H,Q,ie,me,Ae,He,ge,ve){mr(),Y.delete(F);function pe(bt){if(!bt.route.action&&!bt.route.lazy){let Yn=Bn(405,{method:ve.formMethod,pathname:Q,routeId:H});return Kt(F,H,Yn,{flushSync:He}),!0}return!1}if(!Ae&&pe(ie))return;let Se=_.fetchers.get(F);It(F,S$(ve,Se),{flushSync:He});let Ke=new AbortController,Qe=Al(t.history,Q,Ke.signal,ve);if(Ae){let bt=await li(me,Q,Qe.signal);if(bt.type==="aborted")return;if(bt.type==="error"){Kt(F,H,bt.error,{flushSync:He});return}else if(bt.matches){if(me=bt.matches,ie=nd(me,Q),pe(ie))return}else{Kt(F,H,Bn(404,{pathname:Q}),{flushSync:He});return}}B.set(F,Ke);let gr=X,Je=(await wt("action",_,Qe,[ie],me,F))[ie.route.id];if(Qe.signal.aborted){B.get(F)===Ke&&B.delete(F);return}if(d.v7_fetcherPersist&&j.has(F)){if(Go(Je)||Jn(Je)){It(F,fa(void 0));return}}else{if(Go(Je))if(B.delete(F),te>gr){It(F,fa(void 0));return}else return L.add(F),It(F,Lc(ve)),tr(Qe,Je,!1,{fetcherSubmission:ve,preventScrollReset:ge});if(Jn(Je)){Kt(F,H,Je.error);return}}if(Na(Je))throw Bn(400,{type:"defer-action"});let _t=_.navigation.location||_.location,kn=Al(t.history,_t,Ke.signal),Ur=o||a,pn=_.navigation.state!=="idle"?$o(Ur,_.navigation.location,l):_.matches;at(pn,"Didn't find any matches after fetcher action");let Br=++X;D.set(F,Br);let ui=Lc(ve,Je.data);_.fetchers.set(F,ui);let[Ln,sn]=$w(t.history,_,pn,ve,_t,!1,d.v7_skipActionErrorRevalidation,V,M,U,j,Y,L,Ur,l,[ie.route.id,Je]);sn.filter(bt=>bt.key!==F).forEach(bt=>{let Yn=bt.key,Xn=_.fetchers.get(Yn),On=Lc(void 0,Xn?Xn.data:void 0);_.fetchers.set(Yn,On),Me(Yn),bt.controller&&B.set(Yn,bt.controller)}),_e({fetchers:new Map(_.fetchers)});let Dn=()=>sn.forEach(bt=>Me(bt.key));Ke.signal.addEventListener("abort",Dn);let{loaderResults:mn,fetcherResults:Ge}=await gt(_,pn,Ln,sn,kn);if(Ke.signal.aborted)return;Ke.signal.removeEventListener("abort",Dn),D.delete(F),B.delete(F),sn.forEach(bt=>B.delete(bt.key));let rt=lf(mn);if(rt)return tr(kn,rt.result,!1,{preventScrollReset:ge});if(rt=lf(Ge),rt)return L.add(rt.key),tr(kn,rt.result,!1,{preventScrollReset:ge});let{loaderData:jr,errors:Sn}=Vw(_,pn,mn,void 0,sn,Ge,z);if(_.fetchers.has(F)){let bt=fa(Je.data);_.fetchers.set(F,bt)}qt(Br),_.navigation.state==="loading"&&Br>te?(at(S,"Expected pending action"),k&&k.abort(),De(_.navigation.location,{matches:pn,loaderData:jr,errors:Sn,fetchers:new Map(_.fetchers)})):(_e({errors:Sn,loaderData:Ww(_.loaderData,jr,pn,Sn),fetchers:new Map(_.fetchers)}),V=!1)}async function $e(F,H,Q,ie,me,Ae,He,ge,ve){let pe=_.fetchers.get(F);It(F,Lc(ve,pe?pe.data:void 0),{flushSync:He});let Se=new AbortController,Ke=Al(t.history,Q,Se.signal);if(Ae){let Je=await li(me,Q,Ke.signal);if(Je.type==="aborted")return;if(Je.type==="error"){Kt(F,H,Je.error,{flushSync:He});return}else if(Je.matches)me=Je.matches,ie=nd(me,Q);else{Kt(F,H,Bn(404,{pathname:Q}),{flushSync:He});return}}B.set(F,Se);let Qe=X,vt=(await wt("loader",_,Ke,[ie],me,F))[ie.route.id];if(Na(vt)&&(vt=await G_(vt,Ke.signal,!0)||vt),B.get(F)===Se&&B.delete(F),!Ke.signal.aborted){if(j.has(F)){It(F,fa(void 0));return}if(Go(vt))if(te>Qe){It(F,fa(void 0));return}else{L.add(F),await tr(Ke,vt,!1,{preventScrollReset:ge});return}if(Jn(vt)){Kt(F,H,vt.error);return}at(!Na(vt),"Unhandled fetcher deferred data"),It(F,fa(vt.data))}}async function tr(F,H,Q,ie){let{submission:me,fetcherSubmission:Ae,preventScrollReset:He,replace:ge}=ie===void 0?{}:ie;H.response.headers.has("X-Remix-Revalidate")&&(V=!0);let ve=H.response.headers.get("Location");at(ve,"Expected a Location header on the redirect Response"),ve=jw(ve,new URL(F.url),l);let pe=nh(_.location,ve,{_isRedirect:!0});if(r){let Je=!1;if(H.response.headers.has("X-Remix-Reload-Document"))Je=!0;else if(W_.test(ve)){const _t=t.history.createURL(ve);Je=_t.origin!==e.location.origin||mc(_t.pathname,l)==null}if(Je){ge?e.location.replace(ve):e.location.assign(ve);return}}k=null;let Se=ge===!0||H.response.headers.has("X-Remix-Replace")?xr.Replace:xr.Push,{formMethod:Ke,formAction:Qe,formEncType:gr}=_.navigation;!me&&!Ae&&Ke&&Qe&&gr&&(me=zw(_.navigation));let vt=me||Ae;if(i$.has(H.response.status)&&vt&&Ii(vt.formMethod))await Oe(Se,pe,{submission:nr({},vt,{formAction:ve}),preventScrollReset:He||A,enableViewTransition:Q?I:void 0});else{let Je=$v(pe,me);await Oe(Se,pe,{overrideNavigation:Je,fetcherSubmission:Ae,preventScrollReset:He||A,enableViewTransition:Q?I:void 0})}}async function wt(F,H,Q,ie,me,Ae){let He,ge={};try{He=await h$(u,F,H,Q,ie,me,Ae,s,i)}catch(ve){return ie.forEach(pe=>{ge[pe.route.id]={type:Ft.error,error:ve}}),ge}for(let[ve,pe]of Object.entries(He))if(b$(pe)){let Se=pe.result;ge[ve]={type:Ft.redirect,response:m$(Se,Q,ve,me,l,d.v7_relativeSplatPath)}}else ge[ve]=await p$(pe);return ge}async function gt(F,H,Q,ie,me){let Ae=F.matches,He=wt("loader",F,me,Q,H,null),ge=Promise.all(ie.map(async Se=>{if(Se.matches&&Se.match&&Se.controller){let Qe=(await wt("loader",F,Al(t.history,Se.path,Se.controller.signal),[Se.match],Se.matches,Se.key))[Se.match.route.id];return{[Se.key]:Qe}}else return Promise.resolve({[Se.key]:{type:Ft.error,error:Bn(404,{pathname:Se.path})}})})),ve=await He,pe=(await ge).reduce((Se,Ke)=>Object.assign(Se,Ke),{});return await Promise.all([_$(H,ve,me.signal,Ae,F.loaderData),T$(H,pe,ie)]),{loaderResults:ve,fetcherResults:pe}}function mr(){V=!0,M.push(...Ot()),Y.forEach((F,H)=>{B.has(H)&&U.add(H),Me(H)})}function It(F,H,Q){Q===void 0&&(Q={}),_.fetchers.set(F,H),_e({fetchers:new Map(_.fetchers)},{flushSync:(Q&&Q.flushSync)===!0})}function Kt(F,H,Q,ie){ie===void 0&&(ie={});let me=Uo(_.matches,H);de(F),_e({errors:{[me.route.id]:Q},fetchers:new Map(_.fetchers)},{flushSync:(ie&&ie.flushSync)===!0})}function nn(F){return d.v7_fetcherPersist&&($.set(F,($.get(F)||0)+1),j.has(F)&&j.delete(F)),_.fetchers.get(F)||s$}function de(F){let H=_.fetchers.get(F);B.has(F)&&!(H&&H.state==="loading"&&D.has(F))&&Me(F),Y.delete(F),D.delete(F),L.delete(F),j.delete(F),U.delete(F),_.fetchers.delete(F)}function he(F){if(d.v7_fetcherPersist){let H=($.get(F)||0)-1;H<=0?($.delete(F),j.add(F)):$.set(F,H)}else de(F);_e({fetchers:new Map(_.fetchers)})}function Me(F){let H=B.get(F);H&&(H.abort(),B.delete(F))}function ye(F){for(let H of F){let Q=nn(H),ie=fa(Q.data);_.fetchers.set(H,ie)}}function ot(){let F=[],H=!1;for(let Q of L){let ie=_.fetchers.get(Q);at(ie,"Expected fetcher: "+Q),ie.state==="loading"&&(L.delete(Q),F.push(Q),H=!0)}return ye(F),H}function qt(F){let H=[];for(let[Q,ie]of D)if(ie<F){let me=_.fetchers.get(Q);at(me,"Expected fetcher: "+Q),me.state==="loading"&&(Me(Q),D.delete(Q),H.push(Q))}return ye(H),H.length>0}function Hi(F,H){let Q=_.blockers.get(F)||kc;return re.get(F)!==H&&re.set(F,H),Q}function sa(F){_.blockers.delete(F),re.delete(F)}function Rs(F,H){let Q=_.blockers.get(F)||kc;at(Q.state==="unblocked"&&H.state==="blocked"||Q.state==="blocked"&&H.state==="blocked"||Q.state==="blocked"&&H.state==="proceeding"||Q.state==="blocked"&&H.state==="unblocked"||Q.state==="proceeding"&&H.state==="unblocked","Invalid blocker state transition: "+Q.state+" -> "+H.state);let ie=new Map(_.blockers);ie.set(F,H),_e({blockers:ie})}function qn(F){let{currentLocation:H,nextLocation:Q,historyAction:ie}=F;if(re.size===0)return;re.size>1&&Yu(!1,"A router only supports one blocker at a time");let me=Array.from(re.entries()),[Ae,He]=me[me.length-1],ge=_.blockers.get(Ae);if(!(ge&&ge.state==="proceeding")&&He({currentLocation:H,nextLocation:Q,historyAction:ie}))return Ae}function Ye(F){let H=Bn(404,{pathname:F}),Q=o||a,{matches:ie,route:me}=Kw(Q);return Ot(),{notFoundMatches:ie,route:me,error:H}}function Ot(F){let H=[];return z.forEach((Q,ie)=>{(!F||F(ie))&&(Q.cancel(),H.push(ie),z.delete(ie))}),H}function yr(F,H,Q){if(p=F,g=H,m=Q||null,!v&&_.navigation===Fv){v=!0;let ie=Ue(_.location,_.matches);ie!=null&&_e({restoreScrollPosition:ie})}return()=>{p=null,g=null,m=null}}function or(F,H){return m&&m(F,H.map(ie=>N9(ie,_.loaderData)))||F.key}function se(F,H){if(p&&g){let Q=or(F,H);p[Q]=g()}}function Ue(F,H){if(p){let Q=or(F,H),ie=p[Q];if(typeof ie=="number")return ie}return null}function dt(F,H,Q){if(c)if(F){if(Object.keys(F[0].params).length>0)return{active:!0,matches:R0(H,Q,l,!0)}}else return{active:!0,matches:R0(H,Q,l,!0)||[]};return{active:!1,matches:null}}async function li(F,H,Q){if(!c)return{type:"success",matches:F};let ie=F;for(;;){let me=o==null,Ae=o||a,He=s;try{await c({path:H,matches:ie,patch:(pe,Se)=>{Q.aborted||Bw(pe,Se,Ae,He,i)}})}catch(pe){return{type:"error",error:pe,partialMatches:ie}}finally{me&&!Q.aborted&&(a=[...a])}if(Q.aborted)return{type:"aborted"};let ge=$o(Ae,H,l);if(ge)return{type:"success",matches:ge};let ve=R0(Ae,H,l,!0);if(!ve||ie.length===ve.length&&ie.every((pe,Se)=>pe.route.id===ve[Se].route.id))return{type:"success",matches:null};ie=ve}}function Ti(F){s={},o=um(F,i,void 0,s)}function zn(F,H){let Q=o==null;Bw(F,H,o||a,s,i),Q&&(a=[...a],_e({}))}return x={get basename(){return l},get future(){return d},get state(){return _},get routes(){return a},get window(){return e},initialize:ue,subscribe:ce,enableScrollRestoration:yr,navigate:nt,fetch:jt,revalidate:ke,createHref:F=>t.history.createHref(F),encodeLocation:F=>t.history.encodeLocation(F),getFetcher:nn,deleteFetcher:he,dispose:Te,getBlocker:Hi,deleteBlocker:sa,patchRoutes:zn,_internalFetchControllers:B,_internalActiveDeferreds:z,_internalSetRoutes:Ti},x}function l$(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function xy(t,e,r,n,i,s,a,o){let l,u;if(a){l=[];for(let d of e)if(l.push(d),d.route.id===a){u=d;break}}else l=e,u=e[e.length-1];let c=Dg(i||".",Lg(l,s),mc(t.pathname,r)||t.pathname,o==="path");if(i==null&&(c.search=t.search,c.hash=t.hash),(i==null||i===""||i===".")&&u){let d=K_(c.search);if(u.route.index&&!d)c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index";else if(!u.route.index&&d){let h=new URLSearchParams(c.search),f=h.getAll("index");h.delete("index"),f.filter(m=>m).forEach(m=>h.append("index",m));let p=h.toString();c.search=p?"?"+p:""}}return n&&r!=="/"&&(c.pathname=c.pathname==="/"?r:Ks([r,c.pathname])),hl(c)}function Nw(t,e,r,n){if(!n||!l$(n))return{path:r};if(n.formMethod&&!E$(n.formMethod))return{path:r,error:Bn(405,{method:n.formMethod})};let i=()=>({path:r,error:Bn(400,{type:"invalid-body"})}),s=n.formMethod||"get",a=t?s.toUpperCase():s.toLowerCase(),o=LD(r);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!Ii(a))return i();let h=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((f,p)=>{let[m,g]=p;return""+f+m+"="+g+`
`},""):String(n.body);return{path:r,submission:{formMethod:a,formAction:o,formEncType:n.formEncType,formData:void 0,json:void 0,text:h}}}else if(n.formEncType==="application/json"){if(!Ii(a))return i();try{let h=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:r,submission:{formMethod:a,formAction:o,formEncType:n.formEncType,formData:void 0,json:h,text:void 0}}}catch{return i()}}}at(typeof FormData=="function","FormData is not available in this environment");let l,u;if(n.formData)l=wy(n.formData),u=n.formData;else if(n.body instanceof FormData)l=wy(n.body),u=n.body;else if(n.body instanceof URLSearchParams)l=n.body,u=Hw(l);else if(n.body==null)l=new URLSearchParams,u=new FormData;else try{l=new URLSearchParams(n.body),u=Hw(l)}catch{return i()}let c={formMethod:a,formAction:o,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if(Ii(c.formMethod))return{path:r,submission:c};let d=eo(r);return e&&d.search&&K_(d.search)&&l.append("index",""),d.search="?"+l,{path:hl(d),submission:c}}function Fw(t,e,r){r===void 0&&(r=!1);let n=t.findIndex(i=>i.route.id===e);return n>=0?t.slice(0,r?n+1:n):t}function $w(t,e,r,n,i,s,a,o,l,u,c,d,h,f,p,m){let g=m?Jn(m[1])?m[1].error:m[1].data:void 0,v=t.createURL(e.location),b=t.createURL(i),y=r;s&&e.errors?y=Fw(r,Object.keys(e.errors)[0],!0):m&&Jn(m[1])&&(y=Fw(r,m[0]));let T=m?m[1].statusCode:void 0,x=a&&T&&T>=400,_=y.filter((A,k)=>{let{route:I}=A;if(I.lazy)return!0;if(I.loader==null)return!1;if(s)return Sy(I,e.loaderData,e.errors);if(u$(e.loaderData,e.matches[k],A)||l.some(P=>P===A.route.id))return!0;let C=e.matches[k],N=A;return Uw(A,nr({currentUrl:v,currentParams:C.params,nextUrl:b,nextParams:N.params},n,{actionResult:g,actionStatus:T,defaultShouldRevalidate:x?!1:o||v.pathname+v.search===b.pathname+b.search||v.search!==b.search||ID(C,N)}))}),S=[];return d.forEach((A,k)=>{if(s||!r.some(V=>V.route.id===A.routeId)||c.has(k))return;let I=$o(f,A.path,p);if(!I){S.push({key:k,routeId:A.routeId,path:A.path,matches:null,match:null,controller:null});return}let C=e.fetchers.get(k),N=nd(I,A.path),P=!1;h.has(k)?P=!1:u.has(k)?(u.delete(k),P=!0):C&&C.state!=="idle"&&C.data===void 0?P=o:P=Uw(N,nr({currentUrl:v,currentParams:e.matches[e.matches.length-1].params,nextUrl:b,nextParams:r[r.length-1].params},n,{actionResult:g,actionStatus:T,defaultShouldRevalidate:x?!1:o})),P&&S.push({key:k,routeId:A.routeId,path:A.path,matches:I,match:N,controller:new AbortController})}),[_,S]}function Sy(t,e,r){if(t.lazy)return!0;if(!t.loader)return!1;let n=e!=null&&e[t.id]!==void 0,i=r!=null&&r[t.id]!==void 0;return!n&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!n&&!i}function u$(t,e,r){let n=!e||r.route.id!==e.route.id,i=t[r.route.id]===void 0;return n||i}function ID(t,e){let r=t.route.path;return t.pathname!==e.pathname||r!=null&&r.endsWith("*")&&t.params["*"]!==e.params["*"]}function Uw(t,e){if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate(e);if(typeof r=="boolean")return r}return e.defaultShouldRevalidate}function Bw(t,e,r,n,i){var s;let a;if(t){let u=n[t];at(u,"No route found to patch children into: routeId = "+t),u.children||(u.children=[]),a=u.children}else a=r;let o=e.filter(u=>!a.some(c=>kD(u,c))),l=um(o,i,[t||"_","patch",String(((s=a)==null?void 0:s.length)||"0")],n);a.push(...l)}function kD(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((r,n)=>{var i;return(i=e.children)==null?void 0:i.some(s=>kD(r,s))}):!1}async function c$(t,e,r){if(!t.lazy)return;let n=await t.lazy();if(!t.lazy)return;let i=r[t.id];at(i,"No route found in manifest");let s={};for(let a in n){let l=i[a]!==void 0&&a!=="hasErrorBoundary";Yu(!l,'Route "'+i.id+'" has a static property "'+a+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+a+'" will be ignored.')),!l&&!M9.has(a)&&(s[a]=n[a])}Object.assign(i,s),Object.assign(i,nr({},e(i),{lazy:void 0}))}async function d$(t){let{matches:e}=t,r=e.filter(i=>i.shouldLoad);return(await Promise.all(r.map(i=>i.resolve()))).reduce((i,s,a)=>Object.assign(i,{[r[a].route.id]:s}),{})}async function h$(t,e,r,n,i,s,a,o,l,u){let c=s.map(f=>f.route.lazy?c$(f.route,l,o):void 0),d=s.map((f,p)=>{let m=c[p],g=i.some(b=>b.route.id===f.route.id);return nr({},f,{shouldLoad:g,resolve:async b=>(b&&n.method==="GET"&&(f.route.lazy||f.route.loader)&&(g=!0),g?f$(e,n,f,m,b,u):Promise.resolve({type:Ft.data,result:void 0}))})}),h=await t({matches:d,request:n,params:s[0].params,fetcherKey:a,context:u});try{await Promise.all(c)}catch{}return h}async function f$(t,e,r,n,i,s){let a,o,l=u=>{let c,d=new Promise((p,m)=>c=m);o=()=>c(),e.signal.addEventListener("abort",o);let h=p=>typeof u!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+r.route.id+"]"))):u({request:e,params:r.params,context:s},...p!==void 0?[p]:[]),f=(async()=>{try{return{type:"data",result:await(i?i(m=>h(m)):h())}}catch(p){return{type:"error",result:p}}})();return Promise.race([f,d])};try{let u=r.route[t];if(n)if(u){let c,[d]=await Promise.all([l(u).catch(h=>{c=h}),n]);if(c!==void 0)throw c;a=d}else if(await n,u=r.route[t],u)a=await l(u);else if(t==="action"){let c=new URL(e.url),d=c.pathname+c.search;throw Bn(405,{method:e.method,pathname:d,routeId:r.route.id})}else return{type:Ft.data,result:void 0};else if(u)a=await l(u);else{let c=new URL(e.url),d=c.pathname+c.search;throw Bn(404,{pathname:d})}at(a.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(u){return{type:Ft.error,result:u}}finally{o&&e.signal.removeEventListener("abort",o)}return a}async function p$(t){let{result:e,type:r}=t;if(DD(e)){let u;try{let c=e.headers.get("Content-Type");c&&/\bapplication\/json\b/.test(c)?e.body==null?u=null:u=await e.json():u=await e.text()}catch(c){return{type:Ft.error,error:c}}return r===Ft.error?{type:Ft.error,error:new cm(e.status,e.statusText,u),statusCode:e.status,headers:e.headers}:{type:Ft.data,data:u,statusCode:e.status,headers:e.headers}}if(r===Ft.error){if(qw(e)){var n;if(e.data instanceof Error){var i;return{type:Ft.error,error:e.data,statusCode:(i=e.init)==null?void 0:i.status}}e=new cm(((n=e.init)==null?void 0:n.status)||500,void 0,e.data)}return{type:Ft.error,error:e,statusCode:Og(e)?e.status:void 0}}if(y$(e)){var s,a;return{type:Ft.deferred,deferredData:e,statusCode:(s=e.init)==null?void 0:s.status,headers:((a=e.init)==null?void 0:a.headers)&&new Headers(e.init.headers)}}if(qw(e)){var o,l;return{type:Ft.data,data:e.data,statusCode:(o=e.init)==null?void 0:o.status,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}}return{type:Ft.data,data:e}}function m$(t,e,r,n,i,s){let a=t.headers.get("Location");if(at(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!W_.test(a)){let o=n.slice(0,n.findIndex(l=>l.route.id===r)+1);a=xy(new URL(e.url),o,i,!0,a,s),t.headers.set("Location",a)}return t}function jw(t,e,r){if(W_.test(t)){let n=t,i=n.startsWith("//")?new URL(e.protocol+n):new URL(n),s=mc(i.pathname,r)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function Al(t,e,r,n){let i=t.createURL(LD(e)).toString(),s={signal:r};if(n&&Ii(n.formMethod)){let{formMethod:a,formEncType:o}=n;s.method=a.toUpperCase(),o==="application/json"?(s.headers=new Headers({"Content-Type":o}),s.body=JSON.stringify(n.json)):o==="text/plain"?s.body=n.text:o==="application/x-www-form-urlencoded"&&n.formData?s.body=wy(n.formData):s.body=n.formData}return new Request(i,s)}function wy(t){let e=new URLSearchParams;for(let[r,n]of t.entries())e.append(r,typeof n=="string"?n:n.name);return e}function Hw(t){let e=new FormData;for(let[r,n]of t.entries())e.append(r,n);return e}function g$(t,e,r,n,i){let s={},a=null,o,l=!1,u={},c=r&&Jn(r[1])?r[1].error:void 0;return t.forEach(d=>{if(!(d.route.id in e))return;let h=d.route.id,f=e[h];if(at(!Go(f),"Cannot handle redirect results in processLoaderData"),Jn(f)){let p=f.error;c!==void 0&&(p=c,c=void 0),a=a||{};{let m=Uo(t,h);a[m.route.id]==null&&(a[m.route.id]=p)}s[h]=void 0,l||(l=!0,o=Og(f.error)?f.error.status:500),f.headers&&(u[h]=f.headers)}else Na(f)?(n.set(h,f.deferredData),s[h]=f.deferredData.data,f.statusCode!=null&&f.statusCode!==200&&!l&&(o=f.statusCode),f.headers&&(u[h]=f.headers)):(s[h]=f.data,f.statusCode&&f.statusCode!==200&&!l&&(o=f.statusCode),f.headers&&(u[h]=f.headers))}),c!==void 0&&r&&(a={[r[0]]:c},s[r[0]]=void 0),{loaderData:s,errors:a,statusCode:o||200,loaderHeaders:u}}function Vw(t,e,r,n,i,s,a){let{loaderData:o,errors:l}=g$(e,r,n,a);return i.forEach(u=>{let{key:c,match:d,controller:h}=u,f=s[c];if(at(f,"Did not find corresponding fetcher result"),!(h&&h.signal.aborted))if(Jn(f)){let p=Uo(t.matches,d==null?void 0:d.route.id);l&&l[p.route.id]||(l=nr({},l,{[p.route.id]:f.error})),t.fetchers.delete(c)}else if(Go(f))at(!1,"Unhandled fetcher revalidation redirect");else if(Na(f))at(!1,"Unhandled fetcher deferred data");else{let p=fa(f.data);t.fetchers.set(c,p)}}),{loaderData:o,errors:l}}function Ww(t,e,r,n){let i=nr({},e);for(let s of r){let a=s.route.id;if(e.hasOwnProperty(a)?e[a]!==void 0&&(i[a]=e[a]):t[a]!==void 0&&s.route.loader&&(i[a]=t[a]),n&&n.hasOwnProperty(a))break}return i}function Gw(t){return t?Jn(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Uo(t,e){return(e?t.slice(0,t.findIndex(n=>n.route.id===e)+1):[...t]).reverse().find(n=>n.route.hasErrorBoundary===!0)||t[0]}function Kw(t){let e=t.length===1?t[0]:t.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Bn(t,e){let{pathname:r,routeId:n,method:i,type:s,message:a}=e===void 0?{}:e,o="Unknown Server Error",l="Unknown @remix-run/router error";return t===400?(o="Bad Request",i&&r&&n?l="You made a "+i+' request to "'+r+'" but '+('did not provide a `loader` for route "'+n+'", ')+"so there is no way to handle the request.":s==="defer-action"?l="defer() is not supported in actions":s==="invalid-body"&&(l="Unable to encode submission body")):t===403?(o="Forbidden",l='Route "'+n+'" does not match URL "'+r+'"'):t===404?(o="Not Found",l='No route matches URL "'+r+'"'):t===405&&(o="Method Not Allowed",i&&r&&n?l="You made a "+i.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+n+'", ')+"so there is no way to handle the request.":i&&(l='Invalid request method "'+i.toUpperCase()+'"')),new cm(t||500,o,new Error(l),!0)}function lf(t){let e=Object.entries(t);for(let r=e.length-1;r>=0;r--){let[n,i]=e[r];if(Go(i))return{key:n,result:i}}}function LD(t){let e=typeof t=="string"?eo(t):t;return hl(nr({},e,{hash:""}))}function v$(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function b$(t){return DD(t.result)&&n$.has(t.result.status)}function Na(t){return t.type===Ft.deferred}function Jn(t){return t.type===Ft.error}function Go(t){return(t&&t.type)===Ft.redirect}function qw(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function y$(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function DD(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function E$(t){return r$.has(t.toLowerCase())}function Ii(t){return e$.has(t.toLowerCase())}async function _$(t,e,r,n,i){let s=Object.entries(e);for(let a=0;a<s.length;a++){let[o,l]=s[a],u=t.find(h=>(h==null?void 0:h.route.id)===o);if(!u)continue;let c=n.find(h=>h.route.id===u.route.id),d=c!=null&&!ID(c,u)&&(i&&i[u.route.id])!==void 0;Na(l)&&d&&await G_(l,r,!1).then(h=>{h&&(e[o]=h)})}}async function T$(t,e,r){for(let n=0;n<r.length;n++){let{key:i,routeId:s,controller:a}=r[n],o=e[i];t.find(u=>(u==null?void 0:u.route.id)===s)&&Na(o)&&(at(a,"Expected an AbortController for revalidating fetcher deferred result"),await G_(o,a.signal,!0).then(u=>{u&&(e[i]=u)}))}}async function G_(t,e,r){if(r===void 0&&(r=!1),!await t.deferredData.resolveData(e)){if(r)try{return{type:Ft.data,data:t.deferredData.unwrappedData}}catch(i){return{type:Ft.error,error:i}}return{type:Ft.data,data:t.deferredData.data}}}function K_(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function nd(t,e){let r=typeof e=="string"?eo(e).search:e.search;if(t[t.length-1].route.index&&K_(r||""))return t[t.length-1];let n=AD(t);return n[n.length-1]}function zw(t){let{formMethod:e,formAction:r,formEncType:n,text:i,formData:s,json:a}=t;if(!(!e||!r||!n)){if(i!=null)return{formMethod:e,formAction:r,formEncType:n,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:r,formEncType:n,formData:s,json:void 0,text:void 0};if(a!==void 0)return{formMethod:e,formAction:r,formEncType:n,formData:void 0,json:a,text:void 0}}}function $v(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function x$(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Lc(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function S$(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function fa(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function w$(t,e){try{let r=t.sessionStorage.getItem(CD);if(r){let n=JSON.parse(r);for(let[i,s]of Object.entries(n||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function A$(t,e){if(e.size>0){let r={};for(let[n,i]of e)r[n]=[...i];try{t.sessionStorage.setItem(CD,JSON.stringify(r))}catch(n){Yu(!1,"Failed to save applied view transitions in sessionStorage ("+n+").")}}}/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dm(){return dm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dm.apply(this,arguments)}const Mg=R.createContext(null),OD=R.createContext(null),to=R.createContext(null),q_=R.createContext(null),Ss=R.createContext({outlet:null,matches:[],isDataRoute:!1}),MD=R.createContext(null);function R$(t,e){let{relative:r}=e===void 0?{}:e;gc()||at(!1);let{basename:n,navigator:i}=R.useContext(to),{hash:s,pathname:a,search:o}=ND(t,{relative:r}),l=a;return n!=="/"&&(l=a==="/"?n:Ks([n,a])),i.createHref({pathname:l,search:o,hash:s})}function gc(){return R.useContext(q_)!=null}function ai(){return gc()||at(!1),R.useContext(q_).location}function PD(t){R.useContext(to).static||R.useLayoutEffect(t)}function Fi(){let{isDataRoute:t}=R.useContext(Ss);return t?B$():C$()}function C$(){gc()||at(!1);let t=R.useContext(Mg),{basename:e,future:r,navigator:n}=R.useContext(to),{matches:i}=R.useContext(Ss),{pathname:s}=ai(),a=JSON.stringify(Lg(i,r.v7_relativeSplatPath)),o=R.useRef(!1);return PD(()=>{o.current=!0}),R.useCallback(function(u,c){if(c===void 0&&(c={}),!o.current)return;if(typeof u=="number"){n.go(u);return}let d=Dg(u,JSON.parse(a),s,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ks([e,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[e,n,a,s,t])}const I$=R.createContext(null);function k$(t){let e=R.useContext(Ss).outlet;return e&&R.createElement(I$.Provider,{value:t},e)}function z_(){let{matches:t}=R.useContext(Ss),e=t[t.length-1];return e?e.params:{}}function ND(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=R.useContext(to),{matches:i}=R.useContext(Ss),{pathname:s}=ai(),a=JSON.stringify(Lg(i,n.v7_relativeSplatPath));return R.useMemo(()=>Dg(t,JSON.parse(a),s,r==="path"),[t,a,s,r])}function L$(t,e,r,n){gc()||at(!1);let{navigator:i}=R.useContext(to),{matches:s}=R.useContext(Ss),a=s[s.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let u=ai(),c;c=u;let d=c.pathname||"/",h=d;if(l!=="/"){let m=l.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(m.length).join("/")}let f=$o(t,{pathname:h});return N$(f&&f.map(m=>Object.assign({},m,{params:Object.assign({},o,m.params),pathname:Ks([l,i.encodeLocation?i.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?l:Ks([l,i.encodeLocation?i.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),s,r,n)}function D$(){let t=UD(),e=Og(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),r?R.createElement("pre",{style:i},r):null,null)}const O$=R.createElement(D$,null);class M$ extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?R.createElement(Ss.Provider,{value:this.props.routeContext},R.createElement(MD.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function P$(t){let{routeContext:e,match:r,children:n}=t,i=R.useContext(Mg);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),R.createElement(Ss.Provider,{value:e},n)}function N$(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var s;if(!r)return null;if(r.errors)t=r.matches;else if((s=n)!=null&&s.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,o=(i=r)==null?void 0:i.errors;if(o!=null){let c=a.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);c>=0||at(!1),a=a.slice(0,Math.min(a.length,c+1))}let l=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let c=0;c<a.length;c++){let d=a[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:h,errors:f}=r,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((c,d,h)=>{let f,p=!1,m=null,g=null;r&&(f=o&&d.route.id?o[d.route.id]:void 0,m=d.route.errorElement||O$,l&&(u<0&&h===0?(p=!0,g=null):u===h&&(p=!0,g=d.route.hydrateFallbackElement||null)));let v=e.concat(a.slice(0,h+1)),b=()=>{let y;return f?y=m:p?y=g:d.route.Component?y=R.createElement(d.route.Component,null):d.route.element?y=d.route.element:y=c,R.createElement(P$,{match:d,routeContext:{outlet:c,matches:v,isDataRoute:r!=null},children:y})};return r&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?R.createElement(M$,{location:r.location,revalidation:r.revalidation,component:m,error:f,children:b(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):b()},null)}var FD=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(FD||{}),hm=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(hm||{});function F$(t){let e=R.useContext(Mg);return e||at(!1),e}function $$(t){let e=R.useContext(OD);return e||at(!1),e}function U$(t){let e=R.useContext(Ss);return e||at(!1),e}function $D(t){let e=U$(),r=e.matches[e.matches.length-1];return r.route.id||at(!1),r.route.id}function UD(){var t;let e=R.useContext(MD),r=$$(hm.UseRouteError),n=$D(hm.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function B$(){let{router:t}=F$(FD.UseNavigateStable),e=$D(hm.UseNavigateStable),r=R.useRef(!1);return PD(()=>{r.current=!0}),R.useCallback(function(i,s){s===void 0&&(s={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,dm({fromRouteId:e},s)))},[t,e])}const Yw={};function j$(t,e){Yw[e]||(Yw[e]=!0,console.warn(e))}const Rl=(t,e,r)=>j$(t,"⚠️ React Router Future Flag Warning: "+e+". "+("You can use the `"+t+"` future flag to opt-in early. ")+("For more information, see "+r+"."));function H$(t,e){t!=null&&t.v7_startTransition||Rl("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(t!=null&&t.v7_relativeSplatPath)&&(!e||!e.v7_relativeSplatPath)&&Rl("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath"),e&&(e.v7_fetcherPersist||Rl("v7_fetcherPersist","The persistence behavior of fetchers is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist"),e.v7_normalizeFormMethod||Rl("v7_normalizeFormMethod","Casing of `formMethod` fields is being normalized to uppercase in v7","https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod"),e.v7_partialHydration||Rl("v7_partialHydration","`RouterProvider` hydration behavior is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_partialhydration"),e.v7_skipActionErrorRevalidation||Rl("v7_skipActionErrorRevalidation","The revalidation behavior after 4xx/5xx `action` responses is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation"))}function Y_(t){let{to:e,replace:r,state:n,relative:i}=t;gc()||at(!1);let{future:s,static:a}=R.useContext(to),{matches:o}=R.useContext(Ss),{pathname:l}=ai(),u=Fi(),c=Dg(e,Lg(o,s.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(c);return R.useEffect(()=>u(JSON.parse(d),{replace:r,state:n,relative:i}),[u,d,i,r,n]),null}function BD(t){return k$(t.context)}function V$(t){let{basename:e="/",children:r=null,location:n,navigationType:i=xr.Pop,navigator:s,static:a=!1,future:o}=t;gc()&&at(!1);let l=e.replace(/^\/*/,"/"),u=R.useMemo(()=>({basename:l,navigator:s,static:a,future:dm({v7_relativeSplatPath:!1},o)}),[l,o,s,a]);typeof n=="string"&&(n=eo(n));let{pathname:c="/",search:d="",hash:h="",state:f=null,key:p="default"}=n,m=R.useMemo(()=>{let g=mc(c,l);return g==null?null:{location:{pathname:g,search:d,hash:h,state:f,key:p},navigationType:i}},[l,c,d,h,f,p,i]);return m==null?null:R.createElement(to.Provider,{value:u},R.createElement(q_.Provider,{children:r,value:m}))}new Promise(()=>{});function W$(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:R.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:R.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:R.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ih(){return ih=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ih.apply(this,arguments)}function G$(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function K$(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function q$(t,e){return t.button===0&&(!e||e==="_self")&&!K$(t)}const z$=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Y$="6";try{window.__reactRouterVersion=Y$}catch{}function X$(t,e){return o$({basename:void 0,future:ih({},void 0,{v7_prependBasename:!0}),history:L9({window:void 0}),hydrationData:Z$(),routes:t,mapRouteProperties:W$,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function Z$(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=ih({},e,{errors:Q$(e.errors)})),e}function Q$(t){if(!t)return null;let e=Object.entries(t),r={};for(let[n,i]of e)if(i&&i.__type==="RouteErrorResponse")r[n]=new cm(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let a=new s(i.message);a.stack="",r[n]=a}catch{}}if(r[n]==null){let s=new Error(i.message);s.stack="",r[n]=s}}else r[n]=i;return r}const J$=R.createContext({isTransitioning:!1}),eU=R.createContext(new Map),tU="startTransition",Xw=zF[tU],rU="flushSync",Zw=YF[rU];function nU(t){Xw?Xw(t):t()}function Dc(t){Zw?Zw(t):t()}class iU{constructor(){this.status="pending",this.promise=new Promise((e,r)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",e(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",r(n))}})}}function sU(t){let{fallbackElement:e,router:r,future:n}=t,[i,s]=R.useState(r.state),[a,o]=R.useState(),[l,u]=R.useState({isTransitioning:!1}),[c,d]=R.useState(),[h,f]=R.useState(),[p,m]=R.useState(),g=R.useRef(new Map),{v7_startTransition:v}=n||{},b=R.useCallback(A=>{v?nU(A):A()},[v]),y=R.useCallback((A,k)=>{let{deletedFetchers:I,flushSync:C,viewTransitionOpts:N}=k;I.forEach(V=>g.current.delete(V)),A.fetchers.forEach((V,M)=>{V.data!==void 0&&g.current.set(M,V.data)});let P=r.window==null||r.window.document==null||typeof r.window.document.startViewTransition!="function";if(!N||P){C?Dc(()=>s(A)):b(()=>s(A));return}if(C){Dc(()=>{h&&(c&&c.resolve(),h.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:N.currentLocation,nextLocation:N.nextLocation})});let V=r.window.document.startViewTransition(()=>{Dc(()=>s(A))});V.finished.finally(()=>{Dc(()=>{d(void 0),f(void 0),o(void 0),u({isTransitioning:!1})})}),Dc(()=>f(V));return}h?(c&&c.resolve(),h.skipTransition(),m({state:A,currentLocation:N.currentLocation,nextLocation:N.nextLocation})):(o(A),u({isTransitioning:!0,flushSync:!1,currentLocation:N.currentLocation,nextLocation:N.nextLocation}))},[r.window,h,c,g,b]);R.useLayoutEffect(()=>r.subscribe(y),[r,y]),R.useEffect(()=>{l.isTransitioning&&!l.flushSync&&d(new iU)},[l]),R.useEffect(()=>{if(c&&a&&r.window){let A=a,k=c.promise,I=r.window.document.startViewTransition(async()=>{b(()=>s(A)),await k});I.finished.finally(()=>{d(void 0),f(void 0),o(void 0),u({isTransitioning:!1})}),f(I)}},[b,a,c,r.window]),R.useEffect(()=>{c&&a&&i.location.key===a.location.key&&c.resolve()},[c,h,i.location,a]),R.useEffect(()=>{!l.isTransitioning&&p&&(o(p.state),u({isTransitioning:!0,flushSync:!1,currentLocation:p.currentLocation,nextLocation:p.nextLocation}),m(void 0))},[l.isTransitioning,p]),R.useEffect(()=>{},[]);let T=R.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:A=>r.navigate(A),push:(A,k,I)=>r.navigate(A,{state:k,preventScrollReset:I==null?void 0:I.preventScrollReset}),replace:(A,k,I)=>r.navigate(A,{replace:!0,state:k,preventScrollReset:I==null?void 0:I.preventScrollReset})}),[r]),x=r.basename||"/",_=R.useMemo(()=>({router:r,navigator:T,static:!1,basename:x}),[r,T,x]),S=R.useMemo(()=>({v7_relativeSplatPath:r.future.v7_relativeSplatPath}),[r.future.v7_relativeSplatPath]);return R.useEffect(()=>H$(n,r.future),[n,r.future]),R.createElement(R.Fragment,null,R.createElement(Mg.Provider,{value:_},R.createElement(OD.Provider,{value:i},R.createElement(eU.Provider,{value:g.current},R.createElement(J$.Provider,{value:l},R.createElement(V$,{basename:x,location:i.location,navigationType:i.historyAction,navigator:T,future:S},i.initialized||r.future.v7_partialHydration?R.createElement(aU,{routes:r.routes,future:r.future,state:i}):e))))),null)}const aU=R.memo(oU);function oU(t){let{routes:e,future:r,state:n}=t;return L$(e,void 0,n,r)}const lU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",uU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cU=R.forwardRef(function(e,r){let{onClick:n,relative:i,reloadDocument:s,replace:a,state:o,target:l,to:u,preventScrollReset:c,viewTransition:d}=e,h=G$(e,z$),{basename:f}=R.useContext(to),p,m=!1;if(typeof u=="string"&&uU.test(u)&&(p=u,lU))try{let y=new URL(window.location.href),T=u.startsWith("//")?new URL(y.protocol+u):new URL(u),x=mc(T.pathname,f);T.origin===y.origin&&x!=null?u=x+T.search+T.hash:m=!0}catch{}let g=R$(u,{relative:i}),v=dU(u,{replace:a,state:o,target:l,preventScrollReset:c,relative:i,viewTransition:d});function b(y){n&&n(y),y.defaultPrevented||v(y)}return R.createElement("a",ih({},h,{href:p||g,onClick:m||s?n:b,ref:r,target:l}))});var Qw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Qw||(Qw={}));var Jw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Jw||(Jw={}));function dU(t,e){let{target:r,replace:n,state:i,preventScrollReset:s,relative:a,viewTransition:o}=e===void 0?{}:e,l=Fi(),u=ai(),c=ND(t,{relative:a});return R.useCallback(d=>{if(q$(d,r)){d.preventDefault();let h=n!==void 0?n:hl(u)===hl(c);l(t,{replace:h,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[u,l,c,n,i,r,t,s,a,o])}const hU="modulepreload",fU=function(t){return"/"+t},eA={},Vl=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(r.map(l=>{if(l=fU(l),l in eA)return;eA[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":hU,u||(d.as="script"),d.crossOrigin="",d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),u)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};function pU(t={}){const{immediate:e=!1,onNeedRefresh:r,onOfflineReady:n,onRegistered:i,onRegisteredSW:s,onRegisterError:a}=t;let o,l;const u=async(d=!0)=>{await l};async function c(){if("serviceWorker"in navigator){if(o=await Vl(async()=>{const{Workbox:d}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:d}},[]).then(({Workbox:d})=>new d("/sw.js",{scope:"/",type:"classic"})).catch(d=>{a==null||a(d)}),!o)return;o.addEventListener("activated",d=>{(d.isUpdate||d.isExternal)&&window.location.reload()}),o.addEventListener("installed",d=>{d.isUpdate||n==null||n()}),o.register({immediate:e}).then(d=>{s?s("/sw.js",d):i==null||i(d)}).catch(d=>{a==null||a(d)})}}return l=c(),u}const mU=60*60*1e3,gU=pU({onRegisteredSW(t,e){e&&setInterval(async()=>{if(e.installing||!navigator||"connection"in navigator&&!navigator.onLine)return;const r=await fetch(t,{cache:"no-store",headers:{cache:"no-store","cache-control":"no-cache"}});(r==null?void 0:r.status)===200&&await e.update()},mU)}});let xi=[],aa=0;const uf=4;let C0=0,vc=t=>{let e=[],r={get(){return r.lc||r.listen(()=>{})(),r.value},lc:0,listen(n){return r.lc=e.push(n),()=>{for(let s=aa+uf;s<xi.length;)xi[s]===n?xi.splice(s,uf):s+=uf;let i=e.indexOf(n);~i&&(e.splice(i,1),--r.lc||r.off())}},notify(n,i){C0++;let s=!xi.length;for(let a of e)xi.push(a,r.value,n,i);if(s){for(aa=0;aa<xi.length;aa+=uf)xi[aa](xi[aa+1],xi[aa+2],xi[aa+3]);xi.length=0}},off(){},set(n){let i=r.value;i!==n&&(r.value=n,r.notify(i))},subscribe(n){let i=r.listen(n);return n(r.value),i},value:t};return r};const vU=5,cf=6,df=10;let bU=(t,e,r,n)=>(t.events=t.events||{},t.events[r+df]||(t.events[r+df]=n(i=>{t.events[r].reduceRight((s,a)=>(a(s),s),{shared:{},...i})})),t.events[r]=t.events[r]||[],t.events[r].push(e),()=>{let i=t.events[r],s=i.indexOf(e);i.splice(s,1),i.length||(delete t.events[r],t.events[r+df](),delete t.events[r+df])}),yU=1e3,jD=(t,e)=>bU(t,n=>{let i=e(n);i&&t.events[cf].push(i)},vU,n=>{let i=t.listen;t.listen=(...a)=>(!t.lc&&!t.active&&(t.active=!0,n()),i(...a));let s=t.off;return t.events[cf]=[],t.off=()=>{s(),setTimeout(()=>{if(t.active&&!t.lc){t.active=!1;for(let a of t.events[cf])a();t.events[cf]=[]}},yU)},()=>{t.listen=i,t.off=s}}),EU=(t,e,r)=>{Array.isArray(t)||(t=[t]);let n,i,s=()=>{if(i===C0)return;i=C0;let u=t.map(c=>c.get());if(!n||u.some((c,d)=>c!==n[d])){n=u;let c=e(...u);c&&c.then&&c.t?c.then(d=>{n===u&&a.set(d)}):(a.set(c),i=C0)}},a=vc(void 0),o=a.get;a.get=()=>(s(),o());let l=s;return jD(a,()=>{let u=t.map(c=>c.listen(l));return s(),()=>{for(let c of u)c()}}),a},Cn=(t,e)=>EU(t,e);function _U(t,e,r){let n=new Set([...e,void 0]);return t.listen((i,s,a)=>{n.has(a)&&r(i,s,a)})}let bc=(t={})=>{let e=vc(t);return e.setKey=function(r,n){let i=e.value;typeof n>"u"&&r in e.value?(e.value={...e.value},delete e.value[r],e.notify(i,r)):e.value[r]!==n&&(e.value={...e.value,[r]:n},e.notify(i,r))},e},tA=(t,e)=>r=>{t.current=r,e()};function oe(t,{keys:e,deps:r=[t,e]}={}){let n=R.useRef();n.current=t.get();let i=R.useCallback(a=>(e==null?void 0:e.length)>0?_U(t,e,tA(n,a)):t.listen(tA(n,a)),r),s=()=>n.current;return R.useSyncExternalStore(i,s,s)}const TU=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,xU=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,SU=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function wU(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){AU(t);return}return e}function AU(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function RU(t,e={}){if(typeof t!="string")return t;const r=t.trim();if(t[0]==='"'&&t.endsWith('"')&&!t.includes("\\"))return r.slice(1,-1);if(r.length<=9){const n=r.toLowerCase();if(n==="true")return!0;if(n==="false")return!1;if(n==="undefined")return;if(n==="null")return null;if(n==="nan")return Number.NaN;if(n==="infinity")return Number.POSITIVE_INFINITY;if(n==="-infinity")return Number.NEGATIVE_INFINITY}if(!SU.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(TU.test(t)||xU.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,wU)}return JSON.parse(t)}catch(n){if(e.strict)throw n;return t}}const CU=/#/g,IU=/&/g,kU=/\//g,LU=/=/g,X_=/\+/g,DU=/%5e/gi,OU=/%60/gi,MU=/%7c/gi,PU=/%20/gi;function NU(t){return encodeURI(""+t).replace(MU,"|")}function Ay(t){return NU(typeof t=="string"?t:JSON.stringify(t)).replace(X_,"%2B").replace(PU,"+").replace(CU,"%23").replace(IU,"%26").replace(OU,"`").replace(DU,"^").replace(kU,"%2F")}function Uv(t){return Ay(t).replace(LU,"%3D")}function HD(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function FU(t){return HD(t.replace(X_," "))}function $U(t){return HD(t.replace(X_," "))}function UU(t=""){const e={};t[0]==="?"&&(t=t.slice(1));for(const r of t.split("&")){const n=r.match(/([^=]+)=?(.*)/)||[];if(n.length<2)continue;const i=FU(n[1]);if(i==="__proto__"||i==="constructor")continue;const s=$U(n[2]||"");e[i]===void 0?e[i]=s:Array.isArray(e[i])?e[i].push(s):e[i]=[e[i],s]}return e}function BU(t,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(r=>`${Uv(t)}=${Ay(r)}`).join("&"):`${Uv(t)}=${Ay(e)}`:Uv(t)}function jU(t){return Object.keys(t).filter(e=>t[e]!==void 0).map(e=>BU(e,t[e])).filter(Boolean).join("&")}const HU=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,VU=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,WU=/^([/\\]\s*){2,}[^/\\]/,GU=/^\.?\//;function VD(t,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?HU.test(t):VU.test(t)||(e.acceptRelative?WU.test(t):!1)}function KU(t="",e){return t.endsWith("/")}function qU(t="",e){return(KU(t)?t.slice(0,-1):t)||"/"}function zU(t="",e){return t.endsWith("/")?t:t+"/"}function YU(t,e){if(ZU(e)||VD(t))return t;const r=qU(e);return t.startsWith(r)?t:JU(r,t)}function XU(t,e){const r=eB(t),n={...UU(r.search),...e};return r.search=jU(n),tB(r)}function ZU(t){return!t||t==="/"}function QU(t){return t&&t!=="/"}function JU(t,...e){let r=t||"";for(const n of e.filter(i=>QU(i)))if(r){const i=n.replace(GU,"");r=zU(r)+i}else r=n;return r}const WD=Symbol.for("ufo:protocolRelative");function eB(t="",e){const r=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(r){const[,d,h=""]=r;return{protocol:d.toLowerCase(),pathname:h,href:d+h,auth:"",host:"",search:"",hash:""}}if(!VD(t,{acceptRelative:!0}))return rA(t);const[,n="",i,s=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,a="",o=""]=s.match(/([^#/?]*)(.*)?/)||[];n==="file:"&&(o=o.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:l,search:u,hash:c}=rA(o);return{protocol:n.toLowerCase(),auth:i?i.slice(0,Math.max(0,i.length-1)):"",host:a,pathname:l,search:u,hash:c,[WD]:!n}}function rA(t=""){const[e="",r="",n=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:r,hash:n}}function tB(t){const e=t.pathname||"",r=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",n=t.hash||"",i=t.auth?t.auth+"@":"",s=t.host||"";return(t.protocol||t[WD]?(t.protocol||"")+"//":"")+i+s+e+r+n}let rB=class extends Error{constructor(e,r){super(e,r),this.name="FetchError",r!=null&&r.cause&&!this.cause&&(this.cause=r.cause)}};function nB(t){var l,u,c,d,h;const e=((l=t.error)==null?void 0:l.message)||((u=t.error)==null?void 0:u.toString())||"",r=((c=t.request)==null?void 0:c.method)||((d=t.options)==null?void 0:d.method)||"GET",n=((h=t.request)==null?void 0:h.url)||String(t.request)||"/",i=`[${r}] ${JSON.stringify(n)}`,s=t.response?`${t.response.status} ${t.response.statusText}`:"<no response>",a=`${i}: ${s}${e?` ${e}`:""}`,o=new rB(a,t.error?{cause:t.error}:void 0);for(const f of["request","options","response"])Object.defineProperty(o,f,{get(){return t[f]}});for(const[f,p]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(o,f,{get(){return t.response&&t.response[p]}});return o}const iB=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function nA(t="GET"){return iB.has(t.toUpperCase())}function sB(t){if(t===void 0)return!1;const e=typeof t;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(t)?!0:t.buffer?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}const aB=new Set(["image/svg","application/xml","application/xhtml","application/html"]),oB=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function lB(t=""){if(!t)return"json";const e=t.split(";").shift()||"";return oB.test(e)?"json":aB.has(e)||e.startsWith("text/")?"text":"blob"}function uB(t,e,r,n){const i=cB((e==null?void 0:e.headers)??(t==null?void 0:t.headers),r==null?void 0:r.headers,n);let s;return(r!=null&&r.query||r!=null&&r.params||e!=null&&e.params||e!=null&&e.query)&&(s={...r==null?void 0:r.params,...r==null?void 0:r.query,...e==null?void 0:e.params,...e==null?void 0:e.query}),{...r,...e,query:s,params:s,headers:i}}function cB(t,e,r){if(!e)return new r(t);const n=new r(e);if(t)for(const[i,s]of Symbol.iterator in t||Array.isArray(t)?t:new r(t))n.set(i,s);return n}async function hf(t,e){if(e)if(Array.isArray(e))for(const r of e)await r(t);else await e(t)}const dB=new Set([408,409,425,429,500,502,503,504]),hB=new Set([101,204,205,304]);function GD(t={}){const{fetch:e=globalThis.fetch,Headers:r=globalThis.Headers,AbortController:n=globalThis.AbortController}=t;async function i(o){const l=o.error&&o.error.name==="AbortError"&&!o.options.timeout||!1;if(o.options.retry!==!1&&!l){let c;typeof o.options.retry=="number"?c=o.options.retry:c=nA(o.options.method)?0:1;const d=o.response&&o.response.status||500;if(c>0&&(Array.isArray(o.options.retryStatusCodes)?o.options.retryStatusCodes.includes(d):dB.has(d))){const h=typeof o.options.retryDelay=="function"?o.options.retryDelay(o):o.options.retryDelay||0;return h>0&&await new Promise(f=>setTimeout(f,h)),s(o.request,{...o.options,retry:c-1})}}const u=nB(o);throw Error.captureStackTrace&&Error.captureStackTrace(u,s),u}const s=async function(l,u={}){const c={request:l,options:uB(l,u,t.defaults,r),response:void 0,error:void 0};c.options.method&&(c.options.method=c.options.method.toUpperCase()),c.options.onRequest&&await hf(c,c.options.onRequest),typeof c.request=="string"&&(c.options.baseURL&&(c.request=YU(c.request,c.options.baseURL)),c.options.query&&(c.request=XU(c.request,c.options.query),delete c.options.query),"query"in c.options&&delete c.options.query,"params"in c.options&&delete c.options.params),c.options.body&&nA(c.options.method)&&(sB(c.options.body)?(c.options.body=typeof c.options.body=="string"?c.options.body:JSON.stringify(c.options.body),c.options.headers=new r(c.options.headers||{}),c.options.headers.has("content-type")||c.options.headers.set("content-type","application/json"),c.options.headers.has("accept")||c.options.headers.set("accept","application/json")):("pipeTo"in c.options.body&&typeof c.options.body.pipeTo=="function"||typeof c.options.body.pipe=="function")&&("duplex"in c.options||(c.options.duplex="half")));let d;if(!c.options.signal&&c.options.timeout){const f=new n;d=setTimeout(()=>{const p=new Error("[TimeoutError]: The operation was aborted due to timeout");p.name="TimeoutError",p.code=23,f.abort(p)},c.options.timeout),c.options.signal=f.signal}try{c.response=await e(c.request,c.options)}catch(f){return c.error=f,c.options.onRequestError&&await hf(c,c.options.onRequestError),await i(c)}finally{d&&clearTimeout(d)}if((c.response.body||c.response._bodyInit)&&!hB.has(c.response.status)&&c.options.method!=="HEAD"){const f=(c.options.parseResponse?"json":c.options.responseType)||lB(c.response.headers.get("content-type")||"");switch(f){case"json":{const p=await c.response.text(),m=c.options.parseResponse||RU;c.response._data=m(p);break}case"stream":{c.response._data=c.response.body||c.response._bodyInit;break}default:c.response._data=await c.response[f]()}}return c.options.onResponse&&await hf(c,c.options.onResponse),!c.options.ignoreResponseError&&c.response.status>=400&&c.response.status<600?(c.options.onResponseError&&await hf(c,c.options.onResponseError),await i(c)):c.response},a=async function(l,u){return(await s(l,u))._data};return a.raw=s,a.native=(...o)=>e(...o),a.create=(o={},l={})=>GD({...t,...l,defaults:{...t.defaults,...l.defaults,...o}}),a}const fm=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),fB=fm.fetch?(...t)=>fm.fetch(...t):()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!")),pB=fm.Headers,mB=fm.AbortController,Z_=GD({fetch:fB,Headers:pB,AbortController:mB});let iA=t=>t,Wl={},Ry={addEventListener(){},removeEventListener(){}};function gB(){try{return typeof localStorage<"u"}catch{return!1}}gB()&&(Wl=localStorage);let vB={addEventListener(t,e,r){window.addEventListener("storage",e),window.addEventListener("pageshow",r)},removeEventListener(t,e,r){window.removeEventListener("storage",e),window.removeEventListener("pageshow",r)}};typeof window<"u"&&(Ry=vB);function Q_(t,e=void 0,r={}){let n=r.encode||iA,i=r.decode||iA,s=vc(e),a=s.set;s.set=u=>{typeof u>"u"?delete Wl[t]:Wl[t]=n(u),a(u)};function o(u){u.key===t?u.newValue===null?a(void 0):a(i(u.newValue)):Wl[t]||a(void 0)}function l(){s.set(Wl[t]?i(Wl[t]):e)}return jD(s,()=>{if(l(),r.listen!==!1)return Ry.addEventListener(t,o,l),()=>{Ry.removeEventListener(t,o,l)}}),s}const Cy={server:"",token:"",username:"",password:""},Bh=Q_("auth",Cy,{encode:JSON.stringify,decode:t=>{const e=JSON.parse(t);return{...Cy,...e}}}),KD=t=>Bh.set(t),bB=()=>KD(Cy);var Iy={exports:{}},ky={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function r(i){"@babel/helpers - typeof";return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},r(i)}function n(i){var s=typeof i=="string"||i instanceof String;if(!s){var a=r(i);throw i===null?a="null":a==="object"&&(a=i.constructor.name),new TypeError("Expected a string but received a ".concat(a))}}t.exports=e.default,t.exports.default=e.default})(ky,ky.exports);var J_=ky.exports,Ly={exports:{}},Dy={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;function r(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;for(var s in i)typeof n[s]>"u"&&(n[s]=i[s]);return n}t.exports=e.default,t.exports.default=e.default})(Dy,Dy.exports);var qD=Dy.exports;(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var r=i(J_),n=i(qD);function i(o){return o&&o.__esModule?o:{default:o}}var s={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function a(o,l){(0,r.default)(o),l=(0,n.default)(l,s),l.allow_trailing_dot&&o[o.length-1]==="."&&(o=o.substring(0,o.length-1)),l.allow_wildcard===!0&&o.indexOf("*.")===0&&(o=o.substring(2));var u=o.split("."),c=u[u.length-1];return l.require_tld&&(u.length<2||!l.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(c)||/\s/.test(c))||!l.allow_numeric_tld&&/^\d+$/.test(c)?!1:u.every(function(d){return!(d.length>63&&!l.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(d)||/[\uff01-\uff5e]/.test(d)||/^-|-$/.test(d)||!l.allow_underscores&&/_/.test(d))})}t.exports=e.default,t.exports.default=e.default})(Ly,Ly.exports);var yB=Ly.exports,Oy={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var r=n(J_);function n(c){return c&&c.__esModule?c:{default:c}}var i="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",s="(".concat(i,"[.]){3}").concat(i),a=new RegExp("^".concat(s,"$")),o="(?:[0-9a-fA-F]{1,4})",l=new RegExp("^("+"(?:".concat(o,":){7}(?:").concat(o,"|:)|")+"(?:".concat(o,":){6}(?:").concat(s,"|:").concat(o,"|:)|")+"(?:".concat(o,":){5}(?::").concat(s,"|(:").concat(o,"){1,2}|:)|")+"(?:".concat(o,":){4}(?:(:").concat(o,"){0,1}:").concat(s,"|(:").concat(o,"){1,3}|:)|")+"(?:".concat(o,":){3}(?:(:").concat(o,"){0,2}:").concat(s,"|(:").concat(o,"){1,4}|:)|")+"(?:".concat(o,":){2}(?:(:").concat(o,"){0,3}:").concat(s,"|(:").concat(o,"){1,5}|:)|")+"(?:".concat(o,":){1}(?:(:").concat(o,"){0,4}:").concat(s,"|(:").concat(o,"){1,6}|:)|")+"(?::((?::".concat(o,"){0,5}:").concat(s,"|(?::").concat(o,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");function u(c){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(0,r.default)(c),d=String(d),d?d==="4"?a.test(c):d==="6"?l.test(c):!1:u(c,4)||u(c,6)}t.exports=e.default,t.exports.default=e.default})(Oy,Oy.exports);var EB=Oy.exports;(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=v;var r=a(J_),n=a(yB),i=a(EB),s=a(qD);function a(b){return b&&b.__esModule?b:{default:b}}function o(b,y){return h(b)||d(b,y)||u(b,y)||l()}function l(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u(b,y){if(b){if(typeof b=="string")return c(b,y);var T=Object.prototype.toString.call(b).slice(8,-1);if(T==="Object"&&b.constructor&&(T=b.constructor.name),T==="Map"||T==="Set")return Array.from(b);if(T==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(T))return c(b,y)}}function c(b,y){(y==null||y>b.length)&&(y=b.length);for(var T=0,x=new Array(y);T<y;T++)x[T]=b[T];return x}function d(b,y){var T=b==null?null:typeof Symbol<"u"&&b[Symbol.iterator]||b["@@iterator"];if(T!=null){var x,_,S,A,k=[],I=!0,C=!1;try{if(S=(T=T.call(b)).next,y!==0)for(;!(I=(x=S.call(T)).done)&&(k.push(x.value),k.length!==y);I=!0);}catch(N){C=!0,_=N}finally{try{if(!I&&T.return!=null&&(A=T.return(),Object(A)!==A))return}finally{if(C)throw _}}return k}}function h(b){if(Array.isArray(b))return b}var f={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0},p=/^\[([^\]]+)\](?::([0-9]+))?$/;function m(b){return Object.prototype.toString.call(b)==="[object RegExp]"}function g(b,y){for(var T=0;T<y.length;T++){var x=y[T];if(b===x||m(x)&&x.test(b))return!0}return!1}function v(b,y){if((0,r.default)(b),!b||/[\s<>]/.test(b)||b.indexOf("mailto:")===0||(y=(0,s.default)(y,f),y.validate_length&&b.length>=2083)||!y.allow_fragments&&b.includes("#")||!y.allow_query_components&&(b.includes("?")||b.includes("&")))return!1;var T,x,_,S,A,k,I,C;if(I=b.split("#"),b=I.shift(),I=b.split("?"),b=I.shift(),I=b.split("://"),I.length>1){if(T=I.shift().toLowerCase(),y.require_valid_protocol&&y.protocols.indexOf(T)===-1)return!1}else{if(y.require_protocol)return!1;if(b.slice(0,2)==="//"){if(!y.allow_protocol_relative_urls)return!1;I[0]=b.slice(2)}}if(b=I.join("://"),b==="")return!1;if(I=b.split("/"),b=I.shift(),b===""&&!y.require_host)return!0;if(I=b.split("@"),I.length>1){if(y.disallow_auth||I[0]===""||(x=I.shift(),x.indexOf(":")>=0&&x.split(":").length>2))return!1;var N=x.split(":"),P=o(N,2),V=P[0],M=P[1];if(V===""&&M==="")return!1}S=I.join("@"),k=null,C=null;var U=S.match(p);if(U?(_="",C=U[1],k=U[2]||null):(I=S.split(":"),_=I.shift(),I.length&&(k=I.join(":"))),k!==null&&k.length>0){if(A=parseInt(k,10),!/^[0-9]+$/.test(k)||A<=0||A>65535)return!1}else if(y.require_port)return!1;return y.host_whitelist?g(_,y.host_whitelist):_===""&&!y.require_host?!0:!(!(0,i.default)(_)&&!(0,n.default)(_,y)&&(!C||!(0,i.default)(C,6))||(_=_||C,y.host_blacklist&&g(_,y.host_blacklist)))}t.exports=e.default,t.exports.default=e.default})(Iy,Iy.exports);var _B=Iy.exports;const TB=ct(_B),xB=t=>{try{const e=new URL(t),{hostname:r,port:n}=e;return!!r&&!!n}catch{return!1}},pm=t=>{const{server:e,token:r,username:n,password:i}=t;return!e||!TB(e,{require_protocol:!0})&&!xB(e)?!1:r||n&&i},SB=()=>Z_.create({retry:3,onRequest({_request:t,options:e}){const r=Bh.get();if(!pm(r))throw new Error("Invalid auth");const{server:n,token:i,username:s,password:a}=r;e.baseURL=n,e.headers=i?{"X-Auth-Token":i}:{Authorization:`Basic ${btoa(`${s}:${a}`)}`}},onRequestError({_request:t,_options:e,error:r}){console.error("Request error: ",r)},async onResponseError({_request:t,response:e,_options:r}){var s;e.status===401&&(localStorage.removeItem("auth"),await WF.navigate("/login"));const i=((s=e._data)==null?void 0:s.error_message)??e.statusText;throw console.error("Response error: ",i),new Error(i)}}),ut=SB();ut.get=t=>ut(t,{method:"GET"});ut.post=(t,e)=>ut(t,{method:"POST",body:e});ut.put=(t,e)=>ut(t,{method:"PUT",body:e});const wB=async()=>ut.get("/v1/categories"),AB=async t=>ut.post("/v1/categories",{title:t}),RB=async t=>ut.raw(`/v1/categories/${t}`,{method:"DELETE"}),CB=async(t,e,r=!1)=>{const n={title:e,hide_globally:r?"on":void 0};return ut.put(`/v1/categories/${t}`,n)},IB=async t=>ut.put(`/v1/categories/${t}/mark-all-as-read`),kB=()=>{const{language:t}=Lt.get(),e=eT();return t||e},eT=()=>{const t=navigator.language;return t==="zh-Hans-CN"?"zh-CN":t},I0={articleWidth:90,edgeToEdgeImages:!1,fontFamily:"system-ui",fontSize:1.05,homePage:"all",language:eT(),markReadOnScroll:!1,orderBy:"created_at",orderDirection:"desc",pageSize:100,removeDuplicates:"none",showDetailedRelativeTime:!1,showEstimatedReadingTime:!1,showFeedIcon:!0,showHiddenFeeds:!1,showStatus:"unread",showUnreadFeedsOnly:!1,themeColor:"Blue",themeMode:"system",titleAlignment:"center"},Lt=Q_("settings",I0,{encode:t=>{const e=Object.keys(t).reduce((r,n)=>(n in I0&&(r[n]=t[n]),r),{});return JSON.stringify(e)},decode:t=>{const e=JSON.parse(t);return{...I0,...e}}}),hn=t=>Lt.get()[t],Zr=t=>Lt.set({...Lt.get(),...t}),LB=()=>Lt.set(I0),Dt=(t,e=null)=>r=>{const n=t.get();if(typeof n=="object"&&n!==null){if(e===null)return;typeof r=="function"?t.set({...n,[e]:r(n[e])}):t.set({...n,[e]:r})}else typeof r=="function"?t.set(r(n)):t.set(r)},zD={isAppDataReady:!1,unreadInfo:{},unreadTodayCount:0,starredCount:0,historyCount:0,feedsData:[],categoriesData:[],version:"",hasIntegrations:!1},_r=bc(zD),jh=Cn(_r,t=>{const{unreadInfo:e,feedsData:r}=t;return r.map(i=>({...i,unreadCount:e[i.id]??0})).sort((i,s)=>i.title.localeCompare(s.title,"en"))}),yc=Cn([_r,jh],(t,e)=>{const{categoriesData:r}=t;return r.map(i=>{const s=e.filter(a=>a.category.id===i.id);return{...i,unreadCount:s.reduce((a,o)=>a+(o.unreadCount??0),0),feedCount:s.length}}).sort((i,s)=>i.title.localeCompare(s.title,"en"))}),YD=Cn(yc,t=>t.filter(e=>e.hide_globally).map(e=>e.id)),tT=Cn([jh,YD],(t,e)=>t.filter(r=>r.hide_globally||e.includes(r.category.id)).map(r=>r.id)),XD=Cn([jh,tT,Lt],(t,e,r)=>{const{showHiddenFeeds:n}=r;return t.filter(i=>n||!e.includes(i.id))}),DB=Cn([yc,YD,Lt],(t,e,r)=>{const{showHiddenFeeds:n}=r;return t.filter(i=>n||!e.includes(i.id))}),rT=Cn(XD,t=>t.reduce((e,r)=>{const{id:n}=r.category;return e[n]||(e[n]=[]),e[n].push(r),e},{})),OB=Cn([_r,XD],(t,e)=>{const{unreadInfo:r}=t;return Object.entries(r).reduce((n,[i,s])=>e.some(a=>a.id===Number(i))?n+s:n,0)}),k0=Dt(_r,"categoriesData"),fl=Dt(_r,"feedsData"),MB=Dt(_r,"hasIntegrations"),mm=Dt(_r,"historyCount"),sA=Dt(_r,"isAppDataReady"),gm=Dt(_r,"starredCount"),nT=Dt(_r,"unreadInfo"),iT=Dt(_r,"unreadTodayCount"),PB=Dt(_r,"version"),NB=()=>_r.set(zD);var Hh={};(function t(e,r,n,i){var s=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),a=typeof Path2D=="function"&&typeof DOMMatrix=="function",o=function(){if(!e.OffscreenCanvas)return!1;var D=new OffscreenCanvas(1,1),L=D.getContext("2d");L.fillRect(0,0,1,1);var Y=D.transferToImageBitmap();try{L.createPattern(Y,"no-repeat")}catch{return!1}return!0}();function l(){}function u(D){var L=r.exports.Promise,Y=L!==void 0?L:e.Promise;return typeof Y=="function"?new Y(D):(D(l,l),null)}var c=function(D,L){return{transform:function(Y){if(D)return Y;if(L.has(Y))return L.get(Y);var $=new OffscreenCanvas(Y.width,Y.height),j=$.getContext("2d");return j.drawImage(Y,0,0),L.set(Y,$),$},clear:function(){L.clear()}}}(o,new Map),d=function(){var D=Math.floor(16.666666666666668),L,Y,$={},j=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(L=function(z){var re=Math.random();return $[re]=requestAnimationFrame(function ne(ue){j===ue||j+D-1<ue?(j=ue,delete $[re],z()):$[re]=requestAnimationFrame(ne)}),re},Y=function(z){$[z]&&cancelAnimationFrame($[z])}):(L=function(z){return setTimeout(z,D)},Y=function(z){return clearTimeout(z)}),{frame:L,cancel:Y}}(),h=function(){var D,L,Y={};function $(j){function z(re,ne){j.postMessage({options:re||{},callback:ne})}j.init=function(ne){var ue=ne.transferControlToOffscreen();j.postMessage({canvas:ue},[ue])},j.fire=function(ne,ue,Te){if(L)return z(ne,null),L;var ce=Math.random().toString(36).slice(2);return L=u(function(_e){function De(nt){nt.data.callback===ce&&(delete Y[ce],j.removeEventListener("message",De),L=null,c.clear(),Te(),_e())}j.addEventListener("message",De),z(ne,ce),Y[ce]=De.bind(null,{data:{callback:ce}})}),L},j.reset=function(){j.postMessage({reset:!0});for(var ne in Y)Y[ne](),delete Y[ne]}}return function(){if(D)return D;if(!n&&s){var j=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{D=new Worker(URL.createObjectURL(new Blob([j])))}catch(z){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",z),null}$(D)}return D}}(),f={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function p(D,L){return L?L(D):D}function m(D){return D!=null}function g(D,L,Y){return p(D&&m(D[L])?D[L]:f[L],Y)}function v(D){return D<0?0:Math.floor(D)}function b(D,L){return Math.floor(Math.random()*(L-D))+D}function y(D){return parseInt(D,16)}function T(D){return D.map(x)}function x(D){var L=String(D).replace(/[^0-9a-f]/gi,"");return L.length<6&&(L=L[0]+L[0]+L[1]+L[1]+L[2]+L[2]),{r:y(L.substring(0,2)),g:y(L.substring(2,4)),b:y(L.substring(4,6))}}function _(D){var L=g(D,"origin",Object);return L.x=g(L,"x",Number),L.y=g(L,"y",Number),L}function S(D){D.width=document.documentElement.clientWidth,D.height=document.documentElement.clientHeight}function A(D){var L=D.getBoundingClientRect();D.width=L.width,D.height=L.height}function k(D){var L=document.createElement("canvas");return L.style.position="fixed",L.style.top="0px",L.style.left="0px",L.style.pointerEvents="none",L.style.zIndex=D,L}function I(D,L,Y,$,j,z,re,ne,ue){D.save(),D.translate(L,Y),D.rotate(z),D.scale($,j),D.arc(0,0,1,re,ne,ue),D.restore()}function C(D){var L=D.angle*(Math.PI/180),Y=D.spread*(Math.PI/180);return{x:D.x,y:D.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:D.startVelocity*.5+Math.random()*D.startVelocity,angle2D:-L+(.5*Y-Math.random()*Y),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:D.color,shape:D.shape,tick:0,totalTicks:D.ticks,decay:D.decay,drift:D.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:D.gravity*3,ovalScalar:.6,scalar:D.scalar,flat:D.flat}}function N(D,L){L.x+=Math.cos(L.angle2D)*L.velocity+L.drift,L.y+=Math.sin(L.angle2D)*L.velocity+L.gravity,L.velocity*=L.decay,L.flat?(L.wobble=0,L.wobbleX=L.x+10*L.scalar,L.wobbleY=L.y+10*L.scalar,L.tiltSin=0,L.tiltCos=0,L.random=1):(L.wobble+=L.wobbleSpeed,L.wobbleX=L.x+10*L.scalar*Math.cos(L.wobble),L.wobbleY=L.y+10*L.scalar*Math.sin(L.wobble),L.tiltAngle+=.1,L.tiltSin=Math.sin(L.tiltAngle),L.tiltCos=Math.cos(L.tiltAngle),L.random=Math.random()+2);var Y=L.tick++/L.totalTicks,$=L.x+L.random*L.tiltCos,j=L.y+L.random*L.tiltSin,z=L.wobbleX+L.random*L.tiltCos,re=L.wobbleY+L.random*L.tiltSin;if(D.fillStyle="rgba("+L.color.r+", "+L.color.g+", "+L.color.b+", "+(1-Y)+")",D.beginPath(),a&&L.shape.type==="path"&&typeof L.shape.path=="string"&&Array.isArray(L.shape.matrix))D.fill(B(L.shape.path,L.shape.matrix,L.x,L.y,Math.abs(z-$)*.1,Math.abs(re-j)*.1,Math.PI/10*L.wobble));else if(L.shape.type==="bitmap"){var ne=Math.PI/10*L.wobble,ue=Math.abs(z-$)*.1,Te=Math.abs(re-j)*.1,ce=L.shape.bitmap.width*L.scalar,_e=L.shape.bitmap.height*L.scalar,De=new DOMMatrix([Math.cos(ne)*ue,Math.sin(ne)*ue,-Math.sin(ne)*Te,Math.cos(ne)*Te,L.x,L.y]);De.multiplySelf(new DOMMatrix(L.shape.matrix));var nt=D.createPattern(c.transform(L.shape.bitmap),"no-repeat");nt.setTransform(De),D.globalAlpha=1-Y,D.fillStyle=nt,D.fillRect(L.x-ce/2,L.y-_e/2,ce,_e),D.globalAlpha=1}else if(L.shape==="circle")D.ellipse?D.ellipse(L.x,L.y,Math.abs(z-$)*L.ovalScalar,Math.abs(re-j)*L.ovalScalar,Math.PI/10*L.wobble,0,2*Math.PI):I(D,L.x,L.y,Math.abs(z-$)*L.ovalScalar,Math.abs(re-j)*L.ovalScalar,Math.PI/10*L.wobble,0,2*Math.PI);else if(L.shape==="star")for(var ke=Math.PI/2*3,Oe=4*L.scalar,ar=8*L.scalar,Et=L.x,Gt=L.y,er=5,jt=Math.PI/er;er--;)Et=L.x+Math.cos(ke)*ar,Gt=L.y+Math.sin(ke)*ar,D.lineTo(Et,Gt),ke+=jt,Et=L.x+Math.cos(ke)*Oe,Gt=L.y+Math.sin(ke)*Oe,D.lineTo(Et,Gt),ke+=jt;else D.moveTo(Math.floor(L.x),Math.floor(L.y)),D.lineTo(Math.floor(L.wobbleX),Math.floor(j)),D.lineTo(Math.floor(z),Math.floor(re)),D.lineTo(Math.floor($),Math.floor(L.wobbleY));return D.closePath(),D.fill(),L.tick<L.totalTicks}function P(D,L,Y,$,j){var z=L.slice(),re=D.getContext("2d"),ne,ue,Te=u(function(ce){function _e(){ne=ue=null,re.clearRect(0,0,$.width,$.height),c.clear(),j(),ce()}function De(){n&&!($.width===i.width&&$.height===i.height)&&($.width=D.width=i.width,$.height=D.height=i.height),!$.width&&!$.height&&(Y(D),$.width=D.width,$.height=D.height),re.clearRect(0,0,$.width,$.height),z=z.filter(function(nt){return N(re,nt)}),z.length?ne=d.frame(De):_e()}ne=d.frame(De),ue=_e});return{addFettis:function(ce){return z=z.concat(ce),Te},canvas:D,promise:Te,reset:function(){ne&&d.cancel(ne),ue&&ue()}}}function V(D,L){var Y=!D,$=!!g(L||{},"resize"),j=!1,z=g(L,"disableForReducedMotion",Boolean),re=s&&!!g(L||{},"useWorker"),ne=re?h():null,ue=Y?S:A,Te=D&&ne?!!D.__confetti_initialized:!1,ce=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,_e;function De(ke,Oe,ar){for(var Et=g(ke,"particleCount",v),Gt=g(ke,"angle",Number),er=g(ke,"spread",Number),jt=g(ke,"startVelocity",Number),ze=g(ke,"decay",Number),$e=g(ke,"gravity",Number),tr=g(ke,"drift",Number),wt=g(ke,"colors",T),gt=g(ke,"ticks",Number),mr=g(ke,"shapes"),It=g(ke,"scalar"),Kt=!!g(ke,"flat"),nn=_(ke),de=Et,he=[],Me=D.width*nn.x,ye=D.height*nn.y;de--;)he.push(C({x:Me,y:ye,angle:Gt,spread:er,startVelocity:jt,color:wt[de%wt.length],shape:mr[b(0,mr.length)],ticks:gt,decay:ze,gravity:$e,drift:tr,scalar:It,flat:Kt}));return _e?_e.addFettis(he):(_e=P(D,he,ue,Oe,ar),_e.promise)}function nt(ke){var Oe=z||g(ke,"disableForReducedMotion",Boolean),ar=g(ke,"zIndex",Number);if(Oe&&ce)return u(function(jt){jt()});Y&&_e?D=_e.canvas:Y&&!D&&(D=k(ar),document.body.appendChild(D)),$&&!Te&&ue(D);var Et={width:D.width,height:D.height};ne&&!Te&&ne.init(D),Te=!0,ne&&(D.__confetti_initialized=!0);function Gt(){if(ne){var jt={getBoundingClientRect:function(){if(!Y)return D.getBoundingClientRect()}};ue(jt),ne.postMessage({resize:{width:jt.width,height:jt.height}});return}Et.width=Et.height=null}function er(){_e=null,$&&(j=!1,e.removeEventListener("resize",Gt)),Y&&D&&(document.body.contains(D)&&document.body.removeChild(D),D=null,Te=!1)}return $&&!j&&(j=!0,e.addEventListener("resize",Gt,!1)),ne?ne.fire(ke,Et,er):De(ke,Et,er)}return nt.reset=function(){ne&&ne.reset(),_e&&_e.reset()},nt}var M;function U(){return M||(M=V(null,{useWorker:!0,resize:!0})),M}function B(D,L,Y,$,j,z,re){var ne=new Path2D(D),ue=new Path2D;ue.addPath(ne,new DOMMatrix(L));var Te=new Path2D;return Te.addPath(ue,new DOMMatrix([Math.cos(re)*j,Math.sin(re)*j,-Math.sin(re)*z,Math.cos(re)*z,Y,$])),Te}function X(D){if(!a)throw new Error("path confetti are not supported in this browser");var L,Y;typeof D=="string"?L=D:(L=D.path,Y=D.matrix);var $=new Path2D(L),j=document.createElement("canvas"),z=j.getContext("2d");if(!Y){for(var re=1e3,ne=re,ue=re,Te=0,ce=0,_e,De,nt=0;nt<re;nt+=2)for(var ke=0;ke<re;ke+=2)z.isPointInPath($,nt,ke,"nonzero")&&(ne=Math.min(ne,nt),ue=Math.min(ue,ke),Te=Math.max(Te,nt),ce=Math.max(ce,ke));_e=Te-ne,De=ce-ue;var Oe=10,ar=Math.min(Oe/_e,Oe/De);Y=[ar,0,0,ar,-Math.round(_e/2+ne)*ar,-Math.round(De/2+ue)*ar]}return{type:"path",path:L,matrix:Y}}function te(D){var L,Y=1,$="#000000",j='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof D=="string"?L=D:(L=D.text,Y="scalar"in D?D.scalar:Y,j="fontFamily"in D?D.fontFamily:j,$="color"in D?D.color:$);var z=10*Y,re=""+z+"px "+j,ne=new OffscreenCanvas(z,z),ue=ne.getContext("2d");ue.font=re;var Te=ue.measureText(L),ce=Math.ceil(Te.actualBoundingBoxRight+Te.actualBoundingBoxLeft),_e=Math.ceil(Te.actualBoundingBoxAscent+Te.actualBoundingBoxDescent),De=2,nt=Te.actualBoundingBoxLeft+De,ke=Te.actualBoundingBoxAscent+De;ce+=De+De,_e+=De+De,ne=new OffscreenCanvas(ce,_e),ue=ne.getContext("2d"),ue.font=re,ue.fillStyle=$,ue.fillText(L,nt,ke);var Oe=1/Y;return{type:"bitmap",bitmap:ne.transferToImageBitmap(),matrix:[Oe,0,0,Oe,-ce*Oe/2,-_e*Oe/2]}}r.exports=function(){return U().apply(this,arguments)},r.exports.reset=function(){U().reset()},r.exports.create=V,r.exports.shapeFromPath=X,r.exports.shapeFromText=te})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),Hh,!1);const FB=Hh.exports;Hh.exports.create;const $B=(t,e,r)=>{const n=t[e];return n?typeof n=="function"?n():Promise.resolve(n):new Promise((i,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==r?". Note that variables only represent file names one level deep.":""))))})};var aA=Object.prototype.toString,ZD=function(e){var r=aA.call(e),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&aA.call(e.callee)==="[object Function]"),n},Bv,oA;function UB(){if(oA)return Bv;oA=1;var t;if(!Object.keys){var e=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=ZD,i=Object.prototype.propertyIsEnumerable,s=!i.call({toString:null},"toString"),a=i.call(function(){},"prototype"),o=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],l=function(h){var f=h.constructor;return f&&f.prototype===h},u={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},c=function(){if(typeof window>"u")return!1;for(var h in window)try{if(!u["$"+h]&&e.call(window,h)&&window[h]!==null&&typeof window[h]=="object")try{l(window[h])}catch{return!0}}catch{return!0}return!1}(),d=function(h){if(typeof window>"u"||!c)return l(h);try{return l(h)}catch{return!1}};t=function(f){var p=f!==null&&typeof f=="object",m=r.call(f)==="[object Function]",g=n(f),v=p&&r.call(f)==="[object String]",b=[];if(!p&&!m&&!g)throw new TypeError("Object.keys called on a non-object");var y=a&&m;if(v&&f.length>0&&!e.call(f,0))for(var T=0;T<f.length;++T)b.push(String(T));if(g&&f.length>0)for(var x=0;x<f.length;++x)b.push(String(x));else for(var _ in f)!(y&&_==="prototype")&&e.call(f,_)&&b.push(String(_));if(s)for(var S=d(f),A=0;A<o.length;++A)!(S&&o[A]==="constructor")&&e.call(f,o[A])&&b.push(o[A]);return b}}return Bv=t,Bv}var BB=Array.prototype.slice,jB=ZD,lA=Object.keys,L0=lA?function(e){return lA(e)}:UB(),uA=Object.keys;L0.shim=function(){if(Object.keys){var e=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);e||(Object.keys=function(n){return jB(n)?uA(BB.call(n)):uA(n)})}else Object.keys=L0;return Object.keys||L0};var HB=L0,VB=Error,WB=EvalError,GB=RangeError,KB=ReferenceError,QD=SyntaxError,Vh=TypeError,qB=URIError,zB=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,r);if(a.value!==i||a.enumerable!==!0)return!1}return!0},cA=typeof Symbol<"u"&&Symbol,YB=zB,XB=function(){return typeof cA!="function"||typeof Symbol!="function"||typeof cA("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:YB()},jv={__proto__:null,foo:{}},ZB=Object,QB=function(){return{__proto__:jv}.foo===jv.foo&&!(jv instanceof ZB)},JB="Function.prototype.bind called on incompatible ",e7=Object.prototype.toString,t7=Math.max,r7="[object Function]",dA=function(e,r){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var s=0;s<r.length;s+=1)n[s+e.length]=r[s];return n},n7=function(e,r){for(var n=[],i=r,s=0;i<e.length;i+=1,s+=1)n[s]=e[i];return n},i7=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},s7=function(e){var r=this;if(typeof r!="function"||e7.apply(r)!==r7)throw new TypeError(JB+r);for(var n=n7(arguments,1),i,s=function(){if(this instanceof i){var c=r.apply(this,dA(n,arguments));return Object(c)===c?c:this}return r.apply(e,dA(n,arguments))},a=t7(0,r.length-n.length),o=[],l=0;l<a;l++)o[l]="$"+l;if(i=Function("binder","return function ("+i7(o,",")+"){ return binder.apply(this,arguments); }")(s),r.prototype){var u=function(){};u.prototype=r.prototype,i.prototype=new u,u.prototype=null}return i},a7=s7,sT=Function.prototype.bind||a7,o7=Function.prototype.call,l7=Object.prototype.hasOwnProperty,u7=sT,JD=u7.call(o7,l7),lt,c7=VB,d7=WB,h7=GB,f7=KB,Xu=QD,Pu=Vh,p7=qB,eO=Function,Hv=function(t){try{return eO('"use strict"; return ('+t+").constructor;")()}catch{}},tl=Object.getOwnPropertyDescriptor;if(tl)try{tl({},"")}catch{tl=null}var Vv=function(){throw new Pu},m7=tl?function(){try{return arguments.callee,Vv}catch{try{return tl(arguments,"callee").get}catch{return Vv}}}():Vv,Cl=XB(),g7=QB(),qr=Object.getPrototypeOf||(g7?function(t){return t.__proto__}:null),Gl={},v7=typeof Uint8Array>"u"||!qr?lt:qr(Uint8Array),rl={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?lt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?lt:ArrayBuffer,"%ArrayIteratorPrototype%":Cl&&qr?qr([][Symbol.iterator]()):lt,"%AsyncFromSyncIteratorPrototype%":lt,"%AsyncFunction%":Gl,"%AsyncGenerator%":Gl,"%AsyncGeneratorFunction%":Gl,"%AsyncIteratorPrototype%":Gl,"%Atomics%":typeof Atomics>"u"?lt:Atomics,"%BigInt%":typeof BigInt>"u"?lt:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?lt:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?lt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?lt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":c7,"%eval%":eval,"%EvalError%":d7,"%Float32Array%":typeof Float32Array>"u"?lt:Float32Array,"%Float64Array%":typeof Float64Array>"u"?lt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?lt:FinalizationRegistry,"%Function%":eO,"%GeneratorFunction%":Gl,"%Int8Array%":typeof Int8Array>"u"?lt:Int8Array,"%Int16Array%":typeof Int16Array>"u"?lt:Int16Array,"%Int32Array%":typeof Int32Array>"u"?lt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Cl&&qr?qr(qr([][Symbol.iterator]())):lt,"%JSON%":typeof JSON=="object"?JSON:lt,"%Map%":typeof Map>"u"?lt:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Cl||!qr?lt:qr(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?lt:Promise,"%Proxy%":typeof Proxy>"u"?lt:Proxy,"%RangeError%":h7,"%ReferenceError%":f7,"%Reflect%":typeof Reflect>"u"?lt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?lt:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Cl||!qr?lt:qr(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?lt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Cl&&qr?qr(""[Symbol.iterator]()):lt,"%Symbol%":Cl?Symbol:lt,"%SyntaxError%":Xu,"%ThrowTypeError%":m7,"%TypedArray%":v7,"%TypeError%":Pu,"%Uint8Array%":typeof Uint8Array>"u"?lt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?lt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?lt:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?lt:Uint32Array,"%URIError%":p7,"%WeakMap%":typeof WeakMap>"u"?lt:WeakMap,"%WeakRef%":typeof WeakRef>"u"?lt:WeakRef,"%WeakSet%":typeof WeakSet>"u"?lt:WeakSet};if(qr)try{null.error}catch(t){var b7=qr(qr(t));rl["%Error.prototype%"]=b7}var y7=function t(e){var r;if(e==="%AsyncFunction%")r=Hv("async function () {}");else if(e==="%GeneratorFunction%")r=Hv("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=Hv("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&qr&&(r=qr(i.prototype))}return rl[e]=r,r},hA={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Wh=sT,vm=JD,E7=Wh.call(Function.call,Array.prototype.concat),_7=Wh.call(Function.apply,Array.prototype.splice),fA=Wh.call(Function.call,String.prototype.replace),bm=Wh.call(Function.call,String.prototype.slice),T7=Wh.call(Function.call,RegExp.prototype.exec),x7=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,S7=/\\(\\)?/g,w7=function(e){var r=bm(e,0,1),n=bm(e,-1);if(r==="%"&&n!=="%")throw new Xu("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Xu("invalid intrinsic syntax, expected opening `%`");var i=[];return fA(e,x7,function(s,a,o,l){i[i.length]=o?fA(l,S7,"$1"):a||s}),i},A7=function(e,r){var n=e,i;if(vm(hA,n)&&(i=hA[n],n="%"+i[0]+"%"),vm(rl,n)){var s=rl[n];if(s===Gl&&(s=y7(n)),typeof s>"u"&&!r)throw new Pu("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:s}}throw new Xu("intrinsic "+e+" does not exist!")},Gh=function(e,r){if(typeof e!="string"||e.length===0)throw new Pu("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Pu('"allowMissing" argument must be a boolean');if(T7(/^%?[^%]*%?$/,e)===null)throw new Xu("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=w7(e),i=n.length>0?n[0]:"",s=A7("%"+i+"%",r),a=s.name,o=s.value,l=!1,u=s.alias;u&&(i=u[0],_7(n,E7([0,1],u)));for(var c=1,d=!0;c<n.length;c+=1){var h=n[c],f=bm(h,0,1),p=bm(h,-1);if((f==='"'||f==="'"||f==="`"||p==='"'||p==="'"||p==="`")&&f!==p)throw new Xu("property names with quotes must have matching quotes");if((h==="constructor"||!d)&&(l=!0),i+="."+h,a="%"+i+"%",vm(rl,a))o=rl[a];else if(o!=null){if(!(h in o)){if(!r)throw new Pu("base intrinsic for "+e+" exists, but the property is not available.");return}if(tl&&c+1>=n.length){var m=tl(o,h);d=!!m,d&&"get"in m&&!("originalValue"in m.get)?o=m.get:o=o[h]}else d=vm(o,h),o=o[h];d&&!l&&(rl[a]=o)}}return o},R7=Gh,D0=R7("%Object.defineProperty%",!0)||!1;if(D0)try{D0({},"a",{value:1})}catch{D0=!1}var aT=D0,C7=Gh,O0=C7("%Object.getOwnPropertyDescriptor%",!0);if(O0)try{O0([],"length")}catch{O0=null}var tO=O0,pA=aT,I7=QD,Il=Vh,mA=tO,rO=function(e,r,n){if(!e||typeof e!="object"&&typeof e!="function")throw new Il("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new Il("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Il("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Il("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Il("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Il("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,s=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,o=arguments.length>6?arguments[6]:!1,l=!!mA&&mA(e,r);if(pA)pA(e,r,{configurable:a===null&&l?l.configurable:!a,enumerable:i===null&&l?l.enumerable:!i,value:n,writable:s===null&&l?l.writable:!s});else if(o||!i&&!s&&!a)e[r]=n;else throw new I7("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},My=aT,nO=function(){return!!My};nO.hasArrayLengthDefineBug=function(){if(!My)return null;try{return My([],"length",{value:1}).length!==1}catch{return!0}};var iO=nO,k7=HB,L7=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",D7=Object.prototype.toString,O7=Array.prototype.concat,gA=rO,M7=function(t){return typeof t=="function"&&D7.call(t)==="[object Function]"},sO=iO(),P7=function(t,e,r,n){if(e in t){if(n===!0){if(t[e]===r)return}else if(!M7(n)||!n())return}sO?gA(t,e,r,!0):gA(t,e,r)},aO=function(t,e){var r=arguments.length>2?arguments[2]:{},n=k7(e);L7&&(n=O7.call(n,Object.getOwnPropertySymbols(e)));for(var i=0;i<n.length;i+=1)P7(t,n[i],e[n[i]],r[n[i]])};aO.supportsDescriptors=!!sO;var oO=aO,lO={exports:{}},N7=Gh,vA=rO,F7=iO(),bA=tO,yA=Vh,$7=N7("%Math.floor%"),U7=function(e,r){if(typeof e!="function")throw new yA("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||$7(r)!==r)throw new yA("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,s=!0;if("length"in e&&bA){var a=bA(e,"length");a&&!a.configurable&&(i=!1),a&&!a.writable&&(s=!1)}return(i||s||!n)&&(F7?vA(e,"length",r,!0,!0):vA(e,"length",r)),e};(function(t){var e=sT,r=Gh,n=U7,i=Vh,s=r("%Function.prototype.apply%"),a=r("%Function.prototype.call%"),o=r("%Reflect.apply%",!0)||e.call(a,s),l=aT,u=r("%Math.max%");t.exports=function(h){if(typeof h!="function")throw new i("a function is required");var f=o(e,a,arguments);return n(f,1+u(0,h.length-(arguments.length-1)),!0)};var c=function(){return o(e,s,arguments)};l?l(t.exports,"apply",{value:c}):t.exports.apply=c})(lO);var uO=lO.exports,B7=Vh,j7=function(e){if(e==null)throw new B7(arguments.length>0&&arguments[1]||"Cannot call method on "+e);return e},cO=Gh,dO=uO,H7=dO(cO("String.prototype.indexOf")),V7=function(e,r){var n=cO(e,!!r);return typeof n=="function"&&H7(e,".prototype.")>-1?dO(n):n},W7=j7,hO=V7,G7=hO("Object.prototype.propertyIsEnumerable"),K7=hO("Array.prototype.push"),fO=function(e){var r=W7(e),n=[];for(var i in r)G7(r,i)&&K7(n,[i,r[i]]);return n},q7=fO,pO=function(){return typeof Object.entries=="function"?Object.entries:q7},z7=pO,Y7=oO,X7=function(){var e=z7();return Y7(Object,{entries:e},{entries:function(){return Object.entries!==e}}),e},Z7=oO,Q7=uO,J7=fO,mO=pO,ej=X7,gO=Q7(mO(),Object);Z7(gO,{getPolyfill:mO,implementation:J7,shim:ej});var tj=gO,oT=tj,vO=JD,rj=function(e){},Py=String.prototype.replace,bO=String.prototype.split,M0="||||",ff=function(t){var e=t%100,r=e%10;return e!==11&&r===1?0:2<=r&&r<=4&&!(e>=12&&e<=14)?1:2},yO={pluralTypes:{arabic:function(t){if(t<3)return t;var e=t%100;return e>=3&&e<=10?3:e>=11?4:5},bosnian_serbian:ff,chinese:function(){return 0},croatian:ff,french:function(t){return t>=2?1:0},german:function(t){return t!==1?1:0},russian:ff,lithuanian:function(t){return t%10===1&&t%100!==11?0:t%10>=2&&t%10<=9&&(t%100<11||t%100>19)?1:2},czech:function(t){return t===1?0:t>=2&&t<=4?1:2},polish:function(t){if(t===1)return 0;var e=t%10;return 2<=e&&e<=4&&(t%100<10||t%100>=20)?1:2},icelandic:function(t){return t%10!==1||t%100===11?1:0},slovenian:function(t){var e=t%100;return e===1?0:e===2?1:e===3||e===4?2:3},romanian:function(t){if(t===1)return 0;var e=t%100;return t===0||e>=2&&e<=19?1:2},ukrainian:ff},pluralTypeToLanguages:{arabic:["ar"],bosnian_serbian:["bs-Latn-BA","bs-Cyrl-BA","srl-RS","sr-RS"],chinese:["id","id-ID","ja","ko","ko-KR","lo","ms","th","th-TH","zh"],croatian:["hr","hr-HR"],german:["fa","da","de","en","es","fi","el","he","hi-IN","hu","hu-HU","it","nl","no","pt","sv","tr"],french:["fr","tl","pt-br"],russian:["ru","ru-RU"],lithuanian:["lt"],czech:["cs","cs-CZ","sk"],polish:["pl"],icelandic:["is","mk"],slovenian:["sl-SL"],romanian:["ro"],ukrainian:["uk","ua"]}};function nj(t){for(var e={},r=oT(t),n=0;n<r.length;n+=1)for(var i=r[n][0],s=r[n][1],a=0;a<s.length;a+=1)e[s[a]]=i;return e}function ij(t,e){var r=nj(t.pluralTypeToLanguages);return r[e]||r[bO.call(e,/-/,1)[0]]||r.en}function sj(t,e,r){return t.pluralTypes[e](r)}function aj(){var t={};return function(e,r){var n=t[r];return n&&!e.pluralTypes[n]&&(n=null,t[r]=n),n||(n=ij(e,r),n&&(t[r]=n)),n}}function EA(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function oj(t){var e=t&&t.prefix||"%{",r=t&&t.suffix||"}";if(e===M0||r===M0)throw new RangeError('"'+M0+'" token is reserved for pluralization');return new RegExp(EA(e)+"(.*?)"+EA(r),"g")}var lj=aj(),uj=/%\{(.*?)\}/g;function lT(t,e,r,n,i,s){if(typeof t!="string")throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(e==null)return t;var a=t,o=n||uj,l=s||Py,u=typeof e=="number"?{smart_count:e}:e;if(u.smart_count!=null&&t){var c=i||yO,d=bO.call(t,M0),h=r||"en",f=lj(c,h),p=sj(c,f,u.smart_count);a=Py.call(d[p]||d[0],/^[^\S]*|[^\S]*$/g,"")}return a=l.call(a,o,function(m,g){return!vO(u,g)||u[g]==null?m:u[g]}),a}function ea(t){var e=t||{};this.phrases={},this.extend(e.phrases||{}),this.currentLocale=e.locale||"en";var r=e.allowMissing?lT:null;this.onMissingKey=typeof e.onMissingKey=="function"?e.onMissingKey:r,this.warn=e.warn||rj,this.replaceImplementation=e.replace||Py,this.tokenRegex=oj(e.interpolation),this.pluralRules=e.pluralRules||yO}ea.prototype.locale=function(t){return t&&(this.currentLocale=t),this.currentLocale};ea.prototype.extend=function(t,e){for(var r=oT(t||{}),n=0;n<r.length;n+=1){var i=r[n][0],s=r[n][1],a=e?e+"."+i:i;typeof s=="object"?this.extend(s,a):this.phrases[a]=s}};ea.prototype.unset=function(t,e){if(typeof t=="string")delete this.phrases[t];else for(var r=oT(t||{}),n=0;n<r.length;n+=1){var i=r[n][0],s=r[n][1],a=e?e+"."+i:i;typeof s=="object"?this.unset(s,a):delete this.phrases[a]}};ea.prototype.clear=function(){this.phrases={}};ea.prototype.replace=function(t){this.clear(),this.extend(t)};ea.prototype.t=function(t,e){var r,n,i=e??{};if(typeof this.phrases[t]=="string")r=this.phrases[t];else if(typeof i._=="string")r=i._;else if(this.onMissingKey){var s=this.onMissingKey;n=s(t,i,this.currentLocale,this.tokenRegex,this.pluralRules,this.replaceImplementation)}else this.warn('Missing translation for key: "'+t+'"'),n=t;return typeof r=="string"&&(n=lT(r,i,this.currentLocale,this.tokenRegex,this.pluralRules,this.replaceImplementation)),n};ea.prototype.has=function(t){return vO(this.phrases,t)};ea.transformPhrase=function(e,r,n){return lT(e,r,n)};var cj=ea;const dj=ct(cj),hj={"zh-CN":"zh-cn",es:"es",fr:"fr"},St=bc({polyglot:null}),fj=Dt(St,"polyglot"),pj=async(t,e)=>{let r,n=t;try{r=await $B(Object.assign({"../locales/en-US.json":()=>Vl(()=>import("./en-US-1uj3u8Th.js"),[]),"../locales/es-ES.json":()=>Vl(()=>import("./es-ES-BSsPNZba.js"),[]),"../locales/fr-FR.json":()=>Vl(()=>import("./fr-FR-DkdHjMGW.js"),[]),"../locales/zh-CN.json":()=>Vl(()=>import("./zh-CN-CNJyJefJ.js"),[])}),`../locales/${t}.json`,3)}catch(i){console.error("Failed to load language: ",i),r=await Vl(()=>import("./en-US-1uj3u8Th.js"),[]),n="en-US"}{const i=new dj({phrases:r.default,locale:n});fj(i)}},EO=()=>{const{language:t}=oe(Lt);R.useEffect(()=>{if(!t)Zr({language:eT()});else{pj(t);const e=t.startsWith("es-")||t.startsWith("fr-")?t.substring(0,2):hj[t]||"en";Xr.locale(e)}},[t])};var _O={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(we,function(){var r,n,i=1e3,s=6e4,a=36e5,o=864e5,l=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,u=31536e6,c=2628e6,d=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,h={years:u,months:c,days:o,hours:a,minutes:s,seconds:i,milliseconds:1,weeks:6048e5},f=function(_){return _ instanceof T},p=function(_,S,A){return new T(_,A,S.$l)},m=function(_){return n.p(_)+"s"},g=function(_){return _<0},v=function(_){return g(_)?Math.ceil(_):Math.floor(_)},b=function(_){return Math.abs(_)},y=function(_,S){return _?g(_)?{negative:!0,format:""+b(_)+S}:{negative:!1,format:""+_+S}:{negative:!1,format:""}},T=function(){function _(A,k,I){var C=this;if(this.$d={},this.$l=I,A===void 0&&(this.$ms=0,this.parseFromMilliseconds()),k)return p(A*h[m(k)],this);if(typeof A=="number")return this.$ms=A,this.parseFromMilliseconds(),this;if(typeof A=="object")return Object.keys(A).forEach(function(V){C.$d[m(V)]=A[V]}),this.calMilliseconds(),this;if(typeof A=="string"){var N=A.match(d);if(N){var P=N.slice(2).map(function(V){return V!=null?Number(V):0});return this.$d.years=P[0],this.$d.months=P[1],this.$d.weeks=P[2],this.$d.days=P[3],this.$d.hours=P[4],this.$d.minutes=P[5],this.$d.seconds=P[6],this.calMilliseconds(),this}}return this}var S=_.prototype;return S.calMilliseconds=function(){var A=this;this.$ms=Object.keys(this.$d).reduce(function(k,I){return k+(A.$d[I]||0)*h[I]},0)},S.parseFromMilliseconds=function(){var A=this.$ms;this.$d.years=v(A/u),A%=u,this.$d.months=v(A/c),A%=c,this.$d.days=v(A/o),A%=o,this.$d.hours=v(A/a),A%=a,this.$d.minutes=v(A/s),A%=s,this.$d.seconds=v(A/i),A%=i,this.$d.milliseconds=A},S.toISOString=function(){var A=y(this.$d.years,"Y"),k=y(this.$d.months,"M"),I=+this.$d.days||0;this.$d.weeks&&(I+=7*this.$d.weeks);var C=y(I,"D"),N=y(this.$d.hours,"H"),P=y(this.$d.minutes,"M"),V=this.$d.seconds||0;this.$d.milliseconds&&(V+=this.$d.milliseconds/1e3,V=Math.round(1e3*V)/1e3);var M=y(V,"S"),U=A.negative||k.negative||C.negative||N.negative||P.negative||M.negative,B=N.format||P.format||M.format?"T":"",X=(U?"-":"")+"P"+A.format+k.format+C.format+B+N.format+P.format+M.format;return X==="P"||X==="-P"?"P0D":X},S.toJSON=function(){return this.toISOString()},S.format=function(A){var k=A||"YYYY-MM-DDTHH:mm:ss",I={Y:this.$d.years,YY:n.s(this.$d.years,2,"0"),YYYY:n.s(this.$d.years,4,"0"),M:this.$d.months,MM:n.s(this.$d.months,2,"0"),D:this.$d.days,DD:n.s(this.$d.days,2,"0"),H:this.$d.hours,HH:n.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:n.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:n.s(this.$d.seconds,2,"0"),SSS:n.s(this.$d.milliseconds,3,"0")};return k.replace(l,function(C,N){return N||String(I[C])})},S.as=function(A){return this.$ms/h[m(A)]},S.get=function(A){var k=this.$ms,I=m(A);return I==="milliseconds"?k%=1e3:k=I==="weeks"?v(k/h[I]):this.$d[I],k||0},S.add=function(A,k,I){var C;return C=k?A*h[m(k)]:f(A)?A.$ms:p(A,this).$ms,p(this.$ms+C*(I?-1:1),this)},S.subtract=function(A,k){return this.add(A,k,!0)},S.locale=function(A){var k=this.clone();return k.$l=A,k},S.clone=function(){return p(this.$ms,this)},S.humanize=function(A){return r().add(this.$ms,"ms").locale(this.$l).fromNow(!A)},S.valueOf=function(){return this.asMilliseconds()},S.milliseconds=function(){return this.get("milliseconds")},S.asMilliseconds=function(){return this.as("milliseconds")},S.seconds=function(){return this.get("seconds")},S.asSeconds=function(){return this.as("seconds")},S.minutes=function(){return this.get("minutes")},S.asMinutes=function(){return this.as("minutes")},S.hours=function(){return this.get("hours")},S.asHours=function(){return this.as("hours")},S.days=function(){return this.get("days")},S.asDays=function(){return this.as("days")},S.weeks=function(){return this.get("weeks")},S.asWeeks=function(){return this.as("weeks")},S.months=function(){return this.get("months")},S.asMonths=function(){return this.as("months")},S.years=function(){return this.get("years")},S.asYears=function(){return this.as("years")},_}(),x=function(_,S,A){return _.add(S.years()*A,"y").add(S.months()*A,"M").add(S.days()*A,"d").add(S.hours()*A,"h").add(S.minutes()*A,"m").add(S.seconds()*A,"s").add(S.milliseconds()*A,"ms")};return function(_,S,A){r=A,n=A().$utils(),A.duration=function(C,N){var P=A.locale();return p(C,{$l:P},N)},A.isDuration=f;var k=S.prototype.add,I=S.prototype.subtract;S.prototype.add=function(C,N){return f(C)?x(this,C,1):k.bind(this)(C,N)},S.prototype.subtract=function(C,N){return f(C)?x(this,C,-1):I.bind(this)(C,N)}}})})(_O);var mj=_O.exports;const gj=ct(mj);var TO={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(we,function(){return function(r,n,i){r=r||{};var s=n.prototype,a={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function o(u,c,d,h){return s.fromToBase(u,c,d,h)}i.en.relativeTime=a,s.fromToBase=function(u,c,d,h,f){for(var p,m,g,v=d.$locale().relativeTime||a,b=r.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],y=b.length,T=0;T<y;T+=1){var x=b[T];x.d&&(p=h?i(u).diff(d,x.d,!0):d.diff(u,x.d,!0));var _=(r.rounding||Math.round)(Math.abs(p));if(g=p>0,_<=x.r||!x.r){_<=1&&T>0&&(x=b[T-1]);var S=v[x.l];f&&(_=f(""+_)),m=typeof S=="string"?S.replace("%d",_):S(_,c,x.l,g);break}}if(c)return m;var A=g?v.future:v.past;return typeof A=="function"?A(m):A.replace("%s",m)},s.to=function(u,c){return o(u,c,this,!0)},s.from=function(u,c){return o(u,c,this)};var l=function(u){return u.$u?i.utc():i()};s.toNow=function(u){return this.to(l(this),u)},s.fromNow=function(u){return this.from(l(this),u)}}})})(TO);var vj=TO.exports;const bj=ct(vj);var xO={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(we,function(){var r="minute",n=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,a,o){var l=a.prototype;o.utc=function(m){var g={date:m,utc:!0,args:arguments};return new a(g)},l.utc=function(m){var g=o(this.toDate(),{locale:this.$L,utc:!0});return m?g.add(this.utcOffset(),r):g},l.local=function(){return o(this.toDate(),{locale:this.$L,utc:!1})};var u=l.parse;l.parse=function(m){m.utc&&(this.$u=!0),this.$utils().u(m.$offset)||(this.$offset=m.$offset),u.call(this,m)};var c=l.init;l.init=function(){if(this.$u){var m=this.$d;this.$y=m.getUTCFullYear(),this.$M=m.getUTCMonth(),this.$D=m.getUTCDate(),this.$W=m.getUTCDay(),this.$H=m.getUTCHours(),this.$m=m.getUTCMinutes(),this.$s=m.getUTCSeconds(),this.$ms=m.getUTCMilliseconds()}else c.call(this)};var d=l.utcOffset;l.utcOffset=function(m,g){var v=this.$utils().u;if(v(m))return this.$u?0:v(this.$offset)?d.call(this):this.$offset;if(typeof m=="string"&&(m=function(x){x===void 0&&(x="");var _=x.match(n);if(!_)return null;var S=(""+_[0]).match(i)||["-",0,0],A=S[0],k=60*+S[1]+ +S[2];return k===0?0:A==="+"?k:-k}(m),m===null))return this;var b=Math.abs(m)<=16?60*m:m,y=this;if(g)return y.$offset=b,y.$u=m===0,y;if(m!==0){var T=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(y=this.local().add(b+T,r)).$offset=b,y.$x.$localOffset=T}else y=this.utc();return y};var h=l.format;l.format=function(m){var g=m||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return h.call(this,g)},l.valueOf=function(){var m=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*m},l.isUTC=function(){return!!this.$u},l.toISOString=function(){return this.toDate().toISOString()},l.toString=function(){return this.toDate().toUTCString()};var f=l.toDate;l.toDate=function(m){return m==="s"&&this.$offset?o(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():f.call(this)};var p=l.diff;l.diff=function(m,g,v){if(m&&this.$u===m.$u)return p.call(this,m,g,v);var b=this.local(),y=o(m).local();return p.call(b,y,g,v)}}})})(xO);var yj=xO.exports;const Ej=ct(yj);Xr.extend(gj);Xr.extend(bj);Xr.extend(Ej);const _j=t=>Xr(t).isAfter(Xr().subtract(24,"hour")),Tj=()=>Xr().subtract(24,"hour").unix(),xj=t=>Xr(t).unix(),Sj=()=>Xr().startOf("day"),wj=t=>Xr(t).endOf("day").unix(),Aj=()=>Xr().utc().format("YYYY-MM-DDTHH:mm:ss.SSSSSSZ"),Rj=t=>Xr(t).format("dddd, MMMM D, YYYY h:mm A"),SO=(t,e)=>{const{polyglot:r}=St.get();if(!e){const p=Xr(),m=Xr(t),g=m.from(p),v=Xr.duration(p.diff(m)).asSeconds();return v>=0&&v<60?r.t("date.just_now"):g}const n=Xr(),s=Xr(t).diff(n),a=Xr.duration(Math.abs(s)),o=a.years(),l=a.months(),u=a.days(),c=a.hours(),d=a.minutes(),h=[];if(o>0&&h.push(r.t("date.years",o)),l>0&&h.push(r.t("date.months",l)),u>0&&h.push(r.t("date.days",u)),c>0&&h.push(r.t("date.hours",c)),d>0&&h.push(r.t("date.minutes",d)),h.length===0)return r.t("date.just_now");const f=h.join(" ");return s>0?r.t("date.in_time",{time:f}):r.t("date.time_ago",{time:f})},wO=t=>{const{polyglot:e}=St.get(),r=e.t("date.minutes",t);return e.t("article_card.reading_time",{time:r})},AO=(t,e)=>{const r=e.map(n=>n.id);return t.map(n=>r.includes(n.id)&&e.find(s=>s.id===n.id)||n)},Ny=(t,e)=>{const r={};let n=0;const i=t.filter(u=>u.status!==e);if(i.length===0)return;const{showStatus:s}=Lt.get();e==="read"?(mm(u=>u+i.length),s==="unread"&&ym(u=>u-i.length)):(mm(u=>Math.max(0,u-i.length)),s==="unread"&&ym(u=>u+i.length));for(const u of i){const c=u.feed.id,d=_j(u.published_at),h=e==="read"?-1:1;r[c]=(r[c]??0)+h,n+=d?h:0}iT(u=>Math.max(0,u+n)),nT(u=>{const c={...u};for(const[d,h]of Object.entries(r))c[d]=Math.max(0,(c[d]??0)+h);return c});const a=i.map(u=>({...u,status:e})),{activeContent:o}=Ct.get(),l=a.find(u=>u.id===(o==null?void 0:o.id));l&&Mi(l),qh(u=>AO(u,a))},Pg=()=>{const{activeContent:t}=oe(Ct),{polyglot:e}=oe(St),r=(l,u)=>{Ny([l],u)},n=(l,u)=>{u?(gm(d=>d+1),FB({particleCount:100,angle:120,spread:70,origin:{x:1,y:1}})):gm(d=>Math.max(0,d-1));const c={...l,starred:u};t&&Mi(c),qh(d=>AO(d,[c]))};return{handleEntryStatusUpdate:r,handleFetchContent:async()=>{try{const l=await $j(t.id);et.success(e.t("actions.fetched_content_success")),Mi({...t,content:l.content})}catch(l){console.error("Failed to fetch content: ",l),et.error(e.t("actions.fetched_content_error"))}},handleSaveToThirdPartyServices:async()=>{try{(await Uj(t.id)).status===202?Or.success({title:e.t("actions.saved_to_third-party_services_success")}):Or.error({title:e.t("actions.saved_to_third-party_services_error")})}catch(l){console.error("Failed to save to third-party services: ",l),Or.error({title:e.t("actions.saved_to_third-party_services_error"),content:l.message})}},handleToggleStarred:async l=>{const u=!l.starred;n(l,u),Fj(l.id).catch(()=>{et.error(u?e.t("actions.star_error"):e.t("actions.unstar_error")),n(l,!u)})},handleToggleStatus:async l=>{const u=l.status,c=u==="read"?"unread":"read";r(l,c),Ng([l.id],c).catch(()=>{et.error(c==="read"?e.t("actions.mark_as_read_error"):e.t("actions.mark_as_unread_error")),r(l,u)})}}},Cj=(t,e)=>{const{polyglot:r}=St.get();if(t.length===0||e==="none")return t;const n=t.map((c,d)=>({id:c.id,index:d})),i=new Map,s=new Map,a=new Map,o=[],l=t.slice().sort((c,d)=>c.id-d.id).filter(c=>{const{hash:d,title:h,url:f,id:p}=c;switch(e){case"hash":if(i.has(d))return o.push(c),!1;i.set(d,p);break;case"title":if(s.has(h))return o.push(c),!1;s.set(h,p);break;case"url":if(a.has(f))return o.push(c),!1;a.set(f,p);break;default:return!0}return!0}),u=o.filter(c=>c.status==="unread").map(c=>c.id);return u.length>0&&(Ny(o,"read"),Ng(u,"read").catch(()=>{et.error(r.t("deduplicate.mark_as_read_error")),Ny(o,"unread")})),l.sort((c,d)=>{const h=n.find(p=>p.id===c.id).index,f=n.find(p=>p.id===d.id).index;return h-f})},Ij=t=>{const e=new Array(t.length).fill(0);let r=0,n=1;for(;n<t.length;)t[n]===t[r]?(r++,e[n]=r,n++):r!==0?r=e[r-1]:(e[n]=0,n++);return e},pf=(t,e,r=!0)=>{const n=r?t.toLowerCase():t,i=r?e.toLowerCase():e;if(i.length===0)return 0;const s=Ij(i);let a=0,o=0;for(;a<n.length;)if(n[a]===i[o]?(a++,o++):o!==0?o=s[o-1]:a++,o===i.length)return a-o;return-1},kj=t=>{const e=[],r=[];let n=[];const i=[],s=t.match(/([-+|]?)\s*"([^"]+)"/g);let a=t;s&&(n=s.map(l=>{const u=l.trim()[0],c=l.match(/"([^"]+)"/)[1];switch(u){case"-":r.push(c);break;case"+":e.push(c);break;case"|":i.push([c]);break;default:e.push(c);break}return c}),a=t.replace(/([-+|]?)\s*"([^"]+)"/g,""));const o=a.split(/\s+/);for(const l of o){const u=l.replace(/^[-+|]/,"");if(l.startsWith("-")&&u)r.push(u);else if(l.startsWith("+")&&u)e.push(u);else if(l.includes("|")){const c=l.split("|").filter(d=>d);c.length>0&&i.push(c)}else u&&e.push(u)}return{includeTerms:e,excludeTerms:r,exactPhrases:n,orConditions:i}},Lj=(t,e,r=[],n=!0)=>{const{includeTerms:i,excludeTerms:s,exactPhrases:a,orConditions:o}=kj(e),l=u=>{if(s.some(h=>pf(u,h,n)!==-1)||a.length>0&&!a.some(h=>pf(u,h,n)!==-1))return!1;const c=i.every(h=>pf(u,h,n)!==-1),d=o.length===0||o.some(h=>h.some(f=>pf(u,f,n)!==-1));return c&&d};return t.filter(u=>r.some(c=>{const d=u[c];return typeof d=="string"&&l(n?d.toLowerCase():d)}))},RO=(t,e,r=[],n=!0)=>!Array.isArray(t)||t.length===0?(console.error("Invalid data input:",{receivedData:t,type:typeof t,isArray:Array.isArray(t),length:Array.isArray(t)?t.length:"N/A"}),[]):typeof e!="string"||e.trim().length===0?(console.error("Invalid query input:",{receivedQuery:e,type:typeof e,trimmedLength:typeof e=="string"?e.trim().length:"N/A"}),[]):Lj(t,e,r,n),Dj=(t,e)=>t.toLowerCase().includes(e.toLowerCase()),Oj=(t,e,r)=>!r||t.length===0?t:RO(t,r,[e]),CO=(t,e)=>{const r=t.split("."),n=e.split(".");for(let i=0;i<Math.max(r.length,n.length);i++){const s=r[i]||"0",a=n[i]||"0",o=s.localeCompare(a,void 0,{numeric:!0});if(o!==0)return o}return 0},IO={activeContent:null,entries:[],filterDate:null,filterString:"",filterType:"Title",infoFrom:hn("homePage"),isArticleListReady:!1,isArticleLoading:!1,loadMoreVisible:!1,offset:0,total:0},Ct=bc(IO),Kh=Cn([Ct,_r,tT,Lt],(t,e,r,n)=>{const{entries:i,filterString:s,filterType:a,infoFrom:o}=t,l=Oj(i,a,s),{version:u}=e,{removeDuplicates:c,showHiddenFeeds:d}=n,h=!["starred","history"].includes(o),f=m=>CO(u,"2.2.0")>=0||d||!r.includes(m.feed.id),p=h?l.filter(f):l;return c==="none"||["starred","history"].includes(o)?p:Cj(p,c)}),uT=Cn([Ct,Kh],(t,e)=>{const{activeContent:r}=t;return r?e.findIndex(n=>n.id===r.id):-1}),kO=Cn([uT,Kh],(t,e)=>e[t-1]),LO=Cn([uT,Kh],(t,e)=>e[t+1]),Mi=Dt(Ct,"activeContent"),qh=Dt(Ct,"entries"),mf=Dt(Ct,"filterDate"),Fy=Dt(Ct,"filterString"),$y=Dt(Ct,"filterType"),Mj=Dt(Ct,"infoFrom"),_A=Dt(Ct,"isArticleListReady"),TA=Dt(Ct,"isArticleLoading"),DO=Dt(Ct,"loadMoreVisible"),ym=Dt(Ct,"offset"),Pj=Dt(Ct,"total"),Nj=()=>Ct.set(IO),Ng=async(t,e)=>ut.put("/v1/entries",{entry_ids:t,status:e}),Fj=async t=>ut.put(`/v1/entries/${t}/bookmark`),$j=async t=>ut.get(`/v1/entries/${t}/fetch-content`),Uj=async t=>ut.raw(`/v1/entries/${t}/save`,{method:"POST"}),Ec=(t,e={})=>{const{baseUrl:r,orderField:n,offset:i,limit:s,status:a}=t,{filterDate:o}=Ct.get(),l=hn("orderDirection"),u=new URLSearchParams({order:n,direction:l,offset:i,limit:s,...e});return a&&u.append("status",a),o&&(u.append("published_after",xj(o)),u.append("published_before",wj(o))),`${r}?${u}`},Bj=async(t=0,e=null)=>{const r=hn("orderBy"),n=hn("pageSize"),i=hn("showHiddenFeeds"),s={baseUrl:"/v1/entries",orderField:r,offset:t,limit:n,status:e},a={globally_visible:!i};return ut.get(Ec(s,a))},P0=async(t=0,e=null,r=null)=>{const n=hn("orderBy"),i=r??hn("pageSize"),s=hn("showHiddenFeeds"),a=Tj(),o={baseUrl:"/v1/entries",orderField:n,offset:t,limit:i,status:e},l={globally_visible:!s,published_after:a};return ut.get(Ec(o,l))},OO=async(t=0,e=null)=>{const r=hn("pageSize"),n={baseUrl:"/v1/entries",orderField:"changed_at",offset:t,limit:r,status:e},i={starred:"true"};return ut.get(Ec(n,i))},jj=async(t=0)=>{const e=hn("pageSize"),r={baseUrl:"/v1/entries",orderField:"changed_at",offset:t,limit:e,status:"read"};return ut.get(Ec(r))},Hj=async()=>ut.get("/v1/feeds"),Vj=async()=>ut.get("/v1/feeds/counters"),Wj=async t=>ut.raw(`/v1/feeds/${t}/refresh`,{method:"PUT"}),Gj=async()=>ut.raw("/v1/feeds/refresh",{method:"PUT"}),Kj=async(t,e,r)=>ut.post("/v1/feeds",{feed_url:t,category_id:e,crawler:r}),qj=async t=>ut.raw(`/v1/feeds/${t}`,{method:"DELETE"}),MO=async(t,e)=>{const{categoryId:r,title:n,siteUrl:i,feedUrl:s,hidden:a,disabled:o,isFullText:l}=e;return ut.put(`/v1/feeds/${t}`,{category_id:r,title:n,site_url:i,feed_url:s,hide_globally:a,disabled:o,crawler:l})},zj=async t=>ut.put(`/v1/feeds/${t}/mark-all-as-read`),Yj=async()=>ut.get("/v1/export"),Xj=t=>ut.raw("/v1/import",{method:"POST",body:t}),Zj=async()=>ut.get("/v1/me"),Qj=async t=>ut.get(`/v1/icons/${t}`),Jj=async()=>ut.get("/v1/integrations/status"),eH=async()=>ut.get("/v1/version"),tH=async()=>{const t=await Zj();return ut.put(`/v1/users/${t.id}/mark-all-as-read`)},PO=.25,$d=PO*1e3,cT="electh/ReactFlux",NO=R.createContext(),rH=({children:t})=>{const e=oe(St),r=R.useRef(null),n=R.useRef(null),{handleEntryStatusUpdate:i}=Pg(),s=R.useCallback(async o=>{TA(!0),Mi({...o,status:"read"}),setTimeout(()=>{const l=r.current;if(l){const u=l.querySelector(".simplebar-content-wrapper");u&&u.scroll({top:0}),l.focus()}TA(!1),o.status==="unread"&&(i(o,"read"),Ng([o.id],"read").catch(()=>{et.error(e.t("content.mark_as_read_error")),Mi({...o,status:"unread"}),i(o,"unread")}))},$d)},[e,i]),a=R.useMemo(()=>({entryDetailRef:r,entryListRef:n,handleEntryClick:s,setActiveContent:Mi}),[s]);return E.jsx(NO.Provider,{value:a,children:t})},nH=NO;function xA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function SA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xA(Object(r),!0).forEach(function(n){yt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function iH(t,e){var r=R.useContext(Rt),n=r.prefixCls,i=n===void 0?"arco":n,s=t.spin,a=t.className,o=SA(SA({"aria-hidden":!0,focusable:!1,ref:e},t),{},{className:"".concat(a?a+" ":"").concat(i,"-icon ").concat(i,"-icon-arrow-left")});return s&&(o.className="".concat(o.className," ").concat(i,"-icon-loading")),delete o.spin,delete o.isIcon,Z.createElement("svg",xt({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),Z.createElement("path",{d:"M20.272 11.27 7.544 23.998l12.728 12.728M43 24H8.705"}))}var dT=Z.forwardRef(iH);dT.defaultProps={isIcon:!0};dT.displayName="IconArrowLeft";function wA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function AA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wA(Object(r),!0).forEach(function(n){yt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function sH(t,e){var r=R.useContext(Rt),n=r.prefixCls,i=n===void 0?"arco":n,s=t.spin,a=t.className,o=AA(AA({"aria-hidden":!0,focusable:!1,ref:e},t),{},{className:"".concat(a?a+" ":"").concat(i,"-icon ").concat(i,"-icon-arrow-right")});return s&&(o.className="".concat(o.className," ").concat(i,"-icon-loading")),delete o.spin,delete o.isIcon,Z.createElement("svg",xt({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),Z.createElement("path",{d:"m27.728 11.27 12.728 12.728-12.728 12.728M5 24h34.295"}))}var hT=Z.forwardRef(sH);hT.defaultProps={isIcon:!0};hT.displayName="IconArrowRight";function RA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function CA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?RA(Object(r),!0).forEach(function(n){yt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):RA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function aH(t,e){var r=R.useContext(Rt),n=r.prefixCls,i=n===void 0?"arco":n,s=t.spin,a=t.className,o=CA(CA({"aria-hidden":!0,focusable:!1,ref:e},t),{},{className:"".concat(a?a+" ":"").concat(i,"-icon ").concat(i,"-icon-exclamation-circle")});return s&&(o.className="".concat(o.className," ").concat(i,"-icon-loading")),delete o.spin,delete o.isIcon,Z.createElement("svg",xt({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),Z.createElement("path",{d:"M24 28V14m0 16v4M6 24c0-9.941 8.059-18 18-18s18 8.059 18 18-8.059 18-18 18S6 33.941 6 24Z"}))}var fT=Z.forwardRef(aH);fT.defaultProps={isIcon:!0};fT.displayName="IconExclamationCircle";function IA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function kA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?IA(Object(r),!0).forEach(function(n){yt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function oH(t,e){var r=R.useContext(Rt),n=r.prefixCls,i=n===void 0?"arco":n,s=t.spin,a=t.className,o=kA(kA({"aria-hidden":!0,focusable:!1,ref:e},t),{},{className:"".concat(a?a+" ":"").concat(i,"-icon ").concat(i,"-icon-minus-circle")});return s&&(o.className="".concat(o.className," ").concat(i,"-icon-loading")),delete o.spin,delete o.isIcon,Z.createElement("svg",xt({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),Z.createElement("path",{d:"M32 24H16m26 0c0 9.941-8.059 18-18 18S6 33.941 6 24 14.059 6 24 6s18 8.059 18 18Z"}))}var Fg=Z.forwardRef(oH);Fg.defaultProps={isIcon:!0};Fg.displayName="IconMinusCircle";function LA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function DA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?LA(Object(r),!0).forEach(function(n){yt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):LA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function lH(t,e){var r=R.useContext(Rt),n=r.prefixCls,i=n===void 0?"arco":n,s=t.spin,a=t.className,o=DA(DA({"aria-hidden":!0,focusable:!1,ref:e},t),{},{className:"".concat(a?a+" ":"").concat(i,"-icon ").concat(i,"-icon-cloud-download")});return s&&(o.className="".concat(o.className," ").concat(i,"-icon-loading")),delete o.spin,delete o.isIcon,Z.createElement("svg",xt({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),Z.createElement("path",{d:"M43 22c0-7.732-6.492-14-14.5-14S14 14.268 14 22v.055A9.001 9.001 0 0 0 15 40h13m16.142-5.929-7.07 7.071L30 34.072M37.07 26v15"}))}var pT=Z.forwardRef(lH);pT.defaultProps={isIcon:!0};pT.displayName="IconCloudDownload";function OA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function MA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?OA(Object(r),!0).forEach(function(n){yt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function uH(t,e){var r=R.useContext(Rt),n=r.prefixCls,i=n===void 0?"arco":n,s=t.spin,a=t.className,o=MA(MA({"aria-hidden":!0,focusable:!1,ref:e},t),{},{className:"".concat(a?a+" ":"").concat(i,"-icon ").concat(i,"-icon-download")});return s&&(o.className="".concat(o.className," ").concat(i,"-icon-loading")),delete o.spin,delete o.isIcon,Z.createElement("svg",xt({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),Z.createElement("path",{d:"m33.072 22.071-9.07 9.071-9.072-9.07M24 5v26m16 4v6H8v-6"}))}var mT=Z.forwardRef(uH);mT.defaultProps={isIcon:!0};mT.displayName="IconDownload";function PA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function NA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?PA(Object(r),!0).forEach(function(n){yt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function cH(t,e){var r=R.useContext(Rt),n=r.prefixCls,i=n===void 0?"arco":n,s=t.spin,a=t.className,o=NA(NA({"aria-hidden":!0,focusable:!1,ref:e},t),{},{className:"".concat(a?a+" ":"").concat(i,"-icon ").concat(i,"-icon-history")});return s&&(o.className="".concat(o.className," ").concat(i,"-icon-loading")),delete o.spin,delete o.isIcon,Z.createElement("svg",xt({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),Z.createElement("path",{d:"M6 24c0-9.941 8.059-18 18-18s18 8.059 18 18-8.059 18-18 18c-6.26 0-11.775-3.197-15-8.047M6 24l-.5-.757h1L6 24Zm26 2h-9v-9"}))}var gT=Z.forwardRef(cH);gT.defaultProps={isIcon:!0};gT.displayName="IconHistory";function FA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function $A(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?FA(Object(r),!0).forEach(function(n){yt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):FA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dH(t,e){var r=R.useContext(Rt),n=r.prefixCls,i=n===void 0?"arco":n,s=t.spin,a=t.className,o=$A($A({"aria-hidden":!0,focusable:!1,ref:e},t),{},{className:"".concat(a?a+" ":"").concat(i,"-icon ").concat(i,"-icon-home")});return s&&(o.className="".concat(o.className," ").concat(i,"-icon-loading")),delete o.spin,delete o.isIcon,Z.createElement("svg",xt({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),Z.createElement("path",{d:"M7 17 24 7l17 10v24H7V17Z"}),Z.createElement("path",{d:"M20 28h8v13h-8V28Z"}))}var vT=Z.forwardRef(dH);vT.defaultProps={isIcon:!0};vT.displayName="IconHome";function UA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function BA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?UA(Object(r),!0).forEach(function(n){yt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):UA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hH(t,e){var r=R.useContext(Rt),n=r.prefixCls,i=n===void 0?"arco":n,s=t.spin,a=t.className,o=BA(BA({"aria-hidden":!0,focusable:!1,ref:e},t),{},{className:"".concat(a?a+" ":"").concat(i,"-icon ").concat(i,"-icon-more-vertical")});return s&&(o.className="".concat(o.className," ").concat(i,"-icon-loading")),delete o.spin,delete o.isIcon,Z.createElement("svg",xt({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),Z.createElement("path",{fill:"currentColor",stroke:"none",d:"M25 10h-2V8h2v2ZM25 25h-2v-2h2v2ZM25 40h-2v-2h2v2Z"}),Z.createElement("path",{d:"M25 10h-2V8h2v2ZM25 25h-2v-2h2v2ZM25 40h-2v-2h2v2Z"}))}var $g=Z.forwardRef(hH);$g.defaultProps={isIcon:!0};$g.displayName="IconMoreVertical";function jA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function HA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jA(Object(r),!0).forEach(function(n){yt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function fH(t,e){var r=R.useContext(Rt),n=r.prefixCls,i=n===void 0?"arco":n,s=t.spin,a=t.className,o=HA(HA({"aria-hidden":!0,focusable:!1,ref:e},t),{},{className:"".concat(a?a+" ":"").concat(i,"-icon ").concat(i,"-icon-poweroff")});return s&&(o.className="".concat(o.className," ").concat(i,"-icon-loading")),delete o.spin,delete o.isIcon,Z.createElement("svg",xt({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),Z.createElement("path",{d:"M15.5 9.274C10.419 12.214 7 17.708 7 24c0 9.389 7.611 17 17 17s17-7.611 17-17c0-6.292-3.419-11.786-8.5-14.726M24 5v22"}))}var bT=Z.forwardRef(fH);bT.defaultProps={isIcon:!0};bT.displayName="IconPoweroff";function VA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function WA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?VA(Object(r),!0).forEach(function(n){yt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):VA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pH(t,e){var r=R.useContext(Rt),n=r.prefixCls,i=n===void 0?"arco":n,s=t.spin,a=t.className,o=WA(WA({"aria-hidden":!0,focusable:!1,ref:e},t),{},{className:"".concat(a?a+" ":"").concat(i,"-icon ").concat(i,"-icon-refresh")});return s&&(o.className="".concat(o.className," ").concat(i,"-icon-loading")),delete o.spin,delete o.isIcon,Z.createElement("svg",xt({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),Z.createElement("path",{d:"M38.837 18C36.463 12.136 30.715 8 24 8 15.163 8 8 15.163 8 24s7.163 16 16 16c7.455 0 13.72-5.1 15.496-12M40 8v10H30"}))}var bl=Z.forwardRef(pH);bl.defaultProps={isIcon:!0};bl.displayName="IconRefresh";function GA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function KA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?GA(Object(r),!0).forEach(function(n){yt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):GA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mH(t,e){var r=R.useContext(Rt),n=r.prefixCls,i=n===void 0?"arco":n,s=t.spin,a=t.className,o=KA(KA({"aria-hidden":!0,focusable:!1,ref:e},t),{},{className:"".concat(a?a+" ":"").concat(i,"-icon ").concat(i,"-icon-save")});return s&&(o.className="".concat(o.className," ").concat(i,"-icon-loading")),delete o.spin,delete o.isIcon,Z.createElement("svg",xt({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),Z.createElement("path",{d:"M21 13v9m18 20H9a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h22.55a1 1 0 0 1 .748.336l7.45 8.38a1 1 0 0 1 .252.664V41a1 1 0 0 1-1 1ZM14 6h14v15a1 1 0 0 1-1 1H15a1 1 0 0 1-1-1V6Z"}))}var yT=Z.forwardRef(mH);yT.defaultProps={isIcon:!0};yT.displayName="IconSave";function qA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function zA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qA(Object(r),!0).forEach(function(n){yt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gH(t,e){var r=R.useContext(Rt),n=r.prefixCls,i=n===void 0?"arco":n,s=t.spin,a=t.className,o=zA(zA({"aria-hidden":!0,focusable:!1,ref:e},t),{},{className:"".concat(a?a+" ":"").concat(i,"-icon ").concat(i,"-icon-settings")});return s&&(o.className="".concat(o.className," ").concat(i,"-icon-loading")),delete o.spin,delete o.isIcon,Z.createElement("svg",xt({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),Z.createElement("path",{d:"M18.797 6.732A1 1 0 0 1 19.76 6h8.48a1 1 0 0 1 .964.732l1.285 4.628a1 1 0 0 0 1.213.7l4.651-1.2a1 1 0 0 1 1.116.468l4.24 7.344a1 1 0 0 1-.153 1.2L38.193 23.3a1 1 0 0 0 0 1.402l3.364 3.427a1 1 0 0 1 .153 1.2l-4.24 7.344a1 1 0 0 1-1.116.468l-4.65-1.2a1 1 0 0 0-1.214.7l-1.285 4.628a1 1 0 0 1-.964.732h-8.48a1 1 0 0 1-.963-.732L17.51 36.64a1 1 0 0 0-1.213-.7l-4.65 1.2a1 1 0 0 1-1.116-.468l-4.24-7.344a1 1 0 0 1 .153-1.2L9.809 24.7a1 1 0 0 0 0-1.402l-3.364-3.427a1 1 0 0 1-.153-1.2l4.24-7.344a1 1 0 0 1 1.116-.468l4.65 1.2a1 1 0 0 0 1.213-.7l1.286-4.628Z"}),Z.createElement("path",{d:"M30 24a6 6 0 1 1-12 0 6 6 0 0 1 12 0Z"}))}var ET=Z.forwardRef(gH);ET.defaultProps={isIcon:!0};ET.displayName="IconSettings";function YA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function XA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YA(Object(r),!0).forEach(function(n){yt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vH(t,e){var r=R.useContext(Rt),n=r.prefixCls,i=n===void 0?"arco":n,s=t.spin,a=t.className,o=XA(XA({"aria-hidden":!0,focusable:!1,ref:e},t),{},{className:"".concat(a?a+" ":"").concat(i,"-icon ").concat(i,"-icon-star")});return s&&(o.className="".concat(o.className," ").concat(i,"-icon-loading")),delete o.spin,delete o.isIcon,Z.createElement("svg",xt({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),Z.createElement("path",{d:"M22.552 6.908a.5.5 0 0 1 .896 0l5.02 10.17a.5.5 0 0 0 .376.274l11.224 1.631a.5.5 0 0 1 .277.853l-8.122 7.916a.5.5 0 0 0-.143.443l1.917 11.178a.5.5 0 0 1-.726.527l-10.038-5.278a.5.5 0 0 0-.466 0L12.73 39.9a.5.5 0 0 1-.726-.527l1.918-11.178a.5.5 0 0 0-.144-.443l-8.122-7.916a.5.5 0 0 1 .278-.853l11.223-1.63a.5.5 0 0 0 .376-.274l5.02-10.17Z"}))}var Ug=Z.forwardRef(vH);Ug.defaultProps={isIcon:!0};Ug.displayName="IconStar";function ZA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function QA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ZA(Object(r),!0).forEach(function(n){yt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ZA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function bH(t,e){var r=R.useContext(Rt),n=r.prefixCls,i=n===void 0?"arco":n,s=t.spin,a=t.className,o=QA(QA({"aria-hidden":!0,focusable:!1,ref:e},t),{},{className:"".concat(a?a+" ":"").concat(i,"-icon ").concat(i,"-icon-align-center")});return s&&(o.className="".concat(o.className," ").concat(i,"-icon-loading")),delete o.spin,delete o.isIcon,Z.createElement("svg",xt({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),Z.createElement("path",{d:"M44 9H4m38 20H6m28-10H14m20 20H14"}))}var _T=Z.forwardRef(bH);_T.defaultProps={isIcon:!0};_T.displayName="IconAlignCenter";function JA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function e2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?JA(Object(r),!0).forEach(function(n){yt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function yH(t,e){var r=R.useContext(Rt),n=r.prefixCls,i=n===void 0?"arco":n,s=t.spin,a=t.className,o=e2(e2({"aria-hidden":!0,focusable:!1,ref:e},t),{},{className:"".concat(a?a+" ":"").concat(i,"-icon ").concat(i,"-icon-align-left")});return s&&(o.className="".concat(o.className," ").concat(i,"-icon-loading")),delete o.spin,delete o.isIcon,Z.createElement("svg",xt({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),Z.createElement("path",{d:"M44 9H4m36 20H4m21-10H4m21 20H4"}))}var TT=Z.forwardRef(yH);TT.defaultProps={isIcon:!0};TT.displayName="IconAlignLeft";function t2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function r2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?t2(Object(r),!0).forEach(function(n){yt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):t2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function EH(t,e){var r=R.useContext(Rt),n=r.prefixCls,i=n===void 0?"arco":n,s=t.spin,a=t.className,o=r2(r2({"aria-hidden":!0,focusable:!1,ref:e},t),{},{className:"".concat(a?a+" ":"").concat(i,"-icon ").concat(i,"-icon-sort-ascending")});return s&&(o.className="".concat(o.className," ").concat(i,"-icon-loading")),delete o.spin,delete o.isIcon,Z.createElement("svg",xt({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),Z.createElement("path",{d:"M15 6v33.759a.1.1 0 0 1-.17.07L8 33m17-6h10.4v.65L27 39.35V40h11m-1-19L31.4 8h-.8L25 21"}))}var xT=Z.forwardRef(EH);xT.defaultProps={isIcon:!0};xT.displayName="IconSortAscending";function n2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function i2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?n2(Object(r),!0).forEach(function(n){yt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _H(t,e){var r=R.useContext(Rt),n=r.prefixCls,i=n===void 0?"arco":n,s=t.spin,a=t.className,o=i2(i2({"aria-hidden":!0,focusable:!1,ref:e},t),{},{className:"".concat(a?a+" ":"").concat(i,"-icon ").concat(i,"-icon-sort-descending")});return s&&(o.className="".concat(o.className," ").concat(i,"-icon-loading")),delete o.spin,delete o.isIcon,Z.createElement("svg",xt({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),Z.createElement("path",{d:"M25 27h10.4v.65L27 39.35V40h11m-21.999 2V7.24a.1.1 0 0 0-.17-.07L9 14m28 7L31.4 8h-.8L25 21"}))}var ST=Z.forwardRef(_H);ST.defaultProps={isIcon:!0};ST.displayName="IconSortDescending";function s2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function a2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?s2(Object(r),!0).forEach(function(n){yt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function TH(t,e){var r=R.useContext(Rt),n=r.prefixCls,i=n===void 0?"arco":n,s=t.spin,a=t.className,o=a2(a2({"aria-hidden":!0,focusable:!1,ref:e},t),{},{className:"".concat(a?a+" ":"").concat(i,"-icon ").concat(i,"-icon-unordered-list")});return s&&(o.className="".concat(o.className," ").concat(i,"-icon-loading")),delete o.spin,delete o.isIcon,Z.createElement("svg",xt({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),Z.createElement("path",{d:"M13 24h30M5 11h4m4 26h30M13 11h30M5 24h4M5 37h4"}))}var wT=Z.forwardRef(TH);wT.defaultProps={isIcon:!0};wT.displayName="IconUnorderedList";function o2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function l2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?o2(Object(r),!0).forEach(function(n){yt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xH(t,e){var r=R.useContext(Rt),n=r.prefixCls,i=n===void 0?"arco":n,s=t.spin,a=t.className,o=l2(l2({"aria-hidden":!0,focusable:!1,ref:e},t),{},{className:"".concat(a?a+" ":"").concat(i,"-icon ").concat(i,"-icon-record")});return s&&(o.className="".concat(o.className," ").concat(i,"-icon-loading")),delete o.spin,delete o.isIcon,Z.createElement("svg",xt({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),Z.createElement("path",{d:"M24 6c9.941 0 18 8.059 18 18s-8.059 18-18 18S6 33.941 6 24 14.059 6 24 6Z",clipRule:"evenodd"}),Z.createElement("path",{fill:"currentColor",stroke:"none",d:"M30 24a6 6 0 1 1-12 0 6 6 0 0 1 12 0Z"}),Z.createElement("path",{d:"M30 24a6 6 0 1 1-12 0 6 6 0 0 1 12 0Z"}))}var Bg=Z.forwardRef(xH);Bg.defaultProps={isIcon:!0};Bg.displayName="IconRecord";function u2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function c2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?u2(Object(r),!0).forEach(function(n){yt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function SH(t,e){var r=R.useContext(Rt),n=r.prefixCls,i=n===void 0?"arco":n,s=t.spin,a=t.className,o=c2(c2({"aria-hidden":!0,focusable:!1,ref:e},t),{},{className:"".concat(a?a+" ":"").concat(i,"-icon ").concat(i,"-icon-moon-fill")});return s&&(o.className="".concat(o.className," ").concat(i,"-icon-loading")),delete o.spin,delete o.isIcon,Z.createElement("svg",xt({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),Z.createElement("path",{fill:"currentColor",stroke:"none",d:"M42.108 29.769c.124-.387-.258-.736-.645-.613A17.99 17.99 0 0 1 36 30c-9.941 0-18-8.059-18-18 0-1.904.296-3.74.844-5.463.123-.387-.226-.768-.613-.645C10.558 8.334 5 15.518 5 24c0 10.493 8.507 19 19 19 8.482 0 15.666-5.558 18.108-13.231Z"}))}var AT=Z.forwardRef(SH);AT.defaultProps={isIcon:!0};AT.displayName="IconMoonFill";function d2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function h2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?d2(Object(r),!0).forEach(function(n){yt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wH(t,e){var r=R.useContext(Rt),n=r.prefixCls,i=n===void 0?"arco":n,s=t.spin,a=t.className,o=h2(h2({"aria-hidden":!0,focusable:!1,ref:e},t),{},{className:"".concat(a?a+" ":"").concat(i,"-icon ").concat(i,"-icon-sun-fill")});return s&&(o.className="".concat(o.className," ").concat(i,"-icon-loading")),delete o.spin,delete o.isIcon,Z.createElement("svg",xt({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),Z.createElement("circle",{cx:"24",cy:"24",r:"9",fill:"currentColor",stroke:"none"}),Z.createElement("path",{fill:"currentColor",stroke:"none",d:"M21 5.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 .5.5v5a.5.5 0 0 1-.5.5h-5a.5.5 0 0 1-.5-.5v-5ZM21 37.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 .5.5v5a.5.5 0 0 1-.5.5h-5a.5.5 0 0 1-.5-.5v-5ZM42.5 21a.5.5 0 0 1 .5.5v5a.5.5 0 0 1-.5.5h-5a.5.5 0 0 1-.5-.5v-5a.5.5 0 0 1 .5-.5h5ZM10.5 21a.5.5 0 0 1 .5.5v5a.5.5 0 0 1-.5.5h-5a.5.5 0 0 1-.5-.5v-5a.5.5 0 0 1 .5-.5h5ZM39.203 34.96a.5.5 0 0 1 0 .707l-3.536 3.536a.5.5 0 0 1-.707 0l-3.535-3.536a.5.5 0 0 1 0-.707l3.535-3.535a.5.5 0 0 1 .707 0l3.536 3.535ZM16.575 12.333a.5.5 0 0 1 0 .707l-3.535 3.535a.5.5 0 0 1-.707 0L8.797 13.04a.5.5 0 0 1 0-.707l3.536-3.536a.5.5 0 0 1 .707 0l3.535 3.536ZM13.04 39.203a.5.5 0 0 1-.707 0l-3.536-3.536a.5.5 0 0 1 0-.707l3.536-3.535a.5.5 0 0 1 .707 0l3.536 3.535a.5.5 0 0 1 0 .707l-3.536 3.536ZM35.668 16.575a.5.5 0 0 1-.708 0l-3.535-3.535a.5.5 0 0 1 0-.707l3.535-3.536a.5.5 0 0 1 .708 0l3.535 3.536a.5.5 0 0 1 0 .707l-3.535 3.535Z"}))}var RT=Z.forwardRef(wH);RT.defaultProps={isIcon:!0};RT.displayName="IconSunFill";function f2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function p2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?f2(Object(r),!0).forEach(function(n){yt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function AH(t,e){var r=R.useContext(Rt),n=r.prefixCls,i=n===void 0?"arco":n,s=t.spin,a=t.className,o=p2(p2({"aria-hidden":!0,focusable:!1,ref:e},t),{},{className:"".concat(a?a+" ":"").concat(i,"-icon ").concat(i,"-icon-book")});return s&&(o.className="".concat(o.className," ").concat(i,"-icon-loading")),delete o.spin,delete o.isIcon,Z.createElement("svg",xt({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),Z.createElement("path",{strokeLinejoin:"round",d:"M24 13 7 7v28l17 6 17-6V7l-17 6Zm0 0v27.5M29 18l7-2.5M29 25l7-2.5M29 32l7-2.5M19 18l-7-2.5m7 9.5-7-2.5m7 9.5-7-2.5"}))}var CT=Z.forwardRef(AH);CT.defaultProps={isIcon:!0};CT.displayName="IconBook";function m2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function g2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?m2(Object(r),!0).forEach(function(n){yt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function RH(t,e){var r=R.useContext(Rt),n=r.prefixCls,i=n===void 0?"arco":n,s=t.spin,a=t.className,o=g2(g2({"aria-hidden":!0,focusable:!1,ref:e},t),{},{className:"".concat(a?a+" ":"").concat(i,"-icon ").concat(i,"-icon-command")});return s&&(o.className="".concat(o.className," ").concat(i,"-icon-loading")),delete o.spin,delete o.isIcon,Z.createElement("svg",xt({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),Z.createElement("path",{d:"M29 19v-6a6 6 0 1 1 6 6h-6Zm0 0v10m0-10H19m10 10v6a6 6 0 1 0 6-6h-6Zm0 0H19m0-10v10m0-10v-6a6 6 0 1 0-6 6h6Zm0 10v6a6 6 0 1 1-6-6h6Z"}))}var IT=Z.forwardRef(RH);IT.defaultProps={isIcon:!0};IT.displayName="IconCommand";function v2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function b2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?v2(Object(r),!0).forEach(function(n){yt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):v2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function CH(t,e){var r=R.useContext(Rt),n=r.prefixCls,i=n===void 0?"arco":n,s=t.spin,a=t.className,o=b2(b2({"aria-hidden":!0,focusable:!1,ref:e},t),{},{className:"".concat(a?a+" ":"").concat(i,"-icon ").concat(i,"-icon-desktop")});return s&&(o.className="".concat(o.className," ").concat(i,"-icon-loading")),delete o.spin,delete o.isIcon,Z.createElement("svg",xt({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),Z.createElement("path",{d:"M24 32v8m0 0h-9m9 0h9M7 32h34a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v22a1 1 0 0 0 1 1Z"}))}var kT=Z.forwardRef(CH);kT.defaultProps={isIcon:!0};kT.displayName="IconDesktop";function y2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function E2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?y2(Object(r),!0).forEach(function(n){yt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function IH(t,e){var r=R.useContext(Rt),n=r.prefixCls,i=n===void 0?"arco":n,s=t.spin,a=t.className,o=E2(E2({"aria-hidden":!0,focusable:!1,ref:e},t),{},{className:"".concat(a?a+" ":"").concat(i,"-icon ").concat(i,"-icon-folder")});return s&&(o.className="".concat(o.className," ").concat(i,"-icon-loading")),delete o.spin,delete o.isIcon,Z.createElement("svg",xt({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),Z.createElement("path",{d:"M6 13h18l-2.527-3.557a1.077 1.077 0 0 0-.88-.443H7.06C6.474 9 6 9.448 6 10v3Zm0 0h33.882c1.17 0 2.118.895 2.118 2v21c0 1.105-.948 3-2.118 3H8.118C6.948 39 6 38.105 6 37V13Z"}))}var LT=Z.forwardRef(IH);LT.defaultProps={isIcon:!0};LT.displayName="IconFolder";function _2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function T2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_2(Object(r),!0).forEach(function(n){yt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function kH(t,e){var r=R.useContext(Rt),n=r.prefixCls,i=n===void 0?"arco":n,s=t.spin,a=t.className,o=T2(T2({"aria-hidden":!0,focusable:!1,ref:e},t),{},{className:"".concat(a?a+" ":"").concat(i,"-icon ").concat(i,"-icon-lock")});return s&&(o.className="".concat(o.className," ").concat(i,"-icon-loading")),delete o.spin,delete o.isIcon,Z.createElement("svg",xt({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),Z.createElement("rect",{width:"34",height:"20",x:"7",y:"21",rx:"1"}),Z.createElement("path",{d:"M15 21v-6a9 9 0 1 1 18 0v6M24 35v-8"}))}var Em=Z.forwardRef(kH);Em.defaultProps={isIcon:!0};Em.displayName="IconLock";function x2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function S2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?x2(Object(r),!0).forEach(function(n){yt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function LH(t,e){var r=R.useContext(Rt),n=r.prefixCls,i=n===void 0?"arco":n,s=t.spin,a=t.className,o=S2(S2({"aria-hidden":!0,focusable:!1,ref:e},t),{},{className:"".concat(a?a+" ":"").concat(i,"-icon ").concat(i,"-icon-menu")});return s&&(o.className="".concat(o.className," ").concat(i,"-icon-loading")),delete o.spin,delete o.isIcon,Z.createElement("svg",xt({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),Z.createElement("path",{d:"M5 10h38M5 24h38M5 38h38"}))}var DT=Z.forwardRef(LH);DT.defaultProps={isIcon:!0};DT.displayName="IconMenu";function w2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function A2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?w2(Object(r),!0).forEach(function(n){yt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function DH(t,e){var r=R.useContext(Rt),n=r.prefixCls,i=n===void 0?"arco":n,s=t.spin,a=t.className,o=A2(A2({"aria-hidden":!0,focusable:!1,ref:e},t),{},{className:"".concat(a?a+" ":"").concat(i,"-icon ").concat(i,"-icon-skin")});return s&&(o.className="".concat(o.className," ").concat(i,"-icon-loading")),delete o.spin,delete o.isIcon,Z.createElement("svg",xt({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),Z.createElement("path",{d:"M17.936 6H7a1 1 0 0 0-1 1v17.559a1 1 0 0 0 1 1h4V40a1 1 0 0 0 1 1h24a1 1 0 0 0 1-1V25.559h4a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1H30.064C28.854 7.23 26.59 9.059 24 9.059S19.147 7.23 17.936 6Z"}))}var OT=Z.forwardRef(DH);OT.defaultProps={isIcon:!0};OT.displayName="IconSkin";function R2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function C2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?R2(Object(r),!0).forEach(function(n){yt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):R2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function OH(t,e){var r=R.useContext(Rt),n=r.prefixCls,i=n===void 0?"arco":n,s=t.spin,a=t.className,o=C2(C2({"aria-hidden":!0,focusable:!1,ref:e},t),{},{className:"".concat(a?a+" ":"").concat(i,"-icon ").concat(i,"-icon-storage")});return s&&(o.className="".concat(o.className," ").concat(i,"-icon-loading")),delete o.spin,delete o.isIcon,Z.createElement("svg",xt({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),Z.createElement("path",{d:"M7 18h34v12H7V18ZM40 6H8a1 1 0 0 0-1 1v11h34V7a1 1 0 0 0-1-1ZM7 30h34v11a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1V30Z"}),Z.createElement("path",{d:"M13.02 36H13v.02h.02V36Z"}),Z.createElement("path",{fill:"currentColor",stroke:"none",d:"M13 12v-2h-2v2h2Zm.02 0h2v-2h-2v2Zm0 .02v2h2v-2h-2Zm-.02 0h-2v2h2v-2ZM13 14h.02v-4H13v4Zm-1.98-2v.02h4V12h-4Zm2-1.98H13v4h.02v-4Zm1.98 2V12h-4v.02h4Z"}),Z.createElement("path",{d:"M13.02 24H13v.02h.02V24Z"}))}var MT=Z.forwardRef(OH);MT.defaultProps={isIcon:!0};MT.displayName="IconStorage";function I2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function k2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?I2(Object(r),!0).forEach(function(n){yt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):I2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function MH(t,e){var r=R.useContext(Rt),n=r.prefixCls,i=n===void 0?"arco":n,s=t.spin,a=t.className,o=k2(k2({"aria-hidden":!0,focusable:!1,ref:e},t),{},{className:"".concat(a?a+" ":"").concat(i,"-icon ").concat(i,"-icon-user")});return s&&(o.className="".concat(o.className," ").concat(i,"-icon-loading")),delete o.spin,delete o.isIcon,Z.createElement("svg",xt({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48"},o),Z.createElement("path",{d:"M7 37c0-4.97 4.03-8 9-8h16c4.97 0 9 3.03 9 8v3a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1v-3Z"}),Z.createElement("circle",{cx:"24",cy:"15",r:"8"}))}var jg=Z.forwardRef(MH);jg.defaultProps={isIcon:!0};jg.displayName="IconUser";var PH=typeof global=="object"&&global&&global.Object===Object&&global,NH=typeof self=="object"&&self&&self.Object===Object&&self,FO=PH||NH||Function("return this")(),_m=FO.Symbol,$O=Object.prototype,FH=$O.hasOwnProperty,$H=$O.toString,Oc=_m?_m.toStringTag:void 0;function UH(t){var e=FH.call(t,Oc),r=t[Oc];try{t[Oc]=void 0;var n=!0}catch{}var i=$H.call(t);return n&&(e?t[Oc]=r:delete t[Oc]),i}var BH=Object.prototype,jH=BH.toString;function HH(t){return jH.call(t)}var VH="[object Null]",WH="[object Undefined]",L2=_m?_m.toStringTag:void 0;function GH(t){return t==null?t===void 0?WH:VH:L2&&L2 in Object(t)?UH(t):HH(t)}function KH(t){return t!=null&&typeof t=="object"}var qH="[object Symbol]";function zH(t){return typeof t=="symbol"||KH(t)&&GH(t)==qH}var YH=/\s/;function XH(t){for(var e=t.length;e--&&YH.test(t.charAt(e)););return e}var ZH=/^\s+/;function QH(t){return t&&t.slice(0,XH(t)+1).replace(ZH,"")}function Tm(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var D2=NaN,JH=/^[-+]0x[0-9a-f]+$/i,eV=/^0b[01]+$/i,tV=/^0o[0-7]+$/i,rV=parseInt;function O2(t){if(typeof t=="number")return t;if(zH(t))return D2;if(Tm(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Tm(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=QH(t);var r=eV.test(t);return r||tV.test(t)?rV(t.slice(2),r?2:8):JH.test(t)?D2:+t}var Wv=function(){return FO.Date.now()},nV="Expected a function",iV=Math.max,sV=Math.min;function N0(t,e,r){var n,i,s,a,o,l,u=0,c=!1,d=!1,h=!0;if(typeof t!="function")throw new TypeError(nV);e=O2(e)||0,Tm(r)&&(c=!!r.leading,d="maxWait"in r,s=d?iV(O2(r.maxWait)||0,e):s,h="trailing"in r?!!r.trailing:h);function f(_){var S=n,A=i;return n=i=void 0,u=_,a=t.apply(A,S),a}function p(_){return u=_,o=setTimeout(v,e),c?f(_):a}function m(_){var S=_-l,A=_-u,k=e-S;return d?sV(k,s-A):k}function g(_){var S=_-l,A=_-u;return l===void 0||S>=e||S<0||d&&A>=s}function v(){var _=Wv();if(g(_))return b(_);o=setTimeout(v,m(_))}function b(_){return o=void 0,h&&n?f(_):(n=i=void 0,a)}function y(){o!==void 0&&clearTimeout(o),u=0,n=l=i=o=void 0}function T(){return o===void 0?a:b(Wv())}function x(){var _=Wv(),S=g(_);if(n=arguments,i=this,l=_,S){if(o===void 0)return p(l);if(d)return clearTimeout(o),o=setTimeout(v,e),f(l)}return o===void 0&&(o=setTimeout(v,e)),a}return x.cancel=y,x.flush=T,x}var aV="Expected a function";function oV(t,e,r){var n=!0,i=!0;if(typeof t!="function")throw new TypeError(aV);return Tm(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),N0(t,e,{leading:n,maxWait:e,trailing:i})}var Eu=function(){return Eu=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Eu.apply(this,arguments)};function UO(t){return!t||!t.ownerDocument||!t.ownerDocument.defaultView?window:t.ownerDocument.defaultView}function BO(t){return!t||!t.ownerDocument?document:t.ownerDocument}var jO=function(t){var e={},r=Array.prototype.reduce.call(t,function(n,i){var s=i.name.match(/data-simplebar-(.+)/);if(s){var a=s[1].replace(/\W+(.)/g,function(o,l){return l.toUpperCase()});switch(i.value){case"true":n[a]=!0;break;case"false":n[a]=!1;break;case void 0:n[a]=!0;break;default:n[a]=i.value}}return n},e);return r};function HO(t,e){var r;t&&(r=t.classList).add.apply(r,e.split(" "))}function VO(t,e){t&&e.split(" ").forEach(function(r){t.classList.remove(r)})}function WO(t){return".".concat(t.split(" ").join("."))}var PT=!!(typeof window<"u"&&window.document&&window.document.createElement),lV=Object.freeze({__proto__:null,addClasses:HO,canUseDOM:PT,classNamesToQuery:WO,getElementDocument:BO,getElementWindow:UO,getOptions:jO,removeClasses:VO}),Kl=null,M2=null;PT&&window.addEventListener("resize",function(){M2!==window.devicePixelRatio&&(M2=window.devicePixelRatio,Kl=null)});function P2(){if(Kl===null){if(typeof document>"u")return Kl=0,Kl;var t=document.body,e=document.createElement("div");e.classList.add("simplebar-hide-scrollbar"),t.appendChild(e);var r=e.getBoundingClientRect().right;t.removeChild(e),Kl=r}return Kl}var oa=UO,Gv=BO,uV=jO,la=HO,ua=VO,Mn=WO,Mc=function(){function t(e,r){r===void 0&&(r={});var n=this;if(this.removePreventClickId=null,this.minScrollbarWidth=20,this.stopScrollDelay=175,this.isScrolling=!1,this.isMouseEntering=!1,this.isDragging=!1,this.scrollXTicking=!1,this.scrollYTicking=!1,this.wrapperEl=null,this.contentWrapperEl=null,this.contentEl=null,this.offsetEl=null,this.maskEl=null,this.placeholderEl=null,this.heightAutoObserverWrapperEl=null,this.heightAutoObserverEl=null,this.rtlHelpers=null,this.scrollbarWidth=0,this.resizeObserver=null,this.mutationObserver=null,this.elStyles=null,this.isRtl=null,this.mouseX=0,this.mouseY=0,this.onMouseMove=function(){},this.onWindowResize=function(){},this.onStopScrolling=function(){},this.onMouseEntered=function(){},this.onScroll=function(){var i=oa(n.el);n.scrollXTicking||(i.requestAnimationFrame(n.scrollX),n.scrollXTicking=!0),n.scrollYTicking||(i.requestAnimationFrame(n.scrollY),n.scrollYTicking=!0),n.isScrolling||(n.isScrolling=!0,la(n.el,n.classNames.scrolling)),n.showScrollbar("x"),n.showScrollbar("y"),n.onStopScrolling()},this.scrollX=function(){n.axis.x.isOverflowing&&n.positionScrollbar("x"),n.scrollXTicking=!1},this.scrollY=function(){n.axis.y.isOverflowing&&n.positionScrollbar("y"),n.scrollYTicking=!1},this._onStopScrolling=function(){ua(n.el,n.classNames.scrolling),n.options.autoHide&&(n.hideScrollbar("x"),n.hideScrollbar("y")),n.isScrolling=!1},this.onMouseEnter=function(){n.isMouseEntering||(la(n.el,n.classNames.mouseEntered),n.showScrollbar("x"),n.showScrollbar("y"),n.isMouseEntering=!0),n.onMouseEntered()},this._onMouseEntered=function(){ua(n.el,n.classNames.mouseEntered),n.options.autoHide&&(n.hideScrollbar("x"),n.hideScrollbar("y")),n.isMouseEntering=!1},this._onMouseMove=function(i){n.mouseX=i.clientX,n.mouseY=i.clientY,(n.axis.x.isOverflowing||n.axis.x.forceVisible)&&n.onMouseMoveForAxis("x"),(n.axis.y.isOverflowing||n.axis.y.forceVisible)&&n.onMouseMoveForAxis("y")},this.onMouseLeave=function(){n.onMouseMove.cancel(),(n.axis.x.isOverflowing||n.axis.x.forceVisible)&&n.onMouseLeaveForAxis("x"),(n.axis.y.isOverflowing||n.axis.y.forceVisible)&&n.onMouseLeaveForAxis("y"),n.mouseX=-1,n.mouseY=-1},this._onWindowResize=function(){n.scrollbarWidth=n.getScrollbarWidth(),n.hideNativeScrollbar()},this.onPointerEvent=function(i){if(!(!n.axis.x.track.el||!n.axis.y.track.el||!n.axis.x.scrollbar.el||!n.axis.y.scrollbar.el)){var s,a;n.axis.x.track.rect=n.axis.x.track.el.getBoundingClientRect(),n.axis.y.track.rect=n.axis.y.track.el.getBoundingClientRect(),(n.axis.x.isOverflowing||n.axis.x.forceVisible)&&(s=n.isWithinBounds(n.axis.x.track.rect)),(n.axis.y.isOverflowing||n.axis.y.forceVisible)&&(a=n.isWithinBounds(n.axis.y.track.rect)),(s||a)&&(i.stopPropagation(),i.type==="pointerdown"&&i.pointerType!=="touch"&&(s&&(n.axis.x.scrollbar.rect=n.axis.x.scrollbar.el.getBoundingClientRect(),n.isWithinBounds(n.axis.x.scrollbar.rect)?n.onDragStart(i,"x"):n.onTrackClick(i,"x")),a&&(n.axis.y.scrollbar.rect=n.axis.y.scrollbar.el.getBoundingClientRect(),n.isWithinBounds(n.axis.y.scrollbar.rect)?n.onDragStart(i,"y"):n.onTrackClick(i,"y"))))}},this.drag=function(i){var s,a,o,l,u,c,d,h,f,p,m;if(!(!n.draggedAxis||!n.contentWrapperEl)){var g,v=n.axis[n.draggedAxis].track,b=(a=(s=v.rect)===null||s===void 0?void 0:s[n.axis[n.draggedAxis].sizeAttr])!==null&&a!==void 0?a:0,y=n.axis[n.draggedAxis].scrollbar,T=(l=(o=n.contentWrapperEl)===null||o===void 0?void 0:o[n.axis[n.draggedAxis].scrollSizeAttr])!==null&&l!==void 0?l:0,x=parseInt((c=(u=n.elStyles)===null||u===void 0?void 0:u[n.axis[n.draggedAxis].sizeAttr])!==null&&c!==void 0?c:"0px",10);i.preventDefault(),i.stopPropagation(),n.draggedAxis==="y"?g=i.pageY:g=i.pageX;var _=g-((h=(d=v.rect)===null||d===void 0?void 0:d[n.axis[n.draggedAxis].offsetAttr])!==null&&h!==void 0?h:0)-n.axis[n.draggedAxis].dragOffset;_=n.draggedAxis==="x"&&n.isRtl?((p=(f=v.rect)===null||f===void 0?void 0:f[n.axis[n.draggedAxis].sizeAttr])!==null&&p!==void 0?p:0)-y.size-_:_;var S=_/(b-y.size),A=S*(T-x);n.draggedAxis==="x"&&n.isRtl&&(A=!((m=t.getRtlHelpers())===null||m===void 0)&&m.isScrollingToNegative?-A:A),n.contentWrapperEl[n.axis[n.draggedAxis].scrollOffsetAttr]=A}},this.onEndDrag=function(i){n.isDragging=!1;var s=Gv(n.el),a=oa(n.el);i.preventDefault(),i.stopPropagation(),ua(n.el,n.classNames.dragging),n.onStopScrolling(),s.removeEventListener("mousemove",n.drag,!0),s.removeEventListener("mouseup",n.onEndDrag,!0),n.removePreventClickId=a.setTimeout(function(){s.removeEventListener("click",n.preventClick,!0),s.removeEventListener("dblclick",n.preventClick,!0),n.removePreventClickId=null})},this.preventClick=function(i){i.preventDefault(),i.stopPropagation()},this.el=e,this.options=Eu(Eu({},t.defaultOptions),r),this.classNames=Eu(Eu({},t.defaultOptions.classNames),r.classNames),this.axis={x:{scrollOffsetAttr:"scrollLeft",sizeAttr:"width",scrollSizeAttr:"scrollWidth",offsetSizeAttr:"offsetWidth",offsetAttr:"left",overflowAttr:"overflowX",dragOffset:0,isOverflowing:!0,forceVisible:!1,track:{size:null,el:null,rect:null,isVisible:!1},scrollbar:{size:null,el:null,rect:null,isVisible:!1}},y:{scrollOffsetAttr:"scrollTop",sizeAttr:"height",scrollSizeAttr:"scrollHeight",offsetSizeAttr:"offsetHeight",offsetAttr:"top",overflowAttr:"overflowY",dragOffset:0,isOverflowing:!0,forceVisible:!1,track:{size:null,el:null,rect:null,isVisible:!1},scrollbar:{size:null,el:null,rect:null,isVisible:!1}}},typeof this.el!="object"||!this.el.nodeName)throw new Error("Argument passed to SimpleBar must be an HTML element instead of ".concat(this.el));this.onMouseMove=oV(this._onMouseMove,64),this.onWindowResize=N0(this._onWindowResize,64,{leading:!0}),this.onStopScrolling=N0(this._onStopScrolling,this.stopScrollDelay),this.onMouseEntered=N0(this._onMouseEntered,this.stopScrollDelay),this.init()}return t.getRtlHelpers=function(){if(t.rtlHelpers)return t.rtlHelpers;var e=document.createElement("div");e.innerHTML='<div class="simplebar-dummy-scrollbar-size"><div></div></div>';var r=e.firstElementChild,n=r==null?void 0:r.firstElementChild;if(!n)return null;document.body.appendChild(r),r.scrollLeft=0;var i=t.getOffset(r),s=t.getOffset(n);r.scrollLeft=-999;var a=t.getOffset(n);return document.body.removeChild(r),t.rtlHelpers={isScrollOriginAtZero:i.left!==s.left,isScrollingToNegative:s.left!==a.left},t.rtlHelpers},t.prototype.getScrollbarWidth=function(){try{return this.contentWrapperEl&&getComputedStyle(this.contentWrapperEl,"::-webkit-scrollbar").display==="none"||"scrollbarWidth"in document.documentElement.style||"-ms-overflow-style"in document.documentElement.style?0:P2()}catch{return P2()}},t.getOffset=function(e){var r=e.getBoundingClientRect(),n=Gv(e),i=oa(e);return{top:r.top+(i.pageYOffset||n.documentElement.scrollTop),left:r.left+(i.pageXOffset||n.documentElement.scrollLeft)}},t.prototype.init=function(){PT&&(this.initDOM(),this.rtlHelpers=t.getRtlHelpers(),this.scrollbarWidth=this.getScrollbarWidth(),this.recalculate(),this.initListeners())},t.prototype.initDOM=function(){var e,r;this.wrapperEl=this.el.querySelector(Mn(this.classNames.wrapper)),this.contentWrapperEl=this.options.scrollableNode||this.el.querySelector(Mn(this.classNames.contentWrapper)),this.contentEl=this.options.contentNode||this.el.querySelector(Mn(this.classNames.contentEl)),this.offsetEl=this.el.querySelector(Mn(this.classNames.offset)),this.maskEl=this.el.querySelector(Mn(this.classNames.mask)),this.placeholderEl=this.findChild(this.wrapperEl,Mn(this.classNames.placeholder)),this.heightAutoObserverWrapperEl=this.el.querySelector(Mn(this.classNames.heightAutoObserverWrapperEl)),this.heightAutoObserverEl=this.el.querySelector(Mn(this.classNames.heightAutoObserverEl)),this.axis.x.track.el=this.findChild(this.el,"".concat(Mn(this.classNames.track)).concat(Mn(this.classNames.horizontal))),this.axis.y.track.el=this.findChild(this.el,"".concat(Mn(this.classNames.track)).concat(Mn(this.classNames.vertical))),this.axis.x.scrollbar.el=((e=this.axis.x.track.el)===null||e===void 0?void 0:e.querySelector(Mn(this.classNames.scrollbar)))||null,this.axis.y.scrollbar.el=((r=this.axis.y.track.el)===null||r===void 0?void 0:r.querySelector(Mn(this.classNames.scrollbar)))||null,this.options.autoHide||(la(this.axis.x.scrollbar.el,this.classNames.visible),la(this.axis.y.scrollbar.el,this.classNames.visible))},t.prototype.initListeners=function(){var e=this,r,n=oa(this.el);if(this.el.addEventListener("mouseenter",this.onMouseEnter),this.el.addEventListener("pointerdown",this.onPointerEvent,!0),this.el.addEventListener("mousemove",this.onMouseMove),this.el.addEventListener("mouseleave",this.onMouseLeave),(r=this.contentWrapperEl)===null||r===void 0||r.addEventListener("scroll",this.onScroll),n.addEventListener("resize",this.onWindowResize),!!this.contentEl){if(window.ResizeObserver){var i=!1,s=n.ResizeObserver||ResizeObserver;this.resizeObserver=new s(function(){i&&n.requestAnimationFrame(function(){e.recalculate()})}),this.resizeObserver.observe(this.el),this.resizeObserver.observe(this.contentEl),n.requestAnimationFrame(function(){i=!0})}this.mutationObserver=new n.MutationObserver(function(){n.requestAnimationFrame(function(){e.recalculate()})}),this.mutationObserver.observe(this.contentEl,{childList:!0,subtree:!0,characterData:!0})}},t.prototype.recalculate=function(){if(!(!this.heightAutoObserverEl||!this.contentEl||!this.contentWrapperEl||!this.wrapperEl||!this.placeholderEl)){var e=oa(this.el);this.elStyles=e.getComputedStyle(this.el),this.isRtl=this.elStyles.direction==="rtl";var r=this.contentEl.offsetWidth,n=this.heightAutoObserverEl.offsetHeight<=1,i=this.heightAutoObserverEl.offsetWidth<=1||r>0,s=this.contentWrapperEl.offsetWidth,a=this.elStyles.overflowX,o=this.elStyles.overflowY;this.contentEl.style.padding="".concat(this.elStyles.paddingTop," ").concat(this.elStyles.paddingRight," ").concat(this.elStyles.paddingBottom," ").concat(this.elStyles.paddingLeft),this.wrapperEl.style.margin="-".concat(this.elStyles.paddingTop," -").concat(this.elStyles.paddingRight," -").concat(this.elStyles.paddingBottom," -").concat(this.elStyles.paddingLeft);var l=this.contentEl.scrollHeight,u=this.contentEl.scrollWidth;this.contentWrapperEl.style.height=n?"auto":"100%",this.placeholderEl.style.width=i?"".concat(r||u,"px"):"auto",this.placeholderEl.style.height="".concat(l,"px");var c=this.contentWrapperEl.offsetHeight;this.axis.x.isOverflowing=r!==0&&u>r,this.axis.y.isOverflowing=l>c,this.axis.x.isOverflowing=a==="hidden"?!1:this.axis.x.isOverflowing,this.axis.y.isOverflowing=o==="hidden"?!1:this.axis.y.isOverflowing,this.axis.x.forceVisible=this.options.forceVisible==="x"||this.options.forceVisible===!0,this.axis.y.forceVisible=this.options.forceVisible==="y"||this.options.forceVisible===!0,this.hideNativeScrollbar();var d=this.axis.x.isOverflowing?this.scrollbarWidth:0,h=this.axis.y.isOverflowing?this.scrollbarWidth:0;this.axis.x.isOverflowing=this.axis.x.isOverflowing&&u>s-h,this.axis.y.isOverflowing=this.axis.y.isOverflowing&&l>c-d,this.axis.x.scrollbar.size=this.getScrollbarSize("x"),this.axis.y.scrollbar.size=this.getScrollbarSize("y"),this.axis.x.scrollbar.el&&(this.axis.x.scrollbar.el.style.width="".concat(this.axis.x.scrollbar.size,"px")),this.axis.y.scrollbar.el&&(this.axis.y.scrollbar.el.style.height="".concat(this.axis.y.scrollbar.size,"px")),this.positionScrollbar("x"),this.positionScrollbar("y"),this.toggleTrackVisibility("x"),this.toggleTrackVisibility("y")}},t.prototype.getScrollbarSize=function(e){var r,n;if(e===void 0&&(e="y"),!this.axis[e].isOverflowing||!this.contentEl)return 0;var i=this.contentEl[this.axis[e].scrollSizeAttr],s=(n=(r=this.axis[e].track.el)===null||r===void 0?void 0:r[this.axis[e].offsetSizeAttr])!==null&&n!==void 0?n:0,a=s/i,o;return o=Math.max(~~(a*s),this.options.scrollbarMinSize),this.options.scrollbarMaxSize&&(o=Math.min(o,this.options.scrollbarMaxSize)),o},t.prototype.positionScrollbar=function(e){var r,n,i;e===void 0&&(e="y");var s=this.axis[e].scrollbar;if(!(!this.axis[e].isOverflowing||!this.contentWrapperEl||!s.el||!this.elStyles)){var a=this.contentWrapperEl[this.axis[e].scrollSizeAttr],o=((r=this.axis[e].track.el)===null||r===void 0?void 0:r[this.axis[e].offsetSizeAttr])||0,l=parseInt(this.elStyles[this.axis[e].sizeAttr],10),u=this.contentWrapperEl[this.axis[e].scrollOffsetAttr];u=e==="x"&&this.isRtl&&(!((n=t.getRtlHelpers())===null||n===void 0)&&n.isScrollOriginAtZero)?-u:u,e==="x"&&this.isRtl&&(u=!((i=t.getRtlHelpers())===null||i===void 0)&&i.isScrollingToNegative?u:-u);var c=u/(a-l),d=~~((o-s.size)*c);d=e==="x"&&this.isRtl?-d+(o-s.size):d,s.el.style.transform=e==="x"?"translate3d(".concat(d,"px, 0, 0)"):"translate3d(0, ".concat(d,"px, 0)")}},t.prototype.toggleTrackVisibility=function(e){e===void 0&&(e="y");var r=this.axis[e].track.el,n=this.axis[e].scrollbar.el;!r||!n||!this.contentWrapperEl||(this.axis[e].isOverflowing||this.axis[e].forceVisible?(r.style.visibility="visible",this.contentWrapperEl.style[this.axis[e].overflowAttr]="scroll",this.el.classList.add("".concat(this.classNames.scrollable,"-").concat(e))):(r.style.visibility="hidden",this.contentWrapperEl.style[this.axis[e].overflowAttr]="hidden",this.el.classList.remove("".concat(this.classNames.scrollable,"-").concat(e))),this.axis[e].isOverflowing?n.style.display="block":n.style.display="none")},t.prototype.showScrollbar=function(e){e===void 0&&(e="y"),this.axis[e].isOverflowing&&!this.axis[e].scrollbar.isVisible&&(la(this.axis[e].scrollbar.el,this.classNames.visible),this.axis[e].scrollbar.isVisible=!0)},t.prototype.hideScrollbar=function(e){e===void 0&&(e="y"),!this.isDragging&&this.axis[e].isOverflowing&&this.axis[e].scrollbar.isVisible&&(ua(this.axis[e].scrollbar.el,this.classNames.visible),this.axis[e].scrollbar.isVisible=!1)},t.prototype.hideNativeScrollbar=function(){this.offsetEl&&(this.offsetEl.style[this.isRtl?"left":"right"]=this.axis.y.isOverflowing||this.axis.y.forceVisible?"-".concat(this.scrollbarWidth,"px"):"0px",this.offsetEl.style.bottom=this.axis.x.isOverflowing||this.axis.x.forceVisible?"-".concat(this.scrollbarWidth,"px"):"0px")},t.prototype.onMouseMoveForAxis=function(e){e===void 0&&(e="y");var r=this.axis[e];!r.track.el||!r.scrollbar.el||(r.track.rect=r.track.el.getBoundingClientRect(),r.scrollbar.rect=r.scrollbar.el.getBoundingClientRect(),this.isWithinBounds(r.track.rect)?(this.showScrollbar(e),la(r.track.el,this.classNames.hover),this.isWithinBounds(r.scrollbar.rect)?la(r.scrollbar.el,this.classNames.hover):ua(r.scrollbar.el,this.classNames.hover)):(ua(r.track.el,this.classNames.hover),this.options.autoHide&&this.hideScrollbar(e)))},t.prototype.onMouseLeaveForAxis=function(e){e===void 0&&(e="y"),ua(this.axis[e].track.el,this.classNames.hover),ua(this.axis[e].scrollbar.el,this.classNames.hover),this.options.autoHide&&this.hideScrollbar(e)},t.prototype.onDragStart=function(e,r){var n;r===void 0&&(r="y"),this.isDragging=!0;var i=Gv(this.el),s=oa(this.el),a=this.axis[r].scrollbar,o=r==="y"?e.pageY:e.pageX;this.axis[r].dragOffset=o-(((n=a.rect)===null||n===void 0?void 0:n[this.axis[r].offsetAttr])||0),this.draggedAxis=r,la(this.el,this.classNames.dragging),i.addEventListener("mousemove",this.drag,!0),i.addEventListener("mouseup",this.onEndDrag,!0),this.removePreventClickId===null?(i.addEventListener("click",this.preventClick,!0),i.addEventListener("dblclick",this.preventClick,!0)):(s.clearTimeout(this.removePreventClickId),this.removePreventClickId=null)},t.prototype.onTrackClick=function(e,r){var n=this,i,s,a,o;r===void 0&&(r="y");var l=this.axis[r];if(!(!this.options.clickOnTrack||!l.scrollbar.el||!this.contentWrapperEl)){e.preventDefault();var u=oa(this.el);this.axis[r].scrollbar.rect=l.scrollbar.el.getBoundingClientRect();var c=this.axis[r].scrollbar,d=(s=(i=c.rect)===null||i===void 0?void 0:i[this.axis[r].offsetAttr])!==null&&s!==void 0?s:0,h=parseInt((o=(a=this.elStyles)===null||a===void 0?void 0:a[this.axis[r].sizeAttr])!==null&&o!==void 0?o:"0px",10),f=this.contentWrapperEl[this.axis[r].scrollOffsetAttr],p=r==="y"?this.mouseY-d:this.mouseX-d,m=p<0?-1:1,g=m===-1?f-h:f+h,v=40,b=function(){n.contentWrapperEl&&(m===-1?f>g&&(f-=v,n.contentWrapperEl[n.axis[r].scrollOffsetAttr]=f,u.requestAnimationFrame(b)):f<g&&(f+=v,n.contentWrapperEl[n.axis[r].scrollOffsetAttr]=f,u.requestAnimationFrame(b)))};b()}},t.prototype.getContentElement=function(){return this.contentEl},t.prototype.getScrollElement=function(){return this.contentWrapperEl},t.prototype.removeListeners=function(){var e=oa(this.el);this.el.removeEventListener("mouseenter",this.onMouseEnter),this.el.removeEventListener("pointerdown",this.onPointerEvent,!0),this.el.removeEventListener("mousemove",this.onMouseMove),this.el.removeEventListener("mouseleave",this.onMouseLeave),this.contentWrapperEl&&this.contentWrapperEl.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onWindowResize),this.mutationObserver&&this.mutationObserver.disconnect(),this.resizeObserver&&this.resizeObserver.disconnect(),this.onMouseMove.cancel(),this.onWindowResize.cancel(),this.onStopScrolling.cancel(),this.onMouseEntered.cancel()},t.prototype.unMount=function(){this.removeListeners()},t.prototype.isWithinBounds=function(e){return this.mouseX>=e.left&&this.mouseX<=e.left+e.width&&this.mouseY>=e.top&&this.mouseY<=e.top+e.height},t.prototype.findChild=function(e,r){var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;return Array.prototype.filter.call(e.children,function(i){return n.call(i,r)})[0]},t.rtlHelpers=null,t.defaultOptions={forceVisible:!1,clickOnTrack:!0,scrollbarMinSize:25,scrollbarMaxSize:0,ariaLabel:"scrollable content",tabIndex:0,classNames:{contentEl:"simplebar-content",contentWrapper:"simplebar-content-wrapper",offset:"simplebar-offset",mask:"simplebar-mask",wrapper:"simplebar-wrapper",placeholder:"simplebar-placeholder",scrollbar:"simplebar-scrollbar",track:"simplebar-track",heightAutoObserverWrapperEl:"simplebar-height-auto-observer-wrapper",heightAutoObserverEl:"simplebar-height-auto-observer",visible:"simplebar-visible",horizontal:"simplebar-horizontal",vertical:"simplebar-vertical",hover:"simplebar-hover",dragging:"simplebar-dragging",scrolling:"simplebar-scrolling",scrollable:"simplebar-scrollable",mouseEntered:"simplebar-mouse-entered"},scrollableNode:null,contentNode:null,autoHide:!0},t.getOptions=uV,t.helpers=lV,t}(),Qn=function(){return Qn=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Qn.apply(this,arguments)};function cV(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}var _c=R.forwardRef(function(t,e){var r=t.children,n=t.scrollableNodeProps,i=n===void 0?{}:n,s=cV(t,["children","scrollableNodeProps"]),a=R.useRef(),o=R.useRef(),l=R.useRef(),u={},c={};Object.keys(s).forEach(function(f){Object.prototype.hasOwnProperty.call(Mc.defaultOptions,f)?u[f]=s[f]:c[f]=s[f]});var d=Qn(Qn({},Mc.defaultOptions.classNames),u.classNames),h=Qn(Qn({},i),{className:"".concat(d.contentWrapper).concat(i.className?" ".concat(i.className):""),tabIndex:u.tabIndex||Mc.defaultOptions.tabIndex,role:"region","aria-label":u.ariaLabel||Mc.defaultOptions.ariaLabel});return R.useEffect(function(){var f;return o.current=h.ref?h.ref.current:o.current,a.current&&(f=new Mc(a.current,Qn(Qn(Qn({},u),o.current&&{scrollableNode:o.current}),l.current&&{contentNode:l.current})),typeof e=="function"?e(f):e&&(e.current=f)),function(){f==null||f.unMount(),f=null,typeof e=="function"&&e(null)}},[]),R.createElement("div",Qn({"data-simplebar":"init",ref:a},c),R.createElement("div",{className:d.wrapper},R.createElement("div",{className:d.heightAutoObserverWrapperEl},R.createElement("div",{className:d.heightAutoObserverEl})),R.createElement("div",{className:d.mask},R.createElement("div",{className:d.offset},typeof r=="function"?r({scrollableNodeRef:o,scrollableNodeProps:Qn(Qn({},h),{ref:o}),contentNodeRef:l,contentNodeProps:{className:d.contentEl,ref:l}}):R.createElement("div",Qn({},h),R.createElement("div",{className:d.contentEl},r)))),R.createElement("div",{className:d.placeholder})),R.createElement("div",{className:"".concat(d.track," simplebar-horizontal")},R.createElement("div",{className:d.scrollbar})),R.createElement("div",{className:"".concat(d.track," simplebar-vertical")},R.createElement("div",{className:d.scrollbar})))});_c.displayName="SimpleBar";const os=({title:t,description:e,children:r})=>E.jsxs("section",{className:"setting-row",children:[E.jsxs("header",{children:[E.jsx(hr.Title,{heading:6,style:{marginTop:0},children:t}),E.jsx(hr.Text,{type:"secondary",children:e})]}),r]});var GO={exports:{}},dV={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},KO={exports:{}},hV=function(e){return!e||typeof e=="string"?!1:e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")},fV=hV,pV=Array.prototype.concat,mV=Array.prototype.slice,N2=KO.exports=function(e){for(var r=[],n=0,i=e.length;n<i;n++){var s=e[n];fV(s)?r=pV.call(r,mV.call(s)):r.push(s)}return r};N2.wrap=function(t){return function(){return t(N2(arguments))}};var gV=KO.exports,Ud=dV,zh=gV,qO=Object.hasOwnProperty,zO=Object.create(null);for(var Kv in Ud)qO.call(Ud,Kv)&&(zO[Ud[Kv]]=Kv);var ni=GO.exports={to:{},get:{}};ni.get=function(t){var e=t.substring(0,3).toLowerCase(),r,n;switch(e){case"hsl":r=ni.get.hsl(t),n="hsl";break;case"hwb":r=ni.get.hwb(t),n="hwb";break;default:r=ni.get.rgb(t),n="rgb";break}return r?{model:n,value:r}:null};ni.get.rgb=function(t){if(!t)return null;var e=/^#([a-f0-9]{3,4})$/i,r=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,n=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,s=/^(\w+)$/,a=[0,0,0,1],o,l,u;if(o=t.match(r)){for(u=o[2],o=o[1],l=0;l<3;l++){var c=l*2;a[l]=parseInt(o.slice(c,c+2),16)}u&&(a[3]=parseInt(u,16)/255)}else if(o=t.match(e)){for(o=o[1],u=o[3],l=0;l<3;l++)a[l]=parseInt(o[l]+o[l],16);u&&(a[3]=parseInt(u+u,16)/255)}else if(o=t.match(n)){for(l=0;l<3;l++)a[l]=parseInt(o[l+1],0);o[4]&&(o[5]?a[3]=parseFloat(o[4])*.01:a[3]=parseFloat(o[4]))}else if(o=t.match(i)){for(l=0;l<3;l++)a[l]=Math.round(parseFloat(o[l+1])*2.55);o[4]&&(o[5]?a[3]=parseFloat(o[4])*.01:a[3]=parseFloat(o[4]))}else return(o=t.match(s))?o[1]==="transparent"?[0,0,0,0]:qO.call(Ud,o[1])?(a=Ud[o[1]],a[3]=1,a):null:null;for(l=0;l<3;l++)a[l]=Va(a[l],0,255);return a[3]=Va(a[3],0,1),a};ni.get.hsl=function(t){if(!t)return null;var e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=t.match(e);if(r){var n=parseFloat(r[4]),i=(parseFloat(r[1])%360+360)%360,s=Va(parseFloat(r[2]),0,100),a=Va(parseFloat(r[3]),0,100),o=Va(isNaN(n)?1:n,0,1);return[i,s,a,o]}return null};ni.get.hwb=function(t){if(!t)return null;var e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=t.match(e);if(r){var n=parseFloat(r[4]),i=(parseFloat(r[1])%360+360)%360,s=Va(parseFloat(r[2]),0,100),a=Va(parseFloat(r[3]),0,100),o=Va(isNaN(n)?1:n,0,1);return[i,s,a,o]}return null};ni.to.hex=function(){var t=zh(arguments);return"#"+gf(t[0])+gf(t[1])+gf(t[2])+(t[3]<1?gf(Math.round(t[3]*255)):"")};ni.to.rgb=function(){var t=zh(arguments);return t.length<4||t[3]===1?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"};ni.to.rgb.percent=function(){var t=zh(arguments),e=Math.round(t[0]/255*100),r=Math.round(t[1]/255*100),n=Math.round(t[2]/255*100);return t.length<4||t[3]===1?"rgb("+e+"%, "+r+"%, "+n+"%)":"rgba("+e+"%, "+r+"%, "+n+"%, "+t[3]+")"};ni.to.hsl=function(){var t=zh(arguments);return t.length<4||t[3]===1?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"};ni.to.hwb=function(){var t=zh(arguments),e="";return t.length>=4&&t[3]!==1&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"};ni.to.keyword=function(t){return zO[t.slice(0,3)]};function Va(t,e,r){return Math.min(Math.max(e,t),r)}function gf(t){var e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}var vV=GO.exports,YO={exports:{}},bV={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},nl=bV,XO={};for(var qv in nl)nl.hasOwnProperty(qv)&&(XO[nl[qv]]=qv);var Ce=YO.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var Pn in Ce)if(Ce.hasOwnProperty(Pn)){if(!("channels"in Ce[Pn]))throw new Error("missing channels property: "+Pn);if(!("labels"in Ce[Pn]))throw new Error("missing channel labels property: "+Pn);if(Ce[Pn].labels.length!==Ce[Pn].channels)throw new Error("channel and label counts mismatch: "+Pn);var yV=Ce[Pn].channels,EV=Ce[Pn].labels;delete Ce[Pn].channels,delete Ce[Pn].labels,Object.defineProperty(Ce[Pn],"channels",{value:yV}),Object.defineProperty(Ce[Pn],"labels",{value:EV})}Ce.rgb.hsl=function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.min(e,r,n),s=Math.max(e,r,n),a=s-i,o,l,u;return s===i?o=0:e===s?o=(r-n)/a:r===s?o=2+(n-e)/a:n===s&&(o=4+(e-r)/a),o=Math.min(o*60,360),o<0&&(o+=360),u=(i+s)/2,s===i?l=0:u<=.5?l=a/(s+i):l=a/(2-s-i),[o,l*100,u*100]};Ce.rgb.hsv=function(t){var e,r,n,i,s,a=t[0]/255,o=t[1]/255,l=t[2]/255,u=Math.max(a,o,l),c=u-Math.min(a,o,l),d=function(h){return(u-h)/6/c+1/2};return c===0?i=s=0:(s=c/u,e=d(a),r=d(o),n=d(l),a===u?i=n-r:o===u?i=1/3+e-n:l===u&&(i=2/3+r-e),i<0?i+=1:i>1&&(i-=1)),[i*360,s*100,u*100]};Ce.rgb.hwb=function(t){var e=t[0],r=t[1],n=t[2],i=Ce.rgb.hsl(t)[0],s=1/255*Math.min(e,Math.min(r,n));return n=1-1/255*Math.max(e,Math.max(r,n)),[i,s*100,n*100]};Ce.rgb.cmyk=function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,i,s,a,o;return o=Math.min(1-e,1-r,1-n),i=(1-e-o)/(1-o)||0,s=(1-r-o)/(1-o)||0,a=(1-n-o)/(1-o)||0,[i*100,s*100,a*100,o*100]};function _V(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2)}Ce.rgb.keyword=function(t){var e=XO[t];if(e)return e;var r=1/0,n;for(var i in nl)if(nl.hasOwnProperty(i)){var s=nl[i],a=_V(t,s);a<r&&(r=a,n=i)}return n};Ce.keyword.rgb=function(t){return nl[t]};Ce.rgb.xyz=function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255;e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92;var i=e*.4124+r*.3576+n*.1805,s=e*.2126+r*.7152+n*.0722,a=e*.0193+r*.1192+n*.9505;return[i*100,s*100,a*100]};Ce.rgb.lab=function(t){var e=Ce.rgb.xyz(t),r=e[0],n=e[1],i=e[2],s,a,o;return r/=95.047,n/=100,i/=108.883,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,s=116*n-16,a=500*(r-n),o=200*(n-i),[s,a,o]};Ce.hsl.rgb=function(t){var e=t[0]/360,r=t[1]/100,n=t[2]/100,i,s,a,o,l;if(r===0)return l=n*255,[l,l,l];n<.5?s=n*(1+r):s=n+r-n*r,i=2*n-s,o=[0,0,0];for(var u=0;u<3;u++)a=e+1/3*-(u-1),a<0&&a++,a>1&&a--,6*a<1?l=i+(s-i)*6*a:2*a<1?l=s:3*a<2?l=i+(s-i)*(2/3-a)*6:l=i,o[u]=l*255;return o};Ce.hsl.hsv=function(t){var e=t[0],r=t[1]/100,n=t[2]/100,i=r,s=Math.max(n,.01),a,o;return n*=2,r*=n<=1?n:2-n,i*=s<=1?s:2-s,o=(n+r)/2,a=n===0?2*i/(s+i):2*r/(n+r),[e,a*100,o*100]};Ce.hsv.rgb=function(t){var e=t[0]/60,r=t[1]/100,n=t[2]/100,i=Math.floor(e)%6,s=e-Math.floor(e),a=255*n*(1-r),o=255*n*(1-r*s),l=255*n*(1-r*(1-s));switch(n*=255,i){case 0:return[n,l,a];case 1:return[o,n,a];case 2:return[a,n,l];case 3:return[a,o,n];case 4:return[l,a,n];case 5:return[n,a,o]}};Ce.hsv.hsl=function(t){var e=t[0],r=t[1]/100,n=t[2]/100,i=Math.max(n,.01),s,a,o;return o=(2-r)*n,s=(2-r)*i,a=r*i,a/=s<=1?s:2-s,a=a||0,o/=2,[e,a*100,o*100]};Ce.hwb.rgb=function(t){var e=t[0]/360,r=t[1]/100,n=t[2]/100,i=r+n,s,a,o,l;i>1&&(r/=i,n/=i),s=Math.floor(6*e),a=1-n,o=6*e-s,s&1&&(o=1-o),l=r+o*(a-r);var u,c,d;switch(s){default:case 6:case 0:u=a,c=l,d=r;break;case 1:u=l,c=a,d=r;break;case 2:u=r,c=a,d=l;break;case 3:u=r,c=l,d=a;break;case 4:u=l,c=r,d=a;break;case 5:u=a,c=r,d=l;break}return[u*255,c*255,d*255]};Ce.cmyk.rgb=function(t){var e=t[0]/100,r=t[1]/100,n=t[2]/100,i=t[3]/100,s,a,o;return s=1-Math.min(1,e*(1-i)+i),a=1-Math.min(1,r*(1-i)+i),o=1-Math.min(1,n*(1-i)+i),[s*255,a*255,o*255]};Ce.xyz.rgb=function(t){var e=t[0]/100,r=t[1]/100,n=t[2]/100,i,s,a;return i=e*3.2406+r*-1.5372+n*-.4986,s=e*-.9689+r*1.8758+n*.0415,a=e*.0557+r*-.204+n*1.057,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*12.92,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a*12.92,i=Math.min(Math.max(0,i),1),s=Math.min(Math.max(0,s),1),a=Math.min(Math.max(0,a),1),[i*255,s*255,a*255]};Ce.xyz.lab=function(t){var e=t[0],r=t[1],n=t[2],i,s,a;return e/=95.047,r/=100,n/=108.883,e=e>.008856?Math.pow(e,1/3):7.787*e+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,i=116*r-16,s=500*(e-r),a=200*(r-n),[i,s,a]};Ce.lab.xyz=function(t){var e=t[0],r=t[1],n=t[2],i,s,a;s=(e+16)/116,i=r/500+s,a=s-n/200;var o=Math.pow(s,3),l=Math.pow(i,3),u=Math.pow(a,3);return s=o>.008856?o:(s-16/116)/7.787,i=l>.008856?l:(i-16/116)/7.787,a=u>.008856?u:(a-16/116)/7.787,i*=95.047,s*=100,a*=108.883,[i,s,a]};Ce.lab.lch=function(t){var e=t[0],r=t[1],n=t[2],i,s,a;return i=Math.atan2(n,r),s=i*360/2/Math.PI,s<0&&(s+=360),a=Math.sqrt(r*r+n*n),[e,a,s]};Ce.lch.lab=function(t){var e=t[0],r=t[1],n=t[2],i,s,a;return a=n/360*2*Math.PI,i=r*Math.cos(a),s=r*Math.sin(a),[e,i,s]};Ce.rgb.ansi16=function(t){var e=t[0],r=t[1],n=t[2],i=1 in arguments?arguments[1]:Ce.rgb.hsv(t)[2];if(i=Math.round(i/50),i===0)return 30;var s=30+(Math.round(n/255)<<2|Math.round(r/255)<<1|Math.round(e/255));return i===2&&(s+=60),s};Ce.hsv.ansi16=function(t){return Ce.rgb.ansi16(Ce.hsv.rgb(t),t[2])};Ce.rgb.ansi256=function(t){var e=t[0],r=t[1],n=t[2];if(e===r&&r===n)return e<8?16:e>248?231:Math.round((e-8)/247*24)+232;var i=16+36*Math.round(e/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5);return i};Ce.ansi16.rgb=function(t){var e=t%10;if(e===0||e===7)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];var r=(~~(t>50)+1)*.5,n=(e&1)*r*255,i=(e>>1&1)*r*255,s=(e>>2&1)*r*255;return[n,i,s]};Ce.ansi256.rgb=function(t){if(t>=232){var e=(t-232)*10+8;return[e,e,e]}t-=16;var r,n=Math.floor(t/36)/5*255,i=Math.floor((r=t%36)/6)/5*255,s=r%6/5*255;return[n,i,s]};Ce.rgb.hex=function(t){var e=((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255),r=e.toString(16).toUpperCase();return"000000".substring(r.length)+r};Ce.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var r=e[0];e[0].length===3&&(r=r.split("").map(function(o){return o+o}).join(""));var n=parseInt(r,16),i=n>>16&255,s=n>>8&255,a=n&255;return[i,s,a]};Ce.rgb.hcg=function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.max(Math.max(e,r),n),s=Math.min(Math.min(e,r),n),a=i-s,o,l;return a<1?o=s/(1-a):o=0,a<=0?l=0:i===e?l=(r-n)/a%6:i===r?l=2+(n-e)/a:l=4+(e-r)/a+4,l/=6,l%=1,[l*360,a*100,o*100]};Ce.hsl.hcg=function(t){var e=t[1]/100,r=t[2]/100,n=1,i=0;return r<.5?n=2*e*r:n=2*e*(1-r),n<1&&(i=(r-.5*n)/(1-n)),[t[0],n*100,i*100]};Ce.hsv.hcg=function(t){var e=t[1]/100,r=t[2]/100,n=e*r,i=0;return n<1&&(i=(r-n)/(1-n)),[t[0],n*100,i*100]};Ce.hcg.rgb=function(t){var e=t[0]/360,r=t[1]/100,n=t[2]/100;if(r===0)return[n*255,n*255,n*255];var i=[0,0,0],s=e%1*6,a=s%1,o=1-a,l=0;switch(Math.floor(s)){case 0:i[0]=1,i[1]=a,i[2]=0;break;case 1:i[0]=o,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=a;break;case 3:i[0]=0,i[1]=o,i[2]=1;break;case 4:i[0]=a,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=o}return l=(1-r)*n,[(r*i[0]+l)*255,(r*i[1]+l)*255,(r*i[2]+l)*255]};Ce.hcg.hsv=function(t){var e=t[1]/100,r=t[2]/100,n=e+r*(1-e),i=0;return n>0&&(i=e/n),[t[0],i*100,n*100]};Ce.hcg.hsl=function(t){var e=t[1]/100,r=t[2]/100,n=r*(1-e)+.5*e,i=0;return n>0&&n<.5?i=e/(2*n):n>=.5&&n<1&&(i=e/(2*(1-n))),[t[0],i*100,n*100]};Ce.hcg.hwb=function(t){var e=t[1]/100,r=t[2]/100,n=e+r*(1-e);return[t[0],(n-e)*100,(1-n)*100]};Ce.hwb.hcg=function(t){var e=t[1]/100,r=t[2]/100,n=1-r,i=n-e,s=0;return i<1&&(s=(n-i)/(1-i)),[t[0],i*100,s*100]};Ce.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};Ce.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};Ce.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};Ce.gray.hsl=Ce.gray.hsv=function(t){return[0,0,t[0]]};Ce.gray.hwb=function(t){return[0,100,t[0]]};Ce.gray.cmyk=function(t){return[0,0,0,t[0]]};Ce.gray.lab=function(t){return[t[0],0,0]};Ce.gray.hex=function(t){var e=Math.round(t[0]/100*255)&255,r=(e<<16)+(e<<8)+e,n=r.toString(16).toUpperCase();return"000000".substring(n.length)+n};Ce.rgb.gray=function(t){var e=(t[0]+t[1]+t[2])/3;return[e/255*100]};var ZO=YO.exports,xm=ZO;function TV(){for(var t={},e=Object.keys(xm),r=e.length,n=0;n<r;n++)t[e[n]]={distance:-1,parent:null};return t}function xV(t){var e=TV(),r=[t];for(e[t].distance=0;r.length;)for(var n=r.pop(),i=Object.keys(xm[n]),s=i.length,a=0;a<s;a++){var o=i[a],l=e[o];l.distance===-1&&(l.distance=e[n].distance+1,l.parent=n,r.unshift(o))}return e}function SV(t,e){return function(r){return e(t(r))}}function wV(t,e){for(var r=[e[t].parent,t],n=xm[e[t].parent][t],i=e[t].parent;e[i].parent;)r.unshift(e[i].parent),n=SV(xm[e[i].parent][i],n),i=e[i].parent;return n.conversion=r,n}var AV=function(t){for(var e=xV(t),r={},n=Object.keys(e),i=n.length,s=0;s<i;s++){var a=n[s],o=e[a];o.parent!==null&&(r[a]=wV(a,e))}return r},Uy=ZO,RV=AV,ql={},CV=Object.keys(Uy);function IV(t){var e=function(r){return r==null?r:(arguments.length>1&&(r=Array.prototype.slice.call(arguments)),t(r))};return"conversion"in t&&(e.conversion=t.conversion),e}function kV(t){var e=function(r){if(r==null)return r;arguments.length>1&&(r=Array.prototype.slice.call(arguments));var n=t(r);if(typeof n=="object")for(var i=n.length,s=0;s<i;s++)n[s]=Math.round(n[s]);return n};return"conversion"in t&&(e.conversion=t.conversion),e}CV.forEach(function(t){ql[t]={},Object.defineProperty(ql[t],"channels",{value:Uy[t].channels}),Object.defineProperty(ql[t],"labels",{value:Uy[t].labels});var e=RV(t),r=Object.keys(e);r.forEach(function(n){var i=e[n];ql[t][n]=kV(i),ql[t][n].raw=IV(i)})});var LV=ql,id=vV,ei=LV,NT=[].slice,QO=["keyword","gray","hex"],By={};Object.keys(ei).forEach(function(t){By[NT.call(ei[t].labels).sort().join("")]=t});var Sm={};function cn(t,e){if(!(this instanceof cn))return new cn(t,e);if(e&&e in QO&&(e=null),e&&!(e in ei))throw new Error("Unknown model: "+e);var r,n;if(t==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof cn)this.model=t.model,this.color=t.color.slice(),this.valpha=t.valpha;else if(typeof t=="string"){var i=id.get(t);if(i===null)throw new Error("Unable to parse color from string: "+t);this.model=i.model,n=ei[this.model].channels,this.color=i.value.slice(0,n),this.valpha=typeof i.value[n]=="number"?i.value[n]:1}else if(t.length){this.model=e||"rgb",n=ei[this.model].channels;var s=NT.call(t,0,n);this.color=jy(s,n),this.valpha=typeof t[n]=="number"?t[n]:1}else if(typeof t=="number")t&=16777215,this.model="rgb",this.color=[t>>16&255,t>>8&255,t&255],this.valpha=1;else{this.valpha=1;var a=Object.keys(t);"alpha"in t&&(a.splice(a.indexOf("alpha"),1),this.valpha=typeof t.alpha=="number"?t.alpha:0);var o=a.sort().join("");if(!(o in By))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=By[o];var l=ei[this.model].labels,u=[];for(r=0;r<l.length;r++)u.push(t[l[r]]);this.color=jy(u)}if(Sm[this.model])for(n=ei[this.model].channels,r=0;r<n;r++){var c=Sm[this.model][r];c&&(this.color[r]=c(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}cn.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(t){var e=this.model in id.to?this:this.rgb();e=e.round(typeof t=="number"?t:1);var r=e.valpha===1?e.color:e.color.concat(this.valpha);return id.to[e.model](r)},percentString:function(t){var e=this.rgb().round(typeof t=="number"?t:1),r=e.valpha===1?e.color:e.color.concat(this.valpha);return id.to.rgb.percent(r)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var t={},e=ei[this.model].channels,r=ei[this.model].labels,n=0;n<e;n++)t[r[n]]=this.color[n];return this.valpha!==1&&(t.alpha=this.valpha),t},unitArray:function(){var t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,this.valpha!==1&&t.push(this.valpha),t},unitObject:function(){var t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,this.valpha!==1&&(t.alpha=this.valpha),t},round:function(t){return t=Math.max(t||0,0),new cn(this.color.map(OV(t)).concat(this.valpha),this.model)},alpha:function(t){return arguments.length?new cn(this.color.concat(Math.max(0,Math.min(1,t))),this.model):this.valpha},red:vr("rgb",0,Ir(255)),green:vr("rgb",1,Ir(255)),blue:vr("rgb",2,Ir(255)),hue:vr(["hsl","hsv","hsl","hwb","hcg"],0,function(t){return(t%360+360)%360}),saturationl:vr("hsl",1,Ir(100)),lightness:vr("hsl",2,Ir(100)),saturationv:vr("hsv",1,Ir(100)),value:vr("hsv",2,Ir(100)),chroma:vr("hcg",1,Ir(100)),gray:vr("hcg",2,Ir(100)),white:vr("hwb",1,Ir(100)),wblack:vr("hwb",2,Ir(100)),cyan:vr("cmyk",0,Ir(100)),magenta:vr("cmyk",1,Ir(100)),yellow:vr("cmyk",2,Ir(100)),black:vr("cmyk",3,Ir(100)),x:vr("xyz",0,Ir(100)),y:vr("xyz",1,Ir(100)),z:vr("xyz",2,Ir(100)),l:vr("lab",0,Ir(100)),a:vr("lab",1),b:vr("lab",2),keyword:function(t){return arguments.length?new cn(t):ei[this.model].keyword(this.color)},hex:function(t){return arguments.length?new cn(t):id.to.hex(this.rgb().round().color)},rgbNumber:function(){var t=this.rgb().color;return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255},luminosity:function(){for(var t=this.rgb().color,e=[],r=0;r<t.length;r++){var n=t[r]/255;e[r]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),r=t.luminosity();return e>r?(e+.05)/(r+.05):(r+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},isDark:function(){var t=this.rgb().color,e=(t[0]*299+t[1]*587+t[2]*114)/1e3;return e<128},isLight:function(){return!this.isDark()},negate:function(){for(var t=this.rgb(),e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten:function(t){var e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken:function(t){var e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate:function(t){var e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate:function(t){var e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten:function(t){var e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken:function(t){var e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale:function(){var t=this.rgb().color,e=t[0]*.3+t[1]*.59+t[2]*.11;return cn.rgb(e,e,e)},fade:function(t){return this.alpha(this.valpha-this.valpha*t)},opaquer:function(t){return this.alpha(this.valpha+this.valpha*t)},rotate:function(t){var e=this.hsl(),r=e.color[0];return r=(r+t)%360,r=r<0?360+r:r,e.color[0]=r,e},mix:function(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);var r=t.rgb(),n=this.rgb(),i=e===void 0?.5:e,s=2*i-1,a=r.alpha()-n.alpha(),o=((s*a===-1?s:(s+a)/(1+s*a))+1)/2,l=1-o;return cn.rgb(o*r.red()+l*n.red(),o*r.green()+l*n.green(),o*r.blue()+l*n.blue(),r.alpha()*i+n.alpha()*(1-i))}};Object.keys(ei).forEach(function(t){if(QO.indexOf(t)===-1){var e=ei[t].channels;cn.prototype[t]=function(){if(this.model===t)return new cn(this);if(arguments.length)return new cn(arguments,t);var r=typeof arguments[e]=="number"?e:this.valpha;return new cn(MV(ei[this.model][t].raw(this.color)).concat(r),t)},cn[t]=function(r){return typeof r=="number"&&(r=jy(NT.call(arguments),e)),new cn(r,t)}}});function DV(t,e){return Number(t.toFixed(e))}function OV(t){return function(e){return DV(e,t)}}function vr(t,e,r){return t=Array.isArray(t)?t:[t],t.forEach(function(n){(Sm[n]||(Sm[n]=[]))[e]=r}),t=t[0],function(n){var i;return arguments.length?(r&&(n=r(n)),i=this[t](),i.color[e]=n,i):(i=this[t]().color[e],r&&(i=r(i)),i)}}function Ir(t){return function(e){return Math.max(0,Math.min(t,e))}}function MV(t){return Array.isArray(t)?t:[t]}function jy(t,e){for(var r=0;r<e;r++)typeof t[r]!="number"&&(t[r]=0);return t}var FT=cn,Yh={};const PV=FT;Yh.getRgbStr=function(t){return PV(t).rgb().round().color.join(",")};const NV=["hex","rgb","hsl"];function FV(t){return!t||NV.indexOf(t)<0?"hex":t}Yh.getColorString=function(t,e){const r=FV(e);return r==="hex"?t[r]():t[r]().round().string()};const F2=FT,{getColorString:$V}=Yh;function UV(t,e,r){const n=F2(t),i=n.hue(),s=n.saturationv(),a=n.value(),o=2,l=100,u=9,c=100,d=30;function h(b,y){let T;return i>=60&&i<=240?T=b?i-o*y:i+o*y:T=b?i+o*y:i-o*y,T<0?T+=360:T>=360&&(T-=360),Math.round(T)}function f(b,y){let T;return b?T=s<=u?s:s-(s-u)/5*y:T=s+(l-s)/4*y,T}function p(b,y){return b?a+(c-a)/5*y:a<=d?a:a-(a-d)/4*y}const m=e<6,g=m?6-e:e-6,v=e===6?n:F2({h:h(m,g),s:f(m,g),v:p(m,g)});return $V(v,r)}var JO=UV;const vf=FT,BV=JO,{getColorString:jV}=Yh;function HV(t,e,r){const n=vf(BV(t,10-e+1)),i=vf(t),s=i.hue(),a=i.saturationv(),l=vf({h:i.hue(),s:d(6),v:i.value()}).saturationv(),u=Math.ceil((l-9)/4),c=Math.ceil((100-l)/5);function d(f){if(f<6)return l+(6-f)*c;if(f===6){if(s>=0&&s<50)return a-15;if(s>=50&&s<191)return a-20;if(s>=191&&s<=360)return a-15}return l-u*(f-6)}const h=vf({h:n.hue(),s:d(e),v:n.value()});return jV(h,r)}var VV=HV;const $2=JO,U2=VV;function WV(t,e={}){const{dark:r,list:n,index:i=6,format:s="hex"}=e;if(n){const a=[],o=r?U2:$2;for(let l=1;l<=10;l++)a.push(o(t,l,s));return a}return r?U2(t,i,s):$2(t,i,s)}var GV=WV;const KV=GV,{getRgbStr:qV}=Yh;var zV=KV,YV=qV;const $T={Red:{light:"#DC2626",dark:"#DC2626"},Orange:{light:"#F97316",dark:"#EA580C"},Yellow:{light:"#FACC15",dark:"#FACC15"},Green:{light:"#16A34A",dark:"#22C55E"},Blue:{light:"#2563EB",dark:"#3B82F6"},Violet:{light:"#722ED1",dark:"#8E51DA"}},XV=()=>{const t=window.matchMedia("(prefers-color-scheme: dark)").matches,e=hn("themeMode");return e==="system"?t:e==="dark"},eM=(t,e,r="Blue")=>{const n=t[e]||t[r];return XV()?n.dark:n.light},ZV=t=>eM($T,t),B2=t=>eM($T,t),tM=t=>{zV(ZV(t),{list:!0}).map(YV).forEach((r,n)=>{document.body.style.setProperty(`--primary-${n+1}`,r)}),document.body.setAttribute("color-name",t)},QV=()=>{const{showDetailedRelativeTime:t,showEstimatedReadingTime:e,showFeedIcon:r,themeColor:n}=oe(Lt),{polyglot:i}=oe(St),s=a=>{Zr(a),a.themeColor&&tM(a.themeColor)};return E.jsxs(E.Fragment,{children:[E.jsx(os,{description:i.t("appearance.theme_color_description"),title:i.t("appearance.theme_color_label"),children:E.jsx("div",{style:{display:"flex"},children:Object.keys($T).map(a=>E.jsx("div",{role:"button",tabIndex:0,"aria-label":i.t("appearance.theme_color_aria_label",{color:a}),style:{width:"18px",height:"18px",borderRadius:"50%",margin:"2px",backgroundColor:B2(a),cursor:"pointer",border:"3px solid var(--color-bg-3)",outline:a===n?`1px solid ${B2(a)}`:"none"},onClick:()=>s({themeColor:a}),onKeyDown:o=>{(o.key==="Enter"||o.key===" ")&&s({themeColor:a})}},a))})}),E.jsx(Rn,{}),E.jsx(os,{description:i.t("appearance.show_detailed_relative_time_description"),title:i.t("appearance.show_detailed_relative_time_label"),children:E.jsx(vs,{checked:t,onChange:a=>s({showDetailedRelativeTime:a})})}),E.jsx(Rn,{}),E.jsx(os,{description:i.t("appearance.show_estimated_reading_time_description"),title:i.t("appearance.show_estimated_reading_time_label"),children:E.jsx(vs,{checked:e,onChange:a=>s({showEstimatedReadingTime:a})})}),E.jsx(Rn,{}),E.jsx(os,{description:i.t("appearance.show_feed_icon_description"),title:i.t("appearance.show_feed_icon_label"),children:E.jsx(vs,{checked:r,onChange:a=>s({showFeedIcon:a})})})]})},JV=()=>{const t=oe(yc),{polyglot:e}=oe(St),[r]=dr.useForm(),[n,i]=R.useState(!1),[s,a]=R.useState(""),[o,l]=R.useState({}),[u,c]=R.useState(!1),d=async()=>{if(!s.trim()){c(!1);return}try{const p=await AB(s);k0(m=>[...m,{...p}]),et.success(e.t("category_list.add_category_success"))}catch(p){console.error(`${e.t("category_list.add_category_error")}: `,p),et.error(e.t("category_list.add_category_error"))}a(""),c(!1)},h=async(p,m,g)=>{try{const v=await CB(p,m,g);fl(b=>b.map(y=>y.category.id===p?{...y,category:{...y.category,title:m,hide_globally:g}}:y)),k0(b=>b.map(y=>y.id===p?{...y,...v}:y)),et.success(e.t("category_list.update_category_success"))}catch{et.error(e.t("category_list.update_category_error"))}i(!1),r.resetFields()},f=async p=>{try{(await RB(p.id)).status===204?(k0(g=>g.filter(v=>v.id!==p.id)),et.success(e.t("category_list.remove_category_success",{title:p.title}))):et.error(e.t("category_list.remove_category_error",{title:p.title}))}catch(m){console.error(e.t("category_list.remove_category_error",{title:p.title}),m),et.error(e.t("category_list.remove_category_error",{title:p.title}))}};return E.jsxs(E.Fragment,{children:[E.jsxs("div",{children:[t.map(p=>E.jsx(qa,{className:"tag-style",closable:p.feedCount===0,size:"medium",onClick:()=>{l(p),i(!0),r.setFieldsValue({title:p.title})},onClose:async m=>{m.stopPropagation(),await f(p)},children:p.title},p.id)),u?E.jsx(Wn,{autoFocus:!0,className:"input-style",size:"small",value:s,onBlur:d,onChange:a,onPressEnter:d}):E.jsx(qa,{className:"add-category-tag",icon:E.jsx(j_,{}),size:"medium",tabIndex:0,onClick:()=>c(!0)})]}),o&&E.jsx(za,{unmountOnExit:!0,className:"modal-style",title:e.t("category_list.edit_category_title"),visible:n,onOk:r.submit,onCancel:()=>{i(!1),r.resetFields()},children:E.jsxs(dr,{form:r,layout:"vertical",labelCol:{style:{flexBasis:90}},wrapperCol:{style:{flexBasis:"calc(100% - 90px)"}},onSubmit:p=>h(o.id,p.title,p.hidden),children:[E.jsx(dr.Item,{field:"title",label:e.t("category_list.edit_category_title_label"),rules:[{required:!0}],children:E.jsx(Wn,{placeholder:e.t("category_list.edit_category_title_placeholder")})}),E.jsx(dr.Item,{field:"hidden",initialValue:o.hide_globally,label:e.t("category_list.edit_category_hidden_label"),rules:[{type:"boolean"}],triggerPropName:"checked",children:E.jsx(vs,{})})]})})]})},rM=({url:t,text:e,onMouseEnter:r=i=>i.target.dispatchEvent(new MouseEvent("mouseenter",{bubbles:!0})),onMouseLeave:n=i=>i.target.dispatchEvent(new MouseEvent("mouseleave",{bubbles:!0}))})=>{const[i,s]=R.useState(!1),a=l=>{s(!0),r(l)},o=l=>{s(!1),n(l)};return E.jsx(cU,{to:t,style:{color:"inherit",textDecoration:i?"underline":"none"},onMouseEnter:a,onMouseLeave:o,children:e})},j2=768,H2=992,$i=()=>{const[t,e]=R.useState(window.innerWidth<=j2),[r,n]=R.useState(window.innerWidth<=H2);return R.useEffect(()=>{const i=()=>{e(window.innerWidth<=j2),n(window.innerWidth<=H2)};return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]),{isBelowMedium:t,isBelowLarge:r}},Mr=({children:t,...e})=>{const{isBelowMedium:r}=$i(),[n,i]=R.useState(!1);return E.jsx(Uh,{popupVisible:!r&&n,onVisibleChange:s=>i(s),...e,children:t})},eW=t=>new Promise(e=>setTimeout(e,t)),tW=(t,e,r=!1)=>{let n;return function(...i){const s=()=>{n=null,r||t.apply(this,i)},a=r&&!n;clearTimeout(n),n=setTimeout(s,e),a&&t.apply(this,i)}},nM=vc(""),V2=Dt(nM),UT=vc("title"),rW=Dt(UT),BT=Cn([_r,nM,UT],(t,e,r)=>{const{feedsData:n}=t,i=[...n].sort((s,a)=>s.disabled&&!a.disabled?1:!s.disabled&&a.disabled?-1:0).sort((s,a)=>a.parsing_error_count-s.parsing_error_count);return e?RO(i,e,[r]):i}),nW=Cn(BT,t=>t.map(e=>({category:e.category,checked_at:e.checked_at,crawler:e.crawler,disabled:e.disabled,feed_url:e.feed_url,hidden:e.hide_globally,key:e.id,parsing_error_count:e.parsing_error_count,site_url:e.site_url,title:e.title}))),iM=(t,e,r=null)=>r===null||r===t.id?{...t,parsing_error_count:e?0:t.parsing_error_count+1,checked_at:Aj()}:t,sM=async(t,e,r=!0)=>{const{polyglot:n}=St.get();try{const s=(await t()).status===204;return r&&(s?et.success(n.t("feed_table.refresh_success")):et.error(n.t("feed_table.refresh_error"))),fl(a=>a.map(o=>e(o,s))),s}catch(i){return console.error("Failed to refresh feed: ",i),r&&et.error(n.t("feed_table.refresh_error")),fl(s=>s.map(a=>e(a,!1))),!1}},aM=async(t,e=!0)=>{const r=t.id||t.key;return sM(()=>Wj(r),(n,i)=>iM(n,i,r),e)},iW=({visible:t,setVisible:e})=>{const{polyglot:r}=oe(St),n=oe(BT),i=async()=>{e(!1),await sM(Gj,iM)},s=async()=>{e(!1);const o=n.filter(d=>d.parsing_error_count>0),l="bulk-refresh-error-feeds";et.loading({id:l,content:r.t("feed_table.bulk_refresh_error_feeds_message")});let u=0,c=0;for(const d of o)await aM(d,!1)?u++:c++,await eW(500);et.success({id:l,content:r.t("feed_table.bulk_refresh_error_feeds_result",{success:u,failure:c})})},a=()=>e(!1);return E.jsxs(E.Fragment,{children:[E.jsx(Mr,{mini:!0,content:r.t("feed_table.refresh_feeds_tooltip"),children:E.jsx(ht,{icon:E.jsx(bl,{}),shape:"circle",size:"small",onClick:()=>e(!0)})}),E.jsx(za,{className:"edit-modal",title:r.t("feed_table.refresh_feeds_title"),visible:t,footer:[E.jsx(ht,{onClick:a,children:r.t("feed_table.refresh_feeds_cancel")},"cancel"),E.jsx(ht,{type:"outline",onClick:s,children:r.t("feed_table.refresh_feeds_error")},"error"),E.jsx(ht,{type:"primary",onClick:i,children:r.t("feed_table.refresh_feeds_all")},"all")],onCancel:a,children:E.jsx("p",{children:r.t("feed_table.refresh_feeds_description")})})]})},sW=({visible:t,setVisible:e})=>{const{polyglot:r}=oe(St),n=oe(BT),[i,s]=R.useState(""),a=async()=>{try{const o=await Promise.all(n.map(async u=>{const c=new URL(u.feed_url).hostname;if(c===i)return u;const d=u.feed_url.replace(c,i),h=await MO(u.id,{feedUrl:d});return{...u,...h}})),l=(u,c)=>c.find(h=>h.id===u.id)||u;fl(u=>u.map(c=>l(c,o))),et.success(r.t("feed_table.bulk_update_success")),e(!1)}catch(o){console.error("Failed to bulk update feeds: ",o),et.error(r.t("feed_table.bulk_update_error"))}};return E.jsx(za,{className:"edit-modal",title:r.t("feed_table.modal_bulk_update_title"),visible:t,onOk:a,onCancel:()=>{e(!1),s("")},children:E.jsx(Wn,{placeholder:"rsshub.app",value:i,prefix:E.jsx(Uh,{content:r.t("feed_table.modal_bulk_update_description"),children:E.jsx(H_,{})}),onChange:o=>s(o)})})},aW=({visible:t,setVisible:e,feedForm:r,selectedFeed:n})=>{const{polyglot:i}=oe(St),s=oe(yc),a=async(o,l)=>{try{const u=await MO(o,l);fl(c=>c.map(d=>d.id===o?{...d,...u}:d)),et.success(i.t("feed_table.update_feed_success")),e(!1),r.resetFields()}catch(u){console.error("Failed to update feed: ",u),et.error(i.t("feed_table.update_feed_error"))}};return E.jsx(za,{unmountOnExit:!0,className:"edit-modal",title:i.t("feed_table.modal_edit_feed_title"),visible:t,onOk:r.submit,onCancel:()=>{e(!1),r.resetFields()},children:E.jsxs(dr,{form:r,labelCol:{span:7},layout:"vertical",wrapperCol:{span:17},onSubmit:async o=>{const l={categoryId:o.category,title:o.title,siteUrl:o.siteUrl.trim(),feedUrl:o.feedUrl.trim(),hidden:o.hidden,disabled:o.disabled,isFullText:o.crawler};l.feedUrl?await a(n.key,l):et.error(i.t("feed_table.modal_edit_feed_submit_error"))},children:[E.jsx(dr.Item,{required:!0,field:"category",label:i.t("feed_table.modal_edit_feed_category_label"),rules:[{required:!0}],children:E.jsx(cr,{children:s.map(o=>E.jsx(cr.Option,{value:o.id,children:o.title},o.id))})}),E.jsx(dr.Item,{field:"title",label:i.t("feed_table.modal_edit_feed_title_label"),rules:[{required:!0}],children:E.jsx(Wn,{placeholder:i.t("feed_table.modal_edit_feed_title_placeholder")})}),E.jsx(dr.Item,{field:"siteUrl",label:i.t("feed_table.modal_edit_feed_site_url_label"),rules:[{required:!0}],children:E.jsx(Wn,{placeholder:i.t("feed_table.modal_edit_feed_site_url_placeholder")})}),E.jsx(dr.Item,{field:"feedUrl",label:i.t("feed_table.modal_edit_feed_feed_url_label"),rules:[{required:!0}],children:E.jsx(Wn,{placeholder:i.t("feed_table.modal_edit_feed_feed_url_placeholder")})}),E.jsx(dr.Item,{field:"hidden",initialValue:n.hidden,label:i.t("feed_table.modal_edit_feed_hidden_label"),rules:[{type:"boolean"}],triggerPropName:"checked",children:E.jsx(vs,{})}),E.jsx(dr.Item,{field:"disabled",initialValue:n.disabled,label:i.t("feed_table.modal_edit_feed_disabled_label"),rules:[{type:"boolean"}],triggerPropName:"checked",children:E.jsx(vs,{})}),E.jsx(dr.Item,{field:"crawler",label:i.t("feed_table.modal_edit_feed_crawler_label"),rules:[{type:"boolean"}],tooltip:E.jsx("div",{children:i.t("feed_table.modal_edit_feed_crawler_tooltip")}),triggerPropName:"checked",children:E.jsx(vs,{})})]})})},oW=()=>{const{isAppDataReady:t}=oe(_r),{showDetailedRelativeTime:e}=oe(Lt),r=oe(UT),n=oe(nW),{polyglot:i}=oe(St),s=i.t("search.tooltip").split(`
`),[a,o]=R.useState(!1),[l,u]=R.useState(!1),[c,d]=R.useState(!1),[h]=dr.useForm(),[f,p]=R.useState(null),{isBelowMedium:m}=$i(),g=Fi();R.useEffect(()=>{V2("")},[]);const v=T=>{p(T),d(!0),h.setFieldsValue({category:T.category.id,title:T.title,siteUrl:T.site_url,feedUrl:T.feed_url,hidden:T.hidden,disabled:T.disabled,crawler:T.crawler})},b=async T=>{try{(await qj(T.key)).status===204?(fl(_=>_.filter(S=>S.id!==T.key)),et.success(i.t("feed_table.remove_feed_success",{title:T.title}))):et.error(i.t("feed_table.remove_feed_error",{title:T.title}))}catch(x){console.error(`Failed to unfollow feed: ${T.title}`,x),et.error(i.t("feed_table.remove_feed_error",{title:T.title}))}},y=[{title:i.t("feed_table.table_title"),dataIndex:"title",sorter:(T,x)=>T.title.localeCompare(x.title,"en"),render:(T,x)=>{const _=x.parsing_error_count;let S=x.disabled?`🚫 ${T}`:T;_>0&&(S=`⚠️ ${T}`);const A=E.jsxs("div",{children:[T,_>0&&E.jsxs(E.Fragment,{children:[E.jsx("br",{}),"⚠️ Parsing error count: ",_]})]});return E.jsx(hr.Ellipsis,{expandable:!1,children:E.jsx(Mr,{mini:!0,content:A,children:E.jsx(rM,{text:S,url:`/feed/${x.key}`})})})}},!m&&{title:i.t("feed_table.table_url"),dataIndex:"feed_url",sorter:(T,x)=>T.feed_url.localeCompare(x.feed_url,"en"),render:T=>E.jsx(hr.Ellipsis,{expandable:!1,showTooltip:!0,children:T})},{title:i.t("feed_table.table_category"),dataIndex:"category.title",sorter:(T,x)=>T.category.title.localeCompare(x.category.title,"en"),render:(T,x)=>E.jsx(hr.Ellipsis,{expandable:!1,showTooltip:!m,children:E.jsx(qa,{size:"small",style:{cursor:"pointer"},onClick:()=>g(`/category/${x.category.id}`),children:T})})},!m&&{title:i.t("feed_table.table_checked_at"),dataIndex:"checked_at",sorter:(T,x)=>T.checked_at.localeCompare(x.checked_at,"en"),render:T=>E.jsx(hr.Ellipsis,{expandable:!1,children:SO(T,e)})},{title:i.t("feed_table.table_actions"),dataIndex:"op",fixed:"right",width:100,render:(T,x)=>E.jsxs(fD,{style:{marginLeft:-10},children:[E.jsx(Mr,{mini:!0,content:i.t("feed_table.table_feed_edit_tooltip"),children:E.jsx(ht,{icon:E.jsx(ww,{}),shape:"circle",size:"mini",onClick:()=>v(x)})}),E.jsx(Mr,{mini:!0,content:i.t("feed_table.table_feed_refresh_tooltip"),children:E.jsx(ht,{icon:E.jsx(bl,{}),shape:"circle",size:"mini",onClick:()=>aM(x)})}),E.jsx(pD,{focusLock:!0,position:"left",title:i.t("feed_table.table_feed_remove_confirm"),onOk:()=>b(x),children:E.jsx(Mr,{mini:!0,content:i.t("feed_table.table_feed_remove_tooltip"),children:E.jsx(ht,{icon:E.jsx(XF,{}),shape:"circle",size:"mini"})})})]})}].filter(Boolean);return E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"feed-table-action-bar",children:[E.jsx("div",{style:{display:"flex",flex:1,justifyContent:"left",minWidth:0},children:E.jsx(Wn.Search,{allowClear:!0,className:"search-input",placeholder:i.t("search.placeholder"),addBefore:E.jsxs(cr,{style:{width:80},value:r,triggerProps:{autoAlignPopupWidth:!1,autoAlignPopupMinWidth:!0,position:"bl"},onChange:rW,children:[E.jsx(cr.Option,{value:"title",children:i.t("search.type_title")}),E.jsx(cr.Option,{value:"feed_url",children:i.t("search.type_feed_url")}),E.jsx(cr.Option,{value:"site_url",children:i.t("search.type_site_url")})]}),prefix:E.jsx(Uh,{mini:!0,position:"bottom",content:E.jsx("div",{children:s.map((T,x)=>E.jsxs(R.Fragment,{children:[T,x<s.length-1&&E.jsx("br",{})]},`line-${x}-${T.length}`))}),children:E.jsx(H_,{})}),onChange:V2})}),E.jsxs("div",{className:"button-group",children:[E.jsx(Mr,{mini:!0,content:i.t("feed_table.table_feed_bulk_update_tooltip"),children:E.jsx(ht,{icon:E.jsx(ww,{}),shape:"circle",size:"small",onClick:()=>o(!0)})}),E.jsx(sW,{setVisible:o,visible:a}),E.jsx(iW,{setVisible:u,visible:l})]})]}),E.jsx(mD,{borderCell:!0,className:"feed-table",columns:y,data:n,loading:!t,pagePosition:"bottomCenter",pagination:{pageSize:15},scroll:{x:!0},size:"small"}),f&&E.jsx(aW,{feedForm:h,selectedFeed:f,setVisible:d,visible:c})]})},lW=[{label:"English",value:"en-US"},{label:"Español",value:"es-ES"},{label:"Français",value:"fr-FR"},{label:"简体中文",value:"zh-CN"}],uW=()=>{const{homePage:t,language:e,markReadOnScroll:r,orderBy:n,pageSize:i,removeDuplicates:s}=oe(Lt),{polyglot:a}=oe(St),o=[{label:a.t("settings.default_home_page_option_all"),value:"all"},{label:a.t("settings.default_home_page_option_today"),value:"today"},{label:a.t("settings.default_home_page_option_starred"),value:"starred"},{label:a.t("settings.default_home_page_option_history"),value:"history"}],l=[{label:a.t("settings.remove_duplicates_option_none"),value:"none"},{label:a.t("settings.remove_duplicates_option_hash"),value:"hash"},{label:a.t("settings.remove_duplicates_option_title"),value:"title"},{label:a.t("settings.remove_duplicates_option_url"),value:"url"}];return E.jsxs(E.Fragment,{children:[E.jsx(os,{description:a.t("appearance.language_description"),title:a.t("appearance.language_label"),children:E.jsx(cr,{className:"input-select",value:e,onChange:u=>Zr({language:u}),children:lW.map(({label:u,value:c})=>E.jsx(cr.Option,{value:c,children:u},c))})}),E.jsx(Rn,{}),E.jsx(os,{description:a.t("settings.default_home_page_description"),title:a.t("settings.default_home_page_label"),children:E.jsx(cr,{className:"input-select",value:t,onChange:u=>Zr({homePage:u}),children:o.map(({label:u,value:c})=>E.jsx(cr.Option,{value:c,children:u},c))})}),E.jsx(Rn,{}),E.jsx(os,{description:a.t("settings.entries_order_description"),title:a.t("settings.entries_order_label"),children:E.jsxs(cr,{className:"input-select",value:n,onChange:u=>Zr({orderBy:u}),children:[E.jsx(cr.Option,{value:"published_at",children:a.t("settings.entries_order_option_published_at")}),E.jsx(cr.Option,{value:"created_at",children:a.t("settings.entries_order_option_created_at")})]})}),E.jsx(Rn,{}),E.jsx(os,{description:a.t("settings.entries_per_page_description"),title:a.t("settings.entries_per_page_label"),children:E.jsx(Ey,{className:"input-select",defaultValue:i,min:1,mode:"button",size:"small",onChange:u=>Zr({pageSize:u})})}),E.jsx(Rn,{}),E.jsx(os,{description:a.t("settings.remove_duplicates_description"),title:a.t("settings.remove_duplicates_label"),children:E.jsx(cr,{className:"input-select",value:s,onChange:u=>Zr({removeDuplicates:u}),children:l.map(({label:u,value:c})=>E.jsx(cr.Option,{value:c,children:u},c))})}),E.jsx(Rn,{}),E.jsx(os,{description:a.t("settings.mark_read_on_scroll_description"),title:a.t("settings.mark_read_on_scroll_label"),children:E.jsx(vs,{checked:r,onChange:u=>Zr({markReadOnScroll:u})})})]})},F0={exitDetailView:["esc"],fetchOriginalArticle:["d"],navigateToNextArticle:["n","j","right"],navigateToNextUnreadArticle:["shift+n","shift+j","ctrl+right"],navigateToPreviousArticle:["p","k","left"],navigateToPreviousUnreadArticle:["shift+p","shift+k","ctrl+left"],openLinkExternally:["v"],openPhotoSlider:["i"],saveToThirdPartyServices:["s"],showHotkeysSettings:["shift+?"],toggleReadStatus:["m"],toggleStarStatus:["f"]},Hg=Q_("hotkeys",F0,{encode:t=>{const e=Object.keys(t).reduce((r,n)=>(n in F0&&(r[n]=t[n]),r),{});return JSON.stringify(e)},decode:t=>{const e=JSON.parse(t);return{...F0,...e}}}),jT=Cn(Hg,t=>{const r=Object.values(t).flat().reduce((n,i)=>(n[i]=(n[i]||0)+1,n),{});return Object.entries(r).filter(([n,i])=>i>1).map(([n])=>n)}),sd=(t,e)=>{Dt(Hg,t)(e)},cW=t=>sd(t,F0[t]),dW=({value:t,onChange:e,onRemove:r,editOnMount:n=!1})=>{const i=oe(jT),[s,a]=R.useState(n),o=()=>{t===""&&r(),a(!1)},l=R.useCallback(u=>{if(s){u.preventDefault();const{key:c,ctrlKey:d,shiftKey:h,altKey:f,metaKey:p}=u;if(["Control","Shift","Alt","Meta","CapsLock"].includes(c))return;let m=c;switch(c){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":m=c.replace("Arrow","").toLowerCase();break;case" ":m="space";break}const g=[];d&&g.push("ctrl"),h&&g.push("shift"),f&&g.push("alt"),p&&g.push("meta");const v=g.length>0?`${g.join("+")}+${m}`:m;e(v),a(!1)}},[s,e]);return R.useEffect(()=>(window.addEventListener("keydown",l),()=>{window.removeEventListener("keydown",l)}),[l]),s?E.jsx(Wn,{autoFocus:!0,size:"mini",status:i.includes(t)?"error":void 0,style:{width:80},value:t,onBlur:o,onChange:e,onPressEnter:o}):E.jsx(qa,{closable:!!r,style:{backgroundColor:i.includes(t)?"var(--color-danger-light-4)":"var(--color-fill-2)",color:i.includes(t)?"white":"var(--color-text-1)"},onClick:()=>a(!0),onClose:u=>{u.stopPropagation(),r()},children:t})},W2=t=>t.charAt(0).toUpperCase()+t.slice(1),hW=t=>t.map(e=>{const r=e.replace("left","←").replace("right","→").replace("up","↑").replace("down","↓");return r.includes("+")?r.split("+").map(W2).join(" + "):W2(r)}).join(" / "),fW=({keys:t,record:e})=>{const r=oe(jT),[n,i]=R.useState(!1),s=R.useRef(null);return R.useEffect(()=>{const a=o=>{s.current&&!s.current.contains(o.target)&&i(!1)};return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[]),R.useEffect(()=>{if(!n){const a=t.filter(o=>o!=="");a.length!==t.length&&sd(e.action,a)}},[n]),E.jsx("div",{ref:s,children:n?E.jsxs(fD,{wrap:!0,style:{marginBottom:-8},children:[t.map((a,o)=>E.jsx(dW,{editOnMount:a==="",value:a,onChange:l=>{const u=[...t];u[o]=l,sd(e.action,u)},onRemove:()=>{const l=t.filter((u,c)=>c!==o);sd(e.action,l)}},`${e.action}-${a}`)),E.jsx(qa,{icon:E.jsx(j_,{}),style:{backgroundColor:"var(--color-bg-1)",border:"1px dashed var(--color-border-2)",cursor:"pointer",width:"32px"},onClick:()=>{const a=[...t,""];sd(e.action,a)}}),E.jsx(ht,{icon:E.jsx(bl,{}),shape:"circle",size:"mini",onClick:()=>cW(e.action)})]}):E.jsx(qa,{style:{cursor:"pointer",backgroundColor:t.some(a=>r.includes(a))?"var(--color-danger-light-4)":"var(--color-fill-2)",color:t.some(a=>r.includes(a))?"white":"var(--color-text-1)"},onClick:()=>i(!0),children:hW(t)})})},pW=()=>{const{polyglot:t}=oe(St),e=oe(Hg),r=["navigateToPreviousArticle","navigateToPreviousUnreadArticle","navigateToNextArticle","navigateToNextUnreadArticle","openLinkExternally","toggleReadStatus","fetchOriginalArticle","toggleStarStatus","saveToThirdPartyServices","openPhotoSlider","exitDetailView","showHotkeysSettings"],n=[{title:t.t("hotkeys.key"),dataIndex:"keys",fixed:"left",width:"50%",render:(s,a)=>E.jsx(fW,{keys:s,record:a})},{title:t.t("hotkeys.function"),dataIndex:"description"}],i=r.map(s=>({action:s,key:s,keys:e[s],description:t.t(`hotkeys.${s}`)}));return E.jsx(mD,{borderCell:!0,columns:n,data:i,pagination:!1,size:"small",style:{margin:"0 auto",width:"90%"}})},Pc=({icon:t,title:e})=>E.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[t,E.jsx("div",{style:{fontSize:"12px"},children:e})]}),mW=({activeTab:t,onTabChange:e})=>{const{polyglot:r}=oe(St),{isBelowMedium:n}=$i();return E.jsx(_c,{style:{maxHeight:"80vh",overflow:"auto",marginRight:"-20px",paddingRight:"20px"},children:E.jsxs(wl,{animation:!0,activeTab:t,className:"custom-tabs",tabPosition:"top",onChange:e,children:[E.jsx(wl.TabPane,{title:E.jsx(Pc,{icon:E.jsx(ZF,{style:{fontSize:"20px"}}),title:r.t("settings.feeds")}),children:E.jsx(oW,{})},"1"),E.jsx(wl.TabPane,{title:E.jsx(Pc,{icon:E.jsx(LT,{style:{fontSize:"20px"}}),title:r.t("settings.categories")}),children:E.jsx(JV,{})},"2"),E.jsx(wl.TabPane,{title:E.jsx(Pc,{icon:E.jsx(MT,{style:{fontSize:"20px"}}),title:r.t("settings.general")}),children:E.jsx(uW,{})},"3"),E.jsx(wl.TabPane,{title:E.jsx(Pc,{icon:E.jsx(OT,{style:{fontSize:"20px"}}),title:r.t("settings.appearance")}),children:E.jsx(QV,{})},"4"),!n&&E.jsx(wl.TabPane,{title:E.jsx(Pc,{icon:E.jsx(IT,{style:{fontSize:"20px"}}),title:r.t("settings.hotkeys")}),children:E.jsx(pW,{})},"5")]})})},Vg=()=>{const t=R.useRef(!1);return{fetchAppData:async()=>{if(!t.current){t.current=!0,sA(!1);try{const r=await Promise.all([Vj(),P0(0,"unread"),OO(),Hj(),wB(),eH()]),[n,i,s,a,o,l]=r,u=a.reduce((h,f)=>(h[f.id]=n.unreads[f.id]??0,h),{}),c=Object.values(n.reads).reduce((h,f)=>h+f,0),{version:d}=l;PB(d),CO(d,"2.2.2")>=0&&(await Jj()).has_integrations&&MB(!0),nT(u),iT(i.total??0),gm(s.total??0),mm(c),fl(a),k0(o),sA(!0)}catch(r){console.error("Error fetching app data: ",r)}finally{t.current=!1}}}}},Wg=bc({addFeedModalVisible:!1,settingsModalVisible:!1,settingsTabsActiveTab:"1"}),gW=Dt(Wg,"addFeedModalVisible"),vW=Dt(Wg,"settingsModalVisible"),bW=Dt(Wg,"settingsTabsActiveTab"),Xh=()=>{const{addFeedModalVisible:t,settingsModalVisible:e,settingsTabsActiveTab:r}=oe(Wg);return{addFeedModalVisible:t,setAddFeedModalVisible:gW,settingsModalVisible:e,setSettingsModalVisible:vW,settingsTabsActiveTab:r,setSettingsTabsActiveTab:bW}},yW=[{required:!0}],EW=[{required:!0}],_W=[{type:"boolean"}],TW=()=>{const{setSettingsModalVisible:t,setSettingsTabsActiveTab:e,settingsModalVisible:r,settingsTabsActiveTab:n}=Xh();return E.jsx(za,{autoFocus:!0,focusLock:!0,unmountOnExit:!0,alignCenter:!1,className:"settings-modal",footer:null,title:null,visible:r,onCancel:()=>{t(!1),e("1")},children:E.jsx(mW,{activeTab:n,onTabChange:e})})},xW=()=>{const{polyglot:t}=oe(St),e=oe(yc),r=oe(jh),[n,i]=R.useState(!1),[s]=dr.useForm(),{fetchAppData:a}=Vg(),{addFeedModalVisible:o,setAddFeedModalVisible:l}=Xh(),u=Fi(),c=async(d,h,f)=>{i(!0);const p="add-feed-loading";try{if(r.some(g=>g.feed_url===d)){et.error(t.t("main.add_feed_error_duplicate"));return}const m=await Kj(d,h,f);et.loading({id:p,content:t.t("main.add_feed_loading")}),a().then(()=>(et.success({id:p,content:t.t("main.add_feed_success")}),l(!1),u(`/feed/${m.feed_id}`),s.resetFields(),null)).catch(g=>{console.error("Failed to fetch app data: ",g),et.error({id:p,content:t.t("main.add_feed_error")})})}catch(m){console.error("Failed to add a feed: ",m),et.error({id:p,content:t.t("main.add_feed_error")})}finally{i(!1)}};return E.jsx(za,{unmountOnExit:!0,confirmLoading:n,style:{width:"400px",maxWidth:"95%"},title:t.t("main.add_feed_modal_title"),visible:o,onOk:s.submit,onCancel:()=>{l(!1),s.resetFields()},children:E.jsxs(dr,{form:s,labelCol:{span:7},layout:"vertical",wrapperCol:{span:17},onSubmit:async d=>{const h=d.url.trim();h?await c(h,d.category,d.crawler):et.error(t.t("main.add_feed_url_empty"))},children:[E.jsx(dr.Item,{field:"url",label:t.t("main.add_feed_modal_feed_url_label"),rules:yW,children:E.jsx(Wn,{placeholder:t.t("main.add_feed_modal_feed_url_placeholder")})}),E.jsx(dr.Item,{required:!0,field:"category",label:t.t("main.add_feed_modal_category_label"),rules:EW,children:E.jsx(cr,{showSearch:!0,placeholder:t.t("main.add_feed_modal_category_placeholder"),filterOption:(d,h)=>Dj(h.props.children,d),children:e.map(d=>E.jsx(cr.Option,{value:d.id,children:d.title},d.id))})}),E.jsx(dr.Item,{field:"crawler",initialValue:!1,label:t.t("main.add_feed_modal_crawler_label"),rules:_W,style:{marginBottom:0},triggerPropName:"checked",children:E.jsx(vs,{})})]})})},SW=()=>E.jsxs("div",{className:"main",children:[E.jsx(rH,{children:E.jsx(BD,{})}),E.jsx(TW,{}),E.jsx(xW,{})]});function kl(t,e,r){let n=r.initialDeps??[],i;return()=>{var s,a,o,l;let u;r.key&&((s=r.debug)!=null&&s.call(r))&&(u=Date.now());const c=t();if(!(c.length!==n.length||c.some((f,p)=>n[p]!==f)))return i;n=c;let h;if(r.key&&((a=r.debug)!=null&&a.call(r))&&(h=Date.now()),i=e(...c),r.key&&((o=r.debug)!=null&&o.call(r))){const f=Math.round((Date.now()-u)*100)/100,p=Math.round((Date.now()-h)*100)/100,m=p/16,g=(v,b)=>{for(v=String(v);v.length<b;)v=" "+v;return v};console.info(`%c⏱ ${g(p,5)} /${g(f,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*m,120))}deg 100% 31%);`,r==null?void 0:r.key)}return(l=r==null?void 0:r.onChange)==null||l.call(r,i),i}}function zv(t,e){if(t===void 0)throw new Error("Unexpected undefined");return t}const wW=(t,e)=>Math.abs(t-e)<1,AW=(t,e,r)=>{let n;return function(...i){t.clearTimeout(n),n=t.setTimeout(()=>e.apply(this,i),r)}},RW=t=>t,CW=t=>{const e=Math.max(t.startIndex-t.overscan,0),r=Math.min(t.endIndex+t.overscan,t.count-1),n=[];for(let i=e;i<=r;i++)n.push(i);return n},IW=(t,e)=>{const r=t.scrollElement;if(!r)return;const n=t.targetWindow;if(!n)return;const i=a=>{const{width:o,height:l}=a;e({width:Math.round(o),height:Math.round(l)})};if(i(r.getBoundingClientRect()),!n.ResizeObserver)return()=>{};const s=new n.ResizeObserver(a=>{const o=a[0];if(o!=null&&o.borderBoxSize){const l=o.borderBoxSize[0];if(l){i({width:l.inlineSize,height:l.blockSize});return}}i(r.getBoundingClientRect())});return s.observe(r,{box:"border-box"}),()=>{s.unobserve(r)}},G2={passive:!0},kW=typeof window>"u"?!0:"onscrollend"in window,LW=(t,e)=>{const r=t.scrollElement;if(!r)return;const n=t.targetWindow;if(!n)return;let i=0;const s=t.options.useScrollendEvent&&kW?()=>{}:AW(n,()=>{e(i,!1)},t.options.isScrollingResetDelay),a=u=>()=>{const{horizontal:c,isRtl:d}=t.options;i=c?r.scrollLeft*(d&&-1||1):r.scrollTop,s(),e(i,u)},o=a(!0),l=a(!1);return l(),r.addEventListener("scroll",o,G2),r.addEventListener("scrollend",l,G2),()=>{r.removeEventListener("scroll",o),r.removeEventListener("scrollend",l)}},DW=(t,e,r)=>{if(e!=null&&e.borderBoxSize){const n=e.borderBoxSize[0];if(n)return Math.round(n[r.options.horizontal?"inlineSize":"blockSize"])}return Math.round(t.getBoundingClientRect()[r.options.horizontal?"width":"height"])},OW=(t,{adjustments:e=0,behavior:r},n)=>{var i,s;const a=t+e;(s=(i=n.scrollElement)==null?void 0:i.scrollTo)==null||s.call(i,{[n.options.horizontal?"left":"top"]:a,behavior:r})};class MW{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let r=null;const n=()=>r||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:r=new this.targetWindow.ResizeObserver(i=>{i.forEach(s=>{this._measureElement(s.target,s)})}));return{disconnect:()=>{var i;(i=n())==null||i.disconnect(),r=null},observe:i=>{var s;return(s=n())==null?void 0:s.observe(i,{box:"border-box"})},unobserve:i=>{var s;return(s=n())==null?void 0:s.unobserve(i)}}})(),this.range=null,this.setOptions=r=>{Object.entries(r).forEach(([n,i])=>{typeof i>"u"&&delete r[n]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:RW,rangeExtractor:CW,onChange:()=>{},measureElement:DW,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!0,...r}},this.notify=r=>{var n,i;(i=(n=this.options).onChange)==null||i.call(n,this,r)},this.maybeNotify=kl(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),r=>{this.notify(r)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(r=>r()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var r;const n=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==n){if(this.cleanup(),!n){this.maybeNotify();return}this.scrollElement=n,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((r=this.scrollElement)==null?void 0:r.window)??null,this.elementsCache.forEach(i=>{this.observer.observe(i)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(i,s)=>{this.scrollAdjustments=0,this.scrollDirection=s?this.getScrollOffset()<i?"forward":"backward":null,this.scrollOffset=i,this.isScrolling=s,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(r,n)=>{const i=new Map,s=new Map;for(let a=n-1;a>=0;a--){const o=r[a];if(i.has(o.lane))continue;const l=s.get(o.lane);if(l==null||o.end>l.end?s.set(o.lane,o):o.end<l.end&&i.set(o.lane,!0),i.size===this.options.lanes)break}return s.size===this.options.lanes?Array.from(s.values()).sort((a,o)=>a.end===o.end?a.index-o.index:a.end-o.end)[0]:void 0},this.getMeasurementOptions=kl(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(r,n,i,s,a)=>(this.pendingMeasuredCacheIndexes=[],{count:r,paddingStart:n,scrollMargin:i,getItemKey:s,enabled:a}),{key:!1}),this.getMeasurements=kl(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:r,paddingStart:n,scrollMargin:i,getItemKey:s,enabled:a},o)=>{if(!a)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(c=>{this.itemSizeCache.set(c.key,c.size)}));const l=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const u=this.measurementsCache.slice(0,l);for(let c=l;c<r;c++){const d=s(c),h=this.options.lanes===1?u[c-1]:this.getFurthestMeasurement(u,c),f=h?h.end+this.options.gap:n+i,p=o.get(d),m=typeof p=="number"?p:this.options.estimateSize(c),g=f+m,v=h?h.lane:c%this.options.lanes;u[c]={index:c,start:f,size:m,end:g,key:d,lane:v}}return this.measurementsCache=u,u},{key:!1,debug:()=>this.options.debug}),this.calculateRange=kl(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset()],(r,n,i)=>this.range=r.length>0&&n>0?PW({measurements:r,outerSize:n,scrollOffset:i}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=kl(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(r,n,i,s)=>n===null?[]:r({startIndex:n.startIndex,endIndex:n.endIndex,overscan:i,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=r=>{const n=this.options.indexAttribute,i=r.getAttribute(n);return i?parseInt(i,10):(console.warn(`Missing attribute name '${n}={index}' on measured element.`),-1)},this._measureElement=(r,n)=>{const i=this.indexFromElement(r),s=this.measurementsCache[i];if(!s)return;const a=s.key,o=this.elementsCache.get(a);o!==r&&(o&&this.observer.unobserve(o),this.observer.observe(r),this.elementsCache.set(a,r)),r.isConnected&&this.resizeItem(i,this.options.measureElement(r,n,this))},this.resizeItem=(r,n)=>{const i=this.measurementsCache[r];if(!i)return;const s=this.itemSizeCache.get(i.key)??i.size,a=n-s;a!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(i,a,this):i.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=a,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(i.index),this.itemSizeCache=new Map(this.itemSizeCache.set(i.key,n)),this.notify(!1))},this.measureElement=r=>{if(!r){this.elementsCache.forEach((n,i)=>{n.isConnected||(this.observer.unobserve(n),this.elementsCache.delete(i))});return}this._measureElement(r,void 0)},this.getVirtualItems=kl(()=>[this.getIndexes(),this.getMeasurements()],(r,n)=>{const i=[];for(let s=0,a=r.length;s<a;s++){const o=r[s],l=n[o];i.push(l)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=r=>{const n=this.getMeasurements();if(n.length!==0)return zv(n[oM(0,n.length-1,i=>zv(n[i]).start,r)])},this.getOffsetForAlignment=(r,n)=>{const i=this.getSize(),s=this.getScrollOffset();n==="auto"&&(r<=s?n="start":r>=s+i?n="end":n="start"),n==="start"?r=r:n==="end"?r=r-i:n==="center"&&(r=r-i/2);const a=this.options.horizontal?"scrollWidth":"scrollHeight",l=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[a]:this.scrollElement[a]:0)-i;return Math.max(Math.min(l,r),0)},this.getOffsetForIndex=(r,n="auto")=>{r=Math.max(0,Math.min(r,this.options.count-1));const i=this.measurementsCache[r];if(!i)return;const s=this.getSize(),a=this.getScrollOffset();if(n==="auto")if(i.end>=a+s-this.options.scrollPaddingEnd)n="end";else if(i.start<=a+this.options.scrollPaddingStart)n="start";else return[a,n];const o=n==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,n),n]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(r,{align:n="start",behavior:i}={})=>{this.cancelScrollToIndex(),i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(r,n),{adjustments:void 0,behavior:i})},this.scrollToIndex=(r,{align:n="auto",behavior:i}={})=>{r=Math.max(0,Math.min(r,this.options.count-1)),this.cancelScrollToIndex(),i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const s=this.getOffsetForIndex(r,n);if(!s)return;const[a,o]=s;this._scrollToOffset(a,{adjustments:void 0,behavior:i}),i!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(r))){const[u]=zv(this.getOffsetForIndex(r,o));wW(u,this.getScrollOffset())||this.scrollToIndex(r,{align:o,behavior:i})}else this.scrollToIndex(r,{align:o,behavior:i})}))},this.scrollBy=(r,{behavior:n}={})=>{this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+r,{adjustments:void 0,behavior:n})},this.getTotalSize=()=>{var r;const n=this.getMeasurements();let i;return n.length===0?i=this.options.paddingStart:i=this.options.lanes===1?((r=n[n.length-1])==null?void 0:r.end)??0:Math.max(...n.slice(-this.options.lanes).map(s=>s.end)),Math.max(i-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(r,{adjustments:n,behavior:i})=>{this.options.scrollToFn(r,{behavior:i,adjustments:n},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(e)}}const oM=(t,e,r,n)=>{for(;t<=e;){const i=(t+e)/2|0,s=r(i);if(s<n)t=i+1;else if(s>n)e=i-1;else return i}return t>0?t-1:0};function PW({measurements:t,outerSize:e,scrollOffset:r}){const n=t.length-1,s=oM(0,n,o=>t[o].start,r);let a=s;for(;a<n&&t[a].end<r+e;)a++;return{startIndex:s,endIndex:a}}const NW=typeof document<"u"?R.useLayoutEffect:R.useEffect;function FW(t){const e=R.useReducer(()=>({}),{})[1],r={...t,onChange:(i,s)=>{var a;s?B_.flushSync(e):e(),(a=t.onChange)==null||a.call(t,i,s)}},[n]=R.useState(()=>new MW(r));return n.setOptions(r),R.useEffect(()=>n._didMount(),[]),NW(()=>n._willUpdate()),n}function lM(t){return FW({observeElementRect:IW,observeElementOffset:LW,scrollToFn:OW,...t})}var uM={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function r(){for(var s="",a=0;a<arguments.length;a++){var o=arguments[a];o&&(s=i(s,n(o)))}return s}function n(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return r.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var a="";for(var o in s)e.call(s,o)&&s[o]&&(a=i(a,o));return a}function i(s,a){return a?s?s+" "+a:s+a:s}t.exports?(r.default=r,t.exports=r):window.classNames=r})()})(uM);var $W=uM.exports;const HT=ct($W);function UW(){const{setAddFeedModalVisible:t}=Xh(),{polyglot:e}=oe(St);return E.jsx(Mr,{mini:!0,content:e.t("sidebar.add_feed"),children:E.jsx(ht,{icon:E.jsx(j_,{}),shape:"circle",size:"small",style:{marginTop:"1em",marginBottom:"0.5em"},onClick:()=>t(!0)})})}const Hy=bc(),BW=()=>Hy.set({}),bf=new Set,jW=t=>{const e=oe(Hy);return R.useEffect(()=>{e[t]||bf.has(t)||(bf.add(t),Qj(t).then(r=>{const n=`data:${r.data}`;return Hy.setKey(t,n),bf.delete(t),null}).catch(()=>{bf.delete(t)}))},[t,e]),e[t]};function HW(){const t=Fi(),{server:e}=oe(Bh),{polyglot:r}=oe(St),{themeMode:n}=oe(Lt),[i,s]=R.useState(!1),[a,o]=R.useState(!1),{setSettingsModalVisible:l}=Xh(),u=()=>{LB(),s(!1)},c=()=>{bB(),Nj(),NB(),BW(),t("/login"),Or.success({title:r.t("sidebar.logout_success")})};return E.jsxs("div",{className:"user-profile-container",children:[E.jsx("div",{children:E.jsx(V_,{position:"br",trigger:"click",droplist:E.jsxs(un,{children:[E.jsxs(Pa.Group,{name:"theme",size:"small",type:"button",value:n,style:{display:"flex",justifyContent:"center",padding:"8px"},onChange:d=>Zr({themeMode:d}),children:[E.jsx(Pa,{value:"system",children:E.jsx(kT,{})}),E.jsx(Pa,{value:"light",children:E.jsx(RT,{})}),E.jsx(Pa,{value:"dark",children:E.jsx(AT,{})})]}),E.jsx(Rn,{style:{margin:"4px 0"}}),E.jsxs(un.Item,{onClick:()=>l(!0),children:[E.jsx(ET,{className:"icon-right"}),r.t("sidebar.settings")]},"0"),E.jsxs(un.Item,{onClick:()=>window.open(`${e}/settings`,"_blank"),children:[E.jsx(gD,{className:"icon-right"}),r.t("sidebar.miniflux_settings")]},"1"),E.jsxs(un.Item,{onClick:()=>window.open(`https://github.com/${cT}/issues/new`,"_blank"),children:[E.jsx(fT,{className:"icon-right"}),r.t("sidebar.report_issue")]},"2"),E.jsx(Rn,{style:{margin:"4px 0"}}),E.jsxs(un.Item,{onClick:()=>s(!0),children:[E.jsx(bl,{className:"icon-right"}),r.t("sidebar.reset_settings")]},"3"),E.jsxs(un.Item,{onClick:()=>o(!0),children:[E.jsx(bT,{className:"icon-right"}),r.t("sidebar.logout")]},"4")]}),children:E.jsx(ht,{icon:E.jsx(jg,{}),shape:"circle",size:"small",style:{marginRight:8}})})}),E.jsx(za,{closable:!0,simple:!0,okButtonProps:{status:"danger"},style:{maxWidth:"95%"},visible:i,title:E.jsxs("div",{children:[E.jsx(Aw,{}),E.jsx("span",{children:r.t("sidebar.settings_reset_confirm")})]}),onCancel:()=>s(!1),onOk:u,children:E.jsx("p",{children:r.t("sidebar.settings_reset_description")})}),E.jsx(za,{closable:!0,simple:!0,okButtonProps:{status:"danger"},style:{maxWidth:"95%"},visible:a,title:E.jsxs("div",{children:[E.jsx(Aw,{}),E.jsx("span",{children:r.t("sidebar.logout_confirm")})]}),onCancel:()=>o(!1),onOk:c,children:E.jsx("p",{children:r.t("sidebar.logout_description")})})]})}const VW=t=>{const e=/^(?:http|https):\/\/((?!(\d+\.){3}\d+)([^/?#]+))/,r=t.match(e);return r?r[1]:null},K2=t=>{const e=VW(t);if(e){const r=e.split(".");if(r.length>=2)return r.slice(-2).join(".")}return null},WW=t=>`https://icons.duckduckgo.com/ip3/${K2(t.site_url)??K2(t.feed_url)}.ico`,cM=({feed:t,className:e="feed-icon"})=>{const{icon_id:r}=t.icon,n=WW(t),[i,s]=R.useState(n),a=R.useRef(null),o=jW(r);R.useEffect(()=>{o&&s(o)},[o]);const l=()=>{if(a.current){const{naturalWidth:u,naturalHeight:c}=a.current;u!==c&&s(n)}};return r===0?E.jsx("img",{alt:"",className:e,src:n,style:{borderRadius:"20%"}}):E.jsx("img",{ref:a,alt:"",className:e,src:i,style:{borderRadius:"20%",backgroundColor:"rgba(255, 255, 255, 0.1)"},onError:()=>s(n),onLoad:l})},_u=un.Item,GW=({category:t,path:e})=>{var o;const n=(o=oe(rT)[t.id])==null?void 0:o.reduce((l,u)=>l+u.unreadCount,0),{isBelowMedium:i}=$i(),s=Fi(),a=()=>{s(`/category/${t.id}`),Mi(null)};return E.jsxs("div",{role:"button",style:{cursor:"pointer"},tabIndex:0,className:HT("category-title",{"submenu-active":e===`/category/${t.id}`,"submenu-inactive":e!==`/category/${t.id}`}),onClick:a,onKeyDown:l=>{(l.key==="Enter"||l.key===" ")&&a()},children:[E.jsx(hr.Ellipsis,{expandable:!1,showTooltip:!i,style:{width:n?"80%":"100%",fontWeight:500},children:t.title}),n>0&&E.jsx(hr.Ellipsis,{className:"unread-count",expandable:!1,style:{fontWeight:500},children:n})]})},KW=({count:t})=>E.jsx(hr.Ellipsis,{className:"item-count",expandable:!1,children:t||""}),yf=({path:t,Icon:e,label:r,count:n})=>{const i=ai(),s=Fi(),a=i.pathname===t,o=()=>{s(t),Mi(null)};return E.jsx(_u,{className:HT("arco-menu-item",{"arco-menu-selected":a}),onClick:o,children:E.jsxs("div",{className:"custom-menu-item",children:[E.jsxs("span",{children:[E.jsx(e,{}),r]}),E.jsx(KW,{count:n})]})},t)},qW=()=>{const{infoFrom:t}=oe(Ct),{historyCount:e,starredCount:r,unreadTodayCount:n}=oe(_r),{polyglot:i}=oe(St),s=oe(OB);return E.jsxs(E.Fragment,{children:[E.jsx(yf,{Icon:wT,count:s,label:i.t("sidebar.all"),path:"/all"}),E.jsx(yf,{Icon:bD,count:n,label:i.t("sidebar.today"),path:"/today"}),E.jsx(yf,{Icon:Ug,count:t==="starred"?r:0,label:i.t("sidebar.starred"),path:"/starred"}),E.jsx(yf,{Icon:gT,count:t==="history"?e:0,label:i.t("sidebar.history"),path:"/history"})]})},zW=({feed:t})=>{const{showFeedIcon:e}=oe(Lt),{isBelowMedium:r}=$i(),n=Fi(),s=ai().pathname===`/feed/${t.id}`;return E.jsx(_u,{className:HT({"arco-menu-selected":s}),style:{position:"relative",overflow:"hidden"},onClick:a=>{a.stopPropagation(),n(`/feed/${t.id}`),Mi(null)},children:E.jsxs("div",{className:"custom-menu-item",children:[E.jsxs(hr.Ellipsis,{expandable:!1,showTooltip:!r,style:{width:t.unreadCount?"80%":"100%",paddingLeft:"20px",boxSizing:"border-box"},children:[e&&E.jsx(cM,{className:"feed-icon-sidebar",feed:t}),t.title]}),t.unreadCount!==0&&E.jsx(hr.Ellipsis,{className:"item-count",expandable:!1,children:t.unreadCount})]})},`/feed/${t.id}`)},YW=({categoryId:t})=>{const{showUnreadFeedsOnly:e}=oe(Lt),r=oe(rT),n=R.useRef(null),i=R.useRef(null),s=R.useMemo(()=>{var l;return((l=r[t])==null?void 0:l.filter(u=>!e||u.unreadCount>0))||[]},[r,t,e]),a=lM({count:s.length,getScrollElement:()=>i.current,estimateSize:()=>40,overscan:10}),o=a.getVirtualItems();return R.useEffect(()=>{const l=setTimeout(()=>{i.current&&a.measure()},100);return()=>clearTimeout(l)},[a]),E.jsx(_c,{ref:n,style:{maxHeight:400},scrollableNodeProps:{ref:i,style:{minHeight:"40px"}},children:E.jsx("div",{style:{height:a.getTotalSize(),width:"100%",position:"relative"},children:o.map(l=>{const u=s[l.index];return E.jsx("div",{ref:a.measureElement,"data-index":l.index,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${l.start}px)`},children:E.jsx(zW,{feed:u})},l.key)})})})},XW=()=>{const{showUnreadFeedsOnly:t}=oe(Lt),e=oe(rT),r=oe(DB),i=ai().pathname;return r.filter(s=>{var a;return(a=e[s.id])==null?void 0:a.some(o=>t?o.unreadCount>0:!0)}).map(s=>E.jsx(vD.Item,{expandIcon:E.jsx(yD,{}),header:E.jsx(GW,{category:s,path:i}),name:`/category/${s.id}`,style:{position:"relative",overflow:"hidden"},children:E.jsx(YW,{categoryId:s.id})},s.id))},ZW=()=>{const{showHiddenFeeds:t,showUnreadFeedsOnly:e}=oe(Lt),{polyglot:r}=oe(St),{fetchAppData:n}=Vg(),i=()=>{Zr({showHiddenFeeds:!t})},s=()=>{Zr({showUnreadFeedsOnly:!e})},a=c=>new Promise((d,h)=>{const f=new FileReader;f.onload=p=>d(p.target.result),f.onerror=h,f.readAsText(c)}),o=async c=>{const d=c.target.files[0];if(d)try{const h=await a(d);(await Xj(h)).status===201?(Or.success({title:r.t("sidebar.import_opml_success")}),await n()):Or.error({title:r.t("sidebar.import_opml_error")})}catch(h){Or.error({title:r.t("sidebar.import_opml_error"),content:h.message})}},l=(c,d,h)=>{const f=new Blob([c],{type:h}),p=window.URL.createObjectURL(f),m=document.createElement("a");m.href=p,m.download=d,document.body.appendChild(m),m.click(),document.body.removeChild(m),window.URL.revokeObjectURL(p)},u=async()=>{try{const c=await Yj();l(c,"feeds.opml","text/xml"),Or.success({title:r.t("sidebar.export_opml_success")})}catch(c){Or.error({title:r.t("sidebar.export_opml_error"),content:c.message})}};return E.jsxs(E.Fragment,{children:[E.jsx(V_,{position:"br",trigger:"click",droplist:E.jsxs(un,{children:[E.jsxs(_u,{onClick:i,children:[t?E.jsx(JF,{className:"icon-right"}):E.jsx(e9,{className:"icon-right"}),t?r.t("sidebar.hide_hidden_feeds"):r.t("sidebar.show_hidden_feeds")]},"1"),E.jsxs(_u,{onClick:s,children:[e?E.jsx(Fg,{className:"icon-right"}):E.jsx(Bg,{className:"icon-right"}),e?r.t("sidebar.show_read_feeds"):r.t("sidebar.hide_read_feeds")]},"2"),E.jsx(Rn,{style:{margin:"4px 0"}}),E.jsxs(_u,{onClick:()=>document.getElementById("opmlInput").click(),children:[E.jsx(t9,{className:"icon-right"}),r.t("sidebar.import_opml")]},"3"),E.jsxs(_u,{onClick:u,children:[E.jsx(mT,{className:"icon-right"}),r.t("sidebar.export_opml")]},"4")]}),children:E.jsx(ht,{icon:E.jsx($g,{}),shape:"circle",size:"small",style:{marginTop:"1em",marginBottom:"0.5em"}})}),E.jsx("input",{accept:".opml,.xml",id:"opmlInput",style:{display:"none"},type:"file",onChange:o})]})},dM=()=>{const{homePage:t}=oe(Lt),{isAppDataReady:e}=oe(_r),{polyglot:r}=oe(St),[n,i]=R.useState([`/${t}`]),a=ai().pathname;return R.useEffect(()=>{i([a])},[a]),E.jsx("div",{className:"sidebar-container",children:E.jsx(_c,{style:{maxHeight:"100%"},children:E.jsxs(un,{hasCollapseButton:!1,selectedKeys:n,children:[E.jsxs("div",{className:"menu-header",children:[E.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[E.jsx(QF,{className:"avatar",size:32,children:E.jsx(CT,{style:{color:"var(--color-bg-1)"}})}),E.jsx(hr.Title,{heading:6,style:{margin:0},children:"ReactFlux"})]}),E.jsx(HW,{})]}),E.jsx(hr.Title,{className:"section-title",heading:6,style:{paddingLeft:"12px"},children:r.t("sidebar.articles")}),E.jsx(_y,{animation:!0,loading:!e,text:{rows:3}}),e&&E.jsx(qW,{}),E.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[E.jsx(hr.Title,{className:"section-title",heading:6,style:{paddingLeft:"12px"},children:r.t("sidebar.feeds")}),E.jsxs("div",{style:{display:"flex",gap:"8px",marginRight:"8px"},children:[E.jsx(UW,{}),E.jsx(ZW,{})]})]}),E.jsx(_y,{animation:!0,loading:!e,text:{rows:6}}),e&&E.jsx(vD,{bordered:!1,triggerRegion:"icon",children:E.jsx(XW,{})})]})})})},hM=()=>{const{themeColor:t,themeMode:e}=oe(Lt),[r,n]=R.useState(window.matchMedia("(prefers-color-scheme: dark)").matches);R.useEffect(()=>{const i=window.matchMedia("(prefers-color-scheme: dark)"),s=a=>n(a.matches);return i.addEventListener("change",s),()=>i.removeEventListener("change",s)},[]),R.useEffect(()=>{const i=s=>{const a=s?"dark":"light";document.body.setAttribute("arco-theme",a),document.body.style.colorScheme=a};tM(t),i(e==="system"?r:e==="dark")},[r,e,t])},QW="a96c337",JW="2024-11-12 20:02:37 +0800",eG={gitHash:QW,gitDate:JW};function tG(){const[t,e]=R.useState(!1);return R.useEffect(()=>{(async()=>{try{const n=await Z_(`https://api.github.com/repos/${cT}/commits/main`),i=new Date(eG.gitDate),s=new Date(n.commit.committer.date);e(i<s)}catch(n){console.error("Check update failed",n)}})()},[]),{hasUpdate:t}}const VT=()=>{const t=document.querySelector(".spinner");t&&(t.style.display="none")},rG=()=>{EO(),hM();const{hasUpdate:t}=tG(),{isBelowLarge:e}=$i(),{polyglot:r}=oe(St);return R.useEffect(()=>{VT()},[]),R.useEffect(()=>{if(t){const n="new-version-available";Or.info({id:n,title:r.t("app.new_version_available"),content:r.t("app.new_version_available_description"),duration:0,btn:E.jsxs("span",{children:[E.jsx(ht,{size:"small",style:{marginRight:8},type:"secondary",onClick:()=>Or.remove(n),children:r.t("actions.dismiss")}),E.jsx(ht,{size:"small",type:"primary",onClick:()=>{window.open(`https://github.com/${cT}/commits/main`,"_blank"),Or.remove(n)},children:r.t("actions.check")})]})})}},[t,r]),r&&E.jsxs("div",{className:"app",children:[e?null:E.jsx(r9.Sider,{breakpoint:"lg",className:"sidebar",collapsible:!1,trigger:null,width:240,children:E.jsx(dM,{})}),E.jsx(SW,{})]})};function nG(t){if(typeof Proxy>"u")return t;const e=new Map,r=(...n)=>t(...n);return new Proxy(r,{get:(n,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}function Gg(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Vy=t=>Array.isArray(t);function fM(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function sh(t){return typeof t=="string"||Array.isArray(t)}function q2(t){const e=[{},{}];return t==null||t.values.forEach((r,n)=>{e[0][n]=r.get(),e[1][n]=r.getVelocity()}),e}function WT(t,e,r,n){if(typeof e=="function"){const[i,s]=q2(n);e=e(r!==void 0?r:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=q2(n);e=e(r!==void 0?r:t.custom,i,s)}return e}function Kg(t,e,r){const n=t.getProps();return WT(n,e,r!==void 0?r:n.custom,t)}const GT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],KT=["initial",...GT],Zh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],yl=new Set(Zh),qs=t=>t*1e3,zs=t=>t/1e3,iG={type:"spring",stiffness:500,damping:25,restSpeed:10},sG=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),aG={type:"keyframes",duration:.8},oG={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},lG=(t,{keyframes:e})=>e.length>2?aG:yl.has(t)?t.startsWith("scale")?sG(e[1]):iG:oG;function qT(t,e){return t?t[e]||t.default||t:void 0}const uG={skipAnimations:!1,useManualTiming:!1},cG=t=>t!==null;function qg(t,{repeat:e,repeatType:r="loop"},n){const i=t.filter(cG),s=e&&r!=="loop"&&e%2===1?0:i.length-1;return!s||n===void 0?i[s]:n}const Tn=t=>t;function dG(t){let e=new Set,r=new Set,n=!1,i=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function o(u){s.has(u)&&(l.schedule(u),t()),u(a)}const l={schedule:(u,c=!1,d=!1)=>{const f=d&&n?e:r;return c&&s.add(u),f.has(u)||f.add(u),u},cancel:u=>{r.delete(u),s.delete(u)},process:u=>{if(a=u,n){i=!0;return}n=!0,[e,r]=[r,e],r.clear(),e.forEach(o),n=!1,i&&(i=!1,l.process(u))}};return l}const Ef=["read","resolveKeyframes","update","preRender","render","postRender"],hG=40;function pM(t,e){let r=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>r=!0,a=Ef.reduce((v,b)=>(v[b]=dG(s),v),{}),{read:o,resolveKeyframes:l,update:u,preRender:c,render:d,postRender:h}=a,f=()=>{const v=performance.now();r=!1,i.delta=n?1e3/60:Math.max(Math.min(v-i.timestamp,hG),1),i.timestamp=v,i.isProcessing=!0,o.process(i),l.process(i),u.process(i),c.process(i),d.process(i),h.process(i),i.isProcessing=!1,r&&e&&(n=!1,t(f))},p=()=>{r=!0,n=!0,i.isProcessing||t(f)};return{schedule:Ef.reduce((v,b)=>{const y=a[b];return v[b]=(T,x=!1,_=!1)=>(r||p(),y.schedule(T,x,_)),v},{}),cancel:v=>{for(let b=0;b<Ef.length;b++)a[Ef[b]].cancel(v)},state:i,steps:a}}const{schedule:Ut,cancel:Ya,state:on,steps:Yv}=pM(typeof requestAnimationFrame<"u"?requestAnimationFrame:Tn,!0),mM=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,fG=1e-7,pG=12;function mG(t,e,r,n,i){let s,a,o=0;do a=e+(r-e)/2,s=mM(a,n,i)-t,s>0?r=a:e=a;while(Math.abs(s)>fG&&++o<pG);return a}function Qh(t,e,r,n){if(t===e&&r===n)return Tn;const i=s=>mG(s,0,1,t,r);return s=>s===0||s===1?s:mM(i(s),e,n)}const gM=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,vM=t=>e=>1-t(1-e),bM=Qh(.33,1.53,.69,.99),zT=vM(bM),yM=gM(zT),EM=t=>(t*=2)<1?.5*zT(t):.5*(2-Math.pow(2,-10*(t-1))),YT=t=>1-Math.sin(Math.acos(t)),_M=vM(YT),TM=gM(YT),xM=t=>/^0[^.\s]+$/u.test(t);function gG(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||xM(t):!0}let Wy=Tn;const SM=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),wM=t=>e=>typeof e=="string"&&e.startsWith(t),AM=wM("--"),vG=wM("var(--"),XT=t=>vG(t)?bG.test(t.split("/*")[0].trim()):!1,bG=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,yG=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function EG(t){const e=yG.exec(t);if(!e)return[,];const[,r,n,i]=e;return[`--${r??n}`,i]}function RM(t,e,r=1){const[n,i]=EG(t);if(!n)return;const s=window.getComputedStyle(e).getPropertyValue(n);if(s){const a=s.trim();return SM(a)?parseFloat(a):a}return XT(i)?RM(i,e,r+1):i}const Xa=(t,e,r)=>r>e?e:r<t?t:r,Tc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ah={...Tc,transform:t=>Xa(0,1,t)},_f={...Tc,default:1},Jh=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),pa=Jh("deg"),bs=Jh("%"),We=Jh("px"),_G=Jh("vh"),TG=Jh("vw"),z2={...bs,parse:t=>bs.parse(t)/100,transform:t=>bs.transform(t*100)},xG=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Y2=t=>t===Tc||t===We,X2=(t,e)=>parseFloat(t.split(", ")[e]),Z2=(t,e)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const i=n.match(/^matrix3d\((.+)\)$/u);if(i)return X2(i[1],e);{const s=n.match(/^matrix\((.+)\)$/u);return s?X2(s[1],t):0}},SG=new Set(["x","y","z"]),wG=Zh.filter(t=>!SG.has(t));function AG(t){const e=[];return wG.forEach(r=>{const n=t.getValue(r);n!==void 0&&(e.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),e}const Zu={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Z2(4,13),y:Z2(5,14)};Zu.translateX=Zu.x;Zu.translateY=Zu.y;const CM=t=>e=>e.test(t),RG={test:t=>t==="auto",parse:t=>t},IM=[Tc,We,bs,pa,TG,_G,RG],Q2=t=>IM.find(CM(t)),il=new Set;let Gy=!1,Ky=!1;function kM(){if(Ky){const t=Array.from(il).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),r=new Map;e.forEach(n=>{const i=AG(n);i.length&&(r.set(n,i),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const i=r.get(n);i&&i.forEach(([s,a])=>{var o;(o=n.getValue(s))===null||o===void 0||o.set(a)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Ky=!1,Gy=!1,il.forEach(t=>t.complete()),il.clear()}function LM(){il.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Ky=!0)})}function CG(){LM(),kM()}class ZT{constructor(e,r,n,i,s,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=r,this.name=n,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(il.add(this),Gy||(Gy=!0,Ut.read(LM),Ut.resolveKeyframes(kM))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:r,element:n,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const a=i==null?void 0:i.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(n&&r){const l=n.readValue(r,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),i&&a===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),il.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,il.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Bd=t=>Math.round(t*1e5)/1e5,QT=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function IG(t){return t==null}const kG=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,JT=(t,e)=>r=>!!(typeof r=="string"&&kG.test(r)&&r.startsWith(t)||e&&!IG(r)&&Object.prototype.hasOwnProperty.call(r,e)),DM=(t,e,r)=>n=>{if(typeof n!="string")return n;const[i,s,a,o]=n.match(QT);return{[t]:parseFloat(i),[e]:parseFloat(s),[r]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},LG=t=>Xa(0,255,t),Xv={...Tc,transform:t=>Math.round(LG(t))},Ko={test:JT("rgb","red"),parse:DM("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:n=1})=>"rgba("+Xv.transform(t)+", "+Xv.transform(e)+", "+Xv.transform(r)+", "+Bd(ah.transform(n))+")"};function DG(t){let e="",r="",n="",i="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),n=t.substring(3,4),i=t.substring(4,5),e+=e,r+=r,n+=n,i+=i),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const qy={test:JT("#"),parse:DG,transform:Ko.transform},Tu={test:JT("hsl","hue"),parse:DM("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+bs.transform(Bd(e))+", "+bs.transform(Bd(r))+", "+Bd(ah.transform(n))+")"},bn={test:t=>Ko.test(t)||qy.test(t)||Tu.test(t),parse:t=>Ko.test(t)?Ko.parse(t):Tu.test(t)?Tu.parse(t):qy.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ko.transform(t):Tu.transform(t)},OG=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function MG(t){var e,r;return isNaN(t)&&typeof t=="string"&&(((e=t.match(QT))===null||e===void 0?void 0:e.length)||0)+(((r=t.match(OG))===null||r===void 0?void 0:r.length)||0)>0}const OM="number",MM="color",PG="var",NG="var(",J2="${}",FG=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function oh(t){const e=t.toString(),r=[],n={color:[],number:[],var:[]},i=[];let s=0;const o=e.replace(FG,l=>(bn.test(l)?(n.color.push(s),i.push(MM),r.push(bn.parse(l))):l.startsWith(NG)?(n.var.push(s),i.push(PG),r.push(l)):(n.number.push(s),i.push(OM),r.push(parseFloat(l))),++s,J2)).split(J2);return{values:r,split:o,indexes:n,types:i}}function PM(t){return oh(t).values}function NM(t){const{split:e,types:r}=oh(t),n=e.length;return i=>{let s="";for(let a=0;a<n;a++)if(s+=e[a],i[a]!==void 0){const o=r[a];o===OM?s+=Bd(i[a]):o===MM?s+=bn.transform(i[a]):s+=i[a]}return s}}const $G=t=>typeof t=="number"?0:t;function UG(t){const e=PM(t);return NM(t)(e.map($G))}const Za={test:MG,parse:PM,createTransformer:NM,getAnimatableNone:UG},BG=new Set(["brightness","contrast","saturate","opacity"]);function jG(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=r.match(QT)||[];if(!n)return t;const i=r.replace(n,"");let s=BG.has(e)?1:0;return n!==r&&(s*=100),e+"("+s+i+")"}const HG=/\b([a-z-]*)\(.*?\)/gu,zy={...Za,getAnimatableNone:t=>{const e=t.match(HG);return e?e.map(jG).join(" "):t}},VG={borderWidth:We,borderTopWidth:We,borderRightWidth:We,borderBottomWidth:We,borderLeftWidth:We,borderRadius:We,radius:We,borderTopLeftRadius:We,borderTopRightRadius:We,borderBottomRightRadius:We,borderBottomLeftRadius:We,width:We,maxWidth:We,height:We,maxHeight:We,top:We,right:We,bottom:We,left:We,padding:We,paddingTop:We,paddingRight:We,paddingBottom:We,paddingLeft:We,margin:We,marginTop:We,marginRight:We,marginBottom:We,marginLeft:We,backgroundPositionX:We,backgroundPositionY:We},WG={rotate:pa,rotateX:pa,rotateY:pa,rotateZ:pa,scale:_f,scaleX:_f,scaleY:_f,scaleZ:_f,skew:pa,skewX:pa,skewY:pa,distance:We,translateX:We,translateY:We,translateZ:We,x:We,y:We,z:We,perspective:We,transformPerspective:We,opacity:ah,originX:z2,originY:z2,originZ:We},eR={...Tc,transform:Math.round},ex={...VG,...WG,zIndex:eR,size:We,fillOpacity:ah,strokeOpacity:ah,numOctaves:eR},GG={...ex,color:bn,backgroundColor:bn,outlineColor:bn,fill:bn,stroke:bn,borderColor:bn,borderTopColor:bn,borderRightColor:bn,borderBottomColor:bn,borderLeftColor:bn,filter:zy,WebkitFilter:zy},tx=t=>GG[t];function FM(t,e){let r=tx(t);return r!==zy&&(r=Za),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const KG=new Set(["auto","none","0"]);function qG(t,e,r){let n=0,i;for(;n<t.length&&!i;){const s=t[n];typeof s=="string"&&!KG.has(s)&&oh(s).values.length&&(i=t[n]),n++}if(i&&r)for(const s of e)t[s]=FM(r,i)}class $M extends ZT{constructor(e,r,n,i,s){super(e,r,n,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),XT(u))){const c=RM(u,r.current);c!==void 0&&(e[l]=c),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!xG.has(n)||e.length!==2)return;const[i,s]=e,a=Q2(i),o=Q2(s);if(a!==o)if(Y2(a)&&Y2(o))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:r}=this,n=[];for(let i=0;i<e.length;i++)gG(e[i])&&n.push(i);n.length&&qG(e,n,r)}measureInitialState(){const{element:e,unresolvedKeyframes:r,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Zu[n](e.measureViewportBox(),window.getComputedStyle(e.current)),r[0]=this.measuredOrigin;const i=r[r.length-1];i!==void 0&&e.getValue(n,i).jump(i,!1)}measureEndState(){var e;const{element:r,name:n,unresolvedKeyframes:i}=this;if(!r||!r.current)return;const s=r.getValue(n);s&&s.jump(this.measuredOrigin,!1);const a=i.length-1,o=i[a];i[a]=Zu[n](r.measureViewportBox(),window.getComputedStyle(r.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,u])=>{r.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function rx(t){return typeof t=="function"}let $0;function zG(){$0=void 0}const ys={now:()=>($0===void 0&&ys.set(on.isProcessing||uG.useManualTiming?on.timestamp:performance.now()),$0),set:t=>{$0=t,queueMicrotask(zG)}},tR=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Za.test(t)||t==="0")&&!t.startsWith("url("));function YG(t){const e=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==e)return!0}function XG(t,e,r,n){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],a=tR(i,e),o=tR(s,e);return!a||!o?!1:YG(t)||(r==="spring"||rx(r))&&n}const ZG=40;class UM{constructor({autoplay:e=!0,delay:r=0,type:n="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ys.now(),this.options={autoplay:e,delay:r,type:n,repeat:i,repeatDelay:s,repeatType:a,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>ZG?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&CG(),this._resolved}onKeyframesResolved(e,r){this.resolvedAt=ys.now(),this.hasAttemptedResolve=!0;const{name:n,type:i,velocity:s,delay:a,onComplete:o,onUpdate:l,isGenerator:u}=this.options;if(!u&&!XG(e,n,i,s))if(a)this.options.duration=0;else{l==null||l(qg(e,this.options,r)),o==null||o(),this.resolveFinishedPromise();return}const c=this.initPlayback(e,r);c!==!1&&(this._resolved={keyframes:e,finalKeyframe:r,...c},this.onPostResolved())}onPostResolved(){}then(e,r){return this.currentFinishedPromise.then(e,r)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}function BM(t,e){return e?t*(1e3/e):0}const QG=5;function jM(t,e,r){const n=Math.max(e-QG,0);return BM(r-t(n),e-n)}const Zv=.001,JG=.01,eK=10,tK=.05,rK=1;function nK({duration:t=800,bounce:e=.25,velocity:r=0,mass:n=1}){let i,s,a=1-e;a=Xa(tK,rK,a),t=Xa(JG,eK,zs(t)),a<1?(i=u=>{const c=u*a,d=c*t,h=c-r,f=Yy(u,a),p=Math.exp(-d);return Zv-h/f*p},s=u=>{const d=u*a*t,h=d*r+r,f=Math.pow(a,2)*Math.pow(u,2)*t,p=Math.exp(-d),m=Yy(Math.pow(u,2),a);return(-i(u)+Zv>0?-1:1)*((h-f)*p)/m}):(i=u=>{const c=Math.exp(-u*t),d=(u-r)*t+1;return-Zv+c*d},s=u=>{const c=Math.exp(-u*t),d=(r-u)*(t*t);return c*d});const o=5/t,l=sK(i,s,o);if(t=qs(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const u=Math.pow(l,2)*n;return{stiffness:u,damping:a*2*Math.sqrt(n*u),duration:t}}}const iK=12;function sK(t,e,r){let n=r;for(let i=1;i<iK;i++)n=n-t(n)/e(n);return n}function Yy(t,e){return t*Math.sqrt(1-e*e)}const aK=["duration","bounce"],oK=["stiffness","damping","mass"];function rR(t,e){return e.some(r=>t[r]!==void 0)}function lK(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!rR(t,oK)&&rR(t,aK)){const r=nK(t);e={...e,...r,mass:1},e.isResolvedFromDuration=!0}return e}function HM({keyframes:t,restDelta:e,restSpeed:r,...n}){const i=t[0],s=t[t.length-1],a={done:!1,value:i},{stiffness:o,damping:l,mass:u,duration:c,velocity:d,isResolvedFromDuration:h}=lK({...n,velocity:-zs(n.velocity||0)}),f=d||0,p=l/(2*Math.sqrt(o*u)),m=s-i,g=zs(Math.sqrt(o/u)),v=Math.abs(m)<5;r||(r=v?.01:2),e||(e=v?.005:.5);let b;if(p<1){const y=Yy(g,p);b=T=>{const x=Math.exp(-p*g*T);return s-x*((f+p*g*m)/y*Math.sin(y*T)+m*Math.cos(y*T))}}else if(p===1)b=y=>s-Math.exp(-g*y)*(m+(f+g*m)*y);else{const y=g*Math.sqrt(p*p-1);b=T=>{const x=Math.exp(-p*g*T),_=Math.min(y*T,300);return s-x*((f+p*g*m)*Math.sinh(_)+y*m*Math.cosh(_))/y}}return{calculatedDuration:h&&c||null,next:y=>{const T=b(y);if(h)a.done=y>=c;else{let x=0;p<1&&(x=y===0?qs(f):jM(b,y,T));const _=Math.abs(x)<=r,S=Math.abs(s-T)<=e;a.done=_&&S}return a.value=a.done?s:T,a}}}function nR({keyframes:t,velocity:e=0,power:r=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:u=.5,restSpeed:c}){const d=t[0],h={done:!1,value:d},f=A=>o!==void 0&&A<o||l!==void 0&&A>l,p=A=>o===void 0?l:l===void 0||Math.abs(o-A)<Math.abs(l-A)?o:l;let m=r*e;const g=d+m,v=a===void 0?g:a(g);v!==g&&(m=v-d);const b=A=>-m*Math.exp(-A/n),y=A=>v+b(A),T=A=>{const k=b(A),I=y(A);h.done=Math.abs(k)<=u,h.value=h.done?v:I};let x,_;const S=A=>{f(h.value)&&(x=A,_=HM({keyframes:[h.value,p(h.value)],velocity:jM(y,A,h.value),damping:i,stiffness:s,restDelta:u,restSpeed:c}))};return S(0),{calculatedDuration:null,next:A=>{let k=!1;return!_&&x===void 0&&(k=!0,T(A),S(A)),x!==void 0&&A>=x?_.next(A-x):(!k&&T(A),h)}}}const uK=Qh(.42,0,1,1),cK=Qh(0,0,.58,1),VM=Qh(.42,0,.58,1),dK=t=>Array.isArray(t)&&typeof t[0]!="number",nx=t=>Array.isArray(t)&&typeof t[0]=="number",iR={linear:Tn,easeIn:uK,easeInOut:VM,easeOut:cK,circIn:YT,circInOut:TM,circOut:_M,backIn:zT,backInOut:yM,backOut:bM,anticipate:EM},sR=t=>{if(nx(t)){Wy(t.length===4);const[e,r,n,i]=t;return Qh(e,r,n,i)}else if(typeof t=="string")return Wy(iR[t]!==void 0),iR[t];return t},hK=(t,e)=>r=>e(t(r)),Ys=(...t)=>t.reduce(hK),Qu=(t,e,r)=>{const n=e-t;return n===0?1:(r-t)/n},fr=(t,e,r)=>t+(e-t)*r;function Qv(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function fK({hue:t,saturation:e,lightness:r,alpha:n}){t/=360,e/=100,r/=100;let i=0,s=0,a=0;if(!e)i=s=a=r;else{const o=r<.5?r*(1+e):r+e-r*e,l=2*r-o;i=Qv(l,o,t+1/3),s=Qv(l,o,t),a=Qv(l,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:n}}function wm(t,e){return r=>r>0?e:t}const Jv=(t,e,r)=>{const n=t*t,i=r*(e*e-n)+n;return i<0?0:Math.sqrt(i)},pK=[qy,Ko,Tu],mK=t=>pK.find(e=>e.test(t));function aR(t){const e=mK(t);if(!e)return!1;let r=e.parse(t);return e===Tu&&(r=fK(r)),r}const oR=(t,e)=>{const r=aR(t),n=aR(e);if(!r||!n)return wm(t,e);const i={...r};return s=>(i.red=Jv(r.red,n.red,s),i.green=Jv(r.green,n.green,s),i.blue=Jv(r.blue,n.blue,s),i.alpha=fr(r.alpha,n.alpha,s),Ko.transform(i))},Xy=new Set(["none","hidden"]);function gK(t,e){return Xy.has(t)?r=>r<=0?t:e:r=>r>=1?e:t}function vK(t,e){return r=>fr(t,e,r)}function ix(t){return typeof t=="number"?vK:typeof t=="string"?XT(t)?wm:bn.test(t)?oR:EK:Array.isArray(t)?WM:typeof t=="object"?bn.test(t)?oR:bK:wm}function WM(t,e){const r=[...t],n=r.length,i=t.map((s,a)=>ix(s)(s,e[a]));return s=>{for(let a=0;a<n;a++)r[a]=i[a](s);return r}}function bK(t,e){const r={...t,...e},n={};for(const i in r)t[i]!==void 0&&e[i]!==void 0&&(n[i]=ix(t[i])(t[i],e[i]));return i=>{for(const s in n)r[s]=n[s](i);return r}}function yK(t,e){var r;const n=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],o=t.indexes[a][i[a]],l=(r=t.values[o])!==null&&r!==void 0?r:0;n[s]=l,i[a]++}return n}const EK=(t,e)=>{const r=Za.createTransformer(e),n=oh(t),i=oh(e);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?Xy.has(t)&&!i.values.length||Xy.has(e)&&!n.values.length?gK(t,e):Ys(WM(yK(n,i),i.values),r):wm(t,e)};function GM(t,e,r){return typeof t=="number"&&typeof e=="number"&&typeof r=="number"?fr(t,e,r):ix(t)(t,e)}function _K(t,e,r){const n=[],i=r||GM,s=t.length-1;for(let a=0;a<s;a++){let o=i(t[a],t[a+1]);if(e){const l=Array.isArray(e)?e[a]||Tn:e;o=Ys(l,o)}n.push(o)}return n}function TK(t,e,{clamp:r=!0,ease:n,mixer:i}={}){const s=t.length;if(Wy(s===e.length),s===1)return()=>e[0];if(s===2&&t[0]===t[1])return()=>e[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=_K(e,n,i),o=a.length,l=u=>{let c=0;if(o>1)for(;c<t.length-2&&!(u<t[c+1]);c++);const d=Qu(t[c],t[c+1],u);return a[c](d)};return r?u=>l(Xa(t[0],t[s-1],u)):l}function xK(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const i=Qu(0,e,n);t.push(fr(r,1,i))}}function SK(t){const e=[0];return xK(e,t.length-1),e}function wK(t,e){return t.map(r=>r*e)}function AK(t,e){return t.map(()=>e||VM).splice(0,t.length-1)}function Am({duration:t=300,keyframes:e,times:r,ease:n="easeInOut"}){const i=dK(n)?n.map(sR):sR(n),s={done:!1,value:e[0]},a=wK(r&&r.length===e.length?r:SK(e),t),o=TK(a,e,{ease:Array.isArray(i)?i:AK(e,i)});return{calculatedDuration:t,next:l=>(s.value=o(l),s.done=l>=t,s)}}const lR=2e4;function RK(t){let e=0;const r=50;let n=t.next(e);for(;!n.done&&e<lR;)e+=r,n=t.next(e);return e>=lR?1/0:e}const CK=t=>{const e=({timestamp:r})=>t(r);return{start:()=>Ut.update(e,!0),stop:()=>Ya(e),now:()=>on.isProcessing?on.timestamp:ys.now()}},IK={decay:nR,inertia:nR,tween:Am,keyframes:Am,spring:HM},kK=t=>t/100;class sx extends UM{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:r,motionValue:n,element:i,keyframes:s}=this.options,a=(i==null?void 0:i.KeyframeResolver)||ZT,o=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new a(s,o,r,n,i),this.resolver.scheduleResolve()}initPlayback(e){const{type:r="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=this.options,o=rx(r)?r:IK[r]||Am;let l,u;o!==Am&&typeof e[0]!="number"&&(l=Ys(kK,GM(e[0],e[1])),e=[0,100]);const c=o({...this.options,keyframes:e});s==="mirror"&&(u=o({...this.options,keyframes:[...e].reverse(),velocity:-a})),c.calculatedDuration===null&&(c.calculatedDuration=RK(c));const{calculatedDuration:d}=c,h=d+i,f=h*(n+1)-i;return{generator:c,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:h,totalDuration:f}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,r=!1){const{resolved:n}=this;if(!n){const{keyframes:A}=this.options;return{done:!0,value:A[A.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:a,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:u,totalDuration:c,resolvedDuration:d}=n;if(this.startTime===null)return s.next(0);const{delay:h,repeat:f,repeatType:p,repeatDelay:m,onUpdate:g}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-c/this.speed,this.startTime)),r?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const v=this.currentTime-h*(this.speed>=0?1:-1),b=this.speed>=0?v<0:v>c;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let y=this.currentTime,T=s;if(f){const A=Math.min(this.currentTime,c)/d;let k=Math.floor(A),I=A%1;!I&&A>=1&&(I=1),I===1&&k--,k=Math.min(k,f+1),!!(k%2)&&(p==="reverse"?(I=1-I,m&&(I-=m/d)):p==="mirror"&&(T=a)),y=Xa(0,1,I)*d}const x=b?{done:!1,value:l[0]}:T.next(y);o&&(x.value=o(x.value));let{done:_}=x;!b&&u!==null&&(_=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const S=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&_);return S&&i!==void 0&&(x.value=qg(l,this.options,i)),g&&g(x.value),S&&this.finish(),x}get duration(){const{resolved:e}=this;return e?zs(e.calculatedDuration):0}get time(){return zs(this.currentTime)}set time(e){e=qs(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const r=this.playbackSpeed!==e;this.playbackSpeed=e,r&&(this.time=zs(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=CK,onPlay:r,startTime:n}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),r&&r();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const LK=new Set(["opacity","clipPath","filter","transform"]),DK=10,OK=(t,e)=>{let r="";const n=Math.max(Math.round(e/DK),2);for(let i=0;i<n;i++)r+=t(Qu(0,n-1,i))+", ";return`linear(${r.substring(0,r.length-2)})`};function ax(t){let e;return()=>(e===void 0&&(e=t()),e)}const MK={linearEasing:void 0};function PK(t,e){const r=ax(t);return()=>{var n;return(n=MK[e])!==null&&n!==void 0?n:r()}}const Rm=PK(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function KM(t){return!!(typeof t=="function"&&Rm()||!t||typeof t=="string"&&(t in Zy||Rm())||nx(t)||Array.isArray(t)&&t.every(KM))}const ad=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`,Zy={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ad([0,.65,.55,1]),circOut:ad([.55,0,1,.45]),backIn:ad([.31,.01,.66,-.59]),backOut:ad([.33,1.53,.69,.99])};function qM(t,e){if(t)return typeof t=="function"&&Rm()?OK(t,e):nx(t)?ad(t):Array.isArray(t)?t.map(r=>qM(r,e)||Zy.easeOut):Zy[t]}function NK(t,e,r,{delay:n=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o,times:l}={}){const u={[e]:r};l&&(u.offset=l);const c=qM(o,i);return Array.isArray(c)&&(u.easing=c),t.animate(u,{delay:n,duration:i,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}function uR(t,e){t.timeline=e,t.onfinish=null}const FK=ax(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Cm=10,$K=2e4;function UK(t){return rx(t.type)||t.type==="spring"||!KM(t.ease)}function BK(t,e){const r=new sx({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:t[0]};const i=[];let s=0;for(;!n.done&&s<$K;)n=r.sample(s),i.push(n.value),s+=Cm;return{times:void 0,keyframes:i,duration:s-Cm,ease:"linear"}}const zM={anticipate:EM,backInOut:yM,circInOut:TM};function jK(t){return t in zM}class cR extends UM{constructor(e){super(e);const{name:r,motionValue:n,element:i,keyframes:s}=this.options;this.resolver=new $M(s,(a,o)=>this.onKeyframesResolved(a,o),r,n,i),this.resolver.scheduleResolve()}initPlayback(e,r){var n;let{duration:i=300,times:s,ease:a,type:o,motionValue:l,name:u,startTime:c}=this.options;if(!(!((n=l.owner)===null||n===void 0)&&n.current))return!1;if(typeof a=="string"&&Rm()&&jK(a)&&(a=zM[a]),UK(this.options)){const{onComplete:h,onUpdate:f,motionValue:p,element:m,...g}=this.options,v=BK(e,g);e=v.keyframes,e.length===1&&(e[1]=e[0]),i=v.duration,s=v.times,a=v.ease,o="keyframes"}const d=NK(l.owner.current,u,e,{...this.options,duration:i,times:s,ease:a});return d.startTime=c??this.calcStartTime(),this.pendingTimeline?(uR(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:h}=this.options;l.set(qg(e,this.options,r)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:i,times:s,type:o,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:r}=e;return zs(r)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:r}=e;return zs(r.currentTime||0)}set time(e){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.currentTime=qs(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:r}=e;return r.playbackRate}set speed(e){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:r}=e;return r.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:r}=e;return r.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:r}=this;if(!r)return Tn;const{animation:n}=r;uR(n,e)}return Tn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:r}=e;r.playState==="finished"&&this.updateFinishedPromise(),r.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:r}=e;r.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:r,keyframes:n,duration:i,type:s,ease:a,times:o}=e;if(r.playState==="idle"||r.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:c,onComplete:d,element:h,...f}=this.options,p=new sx({...f,keyframes:n,duration:i,type:s,ease:a,times:o,isGenerator:!0}),m=qs(this.time);u.setWithVelocity(p.sample(m-Cm).value,p.sample(m).value,Cm)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:r,name:n,repeatDelay:i,repeatType:s,damping:a,type:o}=e;return FK()&&n&&LK.has(n)&&r&&r.owner&&r.owner.current instanceof HTMLElement&&!r.owner.getProps().onUpdate&&!i&&s!=="mirror"&&a!==0&&o!=="inertia"}}const HK=ax(()=>window.ScrollTimeline!==void 0);class VK{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,r){return Promise.all(this.animations).then(e).catch(r)}getAll(e){return this.animations[0][e]}setAll(e,r){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=r}attachTimeline(e,r){const n=this.animations.map(i=>HK()&&i.attachTimeline?i.attachTimeline(e):r(i));return()=>{n.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let r=0;r<this.animations.length;r++)e=Math.max(e,this.animations[r].duration);return e}runAll(e){this.animations.forEach(r=>r[e]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function WK({when:t,delay:e,delayChildren:r,staggerChildren:n,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const ox=(t,e,r,n={},i,s)=>a=>{const o=qT(n,t)||{},l=o.delay||n.delay||0;let{elapsed:u=0}=n;u=u-qs(l);let c={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:h=>{e.set(h),o.onUpdate&&o.onUpdate(h)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:s?void 0:i};WK(o)||(c={...c,...lG(t,c)}),c.duration&&(c.duration=qs(c.duration)),c.repeatDelay&&(c.repeatDelay=qs(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let d=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(c.duration=0,c.delay===0&&(d=!0)),d&&!s&&e.get()!==void 0){const h=qg(c.keyframes,o);if(h!==void 0)return Ut.update(()=>{c.onUpdate(h),c.onComplete()}),new VK([])}return!s&&cR.supports(c)?new cR(c):new sx(c)},GK=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),KK=t=>Vy(t)?t[t.length-1]||0:t;function lx(t,e){t.indexOf(e)===-1&&t.push(e)}function ux(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}class cx{constructor(){this.subscriptions=[]}add(e){return lx(this.subscriptions,e),()=>ux(this.subscriptions,e)}notify(e,r,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,r,n);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const dR=30,qK=t=>!isNaN(parseFloat(t));class zK{constructor(e,r={}){this.version="11.11.11",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,i=!0)=>{const s=ys.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=r.owner}setCurrent(e){this.current=e,this.updatedAt=ys.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=qK(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new cx);const n=this.events[e].add(r);return e==="change"?()=>{n(),Ut.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e,r=!0){!r||!this.passiveEffect?this.updateAndNotify(e,r):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,r=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ys.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>dR)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,dR);return BM(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function lh(t,e){return new zK(t,e)}function YK(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,lh(r))}function XK(t,e){const r=Kg(t,e);let{transitionEnd:n={},transition:i={},...s}=r||{};s={...s,...n};for(const a in s){const o=KK(s[a]);YK(t,a,o)}}const dx=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),ZK="framerAppearId",YM="data-"+dx(ZK);function XM(t){return t.props[YM]}const _n=t=>!!(t&&t.getVelocity);function QK(t){return!!(_n(t)&&t.add)}function Qy(t,e){const r=t.getValue("willChange");if(QK(r))return r.add(e)}function JK({protectedKeys:t,needsAnimating:e},r){const n=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,n}function ZM(t,e,{delay:r=0,transitionOverride:n,type:i}={}){var s;let{transition:a=t.getDefaultTransition(),transitionEnd:o,...l}=e;n&&(a=n);const u=[],c=i&&t.animationState&&t.animationState.getState()[i];for(const d in l){const h=t.getValue(d,(s=t.latestValues[d])!==null&&s!==void 0?s:null),f=l[d];if(f===void 0||c&&JK(c,d))continue;const p={delay:r,...qT(a||{},d)};let m=!1;if(window.MotionHandoffAnimation){const v=XM(t);if(v){const b=window.MotionHandoffAnimation(v,d,Ut);b!==null&&(p.startTime=b,m=!0)}}Qy(t,d),h.start(ox(d,h,f,t.shouldReduceMotion&&yl.has(d)?{type:!1}:p,t,m));const g=h.animation;g&&u.push(g)}return o&&Promise.all(u).then(()=>{Ut.update(()=>{o&&XK(t,o)})}),u}function Jy(t,e,r={}){var n;const i=Kg(t,e,r.type==="exit"?(n=t.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};r.transitionOverride&&(s=r.transitionOverride);const a=i?()=>Promise.all(ZM(t,i,r)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:h}=s;return eq(t,e,c+u,d,h,r)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,c]=l==="beforeChildren"?[a,o]:[o,a];return u().then(()=>c())}else return Promise.all([a(),o(r.delay)])}function eq(t,e,r=0,n=0,i=1,s){const a=[],o=(t.variantChildren.size-1)*n,l=i===1?(u=0)=>u*n:(u=0)=>o-u*n;return Array.from(t.variantChildren).sort(tq).forEach((u,c)=>{u.notify("AnimationStart",e),a.push(Jy(u,e,{...s,delay:r+l(c)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(a)}function tq(t,e){return t.sortNodePosition(e)}function rq(t,e,r={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const i=e.map(s=>Jy(t,s,r));n=Promise.all(i)}else if(typeof e=="string")n=Jy(t,e,r);else{const i=typeof e=="function"?Kg(t,e,r.custom):e;n=Promise.all(ZM(t,i,r))}return n.then(()=>{t.notify("AnimationComplete",e)})}const nq=KT.length;function QM(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?QM(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const e={};for(let r=0;r<nq;r++){const n=KT[r],i=t.props[n];(sh(i)||i===!1)&&(e[n]=i)}return e}const iq=[...GT].reverse(),sq=GT.length;function aq(t){return e=>Promise.all(e.map(({animation:r,options:n})=>rq(t,r,n)))}function oq(t){let e=aq(t),r=hR(),n=!0;const i=l=>(u,c)=>{var d;const h=Kg(t,c,l==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(h){const{transition:f,transitionEnd:p,...m}=h;u={...u,...m,...p}}return u};function s(l){e=l(t)}function a(l){const{props:u}=t,c=QM(t.parent)||{},d=[],h=new Set;let f={},p=1/0;for(let g=0;g<sq;g++){const v=iq[g],b=r[v],y=u[v]!==void 0?u[v]:c[v],T=sh(y),x=v===l?b.isActive:null;x===!1&&(p=g);let _=y===c[v]&&y!==u[v]&&T;if(_&&n&&t.manuallyAnimateOnMount&&(_=!1),b.protectedKeys={...f},!b.isActive&&x===null||!y&&!b.prevProp||Gg(y)||typeof y=="boolean")continue;const S=lq(b.prevProp,y);let A=S||v===l&&b.isActive&&!_&&T||g>p&&T,k=!1;const I=Array.isArray(y)?y:[y];let C=I.reduce(i(v),{});x===!1&&(C={});const{prevResolvedValues:N={}}=b,P={...N,...C},V=B=>{A=!0,h.has(B)&&(k=!0,h.delete(B)),b.needsAnimating[B]=!0;const X=t.getValue(B);X&&(X.liveStyle=!1)};for(const B in P){const X=C[B],te=N[B];if(f.hasOwnProperty(B))continue;let D=!1;Vy(X)&&Vy(te)?D=!fM(X,te):D=X!==te,D?X!=null?V(B):h.add(B):X!==void 0&&h.has(B)?V(B):b.protectedKeys[B]=!0}b.prevProp=y,b.prevResolvedValues=C,b.isActive&&(f={...f,...C}),n&&t.blockInitialAnimation&&(A=!1),A&&(!(_&&S)||k)&&d.push(...I.map(B=>({animation:B,options:{type:v}})))}if(h.size){const g={};h.forEach(v=>{const b=t.getBaseTarget(v),y=t.getValue(v);y&&(y.liveStyle=!0),g[v]=b??null}),d.push({animation:g})}let m=!!d.length;return n&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(m=!1),n=!1,m?e(d):Promise.resolve()}function o(l,u){var c;if(r[l].isActive===u)return Promise.resolve();(c=t.variantChildren)===null||c===void 0||c.forEach(h=>{var f;return(f=h.animationState)===null||f===void 0?void 0:f.setActive(l,u)}),r[l].isActive=u;const d=a(l);for(const h in r)r[h].protectedKeys={};return d}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>r,reset:()=>{r=hR(),n=!0}}}function lq(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!fM(e,t):!1}function oo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function hR(){return{animate:oo(!0),whileInView:oo(),whileHover:oo(),whileTap:oo(),whileDrag:oo(),whileFocus:oo(),exit:oo()}}class ro{constructor(e){this.isMounted=!1,this.node=e}update(){}}class uq extends ro{constructor(e){super(e),e.animationState||(e.animationState=oq(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Gg(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let cq=0;class dq extends ro{constructor(){super(...arguments),this.id=cq++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const i=this.node.animationState.setActive("exit",!e);r&&!e&&i.then(()=>r(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const hq={animation:{Feature:uq},exit:{Feature:dq}},JM=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function zg(t,e="page"){return{point:{x:t[`${e}X`],y:t[`${e}Y`]}}}const fq=t=>e=>JM(e)&&t(e,zg(e));function Ws(t,e,r,n={passive:!0}){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r)}function Xs(t,e,r,n){return Ws(t,e,fq(r),n)}const fR=(t,e)=>Math.abs(t-e);function pq(t,e){const r=fR(t.x,e.x),n=fR(t.y,e.y);return Math.sqrt(r**2+n**2)}class e3{constructor(e,r,{transformPagePoint:n,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=tb(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,f=pq(d.offset,{x:0,y:0})>=3;if(!h&&!f)return;const{point:p}=d,{timestamp:m}=on;this.history.push({...p,timestamp:m});const{onStart:g,onMove:v}=this.handlers;h||(g&&g(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,d)},this.handlePointerMove=(d,h)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=eb(h,this.transformPagePoint),Ut.update(this.updatePoint,!0)},this.handlePointerUp=(d,h)=>{this.end();const{onEnd:f,onSessionEnd:p,resumeAnimation:m}=this.handlers;if(this.dragSnapToOrigin&&m&&m(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=tb(d.type==="pointercancel"?this.lastMoveEventInfo:eb(h,this.transformPagePoint),this.history);this.startEvent&&f&&f(d,g),p&&p(d,g)},!JM(e))return;this.dragSnapToOrigin=s,this.handlers=r,this.transformPagePoint=n,this.contextWindow=i||window;const a=zg(e),o=eb(a,this.transformPagePoint),{point:l}=o,{timestamp:u}=on;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=r;c&&c(e,tb(o,this.history)),this.removeListeners=Ys(Xs(this.contextWindow,"pointermove",this.handlePointerMove),Xs(this.contextWindow,"pointerup",this.handlePointerUp),Xs(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ya(this.updatePoint)}}function eb(t,e){return e?{point:e(t.point)}:t}function pR(t,e){return{x:t.x-e.x,y:t.y-e.y}}function tb({point:t},e){return{point:t,delta:pR(t,t3(e)),offset:pR(t,mq(e)),velocity:gq(e,.1)}}function mq(t){return t[0]}function t3(t){return t[t.length-1]}function gq(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,n=null;const i=t3(t);for(;r>=0&&(n=t[r],!(i.timestamp-n.timestamp>qs(e)));)r--;if(!n)return{x:0,y:0};const s=zs(i.timestamp-n.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-n.x)/s,y:(i.y-n.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function r3(t){let e=null;return()=>{const r=()=>{e=null};return e===null?(e=t,r):!1}}const mR=r3("dragHorizontal"),gR=r3("dragVertical");function n3(t){let e=!1;if(t==="y")e=gR();else if(t==="x")e=mR();else{const r=mR(),n=gR();r&&n?e=()=>{r(),n()}:(r&&r(),n&&n())}return e}function i3(){const t=n3(!0);return t?(t(),!1):!0}function xu(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}const s3=1e-4,vq=1-s3,bq=1+s3,a3=.01,yq=0-a3,Eq=0+a3;function ii(t){return t.max-t.min}function _q(t,e,r){return Math.abs(t-e)<=r}function vR(t,e,r,n=.5){t.origin=n,t.originPoint=fr(e.min,e.max,t.origin),t.scale=ii(r)/ii(e),t.translate=fr(r.min,r.max,t.origin)-t.originPoint,(t.scale>=vq&&t.scale<=bq||isNaN(t.scale))&&(t.scale=1),(t.translate>=yq&&t.translate<=Eq||isNaN(t.translate))&&(t.translate=0)}function jd(t,e,r,n){vR(t.x,e.x,r.x,n?n.originX:void 0),vR(t.y,e.y,r.y,n?n.originY:void 0)}function bR(t,e,r){t.min=r.min+e.min,t.max=t.min+ii(e)}function Tq(t,e,r){bR(t.x,e.x,r.x),bR(t.y,e.y,r.y)}function yR(t,e,r){t.min=e.min-r.min,t.max=t.min+ii(e)}function Hd(t,e,r){yR(t.x,e.x,r.x),yR(t.y,e.y,r.y)}function xq(t,{min:e,max:r},n){return e!==void 0&&t<e?t=n?fr(e,t,n.min):Math.max(t,e):r!==void 0&&t>r&&(t=n?fr(r,t,n.max):Math.min(t,r)),t}function ER(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function Sq(t,{top:e,left:r,bottom:n,right:i}){return{x:ER(t.x,r,i),y:ER(t.y,e,n)}}function _R(t,e){let r=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,n]=[n,r]),{min:r,max:n}}function wq(t,e){return{x:_R(t.x,e.x),y:_R(t.y,e.y)}}function Aq(t,e){let r=.5;const n=ii(t),i=ii(e);return i>n?r=Qu(e.min,e.max-n,t.min):n>i&&(r=Qu(t.min,t.max-i,e.min)),Xa(0,1,r)}function Rq(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const e1=.35;function Cq(t=e1){return t===!1?t=0:t===!0&&(t=e1),{x:TR(t,"left","right"),y:TR(t,"top","bottom")}}function TR(t,e,r){return{min:xR(t,e),max:xR(t,r)}}function xR(t,e){return typeof t=="number"?t:t[e]||0}const SR=()=>({translate:0,scale:1,origin:0,originPoint:0}),Su=()=>({x:SR(),y:SR()}),wR=()=>({min:0,max:0}),Er=()=>({x:wR(),y:wR()});function mi(t){return[t("x"),t("y")]}function o3({top:t,left:e,right:r,bottom:n}){return{x:{min:e,max:r},y:{min:t,max:n}}}function Iq({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function kq(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function rb(t){return t===void 0||t===1}function t1({scale:t,scaleX:e,scaleY:r}){return!rb(t)||!rb(e)||!rb(r)}function mo(t){return t1(t)||l3(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function l3(t){return AR(t.x)||AR(t.y)}function AR(t){return t&&t!=="0%"}function Im(t,e,r){const n=t-r,i=e*n;return r+i}function RR(t,e,r,n,i){return i!==void 0&&(t=Im(t,i,n)),Im(t,r,n)+e}function r1(t,e=0,r=1,n,i){t.min=RR(t.min,e,r,n,i),t.max=RR(t.max,e,r,n,i)}function u3(t,{x:e,y:r}){r1(t.x,e.translate,e.scale,e.originPoint),r1(t.y,r.translate,r.scale,r.originPoint)}const CR=.999999999999,IR=1.0000000000001;function Lq(t,e,r,n=!1){const i=r.length;if(!i)return;e.x=e.y=1;let s,a;for(let o=0;o<i;o++){s=r[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(n&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Au(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,u3(t,a)),n&&mo(s.latestValues)&&Au(t,s.latestValues))}e.x<IR&&e.x>CR&&(e.x=1),e.y<IR&&e.y>CR&&(e.y=1)}function wu(t,e){t.min=t.min+e,t.max=t.max+e}function kR(t,e,r,n,i=.5){const s=fr(t.min,t.max,i);r1(t,e,r,s,n)}function Au(t,e){kR(t.x,e.x,e.scaleX,e.scale,e.originX),kR(t.y,e.y,e.scaleY,e.scale,e.originY)}function c3(t,e){return o3(kq(t.getBoundingClientRect(),e))}function Dq(t,e,r){const n=c3(t,r),{scroll:i}=e;return i&&(wu(n.x,i.offset.x),wu(n.y,i.offset.y)),n}const d3=({current:t})=>t?t.ownerDocument.defaultView:null,Oq=new WeakMap;class Mq{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Er(),this.visualElement=e}start(e,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=c=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(zg(c,"page").point)},s=(c,d)=>{const{drag:h,dragPropagation:f,onDragStart:p}=this.getProps();if(h&&!f&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=n3(h),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),mi(g=>{let v=this.getAxisMotionValue(g).get()||0;if(bs.test(v)){const{projection:b}=this.visualElement;if(b&&b.layout){const y=b.layout.layoutBox[g];y&&(v=ii(y)*(parseFloat(v)/100))}}this.originPoint[g]=v}),p&&Ut.postRender(()=>p(c,d)),Qy(this.visualElement,"transform");const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},a=(c,d)=>{const{dragPropagation:h,dragDirectionLock:f,onDirectionLock:p,onDrag:m}=this.getProps();if(!h&&!this.openGlobalLock)return;const{offset:g}=d;if(f&&this.currentDirection===null){this.currentDirection=Pq(g),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",d.point,g),this.updateAxis("y",d.point,g),this.visualElement.render(),m&&m(c,d)},o=(c,d)=>this.stop(c,d),l=()=>mi(c=>{var d;return this.getAnimationState(c)==="paused"&&((d=this.getAxisMotionValue(c).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new e3(e,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:d3(this.visualElement)})}stop(e,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:i}=r;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Ut.postRender(()=>s(e,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,n){const{drag:i}=this.getProps();if(!n||!Tf(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=xq(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:r,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;r&&xu(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&i?this.constraints=Sq(i.layoutBox,r):this.constraints=!1,this.elastic=Cq(n),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&mi(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=Rq(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!xu(e))return!1;const n=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=Dq(n,i.root,this.visualElement.getTransformPagePoint());let a=wq(i.layout.layoutBox,s);if(r){const o=r(Iq(a));this.hasMutatedConstraints=!!o,o&&(a=o3(o))}return a}startAnimation(e){const{drag:r,dragMomentum:n,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=mi(c=>{if(!Tf(c,r,this.currentDirection))return;let d=l&&l[c]||{};a&&(d={min:0,max:0});const h=i?200:1e6,f=i?40:1e7,p={type:"inertia",velocity:n?e[c]:0,bounceStiffness:h,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(c,p)});return Promise.all(u).then(o)}startAxisValueAnimation(e,r){const n=this.getAxisMotionValue(e);return Qy(this.visualElement,e),n.start(ox(e,n,0,r,this.visualElement,!1))}stopAnimation(){mi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){mi(e=>{var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(e){const r=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),i=n[r];return i||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){mi(r=>{const{drag:n}=this.getProps();if(!Tf(r,n,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(r);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[r];s.set(e[r]-fr(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!xu(r)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};mi(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();i[a]=Aq({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),mi(a=>{if(!Tf(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:u}=this.constraints[a];o.set(fr(l,u,i[a]))})}addListeners(){if(!this.visualElement.current)return;Oq.set(this.visualElement,this);const e=this.visualElement.current,r=Xs(e,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),n=()=>{const{dragConstraints:l}=this.getProps();xu(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ut.read(n);const a=Ws(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(mi(c=>{const d=this.getAxisMotionValue(c);d&&(this.originPoint[c]+=l[c].translate,d.set(d.get()+l[c].translate))}),this.visualElement.render())});return()=>{a(),r(),s(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=e1,dragMomentum:o=!0}=e;return{...e,drag:r,dragDirectionLock:n,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function Tf(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function Pq(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class Nq extends ro{constructor(e){super(e),this.removeGroupControls=Tn,this.removeListeners=Tn,this.controls=new Mq(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Tn}unmount(){this.removeGroupControls(),this.removeListeners()}}const LR=t=>(e,r)=>{t&&Ut.postRender(()=>t(e,r))};class Fq extends ro{constructor(){super(...arguments),this.removePointerDownListener=Tn}onPointerDown(e){this.session=new e3(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:d3(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:LR(e),onStart:LR(r),onMove:n,onEnd:(s,a)=>{delete this.session,i&&Ut.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=Xs(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Yg=R.createContext(null);function $q(){const t=R.useContext(Yg);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:r,register:n}=t,i=R.useId();R.useEffect(()=>n(i),[]);const s=R.useCallback(()=>r&&r(i),[i,r]);return!e&&r?[!1,s]:[!0]}const hx=R.createContext({}),h3=R.createContext({}),U0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function DR(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Nc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(We.test(t))t=parseFloat(t);else return t;const r=DR(t,e.target.x),n=DR(t,e.target.y);return`${r}% ${n}%`}},Uq={correct:(t,{treeScale:e,projectionDelta:r})=>{const n=t,i=Za.parse(t);if(i.length>5)return n;const s=Za.createTransformer(t),a=typeof i[0]!="number"?1:0,o=r.x.scale*e.x,l=r.y.scale*e.y;i[0+a]/=o,i[1+a]/=l;const u=fr(o,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=u),typeof i[3+a]=="number"&&(i[3+a]/=u),s(i)}},km={};function Bq(t){Object.assign(km,t)}const{schedule:fx,cancel:Wve}=pM(queueMicrotask,!1);class jq extends R.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n,layoutId:i}=this.props,{projection:s}=e;Bq(Hq),s&&(r.group&&r.group.add(s),n&&n.register&&i&&n.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),U0.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:n,drag:i,isPresent:s}=this.props,a=n.projection;return a&&(a.isPresent=s,i||e.layoutDependency!==r||r===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||Ut.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),fx.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function f3(t){const[e,r]=$q(),n=R.useContext(hx);return E.jsx(jq,{...t,layoutGroup:n,switchLayoutGroup:R.useContext(h3),isPresent:e,safeToRemove:r})}const Hq={borderRadius:{...Nc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Nc,borderTopRightRadius:Nc,borderBottomLeftRadius:Nc,borderBottomRightRadius:Nc,boxShadow:Uq},p3=["TopLeft","TopRight","BottomLeft","BottomRight"],Vq=p3.length,OR=t=>typeof t=="string"?parseFloat(t):t,MR=t=>typeof t=="number"||We.test(t);function Wq(t,e,r,n,i,s){i?(t.opacity=fr(0,r.opacity!==void 0?r.opacity:1,Gq(n)),t.opacityExit=fr(e.opacity!==void 0?e.opacity:1,0,Kq(n))):s&&(t.opacity=fr(e.opacity!==void 0?e.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let a=0;a<Vq;a++){const o=`border${p3[a]}Radius`;let l=PR(e,o),u=PR(r,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||MR(l)===MR(u)?(t[o]=Math.max(fr(OR(l),OR(u),n),0),(bs.test(u)||bs.test(l))&&(t[o]+="%")):t[o]=u}(e.rotate||r.rotate)&&(t.rotate=fr(e.rotate||0,r.rotate||0,n))}function PR(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Gq=m3(0,.5,_M),Kq=m3(.5,.95,Tn);function m3(t,e,r){return n=>n<t?0:n>e?1:r(Qu(t,e,n))}function NR(t,e){t.min=e.min,t.max=e.max}function ci(t,e){NR(t.x,e.x),NR(t.y,e.y)}function FR(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function $R(t,e,r,n,i){return t-=e,t=Im(t,1/r,n),i!==void 0&&(t=Im(t,1/i,n)),t}function qq(t,e=0,r=1,n=.5,i,s=t,a=t){if(bs.test(e)&&(e=parseFloat(e),e=fr(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=fr(s.min,s.max,n);t===s&&(o-=e),t.min=$R(t.min,e,r,o,i),t.max=$R(t.max,e,r,o,i)}function UR(t,e,[r,n,i],s,a){qq(t,e[r],e[n],e[i],e.scale,s,a)}const zq=["x","scaleX","originX"],Yq=["y","scaleY","originY"];function BR(t,e,r,n){UR(t.x,e,zq,r?r.x:void 0,n?n.x:void 0),UR(t.y,e,Yq,r?r.y:void 0,n?n.y:void 0)}function jR(t){return t.translate===0&&t.scale===1}function g3(t){return jR(t.x)&&jR(t.y)}function HR(t,e){return t.min===e.min&&t.max===e.max}function Xq(t,e){return HR(t.x,e.x)&&HR(t.y,e.y)}function VR(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function v3(t,e){return VR(t.x,e.x)&&VR(t.y,e.y)}function WR(t){return ii(t.x)/ii(t.y)}function GR(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Zq{constructor(){this.members=[]}add(e){lx(this.members,e),e.scheduleRender()}remove(e){if(ux(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(i=>e===i);if(r===0)return!1;let n;for(let i=r;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){n=s;break}}return n?(this.promote(n),!0):!1}promote(e,r){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,r&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:n}=e;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Qq(t,e,r){let n="";const i=t.x.translate/e.x,s=t.y.translate/e.y,a=(r==null?void 0:r.z)||0;if((i||s||a)&&(n=`translate3d(${i}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),r){const{transformPerspective:u,rotate:c,rotateX:d,rotateY:h,skewX:f,skewY:p}=r;u&&(n=`perspective(${u}px) ${n}`),c&&(n+=`rotate(${c}deg) `),d&&(n+=`rotateX(${d}deg) `),h&&(n+=`rotateY(${h}deg) `),f&&(n+=`skewX(${f}deg) `),p&&(n+=`skewY(${p}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(n+=`scale(${o}, ${l})`),n||"none"}const Jq=(t,e)=>t.depth-e.depth;class ez{constructor(){this.children=[],this.isDirty=!1}add(e){lx(this.children,e),this.isDirty=!0}remove(e){ux(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Jq),this.isDirty=!1,this.children.forEach(e)}}function B0(t){const e=_n(t)?t.get():t;return GK(e)?e.toValue():e}function tz(t,e){const r=ys.now(),n=({timestamp:i})=>{const s=i-r;s>=e&&(Ya(n),t(s-e))};return Ut.read(n,!0),()=>Ya(n)}function rz(t){return t instanceof SVGElement&&t.tagName!=="svg"}function nz(t,e,r){const n=_n(t)?t:lh(t);return n.start(ox("",n,e,r)),n.animation}const go={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},od=typeof window<"u"&&window.MotionDebug!==void 0,nb=["","X","Y","Z"],iz={visibility:"hidden"},KR=1e3;let sz=0;function ib(t,e,r,n){const{latestValues:i}=e;i[t]&&(r[t]=i[t],e.setStaticValue(t,0),n&&(n[t]=0))}function b3(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const r=XM(e);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",Ut,!(i||s))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&b3(n)}function y3({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(a={},o=e==null?void 0:e()){this.id=sz++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,od&&(go.totalNodes=go.resolvedTargetDeltas=go.recalculatedProjection=0),this.nodes.forEach(lz),this.nodes.forEach(fz),this.nodes.forEach(pz),this.nodes.forEach(uz),od&&window.MotionDebug.record(go)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new ez)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new cx),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=rz(a),this.instance=a;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(u||l)&&(this.isLayoutDirty=!0),t){let d;const h=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=tz(h,250),U0.hasAnimatedSinceResize&&(U0.hasAnimatedSinceResize=!1,this.nodes.forEach(zR))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeTargetChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||c.getDefaultTransition()||yz,{onLayoutAnimationStart:g,onLayoutAnimationComplete:v}=c.getProps(),b=!this.targetLayout||!v3(this.targetLayout,p)||f,y=!h&&f;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||y||h&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,y);const T={...qT(m,"layout"),onPlay:g,onComplete:v};(c.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T)}else h||zR(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ya(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(mz),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&b3(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const d=this.path[c];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(qR);return}this.isUpdating||this.nodes.forEach(dz),this.isUpdating=!1,this.nodes.forEach(hz),this.nodes.forEach(az),this.nodes.forEach(oz),this.clearAllSnapshots();const o=ys.now();on.delta=Xa(0,1e3/60,o-on.timestamp),on.timestamp=o,on.isProcessing=!0,Yv.update.process(on),Yv.preRender.process(on),Yv.render.process(on),on.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,fx.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(cz),this.sharedNodes.forEach(gz)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ut.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ut.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Er(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o){const l=n(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!g3(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;a&&(o||mo(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),Ez(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:o}=this.options;if(!o)return Er();const l=o.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(_z))){const{scroll:c}=this.root;c&&(wu(l.x,c.offset.x),wu(l.y,c.offset.y))}return l}removeElementScroll(a){var o;const l=Er();if(ci(l,a),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return l;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:d,options:h}=c;c!==this.root&&d&&h.layoutScroll&&(d.wasRoot&&ci(l,a),wu(l.x,d.offset.x),wu(l.y,d.offset.y))}return l}applyTransform(a,o=!1){const l=Er();ci(l,a);for(let u=0;u<this.path.length;u++){const c=this.path[u];!o&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Au(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),mo(c.latestValues)&&Au(l,c.latestValues)}return mo(this.latestValues)&&Au(l,this.latestValues),l}removeTransform(a){const o=Er();ci(o,a);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!mo(u.latestValues))continue;t1(u.latestValues)&&u.updateSnapshot();const c=Er(),d=u.measurePageBox();ci(c,d),BR(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return mo(this.latestValues)&&BR(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==on.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=on.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Er(),this.relativeTargetOrigin=Er(),Hd(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),ci(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Er(),this.targetWithTransforms=Er()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Tq(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ci(this.target,this.layout.layoutBox),u3(this.target,this.targetDelta)):ci(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Er(),this.relativeTargetOrigin=Er(),Hd(this.relativeTargetOrigin,this.target,f.target),ci(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}od&&go.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||t1(this.parent.latestValues)||l3(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===on.timestamp&&(u=!1),u)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;ci(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;Lq(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Er());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(FR(this.prevProjectionDelta.x,this.projectionDelta.x),FR(this.prevProjectionDelta.y,this.projectionDelta.y)),jd(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!GR(this.projectionDelta.x,this.prevProjectionDelta.x)||!GR(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),od&&go.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Su(),this.projectionDelta=Su(),this.projectionDeltaWithTransform=Su()}setAnimationOrigin(a,o=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},d=Su();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=Er(),f=l?l.source:void 0,p=this.layout?this.layout.source:void 0,m=f!==p,g=this.getStack(),v=!g||g.members.length<=1,b=!!(m&&!v&&this.options.crossfade===!0&&!this.path.some(bz));this.animationProgress=0;let y;this.mixTargetDelta=T=>{const x=T/1e3;YR(d.x,a.x,x),YR(d.y,a.y,x),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Hd(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),vz(this.relativeTarget,this.relativeTargetOrigin,h,x),y&&Xq(this.relativeTarget,y)&&(this.isProjectionDirty=!1),y||(y=Er()),ci(y,this.relativeTarget)),m&&(this.animationValues=c,Wq(c,u,this.latestValues,x,b,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=x},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ya(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ut.update(()=>{U0.hasAnimatedSinceResize=!0,this.currentAnimation=nz(0,KR,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(KR),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:c}=a;if(!(!o||!l||!u)){if(this!==a&&this.layout&&u&&E3(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Er();const d=ii(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+d;const h=ii(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+h}ci(o,l),Au(o,c),jd(this.projectionDeltaWithTransform,this.layoutCorrected,o,c)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new Zq),this.sharedNodes.get(a).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&ib("z",a,u,this.animationValues);for(let c=0;c<nb.length;c++)ib(`rotate${nb[c]}`,a,u,this.animationValues),ib(`skew${nb[c]}`,a,u,this.animationValues);a.render();for(const c in u)a.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);a.scheduleRender()}getProjectionStyles(a){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return iz;const u={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=B0(a==null?void 0:a.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=B0(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!mo(this.latestValues)&&(m.transform=c?c({},""):"none",this.hasProjected=!1),m}const h=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=Qq(this.projectionDeltaWithTransform,this.treeScale,h),c&&(u.transform=c(h,u.transform));const{x:f,y:p}=this.projectionDelta;u.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,d.animationValues?u.opacity=d===this?(l=(o=h.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:u.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const m in km){if(h[m]===void 0)continue;const{correct:g,applyTo:v}=km[m],b=u.transform==="none"?h[m]:g(h[m],d);if(v){const y=v.length;for(let T=0;T<y;T++)u[v[T]]=b}else u[m]=b}return this.options.layoutId&&(u.pointerEvents=d===this?B0(a==null?void 0:a.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(qR),this.root.sharedNodes.clear()}}}function az(t){t.updateLayout()}function oz(t){var e;const r=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&r&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=t.layout,{animationType:s}=t.options,a=r.source!==t.layout.source;s==="size"?mi(d=>{const h=a?r.measuredBox[d]:r.layoutBox[d],f=ii(h);h.min=n[d].min,h.max=h.min+f}):E3(s,r.layoutBox,n)&&mi(d=>{const h=a?r.measuredBox[d]:r.layoutBox[d],f=ii(n[d]);h.max=h.min+f,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+f)});const o=Su();jd(o,n,r.layoutBox);const l=Su();a?jd(l,t.applyTransform(i,!0),r.measuredBox):jd(l,n,r.layoutBox);const u=!g3(o);let c=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:f}=d;if(h&&f){const p=Er();Hd(p,r.layoutBox,h.layoutBox);const m=Er();Hd(m,n,f.layoutBox),v3(p,m)||(c=!0),d.options.layoutRoot&&(t.relativeTarget=m,t.relativeTargetOrigin=p,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeTargetChanged:c})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function lz(t){od&&go.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function uz(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function cz(t){t.clearSnapshot()}function qR(t){t.clearMeasurements()}function dz(t){t.isLayoutDirty=!1}function hz(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function zR(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function fz(t){t.resolveTargetDelta()}function pz(t){t.calcProjection()}function mz(t){t.resetSkewAndRotation()}function gz(t){t.removeLeadSnapshot()}function YR(t,e,r){t.translate=fr(e.translate,0,r),t.scale=fr(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function XR(t,e,r,n){t.min=fr(e.min,r.min,n),t.max=fr(e.max,r.max,n)}function vz(t,e,r,n){XR(t.x,e.x,r.x,n),XR(t.y,e.y,r.y,n)}function bz(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const yz={duration:.45,ease:[.4,0,.1,1]},ZR=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),QR=ZR("applewebkit/")&&!ZR("chrome/")?Math.round:Tn;function JR(t){t.min=QR(t.min),t.max=QR(t.max)}function Ez(t){JR(t.x),JR(t.y)}function E3(t,e,r){return t==="position"||t==="preserve-aspect"&&!_q(WR(e),WR(r),.2)}function _z(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const Tz=y3({attachResizeListener:(t,e)=>Ws(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),sb={current:void 0},_3=y3({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!sb.current){const t=new Tz({});t.mount(window),t.setOptions({layoutScroll:!0}),sb.current=t}return sb.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),xz={pan:{Feature:Fq},drag:{Feature:Nq,ProjectionNode:_3,MeasureLayout:f3}};function eC(t,e){const r=e?"pointerenter":"pointerleave",n=e?"onHoverStart":"onHoverEnd",i=(s,a)=>{if(s.pointerType==="touch"||i3())return;const o=t.getProps();t.animationState&&o.whileHover&&t.animationState.setActive("whileHover",e);const l=o[n];l&&Ut.postRender(()=>l(s,a))};return Xs(t.current,r,i,{passive:!t.getProps()[n]})}class Sz extends ro{mount(){this.unmount=Ys(eC(this.node,!0),eC(this.node,!1))}unmount(){}}class wz extends ro{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ys(Ws(this.node.current,"focus",()=>this.onFocus()),Ws(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const T3=(t,e)=>e?t===e?!0:T3(t,e.parentElement):!1;function ab(t,e){if(!e)return;const r=new PointerEvent("pointer"+t);e(r,zg(r))}class Az extends ro{constructor(){super(...arguments),this.removeStartListeners=Tn,this.removeEndListeners=Tn,this.removeAccessibleListeners=Tn,this.startPointerPress=(e,r)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),s=Xs(window,"pointerup",(o,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:c,globalTapTarget:d}=this.node.getProps(),h=!d&&!T3(this.node.current,o.target)?c:u;h&&Ut.update(()=>h(o,l))},{passive:!(n.onTap||n.onPointerUp)}),a=Xs(window,"pointercancel",(o,l)=>this.cancelPress(o,l),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=Ys(s,a),this.startPress(e,r)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const a=o=>{o.key!=="Enter"||!this.checkPressEnd()||ab("up",(l,u)=>{const{onTap:c}=this.node.getProps();c&&Ut.postRender(()=>c(l,u))})};this.removeEndListeners(),this.removeEndListeners=Ws(this.node.current,"keyup",a),ab("down",(o,l)=>{this.startPress(o,l)})},r=Ws(this.node.current,"keydown",e),n=()=>{this.isPressing&&ab("cancel",(s,a)=>this.cancelPress(s,a))},i=Ws(this.node.current,"blur",n);this.removeAccessibleListeners=Ys(r,i)}}startPress(e,r){this.isPressing=!0;const{onTapStart:n,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&Ut.postRender(()=>n(e,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!i3()}cancelPress(e,r){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&Ut.postRender(()=>n(e,r))}mount(){const e=this.node.getProps(),r=Xs(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=Ws(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Ys(r,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const n1=new WeakMap,ob=new WeakMap,Rz=t=>{const e=n1.get(t.target);e&&e(t)},Cz=t=>{t.forEach(Rz)};function Iz({root:t,...e}){const r=t||document;ob.has(r)||ob.set(r,{});const n=ob.get(r),i=JSON.stringify(e);return n[i]||(n[i]=new IntersectionObserver(Cz,{root:t,...e})),n[i]}function kz(t,e,r){const n=Iz(e);return n1.set(t,r),n.observe(t),()=>{n1.delete(t),n.unobserve(t)}}const Lz={some:0,all:1};class Dz extends ro{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:n,amount:i="some",once:s}=e,a={root:r?r.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:Lz[i]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:d}=this.node.getProps(),h=u?c:d;h&&h(l)};return kz(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(Oz(e,r))&&this.startObserver()}unmount(){}}function Oz({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const Mz={inView:{Feature:Dz},tap:{Feature:Az},focus:{Feature:wz},hover:{Feature:Sz}},Pz={layout:{ProjectionNode:_3,MeasureLayout:f3}},px=R.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Xg=R.createContext({}),mx=typeof window<"u",x3=mx?R.useLayoutEffect:R.useEffect,S3=R.createContext({strict:!1});function Nz(t,e,r,n,i){var s,a;const{visualElement:o}=R.useContext(Xg),l=R.useContext(S3),u=R.useContext(Yg),c=R.useContext(px).reducedMotion,d=R.useRef();n=n||l.renderer,!d.current&&n&&(d.current=n(t,{visualState:e,parent:o,props:r,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:c}));const h=d.current,f=R.useContext(h3);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&Fz(d.current,r,i,f);const p=R.useRef(!1);R.useInsertionEffect(()=>{h&&p.current&&h.update(r,u)});const m=r[YM],g=R.useRef(!!m&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,m))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,m)));return x3(()=>{h&&(p.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),fx.render(h.render),g.current&&h.animationState&&h.animationState.animateChanges())}),R.useEffect(()=>{h&&(!g.current&&h.animationState&&h.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)===null||v===void 0||v.call(window,m)}),g.current=!1))}),h}function Fz(t,e,r,n){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:u}=e;t.projection=new r(t.latestValues,e["data-framer-portal-id"]?void 0:w3(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||o&&xu(o),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:n,layoutScroll:l,layoutRoot:u})}function w3(t){if(t)return t.options.allowProjection!==!1?t.projection:w3(t.parent)}function $z(t,e,r){return R.useCallback(n=>{n&&t.mount&&t.mount(n),e&&(n?e.mount(n):e.unmount()),r&&(typeof r=="function"?r(n):xu(r)&&(r.current=n))},[e])}function Zg(t){return Gg(t.animate)||KT.some(e=>sh(t[e]))}function A3(t){return!!(Zg(t)||t.variants)}function Uz(t,e){if(Zg(t)){const{initial:r,animate:n}=t;return{initial:r===!1||sh(r)?r:void 0,animate:sh(n)?n:void 0}}return t.inherit!==!1?e:{}}function Bz(t){const{initial:e,animate:r}=Uz(t,R.useContext(Xg));return R.useMemo(()=>({initial:e,animate:r}),[tC(e),tC(r)])}function tC(t){return Array.isArray(t)?t.join(" "):t}const rC={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ju={};for(const t in rC)Ju[t]={isEnabled:e=>rC[t].some(r=>!!e[r])};function jz(t){for(const e in t)Ju[e]={...Ju[e],...t[e]}}const Hz=Symbol.for("motionComponentSymbol");function Vz({preloadedFeatures:t,createVisualElement:e,useRender:r,useVisualState:n,Component:i}){t&&jz(t);function s(o,l){let u;const c={...R.useContext(px),...o,layoutId:Wz(o)},{isStatic:d}=c,h=Bz(o),f=n(o,d);if(!d&&mx){Gz();const p=Kz(c);u=p.MeasureLayout,h.visualElement=Nz(i,f,c,e,p.ProjectionNode)}return E.jsxs(Xg.Provider,{value:h,children:[u&&h.visualElement?E.jsx(u,{visualElement:h.visualElement,...c}):null,r(i,o,$z(f,h.visualElement,l),f,d,h.visualElement)]})}const a=R.forwardRef(s);return a[Hz]=i,a}function Wz({layoutId:t}){const e=R.useContext(hx).id;return e&&t!==void 0?e+"-"+t:t}function Gz(t,e){R.useContext(S3).strict}function Kz(t){const{drag:e,layout:r}=Ju;if(!e&&!r)return{};const n={...e,...r};return{MeasureLayout:e!=null&&e.isEnabled(t)||r!=null&&r.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const qz=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function gx(t){return typeof t!="string"||t.includes("-")?!1:!!(qz.indexOf(t)>-1||/[A-Z]/u.test(t))}function R3(t,{style:e,vars:r},n,i){Object.assign(t.style,e,i&&i.getProjectionStyles(n));for(const s in r)t.style.setProperty(s,r[s])}const C3=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function I3(t,e,r,n){R3(t,e,void 0,n);for(const i in e.attrs)t.setAttribute(C3.has(i)?i:dx(i),e.attrs[i])}function k3(t,{layout:e,layoutId:r}){return yl.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!km[t]||t==="opacity")}function vx(t,e,r){var n;const{style:i}=t,s={};for(const a in i)(_n(i[a])||e.style&&_n(e.style[a])||k3(a,t)||((n=r==null?void 0:r.getValue(a))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(s[a]=i[a]);return s}function L3(t,e,r){const n=vx(t,e,r);for(const i in t)if(_n(t[i])||_n(e[i])){const s=Zh.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[s]=t[i]}return n}function bx(t){const e=R.useRef(null);return e.current===null&&(e.current=t()),e.current}function zz({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:r},n,i,s){const a={latestValues:Yz(n,i,s,t),renderState:e()};return r&&(a.mount=o=>r(n,o,a)),a}const D3=t=>(e,r)=>{const n=R.useContext(Xg),i=R.useContext(Yg),s=()=>zz(t,e,n,i);return r?s():bx(s)};function Yz(t,e,r,n){const i={},s=n(t,{});for(const h in s)i[h]=B0(s[h]);let{initial:a,animate:o}=t;const l=Zg(t),u=A3(t);e&&u&&!l&&t.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let c=r?r.initial===!1:!1;c=c||a===!1;const d=c?o:a;if(d&&typeof d!="boolean"&&!Gg(d)){const h=Array.isArray(d)?d:[d];for(let f=0;f<h.length;f++){const p=WT(t,h[f]);if(p){const{transitionEnd:m,transition:g,...v}=p;for(const b in v){let y=v[b];if(Array.isArray(y)){const T=c?y.length-1:0;y=y[T]}y!==null&&(i[b]=y)}for(const b in m)i[b]=m[b]}}}return i}const yx=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),O3=()=>({...yx(),attrs:{}}),M3=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Xz={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Zz=Zh.length;function Qz(t,e,r){let n="",i=!0;for(let s=0;s<Zz;s++){const a=Zh[s],o=t[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||r){const u=M3(o,ex[a]);if(!l){i=!1;const c=Xz[a]||a;n+=`${c}(${u}) `}r&&(e[a]=u)}}return n=n.trim(),r?n=r(e,i?"":n):i&&(n="none"),n}function Ex(t,e,r){const{style:n,vars:i,transformOrigin:s}=t;let a=!1,o=!1;for(const l in e){const u=e[l];if(yl.has(l)){a=!0;continue}else if(AM(l)){i[l]=u;continue}else{const c=M3(u,ex[l]);l.startsWith("origin")?(o=!0,s[l]=c):n[l]=c}}if(e.transform||(a||r?n.transform=Qz(e,t.transform,r):n.transform&&(n.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:c=0}=s;n.transformOrigin=`${l} ${u} ${c}`}}function nC(t,e,r){return typeof t=="string"?t:We.transform(e+r*t)}function Jz(t,e,r){const n=nC(e,t.x,t.width),i=nC(r,t.y,t.height);return`${n} ${i}`}const eY={offset:"stroke-dashoffset",array:"stroke-dasharray"},tY={offset:"strokeDashoffset",array:"strokeDasharray"};function rY(t,e,r=1,n=0,i=!0){t.pathLength=1;const s=i?eY:tY;t[s.offset]=We.transform(-n);const a=We.transform(e),o=We.transform(r);t[s.array]=`${a} ${o}`}function _x(t,{attrX:e,attrY:r,attrScale:n,originX:i,originY:s,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...u},c,d){if(Ex(t,u,d),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:f,dimensions:p}=t;h.transform&&(p&&(f.transform=h.transform),delete h.transform),p&&(i!==void 0||s!==void 0||f.transform)&&(f.transformOrigin=Jz(p,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(h.x=e),r!==void 0&&(h.y=r),n!==void 0&&(h.scale=n),a!==void 0&&rY(h,a,o,l,!1)}const Tx=t=>typeof t=="string"&&t.toLowerCase()==="svg",nY={useVisualState:D3({scrapeMotionValuesFromProps:L3,createRenderState:O3,onMount:(t,e,{renderState:r,latestValues:n})=>{Ut.read(()=>{try{r.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),Ut.render(()=>{_x(r,n,Tx(e.tagName),t.transformTemplate),I3(e,r)})}})},iY={useVisualState:D3({scrapeMotionValuesFromProps:vx,createRenderState:yx})};function P3(t,e,r){for(const n in e)!_n(e[n])&&!k3(n,r)&&(t[n]=e[n])}function sY({transformTemplate:t},e){return R.useMemo(()=>{const r=yx();return Ex(r,e,t),Object.assign({},r.vars,r.style)},[e])}function aY(t,e){const r=t.style||{},n={};return P3(n,r,t),Object.assign(n,sY(t,e)),n}function oY(t,e){const r={},n=aY(t,e);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=n,r}const lY=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Lm(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||lY.has(t)}let N3=t=>!Lm(t);function uY(t){t&&(N3=e=>e.startsWith("on")?!Lm(e):t(e))}try{uY(require("@emotion/is-prop-valid").default)}catch{}function cY(t,e,r){const n={};for(const i in t)i==="values"&&typeof t.values=="object"||(N3(i)||r===!0&&Lm(i)||!e&&!Lm(i)||t.draggable&&i.startsWith("onDrag"))&&(n[i]=t[i]);return n}function dY(t,e,r,n){const i=R.useMemo(()=>{const s=O3();return _x(s,e,Tx(n),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};P3(s,t.style,t),i.style={...s,...i.style}}return i}function hY(t=!1){return(r,n,i,{latestValues:s},a)=>{const l=(gx(r)?dY:oY)(n,s,a,r),u=cY(n,typeof r=="string",t),c=r!==R.Fragment?{...u,...l,ref:i}:{},{children:d}=n,h=R.useMemo(()=>_n(d)?d.get():d,[d]);return R.createElement(r,{...c,children:h})}}function fY(t,e){return function(n,{forwardMotionProps:i}={forwardMotionProps:!1}){const a={...gx(n)?nY:iY,preloadedFeatures:t,useRender:hY(i),createVisualElement:e,Component:n};return Vz(a)}}const i1={current:null},F3={current:!1};function pY(){if(F3.current=!0,!!mx)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>i1.current=t.matches;t.addListener(e),e()}else i1.current=!1}function mY(t,e,r){for(const n in e){const i=e[n],s=r[n];if(_n(i))t.addValue(n,i);else if(_n(s))t.addValue(n,lh(i,{owner:t}));else if(s!==i)if(t.hasValue(n)){const a=t.getValue(n);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=t.getStaticValue(n);t.addValue(n,lh(a!==void 0?a:i,{owner:t}))}}for(const n in r)e[n]===void 0&&t.removeValue(n);return e}const iC=new WeakMap,gY=[...IM,bn,Za],vY=t=>gY.find(CM(t)),sC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class bY{scrapeMotionValuesFromProps(e,r,n){return{}}constructor({parent:e,props:r,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ZT,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=ys.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,Ut.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=r,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=Zg(r),this.isVariantNode=A3(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(r,{},this);for(const h in d){const f=d[h];l[h]!==void 0&&_n(f)&&f.set(l[h],!1)}}mount(e){this.current=e,iC.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),F3.current||pY(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:i1.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){iC.delete(this.current),this.projection&&this.projection.unmount(),Ya(this.notifyUpdate),Ya(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const r=this.features[e];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(e,r){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=yl.has(e),i=r.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Ut.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),s=r.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,r)),this.valueSubscriptions.set(e,()=>{i(),s(),a&&a(),r.owner&&r.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ju){const r=Ju[e];if(!r)continue;const{isEnabled:n,Feature:i}=r;if(!this.features[e]&&i&&n(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Er()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<sC.length;n++){const i=sC[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=e[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=mY(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){const n=this.values.get(e);r!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,r),this.values.set(e,r),this.latestValues[e]=r.get())}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&r!==void 0&&(n=lh(r===null?void 0:r,{owner:this}),this.addValue(e,n)),n}readValue(e,r){var n;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(SM(i)||xM(i))?i=parseFloat(i):!vY(i)&&Za.test(r)&&(i=FM(e,r)),this.setBaseTarget(e,_n(i)?i.get():i)),_n(i)?i.get():i}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var r;const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const a=WT(this.props,n,(r=this.presenceContext)===null||r===void 0?void 0:r.custom);a&&(i=a[e])}if(n&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!_n(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new cx),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}}class $3 extends bY{constructor(){super(...arguments),this.KeyframeResolver=$M}sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:n}){delete r[e],delete n[e]}}function yY(t){return window.getComputedStyle(t)}class EY extends $3{constructor(){super(...arguments),this.type="html",this.renderInstance=R3}readValueFromInstance(e,r){if(yl.has(r)){const n=tx(r);return n&&n.default||0}else{const n=yY(e),i=(AM(r)?n.getPropertyValue(r):n[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:r}){return c3(e,r)}build(e,r,n){Ex(e,r,n.transformTemplate)}scrapeMotionValuesFromProps(e,r,n){return vx(e,r,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;_n(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}class _Y extends $3{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Er}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(yl.has(r)){const n=tx(r);return n&&n.default||0}return r=C3.has(r)?r:dx(r),e.getAttribute(r)}scrapeMotionValuesFromProps(e,r,n){return L3(e,r,n)}build(e,r,n){_x(e,r,this.isSVGTag,n.transformTemplate)}renderInstance(e,r,n,i){I3(e,r,n,i)}mount(e){this.isSVGTag=Tx(e.tagName),super.mount(e)}}const TY=(t,e)=>gx(t)?new _Y(e):new EY(e,{allowProjection:t!==R.Fragment}),xY=fY({...hq,...Mz,...xz,...Pz},TY),SY=nG(xY);class wY extends R.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function AY({children:t,isPresent:e}){const r=R.useId(),n=R.useRef(null),i=R.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=R.useContext(px);return R.useInsertionEffect(()=>{const{width:a,height:o,top:l,left:u}=i.current;if(e||!n.current||!a||!o)return;n.current.dataset.motionPopId=r;const c=document.createElement("style");return s&&(c.nonce=s),document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),E.jsx(wY,{isPresent:e,childRef:n,sizeRef:i,children:R.cloneElement(t,{ref:n})})}const RY=({children:t,initial:e,isPresent:r,onExitComplete:n,custom:i,presenceAffectsLayout:s,mode:a})=>{const o=bx(CY),l=R.useId(),u=R.useCallback(d=>{o.set(d,!0);for(const h of o.values())if(!h)return;n&&n()},[o,n]),c=R.useMemo(()=>({id:l,initial:e,isPresent:r,custom:i,onExitComplete:u,register:d=>(o.set(d,!1),()=>o.delete(d))}),s?[Math.random(),u]:[r,u]);return R.useMemo(()=>{o.forEach((d,h)=>o.set(h,!1))},[r]),R.useEffect(()=>{!r&&!o.size&&n&&n()},[r]),a==="popLayout"&&(t=E.jsx(AY,{isPresent:r,children:t})),E.jsx(Yg.Provider,{value:c,children:t})};function CY(){return new Map}const xf=t=>t.key||"";function aC(t){const e=[];return R.Children.forEach(t,r=>{R.isValidElement(r)&&e.push(r)}),e}const IY=({children:t,exitBeforeEnter:e,custom:r,initial:n=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:a="sync"})=>{const o=R.useMemo(()=>aC(t),[t]),l=o.map(xf),u=R.useRef(!0),c=R.useRef(o),d=bx(()=>new Map),[h,f]=R.useState(o),[p,m]=R.useState(o);x3(()=>{u.current=!1,c.current=o;for(let b=0;b<p.length;b++){const y=xf(p[b]);l.includes(y)?d.delete(y):d.get(y)!==!0&&d.set(y,!1)}},[p,l.length,l.join("-")]);const g=[];if(o!==h){let b=[...o];for(let y=0;y<p.length;y++){const T=p[y],x=xf(T);l.includes(x)||(b.splice(y,0,T),g.push(T))}a==="wait"&&g.length&&(b=g),m(aC(b)),f(o);return}const{forceRender:v}=R.useContext(hx);return E.jsx(E.Fragment,{children:p.map(b=>{const y=xf(b),T=o===p||l.includes(y),x=()=>{if(d.has(y))d.set(y,!0);else return;let _=!0;d.forEach(S=>{S||(_=!1)}),_&&(v==null||v(),m(c.current),i&&i())};return E.jsx(RY,{isPresent:T,initial:!u.current||n?void 0:!1,custom:T?void 0:r,presenceAffectsLayout:s,mode:a,onExitComplete:T?void 0:x,children:b},y)})})};function s1(){return s1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},s1.apply(null,arguments)}var U3=["shift","alt","meta","mod","ctrl"],kY={esc:"escape",return:"enter",".":"period",",":"comma","-":"slash"," ":"space","`":"backquote","#":"backslash","+":"bracketright",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function Fa(t){return(t&&kY[t]||t||"").trim().toLowerCase().replace(/key|digit|numpad|arrow/,"")}function LY(t){return U3.includes(t)}function lb(t,e){return e===void 0&&(e=","),t.split(e)}function ub(t,e,r){e===void 0&&(e="+");var n=t.toLocaleLowerCase().split(e).map(function(a){return Fa(a)}),i={alt:n.includes("alt"),ctrl:n.includes("ctrl")||n.includes("control"),shift:n.includes("shift"),meta:n.includes("meta"),mod:n.includes("mod")},s=n.filter(function(a){return!U3.includes(a)});return s1({},i,{keys:s,description:r,hotkey:t})}(function(){typeof document<"u"&&(document.addEventListener("keydown",function(t){t.key!==void 0&&B3([Fa(t.key),Fa(t.code)])}),document.addEventListener("keyup",function(t){t.key!==void 0&&j3([Fa(t.key),Fa(t.code)])})),typeof window<"u"&&window.addEventListener("blur",function(){$a.clear()})})();var $a=new Set;function xx(t){return Array.isArray(t)}function DY(t,e){e===void 0&&(e=",");var r=xx(t)?t:t.split(e);return r.every(function(n){return $a.has(n.trim().toLowerCase())})}function B3(t){var e=Array.isArray(t)?t:[t];$a.has("meta")&&$a.forEach(function(r){return!LY(r)&&$a.delete(r.toLowerCase())}),e.forEach(function(r){return $a.add(r.toLowerCase())})}function j3(t){var e=Array.isArray(t)?t:[t];t==="meta"?$a.clear():e.forEach(function(r){return $a.delete(r.toLowerCase())})}function OY(t,e,r){(typeof r=="function"&&r(t,e)||r===!0)&&t.preventDefault()}function MY(t,e,r){return typeof r=="function"?r(t,e):r===!0||r===void 0}function PY(t){return H3(t,["input","textarea","select"])}function H3(t,e){e===void 0&&(e=!1);var r=t.target,n=t.composed,i=null;return NY(r)&&n?i=t.composedPath()[0]&&t.composedPath()[0].tagName:i=r&&r.tagName,xx(e)?!!(i&&e&&e.some(function(s){var a;return s.toLowerCase()===((a=i)==null?void 0:a.toLowerCase())})):!!(i&&e&&e)}function NY(t){return!!t.tagName&&!t.tagName.startsWith("-")&&t.tagName.includes("-")}function FY(t,e){return t.length===0&&e?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):e?t.some(function(r){return e.includes(r)})||t.includes("*"):!0}var $Y=function(e,r,n){n===void 0&&(n=!1);var i=r.alt,s=r.meta,a=r.mod,o=r.shift,l=r.ctrl,u=r.keys,c=e.key,d=e.code,h=e.ctrlKey,f=e.metaKey,p=e.shiftKey,m=e.altKey,g=Fa(d),v=c.toLowerCase();if(!(u!=null&&u.includes(g))&&!(u!=null&&u.includes(v))&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(g))return!1;if(!n){if(i===!m&&v!=="alt"||o===!p&&v!=="shift")return!1;if(a){if(!f&&!h)return!1}else if(s===!f&&v!=="meta"&&v!=="os"||l===!h&&v!=="ctrl"&&v!=="control")return!1}return u&&u.length===1&&(u.includes(v)||u.includes(g))?!0:u?DY(u):!u},UY=R.createContext(void 0),BY=function(){return R.useContext(UY)};function V3(t,e){return t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(t).length===Object.keys(e).length&&Object.keys(t).reduce(function(r,n){return r&&V3(t[n],e[n])},!0):t===e}var jY=R.createContext({hotkeys:[],enabledScopes:[],toggleScope:function(){},enableScope:function(){},disableScope:function(){}}),HY=function(){return R.useContext(jY)};function VY(t){var e=R.useRef(void 0);return V3(e.current,t)||(e.current=t),e.current}var oC=function(e){e.stopPropagation(),e.preventDefault(),e.stopImmediatePropagation()},WY=typeof window<"u"?R.useLayoutEffect:R.useEffect;function GY(t,e,r,n){var i=R.useState(null),s=i[0],a=i[1],o=R.useRef(!1),l=r instanceof Array?n instanceof Array?void 0:n:r,u=xx(t)?t.join(l==null?void 0:l.splitKey):t,c=r instanceof Array?r:n instanceof Array?n:void 0,d=R.useCallback(e,c??[]),h=R.useRef(d);c?h.current=d:h.current=e;var f=VY(l),p=HY(),m=p.enabledScopes,g=BY();return WY(function(){if(!((f==null?void 0:f.enabled)===!1||!FY(m,f==null?void 0:f.scopes))){var v=function(_,S){var A;if(S===void 0&&(S=!1),!(PY(_)&&!H3(_,f==null?void 0:f.enableOnFormTags))){if(s!==null){var k=s.getRootNode();if((k instanceof Document||k instanceof ShadowRoot)&&k.activeElement!==s&&!s.contains(k.activeElement)){oC(_);return}}(A=_.target)!=null&&A.isContentEditable&&!(f!=null&&f.enableOnContentEditable)||lb(u,f==null?void 0:f.splitKey).forEach(function(I){var C,N=ub(I,f==null?void 0:f.combinationKey);if($Y(_,N,f==null?void 0:f.ignoreModifiers)||(C=N.keys)!=null&&C.includes("*")){if(f!=null&&f.ignoreEventWhen!=null&&f.ignoreEventWhen(_)||S&&o.current)return;if(OY(_,N,f==null?void 0:f.preventDefault),!MY(_,N,f==null?void 0:f.enabled)){oC(_);return}h.current(_,N),S||(o.current=!0)}})}},b=function(_){_.key!==void 0&&(B3(Fa(_.code)),((f==null?void 0:f.keydown)===void 0&&(f==null?void 0:f.keyup)!==!0||f!=null&&f.keydown)&&v(_))},y=function(_){_.key!==void 0&&(j3(Fa(_.code)),o.current=!1,f!=null&&f.keyup&&v(_,!0))},T=s||(l==null?void 0:l.document)||document;return T.addEventListener("keyup",y),T.addEventListener("keydown",b),g&&lb(u,f==null?void 0:f.splitKey).forEach(function(x){return g.addHotkey(ub(x,f==null?void 0:f.combinationKey,f==null?void 0:f.description))}),function(){T.removeEventListener("keyup",y),T.removeEventListener("keydown",b),g&&lb(u,f==null?void 0:f.splitKey).forEach(function(x){return g.removeHotkey(ub(x,f==null?void 0:f.combinationKey,f==null?void 0:f.description))})}}},[s,u,f,m]),a}const KY="Left",qY="Right",zY="Up",YY="Down",Ru={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},a1={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},lC="mousemove",uC="mouseup",XY="touchend",ZY="touchmove",QY="touchstart";function JY(t,e,r,n){return t>e?r>0?qY:KY:n>0?YY:zY}function cC(t,e){if(e===0)return t;const r=Math.PI/180*e,n=t[0]*Math.cos(r)+t[1]*Math.sin(r),i=t[1]*Math.cos(r)-t[0]*Math.sin(r);return[n,i]}function eX(t,e){const r=c=>{const d="touches"in c;d&&c.touches.length>1||t((h,f)=>{f.trackMouse&&!d&&(document.addEventListener(lC,n),document.addEventListener(uC,a));const{clientX:p,clientY:m}=d?c.touches[0]:c,g=cC([p,m],f.rotationAngle);return f.onTouchStartOrOnMouseDown&&f.onTouchStartOrOnMouseDown({event:c}),Object.assign(Object.assign(Object.assign({},h),a1),{initial:g.slice(),xy:g,start:c.timeStamp||0})})},n=c=>{t((d,h)=>{const f="touches"in c;if(f&&c.touches.length>1)return d;if(c.timeStamp-d.start>h.swipeDuration)return d.swiping?Object.assign(Object.assign({},d),{swiping:!1}):d;const{clientX:p,clientY:m}=f?c.touches[0]:c,[g,v]=cC([p,m],h.rotationAngle),b=g-d.xy[0],y=v-d.xy[1],T=Math.abs(b),x=Math.abs(y),_=(c.timeStamp||0)-d.start,S=Math.sqrt(T*T+x*x)/(_||1),A=[b/(_||1),y/(_||1)],k=JY(T,x,b,y),I=typeof h.delta=="number"?h.delta:h.delta[k.toLowerCase()]||Ru.delta;if(T<I&&x<I&&!d.swiping)return d;const C={absX:T,absY:x,deltaX:b,deltaY:y,dir:k,event:c,first:d.first,initial:d.initial,velocity:S,vxvy:A};C.first&&h.onSwipeStart&&h.onSwipeStart(C),h.onSwiping&&h.onSwiping(C);let N=!1;return(h.onSwiping||h.onSwiped||h[`onSwiped${k}`])&&(N=!0),N&&h.preventScrollOnSwipe&&h.trackTouch&&c.cancelable&&c.preventDefault(),Object.assign(Object.assign({},d),{first:!1,eventData:C,swiping:!0})})},i=c=>{t((d,h)=>{let f;if(d.swiping&&d.eventData){if(c.timeStamp-d.start<h.swipeDuration){f=Object.assign(Object.assign({},d.eventData),{event:c}),h.onSwiped&&h.onSwiped(f);const p=h[`onSwiped${f.dir}`];p&&p(f)}}else h.onTap&&h.onTap({event:c});return h.onTouchEndOrOnMouseUp&&h.onTouchEndOrOnMouseUp({event:c}),Object.assign(Object.assign(Object.assign({},d),a1),{eventData:f})})},s=()=>{document.removeEventListener(lC,n),document.removeEventListener(uC,a)},a=c=>{s(),i(c)},o=(c,d)=>{let h=()=>{};if(c&&c.addEventListener){const f=Object.assign(Object.assign({},Ru.touchEventOptions),d.touchEventOptions),p=[[QY,r,f],[ZY,n,Object.assign(Object.assign({},f),d.preventScrollOnSwipe?{passive:!1}:{})],[XY,i,f]];p.forEach(([m,g,v])=>c.addEventListener(m,g,v)),h=()=>p.forEach(([m,g])=>c.removeEventListener(m,g))}return h},u={ref:c=>{c!==null&&t((d,h)=>{if(d.el===c)return d;const f={};return d.el&&d.el!==c&&d.cleanUpTouch&&(d.cleanUpTouch(),f.cleanUpTouch=void 0),h.trackTouch&&c&&(f.cleanUpTouch=o(c,h)),Object.assign(Object.assign(Object.assign({},d),{el:c}),f)})}};return e.trackMouse&&(u.onMouseDown=r),[u,o]}function tX(t,e,r,n){return!e.trackTouch||!t.el?(t.cleanUpTouch&&t.cleanUpTouch(),Object.assign(Object.assign({},t),{cleanUpTouch:void 0})):t.cleanUpTouch?e.preventScrollOnSwipe!==r.preventScrollOnSwipe||e.touchEventOptions.passive!==r.touchEventOptions.passive?(t.cleanUpTouch(),Object.assign(Object.assign({},t),{cleanUpTouch:n(t.el,e)})):t:Object.assign(Object.assign({},t),{cleanUpTouch:n(t.el,e)})}function rX(t){const{trackMouse:e}=t,r=R.useRef(Object.assign({},a1)),n=R.useRef(Object.assign({},Ru)),i=R.useRef(Object.assign({},n.current));i.current=Object.assign({},n.current),n.current=Object.assign(Object.assign({},Ru),t);let s;for(s in Ru)n.current[s]===void 0&&(n.current[s]=Ru[s]);const[a,o]=R.useMemo(()=>eX(l=>r.current=l(r.current,n.current),{trackMouse:e}),[e]);return r.current=tX(r.current,n.current,i.current,o),a}const nX=()=>{qh(t=>t.map(e=>({...e,status:"read"})))},iX=({info:t,refreshArticleList:e,markAllAsRead:r})=>{const{isArticleListReady:n}=oe(Ct),{showStatus:i}=oe(Lt),{polyglot:s}=oe(St),{fetchAppData:a}=Vg(),o=async()=>{try{await r(),nX(),await a(),Or.success({title:s.t("article_list.mark_all_as_read_success")})}catch(u){console.error("Failed to mark all as read: ",u),Or.error({title:s.t("article_list.mark_all_as_read_error"),content:u.message})}},l=u=>{Zr({showStatus:u})};return E.jsxs("div",{className:"entry-panel",children:[E.jsx(pD,{focusLock:!0,title:s.t("article_list.mark_all_as_read_confirm"),onOk:o,children:E.jsx(Mr,{mini:!0,content:s.t("article_list.mark_all_as_read_tooltip"),children:E.jsx(ht,{icon:E.jsx(ED,{}),shape:"circle",style:{visibility:["starred","history"].includes(t.from)?"hidden":"visible"}})})}),E.jsx(Pa.Group,{style:{visibility:t.from==="history"?"hidden":"visible"},type:"button",value:i,options:[{label:s.t("article_list.filter_status_all"),value:"all"},{label:s.t("article_list.filter_status_unread"),value:"unread"}],onChange:l}),E.jsx(Mr,{mini:!0,content:s.t("article_list.refresh_tooltip"),children:E.jsx(ht,{icon:E.jsx(bl,{}),loading:!n,shape:"circle",onClick:e})})]})},Sx=bc({isPhotoSliderVisible:!1,selectedIndex:0}),sX=Dt(Sx,"isPhotoSliderVisible"),aX=Dt(Sx,"selectedIndex"),W3=()=>{const{isPhotoSliderVisible:t,selectedIndex:e}=oe(Sx);return{isPhotoSliderVisible:t,setIsPhotoSliderVisible:sX,selectedIndex:e,setSelectedIndex:aX}},G3=()=>R.useContext(nH),K3=t=>{const r=new DOMParser().parseFromString(t,"text/html").querySelectorAll("img");return Array.from(r).map(n=>n.getAttribute("src"))},q3=t=>{var s;const e=new DOMParser().parseFromString(t.content,"text/html"),r=e.querySelector("img");let n=r==null?void 0:r.getAttribute("src"),i=!1;if(!n){const a=e.querySelector("video");if(a)n=a.getAttribute("poster"),i=!0;else if((s=t.enclosures)!=null&&s[0]){const o=t.enclosures[0];(o.mime_type.toLowerCase().startsWith("image/")||/\.(jpg|jpeg|png|gif)$/i.test(o.url))&&(n=o.url),i=(n==null?void 0:n.startsWith("https://i.ytimg.com"))??!1}}return{...t,coverSource:n,isVideo:i}},z3=()=>{const{activeContent:t}=oe(Ct),{polyglot:e}=oe(St),r=oe(uT),n=oe(Kh),i=oe(kO),s=oe(LO),{entryListRef:a,handleEntryClick:o}=G3(),l=()=>{if(a.current){const P=a.current.el.querySelector(".card-wrapper.selected");P&&P.scrollIntoView({behavior:"smooth",block:"nearest"})}},{isPhotoSliderVisible:u,setIsPhotoSliderVisible:c,setSelectedIndex:d}=W3(),{setSettingsModalVisible:h,setSettingsTabsActiveTab:f}=Xh(),p=P=>(...V)=>{if(t)return P(...V)},m=p(()=>{Mi(null),a.current&&a.current.contentWrapperEl.focus()}),g=()=>{i?(o(i),setTimeout(()=>l(),$d)):et.info(e.t("actions.no_previous_article"))},v=()=>{s?(o(s),setTimeout(()=>l(),$d)):et.info(e.t("actions.no_next_article"))},b=(P,V,M)=>(V==="prev"?M.slice(0,P).toReversed():M.slice(P+1)).find(X=>X.status==="unread"),y=P=>{const V=b(r,P,n);V?(o(V),setTimeout(l,$d)):P==="prev"?et.info(e.t("actions.no_previous_unread_article")):et.info(e.t("actions.no_next_unread_article"))},T=()=>y("prev"),x=()=>y("next"),_=p(()=>{window.open(t.url,"_blank")}),S=p(P=>{P()}),A=p(P=>{P()}),k=()=>{f("5"),h(!0)},I=p(P=>{P()}),C=p(P=>{P()}),N=p(()=>{!K3(t.content).length||u||(d(0),c(!0))});return{exitDetailView:m,fetchOriginalArticle:S,navigateToNextArticle:v,navigateToNextUnreadArticle:x,navigateToPreviousArticle:g,navigateToPreviousUnreadArticle:T,openLinkExternally:_,openPhotoSlider:N,saveToThirdPartyServices:A,showHotkeysSettings:k,toggleReadStatus:I,toggleStarStatus:C}},Y3=R.memo(({commonButtons:t,hasIntegrations:e,prevContent:r,nextContent:n,navigateToPreviousArticle:i,navigateToNextArticle:s,handleSaveToThirdPartyServices:a,polyglot:o})=>E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"left-side",children:[t.close,E.jsx(Mr,{mini:!0,content:o.t("article_card.previous_tooltip"),children:E.jsx(ht,{disabled:!r,icon:E.jsx(dT,{}),shape:"circle",onClick:i})}),E.jsx(Mr,{mini:!0,content:o.t("article_card.next_tooltip"),children:E.jsx(ht,{disabled:!n,icon:E.jsx(hT,{}),shape:"circle",onClick:s})})]}),E.jsxs("div",{className:"right-side",children:[t.status,t.star,t.fetch,e&&E.jsx(Mr,{mini:!0,content:o.t("article_card.save_to_third_party_services_tooltip"),children:E.jsx(ht,{icon:E.jsx(yT,{}),shape:"circle",onClick:a})}),t.more]})]}));Y3.displayName="DesktopButtons";const X3=R.memo(({commonButtons:t})=>E.jsxs("div",{className:"mobile-buttons",children:[t.status,t.star,t.close,t.fetch,t.more]}));X3.displayName="MobileButtons";const dC=()=>{var I;const{activeContent:t}=oe(Ct),{hasIntegrations:e}=oe(_r),{polyglot:r}=oe(St),{articleWidth:n,edgeToEdgeImages:i,fontSize:s,fontFamily:a,titleAlignment:o}=oe(Lt),l=oe(LO),u=oe(kO),[c,d]=R.useState(!1),[h,f]=R.useState(!1),{handleFetchContent:p,handleSaveToThirdPartyServices:m,handleToggleStarred:g,handleToggleStatus:v}=Pg(),{exitDetailView:b,navigateToNextArticle:y,navigateToPreviousArticle:T}=z3(),{isBelowMedium:x}=$i(),_=t.status==="unread",S=t.starred,A=[{label:r.t("appearance.font_family_system"),value:"system-ui"},{label:"Sans-serif",value:"sans-serif"},{label:"Serif",value:"serif"},{label:"Fira Sans",value:"'Fira Sans', sans-serif"},{label:"Open Sans",value:"'Open Sans', sans-serif"},{label:"Source Sans Pro",value:"'Source Sans Pro', sans-serif"},{label:"Source Serif Pro",value:"'Source Serif Pro', serif"},{label:r.t("appearance.font_family_noto_sans"),value:"'Noto Sans SC', sans-serif"},{label:r.t("appearance.font_family_noto_serif"),value:"'Noto Serif SC', serif"},{label:r.t("appearance.font_family_lxgw_wenkai"),value:"'LXGW WenKai Screen', sans-serif"}],k={status:E.jsx(Mr,{mini:!0,content:_?r.t("article_card.mark_as_read_tooltip"):r.t("article_card.mark_as_unread_tooltip"),children:E.jsx(ht,{icon:_?E.jsx(Fg,{}):E.jsx(Bg,{}),shape:"circle",onClick:()=>v(t)})}),star:E.jsx(Mr,{mini:!0,content:S?r.t("article_card.unstar_tooltip"):r.t("article_card.star_tooltip"),children:E.jsx(ht,{icon:S?E.jsx(_D,{style:{color:"#ffcd00"}}):E.jsx(Ug,{}),shape:"circle",onClick:()=>g(t)})}),close:E.jsx(Mr,{mini:!0,content:r.t("article_card.close_tooltip"),children:E.jsx(ht,{icon:E.jsx(n9,{}),shape:"circle",onClick:()=>b()})}),fetch:E.jsx(Mr,{mini:!0,content:r.t("article_card.fetch_original_tooltip"),children:E.jsx(ht,{disabled:h,icon:E.jsx(pT,{}),shape:"circle",onClick:async()=>{await p(),f(!0)}})}),more:E.jsx(V_,{popupVisible:c,position:"br",trigger:"click",triggerProps:{className:"settings-dropdown"},droplist:E.jsxs(un,{children:[e&&x&&E.jsxs(E.Fragment,{children:[E.jsx(un.Item,{onClick:m,children:E.jsx("span",{children:r.t("article_card.save_to_third_party_services_tooltip")})},"save_to_third_party_services"),E.jsx(Rn,{style:{margin:"4px 0"}})]}),E.jsx(un.Item,{children:E.jsxs("div",{className:"settings-menu-item",children:[E.jsx("span",{children:r.t("appearance.title_alignment_label")}),E.jsxs(Pa.Group,{name:"title-alignment",type:"button",value:o,onChange:C=>Zr({titleAlignment:C}),children:[E.jsx(Pa,{value:"left",children:E.jsx(TT,{})}),E.jsx(Pa,{value:"center",children:E.jsx(_T,{})})]})]})},"title-alignment"),x&&E.jsx(un.Item,{children:E.jsxs("div",{className:"settings-menu-item",children:[E.jsx("span",{children:r.t("appearance.edge_to_edge_images_label")}),E.jsx(vs,{checked:i,size:"small",onChange:C=>Zr({edgeToEdgeImages:C})})]})},"edge-to-edge-images"),E.jsx(un.SubMenu,{triggerProps:{className:"font-family-submenu"},title:E.jsxs("div",{className:"settings-menu-item",children:[E.jsx("span",{children:r.t("appearance.font_family_label")}),E.jsx("span",{children:(I=A.find(C=>C.value===a))==null?void 0:I.label})]}),children:A.map(({label:C,value:N})=>E.jsx(un.Item,{onClick:()=>Zr({fontFamily:N}),children:E.jsxs("div",{className:"settings-menu-item",children:[C,N===a&&E.jsx(ED,{})]})},N))},"font-family"),E.jsx(un.Item,{children:E.jsxs("div",{className:"settings-menu-item",onClick:C=>C.stopPropagation(),children:[E.jsx("span",{children:r.t("appearance.font_size_label")}),E.jsx(Ey,{max:1.25,min:.75,size:"small",step:.05,style:{width:90},suffix:"rem",value:s,onChange:C=>Zr({fontSize:C})})]})},"font-size"),E.jsx(un.Item,{children:E.jsxs("div",{className:"settings-menu-item",onClick:C=>C.stopPropagation(),children:[E.jsx("span",{children:r.t("appearance.article_width_label")}),E.jsx(Ey,{max:90,min:60,size:"small",step:10,style:{width:90},suffix:"%",value:n,onChange:C=>Zr({articleWidth:C})})]})},"article-width")]}),onVisibleChange:d,children:E.jsx(ht,{icon:E.jsx($g,{}),shape:"circle"})})};return R.useEffect(()=>{f(!1)},[t]),E.jsx("div",{className:`action-buttons ${x?"mobile":""}`,children:x?E.jsx(X3,{commonButtons:k}):E.jsx(Y3,{commonButtons:k,handleSaveToThirdPartyServices:m,hasIntegrations:e,navigateToNextArticle:y,navigateToPreviousArticle:T,nextContent:l,polyglot:r,prevContent:u})})};var oX=Object.create,Z3=Object.defineProperty,lX=Object.getOwnPropertyDescriptor,uX=Object.getOwnPropertyNames,cX=Object.getPrototypeOf,dX=Object.prototype.hasOwnProperty,Q3=function(t,e){return function(){return t&&(e=t(t=0)),e}},Kn=function(t,e){return function(){return e||t((e={exports:{}}).exports,e),e.exports}},hX=function(t,e,r,n){if(e&&typeof e=="object"||typeof e=="function")for(var i=uX(e),s=0,a=i.length,o;s<a;s++)o=i[s],!dX.call(t,o)&&o!==r&&Z3(t,o,{get:(function(l){return e[l]}).bind(null,o),enumerable:!(n=lX(e,o))||n.enumerable});return t},Ui=function(t,e,r){return r=t!=null?oX(cX(t)):{},hX(!t||!t.__esModule?Z3(r,"default",{value:t,enumerable:!0}):r,t)},ws=Kn(function(t,e){var r;typeof window<"u"?r=window:typeof global<"u"?r=global:typeof self<"u"?r=self:r={},e.exports=r});function El(t,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](t):El(t,e)}var _l=Q3(function(){_l()});function wx(t){"@swc/helpers - typeof";return t&&typeof Symbol<"u"&&t.constructor===Symbol?"symbol":typeof t}var Ax=Q3(function(){}),J3=Kn(function(t,e){var r=Array.prototype.slice;e.exports=n;function n(i,s){for(("length"in i)||(i=[i]),i=r.call(i);i.length;){var a=i.shift(),o=s(a);if(o)return o;a.childNodes&&a.childNodes.length&&(i=r.call(a.childNodes).concat(i))}}}),fX=Kn(function(t,e){_l(),e.exports=r;function r(n,i){if(!El(this,r))return new r(n,i);this.data=n,this.nodeValue=n,this.length=n.length,this.ownerDocument=i||null}r.prototype.nodeType=8,r.prototype.nodeName="#comment",r.prototype.toString=function(){return"[object Comment]"}}),pX=Kn(function(t,e){_l(),e.exports=r;function r(n,i){if(!El(this,r))return new r(n);this.data=n||"",this.length=this.data.length,this.ownerDocument=i||null}r.prototype.type="DOMTextNode",r.prototype.nodeType=3,r.prototype.nodeName="#text",r.prototype.toString=function(){return this.data},r.prototype.replaceData=function(n,i,s){var a=this.data,o=a.substring(0,n),l=a.substring(n+i,a.length);this.data=o+s+l,this.length=this.data.length}}),eP=Kn(function(t,e){e.exports=r;function r(n){var i=this,s=n.type;n.target||(n.target=i),i.listeners||(i.listeners={});var a=i.listeners[s];if(a)return a.forEach(function(o){n.currentTarget=i,typeof o=="function"?o(n):o.handleEvent(n)});i.parentNode&&i.parentNode.dispatchEvent(n)}}),tP=Kn(function(t,e){e.exports=r;function r(n,i){var s=this;s.listeners||(s.listeners={}),s.listeners[n]||(s.listeners[n]=[]),s.listeners[n].indexOf(i)===-1&&s.listeners[n].push(i)}}),rP=Kn(function(t,e){e.exports=r;function r(n,i){var s=this;if(s.listeners&&s.listeners[n]){var a=s.listeners[n],o=a.indexOf(i);o!==-1&&a.splice(o,1)}}}),mX=Kn(function(t,e){Ax(),e.exports=n;var r=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"];function n(h){switch(h.nodeType){case 3:return c(h.data);case 8:return"<!--"+h.data+"-->";default:return i(h)}}function i(h){var f=[],p=h.tagName;return h.namespaceURI==="http://www.w3.org/1999/xhtml"&&(p=p.toLowerCase()),f.push("<"+p+u(h)+o(h)),r.indexOf(p)>-1?f.push(" />"):(f.push(">"),h.childNodes.length?f.push.apply(f,h.childNodes.map(n)):h.textContent||h.innerText?f.push(c(h.textContent||h.innerText)):h.innerHTML&&f.push(h.innerHTML),f.push("</"+p+">")),f.join("")}function s(h,f){var p=wx(h[f]);return f==="style"&&Object.keys(h.style).length>0?!0:h.hasOwnProperty(f)&&(p==="string"||p==="boolean"||p==="number")&&f!=="nodeName"&&f!=="className"&&f!=="tagName"&&f!=="textContent"&&f!=="innerText"&&f!=="namespaceURI"&&f!=="innerHTML"}function a(h){if(typeof h=="string")return h;var f="";return Object.keys(h).forEach(function(p){var m=h[p];p=p.replace(/[A-Z]/g,function(g){return"-"+g.toLowerCase()}),f+=p+":"+m+";"}),f}function o(h){var f=h.dataset,p=[];for(var m in f)p.push({name:"data-"+m,value:f[m]});return p.length?l(p):""}function l(h){var f=[];return h.forEach(function(p){var m=p.name,g=p.value;m==="style"&&(g=a(g)),f.push(m+'="'+d(g)+'"')}),f.length?" "+f.join(" "):""}function u(h){var f=[];for(var p in h)s(h,p)&&f.push({name:p,value:h[p]});for(var m in h._attributes)for(var g in h._attributes[m]){var v=h._attributes[m][g],b=(v.prefix?v.prefix+":":"")+g;f.push({name:b,value:v.value})}return h.className&&f.push({name:"class",value:h.className}),f.length?l(f):""}function c(h){var f="";return typeof h=="string"?f=h:h&&(f=h.toString()),f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function d(h){return c(h).replace(/"/g,"&quot;")}}),nP=Kn(function(t,e){_l();var r=J3(),n=eP(),i=tP(),s=rP(),a=mX(),o="http://www.w3.org/1999/xhtml";e.exports=l;function l(u,c,d){if(!El(this,l))return new l(u);var h=d===void 0?o:d||null;this.tagName=h===o?String(u).toUpperCase():u,this.nodeName=this.tagName,this.className="",this.dataset={},this.childNodes=[],this.parentNode=null,this.style={},this.ownerDocument=c||null,this.namespaceURI=h,this._attributes={},this.tagName==="INPUT"&&(this.type="text")}l.prototype.type="DOMElement",l.prototype.nodeType=1,l.prototype.appendChild=function(u){return u.parentNode&&u.parentNode.removeChild(u),this.childNodes.push(u),u.parentNode=this,u},l.prototype.replaceChild=function(u,c){u.parentNode&&u.parentNode.removeChild(u);var d=this.childNodes.indexOf(c);return c.parentNode=null,this.childNodes[d]=u,u.parentNode=this,c},l.prototype.removeChild=function(u){var c=this.childNodes.indexOf(u);return this.childNodes.splice(c,1),u.parentNode=null,u},l.prototype.insertBefore=function(u,c){u.parentNode&&u.parentNode.removeChild(u);var d=c==null?-1:this.childNodes.indexOf(c);return d>-1?this.childNodes.splice(d,0,u):this.childNodes.push(u),u.parentNode=this,u},l.prototype.setAttributeNS=function(u,c,d){var h=null,f=c,p=c.indexOf(":");if(p>-1&&(h=c.substr(0,p),f=c.substr(p+1)),this.tagName==="INPUT"&&c==="type")this.type=d;else{var m=this._attributes[u]||(this._attributes[u]={});m[f]={value:d,prefix:h}}},l.prototype.getAttributeNS=function(u,c){var d=this._attributes[u],h=d&&d[c]&&d[c].value;return this.tagName==="INPUT"&&c==="type"?this.type:typeof h!="string"?null:h},l.prototype.removeAttributeNS=function(u,c){var d=this._attributes[u];d&&delete d[c]},l.prototype.hasAttributeNS=function(u,c){var d=this._attributes[u];return!!d&&c in d},l.prototype.setAttribute=function(u,c){return this.setAttributeNS(null,u,c)},l.prototype.getAttribute=function(u){return this.getAttributeNS(null,u)},l.prototype.removeAttribute=function(u){return this.removeAttributeNS(null,u)},l.prototype.hasAttribute=function(u){return this.hasAttributeNS(null,u)},l.prototype.removeEventListener=s,l.prototype.addEventListener=i,l.prototype.dispatchEvent=n,l.prototype.focus=function(){},l.prototype.toString=function(){return a(this)},l.prototype.getElementsByClassName=function(u){var c=u.split(" "),d=[];return r(this,function(h){if(h.nodeType===1){var f=h.className||"",p=f.split(" ");c.every(function(m){return p.indexOf(m)!==-1})&&d.push(h)}}),d},l.prototype.getElementsByTagName=function(u){u=u.toLowerCase();var c=[];return r(this.childNodes,function(d){d.nodeType===1&&(u==="*"||d.tagName.toLowerCase()===u)&&c.push(d)}),c},l.prototype.contains=function(u){return r(this,function(c){return u===c})||!1}}),gX=Kn(function(t,e){_l();var r=nP();e.exports=n;function n(i){if(!El(this,n))return new n;this.childNodes=[],this.parentNode=null,this.ownerDocument=i||null}n.prototype.type="DocumentFragment",n.prototype.nodeType=11,n.prototype.nodeName="#document-fragment",n.prototype.appendChild=r.prototype.appendChild,n.prototype.replaceChild=r.prototype.replaceChild,n.prototype.removeChild=r.prototype.removeChild,n.prototype.toString=function(){return this.childNodes.map(function(i){return String(i)}).join("")}}),vX=Kn(function(t,e){e.exports=r;function r(n){}r.prototype.initEvent=function(n,i,s){this.type=n,this.bubbles=i,this.cancelable=s},r.prototype.preventDefault=function(){}}),bX=Kn(function(t,e){_l();var r=J3(),n=fX(),i=pX(),s=nP(),a=gX(),o=vX(),l=eP(),u=tP(),c=rP();e.exports=d;function d(){if(!El(this,d))return new d;this.head=this.createElement("head"),this.body=this.createElement("body"),this.documentElement=this.createElement("html"),this.documentElement.appendChild(this.head),this.documentElement.appendChild(this.body),this.childNodes=[this.documentElement],this.nodeType=9}var h=d.prototype;h.createTextNode=function(f){return new i(f,this)},h.createElementNS=function(f,p){var m=f===null?null:String(f);return new s(p,this,m)},h.createElement=function(f){return new s(f,this)},h.createDocumentFragment=function(){return new a(this)},h.createEvent=function(f){return new o(f)},h.createComment=function(f){return new n(f,this)},h.getElementById=function(f){f=String(f);var p=r(this.childNodes,function(m){if(String(m.id)===f)return m});return p||null},h.getElementsByClassName=s.prototype.getElementsByClassName,h.getElementsByTagName=s.prototype.getElementsByTagName,h.contains=s.prototype.contains,h.removeEventListener=c,h.addEventListener=u,h.dispatchEvent=l}),yX=Kn(function(t,e){var r=bX();e.exports=new r}),EX=Kn(function(t,e){var r=typeof global<"u"?global:typeof window<"u"?window:{},n=yX(),i;typeof document<"u"?i=document:(i=r["__GLOBAL_DOCUMENT_CACHE@4"],i||(i=r["__GLOBAL_DOCUMENT_CACHE@4"]=n)),e.exports=i});function _X(t){if(Array.isArray(t))return t}function TX(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],i=!0,s=!1,a,o;try{for(r=r.call(t);!(i=(a=r.next()).done)&&(n.push(a.value),!(e&&n.length===e));i=!0);}catch(l){s=!0,o=l}finally{try{!i&&r.return!=null&&r.return()}finally{if(s)throw o}}return n}}function xX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o1(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function iP(t,e){if(t){if(typeof t=="string")return o1(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(r);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o1(t,e)}}function Qs(t,e){return _X(t)||TX(t,e)||iP(t,e)||xX()}var Vd=Ui(ws()),uh=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,r=t==="x"?e:e&3|8;return r.toString(16)})},sP=function(){return("000000"+(Math.random()*Math.pow(36,6)<<0).toString(36)).slice(-6)},ma=function(t){if(t&&typeof t.nodeName<"u")return t.muxId||(t.muxId=sP()),t.muxId;var e;try{e=document.querySelector(t)}catch{}return e&&!e.muxId&&(e.muxId=t),(e==null?void 0:e.muxId)||t},l1=function(t){var e;t&&typeof t.nodeName<"u"?(e=t,t=ma(e)):e=document.querySelector(t);var r=e&&e.nodeName?e.nodeName.toLowerCase():"";return[e,t,r]};function SX(t){if(Array.isArray(t))return o1(t)}function wX(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function AX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vi(t){return SX(t)||wX(t)||iP(t)||AX()}var Bo={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},RX=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3,r,n,i,s,a,o=[console,t],l=(r=console.trace).bind.apply(r,Vi(o)),u=(n=console.info).bind.apply(n,Vi(o)),c=(i=console.debug).bind.apply(i,Vi(o)),d=(s=console.warn).bind.apply(s,Vi(o)),h=(a=console.error).bind.apply(a,Vi(o)),f=e;return{trace:function(){for(var p=arguments.length,m=new Array(p),g=0;g<p;g++)m[g]=arguments[g];if(!(f>Bo.TRACE))return l.apply(void 0,Vi(m))},debug:function(){for(var p=arguments.length,m=new Array(p),g=0;g<p;g++)m[g]=arguments[g];if(!(f>Bo.DEBUG))return c.apply(void 0,Vi(m))},info:function(){for(var p=arguments.length,m=new Array(p),g=0;g<p;g++)m[g]=arguments[g];if(!(f>Bo.INFO))return u.apply(void 0,Vi(m))},warn:function(){for(var p=arguments.length,m=new Array(p),g=0;g<p;g++)m[g]=arguments[g];if(!(f>Bo.WARN))return d.apply(void 0,Vi(m))},error:function(){for(var p=arguments.length,m=new Array(p),g=0;g<p;g++)m[g]=arguments[g];if(!(f>Bo.ERROR))return h.apply(void 0,Vi(m))},get level(){return f},set level(p){p!==this.level&&(f=p??e)}}},ir=RX("[mux]"),cb=Ui(ws());function u1(){var t=cb.default.doNotTrack||cb.default.navigator&&cb.default.navigator.doNotTrack;return t==="1"}var CX=Ui(ws()),IX={now:function(){var t=CX.default.performance,e=t&&t.timing,r=e&&e.navigationStart,n=typeof r=="number"&&typeof t.now=="function"?r+t.now():Date.now();return Math.round(n)}},Nr=IX;function qe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}_l();function rn(t,e){if(!El(t,e))throw new TypeError("Cannot call a class as a function")}function kX(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function As(t,e,r){return e&&kX(t.prototype,e),t}function fe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c1(t,e){return c1=Object.setPrototypeOf||function(r,n){return r.__proto__=n,r},c1(t,e)}function LX(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c1(t,e)}function Dm(t){return Dm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Dm(t)}function DX(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}Ax();function OX(t,e){return e&&(wx(e)==="object"||typeof e=="function")?e:qe(t)}function MX(t){var e=DX();return function(){var r=Dm(t),n;if(e){var i=Dm(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return OX(this,n)}}var ki=function(t){return ch(t)[0]},ch=function(t){if(typeof t!="string"||t==="")return["localhost"];var e=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,r=t.match(e)||[],n=r[4],i;return n&&(i=(n.match(/[^\.]+\.[^\.]+$/)||[])[0]),[n,i]},db=Ui(ws()),PX={exists:function(){var t=db.default.performance,e=t&&t.timing;return e!==void 0},domContentLoadedEventEnd:function(){var t=db.default.performance,e=t&&t.timing;return e&&e.domContentLoadedEventEnd},navigationStart:function(){var t=db.default.performance,e=t&&t.timing;return e&&e.navigationStart}},Om=PX;function Rr(t,e,r){r=r===void 0?1:r,t[e]=t[e]||0,t[e]+=r}function Mm(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){fe(t,i,r[i])})}return t}function NX(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r.push.apply(r,n)}return r}function Rx(t,e){return e=e??{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):NX(Object(e)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}var FX=["x-cdn","content-type"],aP=["x-request-id","cf-ray","x-amz-cf-id","x-akamai-request-id"],$X=FX.concat(aP);function Cx(t){t=t||"";var e={},r=t.trim().split(/[\r\n]+/);return r.forEach(function(n){if(n){var i=n.split(": "),s=i.shift();s&&($X.indexOf(s.toLowerCase())>=0||s.toLowerCase().indexOf("x-litix-")===0)&&(e[s]=i.join(": "))}}),e}function Pm(t){if(t){var e=aP.find(function(r){return t[r]!==void 0});return e?t[e]:void 0}}var UX=function(t){var e={};for(var r in t){var n=t[r],i=n["DATA-ID"].search("io.litix.data.");if(i!==-1){var s=n["DATA-ID"].replace("io.litix.data.","");e[s]=n.VALUE}}return e},oP=UX,Sf=function(t){if(!t)return{};var e=Om.navigationStart(),r=t.loading,n=r?r.start:t.trequest,i=r?r.first:t.tfirst,s=r?r.end:t.tload;return{bytesLoaded:t.total,requestStart:Math.round(e+n),responseStart:Math.round(e+i),responseEnd:Math.round(e+s)}},Fc=function(t){if(!(!t||typeof t.getAllResponseHeaders!="function"))return Cx(t.getAllResponseHeaders())},BX=function(t,e,r){var n=arguments.length>4?arguments[4]:void 0,i=t.log,s=t.utils.secondsToMs,a=function(g){var v=parseInt(n.version),b;return v===1&&g.programDateTime!==null&&(b=g.programDateTime),v===0&&g.pdt!==null&&(b=g.pdt),b};if(!Om.exists()){i.warn("performance timing not supported. Not tracking HLS.js.");return}var o=function(g,v){return t.emit(e,g,v)},l=function(g,v){var b=v.levels,y=v.audioTracks,T=v.url,x=v.stats,_=v.networkDetails,S=v.sessionData,A={},k={};b.forEach(function(M,U){A[U]={width:M.width,height:M.height,bitrate:M.bitrate,attrs:M.attrs}}),y.forEach(function(M,U){k[U]={name:M.name,language:M.lang,bitrate:M.bitrate}});var I=Sf(x),C=I.bytesLoaded,N=I.requestStart,P=I.responseStart,V=I.responseEnd;o("requestcompleted",Rx(Mm({},oP(S)),{request_event_type:g,request_bytes_loaded:C,request_start:N,request_response_start:P,request_response_end:V,request_type:"manifest",request_hostname:ki(T),request_response_headers:Fc(_),request_rendition_lists:{media:A,audio:k,video:{}}}))};r.on(n.Events.MANIFEST_LOADED,l);var u=function(g,v){var b=v.details,y=v.level,T=v.networkDetails,x=v.stats,_=Sf(x),S=_.bytesLoaded,A=_.requestStart,k=_.responseStart,I=_.responseEnd,C=b.fragments[b.fragments.length-1],N=a(C)+s(C.duration);o("requestcompleted",{request_event_type:g,request_bytes_loaded:S,request_start:A,request_response_start:k,request_response_end:I,request_current_level:y,request_type:"manifest",request_hostname:ki(b.url),request_response_headers:Fc(T),video_holdback:b.holdBack&&s(b.holdBack),video_part_holdback:b.partHoldBack&&s(b.partHoldBack),video_part_target_duration:b.partTarget&&s(b.partTarget),video_target_duration:b.targetduration&&s(b.targetduration),video_source_is_live:b.live,player_manifest_newest_program_time:isNaN(N)?void 0:N})};r.on(n.Events.LEVEL_LOADED,u);var c=function(g,v){var b=v.details,y=v.networkDetails,T=v.stats,x=Sf(T),_=x.bytesLoaded,S=x.requestStart,A=x.responseStart,k=x.responseEnd;o("requestcompleted",{request_event_type:g,request_bytes_loaded:_,request_start:S,request_response_start:A,request_response_end:k,request_type:"manifest",request_hostname:ki(b.url),request_response_headers:Fc(y)})};r.on(n.Events.AUDIO_TRACK_LOADED,c);var d=function(g,v){var b=v.stats,y=v.networkDetails,T=v.frag;b=b||T.stats;var x=Sf(b),_=x.bytesLoaded,S=x.requestStart,A=x.responseStart,k=x.responseEnd,I=y?Fc(y):void 0,C={request_event_type:g,request_bytes_loaded:_,request_start:S,request_response_start:A,request_response_end:k,request_hostname:y?ki(y.responseURL):void 0,request_id:I?Pm(I):void 0,request_response_headers:I,request_media_duration:T.duration,request_url:y==null?void 0:y.responseURL};T.type==="main"?(C.request_type="media",C.request_current_level=T.level,C.request_video_width=(r.levels[T.level]||{}).width,C.request_video_height=(r.levels[T.level]||{}).height,C.request_labeled_bitrate=(r.levels[T.level]||{}).bitrate):C.request_type=T.type,o("requestcompleted",C)};r.on(n.Events.FRAG_LOADED,d);var h=function(g,v){var b=v.frag,y=b.start,T=a(b),x={currentFragmentPDT:T,currentFragmentStart:s(y)};o("fragmentchange",x)};r.on(n.Events.FRAG_CHANGED,h);var f=function(g,v){var b=v.type,y=v.details,T=v.response,x=v.fatal,_=v.frag,S=v.networkDetails,A=(_==null?void 0:_.url)||v.url||"",k=S?Fc(S):void 0;if((y===n.ErrorDetails.MANIFEST_LOAD_ERROR||y===n.ErrorDetails.MANIFEST_LOAD_TIMEOUT||y===n.ErrorDetails.FRAG_LOAD_ERROR||y===n.ErrorDetails.FRAG_LOAD_TIMEOUT||y===n.ErrorDetails.LEVEL_LOAD_ERROR||y===n.ErrorDetails.LEVEL_LOAD_TIMEOUT||y===n.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||y===n.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT||y===n.ErrorDetails.SUBTITLE_LOAD_ERROR||y===n.ErrorDetails.SUBTITLE_LOAD_TIMEOUT||y===n.ErrorDetails.KEY_LOAD_ERROR||y===n.ErrorDetails.KEY_LOAD_TIMEOUT)&&o("requestfailed",{request_error:y,request_url:A,request_hostname:ki(A),request_id:k?Pm(k):void 0,request_type:y===n.ErrorDetails.FRAG_LOAD_ERROR||y===n.ErrorDetails.FRAG_LOAD_TIMEOUT?"media":y===n.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||y===n.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT?"audio":y===n.ErrorDetails.SUBTITLE_LOAD_ERROR||y===n.ErrorDetails.SUBTITLE_LOAD_TIMEOUT?"subtitle":y===n.ErrorDetails.KEY_LOAD_ERROR||y===n.ErrorDetails.KEY_LOAD_TIMEOUT?"encryption":"manifest",request_error_code:T==null?void 0:T.code,request_error_text:T==null?void 0:T.text}),x){var I,C="".concat(A?"url: ".concat(A,`
`):"")+"".concat(T&&(T.code||T.text)?"response: ".concat(T.code,", ").concat(T.text,`
`):"")+"".concat(v.reason?"failure reason: ".concat(v.reason,`
`):"")+"".concat(v.level?"level: ".concat(v.level,`
`):"")+"".concat(v.parent?"parent stream controller: ".concat(v.parent,`
`):"")+"".concat(v.buffer?"buffer length: ".concat(v.buffer,`
`):"")+"".concat(v.error?"error: ".concat(v.error,`
`):"")+"".concat(v.event?"event: ".concat(v.event,`
`):"")+"".concat(v.err?"error message: ".concat((I=v.err)===null||I===void 0?void 0:I.message,`
`):"");o("error",{player_error_code:b,player_error_message:y,player_error_context:C})}};r.on(n.Events.ERROR,f);var p=function(g,v){var b=v.frag,y=b&&b._url||"";o("requestcanceled",{request_event_type:g,request_url:y,request_type:"media",request_hostname:ki(y)})};r.on(n.Events.FRAG_LOAD_EMERGENCY_ABORTED,p);var m=function(g,v){var b=v.level,y=r.levels[b];if(y&&y.attrs&&y.attrs.BANDWIDTH){var T=y.attrs.BANDWIDTH,x,_=parseFloat(y.attrs["FRAME-RATE"]);isNaN(_)||(x=_),T?o("renditionchange",{video_source_fps:x,video_source_bitrate:T,video_source_width:y.width,video_source_height:y.height,video_source_rendition_name:y.name,video_source_codec:y==null?void 0:y.videoCodec}):i.warn("missing BANDWIDTH from HLS manifest parsed by HLS.js")}};r.on(n.Events.LEVEL_SWITCHED,m),r._stopMuxMonitor=function(){r.off(n.Events.MANIFEST_LOADED,l),r.off(n.Events.LEVEL_LOADED,u),r.off(n.Events.AUDIO_TRACK_LOADED,c),r.off(n.Events.FRAG_LOADED,d),r.off(n.Events.FRAG_CHANGED,h),r.off(n.Events.ERROR,f),r.off(n.Events.FRAG_LOAD_EMERGENCY_ABORTED,p),r.off(n.Events.LEVEL_SWITCHED,m),r.off(n.Events.DESTROYING,r._stopMuxMonitor),delete r._stopMuxMonitor},r.on(n.Events.DESTROYING,r._stopMuxMonitor)},jX=function(t){t&&typeof t._stopMuxMonitor=="function"&&t._stopMuxMonitor()},hC=function(t,e){if(!t||!t.requestEndDate)return{};var r=ki(t.url),n=t.url,i=t.bytesLoaded,s=new Date(t.requestStartDate).getTime(),a=new Date(t.firstByteDate).getTime(),o=new Date(t.requestEndDate).getTime(),l=isNaN(t.duration)?0:t.duration,u=typeof e.getMetricsFor=="function"?e.getMetricsFor(t.mediaType).HttpList:e.getDashMetrics().getHttpRequests(t.mediaType),c;u.length>0&&(c=Cx(u[u.length-1]._responseHeaders||""));var d=c?Pm(c):void 0;return{requestStart:s,requestResponseStart:a,requestResponseEnd:o,requestBytesLoaded:i,requestResponseHeaders:c,requestMediaDuration:l,requestHostname:r,requestUrl:n,requestId:d}},HX=function(t,e){var r=e.getQualityFor(t),n=e.getCurrentTrackFor(t).bitrateList;return n?{currentLevel:r,renditionWidth:n[r].width||null,renditionHeight:n[r].height||null,renditionBitrate:n[r].bandwidth}:{}},VX=function(t){var e;return(e=t.match(/.*codecs\*?="(.*)"/))===null||e===void 0?void 0:e[1]},WX=function(t){try{var e,r,n=(r=t.getVersion)===null||r===void 0||(e=r.call(t))===null||e===void 0?void 0:e.split(".").map(function(i){return parseInt(i)})[0];return n}catch{return!1}},GX=function(t,e,r){var n=t.log;if(!r||!r.on){n.warn("Invalid dash.js player reference. Monitoring blocked.");return}var i=WX(r),s=function(b,y){return t.emit(e,b,y)},a=function(b){var y=b.type,T=b.data,x=(T||{}).url;s("requestcompleted",{request_event_type:y,request_start:0,request_response_start:0,request_response_end:0,request_bytes_loaded:-1,request_type:"manifest",request_hostname:ki(x),request_url:x})};r.on("manifestLoaded",a);var o={},l=function(b){if(typeof b.getRequests!="function")return null;var y=b.getRequests({state:"executed"});return y.length===0?null:y[y.length-1]},u=function(b){var y=b.type,T=b.fragmentModel,x=b.chunk,_=l(T);c({type:y,request:_,chunk:x})},c=function(b){var y=b.type,T=b.chunk,x=b.request,_=(T||{}).mediaInfo,S=_||{},A=S.type,k=S.bitrateList;k=k||[];var I={};k.forEach(function(D,L){I[L]={},I[L].width=D.width,I[L].height=D.height,I[L].bitrate=D.bandwidth,I[L].attrs={}}),A==="video"?o.video=I:A==="audio"?o.audio=I:o.media=I;var C=hC(x,r),N=C.requestStart,P=C.requestResponseStart,V=C.requestResponseEnd,M=C.requestResponseHeaders,U=C.requestMediaDuration,B=C.requestHostname,X=C.requestUrl,te=C.requestId;s("requestcompleted",{request_event_type:y,request_start:N,request_response_start:P,request_response_end:V,request_bytes_loaded:-1,request_type:A+"_init",request_response_headers:M,request_hostname:B,request_id:te,request_url:X,request_media_duration:U,request_rendition_lists:o})};i>=4?r.on("initFragmentLoaded",c):r.on("initFragmentLoaded",u);var d=function(b){var y=b.type,T=b.fragmentModel,x=b.chunk,_=l(T);h({type:y,request:_,chunk:x})},h=function(b){var y=b.type,T=b.chunk,x=b.request,_=T||{},S=_.mediaInfo,A=_.start,k=S||{},I=k.type,C=hC(x,r),N=C.requestStart,P=C.requestResponseStart,V=C.requestResponseEnd,M=C.requestBytesLoaded,U=C.requestResponseHeaders,B=C.requestMediaDuration,X=C.requestHostname,te=C.requestUrl,D=C.requestId,L=HX(I,r),Y=L.currentLevel,$=L.renditionWidth,j=L.renditionHeight,z=L.renditionBitrate;s("requestcompleted",{request_event_type:y,request_start:N,request_response_start:P,request_response_end:V,request_bytes_loaded:M,request_type:I,request_response_headers:U,request_hostname:X,request_id:D,request_url:te,request_media_start_time:A,request_media_duration:B,request_current_level:Y,request_labeled_bitrate:z,request_video_width:$,request_video_height:j})};i>=4?r.on("mediaFragmentLoaded",h):r.on("mediaFragmentLoaded",d);var f={video:void 0,audio:void 0,totalBitrate:void 0},p=function(){if(f.video&&typeof f.video.bitrate=="number"){if(!(f.video.width&&f.video.height)){n.warn("have bitrate info for video but missing width/height");return}var b=f.video.bitrate;if(f.audio&&typeof f.audio.bitrate=="number"&&(b+=f.audio.bitrate),b!==f.totalBitrate)return f.totalBitrate=b,{video_source_bitrate:b,video_source_height:f.video.height,video_source_width:f.video.width,video_source_codec:VX(f.video.codec)}}},m=function(b,y,T){if(typeof b.newQuality!="number"){n.warn("missing evt.newQuality in qualityChangeRendered event",b);return}var x=b.mediaType;if(x==="audio"||x==="video"){var _=r.getBitrateInfoListFor(x).find(function(A){var k=A.qualityIndex;return k===b.newQuality});if(!(_&&typeof _.bitrate=="number")){n.warn("missing bitrate info for ".concat(x));return}f[x]=Rx(Mm({},_),{codec:r.getCurrentTrackFor(x).codec});var S=p();S&&s("renditionchange",S)}};r.on("qualityChangeRendered",m);var g=function(b){var y=b.request,T=b.mediaType;y=y||{},s("requestcanceled",{request_event_type:y.type+"_"+y.action,request_url:y.url,request_type:T,request_hostname:ki(y.url)})};r.on("fragmentLoadingAbandoned",g);var v=function(b){var y=b.error,T,x,_=(y==null||(T=y.data)===null||T===void 0?void 0:T.request)||{},S=(y==null||(x=y.data)===null||x===void 0?void 0:x.response)||{};(y==null?void 0:y.code)===27&&s("requestfailed",{request_error:_.type+"_"+_.action,request_url:_.url,request_hostname:ki(_.url),request_type:_.mediaType,request_error_code:S.status,request_error_text:S.statusText});var A="".concat(_!=null&&_.url?"url: ".concat(_.url,`
`):"")+"".concat(S!=null&&S.status||S!=null&&S.statusText?"response: ".concat(S==null?void 0:S.status,", ").concat(S==null?void 0:S.statusText,`
`):"");s("error",{player_error_code:y==null?void 0:y.code,player_error_message:y==null?void 0:y.message,player_error_context:A})};r.on("error",v),r._stopMuxMonitor=function(){r.off("manifestLoaded",a),r.off("initFragmentLoaded",c),r.off("mediaFragmentLoaded",h),r.off("qualityChangeRendered",m),r.off("error",v),r.off("fragmentLoadingAbandoned",g),delete r._stopMuxMonitor}},KX=function(t){t&&typeof t._stopMuxMonitor=="function"&&t._stopMuxMonitor()},fC=0,qX=function(){function t(){rn(this,t),fe(this,"_listeners",void 0)}return As(t,[{key:"on",value:function(e,r,n){return r._eventEmitterGuid=r._eventEmitterGuid||++fC,this._listeners=this._listeners||{},this._listeners[e]=this._listeners[e]||[],n&&(r=r.bind(n)),this._listeners[e].push(r),r}},{key:"off",value:function(e,r){var n=this._listeners&&this._listeners[e];n&&n.forEach(function(i,s){i._eventEmitterGuid===r._eventEmitterGuid&&n.splice(s,1)})}},{key:"one",value:function(e,r,n){var i=this;r._eventEmitterGuid=r._eventEmitterGuid||++fC;var s=function(){i.off(e,s),r.apply(n||this,arguments)};s._eventEmitterGuid=r._eventEmitterGuid,this.on(e,s)}},{key:"emit",value:function(e,r){var n=this;if(this._listeners){r=r||{};var i=this._listeners["before*"]||[],s=this._listeners[e]||[],a=this._listeners["after"+e]||[],o=function(l,u){l=l.slice(),l.forEach(function(c){c.call(n,{type:e},u)})};o(i,r),o(s,r),o(a,r)}}}]),t}(),zX=qX,hb=Ui(ws()),YX=function(){function t(e){var r=this;rn(this,t),fe(this,"_playbackHeartbeatInterval",void 0),fe(this,"_playheadShouldBeProgressing",void 0),fe(this,"pm",void 0),this.pm=e,this._playbackHeartbeatInterval=null,this._playheadShouldBeProgressing=!1,e.on("playing",function(){r._playheadShouldBeProgressing=!0}),e.on("play",this._startPlaybackHeartbeatInterval.bind(this)),e.on("playing",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adbreakstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adplay",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adplaying",this._startPlaybackHeartbeatInterval.bind(this)),e.on("devicewake",this._startPlaybackHeartbeatInterval.bind(this)),e.on("viewstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("rebufferstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("pause",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("ended",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("viewend",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("error",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("aderror",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adpause",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adended",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adbreakend",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("seeked",function(){e.data.player_is_paused?r._stopPlaybackHeartbeatInterval():r._startPlaybackHeartbeatInterval()}),e.on("timeupdate",function(){r._playbackHeartbeatInterval!==null&&e.emit("playbackheartbeat")}),e.on("devicesleep",function(n,i){r._playbackHeartbeatInterval!==null&&(hb.default.clearInterval(r._playbackHeartbeatInterval),e.emit("playbackheartbeatend",{viewer_time:i.viewer_time}),r._playbackHeartbeatInterval=null)})}return As(t,[{key:"_startPlaybackHeartbeatInterval",value:function(){var e=this;this._playbackHeartbeatInterval===null&&(this.pm.emit("playbackheartbeat"),this._playbackHeartbeatInterval=hb.default.setInterval(function(){e.pm.emit("playbackheartbeat")},this.pm.playbackHeartbeatTime))}},{key:"_stopPlaybackHeartbeatInterval",value:function(){this._playheadShouldBeProgressing=!1,this._playbackHeartbeatInterval!==null&&(hb.default.clearInterval(this._playbackHeartbeatInterval),this.pm.emit("playbackheartbeatend"),this._playbackHeartbeatInterval=null)}}]),t}(),XX=YX,ZX=function t(e){var r=this;rn(this,t),fe(this,"viewErrored",void 0),e.on("viewinit",function(){r.viewErrored=!1}),e.on("error",function(n,i){try{var s=e.errorTranslator({player_error_code:i.player_error_code,player_error_message:i.player_error_message,player_error_context:i.player_error_context,player_error_severity:i.player_error_severity,player_error_business_exception:i.player_error_business_exception});s&&(e.data.player_error_code=s.player_error_code||i.player_error_code,e.data.player_error_message=s.player_error_message||i.player_error_message,e.data.player_error_context=s.player_error_context||i.player_error_context,e.data.player_error_severity=s.player_error_severity||i.player_error_severity,e.data.player_error_business_exception=s.player_error_business_exception||i.player_error_business_exception,r.viewErrored=!0)}catch(a){e.mux.log.warn("Exception in error translator callback.",a),r.viewErrored=!0}}),e.on("aftererror",function(){var n,i,s,a,o;(n=e.data)===null||n===void 0||delete n.player_error_code,(i=e.data)===null||i===void 0||delete i.player_error_message,(s=e.data)===null||s===void 0||delete s.player_error_context,(a=e.data)===null||a===void 0||delete a.player_error_severity,(o=e.data)===null||o===void 0||delete o.player_error_business_exception})},QX=ZX,JX=function(){function t(e){rn(this,t),fe(this,"_watchTimeTrackerLastCheckedTime",void 0),fe(this,"pm",void 0),this.pm=e,this._watchTimeTrackerLastCheckedTime=null,e.on("playbackheartbeat",this._updateWatchTime.bind(this)),e.on("playbackheartbeatend",this._clearWatchTimeState.bind(this))}return As(t,[{key:"_updateWatchTime",value:function(e,r){var n=r.viewer_time;this._watchTimeTrackerLastCheckedTime===null&&(this._watchTimeTrackerLastCheckedTime=n),Rr(this.pm.data,"view_watch_time",n-this._watchTimeTrackerLastCheckedTime),this._watchTimeTrackerLastCheckedTime=n}},{key:"_clearWatchTimeState",value:function(e,r){this._updateWatchTime(e,r),this._watchTimeTrackerLastCheckedTime=null}}]),t}(),eZ=JX,tZ=function(){function t(e){var r=this;rn(this,t),fe(this,"_playbackTimeTrackerLastPlayheadPosition",void 0),fe(this,"_lastTime",void 0),fe(this,"_isAdPlaying",void 0),fe(this,"_callbackUpdatePlaybackTime",void 0),fe(this,"pm",void 0),this.pm=e,this._playbackTimeTrackerLastPlayheadPosition=-1,this._lastTime=Nr.now(),this._isAdPlaying=!1,this._callbackUpdatePlaybackTime=null;var n=this._startPlaybackTimeTracking.bind(this);e.on("playing",n),e.on("adplaying",n),e.on("seeked",n);var i=this._stopPlaybackTimeTracking.bind(this);e.on("playbackheartbeatend",i),e.on("seeking",i),e.on("adplaying",function(){r._isAdPlaying=!0}),e.on("adended",function(){r._isAdPlaying=!1}),e.on("adpause",function(){r._isAdPlaying=!1}),e.on("adbreakstart",function(){r._isAdPlaying=!1}),e.on("adbreakend",function(){r._isAdPlaying=!1}),e.on("adplay",function(){r._isAdPlaying=!1}),e.on("viewinit",function(){r._playbackTimeTrackerLastPlayheadPosition=-1,r._lastTime=Nr.now(),r._isAdPlaying=!1,r._callbackUpdatePlaybackTime=null})}return As(t,[{key:"_startPlaybackTimeTracking",value:function(){this._callbackUpdatePlaybackTime===null&&(this._callbackUpdatePlaybackTime=this._updatePlaybackTime.bind(this),this._playbackTimeTrackerLastPlayheadPosition=this.pm.data.player_playhead_time,this.pm.on("playbackheartbeat",this._callbackUpdatePlaybackTime))}},{key:"_stopPlaybackTimeTracking",value:function(){this._callbackUpdatePlaybackTime&&(this._updatePlaybackTime(),this.pm.off("playbackheartbeat",this._callbackUpdatePlaybackTime),this._callbackUpdatePlaybackTime=null,this._playbackTimeTrackerLastPlayheadPosition=-1)}},{key:"_updatePlaybackTime",value:function(){var e=this.pm.data.player_playhead_time,r=Nr.now(),n=-1;this._playbackTimeTrackerLastPlayheadPosition>=0&&e>this._playbackTimeTrackerLastPlayheadPosition?n=e-this._playbackTimeTrackerLastPlayheadPosition:this._isAdPlaying&&(n=r-this._lastTime),n>0&&n<=1e3&&Rr(this.pm.data,"view_content_playback_time",n),this._playbackTimeTrackerLastPlayheadPosition=e,this._lastTime=r}}]),t}(),rZ=tZ,nZ=function(){function t(e){rn(this,t),fe(this,"pm",void 0),this.pm=e;var r=this._updatePlayheadTime.bind(this);e.on("playbackheartbeat",r),e.on("playbackheartbeatend",r),e.on("timeupdate",r),e.on("destroy",function(){e.off("timeupdate",r)})}return As(t,[{key:"_updateMaxPlayheadPosition",value:function(){this.pm.data.view_max_playhead_position=typeof this.pm.data.view_max_playhead_position>"u"?this.pm.data.player_playhead_time:Math.max(this.pm.data.view_max_playhead_position,this.pm.data.player_playhead_time)}},{key:"_updatePlayheadTime",value:function(e,r){var n=this,i=function(){n.pm.currentFragmentPDT&&n.pm.currentFragmentStart&&(n.pm.data.player_program_time=n.pm.currentFragmentPDT+n.pm.data.player_playhead_time-n.pm.currentFragmentStart)};if(r&&r.player_playhead_time)this.pm.data.player_playhead_time=r.player_playhead_time,i(),this._updateMaxPlayheadPosition();else if(this.pm.getPlayheadTime){var s=this.pm.getPlayheadTime();typeof s<"u"&&(this.pm.data.player_playhead_time=s,i(),this._updateMaxPlayheadPosition())}}}]),t}(),iZ=nZ,pC=5*60*1e3,sZ=function t(e){if(rn(this,t),!e.disableRebufferTracking){var r,n=function(s,a){i(a),r=void 0},i=function(s){if(r){var a=s.viewer_time-r;Rr(e.data,"view_rebuffer_duration",a),r=s.viewer_time,e.data.view_rebuffer_duration>pC&&(e.emit("viewend"),e.send("viewend"),e.mux.log.warn("Ending view after rebuffering for longer than ".concat(pC,"ms, future events will be ignored unless a programchange or videochange occurs.")))}e.data.view_watch_time>=0&&e.data.view_rebuffer_count>0&&(e.data.view_rebuffer_frequency=e.data.view_rebuffer_count/e.data.view_watch_time,e.data.view_rebuffer_percentage=e.data.view_rebuffer_duration/e.data.view_watch_time)};e.on("playbackheartbeat",function(s,a){return i(a)}),e.on("rebufferstart",function(s,a){r||(Rr(e.data,"view_rebuffer_count",1),r=a.viewer_time,e.one("rebufferend",n))}),e.on("viewinit",function(){r=void 0,e.off("rebufferend",n)})}},aZ=sZ,oZ=function(){function t(e){var r=this;rn(this,t),fe(this,"_lastCheckedTime",void 0),fe(this,"_lastPlayheadTime",void 0),fe(this,"_lastPlayheadTimeUpdatedTime",void 0),fe(this,"_rebuffering",void 0),fe(this,"pm",void 0),this.pm=e,!(e.disableRebufferTracking||e.disablePlayheadRebufferTracking)&&(this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null,e.on("playbackheartbeat",this._checkIfRebuffering.bind(this)),e.on("playbackheartbeatend",this._cleanupRebufferTracker.bind(this)),e.on("seeking",function(){r._cleanupRebufferTracker(null,{viewer_time:Nr.now()})}))}return As(t,[{key:"_checkIfRebuffering",value:function(e,r){if(this.pm.seekingTracker.isSeeking||this.pm.adTracker.isAdBreak||!this.pm.playbackHeartbeat._playheadShouldBeProgressing){this._cleanupRebufferTracker(e,r);return}if(this._lastCheckedTime===null){this._prepareRebufferTrackerState(r.viewer_time);return}if(this._lastPlayheadTime!==this.pm.data.player_playhead_time){this._cleanupRebufferTracker(e,r,!0);return}var n=r.viewer_time-this._lastPlayheadTimeUpdatedTime;typeof this.pm.sustainedRebufferThreshold=="number"&&n>=this.pm.sustainedRebufferThreshold&&(this._rebuffering||(this._rebuffering=!0,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}))),this._lastCheckedTime=r.viewer_time}},{key:"_clearRebufferTrackerState",value:function(){this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null}},{key:"_prepareRebufferTrackerState",value:function(e){this._lastCheckedTime=e,this._lastPlayheadTime=this.pm.data.player_playhead_time,this._lastPlayheadTimeUpdatedTime=e}},{key:"_cleanupRebufferTracker",value:function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(this._rebuffering)this._rebuffering=!1,this.pm.emit("rebufferend",{viewer_time:r.viewer_time});else{if(this._lastCheckedTime===null)return;var i=this.pm.data.player_playhead_time-this._lastPlayheadTime,s=r.viewer_time-this._lastPlayheadTimeUpdatedTime;typeof this.pm.minimumRebufferDuration=="number"&&i>0&&s-i>this.pm.minimumRebufferDuration&&(this._lastCheckedTime=null,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}),this.pm.emit("rebufferend",{viewer_time:this._lastPlayheadTimeUpdatedTime+s-i}))}n?this._prepareRebufferTrackerState(r.viewer_time):this._clearRebufferTrackerState()}}]),t}(),lZ=oZ,uZ=function(){function t(e){var r=this;rn(this,t),fe(this,"NAVIGATION_START",void 0),fe(this,"pm",void 0),this.pm=e,e.on("viewinit",function(){var n=e.data,i=n.view_id;if(!n.view_program_changed){var s=function(a,o){var l=o.viewer_time;(a.type==="playing"&&typeof e.data.view_time_to_first_frame>"u"||a.type==="adplaying"&&(typeof e.data.view_time_to_first_frame>"u"||r._inPrerollPosition()))&&r.calculateTimeToFirstFrame(l||Nr.now(),i)};e.one("playing",s),e.one("adplaying",s),e.one("viewend",function(){e.off("playing",s),e.off("adplaying",s)})}})}return As(t,[{key:"_inPrerollPosition",value:function(){return typeof this.pm.data.view_content_playback_time>"u"||this.pm.data.view_content_playback_time<=1e3}},{key:"calculateTimeToFirstFrame",value:function(e,r){r===this.pm.data.view_id&&(this.pm.watchTimeTracker._updateWatchTime(null,{viewer_time:e}),this.pm.data.view_time_to_first_frame=this.pm.data.view_watch_time,(this.pm.data.player_autoplay_on||this.pm.data.video_is_autoplay)&&this.NAVIGATION_START&&(this.pm.data.view_aggregate_startup_time=this.pm.data.view_start+this.pm.data.view_watch_time-this.NAVIGATION_START))}}]),t}(),cZ=uZ,dZ=function t(e){var r=this;rn(this,t),fe(this,"_lastPlayerHeight",void 0),fe(this,"_lastPlayerWidth",void 0),fe(this,"_lastPlayheadPosition",void 0),fe(this,"_lastSourceHeight",void 0),fe(this,"_lastSourceWidth",void 0),e.on("viewinit",function(){r._lastPlayheadPosition=-1});var n=["pause","rebufferstart","seeking","error","adbreakstart","hb"],i=["playing","hb"];n.forEach(function(s){e.on(s,function(){if(r._lastPlayheadPosition>=0&&e.data.player_playhead_time>=0&&r._lastPlayerWidth>=0&&r._lastSourceWidth>0&&r._lastPlayerHeight>=0&&r._lastSourceHeight>0){var a=e.data.player_playhead_time-r._lastPlayheadPosition;if(a<0){r._lastPlayheadPosition=-1;return}var o=Math.min(r._lastPlayerWidth/r._lastSourceWidth,r._lastPlayerHeight/r._lastSourceHeight),l=Math.max(0,o-1),u=Math.max(0,1-o);e.data.view_max_upscale_percentage=Math.max(e.data.view_max_upscale_percentage||0,l),e.data.view_max_downscale_percentage=Math.max(e.data.view_max_downscale_percentage||0,u),Rr(e.data,"view_total_content_playback_time",a),Rr(e.data,"view_total_upscaling",l*a),Rr(e.data,"view_total_downscaling",u*a)}r._lastPlayheadPosition=-1})}),i.forEach(function(s){e.on(s,function(){r._lastPlayheadPosition=e.data.player_playhead_time,r._lastPlayerWidth=e.data.player_width,r._lastPlayerHeight=e.data.player_height,r._lastSourceWidth=e.data.video_source_width,r._lastSourceHeight=e.data.video_source_height})})},hZ=dZ,fZ=2e3,pZ=function t(e){var r=this;rn(this,t),fe(this,"isSeeking",void 0),this.isSeeking=!1;var n=-1,i=function(){var s=Nr.now(),a=(e.data.viewer_time||s)-(n||s);Rr(e.data,"view_seek_duration",a),e.data.view_max_seek_time=Math.max(e.data.view_max_seek_time||0,a),r.isSeeking=!1,n=-1};e.on("seeking",function(s,a){if(Object.assign(e.data,a),r.isSeeking&&a.viewer_time-n<=fZ){n=a.viewer_time;return}r.isSeeking&&i(),r.isSeeking=!0,n=a.viewer_time,Rr(e.data,"view_seek_count",1),e.send("seeking")}),e.on("seeked",function(){i()}),e.on("viewend",function(){r.isSeeking&&(i(),e.send("seeked")),r.isSeeking=!1,n=-1})},mZ=pZ,mC=function(t,e){t.push(e),t.sort(function(r,n){return r.viewer_time-n.viewer_time})},gZ=["adbreakstart","adrequest","adresponse","adplay","adplaying","adpause","adended","adbreakend","aderror","adclicked","adskipped"],vZ=function(){function t(e){var r=this;rn(this,t),fe(this,"_adHasPlayed",void 0),fe(this,"_adRequests",void 0),fe(this,"_adResponses",void 0),fe(this,"_currentAdRequestNumber",void 0),fe(this,"_currentAdResponseNumber",void 0),fe(this,"_prerollPlayTime",void 0),fe(this,"_wouldBeNewAdPlay",void 0),fe(this,"isAdBreak",void 0),fe(this,"pm",void 0),this.pm=e,e.on("viewinit",function(){r.isAdBreak=!1,r._currentAdRequestNumber=0,r._currentAdResponseNumber=0,r._adRequests=[],r._adResponses=[],r._adHasPlayed=!1,r._wouldBeNewAdPlay=!0,r._prerollPlayTime=void 0}),gZ.forEach(function(i){return e.on(i,r._updateAdData.bind(r))});var n=function(){r.isAdBreak=!1};e.on("adbreakstart",function(){r.isAdBreak=!0}),e.on("play",n),e.on("playing",n),e.on("viewend",n),e.on("adrequest",function(i,s){s=Object.assign({ad_request_id:"generatedAdRequestId"+r._currentAdRequestNumber++},s),mC(r._adRequests,s),Rr(e.data,"view_ad_request_count"),r.inPrerollPosition()&&(e.data.view_preroll_requested=!0,r._adHasPlayed||Rr(e.data,"view_preroll_request_count"))}),e.on("adresponse",function(i,s){s=Object.assign({ad_request_id:"generatedAdRequestId"+r._currentAdResponseNumber++},s),mC(r._adResponses,s);var a=r.findAdRequest(s.ad_request_id);a&&Rr(e.data,"view_ad_request_time",Math.max(0,s.viewer_time-a.viewer_time))}),e.on("adplay",function(i,s){r._adHasPlayed=!0,r._wouldBeNewAdPlay&&(r._wouldBeNewAdPlay=!1,Rr(e.data,"view_ad_played_count")),r.inPrerollPosition()&&!e.data.view_preroll_played&&(e.data.view_preroll_played=!0,r._adRequests.length>0&&(e.data.view_preroll_request_time=Math.max(0,s.viewer_time-r._adRequests[0].viewer_time)),e.data.view_start&&(e.data.view_startup_preroll_request_time=Math.max(0,s.viewer_time-e.data.view_start)),r._prerollPlayTime=s.viewer_time)}),e.on("adplaying",function(i,s){r.inPrerollPosition()&&typeof e.data.view_preroll_load_time>"u"&&typeof r._prerollPlayTime<"u"&&(e.data.view_preroll_load_time=s.viewer_time-r._prerollPlayTime,e.data.view_startup_preroll_load_time=s.viewer_time-r._prerollPlayTime)}),e.on("adclicked",function(i,s){r._wouldBeNewAdPlay||Rr(e.data,"view_ad_clicked_count")}),e.on("adskipped",function(i,s){r._wouldBeNewAdPlay||Rr(e.data,"view_ad_skipped_count")}),e.on("adended",function(){r._wouldBeNewAdPlay=!0}),e.on("aderror",function(){r._wouldBeNewAdPlay=!0})}return As(t,[{key:"inPrerollPosition",value:function(){return typeof this.pm.data.view_content_playback_time>"u"||this.pm.data.view_content_playback_time<=1e3}},{key:"findAdRequest",value:function(e){for(var r=0;r<this._adRequests.length;r++)if(this._adRequests[r].ad_request_id===e)return this._adRequests[r]}},{key:"_updateAdData",value:function(e,r){if(this.inPrerollPosition()){if(!this.pm.data.view_preroll_ad_tag_hostname&&r.ad_tag_url){var n=Qs(ch(r.ad_tag_url),2),i=n[0],s=n[1];this.pm.data.view_preroll_ad_tag_domain=s,this.pm.data.view_preroll_ad_tag_hostname=i}if(!this.pm.data.view_preroll_ad_asset_hostname&&r.ad_asset_url){var a=Qs(ch(r.ad_asset_url),2),o=a[0],l=a[1];this.pm.data.view_preroll_ad_asset_domain=l,this.pm.data.view_preroll_ad_asset_hostname=o}}this.pm.data.ad_asset_url=r==null?void 0:r.ad_asset_url,this.pm.data.ad_tag_url=r==null?void 0:r.ad_tag_url,this.pm.data.ad_creative_id=r==null?void 0:r.ad_creative_id,this.pm.data.ad_id=r==null?void 0:r.ad_id,this.pm.data.ad_universal_id=r==null?void 0:r.ad_universal_id}}]),t}(),bZ=vZ,gC=Ui(ws()),yZ=function t(e){rn(this,t);var r,n,i=function(){e.disableRebufferTracking||(Rr(e.data,"view_waiting_rebuffer_count",1),r=Nr.now(),n=gC.default.setInterval(function(){if(r){var u=Nr.now();Rr(e.data,"view_waiting_rebuffer_duration",u-r),r=u}},250))},s=function(){e.disableRebufferTracking||r&&(Rr(e.data,"view_waiting_rebuffer_duration",Nr.now()-r),r=!1,gC.default.clearInterval(n))},a=!1,o=function(){a=!0},l=function(){a=!1,s()};e.on("waiting",function(){a&&i()}),e.on("playing",function(){s(),o()}),e.on("pause",l),e.on("seeking",l)},EZ=yZ,_Z=function t(e){var r=this;rn(this,t),fe(this,"lastWallClockTime",void 0);var n=function(){r.lastWallClockTime=Nr.now(),e.on("before*",i)},i=function(s){var a=Nr.now(),o=r.lastWallClockTime;r.lastWallClockTime=a,a-o>3e4&&(e.emit("devicesleep",{viewer_time:o}),Object.assign(e.data,{viewer_time:o}),e.send("devicesleep"),e.emit("devicewake",{viewer_time:a}),Object.assign(e.data,{viewer_time:a}),e.send("devicewake"))};e.one("playbackheartbeat",n),e.on("playbackheartbeatend",function(){e.off("before*",i),e.one("playbackheartbeat",n)})},TZ=_Z,fb=Ui(ws()),lP=function(t){return t()}(function(){var t=function(){for(var r=0,n={};r<arguments.length;r++){var i=arguments[r];for(var s in i)n[s]=i[s]}return n};function e(r){function n(i,s,a){var o;if(typeof document<"u"){if(arguments.length>1){if(a=t({path:"/"},n.defaults,a),typeof a.expires=="number"){var l=new Date;l.setMilliseconds(l.getMilliseconds()+a.expires*864e5),a.expires=l}try{o=JSON.stringify(s),/^[\{\[]/.test(o)&&(s=o)}catch{}return r.write?s=r.write(s,i):s=encodeURIComponent(String(s)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),i=encodeURIComponent(String(i)),i=i.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),i=i.replace(/[\(\)]/g,escape),document.cookie=[i,"=",s,a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}i||(o={});for(var u=document.cookie?document.cookie.split("; "):[],c=/(%[0-9A-Z]{2})+/g,d=0;d<u.length;d++){var h=u[d].split("="),f=h.slice(1).join("=");f.charAt(0)==='"'&&(f=f.slice(1,-1));try{var p=h[0].replace(c,decodeURIComponent);if(f=r.read?r.read(f,p):r(f,p)||f.replace(c,decodeURIComponent),this.json)try{f=JSON.parse(f)}catch{}if(i===p){o=f;break}i||(o[p]=f)}catch{}}return o}}return n.set=n,n.get=function(i){return n.call(n,i)},n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(i,s){n(i,"",t(s,{expires:-1}))},n.withConverter=e,n}return e(function(){})}),uP="muxData",xZ=function(t){return Object.entries(t).map(function(e){var r=Qs(e,2),n=r[0],i=r[1];return"".concat(n,"=").concat(i)}).join("&")},SZ=function(t){return t.split("&").reduce(function(e,r){var n=Qs(r.split("="),2),i=n[0],s=n[1],a=+s,o=s&&a==s?a:s;return e[i]=o,e},{})},cP=function(){var t;try{t=SZ(lP.get(uP)||"")}catch{t={}}return t},dP=function(t){try{lP.set(uP,xZ(t),{expires:365})}catch{}},wZ=function(){var t=cP();return t.mux_viewer_id=t.mux_viewer_id||uh(),t.msn=t.msn||Math.random(),dP(t),{mux_viewer_id:t.mux_viewer_id,mux_sample_number:t.msn}},AZ=function(){var t=cP(),e=Nr.now();return t.session_start&&(t.sst=t.session_start,delete t.session_start),t.session_id&&(t.sid=t.session_id,delete t.session_id),t.session_expires&&(t.sex=t.session_expires,delete t.session_expires),(!t.sex||t.sex<e)&&(t.sid=uh(),t.sst=e),t.sex=e+25*60*1e3,dP(t),{session_id:t.sid,session_start:t.sst,session_expires:t.sex}};function RZ(t,e){var r=e.beaconCollectionDomain,n=e.beaconDomain;if(r)return"https://"+r;t=t||"inferred";var i=n||"litix.io";return t.match(/^[a-z0-9]+$/)?"https://"+t+"."+i:"https://img.litix.io/a.gif"}var CZ=Ui(ws()),hP=function(){var t;switch(fP()){case"cellular":t="cellular";break;case"ethernet":t="wired";break;case"wifi":t="wifi";break;case void 0:break;default:t="other"}return t},fP=function(){var t=CZ.default.navigator,e=t&&(t.connection||t.mozConnection||t.webkitConnection);return e&&e.type};hP.getConnectionFromAPI=fP;var IZ=hP,kZ={a:"env",b:"beacon",c:"custom",d:"ad",e:"event",f:"experiment",i:"internal",m:"mux",n:"response",p:"player",q:"request",r:"retry",s:"session",t:"timestamp",u:"viewer",v:"video",w:"page",x:"view",y:"sub"},LZ=pP(kZ),DZ={ad:"ad",ag:"aggregate",ap:"api",al:"application",ar:"architecture",as:"asset",au:"autoplay",av:"average",bi:"bitrate",br:"break",bw:"browser",by:"bytes",bz:"business",ca:"cached",cb:"cancel",cc:"codec",cd:"code",cg:"category",ch:"changed",ck:"clicked",cl:"canceled",cn:"config",co:"count",ce:"counter",cp:"complete",cr:"creative",ct:"content",cu:"current",cx:"connection",cz:"context",dg:"downscaling",dm:"domain",dn:"cdn",do:"downscale",dr:"drm",dp:"dropped",du:"duration",dv:"device",ec:"encoding",ed:"edge",en:"end",eg:"engine",em:"embed",er:"error",ep:"experiments",es:"errorcode",et:"errortext",ee:"event",ev:"events",ex:"expires",ez:"exception",fa:"failed",fi:"first",fm:"family",ft:"format",fp:"fps",fq:"frequency",fr:"frame",fs:"fullscreen",ha:"has",hb:"holdback",he:"headers",ho:"host",hn:"hostname",ht:"height",id:"id",ii:"init",in:"instance",ip:"ip",is:"is",ke:"key",la:"language",lb:"labeled",le:"level",li:"live",ld:"loaded",lo:"load",ls:"lists",lt:"latency",ma:"max",md:"media",me:"message",mf:"manifest",mi:"mime",ml:"midroll",mm:"min",mn:"manufacturer",mo:"model",mx:"mux",ne:"newest",nm:"name",no:"number",on:"on",os:"os",pa:"paused",pb:"playback",pd:"producer",pe:"percentage",pf:"played",pg:"program",ph:"playhead",pi:"plugin",pl:"preroll",pn:"playing",po:"poster",pr:"preload",ps:"position",pt:"part",py:"property",ra:"rate",rd:"requested",re:"rebuffer",rf:"rendition",rm:"remote",ro:"ratio",rp:"response",rq:"request",rs:"requests",sa:"sample",sd:"skipped",se:"session",sk:"seek",sm:"stream",so:"source",sq:"sequence",sr:"series",st:"start",su:"startup",sv:"server",sw:"software",sy:"severity",ta:"tag",tc:"tech",te:"text",tg:"target",th:"throughput",ti:"time",tl:"total",to:"to",tt:"title",ty:"type",ug:"upscaling",un:"universal",up:"upscale",ur:"url",us:"user",va:"variant",vd:"viewed",vi:"video",ve:"version",vw:"view",vr:"viewer",wd:"width",wa:"watch",wt:"waiting"},vC=pP(DZ);function pP(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[t[r]]=r);return e}function d1(t){var e={},r={};return Object.keys(t).forEach(function(n){var i=!1;if(t.hasOwnProperty(n)&&t[n]!==void 0){var s=n.split("_"),a=s[0],o=LZ[a];o||(ir.info("Data key word `"+s[0]+"` not expected in "+n),o=a+"_"),s.splice(1).forEach(function(l){l==="url"&&(i=!0),vC[l]?o+=vC[l]:Number(l)&&Math.floor(Number(l))===Number(l)?o+=l:(ir.info("Data key word `"+l+"` not expected in "+n),o+="_"+l+"_")}),i?r[o]=t[n]:e[o]=t[n]}}),Object.assign(e,r)}var qo=Ui(ws()),OZ={maxBeaconSize:300,maxQueueLength:3600,baseTimeBetweenBeacons:1e4,maxPayloadKBSize:500},MZ=56*1024,PZ=["hb","requestcompleted","requestfailed","requestcanceled"],NZ="https://img.litix.io",ta=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this._beaconUrl=t||NZ,this._eventQueue=[],this._postInFlight=!1,this._failureCount=0,this._sendTimeout=!1,this._options=Object.assign({},OZ,e)};ta.prototype.queueEvent=function(t,e){var r=Object.assign({},e);return this._eventQueue.length<=this._options.maxQueueLength||t==="eventrateexceeded"?(this._eventQueue.push(r),this._sendTimeout||this._startBeaconSending(),this._eventQueue.length<=this._options.maxQueueLength):!1};ta.prototype.flushEvents=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(t&&this._eventQueue.length===1){this._eventQueue.pop();return}this._eventQueue.length&&this._sendBeaconQueue(),this._startBeaconSending()};ta.prototype.destroy=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.destroyed=!0,t?this._clearBeaconQueue():this.flushEvents(),qo.default.clearTimeout(this._sendTimeout)};ta.prototype._clearBeaconQueue=function(){var t=this._eventQueue.length>this._options.maxBeaconSize?this._eventQueue.length-this._options.maxBeaconSize:0,e=this._eventQueue.slice(t);t>0&&Object.assign(e[e.length-1],d1({mux_view_message:"event queue truncated"}));var r=this._createPayload(e);mP(this._beaconUrl,r,!0,function(){})};ta.prototype._sendBeaconQueue=function(){var t=this;if(!this._postInFlight){var e=this._eventQueue.slice(0,this._options.maxBeaconSize);this._eventQueue=this._eventQueue.slice(this._options.maxBeaconSize),this._postInFlight=!0;var r=this._createPayload(e),n=Nr.now();mP(this._beaconUrl,r,!1,function(i,s){s?(t._eventQueue=e.concat(t._eventQueue),t._failureCount+=1,ir.info("Error sending beacon: "+s)):t._failureCount=0,t._roundTripTime=Nr.now()-n,t._postInFlight=!1})}};ta.prototype._getNextBeaconTime=function(){if(!this._failureCount)return this._options.baseTimeBetweenBeacons;var t=Math.pow(2,this._failureCount-1);return t=t*Math.random(),(1+t)*this._options.baseTimeBetweenBeacons};ta.prototype._startBeaconSending=function(){var t=this;qo.default.clearTimeout(this._sendTimeout),!this.destroyed&&(this._sendTimeout=qo.default.setTimeout(function(){t._eventQueue.length&&t._sendBeaconQueue(),t._startBeaconSending()},this._getNextBeaconTime()))};ta.prototype._createPayload=function(t){var e=this,r={transmission_timestamp:Math.round(Nr.now())};this._roundTripTime&&(r.rtt_ms=Math.round(this._roundTripTime));var n,i,s,a=function(){n=JSON.stringify({metadata:r,events:i||t}),s=n.length/1024},o=function(){return s<=e._options.maxPayloadKBSize};return a(),o()||(ir.info("Payload size is too big ("+s+" kb). Removing unnecessary events."),i=t.filter(function(l){return PZ.indexOf(l.e)===-1}),a()),o()||(ir.info("Payload size still too big ("+s+" kb). Cropping fields.."),i.forEach(function(l){for(var u in l){var c=l[u],d=50*1024;typeof c=="string"&&c.length>d&&(l[u]=c.substring(0,d))}}),a()),n};var FZ=function(t){return t.length<=MZ},mP=function(t,e,r,n){if(r&&navigator&&navigator.sendBeacon&&navigator.sendBeacon(t,e)){n();return}if(qo.default.fetch){qo.default.fetch(t,{method:"POST",body:e,headers:{"Content-Type":"text/plain"},keepalive:FZ(e)}).then(function(s){return n(null,s.ok?null:"Error")}).catch(function(s){return n(null,s)});return}if(qo.default.XMLHttpRequest){var i=new qo.default.XMLHttpRequest;i.onreadystatechange=function(){if(i.readyState===4)return n(null,i.status!==200?"error":void 0)},i.open("POST",t),i.setRequestHeader("Content-Type","text/plain"),i.send(e);return}n()},$Z=ta,UZ=["env_key","view_id","view_sequence_number","player_sequence_number","beacon_domain","player_playhead_time","viewer_time","mux_api_version","event","video_id","player_instance_id","player_error_code","player_error_message","player_error_context","player_error_severity","player_error_business_exception"],BZ=["adplay","adplaying","adpause","adfirstquartile","admidpoint","adthirdquartile","adended","adresponse","adrequest"],jZ=["ad_id","ad_creative_id","ad_universal_id"],HZ=["viewstart","error","ended","viewend"],VZ=10*60*1e3,WZ=function(){function t(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};rn(this,t);var i,s,a,o,l,u,c,d,h,f,p,m;fe(this,"mux",void 0),fe(this,"envKey",void 0),fe(this,"options",void 0),fe(this,"eventQueue",void 0),fe(this,"sampleRate",void 0),fe(this,"disableCookies",void 0),fe(this,"respectDoNotTrack",void 0),fe(this,"previousBeaconData",void 0),fe(this,"lastEventTime",void 0),fe(this,"rateLimited",void 0),fe(this,"pageLevelData",void 0),fe(this,"viewerData",void 0),this.mux=e,this.envKey=r,this.options=n,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.eventQueue=new $Z(RZ(this.envKey,this.options));var g;this.sampleRate=(g=this.options.sampleRate)!==null&&g!==void 0?g:1;var v;this.disableCookies=(v=this.options.disableCookies)!==null&&v!==void 0?v:!1;var b;this.respectDoNotTrack=(b=this.options.respectDoNotTrack)!==null&&b!==void 0?b:!1,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.pageLevelData={mux_api_version:this.mux.API_VERSION,mux_embed:this.mux.NAME,mux_embed_version:this.mux.VERSION,viewer_application_name:(i=this.options.platform)===null||i===void 0?void 0:i.name,viewer_application_version:(s=this.options.platform)===null||s===void 0?void 0:s.version,viewer_application_engine:(a=this.options.platform)===null||a===void 0?void 0:a.layout,viewer_device_name:(o=this.options.platform)===null||o===void 0?void 0:o.product,viewer_device_category:"",viewer_device_manufacturer:(l=this.options.platform)===null||l===void 0?void 0:l.manufacturer,viewer_os_family:(c=this.options.platform)===null||c===void 0||(u=c.os)===null||u===void 0?void 0:u.family,viewer_os_architecture:(h=this.options.platform)===null||h===void 0||(d=h.os)===null||d===void 0?void 0:d.architecture,viewer_os_version:(p=this.options.platform)===null||p===void 0||(f=p.os)===null||f===void 0?void 0:f.version,viewer_connection_type:IZ(),page_url:fb.default===null||fb.default===void 0||(m=fb.default.location)===null||m===void 0?void 0:m.href},this.viewerData=this.disableCookies?{}:wZ()}return As(t,[{key:"send",value:function(e,r){if(!(!e||!(r!=null&&r.view_id))){if(this.respectDoNotTrack&&u1())return ir.info("Not sending `"+e+"` because Do Not Track is enabled");if(!r||typeof r!="object")return ir.error("A data object was expected in send() but was not provided");var n=this.disableCookies?{}:AZ(),i=Rx(Mm({},this.pageLevelData,r,n,this.viewerData),{event:e,env_key:this.envKey});i.user_id&&(i.viewer_user_id=i.user_id,delete i.user_id);var s,a=((s=i.mux_sample_number)!==null&&s!==void 0?s:0)>=this.sampleRate,o=this._deduplicateBeaconData(e,i),l=d1(o);if(this.lastEventTime=this.mux.utils.now(),a)return ir.info("Not sending event due to sample rate restriction",e,i,l);if(this.envKey||ir.info("Missing environment key (envKey) - beacons will be dropped if the video source is not a valid mux video URL",e,i,l),!this.rateLimited){if(ir.info("Sending event",e,i,l),this.rateLimited=!this.eventQueue.queueEvent(e,l),this.mux.WINDOW_UNLOADING&&e==="viewend")this.eventQueue.destroy(!0);else if(this.mux.WINDOW_HIDDEN&&e==="hb"?this.eventQueue.flushEvents(!0):HZ.indexOf(e)>=0&&this.eventQueue.flushEvents(),this.rateLimited)return i.event="eventrateexceeded",l=d1(i),this.eventQueue.queueEvent(i.event,l),ir.error("Beaconing disabled due to rate limit.")}}}},{key:"destroy",value:function(){this.eventQueue.destroy(!1)}},{key:"_deduplicateBeaconData",value:function(e,r){var n=this,i={},s=r.view_id;if(s==="-1"||e==="viewstart"||e==="viewend"||!this.previousBeaconData||this.mux.utils.now()-this.lastEventTime>=VZ)i=Mm({},r),s&&(this.previousBeaconData=i),s&&e==="viewend"&&(this.previousBeaconData=null);else{var a=e.indexOf("request")===0;Object.entries(r).forEach(function(o){var l=Qs(o,2),u=l[0],c=l[1];n.previousBeaconData&&(c!==n.previousBeaconData[u]||UZ.indexOf(u)>-1||n.objectHasChanged(a,u,c,n.previousBeaconData[u])||n.eventRequiresKey(e,u))&&(i[u]=c,n.previousBeaconData[u]=c)})}return i}},{key:"objectHasChanged",value:function(e,r,n,i){return!e||r.indexOf("request_")!==0?!1:r==="request_response_headers"||typeof n!="object"||typeof i!="object"?!0:Object.keys(n||{}).length!==Object.keys(i||{}).length}},{key:"eventRequiresKey",value:function(e,r){return!!(e==="renditionchange"&&r.indexOf("video_source_")===0||jZ.includes(r)&&BZ.includes(e))}}]),t}(),GZ=function t(e){rn(this,t);var r=0,n=0,i=0,s=0,a=0,o=0,l=0,u=function(h,f){var p=f.request_start,m=f.request_response_start,g=f.request_response_end,v=f.request_bytes_loaded;s++;var b,y;if(m?(b=m-(p??0),y=(g??0)-m):y=(g??0)-(p??0),y>0&&v&&v>0){var T=v/y*8e3;a++,n+=v,i+=y,e.data.view_min_request_throughput=Math.min(e.data.view_min_request_throughput||1/0,T),e.data.view_average_request_throughput=n/i*8e3,e.data.view_request_count=s,b>0&&(r+=b,e.data.view_max_request_latency=Math.max(e.data.view_max_request_latency||0,b),e.data.view_average_request_latency=r/a)}},c=function(h,f){s++,o++,e.data.view_request_count=s,e.data.view_request_failed_count=o},d=function(h,f){s++,l++,e.data.view_request_count=s,e.data.view_request_canceled_count=l};e.on("requestcompleted",u),e.on("requestfailed",c),e.on("requestcanceled",d)},KZ=GZ,qZ=60*60*1e3,zZ=function t(e){var r=this;rn(this,t),fe(this,"_lastEventTime",void 0),e.on("before*",function(n,i){var s=i.viewer_time,a=Nr.now(),o=r._lastEventTime;if(r._lastEventTime=a,o&&a-o>qZ){var l=Object.keys(e.data).reduce(function(c,d){return d.indexOf("video_")===0?Object.assign(c,fe({},d,e.data[d])):c},{});e.mux.log.info("Received event after at least an hour inactivity, creating a new view");var u=e.playbackHeartbeat._playheadShouldBeProgressing;e._resetView(Object.assign({viewer_time:s},l)),e.playbackHeartbeat._playheadShouldBeProgressing=u,e.playbackHeartbeat._playheadShouldBeProgressing&&n.type!=="play"&&n.type!=="adbreakstart"&&(e.emit("play",{viewer_time:s}),n.type!=="playing"&&e.emit("playing",{viewer_time:s}))}})},YZ=zZ,XZ=["viewstart","ended","loadstart","pause","play","playing","ratechange","waiting","adplay","adpause","adended","aderror","adplaying","adrequest","adresponse","adbreakstart","adbreakend","adfirstquartile","admidpoint","adthirdquartile","rebufferstart","rebufferend","seeked","error","hb","requestcompleted","requestfailed","requestcanceled","renditionchange"],ZZ=new Set(["requestcompleted","requestfailed","requestcanceled"]),QZ=function(t){LX(r,t);var e=MX(r);function r(n,i,s){rn(this,r);var a;a=e.call(this),fe(qe(a),"DOM_CONTENT_LOADED_EVENT_END",void 0),fe(qe(a),"NAVIGATION_START",void 0),fe(qe(a),"_destroyed",void 0),fe(qe(a),"_heartBeatTimeout",void 0),fe(qe(a),"adTracker",void 0),fe(qe(a),"dashjs",void 0),fe(qe(a),"data",void 0),fe(qe(a),"disablePlayheadRebufferTracking",void 0),fe(qe(a),"disableRebufferTracking",void 0),fe(qe(a),"errorTracker",void 0),fe(qe(a),"errorTranslator",void 0),fe(qe(a),"getAdData",void 0),fe(qe(a),"getPlayheadTime",void 0),fe(qe(a),"getStateData",void 0),fe(qe(a),"hlsjs",void 0),fe(qe(a),"id",void 0),fe(qe(a),"longResumeTracker",void 0),fe(qe(a),"minimumRebufferDuration",void 0),fe(qe(a),"mux",void 0),fe(qe(a),"oldEmit",void 0),fe(qe(a),"playbackEventDispatcher",void 0),fe(qe(a),"playbackHeartbeat",void 0),fe(qe(a),"playbackHeartbeatTime",void 0),fe(qe(a),"playheadTime",void 0),fe(qe(a),"seekingTracker",void 0),fe(qe(a),"sustainedRebufferThreshold",void 0),fe(qe(a),"watchTimeTracker",void 0),fe(qe(a),"currentFragmentPDT",void 0),fe(qe(a),"currentFragmentStart",void 0),a.DOM_CONTENT_LOADED_EVENT_END=Om.domContentLoadedEventEnd(),a.NAVIGATION_START=Om.navigationStart();var o={debug:!1,minimumRebufferDuration:250,sustainedRebufferThreshold:1e3,playbackHeartbeatTime:25,beaconDomain:"litix.io",sampleRate:1,disableCookies:!1,respectDoNotTrack:!1,disableRebufferTracking:!1,disablePlayheadRebufferTracking:!1,errorTranslator:function(h){return h}};a.mux=n,a.id=i,s!=null&&s.beaconDomain&&a.mux.log.warn("The `beaconDomain` setting has been deprecated in favor of `beaconCollectionDomain`. Please change your integration to use `beaconCollectionDomain` instead of `beaconDomain`."),s=Object.assign(o,s),s.data=s.data||{},s.data.property_key&&(s.data.env_key=s.data.property_key,delete s.data.property_key),ir.level=s.debug?Bo.DEBUG:Bo.WARN,a.getPlayheadTime=s.getPlayheadTime,a.getStateData=s.getStateData||function(){return{}},a.getAdData=s.getAdData||function(){},a.minimumRebufferDuration=s.minimumRebufferDuration,a.sustainedRebufferThreshold=s.sustainedRebufferThreshold,a.playbackHeartbeatTime=s.playbackHeartbeatTime,a.disableRebufferTracking=s.disableRebufferTracking,a.disableRebufferTracking&&a.mux.log.warn("Disabling rebuffer tracking. This should only be used in specific circumstances as a last resort when your player is known to unreliably track rebuffering."),a.disablePlayheadRebufferTracking=s.disablePlayheadRebufferTracking,a.errorTranslator=s.errorTranslator,a.playbackEventDispatcher=new WZ(n,s.data.env_key,s),a.data={player_instance_id:uh(),mux_sample_rate:s.sampleRate,beacon_domain:s.beaconCollectionDomain||s.beaconDomain},a.data.view_sequence_number=1,a.data.player_sequence_number=1,a.oldEmit=a.emit,a.emit=function(h,f){f=Object.assign({viewer_time:this.mux.utils.now()},f),this.oldEmit(h,f)};var l=(function(){typeof this.data.view_start>"u"&&(this.data.view_start=this.mux.utils.now(),this.emit("viewstart"))}).bind(qe(a));if(a.on("viewinit",function(h,f){this._resetVideoData(),this._resetViewData(),this._resetErrorData(),this._updateStateData(),Object.assign(this.data,f),this._initializeViewData(),this.one("play",l),this.one("adbreakstart",l)}),a.on("videochange",function(h,f){this._resetView(f)}),a.on("programchange",function(h,f){this.data.player_is_paused&&this.mux.log.warn("The `programchange` event is intended to be used when the content changes mid playback without the video source changing, however the video is not currently playing. If the video source is changing please use the videochange event otherwise you will lose startup time information."),this._resetView(Object.assign(f,{view_program_changed:!0})),l(),this.emit("play"),this.emit("playing")}),a.on("fragmentchange",function(h,f){this.currentFragmentPDT=f.currentFragmentPDT,this.currentFragmentStart=f.currentFragmentStart}),a.on("destroy",a.destroy),typeof window<"u"&&typeof window.addEventListener=="function"&&typeof window.removeEventListener=="function"){var u=function(){var h=typeof a.data.view_start<"u";a.mux.WINDOW_HIDDEN=document.visibilityState==="hidden",h&&a.mux.WINDOW_HIDDEN&&(a.data.player_is_paused||a.emit("hb"))};window.addEventListener("visibilitychange",u,!1);var c=function(h){h.persisted||a.destroy()};window.addEventListener("pagehide",c,!1),a.on("destroy",function(){window.removeEventListener("visibilitychange",u),window.removeEventListener("pagehide",c)})}a.on("playerready",function(h,f){Object.assign(this.data,f)}),XZ.forEach(function(h){a.on(h,function(f,p){h.indexOf("ad")!==0&&this._updateStateData(),Object.assign(this.data,p),this._sanitizeData()}),a.on("after"+h,function(){(h!=="error"||this.errorTracker.viewErrored)&&this.send(h)})}),a.on("viewend",function(h,f){Object.assign(a.data,f)});var d=function(h){var f=this.mux.utils.now();this.data.player_init_time&&(this.data.player_startup_time=f-this.data.player_init_time),!this.mux.PLAYER_TRACKED&&this.NAVIGATION_START&&(this.mux.PLAYER_TRACKED=!0,(this.data.player_init_time||this.DOM_CONTENT_LOADED_EVENT_END)&&(this.data.page_load_time=Math.min(this.data.player_init_time||1/0,this.DOM_CONTENT_LOADED_EVENT_END||1/0)-this.NAVIGATION_START)),this.send("playerready"),delete this.data.player_startup_time,delete this.data.page_load_time};return a.one("playerready",d),a.longResumeTracker=new YZ(qe(a)),a.errorTracker=new QX(qe(a)),new TZ(qe(a)),a.seekingTracker=new mZ(qe(a)),a.playheadTime=new iZ(qe(a)),a.playbackHeartbeat=new XX(qe(a)),new hZ(qe(a)),a.watchTimeTracker=new eZ(qe(a)),new rZ(qe(a)),a.adTracker=new bZ(qe(a)),new lZ(qe(a)),new aZ(qe(a)),new cZ(qe(a)),new EZ(qe(a)),new KZ(qe(a)),s.hlsjs&&a.addHLSJS(s),s.dashjs&&a.addDashJS(s),a.emit("viewinit",s.data),a}return As(r,[{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,typeof this.data.view_start<"u"&&(this.emit("viewend"),this.send("viewend")),this.playbackEventDispatcher.destroy(),this.removeHLSJS(),this.removeDashJS(),window.clearTimeout(this._heartBeatTimeout))}},{key:"send",value:function(n){if(this.data.view_id){var i=Object.assign({},this.data),s=["player_program_time","player_manifest_newest_program_time","player_live_edge_program_time","player_program_time","video_holdback","video_part_holdback","video_target_duration","video_part_target_duration"];if(i.video_source_is_live===void 0&&(i.player_source_duration===1/0||i.video_source_duration===1/0?i.video_source_is_live=!0:(i.player_source_duration>0||i.video_source_duration>0)&&(i.video_source_is_live=!1)),i.video_source_is_live||s.forEach(function(u){i[u]=void 0}),i.video_source_url=i.video_source_url||i.player_source_url,i.video_source_url){var a=Qs(ch(i.video_source_url),2),o=a[0],l=a[1];i.video_source_domain=l,i.video_source_hostname=o}delete i.ad_request_id,this.playbackEventDispatcher.send(n,i),this.data.view_sequence_number++,this.data.player_sequence_number++,ZZ.has(n)||this._restartHeartBeat(),n==="viewend"&&delete this.data.view_id}}},{key:"_resetView",value:function(n){this.emit("viewend"),this.send("viewend"),this.emit("viewinit",n)}},{key:"_updateStateData",value:function(){Object.assign(this.data,this.getStateData()),this.playheadTime._updatePlayheadTime(),this._sanitizeData()}},{key:"_sanitizeData",value:function(){var n=this,i=["player_width","player_height","video_source_width","video_source_height","player_playhead_time","video_source_bitrate"];i.forEach(function(a){var o=parseInt(n.data[a],10);n.data[a]=isNaN(o)?void 0:o});var s=["player_source_url","video_source_url"];s.forEach(function(a){if(n.data[a]){var o=n.data[a].toLowerCase();(o.indexOf("data:")===0||o.indexOf("blob:")===0)&&(n.data[a]="MSE style URL")}})}},{key:"_resetVideoData",value:function(){var n=this;Object.keys(this.data).forEach(function(i){i.indexOf("video_")===0&&delete n.data[i]})}},{key:"_resetViewData",value:function(){var n=this;Object.keys(this.data).forEach(function(i){i.indexOf("view_")===0&&delete n.data[i]}),this.data.view_sequence_number=1}},{key:"_resetErrorData",value:function(){delete this.data.player_error_code,delete this.data.player_error_message,delete this.data.player_error_context,delete this.data.player_error_severity,delete this.data.player_error_business_exception}},{key:"_initializeViewData",value:function(){var n=this,i=this.data.view_id=uh(),s=function(){i===n.data.view_id&&Rr(n.data,"player_view_count",1)};this.data.player_is_paused?this.one("play",s):s()}},{key:"_restartHeartBeat",value:function(){var n=this;window.clearTimeout(this._heartBeatTimeout),this._heartBeatTimeout=window.setTimeout(function(){n.data.player_is_paused||n.emit("hb")},1e4)}},{key:"addHLSJS",value:function(n){if(!n.hlsjs){this.mux.log.warn("You must pass a valid hlsjs instance in order to track it.");return}if(this.hlsjs){this.mux.log.warn("An instance of HLS.js is already being monitored for this player.");return}this.hlsjs=n.hlsjs,BX(this.mux,this.id,n.hlsjs,{},n.Hls||window.Hls)}},{key:"removeHLSJS",value:function(){this.hlsjs&&(jX(this.hlsjs),this.hlsjs=void 0)}},{key:"addDashJS",value:function(n){if(!n.dashjs){this.mux.log.warn("You must pass a valid dashjs instance in order to track it.");return}if(this.dashjs){this.mux.log.warn("An instance of Dash.js is already being monitored for this player.");return}this.dashjs=n.dashjs,GX(this.mux,this.id,n.dashjs)}},{key:"removeDashJS",value:function(){this.dashjs&&(KX(this.dashjs),this.dashjs=void 0)}}]),r}(zX),JZ=QZ;Ax();var $c=Ui(EX());function eQ(){return $c.default&&!!($c.default.fullscreenElement||$c.default.webkitFullscreenElement||$c.default.mozFullScreenElement||$c.default.msFullscreenElement)}var tQ=["loadstart","pause","play","playing","seeking","seeked","timeupdate","ratechange","stalled","waiting","error","ended"],rQ={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"};function nQ(t,e,r){var n=Qs(l1(e),3),i=n[0],s=n[1],a=n[2],o=t.log,l=t.utils.getComputedStyle,u=t.utils.secondsToMs,c={automaticErrorTracking:!0};if(i){if(a!=="video"&&a!=="audio")return o.error("The element of `"+s+"` was not a media element.")}else return o.error("No element was found with the `"+s+"` query selector.");i.mux&&(i.mux.destroy(),delete i.mux,o.warn("Already monitoring this video element, replacing existing event listeners")),r=Object.assign(c,r),r.data=Object.assign({player_software:"HTML5 Video Element",player_mux_plugin_name:"VideoElementMonitor",player_mux_plugin_version:t.VERSION},r.data),r.getPlayheadTime=function(){return u(i.currentTime)},r.getStateData=function(){var h,f=this.hlsjs&&this.hlsjs.url,p=this.dashjs&&wx(this.dashjs.getSource==="function")&&this.dashjs.getSource(),m={player_is_paused:i.paused,player_playhead_time:u(i.currentTime),player_width:parseInt(l(i,"width")),player_height:parseInt(l(i,"height")),player_autoplay_on:i.autoplay,player_preload_on:i.preload,player_language_code:i.lang,player_is_fullscreen:eQ(),video_poster_url:i.poster,video_source_url:f||p||i.currentSrc,video_source_duration:u(i.duration),video_source_height:i.videoHeight,video_source_width:i.videoWidth,view_dropped_frame_count:i==null||(h=i.getVideoPlaybackQuality)===null||h===void 0?void 0:h.call(i).droppedVideoFrames},g=r.getPlayheadTime();if(i.getStartDate&&g>0){var v=i.getStartDate();if(v&&typeof v.getTime=="function"&&v.getTime()){var b=v.getTime();if(m.player_program_time=b+g,i.seekable.length>0){var y=b+i.seekable.end(i.seekable.length-1);m.player_live_edge_program_time=y}}}return m},i.mux=i.mux||{},i.mux.deleted=!1,i.mux.emit=function(h,f){t.emit(s,h,f)},i.mux.updateData=function(h){i.mux.emit("hb",h)};var d=function(){o.error("The monitor for this video element has already been destroyed.")};i.mux.destroy=function(){Object.keys(i.mux.listeners).forEach(function(h){i.removeEventListener(h,i.mux.listeners[h],!1)}),delete i.mux.listeners,i.mux.destroy=d,i.mux.swapElement=d,i.mux.emit=d,i.mux.addHLSJS=d,i.mux.addDashJS=d,i.mux.removeHLSJS=d,i.mux.removeDashJS=d,i.mux.updateData=d,i.mux.deleted=!0,t.emit(s,"destroy")},i.mux.swapElement=function(h){var f=Qs(l1(h),3),p=f[0],m=f[1],g=f[2];if(p){if(g!=="video"&&g!=="audio")return t.log.error("The element of `"+m+"` was not a media element.")}else return t.log.error("No element was found with the `"+m+"` query selector.");p.muxId=i.muxId,delete i.muxId,p.mux=p.mux||{},p.mux.listeners=Object.assign({},i.mux.listeners),delete i.mux.listeners,Object.keys(p.mux.listeners).forEach(function(v){i.removeEventListener(v,p.mux.listeners[v],!1),p.addEventListener(v,p.mux.listeners[v],!1)}),p.mux.swapElement=i.mux.swapElement,p.mux.destroy=i.mux.destroy,delete i.mux,i=p},i.mux.addHLSJS=function(h){t.addHLSJS(s,h)},i.mux.addDashJS=function(h){t.addDashJS(s,h)},i.mux.removeHLSJS=function(){t.removeHLSJS(s)},i.mux.removeDashJS=function(){t.removeDashJS(s)},t.init(s,r),t.emit(s,"playerready"),i.paused||(t.emit(s,"play"),i.readyState>2&&t.emit(s,"playing")),i.mux.listeners={},tQ.forEach(function(h){h==="error"&&!r.automaticErrorTracking||(i.mux.listeners[h]=function(){var f={};if(h==="error"){if(!i.error||i.error.code===1)return;f.player_error_code=i.error.code,f.player_error_message=rQ[i.error.code]||i.error.message}t.emit(s,h,f)},i.addEventListener(h,i.mux.listeners[h],!1))})}function iQ(t,e,r,n){var i=n;if(t&&typeof t[e]=="function")try{i=t[e].apply(t,r)}catch(s){ir.info("safeCall error",s)}return i}var Wd=Ui(ws()),zl;Wd.default&&Wd.default.WeakMap&&(zl=new WeakMap);function sQ(t,e){if(!t||!e||!Wd.default||typeof Wd.default.getComputedStyle!="function")return"";var r;return zl&&zl.has(t)&&(r=zl.get(t)),r||(r=Wd.default.getComputedStyle(t,null),zl&&zl.set(t,r)),r.getPropertyValue(e)}function aQ(t){return Math.floor(t*1e3)}var lo={TARGET_DURATION:"#EXT-X-TARGETDURATION",PART_INF:"#EXT-X-PART-INF",SERVER_CONTROL:"#EXT-X-SERVER-CONTROL",INF:"#EXTINF",PROGRAM_DATE_TIME:"#EXT-X-PROGRAM-DATE-TIME",VERSION:"#EXT-X-VERSION",SESSION_DATA:"#EXT-X-SESSION-DATA"},Qg=function(t){return this.buffer="",this.manifest={segments:[],serverControl:{},sessionData:{}},this.currentUri={},this.process(t),this.manifest};Qg.prototype.process=function(t){var e;for(this.buffer+=t,e=this.buffer.indexOf(`
`);e>-1;e=this.buffer.indexOf(`
`))this.processLine(this.buffer.substring(0,e)),this.buffer=this.buffer.substring(e+1)};Qg.prototype.processLine=function(t){var e=t.indexOf(":"),r=cQ(t,e),n=r[0],i=r.length===2?Ix(r[1]):void 0;if(n[0]!=="#")this.currentUri.uri=n,this.manifest.segments.push(this.currentUri),this.manifest.targetDuration&&!("duration"in this.currentUri)&&(this.currentUri.duration=this.manifest.targetDuration),this.currentUri={};else switch(n){case lo.TARGET_DURATION:{if(!isFinite(i)||i<0)return;this.manifest.targetDuration=i,this.setHoldBack();break}case lo.PART_INF:{pb(this.manifest,r),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),this.setHoldBack();break}case lo.SERVER_CONTROL:{pb(this.manifest,r),this.setHoldBack();break}case lo.INF:{i===0?this.currentUri.duration=.01:i>0&&(this.currentUri.duration=i);break}case lo.PROGRAM_DATE_TIME:{var s=i,a=new Date(s);this.manifest.dateTimeString||(this.manifest.dateTimeString=s,this.manifest.dateTimeObject=a),this.currentUri.dateTimeString=s,this.currentUri.dateTimeObject=a;break}case lo.VERSION:{pb(this.manifest,r);break}case lo.SESSION_DATA:{var o=dQ(r[1]),l=oP(o);Object.assign(this.manifest.sessionData,l)}}};Qg.prototype.setHoldBack=function(){var t=this.manifest,e=t.serverControl,r=t.targetDuration,n=t.partTargetDuration;if(e){var i="holdBack",s="partHoldBack",a=r&&r*3,o=n&&n*2;r&&!e.hasOwnProperty(i)&&(e[i]=a),a&&e[i]<a&&(e[i]=a),n&&!e.hasOwnProperty(s)&&(e[s]=n*3),n&&e[s]<o&&(e[s]=o)}};var pb=function(t,e){var r=gP(e[0].replace("#EXT-X-","")),n;uQ(e[1])?(n={},n=Object.assign(lQ(e[1]),n)):n=Ix(e[1]),t[r]=n},gP=function(t){return t.toLowerCase().replace(/-(\w)/g,function(e){return e[1].toUpperCase()})},Ix=function(t){if(t.toLowerCase()==="yes"||t.toLowerCase()==="no")return t.toLowerCase()==="yes";var e=t.indexOf(":")!==-1?t:parseFloat(t);return isNaN(e)?t:e},oQ=function(t){var e={},r=t.split("=");if(r.length>1){var n=gP(r[0]);e[n]=Ix(r[1])}return e},lQ=function(t){for(var e=t.split(","),r={},n=0;e.length>n;n++){var i=e[n],s=oQ(i);r=Object.assign(s,r)}return r},uQ=function(t){return t.indexOf("=")>-1},cQ=function(t,e){return e===-1?[t]:[t.substring(0,e),t.substring(e+1)]},dQ=function(t){var e={};if(t){var r=t.search(","),n=t.slice(0,r),i=t.slice(r+1),s=[n,i];return s.forEach(function(a,o){for(var l=a.replace(/['"]+/g,"").split("="),u=0;u<l.length;u++)l[u]==="DATA-ID"&&(e["DATA-ID"]=l[1-u]),l[u]==="VALUE"&&(e.VALUE=l[1-u])}),{data:e}}},hQ=Qg,fQ={safeCall:iQ,safeIncrement:Rr,getComputedStyle:sQ,secondsToMs:aQ,assign:Object.assign,headersStringToObject:Cx,cdnHeadersToRequestId:Pm,extractHostnameAndDomain:ch,extractHostname:ki,manifestParser:hQ,generateShortID:sP,generateUUID:uh,now:Nr.now},pQ=fQ,mQ={PLAYER_READY:"playerready",VIEW_INIT:"viewinit",VIDEO_CHANGE:"videochange",PLAY:"play",PAUSE:"pause",PLAYING:"playing",TIME_UPDATE:"timeupdate",SEEKING:"seeking",SEEKED:"seeked",REBUFFER_START:"rebufferstart",REBUFFER_END:"rebufferend",ERROR:"error",ENDED:"ended",RENDITION_CHANGE:"renditionchange",ORIENTATION_CHANGE:"orientationchange",AD_REQUEST:"adrequest",AD_RESPONSE:"adresponse",AD_BREAK_START:"adbreakstart",AD_PLAY:"adplay",AD_PLAYING:"adplaying",AD_PAUSE:"adpause",AD_FIRST_QUARTILE:"adfirstquartile",AD_MID_POINT:"admidpoint",AD_THIRD_QUARTILE:"adthirdquartile",AD_ENDED:"adended",AD_BREAK_END:"adbreakend",AD_ERROR:"aderror",REQUEST_COMPLETED:"requestcompleted",REQUEST_FAILED:"requestfailed",REQUEST_CANCELLED:"requestcanceled",HEARTBEAT:"hb",DESTROY:"destroy"},gQ=mQ,vQ="mux-embed",bQ="5.4.1",yQ="2.1",Nn={},Wa=function(t){var e=arguments;typeof t=="string"?Wa.hasOwnProperty(t)?Vd.default.setTimeout(function(){e=Array.prototype.splice.call(e,1),Wa[t].apply(null,e)},0):ir.warn("`"+t+"` is an unknown task"):typeof t=="function"?Vd.default.setTimeout(function(){t(Wa)},0):ir.warn("`"+t+"` is invalid.")},EQ={loaded:Nr.now(),NAME:vQ,VERSION:bQ,API_VERSION:yQ,PLAYER_TRACKED:!1,monitor:function(t,e){return nQ(Wa,t,e)},destroyMonitor:function(t){var e=Qs(l1(t),1),r=e[0];r&&r.mux&&typeof r.mux.destroy=="function"?r.mux.destroy():ir.error("A video element monitor for `"+t+"` has not been initialized via `mux.monitor`.")},addHLSJS:function(t,e){var r=ma(t);Nn[r]?Nn[r].addHLSJS(e):ir.error("A monitor for `"+r+"` has not been initialized.")},addDashJS:function(t,e){var r=ma(t);Nn[r]?Nn[r].addDashJS(e):ir.error("A monitor for `"+r+"` has not been initialized.")},removeHLSJS:function(t){var e=ma(t);Nn[e]?Nn[e].removeHLSJS():ir.error("A monitor for `"+e+"` has not been initialized.")},removeDashJS:function(t){var e=ma(t);Nn[e]?Nn[e].removeDashJS():ir.error("A monitor for `"+e+"` has not been initialized.")},init:function(t,e){u1()&&e&&e.respectDoNotTrack&&ir.info("The browser's Do Not Track flag is enabled - Mux beaconing is disabled.");var r=ma(t);Nn[r]=new JZ(Wa,r,e)},emit:function(t,e,r){var n=ma(t);Nn[n]?(Nn[n].emit(e,r),e==="destroy"&&delete Nn[n]):ir.error("A monitor for `"+n+"` has not been initialized.")},updateData:function(t,e){var r=ma(t);Nn[r]?Nn[r].emit("hb",e):ir.error("A monitor for `"+r+"` has not been initialized.")},checkDoNotTrack:u1,log:ir,utils:pQ,events:gQ,WINDOW_HIDDEN:!1,WINDOW_UNLOADING:!1};Object.assign(Wa,EQ);typeof Vd.default<"u"&&typeof Vd.default.addEventListener=="function"&&Vd.default.addEventListener("pagehide",function(t){t.persisted||(Wa.WINDOW_UNLOADING=!0)},!1);var kx=Wa;/*!
* JavaScript Cookie v2.1.3
* https://github.com/js-cookie/js-cookie
*
* Copyright 2006, 2015 Klaus Hartl & Fagner Brack
* Released under the MIT license
*/function _Q(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vP={exports:{}};(function(t,e){(function(r){var n=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,s=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(l,u,c){if(c=c||{},l=l.trim(),u=u.trim(),!u){if(!c.alwaysNormalize)return l;var d=o.parseURL(l);if(!d)throw new Error("Error trying to parse base URL.");return d.path=o.normalizePath(d.path),o.buildURLFromParts(d)}var h=o.parseURL(u);if(!h)throw new Error("Error trying to parse relative URL.");if(h.scheme)return c.alwaysNormalize?(h.path=o.normalizePath(h.path),o.buildURLFromParts(h)):u;var f=o.parseURL(l);if(!f)throw new Error("Error trying to parse base URL.");if(!f.netLoc&&f.path&&f.path[0]!=="/"){var p=i.exec(f.path);f.netLoc=p[1],f.path=p[2]}f.netLoc&&!f.path&&(f.path="/");var m={scheme:f.scheme,netLoc:h.netLoc,path:null,params:h.params,query:h.query,fragment:h.fragment};if(!h.netLoc&&(m.netLoc=f.netLoc,h.path[0]!=="/"))if(!h.path)m.path=f.path,h.params||(m.params=f.params,h.query||(m.query=f.query));else{var g=f.path,v=g.substring(0,g.lastIndexOf("/")+1)+h.path;m.path=o.normalizePath(v)}return m.path===null&&(m.path=c.alwaysNormalize?o.normalizePath(h.path):h.path),o.buildURLFromParts(m)},parseURL:function(l){var u=n.exec(l);return u?{scheme:u[1]||"",netLoc:u[2]||"",path:u[3]||"",params:u[4]||"",query:u[5]||"",fragment:u[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(s,"");l.length!==(l=l.replace(a,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};t.exports=o})()})(vP);var Lx=vP.exports;function bC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function tn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bC(Object(r),!0).forEach(function(n){SQ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function TQ(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xQ(t){var e=TQ(t,"string");return typeof e=="symbol"?e:String(e)}function SQ(t,e,r){return e=xQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Cr(){return Cr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cr.apply(this,arguments)}const xe=Number.isFinite||function(t){return typeof t=="number"&&isFinite(t)},wQ=Number.isSafeInteger||function(t){return typeof t=="number"&&Math.abs(t)<=AQ},AQ=Number.MAX_SAFE_INTEGER||9007199254740991;let w=function(t){return t.MEDIA_ATTACHING="hlsMediaAttaching",t.MEDIA_ATTACHED="hlsMediaAttached",t.MEDIA_DETACHING="hlsMediaDetaching",t.MEDIA_DETACHED="hlsMediaDetached",t.BUFFER_RESET="hlsBufferReset",t.BUFFER_CODECS="hlsBufferCodecs",t.BUFFER_CREATED="hlsBufferCreated",t.BUFFER_APPENDING="hlsBufferAppending",t.BUFFER_APPENDED="hlsBufferAppended",t.BUFFER_EOS="hlsBufferEos",t.BUFFER_FLUSHING="hlsBufferFlushing",t.BUFFER_FLUSHED="hlsBufferFlushed",t.MANIFEST_LOADING="hlsManifestLoading",t.MANIFEST_LOADED="hlsManifestLoaded",t.MANIFEST_PARSED="hlsManifestParsed",t.LEVEL_SWITCHING="hlsLevelSwitching",t.LEVEL_SWITCHED="hlsLevelSwitched",t.LEVEL_LOADING="hlsLevelLoading",t.LEVEL_LOADED="hlsLevelLoaded",t.LEVEL_UPDATED="hlsLevelUpdated",t.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",t.LEVELS_UPDATED="hlsLevelsUpdated",t.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",t.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",t.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",t.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",t.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",t.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",t.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",t.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",t.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",t.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",t.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",t.CUES_PARSED="hlsCuesParsed",t.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",t.INIT_PTS_FOUND="hlsInitPtsFound",t.FRAG_LOADING="hlsFragLoading",t.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",t.FRAG_LOADED="hlsFragLoaded",t.FRAG_DECRYPTED="hlsFragDecrypted",t.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",t.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",t.FRAG_PARSING_METADATA="hlsFragParsingMetadata",t.FRAG_PARSED="hlsFragParsed",t.FRAG_BUFFERED="hlsFragBuffered",t.FRAG_CHANGED="hlsFragChanged",t.FPS_DROP="hlsFpsDrop",t.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",t.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",t.ERROR="hlsError",t.DESTROYING="hlsDestroying",t.KEY_LOADING="hlsKeyLoading",t.KEY_LOADED="hlsKeyLoaded",t.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",t.BACK_BUFFER_REACHED="hlsBackBufferReached",t.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",t}({}),Ve=function(t){return t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError",t}({}),J=function(t){return t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",t.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",t.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",t.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_PARSING_ERROR="levelParsingError",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",t.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.FRAG_GAP="fragGap",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException",t.INTERNAL_ABORTED="aborted",t.UNKNOWN="unknown",t}({});const vo=function(){},h1={trace:vo,debug:vo,log:vo,warn:vo,info:vo,error:vo};let Gd=h1;function RQ(t){const e=self.console[t];return e?e.bind(self.console,`[${t}] >`):vo}function CQ(t,...e){e.forEach(function(r){Gd[r]=t[r]?t[r].bind(t):RQ(r)})}function IQ(t,e){if(typeof console=="object"&&t===!0||typeof t=="object"){CQ(t,"debug","log","info","warn","error");try{Gd.log(`Debug logs enabled for "${e}" in hls.js version 1.5.17`)}catch{Gd=h1}}else Gd=h1}const G=Gd,kQ=/^(\d+)x(\d+)$/,yC=/(.+?)=(".*?"|.*?)(?:,|$)/g;class ur{constructor(e){typeof e=="string"&&(e=ur.parseAttrList(e)),Cr(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const r=parseInt(this[e],10);return r>Number.MAX_SAFE_INTEGER?1/0:r}hexadecimalInteger(e){if(this[e]){let r=(this[e]||"0x").slice(2);r=(r.length&1?"0":"")+r;const n=new Uint8Array(r.length/2);for(let i=0;i<r.length/2;i++)n[i]=parseInt(r.slice(i*2,i*2+2),16);return n}else return null}hexadecimalIntegerAsNumber(e){const r=parseInt(this[e],16);return r>Number.MAX_SAFE_INTEGER?1/0:r}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,r){const n=this[e];return n?parseFloat(n):r}enumeratedString(e){return this[e]}bool(e){return this[e]==="YES"}decimalResolution(e){const r=kQ.exec(this[e]);if(r!==null)return{width:parseInt(r[1],10),height:parseInt(r[2],10)}}static parseAttrList(e){let r;const n={},i='"';for(yC.lastIndex=0;(r=yC.exec(e))!==null;){let s=r[2];s.indexOf(i)===0&&s.lastIndexOf(i)===s.length-1&&(s=s.slice(1,-1));const a=r[1].trim();n[a]=s}return n}}function LQ(t){return t!=="ID"&&t!=="CLASS"&&t!=="START-DATE"&&t!=="DURATION"&&t!=="END-DATE"&&t!=="END-ON-NEXT"}function DQ(t){return t==="SCTE35-OUT"||t==="SCTE35-IN"}class bP{constructor(e,r){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,r){const n=r.attr;for(const i in n)if(Object.prototype.hasOwnProperty.call(e,i)&&e[i]!==n[i]){G.warn(`DATERANGE tag attribute: "${i}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=i;break}e=Cr(new ur({}),n,e)}if(this.attr=e,this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const n=new Date(this.attr["END-DATE"]);xe(n.getTime())&&(this._endDate=n)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const e=this.duration;return e!==null?new Date(this._startDate.getTime()+e*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(xe(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&xe(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class Jg{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var Mt={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class yP{constructor(e){this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams={[Mt.AUDIO]:null,[Mt.VIDEO]:null,[Mt.AUDIOVIDEO]:null},this.baseurl=e}setByteRange(e,r){const n=e.split("@",2);let i;n.length===1?i=(r==null?void 0:r.byteRangeEndOffset)||0:i=parseInt(n[1]),this._byteRange=[i,parseInt(n[0])+i]}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Lx.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}}class mb extends yP{constructor(e,r){super(r),this._decryptdata=null,this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.stats=new Jg,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const r=this.levelkeys.identity;if(r)this._decryptdata=r.getDecryptData(this.sn);else{const n=Object.keys(this.levelkeys);if(n.length===1)return this._decryptdata=this.levelkeys[n[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null||!xe(this.programDateTime))return null;const e=xe(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){const r=Object.keys(this.levelkeys),n=r.length;if(n>1||n===1&&this.levelkeys[r[0]].encrypted)return!0}return!1}setKeyFormat(e){if(this.levelkeys){const r=this.levelkeys[e];r&&!this._decryptdata&&(this._decryptdata=r.getDecryptData(this.sn))}}abortRequests(){var e,r;(e=this.loader)==null||e.abort(),(r=this.keyLoader)==null||r.abort()}setElementaryStreamInfo(e,r,n,i,s,a=!1){const{elementaryStreams:o}=this,l=o[e];if(!l){o[e]={startPTS:r,endPTS:n,startDTS:i,endDTS:s,partial:a};return}l.startPTS=Math.min(l.startPTS,r),l.endPTS=Math.max(l.endPTS,n),l.startDTS=Math.min(l.startDTS,i),l.endDTS=Math.max(l.endDTS,s)}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[Mt.AUDIO]=null,e[Mt.VIDEO]=null,e[Mt.AUDIOVIDEO]=null}}let OQ=class extends yP{constructor(e,r,n,i,s){super(n),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.stats=new Jg,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=r,this.index=i;const a=e.enumeratedString("BYTERANGE");a&&this.setByteRange(a,s),s&&(this.fragOffset=s.fragOffset+s.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}};const MQ=10;class PQ{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const r=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!r||!this.live,this.advanced=this.endSN>e.endSN||r>0||r===0&&n>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay}get hasProgramDateTime(){return this.fragments.length?xe(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||MQ}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return(e=this.fragments)!=null&&e.length?this.fragments[this.fragments.length-1].end:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}function Dx(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}function NQ(t){const e=f1(t).subarray(0,16),r=new Uint8Array(16);return r.set(e,16-e.length),r}function FQ(t){const e=function(n,i,s){const a=n[i];n[i]=n[s],n[s]=a};e(t,0,3),e(t,1,2),e(t,4,5),e(t,6,7)}function $Q(t){const e=t.split(":");let r=null;if(e[0]==="data"&&e.length===2){const n=e[1].split(";"),i=n[n.length-1].split(",");if(i.length===2){const s=i[0]==="base64",a=i[1];s?(n.splice(-1,1),r=Dx(a)):r=NQ(a)}}return r}function f1(t){return Uint8Array.from(unescape(encodeURIComponent(t)),e=>e.charCodeAt(0))}const ec=typeof self<"u"?self:void 0;var Qt={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},Hn={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function EC(t){switch(t){case Hn.FAIRPLAY:return Qt.FAIRPLAY;case Hn.PLAYREADY:return Qt.PLAYREADY;case Hn.WIDEVINE:return Qt.WIDEVINE;case Hn.CLEARKEY:return Qt.CLEARKEY}}var ld={CENC:"1077efecc0b24d02ace33c1e52e2fb4b",CLEARKEY:"e2719d58a985b3c9781ab030af78d30e",FAIRPLAY:"94ce86fb07ff4f43adb893d2fa968ca2",PLAYREADY:"9a04f07998404286ab92e65be0885f95",WIDEVINE:"edef8ba979d64acea3c827dcd51d21ed"};function _C(t){if(t===ld.WIDEVINE)return Qt.WIDEVINE;if(t===ld.PLAYREADY)return Qt.PLAYREADY;if(t===ld.CENC||t===ld.CLEARKEY)return Qt.CLEARKEY}function TC(t){switch(t){case Qt.FAIRPLAY:return Hn.FAIRPLAY;case Qt.PLAYREADY:return Hn.PLAYREADY;case Qt.WIDEVINE:return Hn.WIDEVINE;case Qt.CLEARKEY:return Hn.CLEARKEY}}function gb(t){const{drmSystems:e,widevineLicenseUrl:r}=t,n=e?[Qt.FAIRPLAY,Qt.WIDEVINE,Qt.PLAYREADY,Qt.CLEARKEY].filter(i=>!!e[i]):[];return!n[Qt.WIDEVINE]&&r&&n.push(Qt.WIDEVINE),n}const EP=function(t){return ec!=null&&(t=ec.navigator)!=null&&t.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function UQ(t,e,r,n){let i;switch(t){case Qt.FAIRPLAY:i=["cenc","sinf"];break;case Qt.WIDEVINE:case Qt.PLAYREADY:i=["cenc"];break;case Qt.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${t}`)}return BQ(i,e,r,n)}function BQ(t,e,r,n){return[{initDataTypes:t,persistentState:n.persistentState||"optional",distinctiveIdentifier:n.distinctiveIdentifier||"optional",sessionTypes:n.sessionTypes||[n.sessionType||"temporary"],audioCapabilities:e.map(s=>({contentType:`audio/mp4; codecs="${s}"`,robustness:n.audioRobustness||"",encryptionScheme:n.audioEncryptionScheme||null})),videoCapabilities:r.map(s=>({contentType:`video/mp4; codecs="${s}"`,robustness:n.videoRobustness||"",encryptionScheme:n.videoEncryptionScheme||null}))}]}function sl(t,e,r){return Uint8Array.prototype.slice?t.slice(e,r):new Uint8Array(Array.prototype.slice.call(t,e,r))}const Ox=(t,e)=>e+10<=t.length&&t[e]===73&&t[e+1]===68&&t[e+2]===51&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128,_P=(t,e)=>e+10<=t.length&&t[e]===51&&t[e+1]===68&&t[e+2]===73&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128,dh=(t,e)=>{const r=e;let n=0;for(;Ox(t,e);){n+=10;const i=ev(t,e+6);n+=i,_P(t,e+10)&&(n+=10),e+=n}if(n>0)return t.subarray(r,r+n)},ev=(t,e)=>{let r=0;return r=(t[e]&127)<<21,r|=(t[e+1]&127)<<14,r|=(t[e+2]&127)<<7,r|=t[e+3]&127,r},jQ=(t,e)=>Ox(t,e)&&ev(t,e+6)+10<=t.length-e,Mx=t=>{const e=xP(t);for(let r=0;r<e.length;r++){const n=e[r];if(TP(n))return qQ(n)}},TP=t=>t&&t.key==="PRIV"&&t.info==="com.apple.streaming.transportStreamTimestamp",HQ=t=>{const e=String.fromCharCode(t[0],t[1],t[2],t[3]),r=ev(t,4),n=10;return{type:e,size:r,data:t.subarray(n,n+r)}},xP=t=>{let e=0;const r=[];for(;Ox(t,e);){const n=ev(t,e+6);e+=10;const i=e+n;for(;e+8<i;){const s=HQ(t.subarray(e)),a=VQ(s);a&&r.push(a),e+=s.size+10}_P(t,e)&&(e+=10)}return r},VQ=t=>t.type==="PRIV"?WQ(t):t.type[0]==="W"?KQ(t):GQ(t),WQ=t=>{if(t.size<2)return;const e=Es(t.data,!0),r=new Uint8Array(t.data.subarray(e.length+1));return{key:t.type,info:e,data:r.buffer}},GQ=t=>{if(t.size<2)return;if(t.type==="TXXX"){let r=1;const n=Es(t.data.subarray(r),!0);r+=n.length+1;const i=Es(t.data.subarray(r));return{key:t.type,info:n,data:i}}const e=Es(t.data.subarray(1));return{key:t.type,data:e}},KQ=t=>{if(t.type==="WXXX"){if(t.size<2)return;let r=1;const n=Es(t.data.subarray(r),!0);r+=n.length+1;const i=Es(t.data.subarray(r));return{key:t.type,info:n,data:i}}const e=Es(t.data);return{key:t.type,data:e}},qQ=t=>{if(t.data.byteLength===8){const e=new Uint8Array(t.data),r=e[3]&1;let n=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return n/=45,r&&(n+=4772185884e-2),Math.round(n)}},Es=(t,e=!1)=>{const r=zQ();if(r){const u=r.decode(t);if(e){const c=u.indexOf("\0");return c!==-1?u.substring(0,c):u}return u.replace(/\0/g,"")}const n=t.length;let i,s,a,o="",l=0;for(;l<n;){if(i=t[l++],i===0&&e)return o;if(i===0||i===3)continue;switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(i);break;case 12:case 13:s=t[l++],o+=String.fromCharCode((i&31)<<6|s&63);break;case 14:s=t[l++],a=t[l++],o+=String.fromCharCode((i&15)<<12|(s&63)<<6|(a&63)<<0);break}}return o};let vb;function zQ(){if(!navigator.userAgent.includes("PlayStation 4"))return!vb&&typeof self.TextDecoder<"u"&&(vb=new self.TextDecoder("utf-8")),vb}const as={hexDump:function(t){let e="";for(let r=0;r<t.length;r++){let n=t[r].toString(16);n.length<2&&(n="0"+n),e+=n}return e}},Nm=Math.pow(2,32)-1,YQ=[].push,SP={video:1,audio:2,id3:3,text:4};function Lr(t){return String.fromCharCode.apply(null,t)}function wP(t,e){const r=t[e]<<8|t[e+1];return r<0?65536+r:r}function Be(t,e){const r=AP(t,e);return r<0?4294967296+r:r}function xC(t,e){let r=Be(t,e);return r*=Math.pow(2,32),r+=Be(t,e+4),r}function AP(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function bb(t,e,r){t[e]=r>>24,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=r&255}function XQ(t){const e=t.byteLength;for(let r=0;r<e;){const n=Be(t,r);if(n>8&&t[r+4]===109&&t[r+5]===111&&t[r+6]===111&&t[r+7]===102)return!0;r=n>1?r+n:e}return!1}function Xe(t,e){const r=[];if(!e.length)return r;const n=t.byteLength;for(let i=0;i<n;){const s=Be(t,i),a=Lr(t.subarray(i+4,i+8)),o=s>1?i+s:n;if(a===e[0])if(e.length===1)r.push(t.subarray(i+8,o));else{const l=Xe(t.subarray(i+8,o),e.slice(1));l.length&&YQ.apply(r,l)}i=o}return r}function ZQ(t){const e=[],r=t[0];let n=8;const i=Be(t,n);n+=4;let s=0,a=0;r===0?(s=Be(t,n),a=Be(t,n+4),n+=8):(s=xC(t,n),a=xC(t,n+8),n+=16),n+=2;let o=t.length+a;const l=wP(t,n);n+=2;for(let u=0;u<l;u++){let c=n;const d=Be(t,c);c+=4;const h=d&2147483647;if((d&2147483648)>>>31===1)return G.warn("SIDX has hierarchical references (not supported)"),null;const p=Be(t,c);c+=4,e.push({referenceSize:h,subsegmentDuration:p,info:{duration:p/i,start:o,end:o+h-1}}),o+=h,c+=4,n=c}return{earliestPresentationTime:s,timescale:i,version:r,referencesCount:l,references:e}}function RP(t){const e=[],r=Xe(t,["moov","trak"]);for(let i=0;i<r.length;i++){const s=r[i],a=Xe(s,["tkhd"])[0];if(a){let o=a[0];const l=Be(a,o===0?12:20),u=Xe(s,["mdia","mdhd"])[0];if(u){o=u[0];const c=Be(u,o===0?12:20),d=Xe(s,["mdia","hdlr"])[0];if(d){const h=Lr(d.subarray(8,12)),f={soun:Mt.AUDIO,vide:Mt.VIDEO}[h];if(f){const p=Xe(s,["mdia","minf","stbl","stsd"])[0],m=QQ(p);e[l]={timescale:c,type:f},e[f]=tn({timescale:c,id:l},m)}}}}}return Xe(t,["moov","mvex","trex"]).forEach(i=>{const s=Be(i,4),a=e[s];a&&(a.default={duration:Be(i,12),flags:Be(i,20)})}),e}function QQ(t){const e=t.subarray(8),r=e.subarray(86),n=Lr(e.subarray(4,8));let i=n;const s=n==="enca"||n==="encv";if(s){const o=Xe(e,[n])[0].subarray(n==="enca"?28:78);Xe(o,["sinf"]).forEach(u=>{const c=Xe(u,["schm"])[0];if(c){const d=Lr(c.subarray(4,8));if(d==="cbcs"||d==="cenc"){const h=Xe(u,["frma"])[0];h&&(i=Lr(h))}}})}switch(i){case"avc1":case"avc2":case"avc3":case"avc4":{const a=Xe(r,["avcC"])[0];i+="."+wf(a[1])+wf(a[2])+wf(a[3]);break}case"mp4a":{const a=Xe(e,[n])[0],o=Xe(a.subarray(28),["esds"])[0];if(o&&o.length>12){let l=4;if(o[l++]!==3)break;l=yb(o,l),l+=2;const u=o[l++];if(u&128&&(l+=2),u&64&&(l+=o[l++]),o[l++]!==4)break;l=yb(o,l);const c=o[l++];if(c===64)i+="."+wf(c);else break;if(l+=12,o[l++]!==5)break;l=yb(o,l);const d=o[l++];let h=(d&248)>>3;h===31&&(h+=1+((d&7)<<3)+((o[l]&224)>>5)),i+="."+h}break}case"hvc1":case"hev1":{const a=Xe(r,["hvcC"])[0],o=a[1],l=["","A","B","C"][o>>6],u=o&31,c=Be(a,2),d=(o&32)>>5?"H":"L",h=a[12],f=a.subarray(6,12);i+="."+l+u,i+="."+c.toString(16).toUpperCase(),i+="."+d+h;let p="";for(let m=f.length;m--;){const g=f[m];(g||p)&&(p="."+g.toString(16).toUpperCase()+p)}i+=p;break}case"dvh1":case"dvhe":{const a=Xe(r,["dvcC"])[0],o=a[2]>>1&127,l=a[2]<<5&32|a[3]>>3&31;i+="."+Wi(o)+"."+Wi(l);break}case"vp09":{const a=Xe(r,["vpcC"])[0],o=a[4],l=a[5],u=a[6]>>4&15;i+="."+Wi(o)+"."+Wi(l)+"."+Wi(u);break}case"av01":{const a=Xe(r,["av1C"])[0],o=a[1]>>>5,l=a[1]&31,u=a[2]>>>7?"H":"M",c=(a[2]&64)>>6,d=(a[2]&32)>>5,h=o===2&&c?d?12:10:c?10:8,f=(a[2]&16)>>4,p=(a[2]&8)>>3,m=(a[2]&4)>>2,g=a[2]&3;i+="."+o+"."+Wi(l)+u+"."+Wi(h)+"."+f+"."+p+m+g+"."+Wi(1)+"."+Wi(1)+"."+Wi(1)+"."+0;break}}return{codec:i,encrypted:s}}function yb(t,e){const r=e+5;for(;t[e++]&128&&e<r;);return e}function wf(t){return("0"+t.toString(16).toUpperCase()).slice(-2)}function Wi(t){return(t<10?"0":"")+t}function JQ(t,e){if(!t||!e)return t;const r=e.keyId;return r&&e.isCommonEncryption&&Xe(t,["moov","trak"]).forEach(i=>{const a=Xe(i,["mdia","minf","stbl","stsd"])[0].subarray(8);let o=Xe(a,["enca"]);const l=o.length>0;l||(o=Xe(a,["encv"])),o.forEach(u=>{const c=l?u.subarray(28):u.subarray(78);Xe(c,["sinf"]).forEach(h=>{const f=CP(h);if(f){const p=f.subarray(8,24);p.some(m=>m!==0)||(G.log(`[eme] Patching keyId in 'enc${l?"a":"v"}>sinf>>tenc' box: ${as.hexDump(p)} -> ${as.hexDump(r)}`),f.set(r,8))}})})}),t}function CP(t){const e=Xe(t,["schm"])[0];if(e){const r=Lr(e.subarray(4,8));if(r==="cbcs"||r==="cenc")return Xe(t,["schi","tenc"])[0]}return null}function eJ(t,e){return Xe(e,["moof","traf"]).reduce((r,n)=>{const i=Xe(n,["tfdt"])[0],s=i[0],a=Xe(n,["tfhd"]).reduce((o,l)=>{const u=Be(l,4),c=t[u];if(c){let d=Be(i,4);if(s===1){if(d===Nm)return G.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),o;d*=Nm+1,d+=Be(i,8)}const h=c.timescale||9e4,f=d/h;if(xe(f)&&(o===null||f<o))return f}return o},null);return a!==null&&xe(a)&&(r===null||a<r)?a:r},null)}function tJ(t,e){let r=0,n=0,i=0;const s=Xe(t,["moof","traf"]);for(let a=0;a<s.length;a++){const o=s[a],l=Xe(o,["tfhd"])[0],u=Be(l,4),c=e[u];if(!c)continue;const d=c.default,h=Be(l,0)|(d==null?void 0:d.flags);let f=d==null?void 0:d.duration;h&8&&(h&2?f=Be(l,12):f=Be(l,8));const p=c.timescale||9e4,m=Xe(o,["trun"]);for(let g=0;g<m.length;g++){if(r=rJ(m[g]),!r&&f){const v=Be(m[g],4);r=f*v}c.type===Mt.VIDEO?n+=r/p:c.type===Mt.AUDIO&&(i+=r/p)}}if(n===0&&i===0){let a=1/0,o=0,l=0;const u=Xe(t,["sidx"]);for(let c=0;c<u.length;c++){const d=ZQ(u[c]);if(d!=null&&d.references){a=Math.min(a,d.earliestPresentationTime/d.timescale);const h=d.references.reduce((f,p)=>f+p.info.duration||0,0);o=Math.max(o,h+d.earliestPresentationTime/d.timescale),l=o-a}}if(l&&xe(l))return l}return n||i}function rJ(t){const e=Be(t,0);let r=8;e&1&&(r+=4),e&4&&(r+=4);let n=0;const i=Be(t,4);for(let s=0;s<i;s++){if(e&256){const a=Be(t,r);n+=a,r+=4}e&512&&(r+=4),e&1024&&(r+=4),e&2048&&(r+=4)}return n}function nJ(t,e,r){Xe(e,["moof","traf"]).forEach(n=>{Xe(n,["tfhd"]).forEach(i=>{const s=Be(i,4),a=t[s];if(!a)return;const o=a.timescale||9e4;Xe(n,["tfdt"]).forEach(l=>{const u=l[0],c=r*o;if(c){let d=Be(l,4);if(u===0)d-=c,d=Math.max(d,0),bb(l,4,d);else{d*=Math.pow(2,32),d+=Be(l,8),d-=c,d=Math.max(d,0);const h=Math.floor(d/(Nm+1)),f=Math.floor(d%(Nm+1));bb(l,4,h),bb(l,8,f)}}})})})}function iJ(t){const e={valid:null,remainder:null},r=Xe(t,["moof"]);if(r.length<2)return e.remainder=t,e;const n=r[r.length-1];return e.valid=sl(t,0,n.byteOffset-8),e.remainder=sl(t,n.byteOffset-8),e}function Ei(t,e){const r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r}function SC(t,e){const r=[],n=e.samples,i=e.timescale,s=e.id;let a=!1;return Xe(n,["moof"]).map(l=>{const u=l.byteOffset-8;Xe(l,["traf"]).map(d=>{const h=Xe(d,["tfdt"]).map(f=>{const p=f[0];let m=Be(f,4);return p===1&&(m*=Math.pow(2,32),m+=Be(f,8)),m/i})[0];return h!==void 0&&(t=h),Xe(d,["tfhd"]).map(f=>{const p=Be(f,4),m=Be(f,0)&16777215,g=(m&1)!==0,v=(m&2)!==0,b=(m&8)!==0;let y=0;const T=(m&16)!==0;let x=0;const _=(m&32)!==0;let S=8;p===s&&(g&&(S+=8),v&&(S+=4),b&&(y=Be(f,S),S+=4),T&&(x=Be(f,S),S+=4),_&&(S+=4),e.type==="video"&&(a=sJ(e.codec)),Xe(d,["trun"]).map(A=>{const k=A[0],I=Be(A,0)&16777215,C=(I&1)!==0;let N=0;const P=(I&4)!==0,V=(I&256)!==0;let M=0;const U=(I&512)!==0;let B=0;const X=(I&1024)!==0,te=(I&2048)!==0;let D=0;const L=Be(A,4);let Y=8;C&&(N=Be(A,Y),Y+=4),P&&(Y+=4);let $=N+u;for(let j=0;j<L;j++){if(V?(M=Be(A,Y),Y+=4):M=y,U?(B=Be(A,Y),Y+=4):B=x,X&&(Y+=4),te&&(k===0?D=Be(A,Y):D=AP(A,Y),Y+=4),e.type===Mt.VIDEO){let z=0;for(;z<B;){const re=Be(n,$);if($+=4,aJ(a,n[$])){const ne=n.subarray($,$+re);IP(ne,a?2:1,t+D/i,r)}$+=re,z+=re+4}}t+=M/i}}))})})}),r}function sJ(t){if(!t)return!1;const e=t.indexOf("."),r=e<0?t:t.substring(0,e);return r==="hvc1"||r==="hev1"||r==="dvh1"||r==="dvhe"}function aJ(t,e){if(t){const r=e>>1&63;return r===39||r===40}else return(e&31)===6}function IP(t,e,r,n){const i=kP(t);let s=0;s+=e;let a=0,o=0,l=0;for(;s<i.length;){a=0;do{if(s>=i.length)break;l=i[s++],a+=l}while(l===255);o=0;do{if(s>=i.length)break;l=i[s++],o+=l}while(l===255);const u=i.length-s;let c=s;if(o<u)s+=o;else if(o>u){G.error(`Malformed SEI payload. ${o} is too small, only ${u} bytes left to parse.`);break}if(a===4){if(i[c++]===181){const h=wP(i,c);if(c+=2,h===49){const f=Be(i,c);if(c+=4,f===1195456820){const p=i[c++];if(p===3){const m=i[c++],g=31&m,v=64&m,b=v?2+g*3:0,y=new Uint8Array(b);if(v){y[0]=m;for(let T=1;T<b;T++)y[T]=i[c++]}n.push({type:p,payloadType:a,pts:r,bytes:y})}}}}}else if(a===5&&o>16){const d=[];for(let p=0;p<16;p++){const m=i[c++].toString(16);d.push(m.length==1?"0"+m:m),(p===3||p===5||p===7||p===9)&&d.push("-")}const h=o-16,f=new Uint8Array(h);for(let p=0;p<h;p++)f[p]=i[c++];n.push({payloadType:a,pts:r,uuid:d.join(""),userData:Es(f),userDataBytes:f})}}}function kP(t){const e=t.byteLength,r=[];let n=1;for(;n<e-2;)t[n]===0&&t[n+1]===0&&t[n+2]===3?(r.push(n+2),n+=2):n++;if(r.length===0)return t;const i=e-r.length,s=new Uint8Array(i);let a=0;for(n=0;n<i;a++,n++)a===r[0]&&(a++,r.shift()),s[n]=t[a];return s}function oJ(t){const e=t[0];let r="",n="",i=0,s=0,a=0,o=0,l=0,u=0;if(e===0){for(;Lr(t.subarray(u,u+1))!=="\0";)r+=Lr(t.subarray(u,u+1)),u+=1;for(r+=Lr(t.subarray(u,u+1)),u+=1;Lr(t.subarray(u,u+1))!=="\0";)n+=Lr(t.subarray(u,u+1)),u+=1;n+=Lr(t.subarray(u,u+1)),u+=1,i=Be(t,12),s=Be(t,16),o=Be(t,20),l=Be(t,24),u=28}else if(e===1){u+=4,i=Be(t,u),u+=4;const d=Be(t,u);u+=4;const h=Be(t,u);for(u+=4,a=2**32*d+h,wQ(a)||(a=Number.MAX_SAFE_INTEGER,G.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=Be(t,u),u+=4,l=Be(t,u),u+=4;Lr(t.subarray(u,u+1))!=="\0";)r+=Lr(t.subarray(u,u+1)),u+=1;for(r+=Lr(t.subarray(u,u+1)),u+=1;Lr(t.subarray(u,u+1))!=="\0";)n+=Lr(t.subarray(u,u+1)),u+=1;n+=Lr(t.subarray(u,u+1)),u+=1}const c=t.subarray(u,t.byteLength);return{schemeIdUri:r,value:n,timeScale:i,presentationTime:a,presentationTimeDelta:s,eventDuration:o,id:l,payload:c}}function lJ(t,...e){const r=e.length;let n=8,i=r;for(;i--;)n+=e[i].byteLength;const s=new Uint8Array(n);for(s[0]=n>>24&255,s[1]=n>>16&255,s[2]=n>>8&255,s[3]=n&255,s.set(t,4),i=0,n=8;i<r;i++)s.set(e[i],n),n+=e[i].byteLength;return s}function uJ(t,e,r){if(t.byteLength!==16)throw new RangeError("Invalid system id");let n,i;n=0,i=new Uint8Array;let s;n>0?(s=new Uint8Array(4),e.length>0&&new DataView(s.buffer).setUint32(0,e.length,!1)):s=new Uint8Array;const a=new Uint8Array(4);return r&&r.byteLength>0&&new DataView(a.buffer).setUint32(0,r.byteLength,!1),lJ([112,115,115,104],new Uint8Array([n,0,0,0]),t,s,i,a,r||new Uint8Array)}function cJ(t){const e=[];if(t instanceof ArrayBuffer){const r=t.byteLength;let n=0;for(;n+32<r;){const i=new DataView(t,n),s=dJ(i);e.push(s),n+=s.size}}return e}function dJ(t){const e=t.getUint32(0),r=t.byteOffset,n=t.byteLength;if(n<e)return{offset:r,size:n};if(t.getUint32(4)!==1886614376)return{offset:r,size:e};const s=t.getUint32(8)>>>24;if(s!==0&&s!==1)return{offset:r,size:e};const a=t.buffer,o=as.hexDump(new Uint8Array(a,r+12,16)),l=t.getUint32(28);let u=null,c=null;if(s===0){if(e-32<l||l<22)return{offset:r,size:e};c=new Uint8Array(a,r+32,l)}else if(s===1){if(!l||n<r+32+l*16+16)return{offset:r,size:e};u=[];for(let d=0;d<l;d++)u.push(new Uint8Array(a,r+32+d*16,16))}return{version:s,systemId:o,kids:u,data:c,offset:r,size:e}}let Af={};class hh{static clearKeyUriToKeyIdMap(){Af={}}constructor(e,r,n,i=[1],s=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=r,this.keyFormat=n,this.keyFormatVersions=i,this.iv=s,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&e!=="AES-128"}isSupported(){if(this.method){if(this.method==="AES-128"||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case Hn.FAIRPLAY:case Hn.WIDEVINE:case Hn.PLAYREADY:case Hn.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if(this.method==="AES-128"&&this.uri&&!this.iv){typeof e!="number"&&(this.method==="AES-128"&&!this.iv&&G.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const n=hJ(e);return new hh(this.method,this.uri,"identity",this.keyFormatVersions,n)}const r=$Q(this.uri);if(r)switch(this.keyFormat){case Hn.WIDEVINE:this.pssh=r,r.length>=22&&(this.keyId=r.subarray(r.length-22,r.length-6));break;case Hn.PLAYREADY:{const n=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=uJ(n,null,r);const i=new Uint16Array(r.buffer,r.byteOffset,r.byteLength/2),s=String.fromCharCode.apply(null,Array.from(i)),a=s.substring(s.indexOf("<"),s.length),u=new DOMParser().parseFromString(a,"text/xml").getElementsByTagName("KID")[0];if(u){const c=u.childNodes[0]?u.childNodes[0].nodeValue:u.getAttribute("VALUE");if(c){const d=Dx(c).subarray(0,16);FQ(d),this.keyId=d}}break}default:{let n=r.subarray(0,16);if(n.length!==16){const i=new Uint8Array(16);i.set(n,16-n.length),n=i}this.keyId=n;break}}if(!this.keyId||this.keyId.byteLength!==16){let n=Af[this.uri];if(!n){const i=Object.keys(Af).length%Number.MAX_SAFE_INTEGER;n=new Uint8Array(16),new DataView(n.buffer,12,4).setUint32(0,i),Af[this.uri]=n}this.keyId=n}return this}}function hJ(t){const e=new Uint8Array(16);for(let r=12;r<16;r++)e[r]=t>>8*(15-r)&255;return e}const LP=/\{\$([a-zA-Z0-9-_]+)\}/g;function wC(t){return LP.test(t)}function Fn(t,e,r){if(t.variableList!==null||t.hasVariableRefs)for(let n=r.length;n--;){const i=r[n],s=e[i];s&&(e[i]=p1(t,s))}}function p1(t,e){if(t.variableList!==null||t.hasVariableRefs){const r=t.variableList;return e.replace(LP,n=>{const i=n.substring(2,n.length-1),s=r==null?void 0:r[i];return s===void 0?(t.playlistParsingError||(t.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${i}"`)),n):s})}return e}function AC(t,e,r){let n=t.variableList;n||(t.variableList=n={});let i,s;if("QUERYPARAM"in e){i=e.QUERYPARAM;try{const a=new self.URL(r).searchParams;if(a.has(i))s=a.get(i);else throw new Error(`"${i}" does not match any query parameter in URI: "${r}"`)}catch(a){t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${a.message}`))}}else i=e.NAME,s=e.VALUE;i in n?t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${i}"`)):n[i]=s||""}function fJ(t,e,r){const n=e.IMPORT;if(r&&n in r){let i=t.variableList;i||(t.variableList=i={}),i[n]=r[n]}else t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${n}"`))}function pl(t=!0){return typeof self>"u"?void 0:(t||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function pJ(t){return typeof self<"u"&&t===self.ManagedMediaSource}const Fm={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function mJ(t,e){const r=Fm[e];return!!r&&!!r[t.slice(0,4)]}function Eb(t,e,r=!0){return!t.split(",").some(n=>!DP(n,e,r))}function DP(t,e,r=!0){var n;const i=pl(r);return(n=i==null?void 0:i.isTypeSupported(fh(t,e)))!=null?n:!1}function fh(t,e){return`${e}/mp4;codecs="${t}"`}function RC(t){if(t){const e=t.substring(0,4);return Fm.video[e]}return 2}function $m(t){return t.split(",").reduce((e,r)=>{const n=Fm.video[r];return n?(n*2+e)/(e?3:2):(Fm.audio[r]+e)/(e?2:1)},0)}const _b={};function gJ(t,e=!0){if(_b[t])return _b[t];const r={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"]}[t];for(let n=0;n<r.length;n++)if(DP(r[n],"audio",e))return _b[t]=r[n],r[n];return t}const vJ=/flac|opus/i;function Um(t,e=!0){return t.replace(vJ,r=>gJ(r.toLowerCase(),e))}function CC(t,e){return t&&t!=="mp4a"?t:e&&e.split(",")[0]}function bJ(t){const e=t.split(",");for(let r=0;r<e.length;r++){const n=e[r].split(".");if(n.length>2){let i=n.shift()+".";i+=parseInt(n.shift()).toString(16),i+=("000"+parseInt(n.shift()).toString(16)).slice(-4),e[r]=i}}return e.join(",")}const IC=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,kC=/#EXT-X-MEDIA:(.*)/g,yJ=/^#EXT(?:INF|-X-TARGETDURATION):/m,LC=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),EJ=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class hs{static findGroup(e,r){for(let n=0;n<e.length;n++){const i=e[n];if(i.id===r)return i}}static resolve(e,r){return Lx.buildAbsoluteURL(r,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return yJ.test(e)}static parseMasterPlaylist(e,r){const n=wC(e),i={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:n},s=[];IC.lastIndex=0;let a;for(;(a=IC.exec(e))!=null;)if(a[1]){var o;const u=new ur(a[1]);Fn(i,u,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);const c=p1(i,a[2]),d={attrs:u,bitrate:u.decimalInteger("BANDWIDTH")||u.decimalInteger("AVERAGE-BANDWIDTH"),name:u.NAME,url:hs.resolve(c,r)},h=u.decimalResolution("RESOLUTION");h&&(d.width=h.width,d.height=h.height),_J(u.CODECS,d),(o=d.unknownCodecs)!=null&&o.length||s.push(d),i.levels.push(d)}else if(a[3]){const u=a[3],c=a[4];switch(u){case"SESSION-DATA":{const d=new ur(c);Fn(i,d,["DATA-ID","LANGUAGE","VALUE","URI"]);const h=d["DATA-ID"];h&&(i.sessionData===null&&(i.sessionData={}),i.sessionData[h]=d);break}case"SESSION-KEY":{const d=DC(c,r,i);d.encrypted&&d.isSupported()?(i.sessionKeys===null&&(i.sessionKeys=[]),i.sessionKeys.push(d)):G.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${c}"`);break}case"DEFINE":{{const d=new ur(c);Fn(i,d,["NAME","VALUE","QUERYPARAM"]),AC(i,d,r)}break}case"CONTENT-STEERING":{const d=new ur(c);Fn(i,d,["SERVER-URI","PATHWAY-ID"]),i.contentSteering={uri:hs.resolve(d["SERVER-URI"],r),pathwayId:d["PATHWAY-ID"]||"."};break}case"START":{i.startTimeOffset=OC(c);break}}}const l=s.length>0&&s.length<i.levels.length;return i.levels=l?s:i.levels,i.levels.length===0&&(i.playlistParsingError=new Error("no levels found in manifest")),i}static parseMasterPlaylistMedia(e,r,n){let i;const s={},a=n.levels,o={AUDIO:a.map(u=>({id:u.attrs.AUDIO,audioCodec:u.audioCodec})),SUBTITLES:a.map(u=>({id:u.attrs.SUBTITLES,textCodec:u.textCodec})),"CLOSED-CAPTIONS":[]};let l=0;for(kC.lastIndex=0;(i=kC.exec(e))!==null;){const u=new ur(i[1]),c=u.TYPE;if(c){const d=o[c],h=s[c]||[];s[c]=h,Fn(n,u,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);const f=u.LANGUAGE,p=u["ASSOC-LANGUAGE"],m=u.CHANNELS,g=u.CHARACTERISTICS,v=u["INSTREAM-ID"],b={attrs:u,bitrate:0,id:l++,groupId:u["GROUP-ID"]||"",name:u.NAME||f||"",type:c,default:u.bool("DEFAULT"),autoselect:u.bool("AUTOSELECT"),forced:u.bool("FORCED"),lang:f,url:u.URI?hs.resolve(u.URI,r):""};if(p&&(b.assocLang=p),m&&(b.channels=m),g&&(b.characteristics=g),v&&(b.instreamId=v),d!=null&&d.length){const y=hs.findGroup(d,b.groupId)||d[0];MC(b,y,"audioCodec"),MC(b,y,"textCodec")}h.push(b)}}return s}static parseLevelPlaylist(e,r,n,i,s,a){const o=new PQ(r),l=o.fragments;let u=null,c=0,d=0,h=0,f=0,p=null,m=new mb(i,r),g,v,b,y=-1,T=!1,x=null;for(LC.lastIndex=0,o.m3u8=e,o.hasVariableRefs=wC(e);(g=LC.exec(e))!==null;){T&&(T=!1,m=new mb(i,r),m.start=h,m.sn=c,m.cc=f,m.level=n,u&&(m.initSegment=u,m.rawProgramDateTime=u.rawProgramDateTime,u.rawProgramDateTime=null,x&&(m.setByteRange(x),x=null)));const k=g[1];if(k){m.duration=parseFloat(k);const I=(" "+g[2]).slice(1);m.title=I||null,m.tagList.push(I?["INF",k,I]:["INF",k])}else if(g[3]){if(xe(m.duration)){m.start=h,b&&FC(m,b,o),m.sn=c,m.level=n,m.cc=f,l.push(m);const I=(" "+g[3]).slice(1);m.relurl=p1(o,I),PC(m,p),p=m,h+=m.duration,c++,d=0,T=!0}}else if(g[4]){const I=(" "+g[4]).slice(1);p?m.setByteRange(I,p):m.setByteRange(I)}else if(g[5])m.rawProgramDateTime=(" "+g[5]).slice(1),m.tagList.push(["PROGRAM-DATE-TIME",m.rawProgramDateTime]),y===-1&&(y=l.length);else{if(g=g[0].match(EJ),!g){G.warn("No matches on slow regex match for level playlist!");continue}for(v=1;v<g.length&&!(typeof g[v]<"u");v++);const I=(" "+g[v]).slice(1),C=(" "+g[v+1]).slice(1),N=g[v+2]?(" "+g[v+2]).slice(1):"";switch(I){case"PLAYLIST-TYPE":o.type=C.toUpperCase();break;case"MEDIA-SEQUENCE":c=o.startSN=parseInt(C);break;case"SKIP":{const P=new ur(C);Fn(o,P,["RECENTLY-REMOVED-DATERANGES"]);const V=P.decimalInteger("SKIPPED-SEGMENTS");if(xe(V)){o.skippedSegments=V;for(let U=V;U--;)l.unshift(null);c+=V}const M=P.enumeratedString("RECENTLY-REMOVED-DATERANGES");M&&(o.recentlyRemovedDateranges=M.split("	"));break}case"TARGETDURATION":o.targetduration=Math.max(parseInt(C),1);break;case"VERSION":o.version=parseInt(C);break;case"INDEPENDENT-SEGMENTS":case"EXTM3U":break;case"ENDLIST":o.live=!1;break;case"#":(C||N)&&m.tagList.push(N?[C,N]:[C]);break;case"DISCONTINUITY":f++,m.tagList.push(["DIS"]);break;case"GAP":m.gap=!0,m.tagList.push([I]);break;case"BITRATE":m.tagList.push([I,C]);break;case"DATERANGE":{const P=new ur(C);Fn(o,P,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),Fn(o,P,P.clientAttrs);const V=new bP(P,o.dateRanges[P.ID]);V.isValid||o.skippedSegments?o.dateRanges[V.id]=V:G.warn(`Ignoring invalid DATERANGE tag: "${C}"`),m.tagList.push(["EXT-X-DATERANGE",C]);break}case"DEFINE":{{const P=new ur(C);Fn(o,P,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in P?fJ(o,P,a):AC(o,P,r)}break}case"DISCONTINUITY-SEQUENCE":f=parseInt(C);break;case"KEY":{const P=DC(C,r,o);if(P.isSupported()){if(P.method==="NONE"){b=void 0;break}b||(b={}),b[P.keyFormat]&&(b=Cr({},b)),b[P.keyFormat]=P}else G.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${C}"`);break}case"START":o.startTimeOffset=OC(C);break;case"MAP":{const P=new ur(C);if(Fn(o,P,["BYTERANGE","URI"]),m.duration){const V=new mb(i,r);NC(V,P,n,b),u=V,m.initSegment=u,u.rawProgramDateTime&&!m.rawProgramDateTime&&(m.rawProgramDateTime=u.rawProgramDateTime)}else{const V=m.byteRangeEndOffset;if(V){const M=m.byteRangeStartOffset;x=`${V-M}@${M}`}else x=null;NC(m,P,n,b),u=m,T=!0}break}case"SERVER-CONTROL":{const P=new ur(C);o.canBlockReload=P.bool("CAN-BLOCK-RELOAD"),o.canSkipUntil=P.optionalFloat("CAN-SKIP-UNTIL",0),o.canSkipDateRanges=o.canSkipUntil>0&&P.bool("CAN-SKIP-DATERANGES"),o.partHoldBack=P.optionalFloat("PART-HOLD-BACK",0),o.holdBack=P.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{const P=new ur(C);o.partTarget=P.decimalFloatingPoint("PART-TARGET");break}case"PART":{let P=o.partList;P||(P=o.partList=[]);const V=d>0?P[P.length-1]:void 0,M=d++,U=new ur(C);Fn(o,U,["BYTERANGE","URI"]);const B=new OQ(U,m,r,M,V);P.push(B),m.duration+=B.duration;break}case"PRELOAD-HINT":{const P=new ur(C);Fn(o,P,["URI"]),o.preloadHint=P;break}case"RENDITION-REPORT":{const P=new ur(C);Fn(o,P,["URI"]),o.renditionReports=o.renditionReports||[],o.renditionReports.push(P);break}default:G.warn(`line parsed but not handled: ${g}`);break}}}p&&!p.relurl?(l.pop(),h-=p.duration,o.partList&&(o.fragmentHint=p)):o.partList&&(PC(m,p),m.cc=f,o.fragmentHint=m,b&&FC(m,b,o));const _=l.length,S=l[0],A=l[_-1];if(h+=o.skippedSegments*o.targetduration,h>0&&_&&A){o.averagetargetduration=h/_;const k=A.sn;o.endSN=k!=="initSegment"?k:0,o.live||(A.endList=!0),S&&(o.startCC=S.cc)}else o.endSN=0,o.startCC=0;return o.fragmentHint&&(h+=o.fragmentHint.duration),o.totalduration=h,o.endCC=f,y>0&&TJ(l,y),o}}function DC(t,e,r){var n,i;const s=new ur(t);Fn(r,s,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);const a=(n=s.METHOD)!=null?n:"",o=s.URI,l=s.hexadecimalInteger("IV"),u=s.KEYFORMATVERSIONS,c=(i=s.KEYFORMAT)!=null?i:"identity";o&&s.IV&&!l&&G.error(`Invalid IV: ${s.IV}`);const d=o?hs.resolve(o,e):"",h=(u||"1").split("/").map(Number).filter(Number.isFinite);return new hh(a,d,c,h,l)}function OC(t){const r=new ur(t).decimalFloatingPoint("TIME-OFFSET");return xe(r)?r:null}function _J(t,e){let r=(t||"").split(/[ ,]+/).filter(n=>n);["video","audio","text"].forEach(n=>{const i=r.filter(s=>mJ(s,n));i.length&&(e[`${n}Codec`]=i.join(","),r=r.filter(s=>i.indexOf(s)===-1))}),e.unknownCodecs=r}function MC(t,e,r){const n=e[r];n&&(t[r]=n)}function TJ(t,e){let r=t[e];for(let n=e;n--;){const i=t[n];if(!i)return;i.programDateTime=r.programDateTime-i.duration*1e3,r=i}}function PC(t,e){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):e!=null&&e.programDateTime&&(t.programDateTime=e.endProgramDateTime),xe(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}function NC(t,e,r,n){t.relurl=e.URI,e.BYTERANGE&&t.setByteRange(e.BYTERANGE),t.level=r,t.sn="initSegment",n&&(t.levelkeys=n),t.initSegment=null}function FC(t,e,r){t.levelkeys=e;const{encryptedFragments:n}=r;(!n.length||n[n.length-1].levelkeys!==e)&&Object.keys(e).some(i=>e[i].isCommonEncryption)&&n.push(t)}var pt={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},je={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};function $C(t){const{type:e}=t;switch(e){case pt.AUDIO_TRACK:return je.AUDIO;case pt.SUBTITLE_TRACK:return je.SUBTITLE;default:return je.MAIN}}function Tb(t,e){let r=t.url;return(r===void 0||r.indexOf("data:")===0)&&(r=e.url),r}class xJ{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(w.MANIFEST_LOADING,this.onManifestLoading,this),e.on(w.LEVEL_LOADING,this.onLevelLoading,this),e.on(w.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(w.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}unregisterListeners(){const{hls:e}=this;e.off(w.MANIFEST_LOADING,this.onManifestLoading,this),e.off(w.LEVEL_LOADING,this.onLevelLoading,this),e.off(w.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(w.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}createInternalLoader(e){const r=this.hls.config,n=r.pLoader,i=r.loader,s=n||i,a=new s(r);return this.loaders[e.type]=a,a}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const r=this.loaders[e];r&&r.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,r){const{url:n}=r;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:pt.MANIFEST,url:n,deliveryDirectives:null})}onLevelLoading(e,r){const{id:n,level:i,pathwayId:s,url:a,deliveryDirectives:o}=r;this.load({id:n,level:i,pathwayId:s,responseType:"text",type:pt.LEVEL,url:a,deliveryDirectives:o})}onAudioTrackLoading(e,r){const{id:n,groupId:i,url:s,deliveryDirectives:a}=r;this.load({id:n,groupId:i,level:null,responseType:"text",type:pt.AUDIO_TRACK,url:s,deliveryDirectives:a})}onSubtitleTrackLoading(e,r){const{id:n,groupId:i,url:s,deliveryDirectives:a}=r;this.load({id:n,groupId:i,level:null,responseType:"text",type:pt.SUBTITLE_TRACK,url:s,deliveryDirectives:a})}load(e){var r;const n=this.hls.config;let i=this.getInternalLoader(e);if(i){const u=i.context;if(u&&u.url===e.url&&u.level===e.level){G.trace("[playlist-loader]: playlist request ongoing");return}G.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),i.abort()}let s;if(e.type===pt.MANIFEST?s=n.manifestLoadPolicy.default:s=Cr({},n.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),i=this.createInternalLoader(e),xe((r=e.deliveryDirectives)==null?void 0:r.part)){let u;if(e.type===pt.LEVEL&&e.level!==null?u=this.hls.levels[e.level].details:e.type===pt.AUDIO_TRACK&&e.id!==null?u=this.hls.audioTracks[e.id].details:e.type===pt.SUBTITLE_TRACK&&e.id!==null&&(u=this.hls.subtitleTracks[e.id].details),u){const c=u.partTarget,d=u.targetduration;if(c&&d){const h=Math.max(c*3,d*.8)*1e3;s=Cr({},s,{maxTimeToFirstByteMs:Math.min(h,s.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(h,s.maxTimeToFirstByteMs)})}}}const a=s.errorRetry||s.timeoutRetry||{},o={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},l={onSuccess:(u,c,d,h)=>{const f=this.getInternalLoader(d);this.resetInternalLoader(d.type);const p=u.data;if(p.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(u,d,new Error("no EXTM3U delimiter"),h||null,c);return}c.parsing.start=performance.now(),hs.isMediaPlaylist(p)?this.handleTrackOrLevelPlaylist(u,c,d,h||null,f):this.handleMasterPlaylist(u,c,d,h)},onError:(u,c,d,h)=>{this.handleNetworkError(c,d,!1,u,h)},onTimeout:(u,c,d)=>{this.handleNetworkError(c,d,!0,void 0,u)}};i.load(e,o,l)}handleMasterPlaylist(e,r,n,i){const s=this.hls,a=e.data,o=Tb(e,n),l=hs.parseMasterPlaylist(a,o);if(l.playlistParsingError){this.handleManifestParsingError(e,n,l.playlistParsingError,i,r);return}const{contentSteering:u,levels:c,sessionData:d,sessionKeys:h,startTimeOffset:f,variableList:p}=l;this.variableList=p;const{AUDIO:m=[],SUBTITLES:g,"CLOSED-CAPTIONS":v}=hs.parseMasterPlaylistMedia(a,o,l);m.length&&!m.some(y=>!y.url)&&c[0].audioCodec&&!c[0].attrs.AUDIO&&(G.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),m.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new ur({}),bitrate:0,url:""})),s.trigger(w.MANIFEST_LOADED,{levels:c,audioTracks:m,subtitles:g,captions:v,contentSteering:u,url:o,stats:r,networkDetails:i,sessionData:d,sessionKeys:h,startTimeOffset:f,variableList:p})}handleTrackOrLevelPlaylist(e,r,n,i,s){const a=this.hls,{id:o,level:l,type:u}=n,c=Tb(e,n),d=0,h=xe(l)?l:xe(o)?o:0,f=$C(n),p=hs.parseLevelPlaylist(e.data,c,h,f,d,this.variableList);if(u===pt.MANIFEST){const m={attrs:new ur({}),bitrate:0,details:p,name:"",url:c};a.trigger(w.MANIFEST_LOADED,{levels:[m],audioTracks:[],url:c,stats:r,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}r.parsing.end=performance.now(),n.levelDetails=p,this.handlePlaylistLoaded(p,e,r,n,i,s)}handleManifestParsingError(e,r,n,i,s){this.hls.trigger(w.ERROR,{type:Ve.NETWORK_ERROR,details:J.MANIFEST_PARSING_ERROR,fatal:r.type===pt.MANIFEST,url:e.url,err:n,error:n,reason:n.message,response:e,context:r,networkDetails:i,stats:s})}handleNetworkError(e,r,n=!1,i,s){let a=`A network ${n?"timeout":"error"+(i?" (status "+i.code+")":"")} occurred while loading ${e.type}`;e.type===pt.LEVEL?a+=`: ${e.level} id: ${e.id}`:(e.type===pt.AUDIO_TRACK||e.type===pt.SUBTITLE_TRACK)&&(a+=` id: ${e.id} group-id: "${e.groupId}"`);const o=new Error(a);G.warn(`[playlist-loader]: ${a}`);let l=J.UNKNOWN,u=!1;const c=this.getInternalLoader(e);switch(e.type){case pt.MANIFEST:l=n?J.MANIFEST_LOAD_TIMEOUT:J.MANIFEST_LOAD_ERROR,u=!0;break;case pt.LEVEL:l=n?J.LEVEL_LOAD_TIMEOUT:J.LEVEL_LOAD_ERROR,u=!1;break;case pt.AUDIO_TRACK:l=n?J.AUDIO_TRACK_LOAD_TIMEOUT:J.AUDIO_TRACK_LOAD_ERROR,u=!1;break;case pt.SUBTITLE_TRACK:l=n?J.SUBTITLE_TRACK_LOAD_TIMEOUT:J.SUBTITLE_LOAD_ERROR,u=!1;break}c&&this.resetInternalLoader(e.type);const d={type:Ve.NETWORK_ERROR,details:l,fatal:u,url:e.url,loader:c,context:e,error:o,networkDetails:r,stats:s};if(i){const h=(r==null?void 0:r.url)||e.url;d.response=tn({url:h,data:void 0},i)}this.hls.trigger(w.ERROR,d)}handlePlaylistLoaded(e,r,n,i,s,a){const o=this.hls,{type:l,level:u,id:c,groupId:d,deliveryDirectives:h}=i,f=Tb(r,i),p=$C(i),m=typeof i.level=="number"&&p===je.MAIN?u:void 0;if(!e.fragments.length){const v=new Error("No Segments found in Playlist");o.trigger(w.ERROR,{type:Ve.NETWORK_ERROR,details:J.LEVEL_EMPTY_ERROR,fatal:!1,url:f,error:v,reason:v.message,response:r,context:i,level:m,parent:p,networkDetails:s,stats:n});return}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const g=e.playlistParsingError;if(g){o.trigger(w.ERROR,{type:Ve.NETWORK_ERROR,details:J.LEVEL_PARSING_ERROR,fatal:!1,url:f,error:g,reason:g.message,response:r,context:i,level:m,parent:p,networkDetails:s,stats:n});return}switch(e.live&&a&&(a.getCacheAge&&(e.ageHeader=a.getCacheAge()||0),(!a.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),l){case pt.MANIFEST:case pt.LEVEL:o.trigger(w.LEVEL_LOADED,{details:e,level:m||0,id:c||0,stats:n,networkDetails:s,deliveryDirectives:h});break;case pt.AUDIO_TRACK:o.trigger(w.AUDIO_TRACK_LOADED,{details:e,id:c||0,groupId:d||"",stats:n,networkDetails:s,deliveryDirectives:h});break;case pt.SUBTITLE_TRACK:o.trigger(w.SUBTITLE_TRACK_LOADED,{details:e,id:c||0,groupId:d||"",stats:n,networkDetails:s,deliveryDirectives:h});break}}}function OP(t,e){let r;try{r=new Event("addtrack")}catch{r=document.createEvent("Event"),r.initEvent("addtrack",!1,!1)}r.track=t,e.dispatchEvent(r)}function MP(t,e){const r=t.mode;if(r==="disabled"&&(t.mode="hidden"),t.cues&&!t.cues.getCueById(e.id))try{if(t.addCue(e),!t.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(n){G.debug(`[texttrack-utils]: ${n}`);try{const i=new self.TextTrackCue(e.startTime,e.endTime,e.text);i.id=e.id,t.addCue(i)}catch(i){G.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${i}`)}}r==="disabled"&&(t.mode=r)}function Cu(t){const e=t.mode;if(e==="disabled"&&(t.mode="hidden"),t.cues)for(let r=t.cues.length;r--;)t.removeCue(t.cues[r]);e==="disabled"&&(t.mode=e)}function m1(t,e,r,n){const i=t.mode;if(i==="disabled"&&(t.mode="hidden"),t.cues&&t.cues.length>0){const s=wJ(t.cues,e,r);for(let a=0;a<s.length;a++)(!n||n(s[a]))&&t.removeCue(s[a])}i==="disabled"&&(t.mode=i)}function SJ(t,e){if(e<t[0].startTime)return 0;const r=t.length-1;if(e>t[r].endTime)return-1;let n=0,i=r;for(;n<=i;){const s=Math.floor((i+n)/2);if(e<t[s].startTime)i=s-1;else if(e>t[s].startTime&&n<r)n=s+1;else return s}return t[n].startTime-e<e-t[i].startTime?n:i}function wJ(t,e,r){const n=[],i=SJ(t,e);if(i>-1)for(let s=i,a=t.length;s<a;s++){const o=t[s];if(o.startTime>=e&&o.endTime<=r)n.push(o);else if(o.startTime>r)return n}return n}function j0(t){const e=[];for(let r=0;r<t.length;r++){const n=t[r];(n.kind==="subtitles"||n.kind==="captions")&&n.label&&e.push(t[r])}return e}var Li={audioId3:"org.id3",dateRange:"com.apple.quicktime.HLS",emsg:"https://aomedia.org/emsg/ID3"};const AJ=.25;function g1(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function UC(t,e,r,n,i){let s=new t(e,r,"");try{s.value=n,i&&(s.type=i)}catch{s=new t(e,r,JSON.stringify(i?tn({type:i},n):n))}return s}const Rf=(()=>{const t=g1();try{t&&new t(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function xb(t,e){return t.getTime()/1e3-e}function RJ(t){return Uint8Array.from(t.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}class CJ{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null}_registerListeners(){const{hls:e}=this;e.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(w.MANIFEST_LOADING,this.onManifestLoading,this),e.on(w.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(w.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(w.LEVEL_UPDATED,this.onLevelUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(w.MANIFEST_LOADING,this.onManifestLoading,this),e.off(w.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(w.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(w.LEVEL_UPDATED,this.onLevelUpdated,this)}onMediaAttached(e,r){this.media=r.media}onMediaDetaching(){this.id3Track&&(Cu(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const r=this.getID3Track(e.textTracks);return r.mode="hidden",r}getID3Track(e){if(this.media){for(let r=0;r<e.length;r++){const n=e[r];if(n.kind==="metadata"&&n.label==="id3")return OP(n,this.media),n}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,r){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:n,enableID3MetadataCues:i}}}=this;if(!n&&!i)return;const{samples:s}=r;this.id3Track||(this.id3Track=this.createTrack(this.media));const a=g1();if(a)for(let o=0;o<s.length;o++){const l=s[o].type;if(l===Li.emsg&&!n||!i)continue;const u=xP(s[o].data);if(u){const c=s[o].pts;let d=c+s[o].duration;d>Rf&&(d=Rf),d-c<=0&&(d=c+AJ);for(let f=0;f<u.length;f++){const p=u[f];if(!TP(p)){this.updateId3CueEnds(c,l);const m=UC(a,c,d,p,l);m&&this.id3Track.addCue(m)}}}}}updateId3CueEnds(e,r){var n;const i=(n=this.id3Track)==null?void 0:n.cues;if(i)for(let s=i.length;s--;){const a=i[s];a.type===r&&a.startTime<e&&a.endTime===Rf&&(a.endTime=e)}}onBufferFlushing(e,{startOffset:r,endOffset:n,type:i}){const{id3Track:s,hls:a}=this;if(!a)return;const{config:{enableEmsgMetadataCues:o,enableID3MetadataCues:l}}=a;if(s&&(o||l)){let u;i==="audio"?u=c=>c.type===Li.audioId3&&l:i==="video"?u=c=>c.type===Li.emsg&&o:u=c=>c.type===Li.audioId3&&l||c.type===Li.emsg&&o,m1(s,r,n,u)}}onLevelUpdated(e,{details:r}){if(!this.media||!r.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{dateRangeCuesAppended:n,id3Track:i}=this,{dateRanges:s}=r,a=Object.keys(s);if(i){const c=Object.keys(n).filter(d=>!a.includes(d));for(let d=c.length;d--;){const h=c[d];Object.keys(n[h].cues).forEach(f=>{i.removeCue(n[h].cues[f])}),delete n[h]}}const o=r.fragments[r.fragments.length-1];if(a.length===0||!xe(o==null?void 0:o.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const l=o.programDateTime/1e3-o.start,u=g1();for(let c=0;c<a.length;c++){const d=a[c],h=s[d],f=xb(h.startDate,l),p=n[d],m=(p==null?void 0:p.cues)||{};let g=(p==null?void 0:p.durationKnown)||!1,v=Rf;const b=h.endDate;if(b)v=xb(b,l),g=!0;else if(h.endOnNext&&!g){const T=a.reduce((x,_)=>{if(_!==h.id){const S=s[_];if(S.class===h.class&&S.startDate>h.startDate&&(!x||h.startDate<x.startDate))return S}return x},null);T&&(v=xb(T.startDate,l),g=!0)}const y=Object.keys(h.attr);for(let T=0;T<y.length;T++){const x=y[T];if(!LQ(x))continue;const _=m[x];if(_)g&&!p.durationKnown&&(_.endTime=v);else if(u){let S=h.attr[x];DQ(x)&&(S=RJ(S));const A=UC(u,f,v,{key:x,data:S},Li.dateRange);A&&(A.id=d,this.id3Track.addCue(A),m[x]=A)}}n[d]={cues:m,dateRange:h,durationKnown:g}}}}class IJ{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=()=>this.timeupdate(),this.hls=e,this.config=e.config,this.registerListeners()}get latency(){return this._latency||0}get maxLatency(){const{config:e,levelDetails:r}=this;return e.liveMaxLatencyDuration!==void 0?e.liveMaxLatencyDuration:r?e.liveMaxLatencyDurationCount*r.targetduration:0}get targetLatency(){const{levelDetails:e}=this;if(e===null)return null;const{holdBack:r,partHoldBack:n,targetduration:i}=e,{liveSyncDuration:s,liveSyncDurationCount:a,lowLatencyMode:o}=this.config,l=this.hls.userConfig;let u=o&&n||r;(l.liveSyncDuration||l.liveSyncDurationCount||u===0)&&(u=s!==void 0?s:a*i);const c=i;return u+Math.min(this.stallCount*1,c)}get liveSyncPosition(){const e=this.estimateLiveEdge(),r=this.targetLatency,n=this.levelDetails;if(e===null||r===null||n===null)return null;const i=n.edge,s=e-r-this.edgeStalled,a=i-n.totalduration,o=i-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(a,s),o)}get drift(){const{levelDetails:e}=this;return e===null?1:e.drift}get edgeStalled(){const{levelDetails:e}=this;if(e===null)return 0;const r=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-r,0)}get forwardBufferLength(){const{media:e,levelDetails:r}=this;if(!e||!r)return 0;const n=e.buffered.length;return(n?e.buffered.end(n-1):r.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null}registerListeners(){this.hls.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(w.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(w.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(w.ERROR,this.onError,this)}unregisterListeners(){this.hls.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(w.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(w.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(w.ERROR,this.onError,this)}onMediaAttached(e,r){this.media=r.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)}onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:r}){this.levelDetails=r,r.advanced&&this.timeupdate(),!r.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)}onError(e,r){var n;r.details===J.BUFFER_STALLED_ERROR&&(this.stallCount++,(n=this.levelDetails)!=null&&n.live&&G.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))}timeupdate(){const{media:e,levelDetails:r}=this;if(!e||!r)return;this.currentTime=e.currentTime;const n=this.computeLatency();if(n===null)return;this._latency=n;const{lowLatencyMode:i,maxLiveSyncPlaybackRate:s}=this.config;if(!i||s===1||!r.live)return;const a=this.targetLatency;if(a===null)return;const o=n-a,l=Math.min(this.maxLatency,a+r.targetduration);if(o<l&&o>.05&&this.forwardBufferLength>1){const c=Math.min(2,Math.max(1,s)),d=Math.round(2/(1+Math.exp(-.75*o-this.edgeStalled))*20)/20;e.playbackRate=Math.min(c,Math.max(1,d))}else e.playbackRate!==1&&e.playbackRate!==0&&(e.playbackRate=1)}estimateLiveEdge(){const{levelDetails:e}=this;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}const v1=["NONE","TYPE-0","TYPE-1",null];function kJ(t){return v1.indexOf(t)>-1}const Bm=["SDR","PQ","HLG"];function LJ(t){return!!t&&Bm.indexOf(t)>-1}var H0={No:"",Yes:"YES",v2:"v2"};function BC(t){const{canSkipUntil:e,canSkipDateRanges:r,age:n}=t,i=n<e/2;return e&&i?r?H0.v2:H0.Yes:H0.No}class jC{constructor(e,r,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=r,this.skip=n}addDirectives(e){const r=new self.URL(e);return this.msn!==void 0&&r.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&r.searchParams.set("_HLS_part",this.part.toString()),this.skip&&r.searchParams.set("_HLS_skip",this.skip),r.href}}class tc{constructor(e){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(r=>!!r).map(r=>r.substring(0,4)).join(","),this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return HC(this._audioGroups,e)}hasSubtitleGroup(e){return HC(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,r){if(r){if(e==="audio"){let n=this._audioGroups;n||(n=this._audioGroups=[]),n.indexOf(r)===-1&&n.push(r)}else if(e==="text"){let n=this._subtitleGroups;n||(n=this._subtitleGroups=[]),n.indexOf(r)===-1&&n.push(r)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function HC(t,e){return!e||!t?!1:t.indexOf(e)!==-1}function Sb(t,e){const r=e.startPTS;if(xe(r)){let n=0,i;e.sn>t.sn?(n=r-t.start,i=t):(n=t.start-r,i=e),i.duration!==n&&(i.duration=n)}else e.sn>t.sn?t.cc===e.cc&&t.minEndPTS?e.start=t.start+(t.minEndPTS-t.start):e.start=t.start+t.duration:e.start=Math.max(t.start-e.duration,0)}function PP(t,e,r,n,i,s){n-r<=0&&(G.warn("Fragment should have a positive duration",e),n=r+e.duration,s=i+e.duration);let o=r,l=n;const u=e.startPTS,c=e.endPTS;if(xe(u)){const g=Math.abs(u-r);xe(e.deltaPTS)?e.deltaPTS=Math.max(g,e.deltaPTS):e.deltaPTS=g,o=Math.max(r,u),r=Math.min(r,u),i=Math.min(i,e.startDTS),l=Math.min(n,c),n=Math.max(n,c),s=Math.max(s,e.endDTS)}const d=r-e.start;e.start!==0&&(e.start=r),e.duration=n-e.start,e.startPTS=r,e.maxStartPTS=o,e.startDTS=i,e.endPTS=n,e.minEndPTS=l,e.endDTS=s;const h=e.sn;if(!t||h<t.startSN||h>t.endSN)return 0;let f;const p=h-t.startSN,m=t.fragments;for(m[p]=e,f=p;f>0;f--)Sb(m[f],m[f-1]);for(f=p;f<m.length-1;f++)Sb(m[f],m[f+1]);return t.fragmentHint&&Sb(m[m.length-1],t.fragmentHint),t.PTSKnown=t.alignedSliding=!0,d}function DJ(t,e){let r=null;const n=t.fragments;for(let l=n.length-1;l>=0;l--){const u=n[l].initSegment;if(u){r=u;break}}t.fragmentHint&&delete t.fragmentHint.endPTS;let i=0,s;if(PJ(t,e,(l,u)=>{l.relurl&&(i=l.cc-u.cc),xe(l.startPTS)&&xe(l.endPTS)&&(u.start=u.startPTS=l.startPTS,u.startDTS=l.startDTS,u.maxStartPTS=l.maxStartPTS,u.endPTS=l.endPTS,u.endDTS=l.endDTS,u.minEndPTS=l.minEndPTS,u.duration=l.endPTS-l.startPTS,u.duration&&(s=u),e.PTSKnown=e.alignedSliding=!0),u.elementaryStreams=l.elementaryStreams,u.loader=l.loader,u.stats=l.stats,l.initSegment&&(u.initSegment=l.initSegment,r=l.initSegment)}),r&&(e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments).forEach(u=>{var c;u&&(!u.initSegment||u.initSegment.relurl===((c=r)==null?void 0:c.relurl))&&(u.initSegment=r)}),e.skippedSegments)if(e.deltaUpdateFailed=e.fragments.some(l=>!l),e.deltaUpdateFailed){G.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let l=e.skippedSegments;l--;)e.fragments.shift();e.startSN=e.fragments[0].sn,e.startCC=e.fragments[0].cc}else e.canSkipDateRanges&&(e.dateRanges=OJ(t.dateRanges,e.dateRanges,e.recentlyRemovedDateranges));const a=e.fragments;if(i){G.warn("discontinuity sliding from playlist, take drift into account");for(let l=0;l<a.length;l++)a[l].cc+=i}e.skippedSegments&&(e.startCC=e.fragments[0].cc),MJ(t.partList,e.partList,(l,u)=>{u.elementaryStreams=l.elementaryStreams,u.stats=l.stats}),s?PP(e,s,s.startPTS,s.endPTS,s.startDTS,s.endDTS):NP(t,e),a.length&&(e.totalduration=e.edge-a[0].start),e.driftStartTime=t.driftStartTime,e.driftStart=t.driftStart;const o=e.advancedDateTime;if(e.advanced&&o){const l=e.edge;e.driftStart||(e.driftStartTime=o,e.driftStart=l),e.driftEndTime=o,e.driftEnd=l}else e.driftEndTime=t.driftEndTime,e.driftEnd=t.driftEnd,e.advancedDateTime=t.advancedDateTime}function OJ(t,e,r){const n=Cr({},t);return r&&r.forEach(i=>{delete n[i]}),Object.keys(e).forEach(i=>{const s=new bP(e[i].attr,n[i]);s.isValid?n[i]=s:G.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${JSON.stringify(e[i].attr)}"`)}),n}function MJ(t,e,r){if(t&&e){let n=0;for(let i=0,s=t.length;i<=s;i++){const a=t[i],o=e[i+n];a&&o&&a.index===o.index&&a.fragment.sn===o.fragment.sn?r(a,o):n--}}}function PJ(t,e,r){const n=e.skippedSegments,i=Math.max(t.startSN,e.startSN)-e.startSN,s=(t.fragmentHint?1:0)+(n?e.endSN:Math.min(t.endSN,e.endSN))-e.startSN,a=e.startSN-t.startSN,o=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments;for(let u=i;u<=s;u++){const c=l[a+u];let d=o[u];n&&!d&&u<n&&(d=e.fragments[u]=c),c&&d&&r(c,d)}}function NP(t,e){const r=e.startSN+e.skippedSegments-t.startSN,n=t.fragments;r<0||r>=n.length||b1(e,n[r].start)}function b1(t,e){if(e){const r=t.fragments;for(let n=t.skippedSegments;n<r.length;n++)r[n].start+=e;t.fragmentHint&&(t.fragmentHint.start+=e)}}function NJ(t,e=1/0){let r=1e3*t.targetduration;if(t.updated){const n=t.fragments;if(n.length&&r*4>e){const s=n[n.length-1].duration*1e3;s<r&&(r=s)}}else r/=2;return Math.round(r)}function FJ(t,e,r){if(!(t!=null&&t.details))return null;const n=t.details;let i=n.fragments[e-n.startSN];return i||(i=n.fragmentHint,i&&i.sn===e)?i:e<n.startSN&&r&&r.sn===e?r:null}function VC(t,e,r){var n;return t!=null&&t.details?FP((n=t.details)==null?void 0:n.partList,e,r):null}function FP(t,e,r){if(t)for(let n=t.length;n--;){const i=t[n];if(i.index===r&&i.fragment.sn===e)return i}return null}function $P(t){t.forEach((e,r)=>{const{details:n}=e;n!=null&&n.fragments&&n.fragments.forEach(i=>{i.level=r})})}function jm(t){switch(t.details){case J.FRAG_LOAD_TIMEOUT:case J.KEY_LOAD_TIMEOUT:case J.LEVEL_LOAD_TIMEOUT:case J.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function WC(t,e){const r=jm(e);return t.default[`${r?"timeout":"error"}Retry`]}function Px(t,e){const r=t.backoff==="linear"?1:Math.pow(2,e);return Math.min(r*t.retryDelayMs,t.maxRetryDelayMs)}function GC(t){return tn(tn({},t),{errorRetry:null,timeoutRetry:null})}function Hm(t,e,r,n){if(!t)return!1;const i=n==null?void 0:n.code,s=e<t.maxNumRetry&&($J(i)||!!r);return t.shouldRetry?t.shouldRetry(t,e,r,n,s):s}function $J(t){return t===0&&navigator.onLine===!1||!!t&&(t<400||t>499)}const UP={search:function(t,e){let r=0,n=t.length-1,i=null,s=null;for(;r<=n;){i=(r+n)/2|0,s=t[i];const a=e(s);if(a>0)r=i+1;else if(a<0)n=i-1;else return s}return null}};function UJ(t,e,r){if(e===null||!Array.isArray(t)||!t.length||!xe(e))return null;const n=t[0].programDateTime;if(e<(n||0))return null;const i=t[t.length-1].endProgramDateTime;if(e>=(i||0))return null;r=r||0;for(let s=0;s<t.length;++s){const a=t[s];if(jJ(e,r,a))return a}return null}function Vm(t,e,r=0,n=0,i=.005){let s=null;if(t){s=e[t.sn-e[0].sn+1]||null;const o=t.endDTS-r;o>0&&o<15e-7&&(r+=15e-7)}else r===0&&e[0].start===0&&(s=e[0]);if(s&&((!t||t.level===s.level)&&y1(r,n,s)===0||BJ(s,t,Math.min(i,n))))return s;const a=UP.search(e,y1.bind(null,r,n));return a&&(a!==t||!s)?a:s}function BJ(t,e,r){if(e&&e.start===0&&e.level<t.level&&(e.endPTS||0)>0){const n=e.tagList.reduce((i,s)=>(s[0]==="INF"&&(i+=parseFloat(s[1])),i),r);return t.start<=n}return!1}function y1(t=0,e=0,r){if(r.start<=t&&r.start+r.duration>t)return 0;const n=Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-n<=t?1:r.start-n>t&&r.start?-1:0}function jJ(t,e,r){const n=Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0))*1e3;return(r.endProgramDateTime||0)-n>t}function HJ(t,e){return UP.search(t,r=>r.cc<e?1:r.cc>e?-1:0)}var ln={DoNothing:0,SendEndCallback:1,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,InsertDiscontinuity:4,RetryRequest:5},Si={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,SwitchToSDR:4};class VJ{constructor(e){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=e,this.log=G.log.bind(G,"[info]:"),this.warn=G.warn.bind(G,"[warning]:"),this.error=G.error.bind(G,"[error]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(w.ERROR,this.onError,this),e.on(w.MANIFEST_LOADING,this.onManifestLoading,this),e.on(w.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(w.ERROR,this.onError,this),e.off(w.ERROR,this.onErrorOut,this),e.off(w.MANIFEST_LOADING,this.onManifestLoading,this),e.off(w.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(e==null?void 0:e.type)===je.MAIN?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,r){var n,i;if(r.fatal)return;const s=this.hls,a=r.context;switch(r.details){case J.FRAG_LOAD_ERROR:case J.FRAG_LOAD_TIMEOUT:case J.KEY_LOAD_ERROR:case J.KEY_LOAD_TIMEOUT:r.errorAction=this.getFragRetryOrSwitchAction(r);return;case J.FRAG_PARSING_ERROR:if((n=r.frag)!=null&&n.gap){r.errorAction={action:ln.DoNothing,flags:Si.None};return}case J.FRAG_GAP:case J.FRAG_DECRYPT_ERROR:{r.errorAction=this.getFragRetryOrSwitchAction(r),r.errorAction.action=ln.SendAlternateToPenaltyBox;return}case J.LEVEL_EMPTY_ERROR:case J.LEVEL_PARSING_ERROR:{var o,l;const u=r.parent===je.MAIN?r.level:s.loadLevel;r.details===J.LEVEL_EMPTY_ERROR&&((o=r.context)!=null&&(l=o.levelDetails)!=null&&l.live)?r.errorAction=this.getPlaylistRetryOrSwitchAction(r,u):(r.levelRetry=!1,r.errorAction=this.getLevelSwitchAction(r,u))}return;case J.LEVEL_LOAD_ERROR:case J.LEVEL_LOAD_TIMEOUT:typeof(a==null?void 0:a.level)=="number"&&(r.errorAction=this.getPlaylistRetryOrSwitchAction(r,a.level));return;case J.AUDIO_TRACK_LOAD_ERROR:case J.AUDIO_TRACK_LOAD_TIMEOUT:case J.SUBTITLE_LOAD_ERROR:case J.SUBTITLE_TRACK_LOAD_TIMEOUT:if(a){const u=s.levels[s.loadLevel];if(u&&(a.type===pt.AUDIO_TRACK&&u.hasAudioGroup(a.groupId)||a.type===pt.SUBTITLE_TRACK&&u.hasSubtitleGroup(a.groupId))){r.errorAction=this.getPlaylistRetryOrSwitchAction(r,s.loadLevel),r.errorAction.action=ln.SendAlternateToPenaltyBox,r.errorAction.flags=Si.MoveAllAlternatesMatchingHost;return}}return;case J.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const u=s.levels[s.loadLevel],c=u==null?void 0:u.attrs["HDCP-LEVEL"];c?r.errorAction={action:ln.SendAlternateToPenaltyBox,flags:Si.MoveAllAlternatesMatchingHDCP,hdcpLevel:c}:this.keySystemError(r)}return;case J.BUFFER_ADD_CODEC_ERROR:case J.REMUX_ALLOC_ERROR:case J.BUFFER_APPEND_ERROR:r.errorAction=this.getLevelSwitchAction(r,(i=r.level)!=null?i:s.loadLevel);return;case J.INTERNAL_EXCEPTION:case J.BUFFER_APPENDING_ERROR:case J.BUFFER_FULL_ERROR:case J.LEVEL_SWITCH_ERROR:case J.BUFFER_STALLED_ERROR:case J.BUFFER_SEEK_OVER_HOLE:case J.BUFFER_NUDGE_ON_STALL:r.errorAction={action:ln.DoNothing,flags:Si.None};return}r.type===Ve.KEY_SYSTEM_ERROR&&this.keySystemError(r)}keySystemError(e){const r=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,r)}getPlaylistRetryOrSwitchAction(e,r){const n=this.hls,i=WC(n.config.playlistLoadPolicy,e),s=this.playlistError++;if(Hm(i,s,jm(e),e.response))return{action:ln.RetryRequest,flags:Si.None,retryConfig:i,retryCount:s};const o=this.getLevelSwitchAction(e,r);return i&&(o.retryConfig=i,o.retryCount=s),o}getFragRetryOrSwitchAction(e){const r=this.hls,n=this.getVariantLevelIndex(e.frag),i=r.levels[n],{fragLoadPolicy:s,keyLoadPolicy:a}=r.config,o=WC(e.details.startsWith("key")?a:s,e),l=r.levels.reduce((c,d)=>c+d.fragmentError,0);if(i&&(e.details!==J.FRAG_GAP&&i.fragmentError++,Hm(o,l,jm(e),e.response)))return{action:ln.RetryRequest,flags:Si.None,retryConfig:o,retryCount:l};const u=this.getLevelSwitchAction(e,n);return o&&(u.retryConfig=o,u.retryCount=l),u}getLevelSwitchAction(e,r){const n=this.hls;r==null&&(r=n.loadLevel);const i=this.hls.levels[r];if(i){var s,a;const u=e.details;i.loadError++,u===J.BUFFER_APPEND_ERROR&&i.fragmentError++;let c=-1;const{levels:d,loadLevel:h,minAutoLevel:f,maxAutoLevel:p}=n;n.autoLevelEnabled||(n.loadLevel=-1);const m=(s=e.frag)==null?void 0:s.type,v=(m===je.AUDIO&&u===J.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(u===J.BUFFER_ADD_CODEC_ERROR||u===J.BUFFER_APPEND_ERROR))&&d.some(({audioCodec:_})=>i.audioCodec!==_),y=e.sourceBufferName==="video"&&(u===J.BUFFER_ADD_CODEC_ERROR||u===J.BUFFER_APPEND_ERROR)&&d.some(({codecSet:_,audioCodec:S})=>i.codecSet!==_&&i.audioCodec===S),{type:T,groupId:x}=(a=e.context)!=null?a:{};for(let _=d.length;_--;){const S=(_+h)%d.length;if(S!==h&&S>=f&&S<=p&&d[S].loadError===0){var o,l;const A=d[S];if(u===J.FRAG_GAP&&m===je.MAIN&&e.frag){const k=d[S].details;if(k){const I=Vm(e.frag,k.fragments,e.frag.start);if(I!=null&&I.gap)continue}}else{if(T===pt.AUDIO_TRACK&&A.hasAudioGroup(x)||T===pt.SUBTITLE_TRACK&&A.hasSubtitleGroup(x))continue;if(m===je.AUDIO&&(o=i.audioGroups)!=null&&o.some(k=>A.hasAudioGroup(k))||m===je.SUBTITLE&&(l=i.subtitleGroups)!=null&&l.some(k=>A.hasSubtitleGroup(k))||v&&i.audioCodec===A.audioCodec||!v&&i.audioCodec!==A.audioCodec||y&&i.codecSet===A.codecSet)continue}c=S;break}}if(c>-1&&n.loadLevel!==c)return e.levelRetry=!0,this.playlistError=0,{action:ln.SendAlternateToPenaltyBox,flags:Si.None,nextAutoLevel:c}}return{action:ln.SendAlternateToPenaltyBox,flags:Si.MoveAllAlternatesMatchingHost}}onErrorOut(e,r){var n;switch((n=r.errorAction)==null?void 0:n.action){case ln.DoNothing:break;case ln.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(r),!r.errorAction.resolved&&r.details!==J.FRAG_GAP?r.fatal=!0:/MediaSource readyState: ended/.test(r.error.message)&&(this.warn(`MediaSource ended after "${r.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(r.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const r=this.hls,n=e.errorAction;if(!n)return;const{flags:i,hdcpLevel:s,nextAutoLevel:a}=n;switch(i){case Si.None:this.switchLevel(e,a);break;case Si.MoveAllAlternatesMatchingHDCP:s&&(r.maxHdcpLevel=v1[v1.indexOf(s)-1],n.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${r.maxHdcpLevel}" or lower`);break}n.resolved||this.switchLevel(e,a)}switchLevel(e,r){r!==void 0&&e.errorAction&&(this.warn(`switching to level ${r} after ${e.details}`),this.hls.nextAutoLevel=r,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}}class Nx{constructor(e,r){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=G.log.bind(G,`${r}:`),this.warn=G.warn.bind(G,`${r}:`),this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,r,n){const i=r==null?void 0:r.renditionReports;if(i){let s=-1;for(let a=0;a<i.length;a++){const o=i[a];let l;try{l=new self.URL(o.URI,r.url).href}catch(u){G.warn(`Could not construct new URL for Rendition Report: ${u}`),l=o.URI||""}if(l===e){s=a;break}else l===e.substring(0,l.length)&&(s=a)}if(s!==-1){const a=i[s],o=parseInt(a["LAST-MSN"])||(r==null?void 0:r.lastPartSn);let l=parseInt(a["LAST-PART"])||(r==null?void 0:r.lastPartIndex);if(this.hls.config.lowLatencyMode){const c=Math.min(r.age-r.partTarget,r.targetduration);l>=0&&c>r.partTarget&&(l+=1)}const u=n&&BC(n);return new jC(o,l>=0?l:void 0,u)}}}loadPlaylist(e){this.requestScheduled===-1&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}shouldReloadPlaylist(e){return this.timer===-1&&this.requestScheduled===-1&&this.shouldLoadPlaylist(e)}playlistLoaded(e,r,n){const{details:i,stats:s}=r,a=self.performance.now(),o=s.loading.first?Math.max(0,a-s.loading.first):0;if(i.advancedDateTime=Date.now()-o,i.live||n!=null&&n.live){if(i.reloaded(n),n&&this.log(`live playlist ${e} ${i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:i.updated?"UPDATED":"MISSED"}`),n&&i.fragments.length>0&&DJ(n,i),!this.canLoad||!i.live)return;let l,u,c;if(i.canBlockReload&&i.endSN&&i.advanced){const g=this.hls.config.lowLatencyMode,v=i.lastPartSn,b=i.endSN,y=i.lastPartIndex,T=y!==-1,x=v===b,_=g?0:y;T?(u=x?b+1:v,c=x?_:y+1):u=b+1;const S=i.age,A=S+i.ageHeader;let k=Math.min(A-i.partTarget,i.targetduration*1.5);if(k>0){if(n&&k>n.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${n.tuneInGoal} to: ${k} with playlist age: ${i.age}`),k=0;else{const I=Math.floor(k/i.targetduration);if(u+=I,c!==void 0){const C=Math.round(k%i.targetduration/i.partTarget);c+=C}this.log(`CDN Tune-in age: ${i.ageHeader}s last advanced ${S.toFixed(2)}s goal: ${k} skip sn ${I} to part ${c}`)}i.tuneInGoal=k}if(l=this.getDeliveryDirectives(i,r.deliveryDirectives,u,c),g||!x){this.loadPlaylist(l);return}}else(i.canBlockReload||i.canSkipUntil)&&(l=this.getDeliveryDirectives(i,r.deliveryDirectives,u,c));const d=this.hls.mainForwardBufferInfo,h=d?d.end-d.len:0,f=(i.edge-h)*1e3,p=NJ(i,f);i.updated&&a>this.requestScheduled+p&&(this.requestScheduled=s.loading.start),u!==void 0&&i.canBlockReload?this.requestScheduled=s.loading.first+p-(i.partTarget*1e3||1e3):this.requestScheduled===-1||this.requestScheduled+p<a?this.requestScheduled=a:this.requestScheduled-a<=0&&(this.requestScheduled+=p);let m=this.requestScheduled-a;m=Math.max(0,m),this.log(`reload live playlist ${e} in ${Math.round(m)} ms`),this.timer=self.setTimeout(()=>this.loadPlaylist(l),m)}else this.clearTimer()}getDeliveryDirectives(e,r,n,i){let s=BC(e);return r!=null&&r.skip&&e.deltaUpdateFailed&&(n=r.msn,i=r.part,s=H0.No),new jC(n,i,s)}checkRetry(e){const r=e.details,n=jm(e),i=e.errorAction,{action:s,retryCount:a=0,retryConfig:o}=i||{},l=!!i&&!!o&&(s===ln.RetryRequest||!i.resolved&&s===ln.SendAlternateToPenaltyBox);if(l){var u;if(this.requestScheduled=-1,a>=o.maxNumRetry)return!1;if(n&&(u=e.context)!=null&&u.deliveryDirectives)this.warn(`Retrying playlist loading ${a+1}/${o.maxNumRetry} after "${r}" without delivery-directives`),this.loadPlaylist();else{const c=Px(o,a);this.timer=self.setTimeout(()=>this.loadPlaylist(),c),this.warn(`Retrying playlist loading ${a+1}/${o.maxNumRetry} after "${r}" in ${c}ms`)}e.levelRetry=!0,i.resolved=!0}return l}}class Ll{constructor(e,r=0,n=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=r,this.totalWeight_=n}sample(e,r){const n=Math.pow(this.alpha_,e);this.estimate_=r*(1-n)+n*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class WJ{constructor(e,r,n,i=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Ll(e),this.fast_=new Ll(r),this.defaultTTFB_=i,this.ttfb_=new Ll(e)}update(e,r){const{slow_:n,fast_:i,ttfb_:s}=this;n.halfLife!==e&&(this.slow_=new Ll(e,n.getEstimate(),n.getTotalWeight())),i.halfLife!==r&&(this.fast_=new Ll(r,i.getEstimate(),i.getTotalWeight())),s.halfLife!==e&&(this.ttfb_=new Ll(e,s.getEstimate(),s.getTotalWeight()))}sample(e,r){e=Math.max(e,this.minDelayMs_);const n=8*r,i=e/1e3,s=n/i;this.fast_.sample(i,s),this.slow_.sample(i,s)}sampleTTFB(e){const r=e/1e3,n=Math.sqrt(2)*Math.exp(-Math.pow(r,2)/2);this.ttfb_.sample(n,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}const BP={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]},KC={};function GJ(t,e,r,n,i,s){const a=t.audioCodec?t.audioGroups:null,o=s==null?void 0:s.audioCodec,l=s==null?void 0:s.channels,u=l?parseInt(l):o?1/0:2;let c=null;if(a!=null&&a.length)try{a.length===1&&a[0]?c=e.groups[a[0]].channels:c=a.reduce((d,h)=>{if(h){const f=e.groups[h];if(!f)throw new Error(`Audio track group ${h} not found`);Object.keys(f.channels).forEach(p=>{d[p]=(d[p]||0)+f.channels[p]})}return d},{2:0})}catch{return!0}return t.videoCodec!==void 0&&(t.width>1920&&t.height>1088||t.height>1920&&t.width>1088||t.frameRate>Math.max(n,30)||t.videoRange!=="SDR"&&t.videoRange!==r||t.bitrate>Math.max(i,8e6))||!!c&&xe(u)&&Object.keys(c).some(d=>parseInt(d)>u)}function KJ(t,e,r){const n=t.videoCodec,i=t.audioCodec;if(!n||!i||!r)return Promise.resolve(BP);const s={width:t.width,height:t.height,bitrate:Math.ceil(Math.max(t.bitrate*.9,t.averageBitrate)),framerate:t.frameRate||30},a=t.videoRange;a!=="SDR"&&(s.transferFunction=a.toLowerCase());const o=n.split(",").map(l=>({type:"media-source",video:tn(tn({},s),{},{contentType:fh(l,"video")})}));return i&&t.audioGroups&&t.audioGroups.forEach(l=>{var u;l&&((u=e.groups[l])==null||u.tracks.forEach(c=>{if(c.groupId===l){const d=c.channels||"",h=parseFloat(d);xe(h)&&h>2&&o.push.apply(o,i.split(",").map(f=>({type:"media-source",audio:{contentType:fh(f,"audio"),channels:""+h}})))}}))}),Promise.all(o.map(l=>{const u=qJ(l);return KC[u]||(KC[u]=r.decodingInfo(l))})).then(l=>({supported:!l.some(u=>!u.supported),configurations:o,decodingInfoResults:l})).catch(l=>({supported:!1,configurations:o,decodingInfoResults:[],error:l}))}function qJ(t){const{audio:e,video:r}=t,n=r||e;if(n){const i=n.contentType.split('"')[1];if(r)return`r${r.height}x${r.width}f${Math.ceil(r.framerate)}${r.transferFunction||"sd"}_${i}_${Math.ceil(r.bitrate/1e5)}`;if(e)return`c${e.channels}${e.spatialRendering?"s":"n"}_${i}`}return""}function zJ(){if(typeof matchMedia=="function"){const t=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(t.media!==e.media)return t.matches===!0}return!1}function YJ(t,e){let r=!1,n=[];return t&&(r=t!=="SDR",n=[t]),e&&(n=e.allowedVideoRanges||Bm.slice(0),r=e.preferHDR!==void 0?e.preferHDR:zJ(),r?n=n.filter(i=>i!=="SDR"):n=["SDR"]),{preferHDR:r,allowedVideoRanges:n}}function XJ(t,e,r,n,i){const s=Object.keys(t),a=n==null?void 0:n.channels,o=n==null?void 0:n.audioCodec,l=a&&parseInt(a)===2;let u=!0,c=!1,d=1/0,h=1/0,f=1/0,p=0,m=[];const{preferHDR:g,allowedVideoRanges:v}=YJ(e,i);for(let x=s.length;x--;){const _=t[s[x]];u=_.channels[2]>0,d=Math.min(d,_.minHeight),h=Math.min(h,_.minFramerate),f=Math.min(f,_.minBitrate);const S=v.filter(A=>_.videoRanges[A]>0);S.length>0&&(c=!0,m=S)}d=xe(d)?d:0,h=xe(h)?h:0;const b=Math.max(1080,d),y=Math.max(30,h);return f=xe(f)?f:r,r=Math.max(f,r),c||(e=void 0,m=[]),{codecSet:s.reduce((x,_)=>{const S=t[_];if(_===x)return x;if(S.minBitrate>r)return Cs(_,`min bitrate of ${S.minBitrate} > current estimate of ${r}`),x;if(!S.hasDefaultAudio)return Cs(_,"no renditions with default or auto-select sound found"),x;if(o&&_.indexOf(o.substring(0,4))%5!==0)return Cs(_,`audio codec preference "${o}" not found`),x;if(a&&!l){if(!S.channels[a])return Cs(_,`no renditions with ${a} channel sound found (channels options: ${Object.keys(S.channels)})`),x}else if((!o||l)&&u&&S.channels[2]===0)return Cs(_,"no renditions with stereo sound found"),x;return S.minHeight>b?(Cs(_,`min resolution of ${S.minHeight} > maximum of ${b}`),x):S.minFramerate>y?(Cs(_,`min framerate of ${S.minFramerate} > maximum of ${y}`),x):m.some(A=>S.videoRanges[A]>0)?S.maxScore<p?(Cs(_,`max score of ${S.maxScore} < selected max of ${p}`),x):x&&($m(_)>=$m(x)||S.fragmentError>t[x].fragmentError)?x:(p=S.maxScore,_):(Cs(_,`no variants with VIDEO-RANGE of ${JSON.stringify(m)} found`),x)},void 0),videoRanges:m,preferHDR:g,minFramerate:h,minBitrate:f}}function Cs(t,e){G.log(`[abr] start candidates with "${t}" ignored because ${e}`)}function ZJ(t){return t.reduce((e,r)=>{let n=e.groups[r.groupId];n||(n=e.groups[r.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),n.tracks.push(r);const i=r.channels||"2";return n.channels[i]=(n.channels[i]||0)+1,n.hasDefault=n.hasDefault||r.default,n.hasAutoSelect=n.hasAutoSelect||r.autoselect,n.hasDefault&&(e.hasDefaultAudio=!0),n.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function QJ(t,e,r,n){return t.slice(r,n+1).reduce((i,s)=>{if(!s.codecSet)return i;const a=s.audioGroups;let o=i[s.codecSet];o||(i[s.codecSet]=o={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!a,fragmentError:0}),o.minBitrate=Math.min(o.minBitrate,s.bitrate);const l=Math.min(s.height,s.width);return o.minHeight=Math.min(o.minHeight,l),o.minFramerate=Math.min(o.minFramerate,s.frameRate),o.maxScore=Math.max(o.maxScore,s.score),o.fragmentError+=s.fragmentError,o.videoRanges[s.videoRange]=(o.videoRanges[s.videoRange]||0)+1,a&&a.forEach(u=>{if(!u)return;const c=e.groups[u];c&&(o.hasDefaultAudio=o.hasDefaultAudio||e.hasDefaultAudio?c.hasDefault:c.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(c.channels).forEach(d=>{o.channels[d]=(o.channels[d]||0)+c.channels[d]}))}),i},{})}function fs(t,e,r){if("attrs"in t){const n=e.indexOf(t);if(n!==-1)return n}for(let n=0;n<e.length;n++){const i=e[n];if(Nu(t,i,r))return n}return-1}function Nu(t,e,r){const{groupId:n,name:i,lang:s,assocLang:a,characteristics:o,default:l}=t,u=t.forced;return(n===void 0||e.groupId===n)&&(i===void 0||e.name===i)&&(s===void 0||e.lang===s)&&(s===void 0||e.assocLang===a)&&(l===void 0||e.default===l)&&(u===void 0||e.forced===u)&&(o===void 0||JJ(o,e.characteristics))&&(r===void 0||r(t,e))}function JJ(t,e=""){const r=t.split(","),n=e.split(",");return r.length===n.length&&!r.some(i=>n.indexOf(i)===-1)}function Dl(t,e){const{audioCodec:r,channels:n}=t;return(r===void 0||(e.audioCodec||"").substring(0,4)===r.substring(0,4))&&(n===void 0||n===(e.channels||"2"))}function eee(t,e,r,n,i){const s=e[n],o=e.reduce((h,f,p)=>{const m=f.uri;return(h[m]||(h[m]=[])).push(p),h},{})[s.uri];o.length>1&&(n=Math.max.apply(Math,o));const l=s.videoRange,u=s.frameRate,c=s.codecSet.substring(0,4),d=qC(e,n,h=>{if(h.videoRange!==l||h.frameRate!==u||h.codecSet.substring(0,4)!==c)return!1;const f=h.audioGroups,p=r.filter(m=>!f||f.indexOf(m.groupId)!==-1);return fs(t,p,i)>-1});return d>-1?d:qC(e,n,h=>{const f=h.audioGroups,p=r.filter(m=>!f||f.indexOf(m.groupId)!==-1);return fs(t,p,i)>-1})}function qC(t,e,r){for(let n=e;n>-1;n--)if(r(t[n]))return n;for(let n=e+1;n<t.length;n++)if(r(t[n]))return n;return-1}class tee{constructor(e){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this._abandonRulesCheck=()=>{const{fragCurrent:r,partCurrent:n,hls:i}=this,{autoLevelEnabled:s,media:a}=i;if(!r||!a)return;const o=performance.now(),l=n?n.stats:r.stats,u=n?n.duration:r.duration,c=o-l.loading.start,d=i.minAutoLevel;if(l.aborted||l.loaded&&l.loaded===l.total||r.level<=d){this.clearTimer(),this._nextAutoLevel=-1;return}if(!s||a.paused||!a.playbackRate||!a.readyState)return;const h=i.mainForwardBufferInfo;if(h===null)return;const f=this.bwEstimator.getEstimateTTFB(),p=Math.abs(a.playbackRate);if(c<=Math.max(f,1e3*(u/(p*2))))return;const m=h.len/p,g=l.loading.first?l.loading.first-l.loading.start:-1,v=l.loaded&&g>-1,b=this.getBwEstimate(),y=i.levels,T=y[r.level],x=l.total||Math.max(l.loaded,Math.round(u*T.averageBitrate/8));let _=v?c-g:c;_<1&&v&&(_=Math.min(c,l.loaded*8/b));const S=v?l.loaded*1e3/_:0,A=S?(x-l.loaded)/S:x*8/b+f/1e3;if(A<=m)return;const k=S?S*8:b;let I=Number.POSITIVE_INFINITY,C;for(C=r.level-1;C>d;C--){const P=y[C].maxBitrate;if(I=this.getTimeToLoadFrag(f/1e3,k,u*P,!y[C].details),I<m)break}if(I>=A||I>u*10)return;i.nextLoadLevel=i.nextAutoLevel=C,v?this.bwEstimator.sample(c-Math.min(f,g),l.loaded):this.bwEstimator.sampleTTFB(c);const N=y[C].maxBitrate;this.getBwEstimate()*this.hls.config.abrBandWidthUpFactor>N&&this.resetEstimator(N),this.clearTimer(),G.warn(`[abr] Fragment ${r.sn}${n?" part "+n.index:""} of level ${r.level} is loading too slowly;
      Time to underbuffer: ${m.toFixed(3)} s
      Estimated load time for current fragment: ${A.toFixed(3)} s
      Estimated load time for down switch fragment: ${I.toFixed(3)} s
      TTFB estimate: ${g|0} ms
      Current BW estimate: ${xe(b)?b|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${C} @ ${N|0} bps`),i.trigger(w.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,part:n,stats:l})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(G.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new WJ(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(w.MANIFEST_LOADING,this.onManifestLoading,this),e.on(w.FRAG_LOADING,this.onFragLoading,this),e.on(w.FRAG_LOADED,this.onFragLoaded,this),e.on(w.FRAG_BUFFERED,this.onFragBuffered,this),e.on(w.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(w.LEVEL_LOADED,this.onLevelLoaded,this),e.on(w.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(w.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(w.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(w.MANIFEST_LOADING,this.onManifestLoading,this),e.off(w.FRAG_LOADING,this.onFragLoading,this),e.off(w.FRAG_LOADED,this.onFragLoaded,this),e.off(w.FRAG_BUFFERED,this.onFragBuffered,this),e.off(w.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(w.LEVEL_LOADED,this.onLevelLoaded,this),e.off(w.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(w.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(w.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,r){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,r){const n=r.frag;if(!this.ignoreFragment(n)){if(!n.bitrateTest){var i;this.fragCurrent=n,this.partCurrent=(i=r.part)!=null?i:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,r){this.clearTimer()}onError(e,r){if(!r.fatal)switch(r.details){case J.BUFFER_ADD_CODEC_ERROR:case J.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case J.FRAG_LOAD_TIMEOUT:{const n=r.frag,{fragCurrent:i,partCurrent:s}=this;if(n&&i&&n.sn===i.sn&&n.level===i.level){const a=performance.now(),o=s?s.stats:n.stats,l=a-o.loading.start,u=o.loading.first?o.loading.first-o.loading.start:-1;if(o.loaded&&u>-1){const d=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(l-Math.min(d,u),o.loaded)}else this.bwEstimator.sampleTTFB(l)}break}}}getTimeToLoadFrag(e,r,n,i){const s=e+n/r,a=i?this.lastLevelLoadSec:0;return s+a}onLevelLoaded(e,r){const n=this.hls.config,{loading:i}=r.stats,s=i.end-i.start;xe(s)&&(this.lastLevelLoadSec=s/1e3),r.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD)}onFragLoaded(e,{frag:r,part:n}){const i=n?n.stats:r.stats;if(r.type===je.MAIN&&this.bwEstimator.sampleTTFB(i.loading.first-i.loading.start),!this.ignoreFragment(r)){if(this.clearTimer(),r.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const s=n?n.duration:r.duration,a=this.hls.levels[r.level],o=(a.loaded?a.loaded.bytes:0)+i.loaded,l=(a.loaded?a.loaded.duration:0)+s;a.loaded={bytes:o,duration:l},a.realBitrate=Math.round(8*o/l)}if(r.bitrateTest){const s={stats:i,frag:r,part:n,id:r.type};this.onFragBuffered(w.FRAG_BUFFERED,s),r.bitrateTest=!1}else this.lastLoadedFragLevel=r.level}}onFragBuffered(e,r){const{frag:n,part:i}=r,s=i!=null&&i.stats.loaded?i.stats:n.stats;if(s.aborted||this.ignoreFragment(n))return;const a=s.parsing.end-s.loading.start-Math.min(s.loading.first-s.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(a,s.loaded),s.bwEstimate=this.getBwEstimate(),n.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==je.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:r}=this.hls,n=this.getBwEstimate(),i=this.hls.config.maxStarvationDelay,s=this.findBestLevel(n,r,e,0,i,1,1);if(s>-1)return s;const a=this.hls.firstLevel,o=Math.min(Math.max(a,r),e);return G.warn(`[abr] Could not find best starting auto level. Defaulting to first in playlist ${a} clamped to ${o}`),o}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,n=this.bwEstimator.canEstimate(),i=this.lastLoadedFragLevel>-1;if(e!==-1&&(!n||!i||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const s=n&&i?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const a=this.hls.levels;if(a.length>Math.max(e,s)&&a[e].loadError<=a[s].loadError)return e}return this._nextAutoLevel=s,this.nextAutoLevelKey=this.getAutoLevelKey(),s}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:r,hls:n}=this,{maxAutoLevel:i,config:s,minAutoLevel:a}=n,o=r?r.duration:e?e.duration:0,l=this.getBwEstimate(),u=this.getStarvationDelay();let c=s.abrBandWidthFactor,d=s.abrBandWidthUpFactor;if(u){const g=this.findBestLevel(l,a,i,u,0,c,d);if(g>=0)return g}let h=o?Math.min(o,s.maxStarvationDelay):s.maxStarvationDelay;if(!u){const g=this.bitrateTestDelay;g&&(h=(o?Math.min(o,s.maxLoadingDelay):s.maxLoadingDelay)-g,G.info(`[abr] bitrate test took ${Math.round(1e3*g)}ms, set first fragment max fetchDuration to ${Math.round(1e3*h)} ms`),c=d=1)}const f=this.findBestLevel(l,a,i,u,h,c,d);if(G.info(`[abr] ${u?"rebuffering expected":"buffer is empty"}, optimal quality level ${f}`),f>-1)return f;const p=n.levels[a],m=n.levels[n.loadLevel];return(p==null?void 0:p.bitrate)<(m==null?void 0:m.bitrate)?a:n.loadLevel}getStarvationDelay(){const e=this.hls,r=e.media;if(!r)return 1/0;const n=r&&r.playbackRate!==0?Math.abs(r.playbackRate):1,i=e.mainForwardBufferInfo;return(i?i.len:0)/n}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,r,n,i,s,a,o){var l;const u=i+s,c=this.lastLoadedFragLevel,d=c===-1?this.hls.firstLevel:c,{fragCurrent:h,partCurrent:f}=this,{levels:p,allAudioTracks:m,loadLevel:g,config:v}=this.hls;if(p.length===1)return 0;const b=p[d],y=!!(b!=null&&(l=b.details)!=null&&l.live),T=g===-1||c===-1;let x,_="SDR",S=(b==null?void 0:b.frameRate)||0;const{audioPreference:A,videoPreference:k}=v,I=this.audioTracksByGroup||(this.audioTracksByGroup=ZJ(m));if(T){if(this.firstSelection!==-1)return this.firstSelection;const M=this.codecTiers||(this.codecTiers=QJ(p,I,r,n)),U=XJ(M,_,e,A,k),{codecSet:B,videoRanges:X,minFramerate:te,minBitrate:D,preferHDR:L}=U;x=B,_=L?X[X.length-1]:X[0],S=te,e=Math.max(e,D),G.log(`[abr] picked start tier ${JSON.stringify(U)}`)}else x=b==null?void 0:b.codecSet,_=b==null?void 0:b.videoRange;const C=f?f.duration:h?h.duration:0,N=this.bwEstimator.getEstimateTTFB()/1e3,P=[];for(let M=n;M>=r;M--){var V;const U=p[M],B=M>d;if(!U)continue;if(v.useMediaCapabilities&&!U.supportedResult&&!U.supportedPromise){const j=navigator.mediaCapabilities;typeof(j==null?void 0:j.decodingInfo)=="function"&&GJ(U,I,_,S,e,A)?(U.supportedPromise=KJ(U,I,j),U.supportedPromise.then(z=>{if(!this.hls)return;U.supportedResult=z;const re=this.hls.levels,ne=re.indexOf(U);z.error?G.warn(`[abr] MediaCapabilities decodingInfo error: "${z.error}" for level ${ne} ${JSON.stringify(z)}`):z.supported||(G.warn(`[abr] Unsupported MediaCapabilities decodingInfo result for level ${ne} ${JSON.stringify(z)}`),ne>-1&&re.length>1&&(G.log(`[abr] Removing unsupported level ${ne}`),this.hls.removeLevel(ne)))})):U.supportedResult=BP}if(x&&U.codecSet!==x||_&&U.videoRange!==_||B&&S>U.frameRate||!B&&S>0&&S<U.frameRate||U.supportedResult&&!((V=U.supportedResult.decodingInfoResults)!=null&&V[0].smooth)){P.push(M);continue}const X=U.details,te=(f?X==null?void 0:X.partTarget:X==null?void 0:X.averagetargetduration)||C;let D;B?D=o*e:D=a*e;const L=C&&i>=C*2&&s===0?p[M].averageBitrate:p[M].maxBitrate,Y=this.getTimeToLoadFrag(N,D,L*te,X===void 0);if(D>=L&&(M===c||U.loadError===0&&U.fragmentError===0)&&(Y<=N||!xe(Y)||y&&!this.bitrateTestDelay||Y<u)){const j=this.forcedAutoLevel;return M!==g&&(j===-1||j!==g)&&(P.length&&G.trace(`[abr] Skipped level(s) ${P.join(",")} of ${n} max with CODECS and VIDEO-RANGE:"${p[P[0]].codecs}" ${p[P[0]].videoRange}; not compatible with "${b.codecs}" ${_}`),G.info(`[abr] switch candidate:${d}->${M} adjustedbw(${Math.round(D)})-bitrate=${Math.round(D-L)} ttfb:${N.toFixed(1)} avgDuration:${te.toFixed(1)} maxFetchDuration:${u.toFixed(1)} fetchDuration:${Y.toFixed(1)} firstSelection:${T} codecSet:${x} videoRange:${_} hls.loadLevel:${g}`)),T&&(this.firstSelection=M),M}}return-1}set nextAutoLevel(e){const{maxAutoLevel:r,minAutoLevel:n}=this.hls,i=Math.min(Math.max(e,n),r);this._nextAutoLevel!==i&&(this.nextAutoLevelKey="",this._nextAutoLevel=i)}}class ree{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}var Yr={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class nee{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(w.BUFFER_APPENDED,this.onBufferAppended,this),e.on(w.FRAG_BUFFERED,this.onFragBuffered,this),e.on(w.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(w.BUFFER_APPENDED,this.onBufferAppended,this),e.off(w.FRAG_BUFFERED,this.onFragBuffered,this),e.off(w.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,r){const n=this.activePartLists[r];if(n)for(let i=n.length;i--;){const s=n[i];if(!s)break;const a=s.end;if(s.start<=e&&a!==null&&e<=a)return s}return this.getBufferedFrag(e,r)}getBufferedFrag(e,r){const{fragments:n}=this,i=Object.keys(n);for(let s=i.length;s--;){const a=n[i[s]];if((a==null?void 0:a.body.type)===r&&a.buffered){const o=a.body;if(o.start<=e&&e<=o.end)return o}}return null}detectEvictedFragments(e,r,n,i){this.timeRanges&&(this.timeRanges[e]=r);const s=(i==null?void 0:i.fragment.sn)||-1;Object.keys(this.fragments).forEach(a=>{const o=this.fragments[a];if(!o||s>=o.body.sn)return;if(!o.buffered&&!o.loaded){o.body.type===n&&this.removeFragment(o.body);return}const l=o.range[e];l&&l.time.some(u=>{const c=!this.isTimeBuffered(u.startPTS,u.endPTS,r);return c&&this.removeFragment(o.body),c})})}detectPartialFragments(e){const r=this.timeRanges,{frag:n,part:i}=e;if(!r||n.sn==="initSegment")return;const s=Ol(n),a=this.fragments[s];if(!a||a.buffered&&n.gap)return;const o=!n.relurl;Object.keys(r).forEach(l=>{const u=n.elementaryStreams[l];if(!u)return;const c=r[l],d=o||u.partial===!0;a.range[l]=this.getBufferedTimes(n,i,d,c)}),a.loaded=null,Object.keys(a.range).length?(a.buffered=!0,(a.body.endList=n.endList||a.body.endList)&&(this.endListFragments[a.body.type]=a),Cf(a)||this.removeParts(n.sn-1,n.type)):this.removeFragment(a.body)}removeParts(e,r){const n=this.activePartLists[r];n&&(this.activePartLists[r]=n.filter(i=>i.fragment.sn>=e))}fragBuffered(e,r){const n=Ol(e);let i=this.fragments[n];!i&&r&&(i=this.fragments[n]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),i&&(i.loaded=null,i.buffered=!0)}getBufferedTimes(e,r,n,i){const s={time:[],partial:n},a=e.start,o=e.end,l=e.minEndPTS||o,u=e.maxStartPTS||a;for(let c=0;c<i.length;c++){const d=i.start(c)-this.bufferPadding,h=i.end(c)+this.bufferPadding;if(u>=d&&l<=h){s.time.push({startPTS:Math.max(a,i.start(c)),endPTS:Math.min(o,i.end(c))});break}else if(a<h&&o>d){const f=Math.max(a,i.start(c)),p=Math.min(o,i.end(c));p>f&&(s.partial=!0,s.time.push({startPTS:f,endPTS:p}))}else if(o<=d)break}return s}getPartialFragment(e){let r=null,n,i,s,a=0;const{bufferPadding:o,fragments:l}=this;return Object.keys(l).forEach(u=>{const c=l[u];c&&Cf(c)&&(i=c.body.start-o,s=c.body.end+o,e>=i&&e<=s&&(n=Math.min(e-i,s-e),a<=n&&(r=c.body,a=n)))}),r}isEndListAppended(e){const r=this.endListFragments[e];return r!==void 0&&(r.buffered||Cf(r))}getState(e){const r=Ol(e),n=this.fragments[r];return n?n.buffered?Cf(n)?Yr.PARTIAL:Yr.OK:Yr.APPENDING:Yr.NOT_LOADED}isTimeBuffered(e,r,n){let i,s;for(let a=0;a<n.length;a++){if(i=n.start(a)-this.bufferPadding,s=n.end(a)+this.bufferPadding,e>=i&&r<=s)return!0;if(r<=i)return!1}return!1}onFragLoaded(e,r){const{frag:n,part:i}=r;if(n.sn==="initSegment"||n.bitrateTest)return;const s=i?null:r,a=Ol(n);this.fragments[a]={body:n,appendedPTS:null,loaded:s,buffered:!1,range:Object.create(null)}}onBufferAppended(e,r){const{frag:n,part:i,timeRanges:s}=r;if(n.sn==="initSegment")return;const a=n.type;if(i){let o=this.activePartLists[a];o||(this.activePartLists[a]=o=[]),o.push(i)}this.timeRanges=s,Object.keys(s).forEach(o=>{const l=s[o];this.detectEvictedFragments(o,l,a,i)})}onFragBuffered(e,r){this.detectPartialFragments(r)}hasFragment(e){const r=Ol(e);return!!this.fragments[r]}hasParts(e){var r;return!!((r=this.activePartLists[e])!=null&&r.length)}removeFragmentsInRange(e,r,n,i,s){i&&!this.hasGaps||Object.keys(this.fragments).forEach(a=>{const o=this.fragments[a];if(!o)return;const l=o.body;l.type!==n||i&&!l.gap||l.start<r&&l.end>e&&(o.buffered||s)&&this.removeFragment(l)})}removeFragment(e){const r=Ol(e);e.stats.loaded=0,e.clearElementaryStreamInfo();const n=this.activePartLists[e.type];if(n){const i=e.sn;this.activePartLists[e.type]=n.filter(s=>s.fragment.sn!==i)}delete this.fragments[r],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1}}function Cf(t){var e,r,n;return t.buffered&&(t.body.gap||((e=t.range.video)==null?void 0:e.partial)||((r=t.range.audio)==null?void 0:r.partial)||((n=t.range.audiovideo)==null?void 0:n.partial))}function Ol(t){return`${t.type}_${t.level}_${t.sn}`}const iee={length:0,start:()=>0,end:()=>0};class Zt{static isBuffered(e,r){try{if(e){const n=Zt.getBuffered(e);for(let i=0;i<n.length;i++)if(r>=n.start(i)&&r<=n.end(i))return!0}}catch{}return!1}static bufferInfo(e,r,n){try{if(e){const i=Zt.getBuffered(e),s=[];let a;for(a=0;a<i.length;a++)s.push({start:i.start(a),end:i.end(a)});return this.bufferedInfo(s,r,n)}}catch{}return{len:0,start:r,end:r,nextStart:void 0}}static bufferedInfo(e,r,n){r=Math.max(0,r),e.sort(function(u,c){const d=u.start-c.start;return d||c.end-u.end});let i=[];if(n)for(let u=0;u<e.length;u++){const c=i.length;if(c){const d=i[c-1].end;e[u].start-d<n?e[u].end>d&&(i[c-1].end=e[u].end):i.push(e[u])}else i.push(e[u])}else i=e;let s=0,a,o=r,l=r;for(let u=0;u<i.length;u++){const c=i[u].start,d=i[u].end;if(r+n>=c&&r<d)o=c,l=d,s=l-r;else if(r+n<c){a=c;break}}return{len:s,start:o||0,end:l||0,nextStart:a}}static getBuffered(e){try{return e.buffered}catch(r){return G.log("failed to get media.buffered",r),iee}}}class Fx{constructor(e,r,n,i=0,s=-1,a=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=If(),this.buffering={audio:If(),video:If(),audiovideo:If()},this.level=e,this.sn=r,this.id=n,this.size=i,this.part=s,this.partial=a}}function If(){return{start:0,executeStart:0,executeEnd:0,end:0}}function V0(t,e){for(let n=0,i=t.length;n<i;n++){var r;if(((r=t[n])==null?void 0:r.cc)===e)return t[n]}return null}function see(t,e,r){return!!(e&&(r.endCC>r.startCC||t&&t.cc<r.startCC))}function aee(t,e){const r=t.fragments,n=e.fragments;if(!n.length||!r.length){G.log("No fragments to align");return}const i=V0(r,n[0].cc);if(!i||i&&!i.startPTS){G.log("No frag in previous level to align on");return}return i}function zC(t,e){if(t){const r=t.start+e;t.start=t.startPTS=r,t.endPTS=r+t.duration}}function jP(t,e){const r=e.fragments;for(let n=0,i=r.length;n<i;n++)zC(r[n],t);e.fragmentHint&&zC(e.fragmentHint,t),e.alignedSliding=!0}function oee(t,e,r){e&&(lee(t,r,e),!r.alignedSliding&&e&&Wm(r,e),!r.alignedSliding&&e&&!r.skippedSegments&&NP(e,r))}function lee(t,e,r){if(see(t,r,e)){const n=aee(r,e);n&&xe(n.start)&&(G.log(`Adjusting PTS using last level due to CC increase within current level ${e.url}`),jP(n.start,e))}}function Wm(t,e){if(!t.hasProgramDateTime||!e.hasProgramDateTime)return;const r=t.fragments,n=e.fragments;if(!r.length||!n.length)return;let i,s;const a=Math.min(e.endCC,t.endCC);e.startCC<a&&t.startCC<a&&(i=V0(n,a),s=V0(r,a)),(!i||!s)&&(i=n[Math.floor(n.length/2)],s=V0(r,i.cc)||r[Math.floor(r.length/2)]);const o=i.programDateTime,l=s.programDateTime;if(!o||!l)return;const u=(l-o)/1e3-(s.start-i.start);jP(u,t)}const YC=Math.pow(2,17);class uee{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,r){const n=e.url;if(!n)return Promise.reject(new Bs({type:Ve.NETWORK_ERROR,details:J.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${n?"part list":"url"}`),networkDetails:null}));this.abort();const i=this.config,s=i.fLoader,a=i.loader;return new Promise((o,l)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(f=>f[0]==="GAP")){l(ZC(e));return}else e.gap=!1;const u=this.loader=e.loader=s?new s(i):new a(i),c=XC(e),d=GC(i.fragLoadPolicy.default),h={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:YC};e.stats=u.stats,u.load(c,h,{onSuccess:(f,p,m,g)=>{this.resetLoader(e,u);let v=f.data;m.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(v.slice(0,16)),v=v.slice(16)),o({frag:e,part:null,payload:v,networkDetails:g})},onError:(f,p,m,g)=>{this.resetLoader(e,u),l(new Bs({type:Ve.NETWORK_ERROR,details:J.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:tn({url:n,data:void 0},f),error:new Error(`HTTP Error ${f.code} ${f.text}`),networkDetails:m,stats:g}))},onAbort:(f,p,m)=>{this.resetLoader(e,u),l(new Bs({type:Ve.NETWORK_ERROR,details:J.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:m,stats:f}))},onTimeout:(f,p,m)=>{this.resetLoader(e,u),l(new Bs({type:Ve.NETWORK_ERROR,details:J.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${h.timeout}ms`),networkDetails:m,stats:f}))},onProgress:(f,p,m,g)=>{r&&r({frag:e,part:null,payload:m,networkDetails:g})}})})}loadPart(e,r,n){this.abort();const i=this.config,s=i.fLoader,a=i.loader;return new Promise((o,l)=>{if(this.loader&&this.loader.destroy(),e.gap||r.gap){l(ZC(e,r));return}const u=this.loader=e.loader=s?new s(i):new a(i),c=XC(e,r),d=GC(i.fragLoadPolicy.default),h={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:YC};r.stats=u.stats,u.load(c,h,{onSuccess:(f,p,m,g)=>{this.resetLoader(e,u),this.updateStatsFromPart(e,r);const v={frag:e,part:r,payload:f.data,networkDetails:g};n(v),o(v)},onError:(f,p,m,g)=>{this.resetLoader(e,u),l(new Bs({type:Ve.NETWORK_ERROR,details:J.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:r,response:tn({url:c.url,data:void 0},f),error:new Error(`HTTP Error ${f.code} ${f.text}`),networkDetails:m,stats:g}))},onAbort:(f,p,m)=>{e.stats.aborted=r.stats.aborted,this.resetLoader(e,u),l(new Bs({type:Ve.NETWORK_ERROR,details:J.INTERNAL_ABORTED,fatal:!1,frag:e,part:r,error:new Error("Aborted"),networkDetails:m,stats:f}))},onTimeout:(f,p,m)=>{this.resetLoader(e,u),l(new Bs({type:Ve.NETWORK_ERROR,details:J.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:r,error:new Error(`Timeout after ${h.timeout}ms`),networkDetails:m,stats:f}))}})})}updateStatsFromPart(e,r){const n=e.stats,i=r.stats,s=i.total;if(n.loaded+=i.loaded,s){const l=Math.round(e.duration/r.duration),u=Math.min(Math.round(n.loaded/s),l),d=(l-u)*Math.round(n.loaded/u);n.total=n.loaded+d}else n.total=Math.max(n.loaded,n.total);const a=n.loading,o=i.loading;a.start?a.first+=o.first-o.start:(a.start=o.start,a.first=o.first),a.end=o.end}resetLoader(e,r){e.loader=null,this.loader===r&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),r.destroy()}}function XC(t,e=null){const r=e||t,n={frag:t,part:e,responseType:"arraybuffer",url:r.url,headers:{},rangeStart:0,rangeEnd:0},i=r.byteRangeStartOffset,s=r.byteRangeEndOffset;if(xe(i)&&xe(s)){var a;let o=i,l=s;if(t.sn==="initSegment"&&((a=t.decryptdata)==null?void 0:a.method)==="AES-128"){const u=s-i;u%16&&(l=s+(16-u%16)),i!==0&&(n.resetIV=!0,o=i-16)}n.rangeStart=o,n.rangeEnd=l}return n}function ZC(t,e){const r=new Error(`GAP ${t.gap?"tag":"attribute"} found`),n={type:Ve.MEDIA_ERROR,details:J.FRAG_GAP,fatal:!1,frag:t,error:r,networkDetails:null};return e&&(n.part=e),(e||t).stats.aborted=!0,new Bs(n)}class Bs extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class cee{constructor(e,r){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=r}decrypt(e,r){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},r,e)}}class dee{constructor(e,r){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=r}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}function hee(t){const e=t.byteLength,r=e&&new DataView(t.buffer).getUint8(e-1);return r?sl(t,0,e-r):t}class fee{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const r=new DataView(e),n=new Uint32Array(4);for(let i=0;i<4;i++)n[i]=r.getUint32(i*4);return n}initTable(){const e=this.sBox,r=this.invSBox,n=this.subMix,i=n[0],s=n[1],a=n[2],o=n[3],l=this.invSubMix,u=l[0],c=l[1],d=l[2],h=l[3],f=new Uint32Array(256);let p=0,m=0,g=0;for(g=0;g<256;g++)g<128?f[g]=g<<1:f[g]=g<<1^283;for(g=0;g<256;g++){let v=m^m<<1^m<<2^m<<3^m<<4;v=v>>>8^v&255^99,e[p]=v,r[v]=p;const b=f[p],y=f[b],T=f[y];let x=f[v]*257^v*16843008;i[p]=x<<24|x>>>8,s[p]=x<<16|x>>>16,a[p]=x<<8|x>>>24,o[p]=x,x=T*16843009^y*65537^b*257^p*16843008,u[v]=x<<24|x>>>8,c[v]=x<<16|x>>>16,d[v]=x<<8|x>>>24,h[v]=x,p?(p=b^f[f[f[T^b]]],m^=f[f[m]]):p=m=1}}expandKey(e){const r=this.uint8ArrayToUint32Array_(e);let n=!0,i=0;for(;i<r.length&&n;)n=r[i]===this.key[i],i++;if(n)return;this.key=r;const s=this.keySize=r.length;if(s!==4&&s!==6&&s!==8)throw new Error("Invalid aes key size="+s);const a=this.ksRows=(s+6+1)*4;let o,l;const u=this.keySchedule=new Uint32Array(a),c=this.invKeySchedule=new Uint32Array(a),d=this.sBox,h=this.rcon,f=this.invSubMix,p=f[0],m=f[1],g=f[2],v=f[3];let b,y;for(o=0;o<a;o++){if(o<s){b=u[o]=r[o];continue}y=b,o%s===0?(y=y<<8|y>>>24,y=d[y>>>24]<<24|d[y>>>16&255]<<16|d[y>>>8&255]<<8|d[y&255],y^=h[o/s|0]<<24):s>6&&o%s===4&&(y=d[y>>>24]<<24|d[y>>>16&255]<<16|d[y>>>8&255]<<8|d[y&255]),u[o]=b=(u[o-s]^y)>>>0}for(l=0;l<a;l++)o=a-l,l&3?y=u[o]:y=u[o-4],l<4||o<=4?c[l]=y:c[l]=p[d[y>>>24]]^m[d[y>>>16&255]]^g[d[y>>>8&255]]^v[d[y&255]],c[l]=c[l]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,r,n){const i=this.keySize+6,s=this.invKeySchedule,a=this.invSBox,o=this.invSubMix,l=o[0],u=o[1],c=o[2],d=o[3],h=this.uint8ArrayToUint32Array_(n);let f=h[0],p=h[1],m=h[2],g=h[3];const v=new Int32Array(e),b=new Int32Array(v.length);let y,T,x,_,S,A,k,I,C,N,P,V,M,U;const B=this.networkToHostOrderSwap;for(;r<v.length;){for(C=B(v[r]),N=B(v[r+1]),P=B(v[r+2]),V=B(v[r+3]),S=C^s[0],A=V^s[1],k=P^s[2],I=N^s[3],M=4,U=1;U<i;U++)y=l[S>>>24]^u[A>>16&255]^c[k>>8&255]^d[I&255]^s[M],T=l[A>>>24]^u[k>>16&255]^c[I>>8&255]^d[S&255]^s[M+1],x=l[k>>>24]^u[I>>16&255]^c[S>>8&255]^d[A&255]^s[M+2],_=l[I>>>24]^u[S>>16&255]^c[A>>8&255]^d[k&255]^s[M+3],S=y,A=T,k=x,I=_,M=M+4;y=a[S>>>24]<<24^a[A>>16&255]<<16^a[k>>8&255]<<8^a[I&255]^s[M],T=a[A>>>24]<<24^a[k>>16&255]<<16^a[I>>8&255]<<8^a[S&255]^s[M+1],x=a[k>>>24]<<24^a[I>>16&255]<<16^a[S>>8&255]<<8^a[A&255]^s[M+2],_=a[I>>>24]<<24^a[S>>16&255]<<16^a[A>>8&255]<<8^a[k&255]^s[M+3],b[r]=B(y^f),b[r+1]=B(_^p),b[r+2]=B(x^m),b[r+3]=B(T^g),f=C,p=N,m=P,g=V,r=r+4}return b.buffer}}const pee=16;class $x{constructor(e,{removePKCS7Padding:r=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=r,r)try{const n=self.crypto;n&&(this.subtle=n.subtle||n.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:r}=this;if(!e||r)return this.reset(),null;const n=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?hee(n):n}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,r,n){return this.useSoftware?new Promise((i,s)=>{this.softwareDecrypt(new Uint8Array(e),r,n);const a=this.flush();a?i(a.buffer):s(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),r,n)}softwareDecrypt(e,r,n){const{currentIV:i,currentResult:s,remainderData:a}=this;this.logOnce("JS AES decrypt"),a&&(e=Ei(a,e),this.remainderData=null);const o=this.getValidChunk(e);if(!o.length)return null;i&&(n=i);let l=this.softwareDecrypter;l||(l=this.softwareDecrypter=new fee),l.expandKey(r);const u=s;return this.currentResult=l.decrypt(o.buffer,0,n),this.currentIV=sl(o,-16).buffer,u||null}webCryptoDecrypt(e,r,n){if(this.key!==r||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,r,n));this.key=r,this.fastAesKey=new dee(this.subtle,r)}return this.fastAesKey.expandKey().then(i=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new cee(this.subtle,new Uint8Array(n)).decrypt(e.buffer,i)):Promise.reject(new Error("web crypto not initialized"))).catch(i=>(G.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${i.name}: ${i.message}`),this.onWebCryptoError(e,r,n)))}onWebCryptoError(e,r,n){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,r,n);const i=this.flush();if(i)return i.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(e){let r=e;const n=e.length-e.length%pee;return n!==e.length&&(r=sl(e,0,n),this.remainderData=sl(e,n)),r}logOnce(e){this.logEnabled&&(G.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const mee={toString:function(t){let e="";const r=t.length;for(let n=0;n<r;n++)e+=`[${t.start(n).toFixed(3)}-${t.end(n).toFixed(3)}]`;return e}},ae={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class Ux extends ree{constructor(e,r,n,i,s){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=ae.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=s,this.logPrefix=i,this.log=G.log.bind(G,`${i}:`),this.warn=G.warn.bind(G,`${i}:`),this.hls=e,this.fragmentLoader=new uee(e.config),this.keyLoader=n,this.fragmentTracker=r,this.config=e.config,this.decrypter=new $x(e.config),e.on(w.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=ae.STOPPED}_streamEnded(e,r){if(r.live||e.nextStart||!e.end||!this.media)return!1;const n=r.partList;if(n!=null&&n.length){const s=n[n.length-1];return Zt.isBuffered(this.media,s.start+s.duration/2)}const i=r.fragments[r.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(i)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null){var e;return(e=this.levelLastLoaded)==null?void 0:e.details}}onMediaAttached(e,r){const n=this.media=this.mediaBuffer=r.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),n.addEventListener("seeking",this.onvseeking),n.addEventListener("ended",this.onvended);const i=this.config;this.levels&&i.autoStartLoad&&this.state===ae.STOPPED&&this.startLoad(i.startPosition)}onMediaDetaching(){const e=this.media;e!=null&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:e,fragCurrent:r,media:n,mediaBuffer:i,state:s}=this,a=n?n.currentTime:0,o=Zt.bufferInfo(i||n,a,e.maxBufferHole);if(this.log(`media seeking to ${xe(a)?a.toFixed(3):a}, state: ${s}`),this.state===ae.ENDED)this.resetLoadingState();else if(r){const l=e.maxFragLookUpTolerance,u=r.start-l,c=r.start+r.duration+l;if(!o.len||c<o.start||u>o.end){const d=a>c;(a<u||d)&&(d&&r.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),r.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}n&&(this.fragmentTracker.removeFragmentsInRange(a,1/0,this.playlistType,!0),this.lastCurrentTime=a),!this.loadedmetadata&&!o.len&&(this.nextLoadPosition=this.startPosition=a),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(e,r){this.startTimeOffset=r.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.hls.off(w.MANIFEST_LOADED,this.onManifestLoaded,this),this.stopLoad(),super.onHandlerDestroying(),this.hls=null}onHandlerDestroyed(){this.state=ae.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,r,n){this._loadFragForPlayback(e,r,n)}_loadFragForPlayback(e,r,n){const i=s=>{if(this.fragContextChanged(e)){this.warn(`Fragment ${e.sn}${s.part?" p: "+s.part.index:""} of level ${e.level} was dropped during download.`),this.fragmentTracker.removeFragment(e);return}e.stats.chunkCount++,this._handleFragmentLoadProgress(s)};this._doFragLoad(e,r,n,i).then(s=>{if(!s)return;const a=this.state;if(this.fragContextChanged(e)){(a===ae.FRAG_LOADING||!this.fragCurrent&&a===ae.PARSING)&&(this.fragmentTracker.removeFragment(e),this.state=ae.IDLE);return}"payload"in s&&(this.log(`Loaded fragment ${e.sn} of level ${e.level}`),this.hls.trigger(w.FRAG_LOADED,s)),this._handleFragmentLoadComplete(s)}).catch(s=>{this.state===ae.STOPPED||this.state===ae.ERROR||(this.warn(`Frag error: ${(s==null?void 0:s.message)||s}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var r;const{fragmentTracker:n}=this;if(n.getState(e)===Yr.APPENDING){const s=e.type,a=this.getFwdBufferInfo(this.mediaBuffer,s),o=Math.max(e.duration,a?a.len:this.config.maxBufferLength),l=this.backtrackFragment;((l?e.sn-l.sn:0)===1||this.reduceMaxBufferLength(o,e.duration))&&n.removeFragment(e)}else((r=this.mediaBuffer)==null?void 0:r.buffered.length)===0?n.removeAllFragments():n.hasParts(e.type)&&(n.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),n.getState(e)===Yr.PARTIAL&&n.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const r=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:r,part:null,stats:r.stats,id:r.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}flushMainBuffer(e,r,n=null){if(!(e-r))return;const i={startOffset:e,endOffset:r,type:n};this.hls.trigger(w.BUFFER_FLUSHING,i)}_loadInitSegment(e,r){this._doFragLoad(e,r).then(n=>{if(!n||this.fragContextChanged(e)||!this.levels)throw new Error("init load aborted");return n}).then(n=>{const{hls:i}=this,{payload:s}=n,a=e.decryptdata;if(s&&s.byteLength>0&&a!=null&&a.key&&a.iv&&a.method==="AES-128"){const o=self.performance.now();return this.decrypter.decrypt(new Uint8Array(s),a.key.buffer,a.iv.buffer).catch(l=>{throw i.trigger(w.ERROR,{type:Ve.MEDIA_ERROR,details:J.FRAG_DECRYPT_ERROR,fatal:!1,error:l,reason:l.message,frag:e}),l}).then(l=>{const u=self.performance.now();return i.trigger(w.FRAG_DECRYPTED,{frag:e,payload:l,stats:{tstart:o,tdecrypt:u}}),n.payload=l,this.completeInitSegmentLoad(n)})}return this.completeInitSegmentLoad(n)}).catch(n=>{this.state===ae.STOPPED||this.state===ae.ERROR||(this.warn(n),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:r}=this;if(!r)throw new Error("init load aborted, missing levels");const n=e.frag.stats;this.state=ae.IDLE,e.frag.data=new Uint8Array(e.payload),n.parsing.start=n.buffering.start=self.performance.now(),n.parsing.end=n.buffering.end=self.performance.now(),this.tick()}fragContextChanged(e){const{fragCurrent:r}=this;return!e||!r||e.sn!==r.sn||e.level!==r.level}fragBufferedComplete(e,r){var n,i,s,a;const o=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${r?" part: "+r.index:""} of ${this.playlistType===je.MAIN?"level":"track"} ${e.level} (frag:[${((n=e.startPTS)!=null?n:NaN).toFixed(3)}-${((i=e.endPTS)!=null?i:NaN).toFixed(3)}] > buffer:${o?mee.toString(Zt.getBuffered(o)):"(detached)"})`),e.sn!=="initSegment"){var l;if(e.type!==je.SUBTITLE){const c=e.elementaryStreams;if(!Object.keys(c).some(d=>!!c[d])){this.state=ae.IDLE;return}}const u=(l=this.levels)==null?void 0:l[e.level];u!=null&&u.fragmentError&&(this.log(`Resetting level fragment error count of ${u.fragmentError} on frag buffered`),u.fragmentError=0)}this.state=ae.IDLE,o&&(!this.loadedmetadata&&e.type==je.MAIN&&o.buffered.length&&((s=this.fragCurrent)==null?void 0:s.sn)===((a=this.fragPrevious)==null?void 0:a.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(e){const{transmuxer:r}=this;if(!r)return;const{frag:n,part:i,partsLoaded:s}=e,a=!s||s.length===0||s.some(l=>!l),o=new Fx(n.level,n.sn,n.stats.chunkCount+1,0,i?i.index:-1,!a);r.flush(o)}_handleFragmentLoadProgress(e){}_doFragLoad(e,r,n=null,i){var s;const a=r==null?void 0:r.details;if(!this.levels||!a)throw new Error(`frag load aborted, missing level${a?"":" detail"}s`);let o=null;if(e.encrypted&&!((s=e.decryptdata)!=null&&s.key)?(this.log(`Loading key for ${e.sn} of [${a.startSN}-${a.endSN}], ${this.logPrefix==="[stream-controller]"?"level":"track"} ${e.level}`),this.state=ae.KEY_LOADING,this.fragCurrent=e,o=this.keyLoader.load(e).then(c=>{if(!this.fragContextChanged(c.frag))return this.hls.trigger(w.KEY_LOADED,c),this.state===ae.KEY_LOADING&&(this.state=ae.IDLE),c}),this.hls.trigger(w.KEY_LOADING,{frag:e}),this.fragCurrent===null&&(o=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):!e.encrypted&&a.encryptedFragments.length&&this.keyLoader.loadClear(e,a.encryptedFragments),n=Math.max(e.start,n||0),this.config.lowLatencyMode&&e.sn!=="initSegment"){const c=a.partList;if(c&&i){n>e.end&&a.fragmentHint&&(e=a.fragmentHint);const d=this.getNextPart(c,e,n);if(d>-1){const h=c[d];this.log(`Loading part sn: ${e.sn} p: ${h.index} cc: ${e.cc} of playlist [${a.startSN}-${a.endSN}] parts [0-${d}-${c.length-1}] ${this.logPrefix==="[stream-controller]"?"level":"track"}: ${e.level}, target: ${parseFloat(n.toFixed(3))}`),this.nextLoadPosition=h.start+h.duration,this.state=ae.FRAG_LOADING;let f;return o?f=o.then(p=>!p||this.fragContextChanged(p.frag)?null:this.doFragPartsLoad(e,h,r,i)).catch(p=>this.handleFragLoadError(p)):f=this.doFragPartsLoad(e,h,r,i).catch(p=>this.handleFragLoadError(p)),this.hls.trigger(w.FRAG_LOADING,{frag:e,part:h,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):f}else if(!e.url||this.loadedEndOfParts(c,n))return Promise.resolve(null)}}this.log(`Loading fragment ${e.sn} cc: ${e.cc} ${a?"of ["+a.startSN+"-"+a.endSN+"] ":""}${this.logPrefix==="[stream-controller]"?"level":"track"}: ${e.level}, target: ${parseFloat(n.toFixed(3))}`),xe(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=ae.FRAG_LOADING;const l=this.config.progressive;let u;return l&&o?u=o.then(c=>!c||this.fragContextChanged(c==null?void 0:c.frag)?null:this.fragmentLoader.load(e,i)).catch(c=>this.handleFragLoadError(c)):u=Promise.all([this.fragmentLoader.load(e,l?i:void 0),o]).then(([c])=>(!l&&c&&i&&i(c),c)).catch(c=>this.handleFragLoadError(c)),this.hls.trigger(w.FRAG_LOADING,{frag:e,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):u}doFragPartsLoad(e,r,n,i){return new Promise((s,a)=>{var o;const l=[],u=(o=n.details)==null?void 0:o.partList,c=d=>{this.fragmentLoader.loadPart(e,d,i).then(h=>{l[d.index]=h;const f=h.part;this.hls.trigger(w.FRAG_LOADED,h);const p=VC(n,e.sn,d.index+1)||FP(u,e.sn,d.index+1);if(p)c(p);else return s({frag:e,part:f,partsLoaded:l})}).catch(a)};c(r)})}handleFragLoadError(e){if("data"in e){const r=e.data;e.data&&r.details===J.INTERNAL_ABORTED?this.handleFragLoadAborted(r.frag,r.part):this.hls.trigger(w.ERROR,r)}else this.hls.trigger(w.ERROR,{type:Ve.OTHER_ERROR,details:J.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const r=this.getCurrentContext(e);if(!r||this.state!==ae.PARSING){!this.fragCurrent&&this.state!==ae.STOPPED&&this.state!==ae.ERROR&&(this.state=ae.IDLE);return}const{frag:n,part:i,level:s}=r,a=self.performance.now();n.stats.parsing.end=a,i&&(i.stats.parsing.end=a),this.updateLevelTiming(n,i,s,e.partial)}getCurrentContext(e){const{levels:r,fragCurrent:n}=this,{level:i,sn:s,part:a}=e;if(!(r!=null&&r[i]))return this.warn(`Levels object was unset while buffering fragment ${s} of level ${i}. The current chunk will not be buffered.`),null;const o=r[i],l=a>-1?VC(o,s,a):null,u=l?l.fragment:FJ(o,s,n);return u?(n&&n!==u&&(u.stats=n.stats),{frag:u,part:l,level:o}):null}bufferFragmentData(e,r,n,i,s){var a;if(!e||this.state!==ae.PARSING)return;const{data1:o,data2:l}=e;let u=o;if(o&&l&&(u=Ei(o,l)),!((a=u)!=null&&a.length))return;const c={type:e.type,frag:r,part:n,chunkMeta:i,parent:r.type,data:u};if(this.hls.trigger(w.BUFFER_APPENDING,c),e.dropped&&e.independent&&!n){if(s)return;this.flushBufferGap(r)}}flushBufferGap(e){const r=this.media;if(!r)return;if(!Zt.isBuffered(r,r.currentTime)){this.flushMainBuffer(0,e.start);return}const n=r.currentTime,i=Zt.bufferInfo(r,n,0),s=e.duration,a=Math.min(this.config.maxFragLookUpTolerance*2,s*.25),o=Math.max(Math.min(e.start-a,i.end-a),n+a);e.start-o>a&&this.flushMainBuffer(o,e.start)}getFwdBufferInfo(e,r){const n=this.getLoadPosition();return xe(n)?this.getFwdBufferInfoAtPos(e,n,r):null}getFwdBufferInfoAtPos(e,r,n){const{config:{maxBufferHole:i}}=this,s=Zt.bufferInfo(e,r,i);if(s.len===0&&s.nextStart!==void 0){const a=this.fragmentTracker.getBufferedFrag(r,n);if(a&&s.nextStart<a.end)return Zt.bufferInfo(e,r,Math.max(s.nextStart,i))}return s}getMaxBufferLength(e){const{config:r}=this;let n;return e?n=Math.max(8*r.maxBufferSize/e,r.maxBufferLength):n=r.maxBufferLength,Math.min(n,r.maxMaxBufferLength)}reduceMaxBufferLength(e,r){const n=this.config,i=Math.max(Math.min(e-r,n.maxBufferLength),r),s=Math.max(e-r*3,n.maxMaxBufferLength/2,i);return s>=i?(n.maxMaxBufferLength=s,this.warn(`Reduce max buffer length to ${s}s`),!0):!1}getAppendedFrag(e,r=je.MAIN){const n=this.fragmentTracker.getAppendedFrag(e,je.MAIN);return n&&"fragment"in n?n.fragment:n}getNextFragment(e,r){const n=r.fragments,i=n.length;if(!i)return null;const{config:s}=this,a=n[0].start;let o;if(r.live){const l=s.initialLiveManifestSize;if(i<l)return this.warn(`Not enough fragments to start playback (have: ${i}, need: ${l})`),null;(!r.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<a)&&(o=this.getInitialLiveFragment(r,n),this.startPosition=this.nextLoadPosition=o?this.hls.liveSyncPosition||o.start:e)}else e<=a&&(o=n[0]);if(!o){const l=s.lowLatencyMode?r.partEnd:r.fragmentEnd;o=this.getFragmentAtPosition(e,l,r)}return this.mapToInitFragWhenRequired(o)}isLoopLoading(e,r){const n=this.fragmentTracker.getState(e);return(n===Yr.OK||n===Yr.PARTIAL&&!!e.gap)&&this.nextLoadPosition>r}getNextFragmentLoopLoading(e,r,n,i,s){const a=e.gap,o=this.getNextFragment(this.nextLoadPosition,r);if(o===null)return o;if(e=o,a&&e&&!e.gap&&n.nextStart){const l=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,n.nextStart,i);if(l!==null&&n.len+l.len>=s)return this.log(`buffer full after gaps in "${i}" playlist starting at sn: ${e.sn}`),null}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!(e!=null&&e.initSegment.data)&&!this.bitrateTest?e.initSegment:e}getNextPart(e,r,n){let i=-1,s=!1,a=!0;for(let o=0,l=e.length;o<l;o++){const u=e[o];if(a=a&&!u.independent,i>-1&&n<u.start)break;const c=u.loaded;c?i=-1:(s||u.independent||a)&&u.fragment===r&&(i=o),s=c}return i}loadedEndOfParts(e,r){const n=e[e.length-1];return n&&r>n.start&&n.loaded}getInitialLiveFragment(e,r){const n=this.fragPrevious;let i=null;if(n){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${n.programDateTime}`),i=UJ(r,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){const s=n.sn+1;if(s>=e.startSN&&s<=e.endSN){const a=r[s-e.startSN];n.cc===a.cc&&(i=a,this.log(`Live playlist, switching playlist, load frag with next SN: ${i.sn}`))}i||(i=HJ(r,n.cc),i&&this.log(`Live playlist, switching playlist, load frag with same CC: ${i.sn}`))}}else{const s=this.hls.liveSyncPosition;s!==null&&(i=this.getFragmentAtPosition(s,this.bitrateTest?e.fragmentEnd:e.edge,e))}return i}getFragmentAtPosition(e,r,n){const{config:i}=this;let{fragPrevious:s}=this,{fragments:a,endSN:o}=n;const{fragmentHint:l}=n,{maxFragLookUpTolerance:u}=i,c=n.partList,d=!!(i.lowLatencyMode&&c!=null&&c.length&&l);d&&l&&!this.bitrateTest&&(a=a.concat(l),o=l.sn);let h;if(e<r){const f=e>r-u?0:u;h=Vm(s,a,e,f)}else h=a[a.length-1];if(h){const f=h.sn-n.startSN,p=this.fragmentTracker.getState(h);if((p===Yr.OK||p===Yr.PARTIAL&&h.gap)&&(s=h),s&&h.sn===s.sn&&(!d||c[0].fragment.sn>h.sn)&&s&&h.level===s.level){const g=a[f+1];h.sn<o&&this.fragmentTracker.getState(g)!==Yr.OK?h=g:h=null}}return h}synchronizeToLiveEdge(e){const{config:r,media:n}=this;if(!n)return;const i=this.hls.liveSyncPosition,s=n.currentTime,a=e.fragments[0].start,o=e.edge,l=s>=a-r.maxFragLookUpTolerance&&s<=o;if(i!==null&&n.duration>i&&(s<i||!l)){const u=r.liveMaxLatencyDuration!==void 0?r.liveMaxLatencyDuration:r.liveMaxLatencyDurationCount*e.targetduration;(!l&&n.readyState<4||s<o-u)&&(this.loadedmetadata||(this.nextLoadPosition=i),n.readyState&&(this.warn(`Playback: ${s.toFixed(3)} is located too far from the end of live sliding playlist: ${o}, reset currentTime to : ${i.toFixed(3)}`),n.currentTime=i))}}alignPlaylists(e,r,n){const i=e.fragments.length;if(!i)return this.warn("No fragments in live playlist"),0;const s=e.fragments[0].start,a=!r,o=e.alignedSliding&&xe(s);if(a||!o&&!s){const{fragPrevious:l}=this;oee(l,n,e);const u=e.fragments[0].start;return this.log(`Live playlist sliding: ${u.toFixed(2)} start-sn: ${r?r.startSN:"na"}->${e.startSN} prev-sn: ${l?l.sn:"na"} fragments: ${i}`),u}return s}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,r){let n=this.startPosition;if(n<r&&(n=-1),n===-1||this.lastCurrentTime===-1){const i=this.startTimeOffset!==null,s=i?this.startTimeOffset:e.startTimeOffset;s!==null&&xe(s)?(n=r+s,s<0&&(n+=e.totalduration),n=Math.min(Math.max(r,n),r+e.totalduration),this.log(`Start time offset ${s} found in ${i?"multivariant":"media"} playlist, adjust startPosition to ${n}`),this.startPosition=n):e.live?n=this.hls.liveSyncPosition||r:this.startPosition=n=0,this.lastCurrentTime=n}this.nextLoadPosition=n}getLoadPosition(){const{media:e}=this;let r=0;return this.loadedmetadata&&e?r=e.currentTime:this.nextLoadPosition&&(r=this.nextLoadPosition),r}handleFragLoadAborted(e,r){this.transmuxer&&e.sn!=="initSegment"&&e.stats.aborted&&(this.warn(`Fragment ${e.sn}${r?" part "+r.index:""} of level ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==ae.FRAG_LOADING_WAITING_RETRY)&&(this.state=ae.IDLE)}onFragmentOrKeyLoadError(e,r){if(r.chunkMeta&&!r.frag){const c=this.getCurrentContext(r.chunkMeta);c&&(r.frag=c.frag)}const n=r.frag;if(!n||n.type!==e||!this.levels)return;if(this.fragContextChanged(n)){var i;this.warn(`Frag load error must match current frag to retry ${n.url} > ${(i=this.fragCurrent)==null?void 0:i.url}`);return}const s=r.details===J.FRAG_GAP;s&&this.fragmentTracker.fragBuffered(n,!0);const a=r.errorAction,{action:o,retryCount:l=0,retryConfig:u}=a||{};if(a&&o===ln.RetryRequest&&u){this.resetStartWhenNotLoaded(this.levelLastLoaded);const c=Px(u,l);this.warn(`Fragment ${n.sn} of ${e} ${n.level} errored with ${r.details}, retrying loading ${l+1}/${u.maxNumRetry} in ${c}ms`),a.resolved=!0,this.retryDate=self.performance.now()+c,this.state=ae.FRAG_LOADING_WAITING_RETRY}else if(u&&a)if(this.resetFragmentErrors(e),l<u.maxNumRetry)!s&&o!==ln.RemoveAlternatePermanently&&(a.resolved=!0);else{G.warn(`${r.details} reached or exceeded max retry (${l})`);return}else(a==null?void 0:a.action)===ln.SendAlternateToPenaltyBox?this.state=ae.WAITING_LEVEL:this.state=ae.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===ae.PARSING||this.state===ae.PARSED){const r=e.frag,n=e.parent,i=this.getFwdBufferInfo(this.mediaBuffer,n),s=i&&i.len>.5;s&&this.reduceMaxBufferLength(i.len,(r==null?void 0:r.duration)||10);const a=!s;return a&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${n} buffer`),r&&(this.fragmentTracker.removeFragment(r),this.nextLoadPosition=r.start),this.resetLoadingState(),a}return!1}resetFragmentErrors(e){e===je.AUDIO&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==ae.STOPPED&&(this.state=ae.IDLE)}afterBufferFlushed(e,r,n){if(!e)return;const i=Zt.getBuffered(e);this.fragmentTracker.detectEvictedFragments(r,i,n),this.state===ae.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=ae.IDLE}resetStartWhenNotLoaded(e){if(!this.loadedmetadata){this.startFragRequested=!1;const r=e?e.details:null;r!=null&&r.live?(this.startPosition=-1,this.setStartPosition(r,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of level ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,r,n,i){var s;const a=n.details;if(!a){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((l,u)=>{const c=e.elementaryStreams[u];if(c){const d=c.endPTS-c.startPTS;if(d<=0)return this.warn(`Could not parse fragment ${e.sn} ${u} duration reliably (${d})`),l||!1;const h=i?0:PP(a,e,c.startPTS,c.endPTS,c.startDTS,c.endDTS);return this.hls.trigger(w.LEVEL_PTS_UPDATED,{details:a,level:n,drift:h,type:u,frag:e,start:c.startPTS,end:c.endPTS}),!0}return l},!1)&&((s=this.transmuxer)==null?void 0:s.error)===null){const l=new Error(`Found no media in fragment ${e.sn} of level ${e.level} resetting transmuxer to fallback to playlist timing`);if(n.fragmentError===0&&(n.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)),this.warn(l.message),this.hls.trigger(w.ERROR,{type:Ve.MEDIA_ERROR,details:J.FRAG_PARSING_ERROR,fatal:!1,error:l,frag:e,reason:`Found no media in msn ${e.sn} of level "${n.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=ae.PARSED,this.hls.trigger(w.FRAG_PARSED,{frag:e,part:r})}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){const r=this._state;r!==e&&(this._state=e,this.log(`${r}->${e}`))}get state(){return this._state}}class HP{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:r}=this;let n;if(e.length)e.length===1?n=e[0]:n=gee(e,r);else return new Uint8Array(0);return this.reset(),n}reset(){this.chunks.length=0,this.dataLength=0}}function gee(t,e){const r=new Uint8Array(e);let n=0;for(let i=0;i<t.length;i++){const s=t[i];r.set(s,n),n+=s.length}return r}function vee(){return typeof __HLS_WORKER_BUNDLE__=="function"}function bee(){const t=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),e=self.URL.createObjectURL(t);return{worker:new self.Worker(e),objectURL:e}}function yee(t){const e=new self.URL(t,self.location.href).href;return{worker:new self.Worker(e),scriptURL:e}}function ls(t="",e=9e4){return{type:t,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class Bx{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,r,n,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,r){return!1}appendFrame(e,r,n){}demux(e,r){this.cachedData&&(e=Ei(this.cachedData,e),this.cachedData=null);let n=dh(e,0),i=n?n.length:0,s;const a=this._audioTrack,o=this._id3Track,l=n?Mx(n):void 0,u=e.length;for((this.basePTS===null||this.frameIndex===0&&xe(l))&&(this.basePTS=Eee(l,r,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),n&&n.length>0&&o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:Li.audioId3,duration:Number.POSITIVE_INFINITY});i<u;){if(this.canParse(e,i)){const c=this.appendFrame(a,e,i);c?(this.frameIndex++,this.lastPTS=c.sample.pts,i+=c.length,s=i):i=u}else jQ(e,i)?(n=dh(e,i),o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:Li.audioId3,duration:Number.POSITIVE_INFINITY}),i+=n.length,s=i):i++;if(i===u&&s!==u){const c=sl(e,s);this.cachedData?this.cachedData=Ei(this.cachedData,c):this.cachedData=c}}return{audioTrack:a,videoTrack:ls(),id3Track:o,textTrack:ls()}}demuxSampleAes(e,r,n){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const r=this.cachedData;return r&&(this.cachedData=null,this.demux(r,0)),{audioTrack:this._audioTrack,videoTrack:ls(),id3Track:this._id3Track,textTrack:ls()}}destroy(){}}const Eee=(t,e,r)=>{if(xe(t))return t*90;const n=r?r.baseTime*9e4/r.timescale:0;return e*9e4+n};function _ee(t,e,r,n){let i,s,a,o;const l=navigator.userAgent.toLowerCase(),u=n,c=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];i=((e[r+2]&192)>>>6)+1;const d=(e[r+2]&60)>>>2;if(d>c.length-1){const h=new Error(`invalid ADTS sampling index:${d}`);t.emit(w.ERROR,w.ERROR,{type:Ve.MEDIA_ERROR,details:J.FRAG_PARSING_ERROR,fatal:!0,error:h,reason:h.message});return}return a=(e[r+2]&1)<<2,a|=(e[r+3]&192)>>>6,G.log(`manifest codec:${n}, ADTS type:${i}, samplingIndex:${d}`),/firefox/i.test(l)?d>=6?(i=5,o=new Array(4),s=d-3):(i=2,o=new Array(2),s=d):l.indexOf("android")!==-1?(i=2,o=new Array(2),s=d):(i=5,o=new Array(4),n&&(n.indexOf("mp4a.40.29")!==-1||n.indexOf("mp4a.40.5")!==-1)||!n&&d>=6?s=d-3:((n&&n.indexOf("mp4a.40.2")!==-1&&(d>=6&&a===1||/vivaldi/i.test(l))||!n&&a===1)&&(i=2,o=new Array(2)),s=d)),o[0]=i<<3,o[0]|=(d&14)>>1,o[1]|=(d&1)<<7,o[1]|=a<<3,i===5&&(o[1]|=(s&14)>>1,o[2]=(s&1)<<7,o[2]|=8,o[3]=0),{config:o,samplerate:c[d],channelCount:a,codec:"mp4a.40."+i,manifestCodec:u}}function VP(t,e){return t[e]===255&&(t[e+1]&246)===240}function WP(t,e){return t[e+1]&1?7:9}function jx(t,e){return(t[e+3]&3)<<11|t[e+4]<<3|(t[e+5]&224)>>>5}function Tee(t,e){return e+5<t.length}function Gm(t,e){return e+1<t.length&&VP(t,e)}function xee(t,e){return Tee(t,e)&&VP(t,e)&&jx(t,e)<=t.length-e}function See(t,e){if(Gm(t,e)){const r=WP(t,e);if(e+r>=t.length)return!1;const n=jx(t,e);if(n<=r)return!1;const i=e+n;return i===t.length||Gm(t,i)}return!1}function GP(t,e,r,n,i){if(!t.samplerate){const s=_ee(e,r,n,i);if(!s)return;t.config=s.config,t.samplerate=s.samplerate,t.channelCount=s.channelCount,t.codec=s.codec,t.manifestCodec=s.manifestCodec,G.log(`parsed codec:${t.codec}, rate:${s.samplerate}, channels:${s.channelCount}`)}}function KP(t){return 1024*9e4/t}function wee(t,e){const r=WP(t,e);if(e+r<=t.length){const n=jx(t,e)-r;if(n>0)return{headerLength:r,frameLength:n}}}function qP(t,e,r,n,i){const s=KP(t.samplerate),a=n+i*s,o=wee(e,r);let l;if(o){const{frameLength:d,headerLength:h}=o,f=h+d,p=Math.max(0,r+f-e.length);p?(l=new Uint8Array(f-h),l.set(e.subarray(r+h,e.length),0)):l=e.subarray(r+h,r+f);const m={unit:l,pts:a};return p||t.samples.push(m),{sample:m,length:f,missing:p}}const u=e.length-r;return l=new Uint8Array(u),l.set(e.subarray(r,e.length),0),{sample:{unit:l,pts:a},length:u,missing:-1}}let kf=null;const Aee=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Ree=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],Cee=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Iee=[0,1,1,4];function zP(t,e,r,n,i){if(r+24>e.length)return;const s=YP(e,r);if(s&&r+s.frameLength<=e.length){const a=s.samplesPerFrame*9e4/s.sampleRate,o=n+i*a,l={unit:e.subarray(r,r+s.frameLength),pts:o,dts:o};return t.config=[],t.channelCount=s.channelCount,t.samplerate=s.sampleRate,t.samples.push(l),{sample:l,length:s.frameLength,missing:0}}}function YP(t,e){const r=t[e+1]>>3&3,n=t[e+1]>>1&3,i=t[e+2]>>4&15,s=t[e+2]>>2&3;if(r!==1&&i!==0&&i!==15&&s!==3){const a=t[e+2]>>1&1,o=t[e+3]>>6,l=r===3?3-n:n===3?3:4,u=Aee[l*14+i-1]*1e3,d=Ree[(r===3?0:r===2?1:2)*3+s],h=o===3?1:2,f=Cee[r][n],p=Iee[n],m=f*8*p,g=Math.floor(f*u/d+a)*p;if(kf===null){const y=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);kf=y?parseInt(y[1]):0}return!!kf&&kf<=87&&n===2&&u>=224e3&&o===0&&(t[e+3]=t[e+3]|128),{sampleRate:d,channelCount:h,frameLength:g,samplesPerFrame:m}}}function Hx(t,e){return t[e]===255&&(t[e+1]&224)===224&&(t[e+1]&6)!==0}function XP(t,e){return e+1<t.length&&Hx(t,e)}function kee(t,e){return Hx(t,e)&&4<=t.length-e}function ZP(t,e){if(e+1<t.length&&Hx(t,e)){const n=YP(t,e);let i=4;n!=null&&n.frameLength&&(i=n.frameLength);const s=e+i;return s===t.length||XP(t,s)}return!1}class Lee extends Bx{constructor(e,r){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=r}resetInitSegment(e,r,n,i){super.resetInitSegment(e,r,n,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:r,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const r=dh(e,0);let n=(r==null?void 0:r.length)||0;if(ZP(e,n))return!1;for(let i=e.length;n<i;n++)if(See(e,n))return G.log("ADTS sync word found !"),!0;return!1}canParse(e,r){return xee(e,r)}appendFrame(e,r,n){GP(e,this.observer,r,n,e.manifestCodec);const i=qP(e,r,n,this.basePTS,this.frameIndex);if(i&&i.missing===0)return i}}const Dee=/\/emsg[-/]ID3/i;class Oee{constructor(e,r){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=r}resetTimeStamp(){}resetInitSegment(e,r,n,i){const s=this.videoTrack=ls("video",1),a=this.audioTrack=ls("audio",1),o=this.txtTrack=ls("text",1);if(this.id3Track=ls("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const l=RP(e);if(l.video){const{id:u,timescale:c,codec:d}=l.video;s.id=u,s.timescale=o.timescale=c,s.codec=d}if(l.audio){const{id:u,timescale:c,codec:d}=l.audio;a.id=u,a.timescale=c,a.codec=d}o.id=SP.text,s.sampleDuration=0,s.duration=a.duration=i}resetContiguity(){this.remainderData=null}static probe(e){return XQ(e)}demux(e,r){this.timeOffset=r;let n=e;const i=this.videoTrack,s=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=Ei(this.remainderData,e));const o=iJ(n);this.remainderData=o.remainder,i.samples=o.valid||new Uint8Array}else i.samples=n;const a=this.extractID3Track(i,r);return s.samples=SC(r,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:a,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,r=this.videoTrack,n=this.txtTrack;r.samples=this.remainderData||new Uint8Array,this.remainderData=null;const i=this.extractID3Track(r,this.timeOffset);return n.samples=SC(e,r),{videoTrack:r,audioTrack:ls(),id3Track:i,textTrack:ls()}}extractID3Track(e,r){const n=this.id3Track;if(e.samples.length){const i=Xe(e.samples,["emsg"]);i&&i.forEach(s=>{const a=oJ(s);if(Dee.test(a.schemeIdUri)){const o=xe(a.presentationTime)?a.presentationTime/a.timeScale:r+a.presentationTimeDelta/a.timeScale;let l=a.eventDuration===4294967295?Number.POSITIVE_INFINITY:a.eventDuration/a.timeScale;l<=.001&&(l=Number.POSITIVE_INFINITY);const u=a.payload;n.samples.push({data:u,len:u.byteLength,dts:o,pts:o,type:Li.emsg,duration:l})}})}return n}demuxSampleAes(e,r,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}}const QP=(t,e)=>{let r=0,n=5;e+=n;const i=new Uint32Array(1),s=new Uint32Array(1),a=new Uint8Array(1);for(;n>0;){a[0]=t[e];const o=Math.min(n,8),l=8-o;s[0]=4278190080>>>24+l<<l,i[0]=(a[0]&s[0])>>l,r=r?r<<o|i[0]:i[0],e+=1,n-=o}return r};class Mee extends Bx{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,r,n,i){super.resetInitSegment(e,r,n,i),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:r,duration:i,inputTimeScale:9e4,dropped:0}}canParse(e,r){return r+64<e.length}appendFrame(e,r,n){const i=JP(e,r,n,this.basePTS,this.frameIndex);if(i!==-1)return{sample:e.samples[e.samples.length-1],length:i,missing:0}}static probe(e){if(!e)return!1;const r=dh(e,0);if(!r)return!1;const n=r.length;return e[n]===11&&e[n+1]===119&&Mx(r)!==void 0&&QP(e,n)<16}}function JP(t,e,r,n,i){if(r+8>e.length||e[r]!==11||e[r+1]!==119)return-1;const s=e[r+4]>>6;if(s>=3)return-1;const o=[48e3,44100,32e3][s],l=e[r+4]&63,c=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][l*3+s]*2;if(r+c>e.length)return-1;const d=e[r+6]>>5;let h=0;d===2?h+=2:(d&1&&d!==1&&(h+=2),d&4&&(h+=2));const f=(e[r+6]<<8|e[r+7])>>12-h&1,m=[2,1,2,3,3,4,4,5][d]+f,g=e[r+5]>>3,v=e[r+5]&7,b=new Uint8Array([s<<6|g<<1|v>>2,(v&3)<<6|d<<3|f<<2|l>>4,l<<4&224]),y=1536/o*9e4,T=n+i*y,x=e.subarray(r,r+c);return t.config=b,t.channelCount=m,t.samplerate=o,t.samples.push({unit:x,pts:T}),c}class Pee{constructor(){this.VideoSample=null}createVideoSample(e,r,n,i){return{key:e,frame:!1,pts:r,dts:n,units:[],debug:i,length:0}}getLastNalUnit(e){var r;let n=this.VideoSample,i;if((!n||n.units.length===0)&&(n=e[e.length-1]),(r=n)!=null&&r.units){const s=n.units;i=s[s.length-1]}return i}pushAccessUnit(e,r){if(e.units.length&&e.frame){if(e.pts===void 0){const n=r.samples,i=n.length;if(i){const s=n[i-1];e.pts=s.pts,e.dts=s.dts}else{r.dropped++;return}}r.samples.push(e)}e.debug.length&&G.log(e.pts+"/"+e.dts+":"+e.debug)}}class QC{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,r=this.bytesAvailable,n=e.byteLength-r,i=new Uint8Array(4),s=Math.min(4,r);if(s===0)throw new Error("no bytes available");i.set(e.subarray(n,n+s)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=s*8,this.bytesAvailable-=s}skipBits(e){let r;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,r=e>>3,e-=r<<3,this.bytesAvailable-=r,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let r=Math.min(this.bitsAvailable,e);const n=this.word>>>32-r;if(e>32&&G.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=r,this.bitsAvailable>0)this.word<<=r;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return r=e-r,r>0&&this.bitsAvailable?n<<r|this.readBits(r):n}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(e){let r=8,n=8,i;for(let s=0;s<e;s++)n!==0&&(i=this.readEG(),n=(r+i+256)%256),r=n===0?r:n}readSPS(){let e=0,r=0,n=0,i=0,s,a,o;const l=this.readUByte.bind(this),u=this.readBits.bind(this),c=this.readUEG.bind(this),d=this.readBoolean.bind(this),h=this.skipBits.bind(this),f=this.skipEG.bind(this),p=this.skipUEG.bind(this),m=this.skipScalingList.bind(this);l();const g=l();if(u(5),h(3),l(),p(),g===100||g===110||g===122||g===244||g===44||g===83||g===86||g===118||g===128){const _=c();if(_===3&&h(1),p(),p(),h(1),d())for(a=_!==3?8:12,o=0;o<a;o++)d()&&(o<6?m(16):m(64))}p();const v=c();if(v===0)c();else if(v===1)for(h(1),f(),f(),s=c(),o=0;o<s;o++)f();p(),h(1);const b=c(),y=c(),T=u(1);T===0&&h(1),h(1),d()&&(e=c(),r=c(),n=c(),i=c());let x=[1,1];if(d()&&d())switch(l()){case 1:x=[1,1];break;case 2:x=[12,11];break;case 3:x=[10,11];break;case 4:x=[16,11];break;case 5:x=[40,33];break;case 6:x=[24,11];break;case 7:x=[20,11];break;case 8:x=[32,11];break;case 9:x=[80,33];break;case 10:x=[18,11];break;case 11:x=[15,11];break;case 12:x=[64,33];break;case 13:x=[160,99];break;case 14:x=[4,3];break;case 15:x=[3,2];break;case 16:x=[2,1];break;case 255:{x=[l()<<8|l(),l()<<8|l()];break}}return{width:Math.ceil((b+1)*16-e*2-r*2),height:(2-T)*(y+1)*16-(T?2:4)*(n+i),pixelRatio:x}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class Nee extends Pee{parseAVCPES(e,r,n,i,s){const a=this.parseAVCNALu(e,n.data);let o=this.VideoSample,l,u=!1;n.data=null,o&&a.length&&!e.audFound&&(this.pushAccessUnit(o,e),o=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts,"")),a.forEach(c=>{var d;switch(c.type){case 1:{let m=!1;l=!0;const g=c.data;if(u&&g.length>4){const v=new QC(g).readSliceType();(v===2||v===4||v===7||v===9)&&(m=!0)}if(m){var h;(h=o)!=null&&h.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null)}o||(o=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts,"")),o.frame=!0,o.key=m;break}case 5:l=!0,(d=o)!=null&&d.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null),o||(o=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts,"")),o.key=!0,o.frame=!0;break;case 6:{l=!0,IP(c.data,1,n.pts,r.samples);break}case 7:{var f,p;l=!0,u=!0;const m=c.data,v=new QC(m).readSPS();if(!e.sps||e.width!==v.width||e.height!==v.height||((f=e.pixelRatio)==null?void 0:f[0])!==v.pixelRatio[0]||((p=e.pixelRatio)==null?void 0:p[1])!==v.pixelRatio[1]){e.width=v.width,e.height=v.height,e.pixelRatio=v.pixelRatio,e.sps=[m],e.duration=s;const b=m.subarray(1,4);let y="avc1.";for(let T=0;T<3;T++){let x=b[T].toString(16);x.length<2&&(x="0"+x),y+=x}e.codec=y}break}case 8:l=!0,e.pps=[c.data];break;case 9:l=!0,e.audFound=!0,o&&this.pushAccessUnit(o,e),o=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts,"");break;case 12:l=!0;break;default:l=!1,o&&(o.debug+="unknown NAL "+c.type+" ");break}o&&l&&o.units.push(c)}),i&&o&&(this.pushAccessUnit(o,e),this.VideoSample=null)}parseAVCNALu(e,r){const n=r.byteLength;let i=e.naluState||0;const s=i,a=[];let o=0,l,u,c,d=-1,h=0;for(i===-1&&(d=0,h=r[0]&31,i=0,o=1);o<n;){if(l=r[o++],!i){i=l?0:1;continue}if(i===1){i=l?0:2;continue}if(!l)i=3;else if(l===1){if(u=o-i-1,d>=0){const f={data:r.subarray(d,u),type:h};a.push(f)}else{const f=this.getLastNalUnit(e.samples);f&&(s&&o<=4-s&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-s)),u>0&&(f.data=Ei(f.data,r.subarray(0,u)),f.state=0))}o<n?(c=r[o]&31,d=o,h=c,i=0):i=-1}else i=0}if(d>=0&&i>=0){const f={data:r.subarray(d,n),type:h,state:i};a.push(f)}if(a.length===0){const f=this.getLastNalUnit(e.samples);f&&(f.data=Ei(f.data,r))}return e.naluState=i,a}}class Fee{constructor(e,r,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new $x(r,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(e,r,n){const i=e[r].unit;if(i.length<=16)return;const s=i.subarray(16,i.length-i.length%16),a=s.buffer.slice(s.byteOffset,s.byteOffset+s.length);this.decryptBuffer(a).then(o=>{const l=new Uint8Array(o);i.set(l,16),this.decrypter.isSync()||this.decryptAacSamples(e,r+1,n)})}decryptAacSamples(e,r,n){for(;;r++){if(r>=e.length){n();return}if(!(e[r].unit.length<32)&&(this.decryptAacSample(e,r,n),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const r=Math.floor((e.length-48)/160)*16+16,n=new Int8Array(r);let i=0;for(let s=32;s<e.length-16;s+=160,i+=16)n.set(e.subarray(s,s+16),i);return n}getAvcDecryptedUnit(e,r){const n=new Uint8Array(r);let i=0;for(let s=32;s<e.length-16;s+=160,i+=16)e.set(n.subarray(i,i+16),s);return e}decryptAvcSample(e,r,n,i,s){const a=kP(s.data),o=this.getAvcEncryptedData(a);this.decryptBuffer(o.buffer).then(l=>{s.data=this.getAvcDecryptedUnit(a,l),this.decrypter.isSync()||this.decryptAvcSamples(e,r,n+1,i)})}decryptAvcSamples(e,r,n,i){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;r++,n=0){if(r>=e.length){i();return}const s=e[r].units;for(;!(n>=s.length);n++){const a=s[n];if(!(a.data.length<=48||a.type!==1&&a.type!==5)&&(this.decryptAvcSample(e,r,n,i,a),!this.decrypter.isSync()))return}}}}const Hr=188;class Sa{constructor(e,r,n){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=r,this.typeSupported=n,this.videoParser=new Nee}static probe(e){const r=Sa.syncOffset(e);return r>0&&G.warn(`MPEG2-TS detected but first sync word found @ offset ${r}`),r!==-1}static syncOffset(e){const r=e.length;let n=Math.min(Hr*5,r-Hr)+1,i=0;for(;i<n;){let s=!1,a=-1,o=0;for(let l=i;l<r;l+=Hr)if(e[l]===71&&(r-l===Hr||e[l+Hr]===71)){if(o++,a===-1&&(a=l,a!==0&&(n=Math.min(a+Hr*99,e.length-Hr)+1)),s||(s=E1(e,l)===0),s&&o>1&&(a===0&&o>2||l+Hr>n))return a}else{if(o)return-1;break}i++}return-1}static createTrack(e,r){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:SP[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?r:void 0}}resetInitSegment(e,r,n,i){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=Sa.createTrack("video"),this._audioTrack=Sa.createTrack("audio",i),this._id3Track=Sa.createTrack("id3"),this._txtTrack=Sa.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=r,this.videoCodec=n,this._duration=i}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:r,_id3Track:n}=this;e&&(e.pesData=null),r&&(r.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,r,n=!1,i=!1){n||(this.sampleAes=null);let s;const a=this._videoTrack,o=this._audioTrack,l=this._id3Track,u=this._txtTrack;let c=a.pid,d=a.pesData,h=o.pid,f=l.pid,p=o.pesData,m=l.pesData,g=null,v=this.pmtParsed,b=this._pmtId,y=e.length;if(this.remainderData&&(e=Ei(this.remainderData,e),y=e.length,this.remainderData=null),y<Hr&&!i)return this.remainderData=e,{audioTrack:o,videoTrack:a,id3Track:l,textTrack:u};const T=Math.max(0,Sa.syncOffset(e));y-=(y-T)%Hr,y<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,y,e.buffer.byteLength-y));let x=0;for(let S=T;S<y;S+=Hr)if(e[S]===71){const A=!!(e[S+1]&64),k=E1(e,S),I=(e[S+3]&48)>>4;let C;if(I>1){if(C=S+5+e[S+4],C===S+Hr)continue}else C=S+4;switch(k){case c:A&&(d&&(s=Ml(d))&&this.videoParser.parseAVCPES(a,u,s,!1,this._duration),d={data:[],size:0}),d&&(d.data.push(e.subarray(C,S+Hr)),d.size+=S+Hr-C);break;case h:if(A){if(p&&(s=Ml(p)))switch(o.segmentCodec){case"aac":this.parseAACPES(o,s);break;case"mp3":this.parseMPEGPES(o,s);break;case"ac3":this.parseAC3PES(o,s);break}p={data:[],size:0}}p&&(p.data.push(e.subarray(C,S+Hr)),p.size+=S+Hr-C);break;case f:A&&(m&&(s=Ml(m))&&this.parseID3PES(l,s),m={data:[],size:0}),m&&(m.data.push(e.subarray(C,S+Hr)),m.size+=S+Hr-C);break;case 0:A&&(C+=e[C]+1),b=this._pmtId=$ee(e,C);break;case b:{A&&(C+=e[C]+1);const N=Uee(e,C,this.typeSupported,n,this.observer);c=N.videoPid,c>0&&(a.pid=c,a.segmentCodec=N.segmentVideoCodec),h=N.audioPid,h>0&&(o.pid=h,o.segmentCodec=N.segmentAudioCodec),f=N.id3Pid,f>0&&(l.pid=f),g!==null&&!v&&(G.warn(`MPEG-TS PMT found at ${S} after unknown PID '${g}'. Backtracking to sync byte @${T} to parse all TS packets.`),g=null,S=T-188),v=this.pmtParsed=!0;break}case 17:case 8191:break;default:g=k;break}}else x++;x>0&&Km(this.observer,new Error(`Found ${x} TS packet/s that do not start with 0x47`)),a.pesData=d,o.pesData=p,l.pesData=m;const _={audioTrack:o,videoTrack:a,id3Track:l,textTrack:u};return i&&this.extractRemainingSamples(_),_}flush(){const{remainderData:e}=this;this.remainderData=null;let r;return e?r=this.demux(e,-1,!1,!0):r={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(r),this.sampleAes?this.decrypt(r,this.sampleAes):r}extractRemainingSamples(e){const{audioTrack:r,videoTrack:n,id3Track:i,textTrack:s}=e,a=n.pesData,o=r.pesData,l=i.pesData;let u;if(a&&(u=Ml(a))?(this.videoParser.parseAVCPES(n,s,u,!0,this._duration),n.pesData=null):n.pesData=a,o&&(u=Ml(o))){switch(r.segmentCodec){case"aac":this.parseAACPES(r,u);break;case"mp3":this.parseMPEGPES(r,u);break;case"ac3":this.parseAC3PES(r,u);break}r.pesData=null}else o!=null&&o.size&&G.log("last AAC PES packet truncated,might overlap between fragments"),r.pesData=o;l&&(u=Ml(l))?(this.parseID3PES(i,u),i.pesData=null):i.pesData=l}demuxSampleAes(e,r,n){const i=this.demux(e,n,!0,!this.config.progressive),s=this.sampleAes=new Fee(this.observer,this.config,r);return this.decrypt(i,s)}decrypt(e,r){return new Promise(n=>{const{audioTrack:i,videoTrack:s}=e;i.samples&&i.segmentCodec==="aac"?r.decryptAacSamples(i.samples,0,()=>{s.samples?r.decryptAvcSamples(s.samples,0,0,()=>{n(e)}):n(e)}):s.samples&&r.decryptAvcSamples(s.samples,0,0,()=>{n(e)})})}destroy(){this._duration=0}parseAACPES(e,r){let n=0;const i=this.aacOverFlow;let s=r.data;if(i){this.aacOverFlow=null;const d=i.missing,h=i.sample.unit.byteLength;if(d===-1)s=Ei(i.sample.unit,s);else{const f=h-d;i.sample.unit.set(s.subarray(0,d),f),e.samples.push(i.sample),n=i.missing}}let a,o;for(a=n,o=s.length;a<o-1&&!Gm(s,a);a++);if(a!==n){let d;const h=a<o-1;if(h?d=`AAC PES did not start with ADTS header,offset:${a}`:d="No ADTS header found in AAC PES",Km(this.observer,new Error(d),h),!h)return}GP(e,this.observer,s,a,this.audioCodec);let l;if(r.pts!==void 0)l=r.pts;else if(i){const d=KP(e.samplerate);l=i.sample.pts+d}else{G.warn("[tsdemuxer]: AAC PES unknown PTS");return}let u=0,c;for(;a<o;)if(c=qP(e,s,a,l,u),a+=c.length,c.missing){this.aacOverFlow=c;break}else for(u++;a<o-1&&!Gm(s,a);a++);}parseMPEGPES(e,r){const n=r.data,i=n.length;let s=0,a=0;const o=r.pts;if(o===void 0){G.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;a<i;)if(XP(n,a)){const l=zP(e,n,a,o,s);if(l)a+=l.length,s++;else break}else a++}parseAC3PES(e,r){{const n=r.data,i=r.pts;if(i===void 0){G.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const s=n.length;let a=0,o=0,l;for(;o<s&&(l=JP(e,n,o,i,a++))>0;)o+=l}}parseID3PES(e,r){if(r.pts===void 0){G.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const n=Cr({},r,{type:this._videoTrack?Li.emsg:Li.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(n)}}function E1(t,e){return((t[e+1]&31)<<8)+t[e+2]}function $ee(t,e){return(t[e+10]&31)<<8|t[e+11]}function Uee(t,e,r,n,i){const s={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},a=(t[e+1]&15)<<8|t[e+2],o=e+3+a-4,l=(t[e+10]&15)<<8|t[e+11];for(e+=12+l;e<o;){const u=E1(t,e),c=(t[e+3]&15)<<8|t[e+4];switch(t[e]){case 207:if(!n){wb("ADTS AAC");break}case 15:s.audioPid===-1&&(s.audioPid=u);break;case 21:s.id3Pid===-1&&(s.id3Pid=u);break;case 219:if(!n){wb("H.264");break}case 27:s.videoPid===-1&&(s.videoPid=u,s.segmentVideoCodec="avc");break;case 3:case 4:!r.mpeg&&!r.mp3?G.log("MPEG audio found, not supported in this browser"):s.audioPid===-1&&(s.audioPid=u,s.segmentAudioCodec="mp3");break;case 193:if(!n){wb("AC-3");break}case 129:r.ac3?s.audioPid===-1&&(s.audioPid=u,s.segmentAudioCodec="ac3"):G.log("AC-3 audio found, not supported in this browser");break;case 6:if(s.audioPid===-1&&c>0){let d=e+5,h=c;for(;h>2;){switch(t[d]){case 106:r.ac3!==!0?G.log("AC-3 audio found, not supported in this browser for now"):(s.audioPid=u,s.segmentAudioCodec="ac3");break}const p=t[d+1]+2;d+=p,h-=p}}break;case 194:case 135:return Km(i,new Error("Unsupported EC-3 in M2TS found")),s;case 36:return Km(i,new Error("Unsupported HEVC in M2TS found")),s}e+=c+5}return s}function Km(t,e,r){G.warn(`parsing error: ${e.message}`),t.emit(w.ERROR,w.ERROR,{type:Ve.MEDIA_ERROR,details:J.FRAG_PARSING_ERROR,fatal:!1,levelRetry:r,error:e,reason:e.message})}function wb(t){G.log(`${t} with AES-128-CBC encryption found in unencrypted stream`)}function Ml(t){let e=0,r,n,i,s,a;const o=t.data;if(!t||t.size===0)return null;for(;o[0].length<19&&o.length>1;)o[0]=Ei(o[0],o[1]),o.splice(1,1);if(r=o[0],(r[0]<<16)+(r[1]<<8)+r[2]===1){if(n=(r[4]<<8)+r[5],n&&n>t.size-6)return null;const u=r[7];u&192&&(s=(r[9]&14)*536870912+(r[10]&255)*4194304+(r[11]&254)*16384+(r[12]&255)*128+(r[13]&254)/2,u&64?(a=(r[14]&14)*536870912+(r[15]&255)*4194304+(r[16]&254)*16384+(r[17]&255)*128+(r[18]&254)/2,s-a>60*9e4&&(G.warn(`${Math.round((s-a)/9e4)}s delta between PTS and DTS, align them`),s=a)):a=s),i=r[8];let c=i+9;if(t.size<=c)return null;t.size-=c;const d=new Uint8Array(t.size);for(let h=0,f=o.length;h<f;h++){r=o[h];let p=r.byteLength;if(c)if(c>p){c-=p;continue}else r=r.subarray(c),p-=c,c=0;d.set(r,e),e+=p}return n&&(n-=i+3),{data:d,pts:s,dts:a,len:n}}return null}class Bee extends Bx{resetInitSegment(e,r,n,i){super.resetInitSegment(e,r,n,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:r,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const r=dh(e,0);let n=(r==null?void 0:r.length)||0;if(r&&e[n]===11&&e[n+1]===119&&Mx(r)!==void 0&&QP(e,n)<=16)return!1;for(let i=e.length;n<i;n++)if(ZP(e,n))return G.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,r){return kee(e,r)}appendFrame(e,r,n){if(this.basePTS!==null)return zP(e,r,n,this.basePTS,this.frameIndex)}}class JC{static getSilentFrame(e,r){switch(e){case"mp4a.40.2":if(r===1)return new Uint8Array([0,200,0,128,35,128]);if(r===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(r===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(r===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(r===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(r===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(r===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(r===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(r===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const ca=Math.pow(2,32)-1;class q{static init(){q.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in q.types)q.types.hasOwnProperty(e)&&(q.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);q.HDLR_TYPES={video:r,audio:n};const i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),s=new Uint8Array([0,0,0,0,0,0,0,0]);q.STTS=q.STSC=q.STCO=s,q.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),q.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),q.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),q.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const a=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);q.FTYP=q.box(q.types.ftyp,a,l,a,o),q.DINF=q.box(q.types.dinf,q.box(q.types.dref,i))}static box(e,...r){let n=8,i=r.length;const s=i;for(;i--;)n+=r[i].byteLength;const a=new Uint8Array(n);for(a[0]=n>>24&255,a[1]=n>>16&255,a[2]=n>>8&255,a[3]=n&255,a.set(e,4),i=0,n=8;i<s;i++)a.set(r[i],n),n+=r[i].byteLength;return a}static hdlr(e){return q.box(q.types.hdlr,q.HDLR_TYPES[e])}static mdat(e){return q.box(q.types.mdat,e)}static mdhd(e,r){r*=e;const n=Math.floor(r/(ca+1)),i=Math.floor(r%(ca+1));return q.box(q.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,i>>24,i>>16&255,i>>8&255,i&255,85,196,0,0]))}static mdia(e){return q.box(q.types.mdia,q.mdhd(e.timescale,e.duration),q.hdlr(e.type),q.minf(e))}static mfhd(e){return q.box(q.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?q.box(q.types.minf,q.box(q.types.smhd,q.SMHD),q.DINF,q.stbl(e)):q.box(q.types.minf,q.box(q.types.vmhd,q.VMHD),q.DINF,q.stbl(e))}static moof(e,r,n){return q.box(q.types.moof,q.mfhd(e),q.traf(n,r))}static moov(e){let r=e.length;const n=[];for(;r--;)n[r]=q.trak(e[r]);return q.box.apply(null,[q.types.moov,q.mvhd(e[0].timescale,e[0].duration)].concat(n).concat(q.mvex(e)))}static mvex(e){let r=e.length;const n=[];for(;r--;)n[r]=q.trex(e[r]);return q.box.apply(null,[q.types.mvex,...n])}static mvhd(e,r){r*=e;const n=Math.floor(r/(ca+1)),i=Math.floor(r%(ca+1)),s=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,i>>24,i>>16&255,i>>8&255,i&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return q.box(q.types.mvhd,s)}static sdtp(e){const r=e.samples||[],n=new Uint8Array(4+r.length);let i,s;for(i=0;i<r.length;i++)s=r[i].flags,n[i+4]=s.dependsOn<<4|s.isDependedOn<<2|s.hasRedundancy;return q.box(q.types.sdtp,n)}static stbl(e){return q.box(q.types.stbl,q.stsd(e),q.box(q.types.stts,q.STTS),q.box(q.types.stsc,q.STSC),q.box(q.types.stsz,q.STSZ),q.box(q.types.stco,q.STCO))}static avc1(e){let r=[],n=[],i,s,a;for(i=0;i<e.sps.length;i++)s=e.sps[i],a=s.byteLength,r.push(a>>>8&255),r.push(a&255),r=r.concat(Array.prototype.slice.call(s));for(i=0;i<e.pps.length;i++)s=e.pps[i],a=s.byteLength,n.push(a>>>8&255),n.push(a&255),n=n.concat(Array.prototype.slice.call(s));const o=q.box(q.types.avcC,new Uint8Array([1,r[3],r[4],r[5],255,224|e.sps.length].concat(r).concat([e.pps.length]).concat(n))),l=e.width,u=e.height,c=e.pixelRatio[0],d=e.pixelRatio[1];return q.box(q.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,l&255,u>>8&255,u&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,q.box(q.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),q.box(q.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,c&255,d>>24,d>>16&255,d>>8&255,d&255])))}static esds(e){const r=e.config.length;return new Uint8Array([0,0,0,0,3,23+r,0,1,0,4,15+r,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([r]).concat(e.config).concat([6,1,2]))}static audioStsd(e){const r=e.samplerate;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,r&255,0,0])}static mp4a(e){return q.box(q.types.mp4a,q.audioStsd(e),q.box(q.types.esds,q.esds(e)))}static mp3(e){return q.box(q.types[".mp3"],q.audioStsd(e))}static ac3(e){return q.box(q.types["ac-3"],q.audioStsd(e),q.box(q.types.dac3,e.config))}static stsd(e){return e.type==="audio"?e.segmentCodec==="mp3"&&e.codec==="mp3"?q.box(q.types.stsd,q.STSD,q.mp3(e)):e.segmentCodec==="ac3"?q.box(q.types.stsd,q.STSD,q.ac3(e)):q.box(q.types.stsd,q.STSD,q.mp4a(e)):q.box(q.types.stsd,q.STSD,q.avc1(e))}static tkhd(e){const r=e.id,n=e.duration*e.timescale,i=e.width,s=e.height,a=Math.floor(n/(ca+1)),o=Math.floor(n%(ca+1));return q.box(q.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,r&255,0,0,0,0,a>>24,a>>16&255,a>>8&255,a&255,o>>24,o>>16&255,o>>8&255,o&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,i&255,0,0,s>>8&255,s&255,0,0]))}static traf(e,r){const n=q.sdtp(e),i=e.id,s=Math.floor(r/(ca+1)),a=Math.floor(r%(ca+1));return q.box(q.types.traf,q.box(q.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255])),q.box(q.types.tfdt,new Uint8Array([1,0,0,0,s>>24,s>>16&255,s>>8&255,s&255,a>>24,a>>16&255,a>>8&255,a&255])),q.trun(e,n.length+16+20+8+16+8+8),n)}static trak(e){return e.duration=e.duration||4294967295,q.box(q.types.trak,q.tkhd(e),q.mdia(e))}static trex(e){const r=e.id;return q.box(q.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,r&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,r){const n=e.samples||[],i=n.length,s=12+16*i,a=new Uint8Array(s);let o,l,u,c,d,h;for(r+=8+s,a.set([e.type==="video"?1:0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,i&255,r>>>24&255,r>>>16&255,r>>>8&255,r&255],0),o=0;o<i;o++)l=n[o],u=l.duration,c=l.size,d=l.flags,h=l.cts,a.set([u>>>24&255,u>>>16&255,u>>>8&255,u&255,c>>>24&255,c>>>16&255,c>>>8&255,c&255,d.isLeading<<2|d.dependsOn,d.isDependedOn<<6|d.hasRedundancy<<4|d.paddingValue<<1|d.isNonSync,d.degradPrio&61440,d.degradPrio&15,h>>>24&255,h>>>16&255,h>>>8&255,h&255],12+16*o);return q.box(q.types.trun,a)}static initSegment(e){q.types||q.init();const r=q.moov(e);return Ei(q.FTYP,r)}}q.types=void 0;q.HDLR_TYPES=void 0;q.STTS=void 0;q.STSC=void 0;q.STCO=void 0;q.STSZ=void 0;q.VMHD=void 0;q.SMHD=void 0;q.STSD=void 0;q.FTYP=void 0;q.DINF=void 0;const eN=9e4;function Vx(t,e,r=1,n=!1){const i=t*e*r;return n?Math.round(i):i}function jee(t,e,r=1,n=!1){return Vx(t,e,1/r,n)}function Uc(t,e=!1){return Vx(t,1e3,1/eN,e)}function Hee(t,e=1){return Vx(t,eN,1/e)}const Vee=10*1e3,eI=1024,Wee=1152,Gee=1536;let Pl=null,Ab=null;class W0{constructor(e,r,n,i=""){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=r,this.typeSupported=n,this.ISGenerated=!1,Pl===null){const a=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Pl=a?parseInt(a[1]):0}if(Ab===null){const s=navigator.userAgent.match(/Safari\/(\d+)/i);Ab=s?parseInt(s[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){G.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){G.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){G.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let r=!1;const n=e.reduce((i,s)=>{const a=s.pts-i;return a<-4294967296?(r=!0,bi(i,s.pts)):a>0?i:s.pts},e[0].pts);return r&&G.debug("PTS rollover detected"),n}remux(e,r,n,i,s,a,o,l){let u,c,d,h,f,p,m=s,g=s;const v=e.pid>-1,b=r.pid>-1,y=r.samples.length,T=e.samples.length>0,x=o&&y>0||y>1;if((!v||T)&&(!b||x)||this.ISGenerated||o){if(this.ISGenerated){var S,A,k,I;const V=this.videoTrackConfig;V&&(r.width!==V.width||r.height!==V.height||((S=r.pixelRatio)==null?void 0:S[0])!==((A=V.pixelRatio)==null?void 0:A[0])||((k=r.pixelRatio)==null?void 0:k[1])!==((I=V.pixelRatio)==null?void 0:I[1]))&&this.resetInitSegment()}else d=this.generateIS(e,r,s,a);const C=this.isVideoContiguous;let N=-1,P;if(x&&(N=Kee(r.samples),!C&&this.config.forceKeyFrameOnDiscontinuity))if(p=!0,N>0){G.warn(`[mp4-remuxer]: Dropped ${N} out of ${y} video samples due to a missing keyframe`);const V=this.getVideoStartPts(r.samples);r.samples=r.samples.slice(N),r.dropped+=N,g+=(r.samples[0].pts-V)/r.inputTimeScale,P=g}else N===-1&&(G.warn(`[mp4-remuxer]: No keyframe found out of ${y} video samples`),p=!1);if(this.ISGenerated){if(T&&x){const V=this.getVideoStartPts(r.samples),U=(bi(e.samples[0].pts,V)-V)/r.inputTimeScale;m+=Math.max(0,U),g+=Math.max(0,-U)}if(T){if(e.samplerate||(G.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),d=this.generateIS(e,r,s,a)),c=this.remuxAudio(e,m,this.isAudioContiguous,a,b||x||l===je.AUDIO?g:void 0),x){const V=c?c.endPTS-c.startPTS:0;r.inputTimeScale||(G.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),d=this.generateIS(e,r,s,a)),u=this.remuxVideo(r,g,C,V)}}else x&&(u=this.remuxVideo(r,g,C,0));u&&(u.firstKeyFrame=N,u.independent=N!==-1,u.firstKeyFramePTS=P)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(n.samples.length&&(f=tN(n,s,this._initPTS,this._initDTS)),i.samples.length&&(h=rN(i,s,this._initPTS))),{audio:c,video:u,initSegment:d,independent:p,text:h,id3:f}}generateIS(e,r,n,i){const s=e.samples,a=r.samples,o=this.typeSupported,l={},u=this._initPTS;let c=!u||i,d="audio/mp4",h,f,p;if(c&&(h=f=1/0),e.config&&s.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":o.mpeg?(d="audio/mpeg",e.codec=""):o.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}l.audio={id:"audio",container:d,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&o.mpeg?new Uint8Array(0):q.initSegment([e]),metadata:{channelCount:e.channelCount}},c&&(p=e.inputTimeScale,!u||p!==u.timescale?h=f=s[0].pts-Math.round(p*n):c=!1)}if(r.sps&&r.pps&&a.length){if(r.timescale=r.inputTimeScale,l.video={id:"main",container:"video/mp4",codec:r.codec,initSegment:q.initSegment([r]),metadata:{width:r.width,height:r.height}},c)if(p=r.inputTimeScale,!u||p!==u.timescale){const m=this.getVideoStartPts(a),g=Math.round(p*n);f=Math.min(f,bi(a[0].dts,m)-g),h=Math.min(h,m-g)}else c=!1;this.videoTrackConfig={width:r.width,height:r.height,pixelRatio:r.pixelRatio}}if(Object.keys(l).length)return this.ISGenerated=!0,c?(this._initPTS={baseTime:h,timescale:p},this._initDTS={baseTime:f,timescale:p}):h=p=void 0,{tracks:l,initPTS:h,timescale:p}}remuxVideo(e,r,n,i){const s=e.inputTimeScale,a=e.samples,o=[],l=a.length,u=this._initPTS;let c=this.nextAvcDts,d=8,h=this.videoSampleDuration,f,p,m=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,v=!1;if(!n||c===null){const te=r*s,D=a[0].pts-bi(a[0].dts,a[0].pts);Pl&&c!==null&&Math.abs(te-D-c)<15e3?n=!0:c=te-D}const b=u.baseTime*s/u.timescale;for(let te=0;te<l;te++){const D=a[te];D.pts=bi(D.pts-b,c),D.dts=bi(D.dts-b,c),D.dts<a[te>0?te-1:te].dts&&(v=!0)}v&&a.sort(function(te,D){const L=te.dts-D.dts,Y=te.pts-D.pts;return L||Y}),f=a[0].dts,p=a[a.length-1].dts;const y=p-f,T=y?Math.round(y/(l-1)):h||e.inputTimeScale/30;if(n){const te=f-c,D=te>T,L=te<-1;if((D||L)&&(D?G.warn(`AVC: ${Uc(te,!0)} ms (${te}dts) hole between fragments detected at ${r.toFixed(3)}`):G.warn(`AVC: ${Uc(-te,!0)} ms (${te}dts) overlapping between fragments detected at ${r.toFixed(3)}`),!L||c>=a[0].pts||Pl)){f=c;const Y=a[0].pts-te;if(D)a[0].dts=f,a[0].pts=Y;else for(let $=0;$<a.length&&!(a[$].dts>Y);$++)a[$].dts-=te,a[$].pts-=te;G.log(`Video: Initial PTS/DTS adjusted: ${Uc(Y,!0)}/${Uc(f,!0)}, delta: ${Uc(te,!0)} ms`)}}f=Math.max(0,f);let x=0,_=0,S=f;for(let te=0;te<l;te++){const D=a[te],L=D.units,Y=L.length;let $=0;for(let j=0;j<Y;j++)$+=L[j].data.length;_+=$,x+=Y,D.length=$,D.dts<S?(D.dts=S,S+=T/4|0||1):S=D.dts,m=Math.min(D.pts,m),g=Math.max(D.pts,g)}p=a[l-1].dts;const A=_+4*x+8;let k;try{k=new Uint8Array(A)}catch(te){this.observer.emit(w.ERROR,w.ERROR,{type:Ve.MUX_ERROR,details:J.REMUX_ALLOC_ERROR,fatal:!1,error:te,bytes:A,reason:`fail allocating video mdat ${A}`});return}const I=new DataView(k.buffer);I.setUint32(0,A),k.set(q.types.mdat,4);let C=!1,N=Number.POSITIVE_INFINITY,P=Number.POSITIVE_INFINITY,V=Number.NEGATIVE_INFINITY,M=Number.NEGATIVE_INFINITY;for(let te=0;te<l;te++){const D=a[te],L=D.units;let Y=0;for(let z=0,re=L.length;z<re;z++){const ne=L[z],ue=ne.data,Te=ne.data.byteLength;I.setUint32(d,Te),d+=4,k.set(ue,d),d+=Te,Y+=4+Te}let $;if(te<l-1)h=a[te+1].dts-D.dts,$=a[te+1].pts-D.pts;else{const z=this.config,re=te>0?D.dts-a[te-1].dts:T;if($=te>0?D.pts-a[te-1].pts:T,z.stretchShortVideoTrack&&this.nextAudioPts!==null){const ne=Math.floor(z.maxBufferHole*s),ue=(i?m+i*s:this.nextAudioPts)-D.pts;ue>ne?(h=ue-re,h<0?h=re:C=!0,G.log(`[mp4-remuxer]: It is approximately ${ue/90} ms to the next segment; using duration ${h/90} ms for the last video frame.`)):h=re}else h=re}const j=Math.round(D.pts-D.dts);N=Math.min(N,h),V=Math.max(V,h),P=Math.min(P,$),M=Math.max(M,$),o.push(new tI(D.key,h,Y,j))}if(o.length){if(Pl){if(Pl<70){const te=o[0].flags;te.dependsOn=2,te.isNonSync=0}}else if(Ab&&M-P<V-N&&T/V<.025&&o[0].cts===0){G.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let te=f;for(let D=0,L=o.length;D<L;D++){const Y=te+o[D].duration,$=te+o[D].cts;if(D<L-1){const j=Y+o[D+1].cts;o[D].duration=j-$}else o[D].duration=D?o[D-1].duration:T;o[D].cts=0,te=Y}}}h=C||!h?T:h,this.nextAvcDts=c=p+h,this.videoSampleDuration=h,this.isVideoContiguous=!0;const X={data1:q.moof(e.sequenceNumber++,f,Cr({},e,{samples:o})),data2:k,startPTS:m/s,endPTS:(g+h)/s,startDTS:f/s,endDTS:c/s,type:"video",hasAudio:!1,hasVideo:!0,nb:o.length,dropped:e.dropped};return e.samples=[],e.dropped=0,X}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return Wee;case"ac3":return Gee;default:return eI}}remuxAudio(e,r,n,i,s){const a=e.inputTimeScale,o=e.samplerate?e.samplerate:a,l=a/o,u=this.getSamplesPerFrame(e),c=u*l,d=this._initPTS,h=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,f=[],p=s!==void 0;let m=e.samples,g=h?0:8,v=this.nextAudioPts||-1;const b=r*a,y=d.baseTime*a/d.timescale;if(this.isAudioContiguous=n=n||m.length&&v>0&&(i&&Math.abs(b-v)<9e3||Math.abs(bi(m[0].pts-y,b)-v)<20*c),m.forEach(function(U){U.pts=bi(U.pts-y,b)}),!n||v<0){if(m=m.filter(U=>U.pts>=0),!m.length)return;s===0?v=0:i&&!p?v=Math.max(0,b):v=m[0].pts}if(e.segmentCodec==="aac"){const U=this.config.maxAudioFramesDrift;for(let B=0,X=v;B<m.length;B++){const te=m[B],D=te.pts,L=D-X,Y=Math.abs(1e3*L/a);if(L<=-U*c&&p)B===0&&(G.warn(`Audio frame @ ${(D/a).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*L/a)} ms.`),this.nextAudioPts=v=X=D);else if(L>=U*c&&Y<Vee&&p){let $=Math.round(L/c);X=D-$*c,X<0&&($--,X+=c),B===0&&(this.nextAudioPts=v=X),G.warn(`[mp4-remuxer]: Injecting ${$} audio frame @ ${(X/a).toFixed(3)}s due to ${Math.round(1e3*L/a)} ms gap.`);for(let j=0;j<$;j++){const z=Math.max(X,0);let re=JC.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);re||(G.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),re=te.unit.subarray()),m.splice(B,0,{unit:re,pts:z}),X+=c,B++}}te.pts=X,X+=c}}let T=null,x=null,_,S=0,A=m.length;for(;A--;)S+=m[A].unit.byteLength;for(let U=0,B=m.length;U<B;U++){const X=m[U],te=X.unit;let D=X.pts;if(x!==null){const Y=f[U-1];Y.duration=Math.round((D-x)/l)}else if(n&&e.segmentCodec==="aac"&&(D=v),T=D,S>0){S+=g;try{_=new Uint8Array(S)}catch(Y){this.observer.emit(w.ERROR,w.ERROR,{type:Ve.MUX_ERROR,details:J.REMUX_ALLOC_ERROR,fatal:!1,error:Y,bytes:S,reason:`fail allocating audio mdat ${S}`});return}h||(new DataView(_.buffer).setUint32(0,S),_.set(q.types.mdat,4))}else return;_.set(te,g);const L=te.byteLength;g+=L,f.push(new tI(!0,u,L,0)),x=D}const k=f.length;if(!k)return;const I=f[f.length-1];this.nextAudioPts=v=x+l*I.duration;const C=h?new Uint8Array(0):q.moof(e.sequenceNumber++,T/l,Cr({},e,{samples:f}));e.samples=[];const N=T/a,P=v/a,M={data1:C,data2:_,startPTS:N,endPTS:P,startDTS:N,endDTS:P,type:"audio",hasAudio:!0,hasVideo:!1,nb:k};return this.isAudioContiguous=!0,M}remuxEmptyAudio(e,r,n,i){const s=e.inputTimeScale,a=e.samplerate?e.samplerate:s,o=s/a,l=this.nextAudioPts,u=this._initDTS,c=u.baseTime*9e4/u.timescale,d=(l!==null?l:i.startDTS*s)+c,h=i.endDTS*s+c,f=o*eI,p=Math.ceil((h-d)/f),m=JC.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(G.warn("[mp4-remuxer]: remux empty Audio"),!m){G.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");return}const g=[];for(let v=0;v<p;v++){const b=d+v*f;g.push({unit:m,pts:b,dts:b})}return e.samples=g,this.remuxAudio(e,r,n,!1)}}function bi(t,e){let r;if(e===null)return t;for(e<t?r=-8589934592:r=8589934592;Math.abs(t-e)>4294967296;)t+=r;return t}function Kee(t){for(let e=0;e<t.length;e++)if(t[e].key)return e;return-1}function tN(t,e,r,n){const i=t.samples.length;if(!i)return;const s=t.inputTimeScale;for(let o=0;o<i;o++){const l=t.samples[o];l.pts=bi(l.pts-r.baseTime*s/r.timescale,e*s)/s,l.dts=bi(l.dts-n.baseTime*s/n.timescale,e*s)/s}const a=t.samples;return t.samples=[],{samples:a}}function rN(t,e,r){const n=t.samples.length;if(!n)return;const i=t.inputTimeScale;for(let a=0;a<n;a++){const o=t.samples[a];o.pts=bi(o.pts-r.baseTime*i/r.timescale,e*i)/i}t.samples.sort((a,o)=>a.pts-o.pts);const s=t.samples;return t.samples=[],{samples:s}}class tI{constructor(e,r,n,i){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=r,this.size=n,this.cts=i,this.flags={isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1}}}class qee{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(e){this.initPTS=e,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(e,r,n,i){this.audioCodec=r,this.videoCodec=n,this.generateInitSegment(JQ(e,i)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:r,videoCodec:n}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const i=this.initData=RP(e);i.audio&&(r=rI(i.audio,Mt.AUDIO)),i.video&&(n=rI(i.video,Mt.VIDEO));const s={};i.audio&&i.video?s.audiovideo={container:"video/mp4",codec:r+","+n,initSegment:e,id:"main"}:i.audio?s.audio={container:"audio/mp4",codec:r,initSegment:e,id:"audio"}:i.video?s.video={container:"video/mp4",codec:n,initSegment:e,id:"main"}:G.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=s}remux(e,r,n,i,s,a){var o,l;let{initPTS:u,lastEndTime:c}=this;const d={audio:void 0,video:void 0,text:i,id3:n,initSegment:void 0};xe(c)||(c=this.lastEndTime=s||0);const h=r.samples;if(!(h!=null&&h.length))return d;const f={initPTS:void 0,timescale:1};let p=this.initData;if((o=p)!=null&&o.length||(this.generateInitSegment(h),p=this.initData),!((l=p)!=null&&l.length))return G.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),d;this.emitInitSegment&&(f.tracks=this.initTracks,this.emitInitSegment=!1);const m=tJ(h,p),g=eJ(p,h),v=g===null?s:g;(zee(u,v,s,m)||f.timescale!==u.timescale&&a)&&(f.initPTS=v-s,u&&u.timescale===1&&G.warn(`Adjusting initPTS by ${f.initPTS-u.baseTime}`),this.initPTS=u={baseTime:f.initPTS,timescale:1});const b=e?v-u.baseTime/u.timescale:c,y=b+m;nJ(p,h,u.baseTime/u.timescale),m>0?this.lastEndTime=y:(G.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const T=!!p.audio,x=!!p.video;let _="";T&&(_+="audio"),x&&(_+="video");const S={data1:h,startPTS:b,startDTS:b,endPTS:y,endDTS:y,type:_,hasAudio:T,hasVideo:x,nb:1,dropped:0};return d.audio=S.type==="audio"?S:void 0,d.video=S.type!=="audio"?S:void 0,d.initSegment=f,d.id3=tN(n,s,u,u),i.samples.length&&(d.text=rN(i,s,u)),d}}function zee(t,e,r,n){if(t===null)return!0;const i=Math.max(n,1),s=e-t.baseTime/t.timescale;return Math.abs(s-r)>i}function rI(t,e){const r=t==null?void 0:t.codec;if(r&&r.length>4)return r;if(e===Mt.AUDIO){if(r==="ec-3"||r==="ac-3"||r==="alac")return r;if(r==="fLaC"||r==="Opus")return Um(r,!1);const n="mp4a.40.5";return G.info(`Parsed audio codec "${r}" or audio object type not handled. Using "${n}"`),n}return G.warn(`Unhandled video codec "${r}"`),r==="hvc1"||r==="hev1"?"hvc1.1.6.L120.90":r==="av01"?"av01.0.04M.08":"avc1.42e01e"}let js;try{js=self.performance.now.bind(self.performance)}catch{G.debug("Unable to use Performance API on this environment"),js=ec==null?void 0:ec.Date.now}const G0=[{demux:Oee,remux:qee},{demux:Sa,remux:W0},{demux:Lee,remux:W0},{demux:Bee,remux:W0}];G0.splice(2,0,{demux:Mee,remux:W0});class nI{constructor(e,r,n,i,s){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=r,this.config=n,this.vendor=i,this.id=s}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,r,n,i){const s=n.transmuxing;s.executeStart=js();let a=new Uint8Array(e);const{currentTransmuxState:o,transmuxConfig:l}=this;i&&(this.currentTransmuxState=i);const{contiguous:u,discontinuity:c,trackSwitch:d,accurateTimeOffset:h,timeOffset:f,initSegmentChange:p}=i||o,{audioCodec:m,videoCodec:g,defaultInitPts:v,duration:b,initSegmentData:y}=l,T=Yee(a,r);if(T&&T.method==="AES-128"){const A=this.getDecrypter();if(A.isSync()){let k=A.softwareDecrypt(a,T.key.buffer,T.iv.buffer);if(n.part>-1&&(k=A.flush()),!k)return s.executeEnd=js(),Rb(n);a=new Uint8Array(k)}else return this.decryptionPromise=A.webCryptoDecrypt(a,T.key.buffer,T.iv.buffer).then(k=>{const I=this.push(k,null,n);return this.decryptionPromise=null,I}),this.decryptionPromise}const x=this.needsProbing(c,d);if(x){const A=this.configureTransmuxer(a);if(A)return G.warn(`[transmuxer] ${A.message}`),this.observer.emit(w.ERROR,w.ERROR,{type:Ve.MEDIA_ERROR,details:J.FRAG_PARSING_ERROR,fatal:!1,error:A,reason:A.message}),s.executeEnd=js(),Rb(n)}(c||d||p||x)&&this.resetInitSegment(y,m,g,b,r),(c||p||x)&&this.resetInitialTimestamp(v),u||this.resetContiguity();const _=this.transmux(a,T,f,h,n),S=this.currentTransmuxState;return S.contiguous=!0,S.discontinuity=!1,S.trackSwitch=!1,s.executeEnd=js(),_}flush(e){const r=e.transmuxing;r.executeStart=js();const{decrypter:n,currentTransmuxState:i,decryptionPromise:s}=this;if(s)return s.then(()=>this.flush(e));const a=[],{timeOffset:o}=i;if(n){const d=n.flush();d&&a.push(this.push(d,null,e))}const{demuxer:l,remuxer:u}=this;if(!l||!u)return r.executeEnd=js(),[Rb(e)];const c=l.flush(o);return K0(c)?c.then(d=>(this.flushRemux(a,d,e),a)):(this.flushRemux(a,c,e),a)}flushRemux(e,r,n){const{audioTrack:i,videoTrack:s,id3Track:a,textTrack:o}=r,{accurateTimeOffset:l,timeOffset:u}=this.currentTransmuxState;G.log(`[transmuxer.ts]: Flushed fragment ${n.sn}${n.part>-1?" p: "+n.part:""} of level ${n.level}`);const c=this.remuxer.remux(i,s,a,o,u,l,!0,this.id);e.push({remuxResult:c,chunkMeta:n}),n.transmuxing.executeEnd=js()}resetInitialTimestamp(e){const{demuxer:r,remuxer:n}=this;!r||!n||(r.resetTimeStamp(e),n.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:r}=this;!e||!r||(e.resetContiguity(),r.resetNextTimestamp())}resetInitSegment(e,r,n,i,s){const{demuxer:a,remuxer:o}=this;!a||!o||(a.resetInitSegment(e,r,n,i),o.resetInitSegment(e,r,n,s))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,r,n,i,s){let a;return r&&r.method==="SAMPLE-AES"?a=this.transmuxSampleAes(e,r,n,i,s):a=this.transmuxUnencrypted(e,n,i,s),a}transmuxUnencrypted(e,r,n,i){const{audioTrack:s,videoTrack:a,id3Track:o,textTrack:l}=this.demuxer.demux(e,r,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(s,a,o,l,r,n,!1,this.id),chunkMeta:i}}transmuxSampleAes(e,r,n,i,s){return this.demuxer.demuxSampleAes(e,r,n).then(a=>({remuxResult:this.remuxer.remux(a.audioTrack,a.videoTrack,a.id3Track,a.textTrack,n,i,!1,this.id),chunkMeta:s}))}configureTransmuxer(e){const{config:r,observer:n,typeSupported:i,vendor:s}=this;let a;for(let h=0,f=G0.length;h<f;h++){var o;if((o=G0[h].demux)!=null&&o.probe(e)){a=G0[h];break}}if(!a)return new Error("Failed to find demuxer by probing fragment data");const l=this.demuxer,u=this.remuxer,c=a.remux,d=a.demux;(!u||!(u instanceof c))&&(this.remuxer=new c(n,r,i,s)),(!l||!(l instanceof d))&&(this.demuxer=new d(n,r,i),this.probe=d.probe)}needsProbing(e,r){return!this.demuxer||!this.remuxer||e||r}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new $x(this.config)),e}}function Yee(t,e){let r=null;return t.byteLength>0&&(e==null?void 0:e.key)!=null&&e.iv!==null&&e.method!=null&&(r=e),r}const Rb=t=>({remuxResult:{},chunkMeta:t});function K0(t){return"then"in t&&t.then instanceof Function}class Xee{constructor(e,r,n,i,s){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=r,this.initSegmentData=n,this.duration=i,this.defaultInitPts=s||null}}class Zee{constructor(e,r,n,i,s,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=r,this.accurateTimeOffset=n,this.trackSwitch=i,this.timeOffset=s,this.initSegmentChange=a}}var nN={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function s(l,u,c,d,h){if(typeof c!="function")throw new TypeError("The listener must be a function");var f=new i(c,d||l,h),p=r?r+u:u;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],f]:l._events[p].push(f):(l._events[p]=f,l._eventsCount++),l}function a(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],c,d;if(this._eventsCount===0)return u;for(d in c=this._events)e.call(c,d)&&u.push(r?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},o.prototype.listeners=function(u){var c=r?r+u:u,d=this._events[c];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},o.prototype.listenerCount=function(u){var c=r?r+u:u,d=this._events[c];return d?d.fn?1:d.length:0},o.prototype.emit=function(u,c,d,h,f,p){var m=r?r+u:u;if(!this._events[m])return!1;var g=this._events[m],v=arguments.length,b,y;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),v){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,c),!0;case 3:return g.fn.call(g.context,c,d),!0;case 4:return g.fn.call(g.context,c,d,h),!0;case 5:return g.fn.call(g.context,c,d,h,f),!0;case 6:return g.fn.call(g.context,c,d,h,f,p),!0}for(y=1,b=new Array(v-1);y<v;y++)b[y-1]=arguments[y];g.fn.apply(g.context,b)}else{var T=g.length,x;for(y=0;y<T;y++)switch(g[y].once&&this.removeListener(u,g[y].fn,void 0,!0),v){case 1:g[y].fn.call(g[y].context);break;case 2:g[y].fn.call(g[y].context,c);break;case 3:g[y].fn.call(g[y].context,c,d);break;case 4:g[y].fn.call(g[y].context,c,d,h);break;default:if(!b)for(x=1,b=new Array(v-1);x<v;x++)b[x-1]=arguments[x];g[y].fn.apply(g[y].context,b)}}return!0},o.prototype.on=function(u,c,d){return s(this,u,c,d,!1)},o.prototype.once=function(u,c,d){return s(this,u,c,d,!0)},o.prototype.removeListener=function(u,c,d,h){var f=r?r+u:u;if(!this._events[f])return this;if(!c)return a(this,f),this;var p=this._events[f];if(p.fn)p.fn===c&&(!h||p.once)&&(!d||p.context===d)&&a(this,f);else{for(var m=0,g=[],v=p.length;m<v;m++)(p[m].fn!==c||h&&!p[m].once||d&&p[m].context!==d)&&g.push(p[m]);g.length?this._events[f]=g.length===1?g[0]:g:a(this,f)}return this},o.prototype.removeAllListeners=function(u){var c;return u?(c=r?r+u:u,this._events[c]&&a(this,c)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,t.exports=o})(nN);var Qee=nN.exports,Wx=_Q(Qee);class iN{constructor(e,r,n,i){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const s=e.config;this.hls=e,this.id=r,this.useWorker=!!s.enableWorker,this.onTransmuxComplete=n,this.onFlush=i;const a=(u,c)=>{c=c||{},c.frag=this.frag,c.id=this.id,u===w.ERROR&&(this.error=c.error),this.hls.trigger(u,c)};this.observer=new Wx,this.observer.on(w.FRAG_DECRYPTED,a),this.observer.on(w.ERROR,a);const o=pl(s.preferManagedMediaSource)||{isTypeSupported:()=>!1},l={mpeg:o.isTypeSupported("audio/mpeg"),mp3:o.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:o.isTypeSupported('audio/mp4; codecs="ac-3"')};if(this.useWorker&&typeof Worker<"u"&&(s.workerPath||vee())){try{s.workerPath?(G.log(`loading Web Worker ${s.workerPath} for "${r}"`),this.workerContext=yee(s.workerPath)):(G.log(`injecting Web Worker for "${r}"`),this.workerContext=bee()),this.onwmsg=d=>this.onWorkerMessage(d);const{worker:c}=this.workerContext;c.addEventListener("message",this.onwmsg),c.onerror=d=>{const h=new Error(`${d.message}  (${d.filename}:${d.lineno})`);s.enableWorker=!1,G.warn(`Error in "${r}" Web Worker, fallback to inline`),this.hls.trigger(w.ERROR,{type:Ve.OTHER_ERROR,details:J.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:h})},c.postMessage({cmd:"init",typeSupported:l,vendor:"",id:r,config:JSON.stringify(s)})}catch(c){G.warn(`Error setting up "${r}" Web Worker, fallback to inline`,c),this.resetWorker(),this.error=null,this.transmuxer=new nI(this.observer,l,s,"",r)}return}this.transmuxer=new nI(this.observer,l,s,"",r)}resetWorker(){if(this.workerContext){const{worker:e,objectURL:r}=this.workerContext;r&&self.URL.revokeObjectURL(r),e.removeEventListener("message",this.onwmsg),e.onerror=null,e.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const r=this.transmuxer;r&&(r.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(e,r,n,i,s,a,o,l,u,c){var d,h;u.transmuxing.start=self.performance.now();const{transmuxer:f}=this,p=a?a.start:s.start,m=s.decryptdata,g=this.frag,v=!(g&&s.cc===g.cc),b=!(g&&u.level===g.level),y=g?u.sn-g.sn:-1,T=this.part?u.part-this.part.index:-1,x=y===0&&u.id>1&&u.id===(g==null?void 0:g.stats.chunkCount),_=!b&&(y===1||y===0&&(T===1||x&&T<=0)),S=self.performance.now();(b||y||s.stats.parsing.start===0)&&(s.stats.parsing.start=S),a&&(T||!_)&&(a.stats.parsing.start=S);const A=!(g&&((d=s.initSegment)==null?void 0:d.url)===((h=g.initSegment)==null?void 0:h.url)),k=new Zee(v,_,l,b,p,A);if(!_||v||A){G.log(`[transmuxer-interface, ${s.type}]: Starting new transmux session for sn: ${u.sn} p: ${u.part} level: ${u.level} id: ${u.id}
        discontinuity: ${v}
        trackSwitch: ${b}
        contiguous: ${_}
        accurateTimeOffset: ${l}
        timeOffset: ${p}
        initSegmentChange: ${A}`);const I=new Xee(n,i,r,o,c);this.configureTransmuxer(I)}if(this.frag=s,this.part=a,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:e,decryptdata:m,chunkMeta:u,state:k},e instanceof ArrayBuffer?[e]:[]);else if(f){const I=f.push(e,m,u,k);K0(I)?(f.async=!0,I.then(C=>{this.handleTransmuxComplete(C)}).catch(C=>{this.transmuxerError(C,u,"transmuxer-interface push error")})):(f.async=!1,this.handleTransmuxComplete(I))}}flush(e){e.transmuxing.start=self.performance.now();const{transmuxer:r}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:e});else if(r){let n=r.flush(e);K0(n)||r.async?(K0(n)||(n=Promise.resolve(n)),n.then(s=>{this.handleFlushResult(s,e)}).catch(s=>{this.transmuxerError(s,e,"transmuxer-interface flush error")})):this.handleFlushResult(n,e)}}transmuxerError(e,r,n){this.hls&&(this.error=e,this.hls.trigger(w.ERROR,{type:Ve.MEDIA_ERROR,details:J.FRAG_PARSING_ERROR,chunkMeta:r,frag:this.frag||void 0,fatal:!1,error:e,err:e,reason:n}))}handleFlushResult(e,r){e.forEach(n=>{this.handleTransmuxComplete(n)}),this.onFlush(r)}onWorkerMessage(e){const r=e.data;if(!(r!=null&&r.event)){G.warn(`worker message received with no ${r?"event name":"data"}`);return}const n=this.hls;if(this.hls)switch(r.event){case"init":{var i;const s=(i=this.workerContext)==null?void 0:i.objectURL;s&&self.URL.revokeObjectURL(s);break}case"transmuxComplete":{this.handleTransmuxComplete(r.data);break}case"flush":{this.onFlush(r.data);break}case"workerLog":G[r.data.logType]&&G[r.data.logType](r.data.message);break;default:{r.data=r.data||{},r.data.frag=this.frag,r.data.id=this.id,n.trigger(r.event,r.data);break}}}configureTransmuxer(e){const{transmuxer:r}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:e}):r&&r.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}function sN(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!rc(t[r].attrs,e[r].attrs))return!1;return!0}function rc(t,e,r){const n=t["STABLE-RENDITION-ID"];return n&&!r?n===e["STABLE-RENDITION-ID"]:!(r||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(i=>t[i]!==e[i])}function _1(t,e){return e.label.toLowerCase()===t.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(t.lang||"").toLowerCase())}const iI=100;class Jee extends Ux{constructor(e,r,n){super(e,r,n,"[audio-stream-controller]",je.AUDIO),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:e}=this;e.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(w.MANIFEST_LOADING,this.onManifestLoading,this),e.on(w.LEVEL_LOADED,this.onLevelLoaded,this),e.on(w.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(w.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(w.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(w.ERROR,this.onError,this),e.on(w.BUFFER_RESET,this.onBufferReset,this),e.on(w.BUFFER_CREATED,this.onBufferCreated,this),e.on(w.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(w.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(w.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(w.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(w.MANIFEST_LOADING,this.onManifestLoading,this),e.off(w.LEVEL_LOADED,this.onLevelLoaded,this),e.off(w.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(w.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(w.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(w.ERROR,this.onError,this),e.off(w.BUFFER_RESET,this.onBufferReset,this),e.off(w.BUFFER_CREATED,this.onBufferCreated,this),e.off(w.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(w.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(w.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(w.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(e,{frag:r,id:n,initPTS:i,timescale:s}){if(n==="main"){const a=r.cc;this.initPTS[r.cc]={baseTime:i,timescale:s},this.log(`InitPTS for cc: ${a} found from main: ${i}`),this.videoTrackCC=a,this.state===ae.WAITING_INIT_PTS&&this.tick()}}startLoad(e){if(!this.levels){this.startPosition=e,this.state=ae.STOPPED;return}const r=this.lastCurrentTime;this.stopLoad(),this.setInterval(iI),r>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${r.toFixed(3)}`),e=r,this.state=ae.IDLE):(this.loadedmetadata=!1,this.state=ae.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}doTick(){switch(this.state){case ae.IDLE:this.doTickIdle();break;case ae.WAITING_TRACK:{var e;const{levels:n,trackId:i}=this,s=n==null||(e=n[i])==null?void 0:e.details;if(s){if(this.waitForCdnTuneIn(s))break;this.state=ae.WAITING_INIT_PTS}break}case ae.FRAG_LOADING_WAITING_RETRY:{var r;const n=performance.now(),i=this.retryDate;if(!i||n>=i||(r=this.media)!=null&&r.seeking){const{levels:s,trackId:a}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((s==null?void 0:s[a])||null),this.state=ae.IDLE}break}case ae.WAITING_INIT_PTS:{const n=this.waitingData;if(n){const{frag:i,part:s,cache:a,complete:o}=n;if(this.initPTS[i.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=ae.FRAG_LOADING;const l=a.flush(),u={frag:i,part:s,payload:l,networkDetails:null};this._handleFragmentLoadProgress(u),o&&super._handleFragmentLoadComplete(u)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log(`Waiting fragment cc (${i.cc}) cancelled because video is at cc ${this.videoTrackCC}`),this.clearWaitingFragment();else{const l=this.getLoadPosition(),u=Zt.bufferInfo(this.mediaBuffer,l,this.config.maxBufferHole);y1(u.end,this.config.maxFragLookUpTolerance,i)<0&&(this.log(`Waiting fragment cc (${i.cc}) @ ${i.start} cancelled because another fragment at ${u.end} is needed`),this.clearWaitingFragment())}}else this.state=ae.IDLE}}this.onTickEnd()}clearWaitingFragment(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=ae.IDLE)}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){const{hls:e,levels:r,media:n,trackId:i}=this,s=e.config;if(!n&&(this.startFragRequested||!s.startFragPrefetch)||!(r!=null&&r[i]))return;const a=r[i],o=a.details;if(!o||o.live&&this.levelLastLoaded!==a||this.waitForCdnTuneIn(o)){this.state=ae.WAITING_TRACK;return}const l=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&l&&(this.bufferFlushed=!1,this.afterBufferFlushed(l,Mt.AUDIO,je.AUDIO));const u=this.getFwdBufferInfo(l,je.AUDIO);if(u===null)return;const{bufferedTrack:c,switchingTrack:d}=this;if(!d&&this._streamEnded(u,o)){e.trigger(w.BUFFER_EOS,{type:"audio"}),this.state=ae.ENDED;return}const h=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,je.MAIN),f=u.len,p=this.getMaxBufferLength(h==null?void 0:h.len),m=o.fragments,g=m[0].start;let v=this.flushing?this.getLoadPosition():u.end;if(d&&n){const x=this.getLoadPosition();c&&!rc(d.attrs,c.attrs)&&(v=x),o.PTSKnown&&x<g&&(u.end>g||u.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),n.currentTime=g+.05)}if(f>=p&&!d&&v<m[m.length-1].start)return;let b=this.getNextFragment(v,o),y=!1;if(b&&this.isLoopLoading(b,v)&&(y=!!b.gap,b=this.getNextFragmentLoopLoading(b,o,u,je.MAIN,p)),!b){this.bufferFlushed=!0;return}const T=h&&b.start>h.end+o.targetduration;if(T||!(h!=null&&h.len)&&u.len){const x=this.getAppendedFrag(b.start,je.MAIN);if(x===null||(y||(y=!!x.gap||!!T&&h.len===0),T&&!y||y&&u.nextStart&&u.nextStart<x.end))return}this.loadFragment(b,a,v)}getMaxBufferLength(e){const r=super.getMaxBufferLength();return e?Math.min(Math.max(r,e),this.config.maxMaxBufferLength):r}onMediaDetaching(){this.videoBuffer=null,this.bufferFlushed=this.flushing=!1,super.onMediaDetaching()}onAudioTracksUpdated(e,{audioTracks:r}){this.resetTransmuxer(),this.levels=r.map(n=>new tc(n))}onAudioTrackSwitching(e,r){const n=!!r.url;this.trackId=r.id;const{fragCurrent:i}=this;i&&(i.abortRequests(),this.removeUnbufferedFrags(i.start)),this.resetLoadingState(),n?this.setInterval(iI):this.resetTransmuxer(),n?(this.switchingTrack=r,this.state=ae.IDLE,this.flushAudioIfNeeded(r)):(this.switchingTrack=null,this.bufferedTrack=r,this.state=ae.STOPPED),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=this.flushing=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(e,r){this.mainDetails=r.details,this.cachedTrackLoadedData!==null&&(this.hls.trigger(w.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(e,r){var n;if(this.mainDetails==null){this.cachedTrackLoadedData=r;return}const{levels:i}=this,{details:s,id:a}=r;if(!i){this.warn(`Audio tracks were reset while loading level ${a}`);return}this.log(`Audio track ${a} loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""},duration:${s.totalduration}`);const o=i[a];let l=0;if(s.live||(n=o.details)!=null&&n.live){this.checkLiveUpdate(s);const c=this.mainDetails;if(s.deltaUpdateFailed||!c)return;if(!o.details&&s.hasProgramDateTime&&c.hasProgramDateTime)Wm(s,c),l=s.fragments[0].start;else{var u;l=this.alignPlaylists(s,o.details,(u=this.levelLastLoaded)==null?void 0:u.details)}}o.details=s,this.levelLastLoaded=o,!this.startFragRequested&&(this.mainDetails||!s.live)&&this.setStartPosition(this.mainDetails||s,l),this.state===ae.WAITING_TRACK&&!this.waitForCdnTuneIn(s)&&(this.state=ae.IDLE),this.tick()}_handleFragmentLoadProgress(e){var r;const{frag:n,part:i,payload:s}=e,{config:a,trackId:o,levels:l}=this;if(!l){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const u=l[o];if(!u){this.warn("Audio track is undefined on fragment load progress");return}const c=u.details;if(!c){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(n.start);return}const d=a.defaultAudioCodec||u.audioCodec||"mp4a.40.2";let h=this.transmuxer;h||(h=this.transmuxer=new iN(this.hls,je.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const f=this.initPTS[n.cc],p=(r=n.initSegment)==null?void 0:r.data;if(f!==void 0){const g=i?i.index:-1,v=g!==-1,b=new Fx(n.level,n.sn,n.stats.chunkCount,s.byteLength,g,v);h.push(s,p,d,"",n,i,c.totalduration,!1,b,f)}else{this.log(`Unknown video PTS for cc ${n.cc}, waiting for video PTS before demuxing audio frag ${n.sn} of [${c.startSN} ,${c.endSN}],track ${o}`);const{cache:m}=this.waitingData=this.waitingData||{frag:n,part:i,cache:new HP,complete:!1};m.push(new Uint8Array(s)),this.waitingVideoCC=this.videoTrackCC,this.state=ae.WAITING_INIT_PTS}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(e,r){const n=r.tracks.audio;n&&(this.mediaBuffer=n.buffer||null),r.tracks.video&&(this.videoBuffer=r.tracks.video.buffer||null)}onFragBuffered(e,r){const{frag:n,part:i}=r;if(n.type!==je.AUDIO){if(!this.loadedmetadata&&n.type===je.MAIN){const s=this.videoBuffer||this.media;s&&Zt.getBuffered(s).length&&(this.loadedmetadata=!0)}return}if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${i?" p: "+i.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(n.sn!=="initSegment"){this.fragPrevious=n;const s=this.switchingTrack;s&&(this.bufferedTrack=s,this.switchingTrack=null,this.hls.trigger(w.AUDIO_TRACK_SWITCHED,tn({},s)))}this.fragBufferedComplete(n,i)}onError(e,r){var n;if(r.fatal){this.state=ae.ERROR;return}switch(r.details){case J.FRAG_GAP:case J.FRAG_PARSING_ERROR:case J.FRAG_DECRYPT_ERROR:case J.FRAG_LOAD_ERROR:case J.FRAG_LOAD_TIMEOUT:case J.KEY_LOAD_ERROR:case J.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(je.AUDIO,r);break;case J.AUDIO_TRACK_LOAD_ERROR:case J.AUDIO_TRACK_LOAD_TIMEOUT:case J.LEVEL_PARSING_ERROR:!r.levelRetry&&this.state===ae.WAITING_TRACK&&((n=r.context)==null?void 0:n.type)===pt.AUDIO_TRACK&&(this.state=ae.IDLE);break;case J.BUFFER_APPEND_ERROR:case J.BUFFER_FULL_ERROR:if(!r.parent||r.parent!=="audio")return;if(r.details===J.BUFFER_APPEND_ERROR){this.resetLoadingState();return}this.reduceLengthAndFlushBuffer(r)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case J.INTERNAL_EXCEPTION:this.recoverWorkerError(r);break}}onBufferFlushing(e,{type:r}){r!==Mt.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:r}){if(r!==Mt.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===ae.ENDED&&(this.state=ae.IDLE);const n=this.mediaBuffer||this.media;n&&(this.afterBufferFlushed(n,r,je.AUDIO),this.tick())}}_handleTransmuxComplete(e){var r;const n="audio",{hls:i}=this,{remuxResult:s,chunkMeta:a}=e,o=this.getCurrentContext(a);if(!o){this.resetWhenMissingContext(a);return}const{frag:l,part:u,level:c}=o,{details:d}=c,{audio:h,text:f,id3:p,initSegment:m}=s;if(this.fragContextChanged(l)||!d){this.fragmentTracker.removeFragment(l);return}if(this.state=ae.PARSING,this.switchingTrack&&h&&this.completeAudioSwitch(this.switchingTrack),m!=null&&m.tracks){const g=l.initSegment||l;this._bufferInitSegment(c,m.tracks,g,a),i.trigger(w.FRAG_PARSING_INIT_SEGMENT,{frag:g,id:n,tracks:m.tracks})}if(h){const{startPTS:g,endPTS:v,startDTS:b,endDTS:y}=h;u&&(u.elementaryStreams[Mt.AUDIO]={startPTS:g,endPTS:v,startDTS:b,endDTS:y}),l.setElementaryStreamInfo(Mt.AUDIO,g,v,b,y),this.bufferFragmentData(h,l,u,a)}if(p!=null&&(r=p.samples)!=null&&r.length){const g=Cr({id:n,frag:l,details:d},p);i.trigger(w.FRAG_PARSING_METADATA,g)}if(f){const g=Cr({id:n,frag:l,details:d},f);i.trigger(w.FRAG_PARSING_USERDATA,g)}}_bufferInitSegment(e,r,n,i){if(this.state!==ae.PARSING)return;r.video&&delete r.video;const s=r.audio;if(!s)return;s.id="audio";const a=e.audioCodec;this.log(`Init audio buffer, container:${s.container}, codecs[level/parsed]=[${a}/${s.codec}]`),a&&a.split(",").length===1&&(s.levelCodec=a),this.hls.trigger(w.BUFFER_CODECS,r);const o=s.initSegment;if(o!=null&&o.byteLength){const l={type:"audio",frag:n,part:null,chunkMeta:i,parent:n.type,data:o};this.hls.trigger(w.BUFFER_APPENDING,l)}this.tickImmediate()}loadFragment(e,r,n){const i=this.fragmentTracker.getState(e);if(this.fragCurrent=e,this.switchingTrack||i===Yr.NOT_LOADED||i===Yr.PARTIAL){var s;if(e.sn==="initSegment")this._loadInitSegment(e,r);else if((s=r.details)!=null&&s.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=ae.WAITING_INIT_PTS;const a=this.mainDetails;a&&a.fragments[0].start!==r.details.fragments[0].start&&Wm(r.details,a)}else this.startFragRequested=!0,super.loadFragment(e,r,n)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){const{media:r,bufferedTrack:n}=this,i=n==null?void 0:n.attrs,s=e.attrs;r&&i&&(i.CHANNELS!==s.CHANNELS||n.name!==e.name||n.lang!==e.lang)&&(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null)}completeAudioSwitch(e){const{hls:r}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,r.trigger(w.AUDIO_TRACK_SWITCHED,tn({},e))}}class ete extends Nx{constructor(e){super(e,"[audio-track-controller]"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(w.MANIFEST_LOADING,this.onManifestLoading,this),e.on(w.MANIFEST_PARSED,this.onManifestParsed,this),e.on(w.LEVEL_LOADING,this.onLevelLoading,this),e.on(w.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(w.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(w.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(w.MANIFEST_LOADING,this.onManifestLoading,this),e.off(w.MANIFEST_PARSED,this.onManifestParsed,this),e.off(w.LEVEL_LOADING,this.onLevelLoading,this),e.off(w.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(w.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(w.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,r){this.tracks=r.audioTracks||[]}onAudioTrackLoaded(e,r){const{id:n,groupId:i,details:s}=r,a=this.tracksInGroup[n];if(!a||a.groupId!==i){this.warn(`Audio track with id:${n} and group:${i} not found in active group ${a==null?void 0:a.groupId}`);return}const o=a.details;a.details=r.details,this.log(`Audio track ${n} "${a.name}" lang:${a.lang} group:${i} loaded [${s.startSN}-${s.endSN}]`),n===this.trackId&&this.playlistLoaded(n,r,o)}onLevelLoading(e,r){this.switchLevel(r.level)}onLevelSwitching(e,r){this.switchLevel(r.level)}switchLevel(e){const r=this.hls.levels[e];if(!r)return;const n=r.audioGroups||null,i=this.groupIds;let s=this.currentTrack;if(!n||(i==null?void 0:i.length)!==(n==null?void 0:n.length)||n!=null&&n.some(o=>(i==null?void 0:i.indexOf(o))===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const o=this.tracks.filter(h=>!n||n.indexOf(h.groupId)!==-1);if(o.length)this.selectDefaultTrack&&!o.some(h=>h.default)&&(this.selectDefaultTrack=!1),o.forEach((h,f)=>{h.id=f});else if(!s&&!this.tracksInGroup.length)return;this.tracksInGroup=o;const l=this.hls.config.audioPreference;if(!s&&l){const h=fs(l,o,Dl);if(h>-1)s=o[h];else{const f=fs(l,this.tracks);s=this.tracks[f]}}let u=this.findTrackId(s);u===-1&&s&&(u=this.findTrackId(null));const c={audioTracks:o};this.log(`Updating audio tracks, ${o.length} track(s) found in group(s): ${n==null?void 0:n.join(",")}`),this.hls.trigger(w.AUDIO_TRACKS_UPDATED,c);const d=this.trackId;if(u!==-1&&d===-1)this.setAudioTrack(u);else if(o.length&&d===-1){var a;const h=new Error(`No audio track selected for current audio group-ID(s): ${(a=this.groupIds)==null?void 0:a.join(",")} track count: ${o.length}`);this.warn(h.message),this.hls.trigger(w.ERROR,{type:Ve.MEDIA_ERROR,details:J.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:h})}}else this.shouldReloadPlaylist(s)&&this.setAudioTrack(this.trackId)}onError(e,r){r.fatal||!r.context||r.context.type===pt.AUDIO_TRACK&&r.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(r.context.groupId)!==-1)&&(this.requestScheduled=-1,this.checkRetry(r))}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const r=this.hls;if(r.config.audioPreference=e,e){const n=this.allAudioTracks;if(this.selectDefaultTrack=!1,n.length){const i=this.currentTrack;if(i&&Nu(e,i,Dl))return i;const s=fs(e,this.tracksInGroup,Dl);if(s>-1){const a=this.tracksInGroup[s];return this.setAudioTrack(s),a}else if(i){let a=r.loadLevel;a===-1&&(a=r.firstAutoLevel);const o=eee(e,r.levels,n,a,Dl);if(o===-1)return null;r.nextLoadLevel=o}if(e.channels||e.audioCodec){const a=fs(e,n);if(a>-1)return n[a]}}}return null}setAudioTrack(e){const r=this.tracksInGroup;if(e<0||e>=r.length){this.warn(`Invalid audio track id: ${e}`);return}this.clearTimer(),this.selectDefaultTrack=!1;const n=this.currentTrack,i=r[e],s=i.details&&!i.details.live;if(e===this.trackId&&i===n&&s||(this.log(`Switching to audio-track ${e} "${i.name}" lang:${i.lang} group:${i.groupId} channels:${i.channels}`),this.trackId=e,this.currentTrack=i,this.hls.trigger(w.AUDIO_TRACK_SWITCHING,tn({},i)),s))return;const a=this.switchParams(i.url,n==null?void 0:n.details,i.details);this.loadPlaylist(a)}findTrackId(e){const r=this.tracksInGroup;for(let n=0;n<r.length;n++){const i=r[n];if(!(this.selectDefaultTrack&&!i.default)&&(!e||Nu(e,i,Dl)))return n}if(e){const{name:n,lang:i,assocLang:s,characteristics:a,audioCodec:o,channels:l}=e;for(let u=0;u<r.length;u++){const c=r[u];if(Nu({name:n,lang:i,assocLang:s,characteristics:a,audioCodec:o,channels:l},c,Dl))return u}for(let u=0;u<r.length;u++){const c=r[u];if(rc(e.attrs,c.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return u}for(let u=0;u<r.length;u++){const c=r[u];if(rc(e.attrs,c.attrs,["LANGUAGE"]))return u}}return-1}loadPlaylist(e){const r=this.currentTrack;if(this.shouldLoadPlaylist(r)&&r){super.loadPlaylist();const n=r.id,i=r.groupId;let s=r.url;if(e)try{s=e.addDirectives(s)}catch(a){this.warn(`Could not construct new URL with HLS Delivery Directives: ${a}`)}this.log(`loading audio-track playlist ${n} "${r.name}" lang:${r.lang} group:${i}`),this.clearTimer(),this.hls.trigger(w.AUDIO_TRACK_LOADING,{url:s,id:n,groupId:i,deliveryDirectives:e||null})}}}const sI=500;class tte extends Ux{constructor(e,r,n){super(e,r,n,"[subtitle-stream-controller]",je.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}_registerListeners(){const{hls:e}=this;e.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(w.MANIFEST_LOADING,this.onManifestLoading,this),e.on(w.LEVEL_LOADED,this.onLevelLoaded,this),e.on(w.ERROR,this.onError,this),e.on(w.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(w.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(w.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(w.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(w.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(w.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(w.MANIFEST_LOADING,this.onManifestLoading,this),e.off(w.LEVEL_LOADED,this.onLevelLoaded,this),e.off(w.ERROR,this.onError,this),e.off(w.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(w.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(w.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(w.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(w.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(w.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(e){this.stopLoad(),this.state=ae.IDLE,this.setInterval(sI),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(e,r){this.mainDetails=r.details}onSubtitleFragProcessed(e,r){const{frag:n,success:i}=r;if(this.fragPrevious=n,this.state=ae.IDLE,!i)return;const s=this.tracksBuffered[this.currentTrackId];if(!s)return;let a;const o=n.start;for(let u=0;u<s.length;u++)if(o>=s[u].start&&o<=s[u].end){a=s[u];break}const l=n.start+n.duration;a?a.end=l:(a={start:o,end:l},s.push(a)),this.fragmentTracker.fragBuffered(n),this.fragBufferedComplete(n,null)}onBufferFlushing(e,r){const{startOffset:n,endOffset:i}=r;if(n===0&&i!==Number.POSITIVE_INFINITY){const s=i-1;if(s<=0)return;r.endOffsetSubtitles=Math.max(0,s),this.tracksBuffered.forEach(a=>{for(let o=0;o<a.length;){if(a[o].end<=s){a.shift();continue}else if(a[o].start<s)a[o].start=s;else break;o++}}),this.fragmentTracker.removeFragmentsInRange(n,s,je.SUBTITLE)}}onFragBuffered(e,r){if(!this.loadedmetadata&&r.frag.type===je.MAIN){var n;(n=this.media)!=null&&n.buffered.length&&(this.loadedmetadata=!0)}}onError(e,r){const n=r.frag;(n==null?void 0:n.type)===je.SUBTITLE&&(r.details===J.FRAG_GAP&&this.fragmentTracker.fragBuffered(n,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==ae.STOPPED&&(this.state=ae.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:r}){if(this.levels&&sN(this.levels,r)){this.levels=r.map(n=>new tc(n));return}this.tracksBuffered=[],this.levels=r.map(n=>{const i=new tc(n);return this.tracksBuffered[i.id]=[],i}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,je.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,r){var n;if(this.currentTrackId=r.id,!((n=this.levels)!=null&&n.length)||this.currentTrackId===-1){this.clearInterval();return}const i=this.levels[this.currentTrackId];i!=null&&i.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,i&&this.setInterval(sI)}onSubtitleTrackLoaded(e,r){var n;const{currentTrackId:i,levels:s}=this,{details:a,id:o}=r;if(!s){this.warn(`Subtitle tracks were reset while loading level ${o}`);return}const l=s[o];if(o>=s.length||!l)return;this.log(`Subtitle track ${o} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""},duration:${a.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let u=0;if(a.live||(n=l.details)!=null&&n.live){const d=this.mainDetails;if(a.deltaUpdateFailed||!d)return;const h=d.fragments[0];if(!l.details)a.hasProgramDateTime&&d.hasProgramDateTime?(Wm(a,d),u=a.fragments[0].start):h&&(u=h.start,b1(a,u));else{var c;u=this.alignPlaylists(a,l.details,(c=this.levelLastLoaded)==null?void 0:c.details),u===0&&h&&(u=h.start,b1(a,u))}}l.details=a,this.levelLastLoaded=l,o===i&&(!this.startFragRequested&&(this.mainDetails||!a.live)&&this.setStartPosition(this.mainDetails||a,u),this.tick(),a.live&&!this.fragCurrent&&this.media&&this.state===ae.IDLE&&(Vm(null,a.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),l.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:r,payload:n}=e,i=r.decryptdata,s=this.hls;if(!this.fragContextChanged(r)&&n&&n.byteLength>0&&i!=null&&i.key&&i.iv&&i.method==="AES-128"){const a=performance.now();this.decrypter.decrypt(new Uint8Array(n),i.key.buffer,i.iv.buffer).catch(o=>{throw s.trigger(w.ERROR,{type:Ve.MEDIA_ERROR,details:J.FRAG_DECRYPT_ERROR,fatal:!1,error:o,reason:o.message,frag:r}),o}).then(o=>{const l=performance.now();s.trigger(w.FRAG_DECRYPTED,{frag:r,payload:o,stats:{tstart:a,tdecrypt:l}})}).catch(o=>{this.warn(`${o.name}: ${o.message}`),this.state=ae.IDLE})}}doTick(){if(!this.media){this.state=ae.IDLE;return}if(this.state===ae.IDLE){const{currentTrackId:e,levels:r}=this,n=r==null?void 0:r[e];if(!n||!r.length||!n.details)return;const{config:i}=this,s=this.getLoadPosition(),a=Zt.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],s,i.maxBufferHole),{end:o,len:l}=a,u=this.getFwdBufferInfo(this.media,je.MAIN),c=n.details,d=this.getMaxBufferLength(u==null?void 0:u.len)+c.levelTargetDuration;if(l>d)return;const h=c.fragments,f=h.length,p=c.edge;let m=null;const g=this.fragPrevious;if(o<p){const v=i.maxFragLookUpTolerance,b=o>p-v?0:v;m=Vm(g,h,Math.max(h[0].start,o),b),!m&&g&&g.start<h[0].start&&(m=h[0])}else m=h[f-1];if(!m)return;if(m=this.mapToInitFragWhenRequired(m),m.sn!=="initSegment"){const v=m.sn-c.startSN,b=h[v-1];b&&b.cc===m.cc&&this.fragmentTracker.getState(b)===Yr.NOT_LOADED&&(m=b)}this.fragmentTracker.getState(m)===Yr.NOT_LOADED&&this.loadFragment(m,n,o)}}getMaxBufferLength(e){const r=super.getMaxBufferLength();return e?Math.max(r,e):r}loadFragment(e,r,n){this.fragCurrent=e,e.sn==="initSegment"?this._loadInitSegment(e,r):(this.startFragRequested=!0,super.loadFragment(e,r,n))}get mediaBufferTimeRanges(){return new rte(this.tracksBuffered[this.currentTrackId]||[])}}class rte{constructor(e){this.buffered=void 0;const r=(n,i,s)=>{if(i=i>>>0,i>s-1)throw new DOMException(`Failed to execute '${n}' on 'TimeRanges': The index provided (${i}) is greater than the maximum bound (${s})`);return e[i][n]};this.buffered={get length(){return e.length},end(n){return r("end",n,e.length)},start(n){return r("start",n,e.length)}}}}class nte extends Nx{constructor(e){super(e,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let r=null;const n=j0(this.media.textTracks);for(let s=0;s<n.length;s++)if(n[s].mode==="hidden")r=n[s];else if(n[s].mode==="showing"){r=n[s];break}const i=this.findTrackForTextTrack(r);this.subtitleTrack!==i&&this.setSubtitleTrack(i)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(w.MANIFEST_LOADING,this.onManifestLoading,this),e.on(w.MANIFEST_PARSED,this.onManifestParsed,this),e.on(w.LEVEL_LOADING,this.onLevelLoading,this),e.on(w.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(w.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(w.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(w.MANIFEST_LOADING,this.onManifestLoading,this),e.off(w.MANIFEST_PARSED,this.onManifestParsed,this),e.off(w.LEVEL_LOADING,this.onLevelLoading,this),e.off(w.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(w.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(w.ERROR,this.onError,this)}onMediaAttached(e,r){this.media=r.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(){if(!this.media)return;self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),j0(this.media.textTracks).forEach(r=>{Cu(r)}),this.subtitleTrack=-1,this.media=null}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,r){this.tracks=r.subtitleTracks}onSubtitleTrackLoaded(e,r){const{id:n,groupId:i,details:s}=r,a=this.tracksInGroup[n];if(!a||a.groupId!==i){this.warn(`Subtitle track with id:${n} and group:${i} not found in active group ${a==null?void 0:a.groupId}`);return}const o=a.details;a.details=r.details,this.log(`Subtitle track ${n} "${a.name}" lang:${a.lang} group:${i} loaded [${s.startSN}-${s.endSN}]`),n===this.trackId&&this.playlistLoaded(n,r,o)}onLevelLoading(e,r){this.switchLevel(r.level)}onLevelSwitching(e,r){this.switchLevel(r.level)}switchLevel(e){const r=this.hls.levels[e];if(!r)return;const n=r.subtitleGroups||null,i=this.groupIds;let s=this.currentTrack;if(!n||(i==null?void 0:i.length)!==(n==null?void 0:n.length)||n!=null&&n.some(a=>(i==null?void 0:i.indexOf(a))===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const a=this.tracks.filter(c=>!n||n.indexOf(c.groupId)!==-1);if(a.length)this.selectDefaultTrack&&!a.some(c=>c.default)&&(this.selectDefaultTrack=!1),a.forEach((c,d)=>{c.id=d});else if(!s&&!this.tracksInGroup.length)return;this.tracksInGroup=a;const o=this.hls.config.subtitlePreference;if(!s&&o){this.selectDefaultTrack=!1;const c=fs(o,a);if(c>-1)s=a[c];else{const d=fs(o,this.tracks);s=this.tracks[d]}}let l=this.findTrackId(s);l===-1&&s&&(l=this.findTrackId(null));const u={subtitleTracks:a};this.log(`Updating subtitle tracks, ${a.length} track(s) found in "${n==null?void 0:n.join(",")}" group-id`),this.hls.trigger(w.SUBTITLE_TRACKS_UPDATED,u),l!==-1&&this.trackId===-1&&this.setSubtitleTrack(l)}else this.shouldReloadPlaylist(s)&&this.setSubtitleTrack(this.trackId)}findTrackId(e){const r=this.tracksInGroup,n=this.selectDefaultTrack;for(let i=0;i<r.length;i++){const s=r[i];if(!(n&&!s.default||!n&&!e)&&(!e||Nu(s,e)))return i}if(e){for(let i=0;i<r.length;i++){const s=r[i];if(rc(e.attrs,s.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return i}for(let i=0;i<r.length;i++){const s=r[i];if(rc(e.attrs,s.attrs,["LANGUAGE"]))return i}}return-1}findTrackForTextTrack(e){if(e){const r=this.tracksInGroup;for(let n=0;n<r.length;n++){const i=r[n];if(_1(i,e))return n}}return-1}onError(e,r){r.fatal||!r.context||r.context.type===pt.SUBTITLE_TRACK&&r.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(r.context.groupId)!==-1)&&this.checkRetry(r)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){const r=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,r.length){const n=this.currentTrack;if(n&&Nu(e,n))return n;const i=fs(e,this.tracksInGroup);if(i>-1){const s=this.tracksInGroup[i];return this.setSubtitleTrack(i),s}else{if(n)return null;{const s=fs(e,r);if(s>-1)return r[s]}}}}return null}loadPlaylist(e){super.loadPlaylist();const r=this.currentTrack;if(this.shouldLoadPlaylist(r)&&r){const n=r.id,i=r.groupId;let s=r.url;if(e)try{s=e.addDirectives(s)}catch(a){this.warn(`Could not construct new URL with HLS Delivery Directives: ${a}`)}this.log(`Loading subtitle playlist for id ${n}`),this.hls.trigger(w.SUBTITLE_TRACK_LOADING,{url:s,id:n,groupId:i,deliveryDirectives:e||null})}}toggleTrackModes(){const{media:e}=this;if(!e)return;const r=j0(e.textTracks),n=this.currentTrack;let i;if(n&&(i=r.filter(s=>_1(n,s))[0],i||this.warn(`Unable to find subtitle TextTrack with name "${n.name}" and language "${n.lang}"`)),[].slice.call(r).forEach(s=>{s.mode!=="disabled"&&s!==i&&(s.mode="disabled")}),i){const s=this.subtitleDisplay?"showing":"hidden";i.mode!==s&&(i.mode=s)}}setSubtitleTrack(e){const r=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=r.length||!xe(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.clearTimer(),this.selectDefaultTrack=!1;const n=this.currentTrack,i=r[e]||null;if(this.trackId=e,this.currentTrack=i,this.toggleTrackModes(),!i){this.hls.trigger(w.SUBTITLE_TRACK_SWITCH,{id:e});return}const s=!!i.details&&!i.details.live;if(e===this.trackId&&i===n&&s)return;this.log(`Switching to subtitle-track ${e}`+(i?` "${i.name}" lang:${i.lang} group:${i.groupId}`:""));const{id:a,groupId:o="",name:l,type:u,url:c}=i;this.hls.trigger(w.SUBTITLE_TRACK_SWITCH,{id:a,groupId:o,name:l,type:u,url:c});const d=this.switchParams(i.url,n==null?void 0:n.details,i.details);this.loadPlaylist(d)}}class ite{constructor(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}append(e,r,n){const i=this.queues[r];i.push(e),i.length===1&&!n&&this.executeNext(r)}insertAbort(e,r){this.queues[r].unshift(e),this.executeNext(r)}appendBlocker(e){let r;const n=new Promise(s=>{r=s}),i={execute:r,onStart:()=>{},onComplete:()=>{},onError:()=>{}};return this.append(i,e),n}executeNext(e){const r=this.queues[e];if(r.length){const n=r[0];try{n.execute()}catch(i){G.warn(`[buffer-operation-queue]: Exception executing "${e}" SourceBuffer operation: ${i}`),n.onError(i);const s=this.buffers[e];s!=null&&s.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues[e].shift(),this.executeNext(e)}current(e){return this.queues[e][0]}}const aI=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/;class ste{constructor(e){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendSource=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this._onEndStreaming=n=>{this.hls&&this.hls.pauseBuffering()},this._onStartStreaming=n=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=()=>{const{media:n,mediaSource:i}=this;this.log("Media source opened"),n&&(n.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(w.MEDIA_ATTACHED,{media:n,mediaSource:i})),i&&i.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:n,_objectUrl:i}=this;n!==i&&G.error(`Media element src was set while attaching MediaSource (${i} > ${n})`)},this.hls=e;const r="[buffer-controller]";this.appendSource=pJ(pl(e.config.preferManagedMediaSource)),this.log=G.log.bind(G,r),this.warn=G.warn.bind(G,r),this.error=G.error.bind(G,r),this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null,this.hls=null}registerListeners(){const{hls:e}=this;e.on(w.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(w.MANIFEST_LOADING,this.onManifestLoading,this),e.on(w.MANIFEST_PARSED,this.onManifestParsed,this),e.on(w.BUFFER_RESET,this.onBufferReset,this),e.on(w.BUFFER_APPENDING,this.onBufferAppending,this),e.on(w.BUFFER_CODECS,this.onBufferCodecs,this),e.on(w.BUFFER_EOS,this.onBufferEos,this),e.on(w.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(w.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(w.FRAG_PARSED,this.onFragParsed,this),e.on(w.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:e}=this;e.off(w.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(w.MANIFEST_LOADING,this.onManifestLoading,this),e.off(w.MANIFEST_PARSED,this.onManifestParsed,this),e.off(w.BUFFER_RESET,this.onBufferReset,this),e.off(w.BUFFER_APPENDING,this.onBufferAppending,this),e.off(w.BUFFER_CODECS,this.onBufferCodecs,this),e.off(w.BUFFER_EOS,this.onBufferEos,this),e.off(w.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(w.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(w.FRAG_PARSED,this.onFragParsed,this),e.off(w.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new ite(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.appendErrors={audio:0,video:0,audiovideo:0},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,r){let n=2;(r.audio&&!r.video||!r.altAudio)&&(n=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=n,this.log(`${this.bufferCodecEventsExpected} bufferCodec event(s) expected`)}onMediaAttaching(e,r){const n=this.media=r.media,i=pl(this.appendSource);if(n&&i){var s;const a=this.mediaSource=new i;this.log(`created media source: ${(s=a.constructor)==null?void 0:s.name}`),a.addEventListener("sourceopen",this._onMediaSourceOpen),a.addEventListener("sourceended",this._onMediaSourceEnded),a.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(a.addEventListener("startstreaming",this._onStartStreaming),a.addEventListener("endstreaming",this._onEndStreaming));const o=this._objectUrl=self.URL.createObjectURL(a);if(this.appendSource)try{n.removeAttribute("src");const l=self.ManagedMediaSource;n.disableRemotePlayback=n.disableRemotePlayback||l&&a instanceof l,oI(n),ate(n,o),n.load()}catch{n.src=o}else n.src=o;n.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:e,mediaSource:r,_objectUrl:n}=this;if(r){if(this.log("media source detaching"),r.readyState==="open")try{r.endOfStream()}catch(i){this.warn(`onMediaDetaching: ${i.message} while calling endOfStream`)}this.onBufferReset(),r.removeEventListener("sourceopen",this._onMediaSourceOpen),r.removeEventListener("sourceended",this._onMediaSourceEnded),r.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(r.removeEventListener("startstreaming",this._onStartStreaming),r.removeEventListener("endstreaming",this._onEndStreaming)),e&&(e.removeEventListener("emptied",this._onMediaEmptied),n&&self.URL.revokeObjectURL(n),this.mediaSrc===n?(e.removeAttribute("src"),this.appendSource&&oI(e),e.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(w.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach(e=>{this.resetBuffer(e)}),this._initSourceBuffer()}resetBuffer(e){const r=this.sourceBuffer[e];try{if(r){var n;this.removeBufferListeners(e),this.sourceBuffer[e]=void 0,(n=this.mediaSource)!=null&&n.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(r)}}catch(i){this.warn(`onBufferReset ${e}`,i)}}onBufferCodecs(e,r){const n=this.getSourceBufferTypes().length,i=Object.keys(r);if(i.forEach(a=>{if(n){const l=this.tracks[a];if(l&&typeof l.buffer.changeType=="function"){var o;const{id:u,codec:c,levelCodec:d,container:h,metadata:f}=r[a],p=CC(l.codec,l.levelCodec),m=p==null?void 0:p.replace(aI,"$1");let g=CC(c,d);const v=(o=g)==null?void 0:o.replace(aI,"$1");if(g&&m!==v){a.slice(0,5)==="audio"&&(g=Um(g,this.appendSource));const b=`${h};codecs=${g}`;this.appendChangeType(a,b),this.log(`switching codec ${p} to ${g}`),this.tracks[a]={buffer:l.buffer,codec:c,container:h,levelCodec:d,metadata:f,id:u}}}}else this.pendingTracks[a]=r[a]}),n)return;const s=Math.max(this.bufferCodecEventsExpected-1,0);this.bufferCodecEventsExpected!==s&&(this.log(`${s} bufferCodec event(s) expected ${i.join(",")}`),this.bufferCodecEventsExpected=s),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks()}appendChangeType(e,r){const{operationQueue:n}=this,i={execute:()=>{const s=this.sourceBuffer[e];s&&(this.log(`changing ${e} sourceBuffer type to ${r}`),s.changeType(r)),n.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:s=>{this.warn(`Failed to change ${e} SourceBuffer type`,s)}};n.append(i,e,!!this.pendingTracks[e])}onBufferAppending(e,r){const{hls:n,operationQueue:i,tracks:s}=this,{data:a,type:o,frag:l,part:u,chunkMeta:c}=r,d=c.buffering[o],h=self.performance.now();d.start=h;const f=l.stats.buffering,p=u?u.stats.buffering:null;f.start===0&&(f.start=h),p&&p.start===0&&(p.start=h);const m=s.audio;let g=!1;o==="audio"&&(m==null?void 0:m.container)==="audio/mpeg"&&(g=!this.lastMpegAudioChunk||c.id===1||this.lastMpegAudioChunk.sn!==c.sn,this.lastMpegAudioChunk=c);const v=l.start,b={execute:()=>{if(d.executeStart=self.performance.now(),g){const y=this.sourceBuffer[o];if(y){const T=v-y.timestampOffset;Math.abs(T)>=.1&&(this.log(`Updating audio SourceBuffer timestampOffset to ${v} (delta: ${T}) sn: ${l.sn})`),y.timestampOffset=v)}}this.appendExecutor(a,o)},onStart:()=>{},onComplete:()=>{const y=self.performance.now();d.executeEnd=d.end=y,f.first===0&&(f.first=y),p&&p.first===0&&(p.first=y);const{sourceBuffer:T}=this,x={};for(const _ in T)x[_]=Zt.getBuffered(T[_]);this.appendErrors[o]=0,o==="audio"||o==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(w.BUFFER_APPENDED,{type:o,frag:l,part:u,chunkMeta:c,parent:l.type,timeRanges:x})},onError:y=>{const T={type:Ve.MEDIA_ERROR,parent:l.type,details:J.BUFFER_APPEND_ERROR,sourceBufferName:o,frag:l,part:u,chunkMeta:c,error:y,err:y,fatal:!1};if(y.code===DOMException.QUOTA_EXCEEDED_ERR)T.details=J.BUFFER_FULL_ERROR;else{const x=++this.appendErrors[o];T.details=J.BUFFER_APPEND_ERROR,this.warn(`Failed ${x}/${n.config.appendErrorMaxRetry} times to append segment in "${o}" sourceBuffer`),x>=n.config.appendErrorMaxRetry&&(T.fatal=!0)}n.trigger(w.ERROR,T)}};i.append(b,o,!!this.pendingTracks[o])}onBufferFlushing(e,r){const{operationQueue:n}=this,i=s=>({execute:this.removeExecutor.bind(this,s,r.startOffset,r.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(w.BUFFER_FLUSHED,{type:s})},onError:a=>{this.warn(`Failed to remove from ${s} SourceBuffer`,a)}});r.type?n.append(i(r.type),r.type):this.getSourceBufferTypes().forEach(s=>{n.append(i(s),s)})}onFragParsed(e,r){const{frag:n,part:i}=r,s=[],a=i?i.elementaryStreams:n.elementaryStreams;a[Mt.AUDIOVIDEO]?s.push("audiovideo"):(a[Mt.AUDIO]&&s.push("audio"),a[Mt.VIDEO]&&s.push("video"));const o=()=>{const l=self.performance.now();n.stats.buffering.end=l,i&&(i.stats.buffering.end=l);const u=i?i.stats:n.stats;this.hls.trigger(w.FRAG_BUFFERED,{frag:n,part:i,stats:u,id:n.type})};s.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${n.type} level: ${n.level} sn: ${n.sn}`),this.blockBuffers(o,s)}onFragChanged(e,r){this.trimBuffers()}onBufferEos(e,r){this.getSourceBufferTypes().reduce((i,s)=>{const a=this.sourceBuffer[s];return a&&(!r.type||r.type===s)&&(a.ending=!0,a.ended||(a.ended=!0,this.log(`${s} sourceBuffer now EOS`))),i&&!!(!a||a.ended)},!0)&&(this.log("Queueing mediaSource.endOfStream()"),this.blockBuffers(()=>{this.getSourceBufferTypes().forEach(s=>{const a=this.sourceBuffer[s];a&&(a.ending=!1)});const{mediaSource:i}=this;if(!i||i.readyState!=="open"){i&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${i.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),i.endOfStream()}))}onLevelUpdated(e,{details:r}){r.fragments.length&&(this.details=r,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}trimBuffers(){const{hls:e,details:r,media:n}=this;if(!n||r===null||!this.getSourceBufferTypes().length)return;const s=e.config,a=n.currentTime,o=r.levelTargetDuration,l=r.live&&s.liveBackBufferLength!==null?s.liveBackBufferLength:s.backBufferLength;if(xe(l)&&l>0){const u=Math.max(l,o),c=Math.floor(a/o)*o-u;this.flushBackBuffer(a,o,c)}if(xe(s.frontBufferFlushThreshold)&&s.frontBufferFlushThreshold>0){const u=Math.max(s.maxBufferLength,s.frontBufferFlushThreshold),c=Math.max(u,o),d=Math.floor(a/o)*o+c;this.flushFrontBuffer(a,o,d)}}flushBackBuffer(e,r,n){const{details:i,sourceBuffer:s}=this;this.getSourceBufferTypes().forEach(o=>{const l=s[o];if(l){const u=Zt.getBuffered(l);if(u.length>0&&n>u.start(0)){if(this.hls.trigger(w.BACK_BUFFER_REACHED,{bufferEnd:n}),i!=null&&i.live)this.hls.trigger(w.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n});else if(l.ended&&u.end(u.length-1)-e<r*2){this.log(`Cannot flush ${o} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(w.BUFFER_FLUSHING,{startOffset:0,endOffset:n,type:o})}}})}flushFrontBuffer(e,r,n){const{sourceBuffer:i}=this;this.getSourceBufferTypes().forEach(a=>{const o=i[a];if(o){const l=Zt.getBuffered(o),u=l.length;if(u<2)return;const c=l.start(u-1),d=l.end(u-1);if(n>c||e>=c&&e<=d)return;if(o.ended&&e-d<2*r){this.log(`Cannot flush ${a} front buffer while SourceBuffer is in ended state`);return}this.hls.trigger(w.BUFFER_FLUSHING,{startOffset:c,endOffset:1/0,type:a})}})}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||this.mediaSource.readyState!=="open")return;const{details:e,hls:r,media:n,mediaSource:i}=this,s=e.fragments[0].start+e.totalduration,a=n.duration,o=xe(i.duration)?i.duration:0;e.live&&r.config.liveDurationInfinity?(i.duration=1/0,this.updateSeekableRange(e)):(s>o&&s>a||!xe(a))&&(this.log(`Updating Media Source duration to ${s.toFixed(3)}`),i.duration=s)}updateSeekableRange(e){const r=this.mediaSource,n=e.fragments;if(n.length&&e.live&&r!=null&&r.setLiveSeekableRange){const s=Math.max(0,n[0].start),a=Math.max(s,s+e.totalduration);this.log(`Media Source duration is set to ${r.duration}. Setting seekable range to ${s}-${a}.`),r.setLiveSeekableRange(s,a)}}checkPendingTracks(){const{bufferCodecEventsExpected:e,operationQueue:r,pendingTracks:n}=this,i=Object.keys(n).length;if(i&&(!e||i===2||"audiovideo"in n)){this.createSourceBuffers(n),this.pendingTracks={};const s=this.getSourceBufferTypes();if(s.length)this.hls.trigger(w.BUFFER_CREATED,{tracks:this.tracks}),s.forEach(a=>{r.executeNext(a)});else{const a=new Error("could not create source buffer for media codec(s)");this.hls.trigger(w.ERROR,{type:Ve.MEDIA_ERROR,details:J.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:a,reason:a.message})}}}createSourceBuffers(e){const{sourceBuffer:r,mediaSource:n}=this;if(!n)throw Error("createSourceBuffers called when mediaSource was null");for(const s in e)if(!r[s]){var i;const a=e[s];if(!a)throw Error(`source buffer exists for track ${s}, however track does not`);let o=((i=a.levelCodec)==null?void 0:i.indexOf(","))===-1?a.levelCodec:a.codec;o&&s.slice(0,5)==="audio"&&(o=Um(o,this.appendSource));const l=`${a.container};codecs=${o}`;this.log(`creating sourceBuffer(${l})`);try{const u=r[s]=n.addSourceBuffer(l),c=s;this.addBufferListener(c,"updatestart",this._onSBUpdateStart),this.addBufferListener(c,"updateend",this._onSBUpdateEnd),this.addBufferListener(c,"error",this._onSBUpdateError),this.appendSource&&this.addBufferListener(c,"bufferedchange",(d,h)=>{const f=h.removedRanges;f!=null&&f.length&&this.hls.trigger(w.BUFFER_FLUSHED,{type:s})}),this.tracks[s]={buffer:u,codec:o,container:a.container,levelCodec:a.levelCodec,metadata:a.metadata,id:a.id}}catch(u){this.error(`error while trying to add sourceBuffer: ${u.message}`),this.hls.trigger(w.ERROR,{type:Ve.MEDIA_ERROR,details:J.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:u,sourceBufferName:s,mimeType:l})}}}get mediaSrc(){var e,r;const n=((e=this.media)==null||(r=e.querySelector)==null?void 0:r.call(e,"source"))||this.media;return n==null?void 0:n.src}_onSBUpdateStart(e){const{operationQueue:r}=this;r.current(e).onStart()}_onSBUpdateEnd(e){var r;if(((r=this.mediaSource)==null?void 0:r.readyState)==="closed"){this.resetBuffer(e);return}const{operationQueue:n}=this;n.current(e).onComplete(),n.shiftAndExecuteNext(e)}_onSBUpdateError(e,r){var n;const i=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(n=this.mediaSource)==null?void 0:n.readyState}`);this.error(`${i}`,r),this.hls.trigger(w.ERROR,{type:Ve.MEDIA_ERROR,details:J.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:i,fatal:!1});const s=this.operationQueue.current(e);s&&s.onError(i)}removeExecutor(e,r,n){const{media:i,mediaSource:s,operationQueue:a,sourceBuffer:o}=this,l=o[e];if(!i||!s||!l){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),a.shiftAndExecuteNext(e);return}const u=xe(i.duration)?i.duration:1/0,c=xe(s.duration)?s.duration:1/0,d=Math.max(0,r),h=Math.min(n,u,c);h>d&&(!l.ending||l.ended)?(l.ended=!1,this.log(`Removing [${d},${h}] from the ${e} SourceBuffer`),l.remove(d,h)):a.shiftAndExecuteNext(e)}appendExecutor(e,r){const n=this.sourceBuffer[r];if(!n){if(!this.pendingTracks[r])throw new Error(`Attempting to append to the ${r} SourceBuffer, but it does not exist`);return}n.ended=!1,n.appendBuffer(e)}blockBuffers(e,r=this.getSourceBufferTypes()){if(!r.length){this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);return}const{operationQueue:n}=this,i=r.map(s=>n.appendBlocker(s));Promise.all(i).then(()=>{e(),r.forEach(s=>{const a=this.sourceBuffer[s];a!=null&&a.updating||n.shiftAndExecuteNext(s)})})}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(e,r,n){const i=this.sourceBuffer[e];if(!i)return;const s=n.bind(this,e);this.listeners[e].push({event:r,listener:s}),i.addEventListener(r,s)}removeBufferListeners(e){const r=this.sourceBuffer[e];r&&this.listeners[e].forEach(n=>{r.removeEventListener(n.event,n.listener)})}}function oI(t){const e=t.querySelectorAll("source");[].slice.call(e).forEach(r=>{t.removeChild(r)})}function ate(t,e){const r=self.document.createElement("source");r.type="video/mp4",r.src=e,t.appendChild(r)}const ote={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},aN=t=>String.fromCharCode(ote[t]||t),Ai=15,Is=100,lte={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},ute={17:2,18:4,21:6,22:8,23:10,19:13,20:15},cte={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},dte={25:2,26:4,29:6,30:8,31:10,27:13,28:15},hte=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class fte{constructor(){this.time=null,this.verboseLevel=0}log(e,r){if(this.verboseLevel>=e){const n=typeof r=="function"?r():r;G.log(`${this.time} [${e}] ${n}`)}}}const uo=function(e){const r=[];for(let n=0;n<e.length;n++)r.push(e[n].toString(16));return r};class oN{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const r=["foreground","underline","italics","background","flash"];for(let n=0;n<r.length;n++){const i=r[n];e.hasOwnProperty(i)&&(this[i]=e[i])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class pte{constructor(){this.uchar=" ",this.penState=new oN}reset(){this.uchar=" ",this.penState.reset()}setChar(e,r){this.uchar=e,this.penState.copy(r)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class mte{constructor(e){this.chars=[],this.pos=0,this.currPenState=new oN,this.cueStartTime=null,this.logger=void 0;for(let r=0;r<Is;r++)this.chars.push(new pte);this.logger=e}equals(e){for(let r=0;r<Is;r++)if(!this.chars[r].equals(e.chars[r]))return!1;return!0}copy(e){for(let r=0;r<Is;r++)this.chars[r].copy(e.chars[r])}isEmpty(){let e=!0;for(let r=0;r<Is;r++)if(!this.chars[r].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Is&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Is)}moveCursor(e){const r=this.pos+e;if(e>1)for(let n=this.pos+1;n<r+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(r)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const r=aN(e);if(this.pos>=Is){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+r+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(r,this.currPenState),this.moveCursor(1)}clearFromPos(e){let r;for(r=e;r<Is;r++)this.chars[r].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let r=!0;for(let n=0;n<Is;n++){const i=this.chars[n].uchar;i!==" "&&(r=!1),e.push(i)}return r?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class Cb{constructor(e){this.rows=[],this.currRow=Ai-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let r=0;r<Ai;r++)this.rows.push(new mte(e));this.logger=e}reset(){for(let e=0;e<Ai;e++)this.rows[e].clear();this.currRow=Ai-1}equals(e){let r=!0;for(let n=0;n<Ai;n++)if(!this.rows[n].equals(e.rows[n])){r=!1;break}return r}copy(e){for(let r=0;r<Ai;r++)this.rows[r].copy(e.rows[r])}isEmpty(){let e=!0;for(let r=0;r<Ai;r++)if(!this.rows[r].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+JSON.stringify(e));let r=e.row-1;if(this.nrRollUpRows&&r<this.nrRollUpRows-1&&(r=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==r){for(let o=0;o<Ai;o++)this.rows[o].clear();const s=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){const o=a.rows[s].cueStartTime,l=this.logger.time;if(o!==null&&l!==null&&o<l)for(let u=0;u<this.nrRollUpRows;u++)this.rows[r-this.nrRollUpRows+u+1].copy(a.rows[s+u])}}this.currRow=r;const n=this.rows[this.currRow];if(e.indent!==null){const s=e.indent,a=Math.max(s-1,0);n.setCursor(e.indent),e.color=n.chars[a].penState.foreground}const i={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(i)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,r=this.rows.splice(e,1)[0];r.clear(),this.rows.splice(this.currRow,0,r),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const r=[];let n="",i=-1;for(let s=0;s<Ai;s++){const a=this.rows[s].getTextString();a&&(i=s+1,e?r.push("Row "+i+": '"+a+"'"):r.push(a.trim()))}return r.length>0&&(e?n="["+r.join(" | ")+"]":n=r.join(`
`)),n}getTextAndFormat(){return this.rows}}class lI{constructor(e,r,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=r,this.mode=null,this.verbose=0,this.displayedMemory=new Cb(n),this.nonDisplayedMemory=new Cb(n),this.lastOutputScreen=new Cb(n),this.currRollUpRow=this.displayedMemory.rows[Ai-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[Ai-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let n=0;n<e.length;n++)this.writeScreen.insertChar(e[n]);const r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>r+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const r={flash:!1};if(r.underline=e%2===1,r.italics=e>=46,r.italics)r.foreground="white";else{const n=Math.floor(e/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];r.foreground=i[n]}this.logger.log(2,"MIDROW: "+JSON.stringify(r)),this.writeScreen.setPen(r)}outputDataUpdate(e=!1){const r=this.logger.time;r!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=r:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,r,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:r),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class uI{constructor(e,r,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=vte(),this.logger=void 0;const i=this.logger=new fte;this.channels=[null,new lI(e,r,i),new lI(e+1,n,i)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,r){this.channels[e].setHandler(r)}addData(e,r){this.logger.time=e;for(let n=0;n<r.length;n+=2){const i=r[n]&127,s=r[n+1]&127;let a=!1,o=null;if(i===0&&s===0)continue;this.logger.log(3,()=>"["+uo([r[n],r[n+1]])+"] -> ("+uo([i,s])+")");const l=this.cmdHistory;if(i>=16&&i<=31){if(gte(i,s,l)){Lf(null,null,l),this.logger.log(3,()=>"Repeated command ("+uo([i,s])+") is dropped");continue}Lf(i,s,this.cmdHistory),a=this.parseCmd(i,s),a||(a=this.parseMidrow(i,s)),a||(a=this.parsePAC(i,s)),a||(a=this.parseBackgroundAttributes(i,s))}else Lf(null,null,l);if(!a&&(o=this.parseChars(i,s),o)){const c=this.currentChannel;c&&c>0?this.channels[c].insertChars(o):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!a&&!o&&this.logger.log(2,()=>"Couldn't parse cleaned data "+uo([i,s])+" orig: "+uo([r[n],r[n+1]]))}}parseCmd(e,r){const n=(e===20||e===28||e===21||e===29)&&r>=32&&r<=47,i=(e===23||e===31)&&r>=33&&r<=35;if(!(n||i))return!1;const s=e===20||e===21||e===23?1:2,a=this.channels[s];return e===20||e===21||e===28||e===29?r===32?a.ccRCL():r===33?a.ccBS():r===34?a.ccAOF():r===35?a.ccAON():r===36?a.ccDER():r===37?a.ccRU(2):r===38?a.ccRU(3):r===39?a.ccRU(4):r===40?a.ccFON():r===41?a.ccRDC():r===42?a.ccTR():r===43?a.ccRTD():r===44?a.ccEDM():r===45?a.ccCR():r===46?a.ccENM():r===47&&a.ccEOC():a.ccTO(r-32),this.currentChannel=s,!0}parseMidrow(e,r){let n=0;if((e===17||e===25)&&r>=32&&r<=47){if(e===17?n=1:n=2,n!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const i=this.channels[n];return i?(i.ccMIDROW(r),this.logger.log(3,()=>"MIDROW ("+uo([e,r])+")"),!0):!1}return!1}parsePAC(e,r){let n;const i=(e>=17&&e<=23||e>=25&&e<=31)&&r>=64&&r<=127,s=(e===16||e===24)&&r>=64&&r<=95;if(!(i||s))return!1;const a=e<=23?1:2;r>=64&&r<=95?n=a===1?lte[e]:cte[e]:n=a===1?ute[e]:dte[e];const o=this.channels[a];return o?(o.setPAC(this.interpretPAC(n,r)),this.currentChannel=a,!0):!1}interpretPAC(e,r){let n;const i={color:null,italics:!1,indent:null,underline:!1,row:e};return r>95?n=r-96:n=r-64,i.underline=(n&1)===1,n<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(i.italics=!0,i.color="white"):i.indent=Math.floor((n-16)/2)*4,i}parseChars(e,r){let n,i=null,s=null;if(e>=25?(n=2,s=e-8):(n=1,s=e),s>=17&&s<=19){let a;s===17?a=r+80:s===18?a=r+112:a=r+144,this.logger.log(2,()=>"Special char '"+aN(a)+"' in channel "+n),i=[a]}else e>=32&&e<=127&&(i=r===0?[e]:[e,r]);return i&&this.logger.log(3,()=>"Char codes =  "+uo(i).join(",")),i}parseBackgroundAttributes(e,r){const n=(e===16||e===24)&&r>=32&&r<=47,i=(e===23||e===31)&&r>=45&&r<=47;if(!(n||i))return!1;let s;const a={};e===16||e===24?(s=Math.floor((r-32)/2),a.background=hte[s],r%2===1&&(a.background=a.background+"_semi")):r===45?a.background="transparent":(a.foreground="black",r===47&&(a.underline=!0));const o=e<=23?1:2;return this.channels[o].setBkgData(a),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const r=this.channels[e];r&&r.reset()}Lf(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let r=0;r<this.channels.length;r++){const n=this.channels[r];n&&n.cueSplitAtTime(e)}}}function Lf(t,e,r){r.a=t,r.b=e}function gte(t,e,r){return r.a===t&&r.b===e}function vte(){return{a:null,b:null}}class Df{constructor(e,r){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=r}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,r,n){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=r,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var Gx=function(){if(ec!=null&&ec.VTTCue)return self.VTTCue;const t=["","lr","rl"],e=["start","middle","end","left","right"];function r(o,l){if(typeof l!="string"||!Array.isArray(o))return!1;const u=l.toLowerCase();return~o.indexOf(u)?u:!1}function n(o){return r(t,o)}function i(o){return r(e,o)}function s(o,...l){let u=1;for(;u<arguments.length;u++){const c=arguments[u];for(const d in c)o[d]=c[d]}return o}function a(o,l,u){const c=this,d={enumerable:!0};c.hasBeenReset=!1;let h="",f=!1,p=o,m=l,g=u,v=null,b="",y=!0,T="auto",x="start",_=50,S="middle",A=50,k="middle";Object.defineProperty(c,"id",s({},d,{get:function(){return h},set:function(I){h=""+I}})),Object.defineProperty(c,"pauseOnExit",s({},d,{get:function(){return f},set:function(I){f=!!I}})),Object.defineProperty(c,"startTime",s({},d,{get:function(){return p},set:function(I){if(typeof I!="number")throw new TypeError("Start time must be set to a number.");p=I,this.hasBeenReset=!0}})),Object.defineProperty(c,"endTime",s({},d,{get:function(){return m},set:function(I){if(typeof I!="number")throw new TypeError("End time must be set to a number.");m=I,this.hasBeenReset=!0}})),Object.defineProperty(c,"text",s({},d,{get:function(){return g},set:function(I){g=""+I,this.hasBeenReset=!0}})),Object.defineProperty(c,"region",s({},d,{get:function(){return v},set:function(I){v=I,this.hasBeenReset=!0}})),Object.defineProperty(c,"vertical",s({},d,{get:function(){return b},set:function(I){const C=n(I);if(C===!1)throw new SyntaxError("An invalid or illegal string was specified.");b=C,this.hasBeenReset=!0}})),Object.defineProperty(c,"snapToLines",s({},d,{get:function(){return y},set:function(I){y=!!I,this.hasBeenReset=!0}})),Object.defineProperty(c,"line",s({},d,{get:function(){return T},set:function(I){if(typeof I!="number"&&I!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");T=I,this.hasBeenReset=!0}})),Object.defineProperty(c,"lineAlign",s({},d,{get:function(){return x},set:function(I){const C=i(I);if(!C)throw new SyntaxError("An invalid or illegal string was specified.");x=C,this.hasBeenReset=!0}})),Object.defineProperty(c,"position",s({},d,{get:function(){return _},set:function(I){if(I<0||I>100)throw new Error("Position must be between 0 and 100.");_=I,this.hasBeenReset=!0}})),Object.defineProperty(c,"positionAlign",s({},d,{get:function(){return S},set:function(I){const C=i(I);if(!C)throw new SyntaxError("An invalid or illegal string was specified.");S=C,this.hasBeenReset=!0}})),Object.defineProperty(c,"size",s({},d,{get:function(){return A},set:function(I){if(I<0||I>100)throw new Error("Size must be between 0 and 100.");A=I,this.hasBeenReset=!0}})),Object.defineProperty(c,"align",s({},d,{get:function(){return k},set:function(I){const C=i(I);if(!C)throw new SyntaxError("An invalid or illegal string was specified.");k=C,this.hasBeenReset=!0}})),c.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a}();class bte{decode(e,r){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function lN(t){function e(n,i,s,a){return(n|0)*3600+(i|0)*60+(s|0)+parseFloat(a||0)}const r=t.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return r?parseFloat(r[2])>59?e(r[2],r[3],0,r[4]):e(r[1],r[2],r[3],r[4]):null}class yte{constructor(){this.values=Object.create(null)}set(e,r){!this.get(e)&&r!==""&&(this.values[e]=r)}get(e,r,n){return n?this.has(e)?this.values[e]:r[n]:this.has(e)?this.values[e]:r}has(e){return e in this.values}alt(e,r,n){for(let i=0;i<n.length;++i)if(r===n[i]){this.set(e,r);break}}integer(e,r){/^-?\d+$/.test(r)&&this.set(e,parseInt(r,10))}percent(e,r){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(r)){const n=parseFloat(r);if(n>=0&&n<=100)return this.set(e,n),!0}return!1}}function uN(t,e,r,n){const i=n?t.split(n):[t];for(const s in i){if(typeof i[s]!="string")continue;const a=i[s].split(r);if(a.length!==2)continue;const o=a[0],l=a[1];e(o,l)}}const T1=new Gx(0,0,""),Of=T1.align==="middle"?"middle":"center";function Ete(t,e,r){const n=t;function i(){const o=lN(t);if(o===null)throw new Error("Malformed timestamp: "+n);return t=t.replace(/^[^\sa-zA-Z-]+/,""),o}function s(o,l){const u=new yte;uN(o,function(h,f){let p;switch(h){case"region":for(let m=r.length-1;m>=0;m--)if(r[m].id===f){u.set(h,r[m].region);break}break;case"vertical":u.alt(h,f,["rl","lr"]);break;case"line":p=f.split(","),u.integer(h,p[0]),u.percent(h,p[0])&&u.set("snapToLines",!1),u.alt(h,p[0],["auto"]),p.length===2&&u.alt("lineAlign",p[1],["start",Of,"end"]);break;case"position":p=f.split(","),u.percent(h,p[0]),p.length===2&&u.alt("positionAlign",p[1],["start",Of,"end","line-left","line-right","auto"]);break;case"size":u.percent(h,f);break;case"align":u.alt(h,f,["start",Of,"end","left","right"]);break}},/:/,/\s/),l.region=u.get("region",null),l.vertical=u.get("vertical","");let c=u.get("line","auto");c==="auto"&&T1.line===-1&&(c=-1),l.line=c,l.lineAlign=u.get("lineAlign","start"),l.snapToLines=u.get("snapToLines",!0),l.size=u.get("size",100),l.align=u.get("align",Of);let d=u.get("position","auto");d==="auto"&&T1.position===50&&(d=l.align==="start"||l.align==="left"?0:l.align==="end"||l.align==="right"?100:50),l.position=d}function a(){t=t.replace(/^\s+/,"")}if(a(),e.startTime=i(),a(),t.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+n);t=t.slice(3),a(),e.endTime=i(),a(),s(t,e)}function cN(t){return t.replace(/<br(?: \/)?>/gi,`
`)}class _te{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new bte,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const r=this;e&&(r.buffer+=r.decoder.decode(e,{stream:!0}));function n(){let s=r.buffer,a=0;for(s=cN(s);a<s.length&&s[a]!=="\r"&&s[a]!==`
`;)++a;const o=s.slice(0,a);return s[a]==="\r"&&++a,s[a]===`
`&&++a,r.buffer=s.slice(a),o}function i(s){uN(s,function(a,o){},/:/)}try{let s="";if(r.state==="INITIAL"){if(!/\r\n|\n/.test(r.buffer))return this;s=n();const o=s.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!(o!=null&&o[0]))throw new Error("Malformed WebVTT signature.");r.state="HEADER"}let a=!1;for(;r.buffer;){if(!/\r\n|\n/.test(r.buffer))return this;switch(a?a=!1:s=n(),r.state){case"HEADER":/:/.test(s)?i(s):s||(r.state="ID");continue;case"NOTE":s||(r.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){r.state="NOTE";break}if(!s)continue;if(r.cue=new Gx(0,0,""),r.state="CUE",s.indexOf("-->")===-1){r.cue.id=s;continue}case"CUE":if(!r.cue){r.state="BADCUE";continue}try{Ete(s,r.cue,r.regionList)}catch{r.cue=null,r.state="BADCUE";continue}r.state="CUETEXT";continue;case"CUETEXT":{const o=s.indexOf("-->")!==-1;if(!s||o&&(a=!0)){r.oncue&&r.cue&&r.oncue(r.cue),r.cue=null,r.state="ID";continue}if(r.cue===null)continue;r.cue.text&&(r.cue.text+=`
`),r.cue.text+=s}continue;case"BADCUE":s||(r.state="ID")}}}catch{r.state==="CUETEXT"&&r.cue&&r.oncue&&r.oncue(r.cue),r.cue=null,r.state=r.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(r){e.onparsingerror&&e.onparsingerror(r)}return e.onflush&&e.onflush(),this}}const Tte=/\r\n|\n\r|\n|\r/g,Ib=function(e,r,n=0){return e.slice(n,n+r.length)===r},xte=function(e){let r=parseInt(e.slice(-3));const n=parseInt(e.slice(-6,-4)),i=parseInt(e.slice(-9,-7)),s=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!xe(r)||!xe(n)||!xe(i)||!xe(s))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return r+=1e3*n,r+=60*1e3*i,r+=60*60*1e3*s,r},kb=function(e){let r=5381,n=e.length;for(;n;)r=r*33^e.charCodeAt(--n);return(r>>>0).toString()};function Kx(t,e,r){return kb(t.toString())+kb(e.toString())+kb(r)}const Ste=function(e,r,n){let i=e[r],s=e[i.prevCC];if(!s||!s.new&&i.new){e.ccOffset=e.presentationOffset=i.start,i.new=!1;return}for(;(a=s)!=null&&a.new;){var a;e.ccOffset+=i.start-s.start,i.new=!1,i=s,s=e[i.prevCC]}e.presentationOffset=n};function wte(t,e,r,n,i,s,a){const o=new _te,l=Es(new Uint8Array(t)).trim().replace(Tte,`
`).split(`
`),u=[],c=e?Hee(e.baseTime,e.timescale):0;let d="00:00.000",h=0,f=0,p,m=!0;o.oncue=function(g){const v=r[n];let b=r.ccOffset;const y=(h-c)/9e4;if(v!=null&&v.new&&(f!==void 0?b=r.ccOffset=v.start:Ste(r,n,y)),y){if(!e){p=new Error("Missing initPTS for VTT MPEGTS");return}b=y-r.presentationOffset}const T=g.endTime-g.startTime,x=bi((g.startTime+b-f)*9e4,i*9e4)/9e4;g.startTime=Math.max(x,0),g.endTime=Math.max(x+T,0);const _=g.text.trim();g.text=decodeURIComponent(encodeURIComponent(_)),g.id||(g.id=Kx(g.startTime,g.endTime,_)),g.endTime>0&&u.push(g)},o.onparsingerror=function(g){p=g},o.onflush=function(){if(p){a(p);return}s(u)},l.forEach(g=>{if(m)if(Ib(g,"X-TIMESTAMP-MAP=")){m=!1,g.slice(16).split(",").forEach(v=>{Ib(v,"LOCAL:")?d=v.slice(6):Ib(v,"MPEGTS:")&&(h=parseInt(v.slice(7)))});try{f=xte(d)/1e3}catch(v){p=v}return}else g===""&&(m=!1);o.parse(g+`
`)}),o.flush()}const Lb="stpp.ttml.im1t",dN=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,hN=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,Ate={left:"start",center:"center",right:"end",start:"start",end:"end"};function cI(t,e,r,n){const i=Xe(new Uint8Array(t),["mdat"]);if(i.length===0){n(new Error("Could not parse IMSC1 mdat"));return}const s=i.map(o=>Es(o)),a=jee(e.baseTime,1,e.timescale);try{s.forEach(o=>r(Rte(o,a)))}catch(o){n(o)}}function Rte(t,e){const i=new DOMParser().parseFromString(t,"text/xml").getElementsByTagName("tt")[0];if(!i)throw new Error("Invalid ttml");const s={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},a=Object.keys(s).reduce((d,h)=>(d[h]=i.getAttribute(`ttp:${h}`)||s[h],d),{}),o=i.getAttribute("xml:space")!=="preserve",l=dI(Db(i,"styling","style")),u=dI(Db(i,"layout","region")),c=Db(i,"body","[begin]");return[].map.call(c,d=>{const h=fN(d,o);if(!h||!d.hasAttribute("begin"))return null;const f=Mb(d.getAttribute("begin"),a),p=Mb(d.getAttribute("dur"),a);let m=Mb(d.getAttribute("end"),a);if(f===null)throw hI(d);if(m===null){if(p===null)throw hI(d);m=f+p}const g=new Gx(f-e,m-e,h);g.id=Kx(g.startTime,g.endTime,g.text);const v=u[d.getAttribute("region")],b=l[d.getAttribute("style")],y=Cte(v,b,l),{textAlign:T}=y;if(T){const x=Ate[T];x&&(g.lineAlign=x),g.align=T}return Cr(g,y),g}).filter(d=>d!==null)}function Db(t,e,r){const n=t.getElementsByTagName(e)[0];return n?[].slice.call(n.querySelectorAll(r)):[]}function dI(t){return t.reduce((e,r)=>{const n=r.getAttribute("xml:id");return n&&(e[n]=r),e},{})}function fN(t,e){return[].slice.call(t.childNodes).reduce((r,n,i)=>{var s;return n.nodeName==="br"&&i?r+`
`:(s=n.childNodes)!=null&&s.length?fN(n,e):e?r+n.textContent.trim().replace(/\s+/g," "):r+n.textContent},"")}function Cte(t,e,r){const n="http://www.w3.org/ns/ttml#styling";let i=null;const s=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],a=t!=null&&t.hasAttribute("style")?t.getAttribute("style"):null;return a&&r.hasOwnProperty(a)&&(i=r[a]),s.reduce((o,l)=>{const u=Ob(e,n,l)||Ob(t,n,l)||Ob(i,n,l);return u&&(o[l]=u),o},{})}function Ob(t,e,r){return t&&t.hasAttributeNS(e,r)?t.getAttributeNS(e,r):null}function hI(t){return new Error(`Could not parse ttml timestamp ${t}`)}function Mb(t,e){if(!t)return null;let r=lN(t);return r===null&&(dN.test(t)?r=Ite(t,e):hN.test(t)&&(r=kte(t,e))),r}function Ite(t,e){const r=dN.exec(t),n=(r[4]|0)+(r[5]|0)/e.subFrameRate;return(r[1]|0)*3600+(r[2]|0)*60+(r[3]|0)+n/e.frameRate}function kte(t,e){const r=hN.exec(t),n=Number(r[1]);switch(r[2]){case"h":return n*3600;case"m":return n*60;case"ms":return n*1e3;case"f":return n/e.frameRate;case"t":return n/e.tickRate}return n}class Lte{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=pI(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(w.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(w.MANIFEST_LOADING,this.onManifestLoading,this),e.on(w.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(w.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(w.FRAG_LOADING,this.onFragLoading,this),e.on(w.FRAG_LOADED,this.onFragLoaded,this),e.on(w.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(w.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(w.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(w.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(w.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(w.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(w.MANIFEST_LOADING,this.onManifestLoading,this),e.off(w.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(w.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(w.FRAG_LOADING,this.onFragLoading,this),e.off(w.FRAG_LOADED,this.onFragLoaded,this),e.off(w.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(w.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(w.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(w.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(w.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){if(this.config.enableCEA708Captions&&(!this.cea608Parser1||!this.cea608Parser2)){const e=new Df(this,"textTrack1"),r=new Df(this,"textTrack2"),n=new Df(this,"textTrack3"),i=new Df(this,"textTrack4");this.cea608Parser1=new uI(1,e,r),this.cea608Parser2=new uI(3,n,i)}}addCues(e,r,n,i,s){let a=!1;for(let o=s.length;o--;){const l=s[o],u=Dte(l[0],l[1],r,n);if(u>=0&&(l[0]=Math.min(l[0],r),l[1]=Math.max(l[1],n),a=!0,u/(n-r)>.5))return}if(a||s.push([r,n]),this.config.renderTextTracksNatively){const o=this.captionsTracks[e];this.Cues.newCue(o,r,n,i)}else{const o=this.Cues.newCue(null,r,n,i);this.hls.trigger(w.CUES_PARSED,{type:"captions",cues:o,track:e})}}onInitPtsFound(e,{frag:r,id:n,initPTS:i,timescale:s}){const{unparsedVttFrags:a}=this;n==="main"&&(this.initPTS[r.cc]={baseTime:i,timescale:s}),a.length&&(this.unparsedVttFrags=[],a.forEach(o=>{this.onFragLoaded(w.FRAG_LOADED,o)}))}getExistingTrack(e,r){const{media:n}=this;if(n)for(let i=0;i<n.textTracks.length;i++){const s=n.textTracks[i];if(fI(s,{name:e,lang:r,attrs:{}}))return s}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:r,captionsTracks:n,media:i}=this,{label:s,languageCode:a}=r[e],o=this.getExistingTrack(s,a);if(o)n[e]=o,Cu(n[e]),OP(n[e],i);else{const l=this.createTextTrack("captions",s,a);l&&(l[e]=!0,n[e]=l)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const r=this.captionsProperties[e];if(!r)return;const n=r.label,i={_id:e,label:n,kind:"captions",default:r.media?!!r.media.default:!1,closedCaptions:r.media};this.nonNativeCaptionsTracks[e]=i,this.hls.trigger(w.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[i]})}createTextTrack(e,r,n){const i=this.media;if(i)return i.addTextTrack(e,r,n)}onMediaAttaching(e,r){this.media=r.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:e}=this;Object.keys(e).forEach(r=>{Cu(e[r]),delete e[r]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=pI(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const r=e.textTracks;if(r)for(let n=0;n<r.length;n++)Cu(r[n])}onSubtitleTracksUpdated(e,r){const n=r.subtitleTracks||[],i=n.some(s=>s.textCodec===Lb);if(this.config.enableWebVTT||i&&this.config.enableIMSC1){if(sN(this.tracks,n)){this.tracks=n;return}if(this.textTracks=[],this.tracks=n,this.config.renderTextTracksNatively){const a=this.media,o=a?j0(a.textTracks):null;if(this.tracks.forEach((l,u)=>{let c;if(o){let d=null;for(let h=0;h<o.length;h++)if(o[h]&&fI(o[h],l)){d=o[h],o[h]=null;break}d&&(c=d)}if(c)Cu(c);else{const d=pN(l);c=this.createTextTrack(d,l.name,l.lang),c&&(c.mode="disabled")}c&&this.textTracks.push(c)}),o!=null&&o.length){const l=o.filter(u=>u!==null).map(u=>u.label);l.length&&G.warn(`Media element contains unused subtitle tracks: ${l.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const a=this.tracks.map(o=>({label:o.name,kind:o.type.toLowerCase(),default:o.default,subtitleTrack:o}));this.hls.trigger(w.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:a})}}}onManifestLoaded(e,r){this.config.enableCEA708Captions&&r.captions&&r.captions.forEach(n=>{const i=/(?:CC|SERVICE)([1-4])/.exec(n.instreamId);if(!i)return;const s=`textTrack${i[1]}`,a=this.captionsProperties[s];a&&(a.label=n.name,n.lang&&(a.languageCode=n.lang),a.media=n)})}closedCaptionsForLevel(e){const r=this.hls.levels[e.level];return r==null?void 0:r.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,r){if(this.enabled&&r.frag.type===je.MAIN){var n,i;const{cea608Parser1:s,cea608Parser2:a,lastSn:o}=this,{cc:l,sn:u}=r.frag,c=(n=(i=r.part)==null?void 0:i.index)!=null?n:-1;s&&a&&(u!==o+1||u===o&&c!==this.lastPartIndex+1||l!==this.lastCc)&&(s.reset(),a.reset()),this.lastCc=l,this.lastSn=u,this.lastPartIndex=c}}onFragLoaded(e,r){const{frag:n,payload:i}=r;if(n.type===je.SUBTITLE)if(i.byteLength){const s=n.decryptdata,a="stats"in r;if(s==null||!s.encrypted||a){const o=this.tracks[n.level],l=this.vttCCs;l[n.cc]||(l[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),o&&o.textCodec===Lb?this._parseIMSC1(n,i):this._parseVTTs(r)}}else this.hls.trigger(w.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,r){const n=this.hls;cI(r,this.initPTS[e.cc],i=>{this._appendCues(i,e.level),n.trigger(w.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},i=>{G.log(`Failed to parse IMSC1: ${i}`),n.trigger(w.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:i})})}_parseVTTs(e){var r;const{frag:n,payload:i}=e,{initPTS:s,unparsedVttFrags:a}=this,o=s.length-1;if(!s[n.cc]&&o===-1){a.push(e);return}const l=this.hls,u=(r=n.initSegment)!=null&&r.data?Ei(n.initSegment.data,new Uint8Array(i)):i;wte(u,this.initPTS[n.cc],this.vttCCs,n.cc,n.start,c=>{this._appendCues(c,n.level),l.trigger(w.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},c=>{const d=c.message==="Missing initPTS for VTT MPEGTS";d?a.push(e):this._fallbackToIMSC1(n,i),G.log(`Failed to parse VTT cue: ${c}`),!(d&&o>n.cc)&&l.trigger(w.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:c})})}_fallbackToIMSC1(e,r){const n=this.tracks[e.level];n.textCodec||cI(r,this.initPTS[e.cc],()=>{n.textCodec=Lb,this._parseIMSC1(e,r)},()=>{n.textCodec="wvtt"})}_appendCues(e,r){const n=this.hls;if(this.config.renderTextTracksNatively){const i=this.textTracks[r];if(!i||i.mode==="disabled")return;e.forEach(s=>MP(i,s))}else{const i=this.tracks[r];if(!i)return;const s=i.default?"default":"subtitles"+r;n.trigger(w.CUES_PARSED,{type:"subtitles",cues:e,track:s})}}onFragDecrypted(e,r){const{frag:n}=r;n.type===je.SUBTITLE&&this.onFragLoaded(w.FRAG_LOADED,r)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,r){this.initCea608Parsers();const{cea608Parser1:n,cea608Parser2:i}=this;if(!this.enabled||!n||!i)return;const{frag:s,samples:a}=r;if(!(s.type===je.MAIN&&this.closedCaptionsForLevel(s)==="NONE"))for(let o=0;o<a.length;o++){const l=a[o].bytes;if(l){const u=this.extractCea608Data(l);n.addData(a[o].pts,u[0]),i.addData(a[o].pts,u[1])}}}onBufferFlushing(e,{startOffset:r,endOffset:n,endOffsetSubtitles:i,type:s}){const{media:a}=this;if(!(!a||a.currentTime<n)){if(!s||s==="video"){const{captionsTracks:o}=this;Object.keys(o).forEach(l=>m1(o[l],r,n))}if(this.config.renderTextTracksNatively&&r===0&&i!==void 0){const{textTracks:o}=this;Object.keys(o).forEach(l=>m1(o[l],r,i))}}}extractCea608Data(e){const r=[[],[]],n=e[0]&31;let i=2;for(let s=0;s<n;s++){const a=e[i++],o=127&e[i++],l=127&e[i++];if(o===0&&l===0)continue;if((4&a)!==0){const c=3&a;(c===0||c===1)&&(r[c].push(o),r[c].push(l))}}return r}}function pN(t){return t.characteristics&&/transcribes-spoken-dialog/gi.test(t.characteristics)&&/describes-music-and-sound/gi.test(t.characteristics)?"captions":"subtitles"}function fI(t,e){return!!t&&t.kind===pN(e)&&_1(e,t)}function Dte(t,e,r,n){return Math.min(e,n)-Math.max(t,r)}function pI(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}class qx{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(w.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(w.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(w.MANIFEST_PARSED,this.onManifestParsed,this),e.on(w.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(w.BUFFER_CODECS,this.onBufferCodecs,this),e.on(w.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(w.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(w.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(w.MANIFEST_PARSED,this.onManifestParsed,this),e.off(w.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(w.BUFFER_CODECS,this.onBufferCodecs,this),e.off(w.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,r){const n=this.hls.levels[r.droppedLevel];this.isLevelAllowed(n)&&this.restrictedLevels.push({bitrate:n.bitrate,height:n.height,width:n.width})}onMediaAttaching(e,r){this.media=r.media instanceof HTMLVideoElement?r.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,r){const n=this.hls;this.restrictedLevels=[],this.firstLevel=r.firstLevel,n.config.capLevelToPlayerSize&&r.video&&this.startCapping()}onLevelsUpdated(e,r){this.timer&&xe(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,r){this.hls.config.capLevelToPlayerSize&&r.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const r=this.hls,n=this.getMaxLevel(e.length-1);n!==this.autoLevelCapping&&G.log(`Setting autoLevelCapping to ${n}: ${e[n].height}p@${e[n].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),r.autoLevelCapping=n,r.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=r.autoLevelCapping}}}getMaxLevel(e){const r=this.hls.levels;if(!r.length)return-1;const n=r.filter((i,s)=>this.isLevelAllowed(i)&&s<=e);return this.clientRect=null,qx.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,r={width:0,height:0};if(e){const n=e.getBoundingClientRect();r.width=n.width,r.height=n.height,!r.width&&!r.height&&(r.width=n.right-n.left||e.width||0,r.height=n.bottom-n.top||e.height||0)}return this.clientRect=r,r}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return e}isLevelAllowed(e){return!this.restrictedLevels.some(n=>e.bitrate===n.bitrate&&e.width===n.width&&e.height===n.height)}static getMaxLevelByMediaSize(e,r,n){if(!(e!=null&&e.length))return-1;const i=(o,l)=>l?o.width!==l.width||o.height!==l.height:!0;let s=e.length-1;const a=Math.max(r,n);for(let o=0;o<e.length;o+=1){const l=e[o];if((l.width>=a||l.height>=a)&&i(l,e[o+1])){s=o;break}}return s}}class Ote{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(w.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(w.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,r){const n=this.hls.config;if(n.capLevelOnFPSDrop){const i=r.media instanceof self.HTMLVideoElement?r.media:null;this.media=i,i&&typeof i.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}}checkFPS(e,r,n){const i=performance.now();if(r){if(this.lastTime){const s=i-this.lastTime,a=n-this.lastDroppedFrames,o=r-this.lastDecodedFrames,l=1e3*a/s,u=this.hls;if(u.trigger(w.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:n}),l>0&&a>u.config.fpsDroppedMonitoringThreshold*o){let c=u.currentLevel;G.warn("drop FPS ratio greater than max allowed value for currentLevel: "+c),c>0&&(u.autoLevelCapping===-1||u.autoLevelCapping>=c)&&(c=c-1,u.trigger(w.FPS_DROP_LEVEL_CAPPING,{level:c,droppedLevel:u.currentLevel}),u.autoLevelCapping=c,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=n,this.lastDecodedFrames=r}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const r=e.getVideoPlaybackQuality();this.checkFPS(e,r.totalVideoFrames,r.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}const Mf="[eme]";class Fu{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=Fu.CDMCleanupPromise?[Fu.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=G.debug.bind(G,Mf),this.log=G.log.bind(G,Mf),this.warn=G.warn.bind(G,Mf),this.error=G.error.bind(G,Mf),this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null}registerListeners(){this.hls.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(w.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(w.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(w.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(w.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(w.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(w.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(e){const{drmSystems:r,widevineLicenseUrl:n}=this.config,i=r[e];if(i)return i.licenseUrl;if(e===Qt.WIDEVINE&&n)return n;throw new Error(`no license server URL configured for key-system "${e}"`)}getServerCertificateUrl(e){const{drmSystems:r}=this.config,n=r[e];if(n)return n.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const r=this.hls.levels,n=(a,o,l)=>!!a&&l.indexOf(a)===o,i=r.map(a=>a.audioCodec).filter(n),s=r.map(a=>a.videoCodec).filter(n);return i.length+s.length===0&&s.push("avc1.42e01e"),new Promise((a,o)=>{const l=u=>{const c=u.shift();this.getMediaKeysPromise(c,i,s).then(d=>a({keySystem:c,mediaKeys:d})).catch(d=>{u.length?l(u):d instanceof di?o(d):o(new di({type:Ve.KEY_SYSTEM_ERROR,details:J.KEY_SYSTEM_NO_ACCESS,error:d,fatal:!0},d.message))})};l(e)})}requestMediaKeySystemAccess(e,r){const{requestMediaKeySystemAccessFunc:n}=this.config;if(typeof n!="function"){let i=`Configured requestMediaKeySystemAccess is not a function ${n}`;return EP===null&&self.location.protocol==="http:"&&(i=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(i))}return n(e,r)}getMediaKeysPromise(e,r,n){const i=UQ(e,r,n,this.config.drmSystemOptions),s=this.keySystemAccessPromises[e];let a=s==null?void 0:s.keySystemAccess;if(!a){this.log(`Requesting encrypted media "${e}" key-system access with config: ${JSON.stringify(i)}`),a=this.requestMediaKeySystemAccess(e,i);const o=this.keySystemAccessPromises[e]={keySystemAccess:a};return a.catch(l=>{this.log(`Failed to obtain access to key-system "${e}": ${l}`)}),a.then(l=>{this.log(`Access for key-system "${l.keySystem}" obtained`);const u=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),o.mediaKeys=l.createMediaKeys().then(c=>(this.log(`Media-keys created for "${e}"`),u.then(d=>d?this.setMediaKeysServerCertificate(c,e,d):c))),o.mediaKeys.catch(c=>{this.error(`Failed to create media-keys for "${e}"}: ${c}`)}),o.mediaKeys})}return a.then(()=>s.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:r,mediaKeys:n}){this.log(`Creating key-system session "${r}" keyId: ${as.hexDump(e.keyId||[])}`);const i=n.createSession(),s={decryptdata:e,keySystem:r,mediaKeys:n,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(s),s}renewKeySession(e){const r=e.decryptdata;if(r.pssh){const n=this.createMediaKeySessionContext(e),i=this.getKeyIdString(r),s="cenc";this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(n,s,r.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(e.keyId===null)throw new Error("keyId is null");return as.hexDump(e.keyId)}updateKeySession(e,r){var n;const i=e.mediaKeysSession;return this.log(`Updating key-session "${i.sessionId}" for keyID ${as.hexDump(((n=e.decryptdata)==null?void 0:n.keyId)||[])}
      } (data length: ${r&&r.byteLength})`),i.update(r)}selectKeySystemFormat(e){const r=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${r.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(r)),this.keyFormatPromise}getKeyFormatPromise(e){return new Promise((r,n)=>{const i=gb(this.config),s=e.map(EC).filter(a=>!!a&&i.indexOf(a)!==-1);return this.getKeySystemSelectionPromise(s).then(({keySystem:a})=>{const o=TC(a);o?r(o):n(new Error(`Unable to find format for key-system "${a}"`))}).catch(n)})}loadKey(e){const r=e.keyInfo.decryptdata,n=this.getKeyIdString(r),i=`(keyId: ${n} format: "${r.keyFormat}" method: ${r.method} uri: ${r.uri})`;this.log(`Starting session for key ${i}`);let s=this.keyIdToKeySessionPromise[n];return s||(s=this.keyIdToKeySessionPromise[n]=this.getKeySystemForKeyPromise(r).then(({keySystem:a,mediaKeys:o})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${i}`),this.attemptSetMediaKeys(a,o).then(()=>{this.throwIfDestroyed();const l=this.createMediaKeySessionContext({keySystem:a,mediaKeys:o,decryptdata:r});return this.generateRequestWithPreferredKeySession(l,"cenc",r.pssh,"playlist-key")}))),s.catch(a=>this.handleError(a))),s}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof di?this.hls.trigger(w.ERROR,e.data):this.hls.trigger(w.ERROR,{type:Ve.KEY_SYSTEM_ERROR,details:J.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const r=this.getKeyIdString(e),n=this.keyIdToKeySessionPromise[r];if(!n){const i=EC(e.keyFormat),s=i?[i]:gb(this.config);return this.attemptKeySystemAccess(s)}return n}getKeySystemSelectionPromise(e){if(e.length||(e=gb(this.config)),e.length===0)throw new di({type:Ve.KEY_SYSTEM_ERROR,details:J.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${JSON.stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}_onMediaEncrypted(e){const{initDataType:r,initData:n}=e,i=`"${e.type}" event: init data type: "${r}"`;if(this.debug(i),n===null)return;let s,a;if(r==="sinf"&&this.config.drmSystems[Qt.FAIRPLAY]){const d=Lr(new Uint8Array(n));try{const h=Dx(JSON.parse(d).sinf),f=CP(new Uint8Array(h));if(!f)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");s=f.subarray(8,24),a=Qt.FAIRPLAY}catch(h){this.warn(`${i} Failed to parse sinf: ${h}`);return}}else{const d=cJ(n),h=d.filter(f=>f.systemId===ld.WIDEVINE)[0];if(!h){d.length===0||d.some(f=>!f.systemId)?this.warn(`${i} contains incomplete or invalid pssh data`):this.log(`ignoring ${i} for ${d.map(f=>_C(f.systemId)).join(",")} pssh data in favor of playlist keys`);return}if(a=_C(h.systemId),h.version===0&&h.data){const f=h.data.length-22;s=h.data.subarray(f,f+16)}}if(!a||!s)return;const o=as.hexDump(s),{keyIdToKeySessionPromise:l,mediaKeySessions:u}=this;let c=l[o];for(let d=0;d<u.length;d++){const h=u[d],f=h.decryptdata;if(!f.keyId)continue;const p=as.hexDump(f.keyId);if(o===p||f.uri.replace(/-/g,"").indexOf(o)!==-1){if(c=l[p],f.pssh)break;delete l[p],f.pssh=new Uint8Array(n),f.keyId=s,c=l[o]=c.then(()=>this.generateRequestWithPreferredKeySession(h,r,n,"encrypted-event-key-match"));break}}c||(c=l[o]=this.getKeySystemSelectionPromise([a]).then(({keySystem:d,mediaKeys:h})=>{var f;this.throwIfDestroyed();const p=new hh("ISO-23001-7",o,(f=TC(d))!=null?f:"");return p.pssh=new Uint8Array(n),p.keyId=s,this.attemptSetMediaKeys(d,h).then(()=>{this.throwIfDestroyed();const m=this.createMediaKeySessionContext({decryptdata:p,keySystem:d,mediaKeys:h});return this.generateRequestWithPreferredKeySession(m,r,n,"encrypted-event-no-match")})})),c.catch(d=>this.handleError(d))}_onWaitingForKey(e){this.log(`"${e.type}" event`)}attemptSetMediaKeys(e,r){const n=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const i=Promise.all(n).then(()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(r)});return this.setMediaKeysQueue.push(i),i.then(()=>{this.log(`Media-keys set for "${e}"`),n.push(i),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(s=>n.indexOf(s)===-1)})}generateRequestWithPreferredKeySession(e,r,n,i){var s,a;const o=(s=this.config.drmSystems)==null||(a=s[e.keySystem])==null?void 0:a.generateRequest;if(o)try{const p=o.call(this.hls,r,n,e);if(!p)throw new Error("Invalid response from configured generateRequest filter");r=p.initDataType,n=e.decryptdata.pssh=p.initData?new Uint8Array(p.initData):null}catch(p){var l;if(this.warn(p.message),(l=this.hls)!=null&&l.config.debug)throw p}if(n===null)return this.log(`Skipping key-session request for "${i}" (no initData)`),Promise.resolve(e);const u=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${i}": ${u} (init data type: ${r} length: ${n?n.byteLength:null})`);const c=new Wx,d=e._onmessage=p=>{const m=e.mediaKeysSession;if(!m){c.emit("error",new Error("invalid state"));return}const{messageType:g,message:v}=p;this.log(`"${g}" message event for session "${m.sessionId}" message size: ${v.byteLength}`),g==="license-request"||g==="license-renewal"?this.renewLicense(e,v).catch(b=>{this.handleError(b),c.emit("error",b)}):g==="license-release"?e.keySystem===Qt.FAIRPLAY&&(this.updateKeySession(e,f1("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${g}"`)},h=e._onkeystatuseschange=p=>{if(!e.mediaKeysSession){c.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(e);const g=e.keyStatus;c.emit("keyStatus",g),g==="expired"&&(this.warn(`${e.keySystem} expired for key ${u}`),this.renewKeySession(e))};e.mediaKeysSession.addEventListener("message",d),e.mediaKeysSession.addEventListener("keystatuseschange",h);const f=new Promise((p,m)=>{c.on("error",m),c.on("keyStatus",g=>{g.startsWith("usable")?p():g==="output-restricted"?m(new di({type:Ve.KEY_SYSTEM_ERROR,details:J.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):g==="internal-error"?m(new di({type:Ve.KEY_SYSTEM_ERROR,details:J.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${g}"`)):g==="expired"?m(new Error("key expired while generating request")):this.warn(`unhandled key status change "${g}"`)})});return e.mediaKeysSession.generateRequest(r,n).then(()=>{var p;this.log(`Request generated for key-session "${(p=e.mediaKeysSession)==null?void 0:p.sessionId}" keyId: ${u}`)}).catch(p=>{throw new di({type:Ve.KEY_SYSTEM_ERROR,details:J.KEY_SYSTEM_NO_SESSION,error:p,fatal:!1},`Error generating key-session request: ${p}`)}).then(()=>f).catch(p=>{throw c.removeAllListeners(),this.removeSession(e),p}).then(()=>(c.removeAllListeners(),e))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach((r,n)=>{this.log(`key status change "${r}" for keyStatuses keyId: ${as.hexDump("buffer"in n?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n))} session keyId: ${as.hexDump(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=r})}fetchServerCertificate(e){const r=this.config,n=r.loader,i=new n(r),s=this.getServerCertificateUrl(e);return s?(this.log(`Fetching server certificate for "${e}"`),new Promise((a,o)=>{const l={responseType:"arraybuffer",url:s},u=r.certLoadPolicy.default,c={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(h,f,p,m)=>{a(h.data)},onError:(h,f,p,m)=>{o(new di({type:Ve.KEY_SYSTEM_ERROR,details:J.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:p,response:tn({url:l.url,data:void 0},h)},`"${e}" certificate request failed (${s}). Status: ${h.code} (${h.text})`))},onTimeout:(h,f,p)=>{o(new di({type:Ve.KEY_SYSTEM_ERROR,details:J.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:p,response:{url:l.url,data:void 0}},`"${e}" certificate request timed out (${s})`))},onAbort:(h,f,p)=>{o(new Error("aborted"))}};i.load(l,c,d)})):Promise.resolve()}setMediaKeysServerCertificate(e,r,n){return new Promise((i,s)=>{e.setServerCertificate(n).then(a=>{this.log(`setServerCertificate ${a?"success":"not supported by CDM"} (${n==null?void 0:n.byteLength}) on "${r}"`),i(e)}).catch(a=>{s(new di({type:Ve.KEY_SYSTEM_ERROR,details:J.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:a,fatal:!0},a.message))})})}renewLicense(e,r){return this.requestLicense(e,new Uint8Array(r)).then(n=>this.updateKeySession(e,new Uint8Array(n)).catch(i=>{throw new di({type:Ve.KEY_SYSTEM_ERROR,details:J.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:i,fatal:!0},i.message)}))}unpackPlayReadyKeyMessage(e,r){const n=String.fromCharCode.apply(null,new Uint16Array(r.buffer));if(!n.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),r;const i=new DOMParser().parseFromString(n,"application/xml"),s=i.querySelectorAll("HttpHeader");if(s.length>0){let c;for(let d=0,h=s.length;d<h;d++){var a,o;c=s[d];const f=(a=c.querySelector("name"))==null?void 0:a.textContent,p=(o=c.querySelector("value"))==null?void 0:o.textContent;f&&p&&e.setRequestHeader(f,p)}}const l=i.querySelector("Challenge"),u=l==null?void 0:l.textContent;if(!u)throw new Error("Cannot find <Challenge> in key message");return f1(atob(u))}setupLicenseXHR(e,r,n,i){const s=this.config.licenseXhrSetup;return s?Promise.resolve().then(()=>{if(!n.decryptdata)throw new Error("Key removed");return s.call(this.hls,e,r,n,i)}).catch(a=>{if(!n.decryptdata)throw a;return e.open("POST",r,!0),s.call(this.hls,e,r,n,i)}).then(a=>(e.readyState||e.open("POST",r,!0),{xhr:e,licenseChallenge:a||i})):(e.open("POST",r,!0),Promise.resolve({xhr:e,licenseChallenge:i}))}requestLicense(e,r){const n=this.config.keyLoadPolicy.default;return new Promise((i,s)=>{const a=this.getLicenseServerUrl(e.keySystem);this.log(`Sending license request to URL: ${a}`);const o=new XMLHttpRequest;o.responseType="arraybuffer",o.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return s(new Error("invalid state"));if(o.readyState===4)if(o.status===200){this._requestLicenseFailureCount=0;let l=o.response;this.log(`License received ${l instanceof ArrayBuffer?l.byteLength:l}`);const u=this.config.licenseResponseCallback;if(u)try{l=u.call(this.hls,o,a,e)}catch(c){this.error(c)}i(l)}else{const l=n.errorRetry,u=l?l.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>u||o.status>=400&&o.status<500)s(new di({type:Ve.KEY_SYSTEM_ERROR,details:J.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:o,response:{url:a,data:void 0,code:o.status,text:o.statusText}},`License Request XHR failed (${a}). Status: ${o.status} (${o.statusText})`));else{const c=u-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${c} attempts left`),this.requestLicense(e,r).then(i,s)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=o,this.setupLicenseXHR(o,a,e,r).then(({xhr:l,licenseChallenge:u})=>{e.keySystem==Qt.PLAYREADY&&(u=this.unpackPlayReadyKeyMessage(l,u)),l.send(u)})})}onMediaAttached(e,r){if(!this.config.emeEnabled)return;const n=r.media;this.media=n,n.addEventListener("encrypted",this.onMediaEncrypted),n.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media,r=this.mediaKeySessions;e&&(e.removeEventListener("encrypted",this.onMediaEncrypted),e.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},hh.clearKeyUriToKeyIdMap();const n=r.length;Fu.CDMCleanupPromise=Promise.all(r.map(i=>this.removeSession(i)).concat(e==null?void 0:e.setMediaKeys(null).catch(i=>{this.log(`Could not clear media keys: ${i}`)}))).then(()=>{n&&(this.log("finished closing key sessions and clearing media keys"),r.length=0)}).catch(i=>{this.log(`Could not close sessions and clear media keys: ${i}`)})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:r}){if(!(!r||!this.config.emeEnabled)&&!this.keyFormatPromise){const n=r.reduce((i,s)=>(i.indexOf(s.keyFormat)===-1&&i.push(s.keyFormat),i),[]);this.log(`Selecting key-system from session-keys ${n.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(n)}}removeSession(e){const{mediaKeysSession:r,licenseXhr:n}=e;if(r){this.log(`Remove licenses and keys and close session ${r.sessionId}`),e._onmessage&&(r.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(r.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),n&&n.readyState!==XMLHttpRequest.DONE&&n.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const i=this.mediaKeySessions.indexOf(e);return i>-1&&this.mediaKeySessions.splice(i,1),r.remove().catch(s=>{this.log(`Could not remove session: ${s}`)}).then(()=>r.close()).catch(s=>{this.log(`Could not close session: ${s}`)})}}}Fu.CDMCleanupPromise=void 0;class di extends Error{constructor(e,r){super(r),this.data=void 0,e.error||(e.error=new Error(r)),this.data=e,e.err=e.error}}var gn;(function(t){t.MANIFEST="m",t.AUDIO="a",t.VIDEO="v",t.MUXED="av",t.INIT="i",t.CAPTION="c",t.TIMED_TEXT="tt",t.KEY="k",t.OTHER="o"})(gn||(gn={}));var x1;(function(t){t.DASH="d",t.HLS="h",t.SMOOTH="s",t.OTHER="o"})(x1||(x1={}));var zo;(function(t){t.OBJECT="CMCD-Object",t.REQUEST="CMCD-Request",t.SESSION="CMCD-Session",t.STATUS="CMCD-Status"})(zo||(zo={}));const Mte={[zo.OBJECT]:["br","d","ot","tb"],[zo.REQUEST]:["bl","dl","mtp","nor","nrr","su"],[zo.SESSION]:["cid","pr","sf","sid","st","v"],[zo.STATUS]:["bs","rtp"]};class nc{constructor(e,r){this.value=void 0,this.params=void 0,Array.isArray(e)&&(e=e.map(n=>n instanceof nc?n:new nc(n))),this.value=e,this.params=r}}class mN{constructor(e){this.description=void 0,this.description=e}}const Pte="Dict";function Nte(t){return Array.isArray(t)?JSON.stringify(t):t instanceof Map?"Map{}":t instanceof Set?"Set{}":typeof t=="object"?JSON.stringify(t):String(t)}function Fte(t,e,r,n){return new Error(`failed to ${t} "${Nte(e)}" as ${r}`,{cause:n})}const mI="Bare Item",$te="Boolean",Ute="Byte Sequence",Bte="Decimal",jte="Integer";function Hte(t){return t<-999999999999999||999999999999999<t}const Vte=/[\x00-\x1f\x7f]+/,Wte="Token",Gte="Key";function xs(t,e,r){return Fte("serialize",t,e,r)}function Kte(t){if(typeof t!="boolean")throw xs(t,$te);return t?"?1":"?0"}function qte(t){return btoa(String.fromCharCode(...t))}function zte(t){if(ArrayBuffer.isView(t)===!1)throw xs(t,Ute);return`:${qte(t)}:`}function gN(t){if(Hte(t))throw xs(t,jte);return t.toString()}function Yte(t){return`@${gN(t.getTime()/1e3)}`}function vN(t,e){if(t<0)return-vN(-t,e);const r=Math.pow(10,e);if(Math.abs(t*r%1-.5)<Number.EPSILON){const i=Math.floor(t*r);return(i%2===0?i:i+1)/r}else return Math.round(t*r)/r}function Xte(t){const e=vN(t,3);if(Math.floor(Math.abs(e)).toString().length>12)throw xs(t,Bte);const r=e.toString();return r.includes(".")?r:`${r}.0`}const Zte="String";function Qte(t){if(Vte.test(t))throw xs(t,Zte);return`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function Jte(t){return t.description||t.toString().slice(7,-1)}function gI(t){const e=Jte(t);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw xs(e,Wte);return e}function S1(t){switch(typeof t){case"number":if(!xe(t))throw xs(t,mI);return Number.isInteger(t)?gN(t):Xte(t);case"string":return Qte(t);case"symbol":return gI(t);case"boolean":return Kte(t);case"object":if(t instanceof Date)return Yte(t);if(t instanceof Uint8Array)return zte(t);if(t instanceof mN)return gI(t);default:throw xs(t,mI)}}function w1(t){if(/^[a-z*][a-z0-9\-_.*]*$/.test(t)===!1)throw xs(t,Gte);return t}function zx(t){return t==null?"":Object.entries(t).map(([e,r])=>r===!0?`;${w1(e)}`:`;${w1(e)}=${S1(r)}`).join("")}function bN(t){return t instanceof nc?`${S1(t.value)}${zx(t.params)}`:S1(t)}function ere(t){return`(${t.value.map(bN).join(" ")})${zx(t.params)}`}function tre(t,e={whitespace:!0}){if(typeof t!="object")throw xs(t,Pte);const r=t instanceof Map?t.entries():Object.entries(t),n=e!=null&&e.whitespace?" ":"";return Array.from(r).map(([i,s])=>{s instanceof nc||(s=new nc(s));let a=w1(i);return s.value===!0?a+=zx(s.params):(a+="=",Array.isArray(s.value)?a+=ere(s):a+=bN(s)),a}).join(`,${n}`)}function rre(t,e){return tre(t,e)}const nre=t=>t==="ot"||t==="sf"||t==="st",ire=t=>typeof t=="number"?xe(t):t!=null&&t!==""&&t!==!1;function sre(t,e){const r=new URL(t),n=new URL(e);if(r.origin!==n.origin)return t;const i=r.pathname.split("/").slice(1),s=n.pathname.split("/").slice(1,-1);for(;i[0]===s[0];)i.shift(),s.shift();for(;s.length;)s.shift(),i.unshift("..");return i.join("/")}function are(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),r=e.toString();return URL.revokeObjectURL(e),r.slice(r.lastIndexOf("/")+1)}catch{let r=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const s=(r+Math.random()*16)%16|0;return r=Math.floor(r/16),(i=="x"?s:s&3|8).toString(16)})}}}const q0=t=>Math.round(t),ore=(t,e)=>(e!=null&&e.baseUrl&&(t=sre(t,e.baseUrl)),encodeURIComponent(t)),Pf=t=>q0(t/100)*100,lre={br:q0,d:q0,bl:Pf,dl:Pf,mtp:Pf,nor:ore,rtp:Pf,tb:q0};function ure(t,e){const r={};if(t==null||typeof t!="object")return r;const n=Object.keys(t).sort(),i=Cr({},lre,e==null?void 0:e.formatters),s=e==null?void 0:e.filter;return n.forEach(a=>{if(s!=null&&s(a))return;let o=t[a];const l=i[a];l&&(o=l(o,e)),!(a==="v"&&o===1)&&(a=="pr"&&o===1||ire(o)&&(nre(a)&&typeof o=="string"&&(o=new mN(o)),r[a]=o))}),r}function yN(t,e={}){return t?rre(ure(t,e),Cr({whitespace:!1},e)):""}function cre(t,e={}){if(!t)return{};const r=Object.entries(t),n=Object.entries(Mte).concat(Object.entries((e==null?void 0:e.customHeaderMap)||{})),i=r.reduce((s,a)=>{var o,l;const[u,c]=a,d=((o=n.find(h=>h[1].includes(u)))==null?void 0:o[0])||zo.REQUEST;return(l=s[d])!=null||(s[d]={}),s[d][u]=c,s},{});return Object.entries(i).reduce((s,[a,o])=>(s[a]=yN(o,e),s),{})}function dre(t,e,r){return Cr(t,cre(e,r))}const hre="CMCD";function fre(t,e={}){if(!t)return"";const r=yN(t,e);return`${hre}=${encodeURIComponent(r)}`}const vI=/CMCD=[^&#]+/;function pre(t,e,r){const n=fre(e,r);if(!n)return t;if(vI.test(t))return t.replace(vI,n);const i=t.includes("?")?"&":"?";return`${t}${i}${n}`}class mre{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=i=>{try{this.apply(i,{ot:gn.MANIFEST,su:!this.initialized})}catch(s){G.warn("Could not generate manifest CMCD data.",s)}},this.applyFragmentData=i=>{try{const s=i.frag,a=this.hls.levels[s.level],o=this.getObjectType(s),l={d:s.duration*1e3,ot:o};(o===gn.VIDEO||o===gn.AUDIO||o==gn.MUXED)&&(l.br=a.bitrate/1e3,l.tb=this.getTopBandwidth(o)/1e3,l.bl=this.getBufferLength(o)),this.apply(i,l)}catch(s){G.warn("Could not generate segment CMCD data.",s)}},this.hls=e;const r=this.config=e.config,{cmcd:n}=r;n!=null&&(r.pLoader=this.createPlaylistLoader(),r.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||are(),this.cid=n.contentId,this.useHeaders=n.useHeaders===!0,this.includeKeys=n.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(w.MEDIA_DETACHED,this.onMediaDetached,this),e.on(w.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(w.MEDIA_DETACHED,this.onMediaDetached,this),e.off(w.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=null}onMediaAttached(e,r){this.media=r.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,r){var n,i;this.audioBuffer=(n=r.tracks.audio)==null?void 0:n.buffer,this.videoBuffer=(i=r.tracks.video)==null?void 0:i.buffer}createData(){var e;return{v:1,sf:x1.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,r={}){Cr(r,this.createData());const n=r.ot===gn.INIT||r.ot===gn.VIDEO||r.ot===gn.MUXED;this.starved&&n&&(r.bs=!0,r.su=!0,this.starved=!1),r.su==null&&(r.su=this.buffering);const{includeKeys:i}=this;i&&(r=Object.keys(r).reduce((s,a)=>(i.includes(a)&&(s[a]=r[a]),s),{})),this.useHeaders?(e.headers||(e.headers={}),dre(e.headers,r)):e.url=pre(e.url,r)}getObjectType(e){const{type:r}=e;if(r==="subtitle")return gn.TIMED_TEXT;if(e.sn==="initSegment")return gn.INIT;if(r==="audio")return gn.AUDIO;if(r==="main")return this.hls.audioTracks.length?gn.VIDEO:gn.MUXED}getTopBandwidth(e){let r=0,n;const i=this.hls;if(e===gn.AUDIO)n=i.audioTracks;else{const s=i.maxAutoLevel,a=s>-1?s+1:i.levels.length;n=i.levels.slice(0,a)}for(const s of n)s.bitrate>r&&(r=s.bitrate);return r>0?r:NaN}getBufferLength(e){const r=this.hls.media,n=e===gn.AUDIO?this.audioBuffer:this.videoBuffer;return!n||!r?NaN:Zt.bufferInfo(n,r.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,r=this.applyPlaylistData,n=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new n(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,a,o){r(s),this.loader.load(s,a,o)}}}createFragmentLoader(){const{fLoader:e}=this.config,r=this.applyFragmentData,n=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new n(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,a,o){r(s),this.loader.load(s,a,o)}}}}const gre=3e5;class vre{constructor(e){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.log=G.log.bind(G,"[content-steering]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(w.MANIFEST_LOADING,this.onManifestLoading,this),e.on(w.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(w.MANIFEST_PARSED,this.onManifestParsed,this),e.on(w.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(w.MANIFEST_LOADING,this.onManifestLoading,this),e.off(w.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(w.MANIFEST_PARSED,this.onManifestParsed,this),e.off(w.ERROR,this.onError,this))}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const r=this.levels;r&&(this.levels=r.filter(n=>n!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,r){const{contentSteering:n}=r;n!==null&&(this.pathwayId=n.pathwayId,this.uri=n.uri,this.started&&this.startLoad())}onManifestParsed(e,r){this.audioTracks=r.audioTracks,this.subtitleTracks=r.subtitleTracks}onError(e,r){const{errorAction:n}=r;if((n==null?void 0:n.action)===ln.SendAlternateToPenaltyBox&&n.flags===Si.MoveAllAlternatesMatchingHost){const i=this.levels;let s=this.pathwayPriority,a=this.pathwayId;if(r.context){const{groupId:o,pathwayId:l,type:u}=r.context;o&&i?a=this.getPathwayForGroupId(o,u,a):l&&(a=l)}a in this.penalizedPathways||(this.penalizedPathways[a]=performance.now()),!s&&i&&(s=i.reduce((o,l)=>(o.indexOf(l.pathwayId)===-1&&o.push(l.pathwayId),o),[])),s&&s.length>1&&(this.updatePathwayPriority(s),n.resolved=this.pathwayId!==a),n.resolved||G.warn(`Could not resolve ${r.details} ("${r.error.message}") with content-steering for Pathway: ${a} levels: ${i&&i.length} priorities: ${JSON.stringify(s)} penalized: ${JSON.stringify(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let r=this.getLevelsForPathway(this.pathwayId);if(r.length===0){const n=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${n}"`),r=this.getLevelsForPathway(n),this.pathwayId=n}return r.length!==e.length&&this.log(`Found ${r.length}/${e.length} levels in Pathway "${this.pathwayId}"`),r}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(r=>e===r.pathwayId)}updatePathwayPriority(e){this.pathwayPriority=e;let r;const n=this.penalizedPathways,i=performance.now();Object.keys(n).forEach(s=>{i-n[s]>gre&&delete n[s]});for(let s=0;s<e.length;s++){const a=e[s];if(a in n)continue;if(a===this.pathwayId)return;const o=this.hls.nextLoadLevel,l=this.hls.levels[o];if(r=this.getLevelsForPathway(a),r.length>0){this.log(`Setting Pathway to "${a}"`),this.pathwayId=a,$P(r),this.hls.trigger(w.LEVELS_UPDATED,{levels:r});const u=this.hls.levels[o];l&&u&&this.levels&&(u.attrs["STABLE-VARIANT-ID"]!==l.attrs["STABLE-VARIANT-ID"]&&u.bitrate!==l.bitrate&&this.log(`Unstable Pathways change from bitrate ${l.bitrate} to ${u.bitrate}`),this.hls.nextLoadLevel=o);break}}}getPathwayForGroupId(e,r,n){const i=this.getLevelsForPathway(n).concat(this.levels||[]);for(let s=0;s<i.length;s++)if(r===pt.AUDIO_TRACK&&i[s].hasAudioGroup(e)||r===pt.SUBTITLE_TRACK&&i[s].hasSubtitleGroup(e))return i[s].pathwayId;return n}clonePathways(e){const r=this.levels;if(!r)return;const n={},i={};e.forEach(s=>{const{ID:a,"BASE-ID":o,"URI-REPLACEMENT":l}=s;if(r.some(c=>c.pathwayId===a))return;const u=this.getLevelsForPathway(o).map(c=>{const d=new ur(c.attrs);d["PATHWAY-ID"]=a;const h=d.AUDIO&&`${d.AUDIO}_clone_${a}`,f=d.SUBTITLES&&`${d.SUBTITLES}_clone_${a}`;h&&(n[d.AUDIO]=h,d.AUDIO=h),f&&(i[d.SUBTITLES]=f,d.SUBTITLES=f);const p=EN(c.uri,d["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",l),m=new tc({attrs:d,audioCodec:c.audioCodec,bitrate:c.bitrate,height:c.height,name:c.name,url:p,videoCodec:c.videoCodec,width:c.width});if(c.audioGroups)for(let g=1;g<c.audioGroups.length;g++)m.addGroupId("audio",`${c.audioGroups[g]}_clone_${a}`);if(c.subtitleGroups)for(let g=1;g<c.subtitleGroups.length;g++)m.addGroupId("text",`${c.subtitleGroups[g]}_clone_${a}`);return m});r.push(...u),bI(this.audioTracks,n,l,a),bI(this.subtitleTracks,i,l,a)})}loadSteeringManifest(e){const r=this.hls.config,n=r.loader;this.loader&&this.loader.destroy(),this.loader=new n(r);let i;try{i=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(i.protocol!=="data:"){const c=(this.hls.bandwidthEstimate||r.abrEwmaDefaultEstimate)|0;i.searchParams.set("_HLS_pathway",this.pathwayId),i.searchParams.set("_HLS_throughput",""+c)}const s={responseType:"json",url:i.href},a=r.steeringManifestLoadPolicy.default,o=a.errorRetry||a.timeoutRetry||{},l={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},u={onSuccess:(c,d,h,f)=>{this.log(`Loaded steering manifest: "${i}"`);const p=c.data;if(p.VERSION!==1){this.log(`Steering VERSION ${p.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=p.TTL;const{"RELOAD-URI":m,"PATHWAY-CLONES":g,"PATHWAY-PRIORITY":v}=p;if(m)try{this.uri=new self.URL(m,i).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${m}`);return}this.scheduleRefresh(this.uri||h.url),g&&this.clonePathways(g);const b={steeringManifest:p,url:i.toString()};this.hls.trigger(w.STEERING_MANIFEST_LOADED,b),v&&this.updatePathwayPriority(v)},onError:(c,d,h,f)=>{if(this.log(`Error loading steering manifest: ${c.code} ${c.text} (${d.url})`),this.stopLoad(),c.code===410){this.enabled=!1,this.log(`Steering manifest ${d.url} no longer available`);return}let p=this.timeToLoad*1e3;if(c.code===429){const m=this.loader;if(typeof(m==null?void 0:m.getResponseHeader)=="function"){const g=m.getResponseHeader("Retry-After");g&&(p=parseFloat(g)*1e3)}this.log(`Steering manifest ${d.url} rate limited`);return}this.scheduleRefresh(this.uri||d.url,p)},onTimeout:(c,d,h)=>{this.log(`Timeout loading steering manifest (${d.url})`),this.scheduleRefresh(this.uri||d.url)}};this.log(`Requesting steering manifest: ${i}`),this.loader.load(s,l,u)}scheduleRefresh(e,r=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var n;const i=(n=this.hls)==null?void 0:n.media;if(i&&!i.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},r)}}function bI(t,e,r,n){t&&Object.keys(e).forEach(i=>{const s=t.filter(a=>a.groupId===i).map(a=>{const o=Cr({},a);return o.details=void 0,o.attrs=new ur(o.attrs),o.url=o.attrs.URI=EN(a.url,a.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",r),o.groupId=o.attrs["GROUP-ID"]=e[i],o.attrs["PATHWAY-ID"]=n,o});t.push(...s)})}function EN(t,e,r,n){const{HOST:i,PARAMS:s,[r]:a}=n;let o;e&&(o=a==null?void 0:a[e],o&&(t=o));const l=new self.URL(t);return i&&!o&&(l.host=i),s&&Object.keys(s).sort().forEach(u=>{u&&l.searchParams.set(u,s[u])}),l.href}const bre=/^age:\s*[\d.]+\s*$/im;class _N{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new Jg,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,r,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=r,this.callbacks=n,this.loadInternal()}loadInternal(){const{config:e,context:r}=this;if(!e||!r)return;const n=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0,i.aborted=!1;const s=this.xhrSetup;s?Promise.resolve().then(()=>{if(!(this.loader!==n||this.stats.aborted))return s(n,r.url)}).catch(a=>{if(!(this.loader!==n||this.stats.aborted))return n.open("GET",r.url,!0),s(n,r.url)}).then(()=>{this.loader!==n||this.stats.aborted||this.openAndSendXhr(n,r,e)}).catch(a=>{this.callbacks.onError({code:n.status,text:a.message},r,n,i)}):this.openAndSendXhr(n,r,e)}openAndSendXhr(e,r,n){e.readyState||e.open("GET",r.url,!0);const i=r.headers,{maxTimeToFirstByteMs:s,maxLoadTimeMs:a}=n.loadPolicy;if(i)for(const o in i)e.setRequestHeader(o,i[o]);r.rangeEnd&&e.setRequestHeader("Range","bytes="+r.rangeStart+"-"+(r.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=r.responseType,self.clearTimeout(this.requestTimeout),n.timeout=s&&xe(s)?s:a,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout),e.send()}readystatechange(){const{context:e,loader:r,stats:n}=this;if(!e||!r)return;const i=r.readyState,s=this.config;if(!n.aborted&&i>=2&&(n.loading.first===0&&(n.loading.first=Math.max(self.performance.now(),n.loading.start),s.timeout!==s.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),s.timeout=s.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),s.loadPolicy.maxLoadTimeMs-(n.loading.first-n.loading.start)))),i===4)){self.clearTimeout(this.requestTimeout),r.onreadystatechange=null,r.onprogress=null;const a=r.status,o=r.responseType!=="text";if(a>=200&&a<300&&(o&&r.response||r.responseText!==null)){n.loading.end=Math.max(self.performance.now(),n.loading.first);const l=o?r.response:r.responseText,u=r.responseType==="arraybuffer"?l.byteLength:l.length;if(n.loaded=n.total=u,n.bwEstimate=n.total*8e3/(n.loading.end-n.loading.first),!this.callbacks)return;const c=this.callbacks.onProgress;if(c&&c(n,e,l,r),!this.callbacks)return;const d={url:r.responseURL,data:l,code:a};this.callbacks.onSuccess(d,n,e,r)}else{const l=s.loadPolicy.errorRetry,u=n.retry,c={url:e.url,data:void 0,code:a};Hm(l,u,!1,c)?this.retry(l):(G.error(`${a} while loading ${e.url}`),this.callbacks.onError({code:a,text:r.statusText},e,r,n))}}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,r=this.stats.retry;if(Hm(e,r,!0))this.retry(e);else{var n;G.warn(`timeout while loading ${(n=this.context)==null?void 0:n.url}`);const i=this.callbacks;i&&(this.abortInternal(),i.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:r,stats:n}=this;this.retryDelay=Px(e,n.retry),n.retry++,G.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${r==null?void 0:r.url}, retrying ${n.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const r=this.stats;r.loaded=e.loaded,e.lengthComputable&&(r.total=e.total)}getCacheAge(){let e=null;if(this.loader&&bre.test(this.loader.getAllResponseHeaders())){const r=this.loader.getResponseHeader("age");e=r?parseFloat(r):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}function yre(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const Ere=/(\d+)-(\d+)\/(\d+)/;class yI{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||Sre,this.controller=new self.AbortController,this.stats=new Jg}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,r,n){const i=this.stats;if(i.loading.start)throw new Error("Loader can only be used once.");i.loading.start=self.performance.now();const s=_re(e,this.controller.signal),a=n.onProgress,o=e.responseType==="arraybuffer",l=o?"byteLength":"length",{maxTimeToFirstByteMs:u,maxLoadTimeMs:c}=r.loadPolicy;this.context=e,this.config=r,this.callbacks=n,this.request=this.fetchSetup(e,s),self.clearTimeout(this.requestTimeout),r.timeout=u&&xe(u)?u:c,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),n.onTimeout(i,e,this.response)},r.timeout),self.fetch(this.request).then(d=>{this.response=this.loader=d;const h=Math.max(self.performance.now(),i.loading.start);if(self.clearTimeout(this.requestTimeout),r.timeout=c,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),n.onTimeout(i,e,this.response)},c-(h-i.loading.start)),!d.ok){const{status:f,statusText:p}=d;throw new wre(p||"fetch, bad network response",f,d)}return i.loading.first=h,i.total=xre(d.headers)||i.total,a&&xe(r.highWaterMark)?this.loadProgressively(d,i,e,r.highWaterMark,a):o?d.arrayBuffer():e.responseType==="json"?d.json():d.text()}).then(d=>{const h=this.response;if(!h)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),i.loading.end=Math.max(self.performance.now(),i.loading.first);const f=d[l];f&&(i.loaded=i.total=f);const p={url:h.url,data:d,code:h.status};a&&!xe(r.highWaterMark)&&a(i,e,d,h),n.onSuccess(p,i,e,h)}).catch(d=>{if(self.clearTimeout(this.requestTimeout),i.aborted)return;const h=d&&d.code||0,f=d?d.message:null;n.onError({code:h,text:f},e,d?d.details:null,i)})}getCacheAge(){let e=null;if(this.response){const r=this.response.headers.get("age");e=r?parseFloat(r):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,r,n,i=0,s){const a=new HP,o=e.body.getReader(),l=()=>o.read().then(u=>{if(u.done)return a.dataLength&&s(r,n,a.flush(),e),Promise.resolve(new ArrayBuffer(0));const c=u.value,d=c.length;return r.loaded+=d,d<i||a.dataLength?(a.push(c),a.dataLength>=i&&s(r,n,a.flush(),e)):s(r,n,c,e),l()}).catch(()=>Promise.reject());return l()}}function _re(t,e){const r={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(Cr({},t.headers))};return t.rangeEnd&&r.headers.set("Range","bytes="+t.rangeStart+"-"+String(t.rangeEnd-1)),r}function Tre(t){const e=Ere.exec(t);if(e)return parseInt(e[2])-parseInt(e[1])+1}function xre(t){const e=t.get("Content-Range");if(e){const n=Tre(e);if(xe(n))return n}const r=t.get("Content-Length");if(r)return parseInt(r)}function Sre(t,e){return new self.Request(t.url,e)}class wre extends Error{constructor(e,r,n){super(e),this.code=void 0,this.details=void 0,this.code=r,this.details=n}}const Are=/\s/,Rre={newCue(t,e,r,n){const i=[];let s,a,o,l,u;const c=self.VTTCue||self.TextTrackCue;for(let h=0;h<n.rows.length;h++)if(s=n.rows[h],o=!0,l=0,u="",!s.isEmpty()){var d;for(let m=0;m<s.chars.length;m++)Are.test(s.chars[m].uchar)&&o?l++:(u+=s.chars[m].uchar,o=!1);s.cueStartTime=e,e===r&&(r+=1e-4),l>=16?l--:l++;const f=cN(u.trim()),p=Kx(e,r,f);t!=null&&(d=t.cues)!=null&&d.getCueById(p)||(a=new c(e,r,f),a.id=p,a.line=h+1,a.align="left",a.position=10+Math.min(80,Math.floor(l*8/32)*10),i.push(a))}return t&&i.length&&(i.sort((h,f)=>h.line==="auto"||f.line==="auto"?0:h.line>8&&f.line>8?f.line-h.line:h.line-f.line),i.forEach(h=>MP(t,h))),i}},Cre={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},TN=tn(tn({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,maxBufferSize:60*1e3*1e3,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:_N,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:tee,bufferController:ste,capLevelController:qx,errorController:VJ,fpsController:Ote,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:EP,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,useMediaCapabilities:!0,certLoadPolicy:{default:Cre},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},Ire()),{},{subtitleStreamController:tte,subtitleTrackController:nte,timelineController:Lte,audioStreamController:Jee,audioTrackController:ete,emeController:Fu,cmcdController:mre,contentSteeringController:vre});function Ire(){return{cueHandler:Rre,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function kre(t,e){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const r=A1(t),n=["manifest","level","frag"],i=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return n.forEach(s=>{const a=`${s==="level"?"playlist":s}LoadPolicy`,o=e[a]===void 0,l=[];i.forEach(u=>{const c=`${s}Loading${u}`,d=e[c];if(d!==void 0&&o){l.push(c);const h=r[a].default;switch(e[a]={default:h},u){case"TimeOut":h.maxLoadTimeMs=d,h.maxTimeToFirstByteMs=d;break;case"MaxRetry":h.errorRetry.maxNumRetry=d,h.timeoutRetry.maxNumRetry=d;break;case"RetryDelay":h.errorRetry.retryDelayMs=d,h.timeoutRetry.retryDelayMs=d;break;case"MaxRetryTimeout":h.errorRetry.maxRetryDelayMs=d,h.timeoutRetry.maxRetryDelayMs=d;break}}}),l.length&&G.warn(`hls.js config: "${l.join('", "')}" setting(s) are deprecated, use "${a}": ${JSON.stringify(e[a])}`)}),tn(tn({},r),e)}function A1(t){return t&&typeof t=="object"?Array.isArray(t)?t.map(A1):Object.keys(t).reduce((e,r)=>(e[r]=A1(t[r]),e),{}):t}function Lre(t){const e=t.loader;e!==yI&&e!==_N?(G.log("[config]: Custom loader detected, cannot enable progressive streaming"),t.progressive=!1):yre()&&(t.loader=yI,t.progressive=!0,t.enableSoftwareAES=!0,G.log("[config]: Progressive streaming enabled, using FetchLoader"))}let Pb;class Dre extends Nx{constructor(e,r){super(e,"[level-controller]"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=r,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(w.MANIFEST_LOADING,this.onManifestLoading,this),e.on(w.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(w.LEVEL_LOADED,this.onLevelLoaded,this),e.on(w.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(w.FRAG_BUFFERED,this.onFragBuffered,this),e.on(w.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(w.MANIFEST_LOADING,this.onManifestLoading,this),e.off(w.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(w.LEVEL_LOADED,this.onLevelLoaded,this),e.off(w.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(w.FRAG_BUFFERED,this.onFragBuffered,this),e.off(w.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(r=>{r.loadError=0,r.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,r){this.resetLevels()}onManifestLoaded(e,r){const n=this.hls.config.preferManagedMediaSource,i=[],s={},a={};let o=!1,l=!1,u=!1;r.levels.forEach(c=>{var d,h;const f=c.attrs;let{audioCodec:p,videoCodec:m}=c;((d=p)==null?void 0:d.indexOf("mp4a.40.34"))!==-1&&(Pb||(Pb=/chrome|firefox/i.test(navigator.userAgent)),Pb&&(c.audioCodec=p=void 0)),p&&(c.audioCodec=p=Um(p,n)),((h=m)==null?void 0:h.indexOf("avc1"))===0&&(m=c.videoCodec=bJ(m));const{width:g,height:v,unknownCodecs:b}=c;if(o||(o=!!(g&&v)),l||(l=!!m),u||(u=!!p),b!=null&&b.length||p&&!Eb(p,"audio",n)||m&&!Eb(m,"video",n))return;const{CODECS:y,"FRAME-RATE":T,"HDCP-LEVEL":x,"PATHWAY-ID":_,RESOLUTION:S,"VIDEO-RANGE":A}=f,I=`${`${_||"."}-`}${c.bitrate}-${S}-${T}-${y}-${A}-${x}`;if(s[I])if(s[I].uri!==c.url&&!c.attrs["PATHWAY-ID"]){const C=a[I]+=1;c.attrs["PATHWAY-ID"]=new Array(C+1).join(".");const N=new tc(c);s[I]=N,i.push(N)}else s[I].addGroupId("audio",f.AUDIO),s[I].addGroupId("text",f.SUBTITLES);else{const C=new tc(c);s[I]=C,a[I]=1,i.push(C)}}),this.filterAndSortMediaOptions(i,r,o,l,u)}filterAndSortMediaOptions(e,r,n,i,s){let a=[],o=[],l=e;if((n||i)&&s&&(l=l.filter(({videoCodec:p,videoRange:m,width:g,height:v})=>(!!p||!!(g&&v))&&LJ(m))),l.length===0){Promise.resolve().then(()=>{if(this.hls){r.levels.length&&this.warn(`One or more CODECS in variant not supported: ${JSON.stringify(r.levels[0].attrs)}`);const p=new Error("no level with compatible codecs found in manifest");this.hls.trigger(w.ERROR,{type:Ve.MEDIA_ERROR,details:J.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:r.url,error:p,reason:p.message})}});return}if(r.audioTracks){const{preferManagedMediaSource:p}=this.hls.config;a=r.audioTracks.filter(m=>!m.audioCodec||Eb(m.audioCodec,"audio",p)),EI(a)}r.subtitles&&(o=r.subtitles,EI(o));const u=l.slice(0);l.sort((p,m)=>{if(p.attrs["HDCP-LEVEL"]!==m.attrs["HDCP-LEVEL"])return(p.attrs["HDCP-LEVEL"]||"")>(m.attrs["HDCP-LEVEL"]||"")?1:-1;if(n&&p.height!==m.height)return p.height-m.height;if(p.frameRate!==m.frameRate)return p.frameRate-m.frameRate;if(p.videoRange!==m.videoRange)return Bm.indexOf(p.videoRange)-Bm.indexOf(m.videoRange);if(p.videoCodec!==m.videoCodec){const g=RC(p.videoCodec),v=RC(m.videoCodec);if(g!==v)return v-g}if(p.uri===m.uri&&p.codecSet!==m.codecSet){const g=$m(p.codecSet),v=$m(m.codecSet);if(g!==v)return v-g}return p.averageBitrate!==m.averageBitrate?p.averageBitrate-m.averageBitrate:0});let c=u[0];if(this.steering&&(l=this.steering.filterParsedLevels(l),l.length!==u.length)){for(let p=0;p<u.length;p++)if(u[p].pathwayId===l[0].pathwayId){c=u[p];break}}this._levels=l;for(let p=0;p<l.length;p++)if(l[p]===c){var d;this._firstLevel=p;const m=c.bitrate,g=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${l.length} level(s) found, first bitrate: ${m}`),((d=this.hls.userConfig)==null?void 0:d.abrEwmaDefaultEstimate)===void 0){const v=Math.min(m,this.hls.config.abrEwmaDefaultEstimateMax);v>g&&g===TN.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=v)}break}const h=s&&!i,f={levels:l,audioTracks:a,subtitleTracks:o,sessionData:r.sessionData,sessionKeys:r.sessionKeys,firstLevel:this._firstLevel,stats:r.stats,audio:s,video:i,altAudio:!h&&a.some(p=>!!p.url)};this.hls.trigger(w.MANIFEST_PARSED,f),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}get levels(){return this._levels.length===0?null:this._levels}get level(){return this.currentLevelIndex}set level(e){const r=this._levels;if(r.length===0)return;if(e<0||e>=r.length){const c=new Error("invalid level idx"),d=e<0;if(this.hls.trigger(w.ERROR,{type:Ve.OTHER_ERROR,details:J.LEVEL_SWITCH_ERROR,level:e,fatal:d,error:c,reason:c.message}),d)return;e=Math.min(e,r.length-1)}const n=this.currentLevelIndex,i=this.currentLevel,s=i?i.attrs["PATHWAY-ID"]:void 0,a=r[e],o=a.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=a,n===e&&a.details&&i&&s===o)return;this.log(`Switching to level ${e} (${a.height?a.height+"p ":""}${a.videoRange?a.videoRange+" ":""}${a.codecSet?a.codecSet+" ":""}@${a.bitrate})${o?" with Pathway "+o:""} from level ${n}${s?" with Pathway "+s:""}`);const l={level:e,attrs:a.attrs,details:a.details,bitrate:a.bitrate,averageBitrate:a.averageBitrate,maxBitrate:a.maxBitrate,realBitrate:a.realBitrate,width:a.width,height:a.height,codecSet:a.codecSet,audioCodec:a.audioCodec,videoCodec:a.videoCodec,audioGroups:a.audioGroups,subtitleGroups:a.subtitleGroups,loaded:a.loaded,loadError:a.loadError,fragmentError:a.fragmentError,name:a.name,id:a.id,uri:a.uri,url:a.url,urlId:0,audioGroupIds:a.audioGroupIds,textGroupIds:a.textGroupIds};this.hls.trigger(w.LEVEL_SWITCHING,l);const u=a.details;if(!u||u.live){const c=this.switchParams(a.uri,i==null?void 0:i.details,u);this.loadPlaylist(c)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}onError(e,r){r.fatal||!r.context||r.context.type===pt.LEVEL&&r.context.level===this.level&&this.checkRetry(r)}onFragBuffered(e,{frag:r}){if(r!==void 0&&r.type===je.MAIN){const n=r.elementaryStreams;if(!Object.keys(n).some(s=>!!n[s]))return;const i=this._levels[r.level];i!=null&&i.loadError&&(this.log(`Resetting level error count of ${i.loadError} on frag buffered`),i.loadError=0)}}onLevelLoaded(e,r){var n;const{level:i,details:s}=r,a=this._levels[i];if(!a){var o;this.warn(`Invalid level index ${i}`),(o=r.deliveryDirectives)!=null&&o.skip&&(s.deltaUpdateFailed=!0);return}i===this.currentLevelIndex?(a.fragmentError===0&&(a.loadError=0),this.playlistLoaded(i,r,a.details)):(n=r.deliveryDirectives)!=null&&n.skip&&(s.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist();const r=this.currentLevelIndex,n=this.currentLevel;if(n&&this.shouldLoadPlaylist(n)){let i=n.uri;if(e)try{i=e.addDirectives(i)}catch(a){this.warn(`Could not construct new URL with HLS Delivery Directives: ${a}`)}const s=n.attrs["PATHWAY-ID"];this.log(`Loading level index ${r}${(e==null?void 0:e.msn)!==void 0?" at sn "+e.msn+" part "+e.part:""} with${s?" Pathway "+s:""} ${i}`),this.clearTimer(),this.hls.trigger(w.LEVEL_LOADING,{url:i,level:r,pathwayId:n.attrs["PATHWAY-ID"],id:0,deliveryDirectives:e||null})}}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var r;const n=this._levels.filter((i,s)=>s!==e?!0:(this.steering&&this.steering.removeLevel(i),i===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,i.details&&i.details.fragments.forEach(a=>a.level=-1)),!1));$P(n),this._levels=n,this.currentLevelIndex>-1&&(r=this.currentLevel)!=null&&r.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.hls.trigger(w.LEVELS_UPDATED,{levels:n})}onLevelsUpdated(e,{levels:r}){this._levels=r}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:r,maxHdcpLevel:n}=this.hls;this._maxAutoLevel!==r&&(this._maxAutoLevel=r,this.hls.trigger(w.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:r,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:n}))}}function EI(t){const e={};t.forEach(r=>{const n=r.groupId||"";r.id=e[n]=e[n]||0,e[n]++})}class Ore{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const n in this.keyUriToKeyInfo){const i=this.keyUriToKeyInfo[n].loader;if(i){var r;if(e&&e!==((r=i.context)==null?void 0:r.frag.type))return;i.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const r=this.keyUriToKeyInfo[e];(r.mediaKeySessionContext||r.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const r=this.keyUriToKeyInfo[e].loader;r&&r.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,r=J.KEY_LOAD_ERROR,n,i,s){return new Bs({type:Ve.NETWORK_ERROR,details:r,fatal:!1,frag:e,response:s,error:n,networkDetails:i})}loadClear(e,r){if(this.emeController&&this.config.emeEnabled){const{sn:n,cc:i}=e;for(let s=0;s<r.length;s++){const a=r[s];if(i<=a.cc&&(n==="initSegment"||a.sn==="initSegment"||n<a.sn)){this.emeController.selectKeySystemFormat(a).then(o=>{a.setKeyFormat(o)});break}}}}load(e){return!e.decryptdata&&e.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(e).then(r=>this.loadInternal(e,r)):this.loadInternal(e)}loadInternal(e,r){var n,i;r&&e.setKeyFormat(r);const s=e.decryptdata;if(!s){const u=new Error(r?`Expected frag.decryptdata to be defined after setting format ${r}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,J.KEY_LOAD_ERROR,u))}const a=s.uri;if(!a)return Promise.reject(this.createKeyLoadError(e,J.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${a}"`)));let o=this.keyUriToKeyInfo[a];if((n=o)!=null&&n.decryptdata.key)return s.key=o.decryptdata.key,Promise.resolve({frag:e,keyInfo:o});if((i=o)!=null&&i.keyLoadPromise){var l;switch((l=o.mediaKeySessionContext)==null?void 0:l.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return o.keyLoadPromise.then(u=>(s.key=u.keyInfo.decryptdata.key,{frag:e,keyInfo:o}))}}switch(o=this.keyUriToKeyInfo[a]={decryptdata:s,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},s.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return s.keyFormat==="identity"?this.loadKeyHTTP(o,e):this.loadKeyEME(o,e);case"AES-128":return this.loadKeyHTTP(o,e);default:return Promise.reject(this.createKeyLoadError(e,J.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${s.method}"`)))}}loadKeyEME(e,r){const n={frag:r,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const i=this.emeController.loadKey(n);if(i)return(e.keyLoadPromise=i.then(s=>(e.mediaKeySessionContext=s,n))).catch(s=>{throw e.keyLoadPromise=null,s})}return Promise.resolve(n)}loadKeyHTTP(e,r){const n=this.config,i=n.loader,s=new i(n);return r.keyLoader=e.loader=s,e.keyLoadPromise=new Promise((a,o)=>{const l={keyInfo:e,frag:r,responseType:"arraybuffer",url:e.decryptdata.uri},u=n.keyLoadPolicy.default,c={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(h,f,p,m)=>{const{frag:g,keyInfo:v,url:b}=p;if(!g.decryptdata||v!==this.keyUriToKeyInfo[b])return o(this.createKeyLoadError(g,J.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),m));v.decryptdata.key=g.decryptdata.key=new Uint8Array(h.data),g.keyLoader=null,v.loader=null,a({frag:g,keyInfo:v})},onError:(h,f,p,m)=>{this.resetLoader(f),o(this.createKeyLoadError(r,J.KEY_LOAD_ERROR,new Error(`HTTP Error ${h.code} loading key ${h.text}`),p,tn({url:l.url,data:void 0},h)))},onTimeout:(h,f,p)=>{this.resetLoader(f),o(this.createKeyLoadError(r,J.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),p))},onAbort:(h,f,p)=>{this.resetLoader(f),o(this.createKeyLoadError(r,J.INTERNAL_ABORTED,new Error("key loading aborted"),p))}};s.load(l,c,d)})}resetLoader(e){const{frag:r,keyInfo:n,url:i}=e,s=n.loader;r.keyLoader===s&&(r.keyLoader=null,n.loader=null),delete this.keyUriToKeyInfo[i],s&&s.destroy()}}function xN(){return self.SourceBuffer||self.WebKitSourceBuffer}function SN(){if(!pl())return!1;const e=xN();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function Mre(){if(!SN())return!1;const t=pl();return typeof(t==null?void 0:t.isTypeSupported)=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>t.isTypeSupported(fh(e,"video")))||["mp4a.40.2","fLaC"].some(e=>t.isTypeSupported(fh(e,"audio"))))}function Pre(){var t;const e=xN();return typeof(e==null||(t=e.prototype)==null?void 0:t.changeType)=="function"}const Nre=250,z0=2,Fre=.1,$re=.05;class Ure{constructor(e,r,n,i){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=r,this.fragmentTracker=n,this.hls=i}destroy(){this.media=null,this.hls=this.fragmentTracker=null}poll(e,r){const{config:n,media:i,stalled:s}=this;if(i===null)return;const{currentTime:a,seeking:o}=i,l=this.seeking&&!o,u=!this.seeking&&o;if(this.seeking=o,a!==e){if(this.moved=!0,o||(this.nudgeRetry=0),s!==null){if(this.stallReported){const g=self.performance.now()-s;G.warn(`playback not stuck anymore @${a}, after ${Math.round(g)}ms`),this.stallReported=!1}this.stalled=null}return}if(u||l){this.stalled=null;return}if(i.paused&&!o||i.ended||i.playbackRate===0||!Zt.getBuffered(i).length){this.nudgeRetry=0;return}const c=Zt.bufferInfo(i,a,0),d=c.nextStart||0;if(o){const g=c.len>z0,v=!d||r&&r.start<=a||d-a>z0&&!this.fragmentTracker.getPartialFragment(a);if(g||v)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var h;if(!(c.len>0)&&!d)return;const v=Math.max(d,c.start||0)-a,b=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,T=(b==null||(h=b.details)==null?void 0:h.live)?b.details.targetduration*2:z0,x=this.fragmentTracker.getPartialFragment(a);if(v>0&&(v<=T||x)){i.paused||this._trySkipBufferHole(x);return}}const f=self.performance.now();if(s===null){this.stalled=f;return}const p=f-s;if(!o&&p>=Nre&&(this._reportStall(c),!this.media))return;const m=Zt.bufferInfo(i,a,n.maxBufferHole);this._tryFixBufferStall(m,p)}_tryFixBufferStall(e,r){const{config:n,fragmentTracker:i,media:s}=this;if(s===null)return;const a=s.currentTime,o=i.getPartialFragment(a);o&&(this._trySkipBufferHole(o)||!this.media)||(e.len>n.maxBufferHole||e.nextStart&&e.nextStart-a<n.maxBufferHole)&&r>n.highBufferWatchdogPeriod*1e3&&(G.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}_reportStall(e){const{hls:r,media:n,stallReported:i}=this;if(!i&&n){this.stallReported=!0;const s=new Error(`Playback stalling at @${n.currentTime} due to low buffer (${JSON.stringify(e)})`);G.warn(s.message),r.trigger(w.ERROR,{type:Ve.MEDIA_ERROR,details:J.BUFFER_STALLED_ERROR,fatal:!1,error:s,buffer:e.len})}}_trySkipBufferHole(e){const{config:r,hls:n,media:i}=this;if(i===null)return 0;const s=i.currentTime,a=Zt.bufferInfo(i,s,0),o=s<a.start?a.start:a.nextStart;if(o){const l=a.len<=r.maxBufferHole,u=a.len>0&&a.len<1&&i.readyState<3,c=o-s;if(c>0&&(l||u)){if(c>r.maxBufferHole){const{fragmentTracker:h}=this;let f=!1;if(s===0){const p=h.getAppendedFrag(0,je.MAIN);p&&o<p.end&&(f=!0)}if(!f){const p=e||h.getAppendedFrag(s,je.MAIN);if(p){let m=!1,g=p.end;for(;g<o;){const v=h.getPartialFragment(g);if(v)g+=v.duration;else{m=!0;break}}if(m)return 0}}}const d=Math.max(o+$re,s+Fre);if(G.warn(`skipping hole, adjusting currentTime from ${s} to ${d}`),this.moved=!0,this.stalled=null,i.currentTime=d,e&&!e.gap){const h=new Error(`fragment loaded with buffer holes, seeking from ${s} to ${d}`);n.trigger(w.ERROR,{type:Ve.MEDIA_ERROR,details:J.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:h,reason:h.message,frag:e})}return d}}return 0}_tryNudgeBuffer(){const{config:e,hls:r,media:n,nudgeRetry:i}=this;if(n===null)return;const s=n.currentTime;if(this.nudgeRetry++,i<e.nudgeMaxRetry){const a=s+(i+1)*e.nudgeOffset,o=new Error(`Nudging 'currentTime' from ${s} to ${a}`);G.warn(o.message),n.currentTime=a,r.trigger(w.ERROR,{type:Ve.MEDIA_ERROR,details:J.BUFFER_NUDGE_ON_STALL,error:o,fatal:!1})}else{const a=new Error(`Playhead still not moving while enough data buffered @${s} after ${e.nudgeMaxRetry} nudges`);G.error(a.message),r.trigger(w.ERROR,{type:Ve.MEDIA_ERROR,details:J.BUFFER_STALLED_ERROR,error:a,fatal:!0})}}}const Bre=100;class jre extends Ux{constructor(e,r,n){super(e,r,n,"[stream-controller]",je.MAIN),this.audioCodecSwap=!1,this.gapController=null,this.level=-1,this._forceStartLoad=!1,this.altAudio=!1,this.audioOnly=!1,this.fragPlaying=null,this.onvplaying=null,this.onvseeked=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(w.MANIFEST_LOADING,this.onManifestLoading,this),e.on(w.MANIFEST_PARSED,this.onManifestParsed,this),e.on(w.LEVEL_LOADING,this.onLevelLoading,this),e.on(w.LEVEL_LOADED,this.onLevelLoaded,this),e.on(w.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(w.ERROR,this.onError,this),e.on(w.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(w.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(w.BUFFER_CREATED,this.onBufferCreated,this),e.on(w.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(w.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(w.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(w.MANIFEST_LOADING,this.onManifestLoading,this),e.off(w.MANIFEST_PARSED,this.onManifestParsed,this),e.off(w.LEVEL_LOADED,this.onLevelLoaded,this),e.off(w.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(w.ERROR,this.onError,this),e.off(w.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(w.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(w.BUFFER_CREATED,this.onBufferCreated,this),e.off(w.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(w.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(w.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying()}startLoad(e){if(this.levels){const{lastCurrentTime:r,hls:n}=this;if(this.stopLoad(),this.setInterval(Bre),this.level=-1,!this.startFragRequested){let i=n.startLevel;i===-1&&(n.config.testBandwidth&&this.levels.length>1?(i=0,this.bitrateTest=!0):i=n.firstAutoLevel),n.nextLoadLevel=i,this.level=n.loadLevel,this.loadedmetadata=!1}r>0&&e===-1&&(this.log(`Override startPosition with lastCurrentTime @${r.toFixed(3)}`),e=r),this.state=ae.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=ae.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case ae.WAITING_LEVEL:{const{levels:r,level:n}=this,i=r==null?void 0:r[n],s=i==null?void 0:i.details;if(s&&(!s.live||this.levelLastLoaded===i)){if(this.waitForCdnTuneIn(s))break;this.state=ae.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=ae.IDLE;break}break}case ae.FRAG_LOADING_WAITING_RETRY:{var e;const r=self.performance.now(),n=this.retryDate;if(!n||r>=n||(e=this.media)!=null&&e.seeking){const{levels:i,level:s}=this,a=i==null?void 0:i[s];this.resetStartWhenNotLoaded(a||null),this.state=ae.IDLE}}break}this.state===ae.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){super.onTickEnd(),this.checkBuffer(),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:r,levels:n,media:i}=this;if(r===null||!i&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const s=e.nextLoadLevel;if(!(n!=null&&n[s]))return;const a=n[s],o=this.getMainFwdBufferInfo();if(o===null)return;const l=this.getLevelDetails();if(l&&this._streamEnded(o,l)){const m={};this.altAudio&&(m.type="video"),this.hls.trigger(w.BUFFER_EOS,m),this.state=ae.ENDED;return}e.loadLevel!==s&&e.manualLevel===-1&&this.log(`Adapting to level ${s} from level ${this.level}`),this.level=e.nextLoadLevel=s;const u=a.details;if(!u||this.state===ae.WAITING_LEVEL||u.live&&this.levelLastLoaded!==a){this.level=s,this.state=ae.WAITING_LEVEL;return}const c=o.len,d=this.getMaxBufferLength(a.maxBitrate);if(c>=d)return;this.backtrackFragment&&this.backtrackFragment.start>o.end&&(this.backtrackFragment=null);const h=this.backtrackFragment?this.backtrackFragment.start:o.end;let f=this.getNextFragment(h,u);if(this.couldBacktrack&&!this.fragPrevious&&f&&f.sn!=="initSegment"&&this.fragmentTracker.getState(f)!==Yr.OK){var p;const g=((p=this.backtrackFragment)!=null?p:f).sn-u.startSN,v=u.fragments[g-1];v&&f.cc===v.cc&&(f=v,this.fragmentTracker.removeFragment(v))}else this.backtrackFragment&&o.len&&(this.backtrackFragment=null);if(f&&this.isLoopLoading(f,h)){if(!f.gap){const g=this.audioOnly&&!this.altAudio?Mt.AUDIO:Mt.VIDEO,v=(g===Mt.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;v&&this.afterBufferFlushed(v,g,je.MAIN)}f=this.getNextFragmentLoopLoading(f,u,o,je.MAIN,d)}f&&(f.initSegment&&!f.initSegment.data&&!this.bitrateTest&&(f=f.initSegment),this.loadFragment(f,a,h))}loadFragment(e,r,n){const i=this.fragmentTracker.getState(e);this.fragCurrent=e,i===Yr.NOT_LOADED||i===Yr.PARTIAL?e.sn==="initSegment"?this._loadInitSegment(e,r):this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,r)):(this.startFragRequested=!0,super.loadFragment(e,r,n)):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,je.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:r}=this;if(r!=null&&r.readyState){let n;const i=this.getAppendedFrag(r.currentTime);i&&i.start>1&&this.flushMainBuffer(0,i.start-1);const s=this.getLevelDetails();if(s!=null&&s.live){const o=this.getMainFwdBufferInfo();if(!o||o.len<s.targetduration*2)return}if(!r.paused&&e){const o=this.hls.nextLoadLevel,l=e[o],u=this.fragLastKbps;u&&this.fragCurrent?n=this.fragCurrent.duration*l.maxBitrate/(1e3*u)+1:n=0}else n=0;const a=this.getBufferedFrag(r.currentTime+n);if(a){const o=this.followingBufferedFrag(a);if(o){this.abortCurrentFrag();const l=o.maxStartPTS?o.maxStartPTS:o.start,u=o.duration,c=Math.max(a.end,l+Math.min(Math.max(u-this.config.maxFragLookUpTolerance,u*(this.couldBacktrack?.5:.125)),u*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(c,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case ae.KEY_LOADING:case ae.FRAG_LOADING:case ae.FRAG_LOADING_WAITING_RETRY:case ae.PARSING:case ae.PARSED:this.state=ae.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,r){super.flushMainBuffer(e,r,this.altAudio?"video":null)}onMediaAttached(e,r){super.onMediaAttached(e,r);const n=r.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),n.addEventListener("playing",this.onvplaying),n.addEventListener("seeked",this.onvseeked),this.gapController=new Ure(this.config,n,this.fragmentTracker,this.hls)}onMediaDetaching(){const{media:e}=this;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),super.onMediaDetaching()}onMediaPlaying(){this.tick()}onMediaSeeked(){const e=this.media,r=e?e.currentTime:null;xe(r)&&this.log(`Media seeked to ${r.toFixed(3)}`);const n=this.getMainFwdBufferInfo();if(n===null||n.len===0){this.warn(`Main forward buffer length on "seeked" event ${n?n.len:"empty"})`);return}this.tick()}onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(w.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=this.fragLastKbps=0,this.levels=this.fragPlaying=this.backtrackFragment=this.levelLastLoaded=null,this.altAudio=this.audioOnly=this.startFragRequested=!1}onManifestParsed(e,r){let n=!1,i=!1;r.levels.forEach(s=>{const a=s.audioCodec;a&&(n=n||a.indexOf("mp4a.40.2")!==-1,i=i||a.indexOf("mp4a.40.5")!==-1)}),this.audioCodecSwitch=n&&i&&!Pre(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=r.levels,this.startFragRequested=!1}onLevelLoading(e,r){const{levels:n}=this;if(!n||this.state!==ae.IDLE)return;const i=n[r.level];(!i.details||i.details.live&&this.levelLastLoaded!==i||this.waitForCdnTuneIn(i.details))&&(this.state=ae.WAITING_LEVEL)}onLevelLoaded(e,r){var n;const{levels:i}=this,s=r.level,a=r.details,o=a.totalduration;if(!i){this.warn(`Levels were reset while loading level ${s}`);return}this.log(`Level ${s} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""}, cc [${a.startCC}, ${a.endCC}] duration:${o}`);const l=i[s],u=this.fragCurrent;u&&(this.state===ae.FRAG_LOADING||this.state===ae.FRAG_LOADING_WAITING_RETRY)&&u.level!==r.level&&u.loader&&this.abortCurrentFrag();let c=0;if(a.live||(n=l.details)!=null&&n.live){var d;if(this.checkLiveUpdate(a),a.deltaUpdateFailed)return;c=this.alignPlaylists(a,l.details,(d=this.levelLastLoaded)==null?void 0:d.details)}if(l.details=a,this.levelLastLoaded=l,this.hls.trigger(w.LEVEL_UPDATED,{details:a,level:s}),this.state===ae.WAITING_LEVEL){if(this.waitForCdnTuneIn(a))return;this.state=ae.IDLE}this.startFragRequested?a.live&&this.synchronizeToLiveEdge(a):this.setStartPosition(a,c),this.tick()}_handleFragmentLoadProgress(e){var r;const{frag:n,part:i,payload:s}=e,{levels:a}=this;if(!a){this.warn(`Levels were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const o=a[n.level],l=o.details;if(!l){this.warn(`Dropping fragment ${n.sn} of level ${n.level} after level details were reset`),this.fragmentTracker.removeFragment(n);return}const u=o.videoCodec,c=l.PTSKnown||!l.live,d=(r=n.initSegment)==null?void 0:r.data,h=this._getAudioCodec(o),f=this.transmuxer=this.transmuxer||new iN(this.hls,je.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),p=i?i.index:-1,m=p!==-1,g=new Fx(n.level,n.sn,n.stats.chunkCount,s.byteLength,p,m),v=this.initPTS[n.cc];f.push(s,d,h,u,n,i,l.totalduration,c,g,v)}onAudioTrackSwitching(e,r){const n=this.altAudio;if(!!!r.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const a=this.fragCurrent;a&&(this.log("Switching to main audio track, cancel main fragment load"),a.abortRequests(),this.fragmentTracker.removeFragment(a)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();const s=this.hls;n&&(s.trigger(w.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),s.trigger(w.AUDIO_TRACK_SWITCHED,r)}}onAudioTrackSwitched(e,r){const n=r.id,i=!!this.hls.audioTracks[n].url;if(i){const s=this.videoBuffer;s&&this.mediaBuffer!==s&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=s)}this.altAudio=i,this.tick()}onBufferCreated(e,r){const n=r.tracks;let i,s,a=!1;for(const o in n){const l=n[o];if(l.id==="main"){if(s=o,i=l,o==="video"){const u=n[o];u&&(this.videoBuffer=u.buffer)}}else a=!0}a&&i?(this.log(`Alternate track found, use ${s}.buffered to schedule main fragment loading`),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media}onFragBuffered(e,r){const{frag:n,part:i}=r;if(n&&n.type!==je.MAIN)return;if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${i?" p: "+i.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}`),this.state===ae.PARSED&&(this.state=ae.IDLE);return}const s=i?i.stats:n.stats;this.fragLastKbps=Math.round(8*s.total/(s.buffering.end-s.loading.first)),n.sn!=="initSegment"&&(this.fragPrevious=n),this.fragBufferedComplete(n,i)}onError(e,r){var n;if(r.fatal){this.state=ae.ERROR;return}switch(r.details){case J.FRAG_GAP:case J.FRAG_PARSING_ERROR:case J.FRAG_DECRYPT_ERROR:case J.FRAG_LOAD_ERROR:case J.FRAG_LOAD_TIMEOUT:case J.KEY_LOAD_ERROR:case J.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(je.MAIN,r);break;case J.LEVEL_LOAD_ERROR:case J.LEVEL_LOAD_TIMEOUT:case J.LEVEL_PARSING_ERROR:!r.levelRetry&&this.state===ae.WAITING_LEVEL&&((n=r.context)==null?void 0:n.type)===pt.LEVEL&&(this.state=ae.IDLE);break;case J.BUFFER_APPEND_ERROR:case J.BUFFER_FULL_ERROR:if(!r.parent||r.parent!=="main")return;if(r.details===J.BUFFER_APPEND_ERROR){this.resetLoadingState();return}this.reduceLengthAndFlushBuffer(r)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case J.INTERNAL_EXCEPTION:this.recoverWorkerError(r);break}}checkBuffer(){const{media:e,gapController:r}=this;if(!(!e||!r||!e.readyState)){if(this.loadedmetadata||!Zt.getBuffered(e).length){const n=this.state!==ae.IDLE?this.fragCurrent:null;r.poll(this.lastCurrentTime,n)}this.lastCurrentTime=e.currentTime}}onFragLoadEmergencyAborted(){this.state=ae.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()}onBufferFlushed(e,{type:r}){if(r!==Mt.AUDIO||this.audioOnly&&!this.altAudio){const n=(r===Mt.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(n,r,je.MAIN),this.tick()}}onLevelsUpdated(e,r){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level),this.levels=r.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const r=e.currentTime;let n=this.startPosition;if(n>=0&&r<n){if(e.seeking){this.log(`could not seek to ${n}, already seeking at ${r}`);return}const i=Zt.getBuffered(e),a=(i.length?i.start(0):0)-n;a>0&&(a<this.config.maxBufferHole||a<this.config.maxFragLookUpTolerance)&&(this.log(`adjusting start position by ${a} to match buffer start`),n+=a,this.startPosition=n),this.log(`seek to target start position ${n} from current time ${r}`),e.currentTime=n}}_getAudioCodec(e){let r=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&r&&(this.log("Swapping audio codec"),r.indexOf("mp4a.40.5")!==-1?r="mp4a.40.2":r="mp4a.40.5"),r}_loadBitrateTestFrag(e,r){e.bitrateTest=!0,this._doFragLoad(e,r).then(n=>{const{hls:i}=this;if(!n||this.fragContextChanged(e))return;r.fragmentError=0,this.state=ae.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const s=e.stats;s.parsing.start=s.parsing.end=s.buffering.start=s.buffering.end=self.performance.now(),i.trigger(w.FRAG_LOADED,n),e.bitrateTest=!1})}_handleTransmuxComplete(e){var r;const n="main",{hls:i}=this,{remuxResult:s,chunkMeta:a}=e,o=this.getCurrentContext(a);if(!o){this.resetWhenMissingContext(a);return}const{frag:l,part:u,level:c}=o,{video:d,text:h,id3:f,initSegment:p}=s,{details:m}=c,g=this.altAudio?void 0:s.audio;if(this.fragContextChanged(l)){this.fragmentTracker.removeFragment(l);return}if(this.state=ae.PARSING,p){if(p!=null&&p.tracks){const y=l.initSegment||l;this._bufferInitSegment(c,p.tracks,y,a),i.trigger(w.FRAG_PARSING_INIT_SEGMENT,{frag:y,id:n,tracks:p.tracks})}const v=p.initPTS,b=p.timescale;xe(v)&&(this.initPTS[l.cc]={baseTime:v,timescale:b},i.trigger(w.INIT_PTS_FOUND,{frag:l,id:n,initPTS:v,timescale:b}))}if(d&&m&&l.sn!=="initSegment"){const v=m.fragments[l.sn-1-m.startSN],b=l.sn===m.startSN,y=!v||l.cc>v.cc;if(s.independent!==!1){const{startPTS:T,endPTS:x,startDTS:_,endDTS:S}=d;if(u)u.elementaryStreams[d.type]={startPTS:T,endPTS:x,startDTS:_,endDTS:S};else if(d.firstKeyFrame&&d.independent&&a.id===1&&!y&&(this.couldBacktrack=!0),d.dropped&&d.independent){const A=this.getMainFwdBufferInfo(),k=(A?A.end:this.getLoadPosition())+this.config.maxBufferHole,I=d.firstKeyFramePTS?d.firstKeyFramePTS:T;if(!b&&k<I-this.config.maxBufferHole&&!y){this.backtrack(l);return}else y&&(l.gap=!0);l.setElementaryStreamInfo(d.type,l.start,x,l.start,S,!0)}else b&&T>z0&&(l.gap=!0);l.setElementaryStreamInfo(d.type,T,x,_,S),this.backtrackFragment&&(this.backtrackFragment=l),this.bufferFragmentData(d,l,u,a,b||y)}else if(b||y)l.gap=!0;else{this.backtrack(l);return}}if(g){const{startPTS:v,endPTS:b,startDTS:y,endDTS:T}=g;u&&(u.elementaryStreams[Mt.AUDIO]={startPTS:v,endPTS:b,startDTS:y,endDTS:T}),l.setElementaryStreamInfo(Mt.AUDIO,v,b,y,T),this.bufferFragmentData(g,l,u,a)}if(m&&f!=null&&(r=f.samples)!=null&&r.length){const v={id:n,frag:l,details:m,samples:f.samples};i.trigger(w.FRAG_PARSING_METADATA,v)}if(m&&h){const v={id:n,frag:l,details:m,samples:h.samples};i.trigger(w.FRAG_PARSING_USERDATA,v)}}_bufferInitSegment(e,r,n,i){if(this.state!==ae.PARSING)return;this.audioOnly=!!r.audio&&!r.video,this.altAudio&&!this.audioOnly&&delete r.audio;const{audio:s,video:a,audiovideo:o}=r;if(s){let l=e.audioCodec;const u=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){l&&(l.indexOf("mp4a.40.5")!==-1?l="mp4a.40.2":l="mp4a.40.5");const c=s.metadata;c&&"channelCount"in c&&(c.channelCount||1)!==1&&u.indexOf("firefox")===-1&&(l="mp4a.40.5")}l&&l.indexOf("mp4a.40.5")!==-1&&u.indexOf("android")!==-1&&s.container!=="audio/mpeg"&&(l="mp4a.40.2",this.log(`Android: force audio codec to ${l}`)),e.audioCodec&&e.audioCodec!==l&&this.log(`Swapping manifest audio codec "${e.audioCodec}" for "${l}"`),s.levelCodec=l,s.id="main",this.log(`Init audio buffer, container:${s.container}, codecs[selected/level/parsed]=[${l||""}/${e.audioCodec||""}/${s.codec}]`)}a&&(a.levelCodec=e.videoCodec,a.id="main",this.log(`Init video buffer, container:${a.container}, codecs[level/parsed]=[${e.videoCodec||""}/${a.codec}]`)),o&&this.log(`Init audiovideo buffer, container:${o.container}, codecs[level/parsed]=[${e.codecs}/${o.codec}]`),this.hls.trigger(w.BUFFER_CODECS,r),Object.keys(r).forEach(l=>{const c=r[l].initSegment;c!=null&&c.byteLength&&this.hls.trigger(w.BUFFER_APPENDING,{type:l,data:c,frag:n,part:null,chunkMeta:i,parent:n.type})}),this.tickImmediate()}getMainFwdBufferInfo(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,je.MAIN)}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=ae.IDLE}checkFragmentChanged(){const e=this.media;let r=null;if(e&&e.readyState>1&&e.seeking===!1){const n=e.currentTime;if(Zt.isBuffered(e,n)?r=this.getAppendedFrag(n):Zt.isBuffered(e,n+.1)&&(r=this.getAppendedFrag(n+.1)),r){this.backtrackFragment=null;const i=this.fragPlaying,s=r.level;(!i||r.sn!==i.sn||i.level!==s)&&(this.fragPlaying=r,this.hls.trigger(w.FRAG_CHANGED,{frag:r}),(!i||i.level!==s)&&this.hls.trigger(w.LEVEL_SWITCHED,{level:s}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){const e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}get currentProgramDateTime(){const e=this.media;if(e){const r=e.currentTime,n=this.currentFrag;if(n&&xe(r)&&xe(n.programDateTime)){const i=n.programDateTime+(r-n.start)*1e3;return new Date(i)}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class Yo{static get version(){return"1.5.17"}static isMSESupported(){return SN()}static isSupported(){return Mre()}static getMediaSource(){return pl()}static get Events(){return w}static get ErrorTypes(){return Ve}static get ErrorDetails(){return J}static get DefaultConfig(){return Yo.defaultConfig?Yo.defaultConfig:TN}static set DefaultConfig(e){Yo.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this.started=!1,this._emitter=new Wx,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,this.triggeringException=void 0,IQ(e.debug||!1,"Hls instance");const r=this.config=kre(Yo.DefaultConfig,e);this.userConfig=e,r.progressive&&Lre(r);const{abrController:n,bufferController:i,capLevelController:s,errorController:a,fpsController:o}=r,l=new a(this),u=this.abrController=new n(this),c=this.bufferController=new i(this),d=this.capLevelController=new s(this),h=new o(this),f=new xJ(this),p=new CJ(this),m=r.contentSteeringController,g=m?new m(this):null,v=this.levelController=new Dre(this,g),b=new nee(this),y=new Ore(this.config),T=this.streamController=new jre(this,b,y);d.setStreamController(T),h.setStreamController(T);const x=[f,v,T];g&&x.splice(1,0,g),this.networkControllers=x;const _=[u,c,d,h,p,b];this.audioTrackController=this.createController(r.audioTrackController,x);const S=r.audioStreamController;S&&x.push(new S(this,b,y)),this.subtitleTrackController=this.createController(r.subtitleTrackController,x);const A=r.subtitleStreamController;A&&x.push(new A(this,b,y)),this.createController(r.timelineController,_),y.emeController=this.emeController=this.createController(r.emeController,_),this.cmcdController=this.createController(r.cmcdController,_),this.latencyController=this.createController(IJ,_),this.coreComponents=_,x.push(l);const k=l.onErrorOut;typeof k=="function"&&this.on(w.ERROR,k,l)}createController(e,r){if(e){const n=new e(this);return r&&r.push(n),n}return null}on(e,r,n=this){this._emitter.on(e,r,n)}once(e,r,n=this){this._emitter.once(e,r,n)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,r,n=this,i){this._emitter.off(e,r,n,i)}listeners(e){return this._emitter.listeners(e)}emit(e,r,n){return this._emitter.emit(e,r,n)}trigger(e,r){if(this.config.debug)return this.emit(e,e,r);try{return this.emit(e,e,r)}catch(n){if(G.error("An internal error happened while handling event "+e+'. Error message: "'+n.message+'". Here is a stacktrace:',n),!this.triggeringException){this.triggeringException=!0;const i=e===w.ERROR;this.trigger(w.ERROR,{type:Ve.OTHER_ERROR,details:J.INTERNAL_EXCEPTION,fatal:i,event:e,error:n}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){G.log("destroy"),this.trigger(w.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(r=>r.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(r=>r.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){G.log("attachMedia"),this._media=e,this.trigger(w.MEDIA_ATTACHING,{media:e})}detachMedia(){G.log("detachMedia"),this.trigger(w.MEDIA_DETACHING,void 0),this._media=null}loadSource(e){this.stopLoad();const r=this.media,n=this.url,i=this.url=Lx.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,G.log(`loadSource:${i}`),r&&n&&(n!==i||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(r)),this.trigger(w.MANIFEST_LOADING,{url:e})}startLoad(e=-1){G.log(`startLoad(${e})`),this.started=!0,this.networkControllers.forEach(r=>{r.startLoad(e)})}stopLoad(){G.log("stopLoad"),this.started=!1,this.networkControllers.forEach(e=>{e.stopLoad()})}resumeBuffering(){this.started&&this.networkControllers.forEach(e=>{"fragmentLoader"in e&&e.startLoad(-1)})}pauseBuffering(){this.networkControllers.forEach(e=>{"fragmentLoader"in e&&e.stopLoad()})}swapAudioCodec(){G.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){G.log("recoverMediaError");const e=this._media;this.detachMedia(),e&&this.attachMedia(e)}removeLevel(e){this.levelController.removeLevel(e)}get levels(){const e=this.levelController.levels;return e||[]}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){G.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){G.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){G.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){G.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){G.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const r=!!e;r!==this.config.capLevelToPlayerSize&&(r?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=r)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(G.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){kJ(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:r}}=this;if(!e)return 0;const n=e.length;for(let i=0;i<n;i++)if(e[i].maxBitrate>=r)return i;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:r,maxHdcpLevel:n}=this;let i;if(r===-1&&e!=null&&e.length?i=e.length-1:i=r,n)for(let s=i;s--;){const a=e[s].attrs["HDCP-LEVEL"];if(a&&a<=n)return s}return i}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}setAudioOption(e){var r;return(r=this.audioTrackController)==null?void 0:r.setAudioOption(e)}setSubtitleOption(e){var r;return(r=this.subtitleTrackController)==null||r.setSubtitleOption(e),null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const r=this.audioTrackController;r&&(r.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const r=this.subtitleTrackController;r&&(r.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const r=this.subtitleTrackController;r&&(r.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}Yo.defaultConfig=void 0;var sr=Yo,Xt={VIDEO:"video",THUMBNAIL:"thumbnail",STORYBOARD:"storyboard",DRM:"drm"},Ne={NOT_AN_ERROR:0,NETWORK_OFFLINE:2000002,NETWORK_UNKNOWN_ERROR:2e6,NETWORK_NO_STATUS:2000001,NETWORK_INVALID_URL:24e5,NETWORK_NOT_FOUND:2404e3,NETWORK_NOT_READY:2412e3,NETWORK_GENERIC_SERVER_FAIL:25e5,NETWORK_TOKEN_MISSING:2403201,NETWORK_TOKEN_MALFORMED:2412202,NETWORK_TOKEN_EXPIRED:2403210,NETWORK_TOKEN_AUD_MISSING:2403221,NETWORK_TOKEN_AUD_MISMATCH:2403222,NETWORK_TOKEN_SUB_MISMATCH:2403232,ENCRYPTED_ERROR:5e6,ENCRYPTED_UNSUPPORTED_KEY_SYSTEM:5000001,ENCRYPTED_GENERATE_REQUEST_FAILED:5000002,ENCRYPTED_UPDATE_LICENSE_FAILED:5000003,ENCRYPTED_UPDATE_SERVER_CERT_FAILED:5000004,ENCRYPTED_CDM_ERROR:5000005,ENCRYPTED_OUTPUT_RESTRICTED:5000006,ENCRYPTED_MISSING_TOKEN:5000002},tv=t=>t===Xt.VIDEO?"playback":t,ga=class ud extends Error{constructor(e,r=ud.MEDIA_ERR_CUSTOM,n,i){var s;super(e),this.name="MediaError",this.code=r,this.context=i,this.fatal=n??(r>=ud.MEDIA_ERR_NETWORK&&r<=ud.MEDIA_ERR_ENCRYPTED),this.message||(this.message=(s=ud.defaultMessages[this.code])!=null?s:"")}};ga.MEDIA_ERR_ABORTED=1,ga.MEDIA_ERR_NETWORK=2,ga.MEDIA_ERR_DECODE=3,ga.MEDIA_ERR_SRC_NOT_SUPPORTED=4,ga.MEDIA_ERR_ENCRYPTED=5,ga.MEDIA_ERR_CUSTOM=100,ga.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail.",3:"A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format.",4:"An unsupported error occurred. The server or network failed, or your browser does not support this format.",5:"The media is encrypted and there are no keys to decrypt it."};var be=ga,Hre=t=>t==null,Yx=(t,e)=>Hre(e)?!1:t in e,R1={ANY:"any",MUTED:"muted"},$t={ON_DEMAND:"on-demand",LIVE:"live",UNKNOWN:"unknown"},ps={MSE:"mse",NATIVE:"native"},Y0={HEADER:"header",QUERY:"query",NONE:"none"},qm=Object.values(Y0),Qa={M3U8:"application/vnd.apple.mpegurl",MP4:"video/mp4"},_I={HLS:Qa.M3U8};[...Object.values(Qa)];var Vre="en",C1={code:Vre},Sr=(t,e,r,n,i=t)=>{i.addEventListener(e,r,n),t.addEventListener("teardown",()=>{i.removeEventListener(e,r)},{once:!0})};function Wre(t,e,r){e&&r>e&&(r=e);for(let n=0;n<t.length;n++)if(t.start(n)<=r&&t.end(n)>=r)return!0;return!1}var Xx=t=>{let e=t.indexOf("?");if(e<0)return[t];let r=t.slice(0,e),n=t.slice(e);return[r,n]},rv=t=>{let e=t.type;if(e){let n=e.toUpperCase();return Yx(n,_I)?_I[n]:e}let{src:r}=t;return r?Gre(r):""},wN=t=>t==="VOD"?$t.ON_DEMAND:$t.LIVE,AN=t=>t==="EVENT"?Number.POSITIVE_INFINITY:t==="VOD"?Number.NaN:0,Gre=t=>{let e="";try{e=new URL(t).pathname}catch{console.error("invalid url")}let r=e.lastIndexOf(".");if(r<0)return"";let n=e.slice(r+1).toUpperCase();return Yx(n,Qa)?Qa[n]:""},$u=t=>{let e=(t??"").split(".")[1];if(e)try{let r=e.replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(r).split("").map(function(i){return"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(n)}catch{return}},Kre=({exp:t},e=Date.now())=>!t||t*1e3<e,qre=({sub:t},e)=>t!==e,zre=({aud:t},e)=>!t,Yre=({aud:t},e)=>t!==e,RN="en";function Le(t,e=!0){var r,n;let i=e&&(n=(r=C1)==null?void 0:r[t])!=null?n:t,s=e?C1.code:RN;return new Xre(i,s)}var Xre=class{constructor(e,r=(n=>(n=C1)!=null?n:RN)()){this.message=e,this.locale=r}format(e){return this.message.replace(/\{(\w+)\}/g,(r,n)=>{var i;return(i=e[n])!=null?i:""})}toString(){return this.message}},Zre=Object.values(R1),TI=t=>typeof t=="boolean"||typeof t=="string"&&Zre.includes(t),Qre=(t,e,r)=>{let{autoplay:n}=t,i=!1,s=!1,a=TI(n)?n:!!n,o=()=>{i||Sr(e,"playing",()=>{i=!0},{once:!0})};if(o(),Sr(e,"loadstart",()=>{i=!1,o(),Nb(e,a)},{once:!0}),Sr(e,"loadstart",()=>{r||(t.streamType&&t.streamType!==$t.UNKNOWN?s=t.streamType===$t.LIVE:s=!Number.isFinite(e.duration)),Nb(e,a)},{once:!0}),r&&r.once(sr.Events.LEVEL_LOADED,(l,u)=>{var c;t.streamType&&t.streamType!==$t.UNKNOWN?s=t.streamType===$t.LIVE:s=(c=u.details.live)!=null?c:!1}),!a){let l=()=>{!s||Number.isFinite(t.startTime)||(r!=null&&r.liveSyncPosition?e.currentTime=r.liveSyncPosition:Number.isFinite(e.seekable.end(0))&&(e.currentTime=e.seekable.end(0)))};r&&Sr(e,"play",()=>{e.preload==="metadata"?r.once(sr.Events.LEVEL_UPDATED,l):l()},{once:!0})}return l=>{i||(a=TI(l)?l:!!l,Nb(e,a))}},Nb=(t,e)=>{if(!e)return;let r=t.muted,n=()=>t.muted=r;switch(e){case R1.ANY:t.play().catch(()=>{t.muted=!0,t.play().catch(n)});break;case R1.MUTED:t.muted=!0,t.play().catch(n);break;default:t.play().catch(()=>{});break}},Jre=({preload:t,src:e},r,n)=>{let i=d=>{d!=null&&["","none","metadata","auto"].includes(d)?r.setAttribute("preload",d):r.removeAttribute("preload")};if(!n)return i(t),i;let s=!1,a=!1,o=n.config.maxBufferLength,l=n.config.maxBufferSize,u=d=>{i(d);let h=d??r.preload;a||h==="none"||(h==="metadata"?(n.config.maxBufferLength=1,n.config.maxBufferSize=1):(n.config.maxBufferLength=o,n.config.maxBufferSize=l),c())},c=()=>{!s&&e&&(s=!0,n.loadSource(e))};return Sr(r,"play",()=>{a=!0,n.config.maxBufferLength=o,n.config.maxBufferSize=l,c()},{once:!0}),u(t),u};function ene(t,e){var r;if(!("videoTracks"in t))return;let n=new WeakMap;e.on(sr.Events.MANIFEST_PARSED,function(u,c){l();let d=t.addVideoTrack("main");d.selected=!0;for(let[h,f]of c.levels.entries()){let p=d.addRendition(f.url[0],f.width,f.height,f.videoCodec,f.bitrate);n.set(f,`${h}`),p.id=`${h}`}}),e.on(sr.Events.AUDIO_TRACKS_UPDATED,function(u,c){o();for(let d of c.audioTracks){let h=d.default?"main":"alternative",f=t.addAudioTrack(h,d.name,d.lang);f.id=`${d.id}`,d.default&&(f.enabled=!0)}}),t.audioTracks.addEventListener("change",()=>{var u;let c=+((u=[...t.audioTracks].find(h=>h.enabled))==null?void 0:u.id),d=e.audioTracks.map(h=>h.id);c!=e.audioTrack&&d.includes(c)&&(e.audioTrack=c)}),e.on(sr.Events.LEVELS_UPDATED,function(u,c){var d;let h=t.videoTracks[(d=t.videoTracks.selectedIndex)!=null?d:0];if(!h)return;let f=c.levels.map(p=>n.get(p));for(let p of t.videoRenditions)p.id&&!f.includes(p.id)&&h.removeRendition(p)});let i=u=>{let c=u.target.selectedIndex;c!=e.nextLevel&&s(c)},s=u=>{let c=t.currentTime,d=!1,h=(f,p)=>{d||(d=!Number.isFinite(p.endOffset))};e.on(sr.Events.BUFFER_FLUSHING,h),e.nextLevel=u,e.off(sr.Events.BUFFER_FLUSHING,h),d||e.trigger(sr.Events.BUFFER_FLUSHING,{startOffset:c+10,endOffset:1/0,type:"video"})};(r=t.videoRenditions)==null||r.addEventListener("change",i);let a=()=>{for(let u of t.videoTracks)t.removeVideoTrack(u)},o=()=>{for(let u of t.audioTracks)t.removeAudioTrack(u)},l=()=>{a(),o()};e.once(sr.Events.DESTROYING,l)}var Fb=t=>"time"in t?t.time:t.startTime;function tne(t,e){e.on(sr.Events.NON_NATIVE_TEXT_TRACKS_FOUND,(i,{tracks:s})=>{s.forEach(a=>{var o,l;let u=(o=a.subtitleTrack)!=null?o:a.closedCaptions,c=e.subtitleTracks.findIndex(({lang:h,name:f,type:p})=>h==(u==null?void 0:u.lang)&&f===a.label&&p.toLowerCase()===a.kind),d=((l=a._id)!=null?l:a.default)?"default":`${a.kind}${c}`;Zx(t,a.kind,a.label,u==null?void 0:u.lang,d,a.default)})});let r=()=>{if(!e.subtitleTracks.length)return;let i=Array.from(t.textTracks).find(o=>o.id&&o.mode==="showing"&&["subtitles","captions"].includes(o.kind));if(!i)return;let s=e.subtitleTracks[e.subtitleTrack],a=s?s.default?"default":`${e.subtitleTracks[e.subtitleTrack].type.toLowerCase()}${e.subtitleTrack}`:void 0;if(e.subtitleTrack<0||(i==null?void 0:i.id)!==a){let o=e.subtitleTracks.findIndex(({lang:l,name:u,type:c,default:d})=>i.id==="default"&&d||l==i.language&&u===i.label&&c.toLowerCase()===i.kind);e.subtitleTrack=o}(i==null?void 0:i.id)===a&&i.cues&&Array.from(i.cues).forEach(o=>{i.addCue(o)})};t.textTracks.addEventListener("change",r),e.on(sr.Events.CUES_PARSED,(i,{track:s,cues:a})=>{let o=t.textTracks.getTrackById(s);if(!o)return;let l=o.mode==="disabled";l&&(o.mode="hidden"),a.forEach(u=>{var c;(c=o.cues)!=null&&c.getCueById(u.id)||o.addCue(u)}),l&&(o.mode="disabled")}),e.once(sr.Events.DESTROYING,()=>{t.textTracks.removeEventListener("change",r),t.querySelectorAll("track[data-removeondestroy]").forEach(i=>{i.remove()})});let n=()=>{Array.from(t.textTracks).forEach(i=>{var s,a;if(!["subtitles","caption"].includes(i.kind)&&(i.label==="thumbnails"||i.kind==="chapters")){if(!((s=i.cues)!=null&&s.length)){let o="track";i.kind&&(o+=`[kind="${i.kind}"]`),i.label&&(o+=`[label="${i.label}"]`);let l=t.querySelector(o),u=(a=l==null?void 0:l.getAttribute("src"))!=null?a:"";l==null||l.removeAttribute("src"),setTimeout(()=>{l==null||l.setAttribute("src",u)},0)}i.mode!=="hidden"&&(i.mode="hidden")}})};e.once(sr.Events.MANIFEST_LOADED,n),e.once(sr.Events.MEDIA_ATTACHED,n)}function Zx(t,e,r,n,i,s){let a=document.createElement("track");return a.kind=e,a.label=r,n&&(a.srclang=n),i&&(a.id=i),s&&(a.default=!0),a.track.mode=["subtitles","captions"].includes(e)?"disabled":"hidden",a.setAttribute("data-removeondestroy",""),t.append(a),a.track}function rne(t,e){let r=Array.prototype.find.call(t.querySelectorAll("track"),n=>n.track===e);r==null||r.remove()}function ef(t,e,r){var n;return(n=Array.from(t.querySelectorAll("track")).find(i=>i.track.label===e&&i.track.kind===r))==null?void 0:n.track}async function CN(t,e,r,n){let i=ef(t,r,n);return i||(i=Zx(t,n,r),i.mode="hidden",await new Promise(s=>setTimeout(()=>s(void 0),0))),i.mode!=="hidden"&&(i.mode="hidden"),[...e].sort((s,a)=>Fb(a)-Fb(s)).forEach(s=>{var a,o;let l=s.value,u=Fb(s);if("endTime"in s&&s.endTime!=null)i==null||i.addCue(new VTTCue(u,s.endTime,n==="chapters"?l:JSON.stringify(l??null)));else{let c=Array.prototype.findIndex.call(i==null?void 0:i.cues,p=>p.startTime>=u),d=(a=i==null?void 0:i.cues)==null?void 0:a[c],h=d?d.startTime:Number.isFinite(t.duration)?t.duration:Number.MAX_SAFE_INTEGER,f=(o=i==null?void 0:i.cues)==null?void 0:o[c-1];f&&(f.endTime=u),i==null||i.addCue(new VTTCue(u,h,n==="chapters"?l:JSON.stringify(l??null)))}}),t.textTracks.dispatchEvent(new Event("change",{bubbles:!0,composed:!0})),i}var Qx="cuepoints",IN=Object.freeze({label:Qx});async function kN(t,e,r=IN){return CN(t,e,r.label,"metadata")}var I1=t=>({time:t.startTime,value:JSON.parse(t.text)});function nne(t,e={label:Qx}){let r=ef(t,e.label,"metadata");return r!=null&&r.cues?Array.from(r.cues,n=>I1(n)):[]}function LN(t,e={label:Qx}){var r,n;let i=ef(t,e.label,"metadata");if(!((r=i==null?void 0:i.activeCues)!=null&&r.length))return;if(i.activeCues.length===1)return I1(i.activeCues[0]);let{currentTime:s}=t,a=Array.prototype.find.call((n=i.activeCues)!=null?n:[],({startTime:o,endTime:l})=>o<=s&&l>s);return I1(a||i.activeCues[0])}async function ine(t,e=IN){return new Promise(r=>{Sr(t,"loadstart",async()=>{let n=await kN(t,[],e);Sr(t,"cuechange",()=>{let i=LN(t);if(i){let s=new CustomEvent("cuepointchange",{composed:!0,bubbles:!0,detail:i});t.dispatchEvent(s)}},{},n),r(n)})})}var Jx="chapters",DN=Object.freeze({label:Jx}),k1=t=>({startTime:t.startTime,endTime:t.endTime,value:t.text});async function ON(t,e,r=DN){return CN(t,e,r.label,"chapters")}function sne(t,e={label:Jx}){var r;let n=ef(t,e.label,"chapters");return(r=n==null?void 0:n.cues)!=null&&r.length?Array.from(n.cues,i=>k1(i)):[]}function MN(t,e={label:Jx}){var r,n;let i=ef(t,e.label,"chapters");if(!((r=i==null?void 0:i.activeCues)!=null&&r.length))return;if(i.activeCues.length===1)return k1(i.activeCues[0]);let{currentTime:s}=t,a=Array.prototype.find.call((n=i.activeCues)!=null?n:[],({startTime:o,endTime:l})=>o<=s&&l>s);return k1(a||i.activeCues[0])}async function ane(t,e=DN){return new Promise(r=>{Sr(t,"loadstart",async()=>{let n=await ON(t,[],e);Sr(t,"cuechange",()=>{let i=MN(t);if(i){let s=new CustomEvent("chapterchange",{composed:!0,bubbles:!0,detail:i});t.dispatchEvent(s)}},{},n),r(n)})})}function one(t,e){if(e){let r=e.playingDate;if(r!=null)return new Date(r.getTime()-t.currentTime*1e3)}return typeof t.getStartDate=="function"?t.getStartDate():new Date(NaN)}function lne(t,e){if(e&&e.playingDate)return e.playingDate;if(typeof t.getStartDate=="function"){let r=t.getStartDate();return new Date(r.getTime()+t.currentTime*1e3)}return new Date(NaN)}var Kd={VIDEO:"v",THUMBNAIL:"t",STORYBOARD:"s",DRM:"d"},une=t=>{if(t===Xt.VIDEO)return Kd.VIDEO;if(t===Xt.DRM)return Kd.DRM},cne=(t,e)=>{var r,n;let i=tv(t),s=`${i}Token`;return(r=e.tokens)!=null&&r[i]?(n=e.tokens)==null?void 0:n[i]:Yx(s,e)?e[s]:void 0},zm=(t,e,r,n=!1,i=!(s=>(s=globalThis.navigator)==null?void 0:s.onLine)())=>{var s,a;if(i){let g=Le("Your device appears to be offline",n),v,b=be.MEDIA_ERR_NETWORK,y=new be(g,b,!0,v);return y.errorCategory=e,y.muxCode=Ne.NETWORK_OFFLINE,y.data=t,y}let o="status"in t?t.status:t.code,l=Date.now(),u=be.MEDIA_ERR_NETWORK;if(o===200)return;let c=tv(e),d=cne(e,r),h=une(e),[f]=Xx((s=r.playbackId)!=null?s:"");if(!o||!f)return;let p=$u(d);if(d&&!p){let g=Le("The {tokenNamePrefix}-token provided is invalid or malformed.",n).format({tokenNamePrefix:c}),v=Le("Compact JWT string: {token}",n).format({token:d}),b=new be(g,u,!0,v);return b.errorCategory=e,b.muxCode=Ne.NETWORK_TOKEN_MALFORMED,b.data=t,b}if(o>=500){let g=new be("",u,!0);return g.errorCategory=e,g.muxCode=Ne.NETWORK_UNKNOWN_ERROR,g}if(o===403)if(p){if(Kre(p,l)){let g={timeStyle:"medium",dateStyle:"medium"},v=Le("The video’s secured {tokenNamePrefix}-token has expired.",n).format({tokenNamePrefix:c}),b=Le("Expired at: {expiredDate}. Current time: {currentDate}.",n).format({expiredDate:new Intl.DateTimeFormat("en",g).format((a=p.exp)!=null?a:0*1e3),currentDate:new Intl.DateTimeFormat("en",g).format(l)}),y=new be(v,u,!0,b);return y.errorCategory=e,y.muxCode=Ne.NETWORK_TOKEN_EXPIRED,y.data=t,y}if(qre(p,f)){let g=Le("The video’s playback ID does not match the one encoded in the {tokenNamePrefix}-token.",n).format({tokenNamePrefix:c}),v=Le("Specified playback ID: {playbackId} and the playback ID encoded in the {tokenNamePrefix}-token: {tokenPlaybackId}",n).format({tokenNamePrefix:c,playbackId:f,tokenPlaybackId:p.sub}),b=new be(g,u,!0,v);return b.errorCategory=e,b.muxCode=Ne.NETWORK_TOKEN_SUB_MISMATCH,b.data=t,b}if(zre(p)){let g=Le("The {tokenNamePrefix}-token is formatted with incorrect information.",n).format({tokenNamePrefix:c}),v=Le("The {tokenNamePrefix}-token has no aud value. aud value should be {expectedAud}.",n).format({tokenNamePrefix:c,expectedAud:h}),b=new be(g,u,!0,v);return b.errorCategory=e,b.muxCode=Ne.NETWORK_TOKEN_AUD_MISSING,b.data=t,b}if(Yre(p,h)){let g=Le("The {tokenNamePrefix}-token is formatted with incorrect information.",n).format({tokenNamePrefix:c}),v=Le("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.",n).format({tokenNamePrefix:c,expectedAud:h,aud:p.aud}),b=new be(g,u,!0,v);return b.errorCategory=e,b.muxCode=Ne.NETWORK_TOKEN_AUD_MISMATCH,b.data=t,b}}else{let g=Le("Authorization error trying to access this {category} URL. If this is a signed URL, you might need to provide a {tokenNamePrefix}-token.",n).format({tokenNamePrefix:c,category:e}),v=Le("Specified playback ID: {playbackId}",n).format({playbackId:f}),b=new be(g,u,!0,v);return b.errorCategory=e,b.muxCode=Ne.NETWORK_TOKEN_MISSING,b.data=t,b}if(o===412){let g=Le("This playback-id may belong to a live stream that is not currently active or an asset that is not ready.",n),v=Le("Specified playback ID: {playbackId}",n).format({playbackId:f}),b=new be(g,u,!0,v);return b.errorCategory=e,b.muxCode=Ne.NETWORK_NOT_READY,b.data=t,b}if(o===404){let g=Le("This URL or playback-id does not exist. You may have used an Asset ID or an ID from a different resource.",n),v=Le("Specified playback ID: {playbackId}",n).format({playbackId:f}),b=new be(g,u,!0,v);return b.errorCategory=e,b.muxCode=Ne.NETWORK_NOT_FOUND,b.data=t,b}if(o===400){let g=Le("The URL or playback-id was invalid. You may have used an invalid value as a playback-id."),v=Le("Specified playback ID: {playbackId}",n).format({playbackId:f}),b=new be(g,u,!0,v);return b.errorCategory=e,b.muxCode=Ne.NETWORK_INVALID_URL,b.data=t,b}let m=new be("",u,!0);return m.errorCategory=e,m.muxCode=Ne.NETWORK_UNKNOWN_ERROR,m.data=t,m},X0={FAIRPLAY:"fairplay",PLAYREADY:"playready",WIDEVINE:"widevine"},dne=t=>{if(t.includes("fps"))return X0.FAIRPLAY;if(t.includes("playready"))return X0.PLAYREADY;if(t.includes("widevine"))return X0.WIDEVINE},hne=async t=>fetch(t).then(e=>e.status!==200?Promise.reject(e):e.text()).then(e=>{let r=e.split(`
`).find((n,i,s)=>i&&s[i-1].startsWith("#EXT-X-STREAM-INF"));return fetch(r).then(n=>n.status!==200?Promise.reject(n):n.text()).then(n=>n.split(`
`))}),fne=t=>{var e,r,n;let i=(r=((e=t.find(l=>l.startsWith("#EXT-X-PLAYLIST-TYPE")))!=null?e:"").split(":")[1])==null?void 0:r.trim(),s=wN(i),a=AN(i),o;if(s===$t.LIVE){let l=t.find(u=>u.startsWith("#EXT-X-PART-INF"));if(l)o=+l.split(":")[1].split("=")[1]*2;else{let u=t.find(d=>d.startsWith("#EXT-X-TARGETDURATION")),c=(n=u==null?void 0:u.split(":"))==null?void 0:n[1];o=+(c??6)*3}}return{streamType:s,targetLiveWindow:a,liveEdgeStartOffset:o}},pne=async(t,e)=>{if(e===Qa.MP4)return{streamType:$t.ON_DEMAND,targetLiveWindow:Number.NaN,liveEdgeStartOffset:void 0};if(e===Qa.M3U8){let r=await hne(t);return fne(r)}return console.error(`Media type ${e} is an unrecognized or unsupported type for src ${t}.`),{streamType:void 0,targetLiveWindow:void 0,liveEdgeStartOffset:void 0}},mne=async(t,e,r=rv({src:t}))=>{var n,i,s;let{streamType:a,targetLiveWindow:o,liveEdgeStartOffset:l}=await pne(t,r);((n=dn.get(e))!=null?n:{}).liveEdgeStartOffset=l,((i=dn.get(e))!=null?i:{}).targetLiveWindow=o,e.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0})),((s=dn.get(e))!=null?s:{}).streamType=a,e.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}))},gne=t=>{var e;let r=t.type,n=wN(r),i=AN(r),s,a=!!((e=t.partList)!=null&&e.length);return n===$t.LIVE&&(s=a?t.partTarget*2:t.targetduration*3),{streamType:n,targetLiveWindow:i,liveEdgeStartOffset:s,lowLatency:a}},vne=(t,e,r)=>{var n,i,s,a,o,l,u,c;let{streamType:d,targetLiveWindow:h,liveEdgeStartOffset:f,lowLatency:p}=gne(t);if(d===$t.LIVE){p?(r.config.backBufferLength=(n=r.userConfig.backBufferLength)!=null?n:4,r.config.maxFragLookUpTolerance=(i=r.userConfig.maxFragLookUpTolerance)!=null?i:.001,r.config.abrBandWidthUpFactor=(s=r.userConfig.abrBandWidthUpFactor)!=null?s:r.config.abrBandWidthFactor):r.config.backBufferLength=(a=r.userConfig.backBufferLength)!=null?a:8;let m=Object.freeze({get length(){return e.seekable.length},start(g){return e.seekable.start(g)},end(g){var v;return g>this.length||g<0||Number.isFinite(e.duration)?e.seekable.end(g):(v=r.liveSyncPosition)!=null?v:e.seekable.end(g)}});((o=dn.get(e))!=null?o:{}).seekable=m}((l=dn.get(e))!=null?l:{}).liveEdgeStartOffset=f,((u=dn.get(e))!=null?u:{}).targetLiveWindow=h,e.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0})),((c=dn.get(e))!=null?c:{}).streamType=d,e.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}))},xI,SI,bne=(SI=(xI=globalThis==null?void 0:globalThis.navigator)==null?void 0:xI.userAgent)!=null?SI:"",wI,AI,RI,yne=(RI=(AI=(wI=globalThis==null?void 0:globalThis.navigator)==null?void 0:wI.userAgentData)==null?void 0:AI.platform)!=null?RI:"",Ene=bne.toLowerCase().includes("android")||["x11","android"].some(t=>yne.toLowerCase().includes(t)),dn=new WeakMap,Ga="mux.com",CI,II,PN=(II=(CI=sr).isSupported)==null?void 0:II.call(CI),_ne=Ene,Tne=()=>kx.utils.now(),xne=kx.utils.generateUUID,L1=({playbackId:t,customDomain:e=Ga,maxResolution:r,minResolution:n,renditionOrder:i,programStartTime:s,programEndTime:a,assetStartTime:o,assetEndTime:l,playbackToken:u,tokens:{playback:c=u}={},extraSourceParams:d={}}={})=>{if(!t)return;let[h,f=""]=Xx(t),p=new URL(`https://stream.${e}/${h}.m3u8${f}`);return c||p.searchParams.has("token")?(p.searchParams.forEach((m,g)=>{g!="token"&&p.searchParams.delete(g)}),c&&p.searchParams.set("token",c)):(r&&p.searchParams.set("max_resolution",r),n&&(p.searchParams.set("min_resolution",n),r&&+r.slice(0,-1)<+n.slice(0,-1)&&console.error("minResolution must be <= maxResolution","minResolution",n,"maxResolution",r)),i&&p.searchParams.set("rendition_order",i),s&&p.searchParams.set("program_start_time",`${s}`),a&&p.searchParams.set("program_end_time",`${a}`),o&&p.searchParams.set("asset_start_time",`${o}`),l&&p.searchParams.set("asset_end_time",`${l}`),Object.entries(d).forEach(([m,g])=>{g!=null&&p.searchParams.set(m,g)})),p.toString()},nv=t=>{if(!t)return;let[e]=t.split("?");return e||void 0},NN=t=>{if(!t||!t.startsWith("https://stream."))return;let[e]=new URL(t).pathname.slice(1).split(".m3u8");return e||void 0},Sne=t=>{var e,r,n;return(e=t==null?void 0:t.metadata)!=null&&e.video_id?t.metadata.video_id:WN(t)&&(n=(r=nv(t.playbackId))!=null?r:NN(t.src))!=null?n:t.src},FN=t=>{var e;return(e=dn.get(t))==null?void 0:e.error},D1=t=>{var e,r;return(r=(e=dn.get(t))==null?void 0:e.streamType)!=null?r:$t.UNKNOWN},wne=t=>{var e,r;return(r=(e=dn.get(t))==null?void 0:e.targetLiveWindow)!=null?r:Number.NaN},eS=t=>{var e,r;return(r=(e=dn.get(t))==null?void 0:e.seekable)!=null?r:t.seekable},Ane=t=>{var e;let r=(e=dn.get(t))==null?void 0:e.liveEdgeStartOffset;if(typeof r!="number")return Number.NaN;let n=eS(t);return n.length?n.end(n.length-1)-r:Number.NaN},tS=.034,Rne=(t,e,r=tS)=>Math.abs(t-e)<=r,$N=(t,e,r=tS)=>t>e||Rne(t,e,r),Cne=(t,e=tS)=>t.paused&&$N(t.currentTime,t.duration,e),UN=(t,e)=>{var r,n,i;if(!e||!t.buffered.length)return;if(t.readyState>2)return!1;let s=e.currentLevel>=0?(n=(r=e.levels)==null?void 0:r[e.currentLevel])==null?void 0:n.details:(i=e.levels.find(d=>!!d.details))==null?void 0:i.details;if(!s||s.live)return;let{fragments:a}=s;if(!(a!=null&&a.length))return;if(t.currentTime<t.duration-(s.targetduration+.5))return!1;let o=a[a.length-1];if(t.currentTime<=o.start)return!1;let l=o.start+o.duration/2,u=t.buffered.start(t.buffered.length-1),c=t.buffered.end(t.buffered.length-1);return l>u&&l<c},BN=(t,e)=>t.ended||t.loop?t.ended:e&&UN(t,e)?!0:Cne(t),Ine=(t,e,r)=>{jN(e,r);let{metadata:n={}}=t,{view_session_id:i=xne()}=n,s=Sne(t);n.view_session_id=i,n.video_id=s,t.metadata=n;let a=c=>{var d;(d=e.mux)==null||d.emit("hb",{view_drm_type:c})};t.drmTypeCb=a,dn.set(e,{});let o=kne(t,e),l=Jre(t,e,o);Nne(t,e,o),Fne(t,e,o),ine(e),ane(e);let u=Qre(t,e,o);return{engine:o,setAutoplay:u,setPreload:l}},jN=(t,e)=>{let r=e==null?void 0:e.engine;r&&(r.detachMedia(),r.destroy()),t!=null&&t.mux&&!t.mux.deleted&&(t.mux.destroy(),delete t.mux),t&&(t.removeAttribute("src"),t.load(),t.removeEventListener("error",KN),t.removeEventListener("error",O1),t.removeEventListener("durationchange",GN),dn.delete(t),t.dispatchEvent(new Event("teardown")))};function HN(t,e){var r;let n=rv(t);if(n!==Qa.M3U8)return!0;let i=!n||((r=e.canPlayType(n))!=null?r:!0),{preferPlayback:s}=t,a=s===ps.MSE,o=s===ps.NATIVE;return i&&(o||!(PN&&(a||_ne)))}var kne=(t,e)=>{let{debug:r,streamType:n,startTime:i=-1,metadata:s,preferCmcd:a,_hlsConfig:o={}}=t,l=rv(t)===Qa.M3U8,u=HN(t,e);if(l&&!u&&PN){let c={backBufferLength:30,renderTextTracksNatively:!1,liveDurationInfinity:!0,capLevelToPlayerSize:!0,capLevelOnFPSDrop:!0},d=Lne(n),h=Dne(t),f=a!==Y0.NONE?{useHeaders:a===Y0.HEADER,sessionId:s==null?void 0:s.view_session_id,contentId:s==null?void 0:s.video_id}:void 0;return new sr({debug:r,startPosition:i,cmcd:f,xhrSetup:(p,m)=>{var g,v;if(a&&a!==Y0.QUERY)return;let b=new URL(m);if(!b.searchParams.has("CMCD"))return;let y=((v=(g=b.searchParams.get("CMCD"))==null?void 0:g.split(","))!=null?v:[]).filter(T=>T.startsWith("sid")||T.startsWith("cid")).join(",");b.searchParams.set("CMCD",y),p.open("GET",b)},...c,...d,...h,...o})}},Lne=t=>t===$t.LIVE?{backBufferLength:8}:{},Dne=t=>{let{tokens:{drm:e}={},playbackId:r,drmTypeCb:n}=t,i=nv(r);return!e||!i?{}:{emeEnabled:!0,drmSystems:{"com.apple.fps":{licenseUrl:Z0(t,"fairplay"),serverCertificateUrl:VN(t,"fairplay")},"com.widevine.alpha":{licenseUrl:Z0(t,"widevine")},"com.microsoft.playready":{licenseUrl:Z0(t,"playready")}},requestMediaKeySystemAccessFunc:(s,a)=>(s==="com.widevine.alpha"&&(a=[...a.map(o=>{var l;let u=(l=o.videoCapabilities)==null?void 0:l.map(c=>({...c,robustness:"HW_SECURE_ALL"}));return{...o,videoCapabilities:u}}),...a]),navigator.requestMediaKeySystemAccess(s,a).then(o=>{let l=dne(s);return n==null||n(l),o}))}},One=async t=>{let e=await fetch(t);return e.status!==200?Promise.reject(e):await e.arrayBuffer()},Mne=async(t,e)=>{let r=await fetch(e,{method:"POST",headers:{"Content-type":"application/octet-stream"},body:t});if(r.status!==200)return Promise.reject(r);let n=await r.arrayBuffer();return new Uint8Array(n)},Pne=(t,e)=>{Sr(e,"encrypted",async r=>{try{let n=r.initDataType;if(n!=="skd"){console.error(`Received unexpected initialization data type "${n}"`);return}if(!e.mediaKeys){let l=await navigator.requestMediaKeySystemAccess("com.apple.fps",[{initDataTypes:[n],videoCapabilities:[{contentType:"application/vnd.apple.mpegurl",robustness:""}],distinctiveIdentifier:"not-allowed",persistentState:"not-allowed",sessionTypes:["temporary"]}]).then(c=>{var d;return(d=t.drmTypeCb)==null||d.call(t,X0.FAIRPLAY),c}).catch(()=>{let c=Le("Cannot play DRM-protected content with current security configuration on this browser. Try playing in another browser."),d=new be(c,be.MEDIA_ERR_ENCRYPTED,!0);d.errorCategory=Xt.DRM,d.muxCode=Ne.ENCRYPTED_UNSUPPORTED_KEY_SYSTEM,e.dispatchEvent(new CustomEvent("error",{detail:d}))});if(!l)return;let u=await l.createMediaKeys();try{let c=await One(VN(t,"fairplay")).catch(d=>{if(d instanceof Response){let h=zm(d,Xt.DRM,t);return console.error("mediaError",h==null?void 0:h.message,h==null?void 0:h.context),h?Promise.reject(h):Promise.reject(new Error("Unexpected error in app cert request"))}return Promise.reject(d)});await u.setServerCertificate(c).catch(()=>{let d=Le("Your server certificate failed when attempting to set it. This may be an issue with a no longer valid certificate."),h=new be(d,be.MEDIA_ERR_ENCRYPTED,!0);return h.errorCategory=Xt.DRM,h.muxCode=Ne.ENCRYPTED_UPDATE_SERVER_CERT_FAILED,Promise.reject(h)})}catch(c){e.dispatchEvent(new CustomEvent("error",{detail:c}));return}await e.setMediaKeys(u)}let i=r.initData;if(i==null){console.error(`Could not start encrypted playback due to missing initData in ${r.type} event`);return}let s=e.mediaKeys.createSession();s.addEventListener("keystatuseschange",()=>{s.keyStatuses.forEach(l=>{let u;if(l==="internal-error"){let c=Le("The DRM Content Decryption Module system had an internal failure. Try reloading the page, upading your browser, or playing in another browser.");u=new be(c,be.MEDIA_ERR_ENCRYPTED,!0),u.errorCategory=Xt.DRM,u.muxCode=Ne.ENCRYPTED_CDM_ERROR}else if(l==="output-restricted"||l==="output-downscaled"){let c=Le("DRM playback is being attempted in an environment that is not sufficiently secure. User may see black screen.");u=new be(c,be.MEDIA_ERR_ENCRYPTED,!1),u.errorCategory=Xt.DRM,u.muxCode=Ne.ENCRYPTED_OUTPUT_RESTRICTED}u&&e.dispatchEvent(new CustomEvent("error",{detail:u}))})});let a=await Promise.all([s.generateRequest(n,i).catch(()=>{let l=Le("Failed to generate a DRM license request. This may be an issue with the player or your protected content."),u=new be(l,be.MEDIA_ERR_ENCRYPTED,!0);u.errorCategory=Xt.DRM,u.muxCode=Ne.ENCRYPTED_GENERATE_REQUEST_FAILED,e.dispatchEvent(new CustomEvent("error",{detail:u}))}),new Promise(l=>{s.addEventListener("message",u=>{l(u.message)},{once:!0})})]).then(([,l])=>l);s.generateRequest(n,i);let o=await Mne(a,Z0(t,"fairplay")).catch(l=>{if(l instanceof Response){let u=zm(l,Xt.DRM,t);return console.error("mediaError",u==null?void 0:u.message,u==null?void 0:u.context),u?Promise.reject(u):Promise.reject(new Error("Unexpected error in license key request"))}return Promise.reject(l)});await s.update(o).catch(()=>{let l=Le("Failed to update DRM license. This may be an issue with the player or your protected content."),u=new be(l,be.MEDIA_ERR_ENCRYPTED,!0);return u.errorCategory=Xt.DRM,u.muxCode=Ne.ENCRYPTED_UPDATE_LICENSE_FAILED,Promise.reject(u)})}catch(n){e.dispatchEvent(new CustomEvent("error",{detail:n}));return}})},Z0=({playbackId:t,tokens:{drm:e}={},customDomain:r=Ga},n)=>{let i=nv(t);return`https://license.${r.toLocaleLowerCase().endsWith(Ga)?r:Ga}/license/${n}/${i}?token=${e}`},VN=({playbackId:t,tokens:{drm:e}={},customDomain:r=Ga},n)=>{let i=nv(t);return`https://license.${r.toLocaleLowerCase().endsWith(Ga)?r:Ga}/appcert/${n}/${i}?token=${e}`},WN=({playbackId:t,src:e,customDomain:r})=>{if(t)return!0;if(typeof e!="string")return!1;let n=window==null?void 0:window.location.href,i=new URL(e,n).hostname.toLocaleLowerCase();return i.includes(Ga)||!!r&&i.includes(r.toLocaleLowerCase())},Nne=(t,e,r)=>{var n;let{envKey:i,disableTracking:s}=t,a=WN(t);if(!s&&(i||a)){let{playerInitTime:o,playerSoftwareName:l,playerSoftwareVersion:u,beaconCollectionDomain:c,debug:d,disableCookies:h}=t,f={...t.metadata,video_title:((n=t==null?void 0:t.metadata)==null?void 0:n.video_title)||void 0},p=m=>typeof m.player_error_code=="string"?!1:typeof t.errorTranslator=="function"?t.errorTranslator(m):m;kx.monitor(e,{debug:d,beaconCollectionDomain:c,hlsjs:r,Hls:r?sr:void 0,automaticErrorTracking:!1,errorTranslator:p,disableCookies:h,data:{...i?{env_key:i}:{},player_software_name:l,player_software:l,player_software_version:u,player_init_time:o,...f}})}},Fne=(t,e,r)=>{var n,i;let s=HN(t,e),{src:a}=t,o=()=>{e.ended||!BN(e,r)||(UN(e,r)?e.currentTime=e.buffered.end(e.buffered.length-1):e.dispatchEvent(new Event("ended")))},l,u,c=()=>{let d=eS(e),h,f;d.length>0&&(h=d.start(0),f=d.end(0)),(u!==f||l!==h)&&e.dispatchEvent(new CustomEvent("seekablechange",{composed:!0})),l=h,u=f};if(Sr(e,"durationchange",c),e&&s){let d=rv(t);if(typeof a=="string"){let h=()=>{if(D1(e)!==$t.LIVE||Number.isFinite(e.duration))return;let p=setInterval(c,1e3);e.addEventListener("teardown",()=>{clearInterval(p)},{once:!0}),Sr(e,"durationchange",()=>{Number.isFinite(e.duration)&&clearInterval(p)})},f=async()=>mne(a,e,d).then(h).catch(p=>{if(p instanceof Response){let m=zm(p,Xt.VIDEO,t);if(m){e.dispatchEvent(new CustomEvent("error",{detail:m}));return}}});if(e.preload==="none"){let p=()=>{f(),e.removeEventListener("loadedmetadata",m)},m=()=>{f(),e.removeEventListener("play",p)};Sr(e,"play",p,{once:!0}),Sr(e,"loadedmetadata",m,{once:!0})}else f();(n=t.tokens)!=null&&n.drm?Pne(t,e):Sr(e,"encrypted",()=>{let p=Le("Attempting to play DRM-protected content without providing a DRM token."),m=new be(p,be.MEDIA_ERR_ENCRYPTED,!0);m.errorCategory=Xt.DRM,m.muxCode=Ne.ENCRYPTED_MISSING_TOKEN,e.dispatchEvent(new CustomEvent("error",{detail:m}))},{once:!0}),e.setAttribute("src",a),t.startTime&&(((i=dn.get(e))!=null?i:{}).startTime=t.startTime,e.addEventListener("durationchange",GN,{once:!0}))}else e.removeAttribute("src");e.addEventListener("error",KN),e.addEventListener("error",O1),e.addEventListener("emptied",()=>{e.querySelectorAll("track[data-removeondestroy]").forEach(h=>{h.remove()})},{once:!0}),Sr(e,"pause",o),Sr(e,"seeked",o),Sr(e,"play",()=>{e.ended||$N(e.currentTime,e.duration)&&(e.currentTime=e.seekable.length?e.seekable.start(0):0)})}else r&&a?(r.once(sr.Events.LEVEL_LOADED,(d,h)=>{vne(h.details,e,r),c(),D1(e)===$t.LIVE&&!Number.isFinite(e.duration)&&(r.on(sr.Events.LEVEL_UPDATED,c),Sr(e,"durationchange",()=>{Number.isFinite(e.duration)&&r.off(sr.Events.LEVELS_UPDATED,c)}))}),r.on(sr.Events.ERROR,(d,h)=>{e.dispatchEvent(new CustomEvent("error",{detail:$ne(h,t)}))}),e.addEventListener("error",O1),Sr(e,"waiting",o),ene(t,r),tne(e,r),r.attachMedia(e)):console.error("It looks like the video you're trying to play will not work on this system! If possible, try upgrading to the newest versions of your browser or software.")};function GN(t){var e;let r=t.target,n=(e=dn.get(r))==null?void 0:e.startTime;if(n&&Wre(r.seekable,r.duration,n)){let i=r.preload==="auto";i&&(r.preload="none"),r.currentTime=n,i&&(r.preload="auto")}}async function KN(t){if(!t.isTrusted)return;t.stopImmediatePropagation();let e=t.target;if(!(e!=null&&e.error))return;let{message:r,code:n}=e.error,i=new be(r,n);if(e.src&&n===be.MEDIA_ERR_SRC_NOT_SUPPORTED&&e.readyState===HTMLMediaElement.HAVE_NOTHING){setTimeout(()=>{var s;let a=(s=FN(e))!=null?s:e.error;(a==null?void 0:a.code)===be.MEDIA_ERR_SRC_NOT_SUPPORTED&&e.dispatchEvent(new CustomEvent("error",{detail:i}))},500);return}if(e.src&&(n!==be.MEDIA_ERR_DECODE||n!==void 0))try{let{status:s}=await fetch(e.src);i.data={response:{code:s}}}catch{}e.dispatchEvent(new CustomEvent("error",{detail:i}))}function O1(t){var e,r;if(!(t instanceof CustomEvent)||!(t.detail instanceof be))return;let n=t.target,i=t.detail;!i||!i.fatal||(((e=dn.get(n))!=null?e:{}).error=i,(r=n.mux)==null||r.emit("error",{player_error_code:i.code,player_error_message:i.message,player_error_context:i.context}))}var $ne=(t,e)=>{var r,n,i;console.error("getErrorFromHlsErrorData()",t);let s={[sr.ErrorTypes.NETWORK_ERROR]:be.MEDIA_ERR_NETWORK,[sr.ErrorTypes.MEDIA_ERROR]:be.MEDIA_ERR_DECODE,[sr.ErrorTypes.KEY_SYSTEM_ERROR]:be.MEDIA_ERR_ENCRYPTED},a=c=>[J.KEY_SYSTEM_LICENSE_REQUEST_FAILED,J.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED].includes(c.details)?be.MEDIA_ERR_NETWORK:s[c.type],o=c=>{if(c.type===Ve.KEY_SYSTEM_ERROR)return Xt.DRM;if(c.type===Ve.NETWORK_ERROR)return Xt.VIDEO},l,u=a(t);if(u===be.MEDIA_ERR_NETWORK&&t.response){let c=(r=o(t))!=null?r:Xt.VIDEO;l=(n=zm(t.response,c,e))!=null?n:new be("",u)}else if(u===be.MEDIA_ERR_ENCRYPTED)if(t.details===J.KEY_SYSTEM_NO_CONFIGURED_LICENSE){let c=Le("Attempting to play DRM-protected content without providing a DRM token.");l=new be(c,be.MEDIA_ERR_ENCRYPTED,t.fatal),l.errorCategory=Xt.DRM,l.muxCode=Ne.ENCRYPTED_MISSING_TOKEN}else if(t.details===J.KEY_SYSTEM_NO_ACCESS){let c=Le("Cannot play DRM-protected content with current security configuration on this browser. Try playing in another browser.");l=new be(c,be.MEDIA_ERR_ENCRYPTED,t.fatal),l.errorCategory=Xt.DRM,l.muxCode=Ne.ENCRYPTED_UNSUPPORTED_KEY_SYSTEM}else if(t.details===J.KEY_SYSTEM_NO_SESSION){let c=Le("Failed to generate a DRM license request. This may be an issue with the player or your protected content.");l=new be(c,be.MEDIA_ERR_ENCRYPTED,!0),l.errorCategory=Xt.DRM,l.muxCode=Ne.ENCRYPTED_GENERATE_REQUEST_FAILED}else if(t.details===J.KEY_SYSTEM_SESSION_UPDATE_FAILED){let c=Le("Failed to update DRM license. This may be an issue with the player or your protected content.");l=new be(c,be.MEDIA_ERR_ENCRYPTED,t.fatal),l.errorCategory=Xt.DRM,l.muxCode=Ne.ENCRYPTED_UPDATE_LICENSE_FAILED}else if(t.details===J.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED){let c=Le("Your server certificate failed when attempting to set it. This may be an issue with a no longer valid certificate.");l=new be(c,be.MEDIA_ERR_ENCRYPTED,t.fatal),l.errorCategory=Xt.DRM,l.muxCode=Ne.ENCRYPTED_UPDATE_SERVER_CERT_FAILED}else if(t.details===J.KEY_SYSTEM_STATUS_INTERNAL_ERROR){let c=Le("The DRM Content Decryption Module system had an internal failure. Try reloading the page, upading your browser, or playing in another browser.");l=new be(c,be.MEDIA_ERR_ENCRYPTED,t.fatal),l.errorCategory=Xt.DRM,l.muxCode=Ne.ENCRYPTED_CDM_ERROR}else if(t.details===J.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED){let c=Le("DRM playback is being attempted in an environment that is not sufficiently secure. User may see black screen.");l=new be(c,be.MEDIA_ERR_ENCRYPTED,!1),l.errorCategory=Xt.DRM,l.muxCode=Ne.ENCRYPTED_OUTPUT_RESTRICTED}else l=new be(t.error.message,be.MEDIA_ERR_ENCRYPTED,t.fatal),l.errorCategory=Xt.DRM,l.muxCode=Ne.ENCRYPTED_ERROR;else l=new be("",u,t.fatal);return l.context||(l.context=`${t.url?`url: ${t.url}
`:""}${t.response&&(t.response.code||t.response.text)?`response: ${t.response.code}, ${t.response.text}
`:""}${t.reason?`failure reason: ${t.reason}
`:""}${t.level?`level: ${t.level}
`:""}${t.parent?`parent stream controller: ${t.parent}
`:""}${t.buffer?`buffer length: ${t.buffer}
`:""}${t.error?`error: ${t.error}
`:""}${t.event?`event: ${t.event}
`:""}${t.err?`error message: ${(i=t.err)==null?void 0:i.message}
`:""}`),l.data=t,l};const Re={MEDIA_PLAY_REQUEST:"mediaplayrequest",MEDIA_PAUSE_REQUEST:"mediapauserequest",MEDIA_MUTE_REQUEST:"mediamuterequest",MEDIA_UNMUTE_REQUEST:"mediaunmuterequest",MEDIA_VOLUME_REQUEST:"mediavolumerequest",MEDIA_SEEK_REQUEST:"mediaseekrequest",MEDIA_AIRPLAY_REQUEST:"mediaairplayrequest",MEDIA_ENTER_FULLSCREEN_REQUEST:"mediaenterfullscreenrequest",MEDIA_EXIT_FULLSCREEN_REQUEST:"mediaexitfullscreenrequest",MEDIA_PREVIEW_REQUEST:"mediapreviewrequest",MEDIA_ENTER_PIP_REQUEST:"mediaenterpiprequest",MEDIA_EXIT_PIP_REQUEST:"mediaexitpiprequest",MEDIA_ENTER_CAST_REQUEST:"mediaentercastrequest",MEDIA_EXIT_CAST_REQUEST:"mediaexitcastrequest",MEDIA_SHOW_TEXT_TRACKS_REQUEST:"mediashowtexttracksrequest",MEDIA_HIDE_TEXT_TRACKS_REQUEST:"mediahidetexttracksrequest",MEDIA_SHOW_SUBTITLES_REQUEST:"mediashowsubtitlesrequest",MEDIA_DISABLE_SUBTITLES_REQUEST:"mediadisablesubtitlesrequest",MEDIA_TOGGLE_SUBTITLES_REQUEST:"mediatogglesubtitlesrequest",MEDIA_PLAYBACK_RATE_REQUEST:"mediaplaybackraterequest",MEDIA_RENDITION_REQUEST:"mediarenditionrequest",MEDIA_AUDIO_TRACK_REQUEST:"mediaaudiotrackrequest",MEDIA_SEEK_TO_LIVE_REQUEST:"mediaseektoliverequest",REGISTER_MEDIA_STATE_RECEIVER:"registermediastatereceiver",UNREGISTER_MEDIA_STATE_RECEIVER:"unregistermediastatereceiver"},Bt={MEDIA_CHROME_ATTRIBUTES:"mediachromeattributes",MEDIA_CONTROLLER:"mediacontroller"},qN={MEDIA_AIRPLAY_UNAVAILABLE:"mediaAirplayUnavailable",MEDIA_FULLSCREEN_UNAVAILABLE:"mediaFullscreenUnavailable",MEDIA_PIP_UNAVAILABLE:"mediaPipUnavailable",MEDIA_CAST_UNAVAILABLE:"mediaCastUnavailable",MEDIA_RENDITION_UNAVAILABLE:"mediaRenditionUnavailable",MEDIA_AUDIO_TRACK_UNAVAILABLE:"mediaAudioTrackUnavailable",MEDIA_WIDTH:"mediaWidth",MEDIA_HEIGHT:"mediaHeight",MEDIA_PAUSED:"mediaPaused",MEDIA_HAS_PLAYED:"mediaHasPlayed",MEDIA_ENDED:"mediaEnded",MEDIA_MUTED:"mediaMuted",MEDIA_VOLUME_LEVEL:"mediaVolumeLevel",MEDIA_VOLUME:"mediaVolume",MEDIA_VOLUME_UNAVAILABLE:"mediaVolumeUnavailable",MEDIA_IS_PIP:"mediaIsPip",MEDIA_IS_CASTING:"mediaIsCasting",MEDIA_IS_AIRPLAYING:"mediaIsAirplaying",MEDIA_SUBTITLES_LIST:"mediaSubtitlesList",MEDIA_SUBTITLES_SHOWING:"mediaSubtitlesShowing",MEDIA_IS_FULLSCREEN:"mediaIsFullscreen",MEDIA_PLAYBACK_RATE:"mediaPlaybackRate",MEDIA_CURRENT_TIME:"mediaCurrentTime",MEDIA_DURATION:"mediaDuration",MEDIA_SEEKABLE:"mediaSeekable",MEDIA_PREVIEW_TIME:"mediaPreviewTime",MEDIA_PREVIEW_IMAGE:"mediaPreviewImage",MEDIA_PREVIEW_COORDS:"mediaPreviewCoords",MEDIA_PREVIEW_CHAPTER:"mediaPreviewChapter",MEDIA_LOADING:"mediaLoading",MEDIA_BUFFERED:"mediaBuffered",MEDIA_STREAM_TYPE:"mediaStreamType",MEDIA_TARGET_LIVE_WINDOW:"mediaTargetLiveWindow",MEDIA_TIME_IS_LIVE:"mediaTimeIsLive",MEDIA_RENDITION_LIST:"mediaRenditionList",MEDIA_RENDITION_SELECTED:"mediaRenditionSelected",MEDIA_AUDIO_TRACK_LIST:"mediaAudioTrackList",MEDIA_AUDIO_TRACK_ENABLED:"mediaAudioTrackEnabled",MEDIA_CHAPTERS_CUES:"mediaChaptersCues"},zN=Object.entries(qN),O=zN.reduce((t,[e,r])=>(t[e]=r.toLowerCase(),t),{}),Une={USER_INACTIVE:"userinactivechange",BREAKPOINTS_CHANGE:"breakpointchange",BREAKPOINTS_COMPUTED:"breakpointscomputed"},Tl=zN.reduce((t,[e,r])=>(t[e]=r.toLowerCase(),t),{...Une});Object.entries(Tl).reduce((t,[e,r])=>{const n=O[e];return n&&(t[r]=n),t},{userinactivechange:"userinactive"});const Bne=Object.entries(O).reduce((t,[e,r])=>{const n=Tl[e];return n&&(t[r]=n),t},{userinactive:"userinactivechange"}),_s={SUBTITLES:"subtitles",CAPTIONS:"captions",DESCRIPTIONS:"descriptions",CHAPTERS:"chapters",METADATA:"metadata"},Uu={DISABLED:"disabled",HIDDEN:"hidden",SHOWING:"showing"},kI={MOUSE:"mouse",PEN:"pen",TOUCH:"touch"},hi={UNAVAILABLE:"unavailable",UNSUPPORTED:"unsupported"},Hs={LIVE:"live",ON_DEMAND:"on-demand",UNKNOWN:"unknown"},jne={INLINE:"inline",FULLSCREEN:"fullscreen",PICTURE_IN_PICTURE:"picture-in-picture"},br={ENTER_AIRPLAY:"Start airplay",EXIT_AIRPLAY:"Stop airplay",AUDIO_TRACK_MENU:"Audio",CAPTIONS:"Captions",ENABLE_CAPTIONS:"Enable captions",DISABLE_CAPTIONS:"Disable captions",START_CAST:"Start casting",STOP_CAST:"Stop casting",ENTER_FULLSCREEN:"Enter fullscreen mode",EXIT_FULLSCREEN:"Exit fullscreen mode",MUTE:"Mute",UNMUTE:"Unmute",ENTER_PIP:"Enter picture in picture mode",EXIT_PIP:"Enter picture in picture mode",PLAY:"Play",PAUSE:"Pause",PLAYBACK_RATE:"Playback rate",RENDITIONS:"Quality",SEEK_BACKWARD:"Seek backward",SEEK_FORWARD:"Seek forward",SETTINGS:"Settings"},si={AUDIO_PLAYER:()=>"audio player",VIDEO_PLAYER:()=>"video player",VOLUME:()=>"volume",SEEK:()=>"seek",CLOSED_CAPTIONS:()=>"closed captions",PLAYBACK_RATE:({playbackRate:t=1}={})=>`current playback rate ${t}`,PLAYBACK_TIME:()=>"playback time",MEDIA_LOADING:()=>"media loading",SETTINGS:()=>"settings",AUDIO_TRACKS:()=>"audio tracks",QUALITY:()=>"quality"},xn={PLAY:()=>"play",PAUSE:()=>"pause",MUTE:()=>"mute",UNMUTE:()=>"unmute",ENTER_AIRPLAY:()=>"start airplay",EXIT_AIRPLAY:()=>"stop airplay",ENTER_CAST:()=>"start casting",EXIT_CAST:()=>"stop casting",ENTER_FULLSCREEN:()=>"enter fullscreen mode",EXIT_FULLSCREEN:()=>"exit fullscreen mode",ENTER_PIP:()=>"enter picture in picture mode",EXIT_PIP:()=>"exit picture in picture mode",SEEK_FORWARD_N_SECS:({seekOffset:t=30}={})=>`seek forward ${t} seconds`,SEEK_BACK_N_SECS:({seekOffset:t=30}={})=>`seek back ${t} seconds`,SEEK_LIVE:()=>"seek to live",PLAYING_LIVE:()=>"playing live"};function Hne(t){return t==null?void 0:t.map(Wne).join(" ")}function Vne(t){return t==null?void 0:t.split(/\s+/).map(Gne)}function Wne(t){if(t){const{id:e,width:r,height:n}=t;return[e,r,n].filter(i=>i!=null).join(":")}}function Gne(t){if(t){const[e,r,n]=t.split(":");return{id:e,width:+r,height:+n}}}function Kne(t){return t==null?void 0:t.map(zne).join(" ")}function qne(t){return t==null?void 0:t.split(/\s+/).map(Yne)}function zne(t){if(t){const{id:e,kind:r,language:n,label:i}=t;return[e,r,n,i].filter(s=>s!=null).join(":")}}function Yne(t){if(t){const[e,r,n,i]=t.split(":");return{id:e,kind:r,language:n,label:i}}}function Xne(t){return t.replace(/[-_]([a-z])/g,(e,r)=>r.toUpperCase())}function rS(t){return typeof t=="number"&&!Number.isNaN(t)&&Number.isFinite(t)}function YN(t){return typeof t!="string"?!1:!isNaN(t)&&!isNaN(parseFloat(t))}const XN=t=>new Promise(e=>setTimeout(e,t)),LI=[{singular:"hour",plural:"hours"},{singular:"minute",plural:"minutes"},{singular:"second",plural:"seconds"}],Zne=(t,e)=>{const r=t===1?LI[e].singular:LI[e].plural;return`${t} ${r}`},qd=t=>{if(!rS(t))return"";const e=Math.abs(t),r=e!==t,n=new Date(0,0,0,0,0,e,0);return`${[n.getHours(),n.getMinutes(),n.getSeconds()].map((o,l)=>o&&Zne(o,l)).filter(o=>o).join(", ")}${r?" remaining":""}`};function al(t,e){let r=!1;t<0&&(r=!0,t=0-t),t=t<0?0:t;let n=Math.floor(t%60),i=Math.floor(t/60%60),s=Math.floor(t/3600);const a=Math.floor(e/60%60),o=Math.floor(e/3600);return(isNaN(t)||t===1/0)&&(s=i=n="0"),s=s>0||o>0?s+":":"",i=((s||a>=10)&&i<10?"0"+i:i)+":",n=n<10?"0"+n:n,(r?"-":"")+s+i+n}let ZN=class{addEventListener(){}removeEventListener(){}dispatchEvent(){return!0}},QN=class extends ZN{},DI=class extends QN{constructor(){super(...arguments),this.role=null}},Qne=class{observe(){}unobserve(){}disconnect(){}};const JN={createElement:function(){return new ph.HTMLElement},createElementNS:function(){return new ph.HTMLElement},addEventListener(){},removeEventListener(){},dispatchEvent(t){return!1}},ph={ResizeObserver:Qne,document:JN,Node:QN,Element:DI,HTMLElement:class extends DI{constructor(){super(...arguments),this.innerHTML=""}get content(){return new ph.DocumentFragment}},DocumentFragment:class extends ZN{},customElements:{get:function(){},define:function(){},whenDefined:function(){}},localStorage:{getItem(t){return null},setItem(t,e){},removeItem(t){}},CustomEvent:function(){},getComputedStyle:function(){},navigator:{languages:[],get userAgent(){return""}},matchMedia(t){return{matches:!1,media:t}}},e5=typeof window>"u"||typeof window.customElements>"u",t5=Object.keys(ph).every(t=>t in globalThis),K=e5&&!t5?ph:globalThis,Fe=e5&&!t5?JN:globalThis.document,OI=new WeakMap,nS=t=>{let e=OI.get(t);return e||OI.set(t,e=new Set),e},r5=new K.ResizeObserver(t=>{for(const e of t)for(const r of nS(e.target))r(e)});function ic(t,e){nS(t).add(e),r5.observe(t)}function mh(t,e){const r=nS(t);r.delete(e),r.size||r5.unobserve(t)}function _i(t){var e;return(e=M1(t))!=null?e:xc(t,"media-controller")}function M1(t){var e;const{MEDIA_CONTROLLER:r}=Bt,n=t.getAttribute(r);if(n)return(e=iv(t))==null?void 0:e.getElementById(n)}const n5=(t,e,r=".value")=>{const n=t.querySelector(r);n&&(n.textContent=e)},Jne=(t,e)=>{const r=`slot[name="${e}"]`,n=t.shadowRoot.querySelector(r);return n?n.children:[]},i5=(t,e)=>Jne(t,e)[0],ra=(t,e)=>!t||!e?!1:t!=null&&t.contains(e)?!0:ra(t,e.getRootNode().host),xc=(t,e)=>{if(!t)return null;const r=t.closest(e);return r||xc(t.getRootNode().host,e)};function iS(t=document){var e;const r=t==null?void 0:t.activeElement;return r?(e=iS(r.shadowRoot))!=null?e:r:null}function iv(t){var e;const r=(e=t==null?void 0:t.getRootNode)==null?void 0:e.call(t);return r instanceof ShadowRoot||r instanceof Document?r:null}function s5(t,{depth:e=3,checkOpacity:r=!0,checkVisibilityCSS:n=!0}={}){if(t.checkVisibility)return t.checkVisibility({checkOpacity:r,checkVisibilityCSS:n});let i=t;for(;i&&e>0;){const s=getComputedStyle(i);if(r&&s.opacity==="0"||n&&s.visibility==="hidden"||s.display==="none")return!1;i=i.parentElement,e--}return!0}function eie(t,e,r,n){const i=$b(r,n),s=$b(r,{x:t,y:e}),a=$b(n,{x:t,y:e});return s>i||a>i?s>a?1:0:s/i}function $b(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Ar(t,e){const r=tie(t,n=>n===e);return r||a5(t,e)}function tie(t,e){var r,n;let i;for(i of(r=t.querySelectorAll("style:not([media])"))!=null?r:[]){let s;try{s=(n=i.sheet)==null?void 0:n.cssRules}catch{continue}for(const a of s??[])if(e(a.selectorText))return a}}function a5(t,e){var r,n;const i=(r=t.querySelectorAll("style:not([media])"))!=null?r:[],s=i==null?void 0:i[i.length-1];return s!=null&&s.sheet?(s==null||s.sheet.insertRule(`${e}{}`,s.sheet.cssRules.length),(n=s.sheet.cssRules)==null?void 0:n[s.sheet.cssRules.length-1]):(console.warn("Media Chrome: No style sheet found on style tag of",t),{style:{setProperty:()=>{},removeProperty:()=>"",getPropertyValue:()=>""}})}function pr(t,e,r=Number.NaN){const n=t.getAttribute(e);return n!=null?+n:r}function Pr(t,e,r){const n=+r;if(r==null||Number.isNaN(n)){t.hasAttribute(e)&&t.removeAttribute(e);return}pr(t,e,void 0)!==n&&t.setAttribute(e,`${n}`)}function Qr(t,e){return t.hasAttribute(e)}function Jr(t,e,r){if(r==null){t.hasAttribute(e)&&t.removeAttribute(e);return}Qr(t,e)!=r&&t.toggleAttribute(e,r)}function Fr(t,e,r=null){var n;return(n=t.getAttribute(e))!=null?n:r}function $r(t,e,r){if(r==null){t.hasAttribute(e)&&t.removeAttribute(e);return}const n=`${r}`;Fr(t,e,void 0)!==n&&t.setAttribute(e,n)}var o5=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},da=(t,e,r)=>(o5(t,e,"read from private field"),r?r.call(t):e.get(t)),rie=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Nf=(t,e,r,n)=>(o5(t,e,"write to private field"),e.set(t,r),r),$n;const l5=Fe.createElement("template");l5.innerHTML=`
<style>
  :host {
    display: var(--media-control-display, var(--media-gesture-receiver-display, inline-block));
    box-sizing: border-box;
  }
</style>
`;class nie extends K.HTMLElement{constructor(e={}){if(super(),rie(this,$n,void 0),!this.shadowRoot){const r=this.attachShadow({mode:"open"}),n=l5.content.cloneNode(!0);this.nativeEl=n;let i=e.slotTemplate;i||(i=Fe.createElement("template"),i.innerHTML=`<slot>${e.defaultContent||""}</slot>`),this.nativeEl.appendChild(i.content.cloneNode(!0)),r.appendChild(n)}}static get observedAttributes(){return[Bt.MEDIA_CONTROLLER,O.MEDIA_PAUSED]}attributeChangedCallback(e,r,n){var i,s,a,o,l;e===Bt.MEDIA_CONTROLLER&&(r&&((s=(i=da(this,$n))==null?void 0:i.unassociateElement)==null||s.call(i,this),Nf(this,$n,null)),n&&this.isConnected&&(Nf(this,$n,(a=this.getRootNode())==null?void 0:a.getElementById(n)),(l=(o=da(this,$n))==null?void 0:o.associateElement)==null||l.call(o,this)))}connectedCallback(){var e,r,n,i;this.tabIndex=-1,this.setAttribute("aria-hidden","true"),Nf(this,$n,iie(this)),this.getAttribute(Bt.MEDIA_CONTROLLER)&&((r=(e=da(this,$n))==null?void 0:e.associateElement)==null||r.call(e,this)),(n=da(this,$n))==null||n.addEventListener("pointerdown",this),(i=da(this,$n))==null||i.addEventListener("click",this)}disconnectedCallback(){var e,r,n,i;this.getAttribute(Bt.MEDIA_CONTROLLER)&&((r=(e=da(this,$n))==null?void 0:e.unassociateElement)==null||r.call(e,this)),(n=da(this,$n))==null||n.removeEventListener("pointerdown",this),(i=da(this,$n))==null||i.removeEventListener("click",this),Nf(this,$n,null)}handleEvent(e){var r;const n=(r=e.composedPath())==null?void 0:r[0];if(["video","media-controller"].includes(n==null?void 0:n.localName)){if(e.type==="pointerdown")this._pointerType=e.pointerType;else if(e.type==="click"){const{clientX:s,clientY:a}=e,{left:o,top:l,width:u,height:c}=this.getBoundingClientRect(),d=s-o,h=a-l;if(d<0||h<0||d>u||h>c||u===0&&c===0)return;const{pointerType:f=this._pointerType}=e;if(this._pointerType=void 0,f===kI.TOUCH){this.handleTap(e);return}else if(f===kI.MOUSE){this.handleMouseClick(e);return}}}}get mediaPaused(){return Qr(this,O.MEDIA_PAUSED)}set mediaPaused(e){Jr(this,O.MEDIA_PAUSED,e)}handleTap(e){}handleMouseClick(e){const r=this.mediaPaused?Re.MEDIA_PLAY_REQUEST:Re.MEDIA_PAUSE_REQUEST;this.dispatchEvent(new K.CustomEvent(r,{composed:!0,bubbles:!0}))}}$n=new WeakMap;function iie(t){var e;const r=t.getAttribute(Bt.MEDIA_CONTROLLER);return r?(e=t.getRootNode())==null?void 0:e.getElementById(r):xc(t,"media-controller")}K.customElements.get("media-gesture-receiver")||K.customElements.define("media-gesture-receiver",nie);var sS=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Ua=(t,e,r)=>(sS(t,e,"read from private field"),r?r.call(t):e.get(t)),ks=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},cd=(t,e,r,n)=>(sS(t,e,"write to private field"),e.set(t,r),r),Oi=(t,e,r)=>(sS(t,e,"access private method"),r),Ym,Yl,gh,Iu,P1,u5,N1,c5,vh,sv,av,aS,sc,bh;const mt={AUDIO:"audio",AUTOHIDE:"autohide",BREAKPOINTS:"breakpoints",GESTURES_DISABLED:"gesturesdisabled",KEYBOARD_CONTROL:"keyboardcontrol",NO_AUTOHIDE:"noautohide",USER_INACTIVE:"userinactive"},d5=Fe.createElement("template");d5.innerHTML=`
  <style>
    
    :host([${O.MEDIA_IS_FULLSCREEN}]) ::slotted([slot=media]) {
      outline: none;
    }

    :host {
      box-sizing: border-box;
      position: relative;
      display: inline-block;
      line-height: 0;
      background-color: var(--media-background-color, #000);
    }

    :host(:not([${mt.AUDIO}])) [part~=layer]:not([part~=media-layer]) {
      position: absolute;
      top: 0;
      left: 0;
      bottom: 0;
      right: 0;
      display: flex;
      flex-flow: column nowrap;
      align-items: start;
      pointer-events: none;
      background: none;
    }

    slot[name=media] {
      display: var(--media-slot-display, contents);
    }

    
    :host([${mt.AUDIO}]) slot[name=media] {
      display: var(--media-slot-display, none);
    }

    
    :host([${mt.AUDIO}]) [part~=layer][part~=gesture-layer] {
      height: 0;
      display: block;
    }

    
    :host(:not([${mt.AUDIO}])[${mt.GESTURES_DISABLED}]) ::slotted([slot=gestures-chrome]),
    :host(:not([${mt.AUDIO}])[${mt.GESTURES_DISABLED}]) media-gesture-receiver[slot=gestures-chrome] {
      display: none;
    }

    
    ::slotted(:not([slot=media]):not([slot=poster]):not(media-loading-indicator):not([hidden])) {
      pointer-events: auto;
    }

    :host(:not([${mt.AUDIO}])) *[part~=layer][part~=centered-layer] {
      align-items: center;
      justify-content: center;
    }

    :host(:not([${mt.AUDIO}])) ::slotted(media-gesture-receiver[slot=gestures-chrome]),
    :host(:not([${mt.AUDIO}])) media-gesture-receiver[slot=gestures-chrome] {
      align-self: stretch;
      flex-grow: 1;
    }

    slot[name=middle-chrome] {
      display: inline;
      flex-grow: 1;
      pointer-events: none;
      background: none;
    }

    
    ::slotted([slot=media]),
    ::slotted([slot=poster]) {
      width: 100%;
      height: 100%;
    }

    
    :host(:not([${mt.AUDIO}])) .spacer {
      flex-grow: 1;
    }

    
    :host(:-webkit-full-screen) {
      
      width: 100% !important;
      height: 100% !important;
    }

    
    ::slotted(:not([slot=media]):not([slot=poster]):not([${mt.NO_AUTOHIDE}]):not([hidden])) {
      opacity: 1;
      transition: opacity 0.25s;
    }

    
    :host([${mt.USER_INACTIVE}]:not([${O.MEDIA_PAUSED}]):not([${O.MEDIA_IS_AIRPLAYING}]):not([${O.MEDIA_IS_CASTING}]):not([${mt.AUDIO}])) ::slotted(:not([slot=media]):not([slot=poster]):not([${mt.NO_AUTOHIDE}])) {
      opacity: 0;
      transition: opacity 1s;
    }

    :host([${mt.USER_INACTIVE}]:not([${O.MEDIA_PAUSED}]):not([${O.MEDIA_IS_CASTING}]):not([${mt.AUDIO}])) ::slotted([slot=media]) {
      cursor: none;
    }

    ::slotted(media-control-bar)  {
      align-self: stretch;
    }

    
    :host(:not([${mt.AUDIO}])[${O.MEDIA_HAS_PLAYED}]) slot[name=poster] {
      display: none;
    }

    ::slotted([role="menu"]) {
      align-self: end;
    }

    ::slotted([role="dialog"]) {
      align-self: center;
    }
  </style>

  <slot name="media" part="layer media-layer"></slot>
  <slot name="poster" part="layer poster-layer"></slot>
  <slot name="gestures-chrome" part="layer gesture-layer">
    <media-gesture-receiver slot="gestures-chrome"></media-gesture-receiver>
  </slot>
  <span part="layer vertical-layer">
    <slot name="top-chrome" part="top chrome"></slot>
    <slot name="middle-chrome" part="middle chrome"></slot>
    <slot name="centered-chrome" part="layer centered-layer center centered chrome"></slot>
    
    <slot part="bottom chrome"></slot>
  </span>
`;const sie=Object.values(O),aie="sm:384 md:576 lg:768 xl:960";function oie(t){lie(t.target,t.contentRect.width)}function lie(t,e){var r;if(!t.isConnected)return;const n=(r=t.getAttribute(mt.BREAKPOINTS))!=null?r:aie,i=uie(n),s=cie(i,e);let a=!1;if(Object.keys(i).forEach(o=>{if(s.includes(o)){t.hasAttribute(`breakpoint${o}`)||(t.setAttribute(`breakpoint${o}`,""),a=!0);return}t.hasAttribute(`breakpoint${o}`)&&(t.removeAttribute(`breakpoint${o}`),a=!0)}),a){const o=new CustomEvent(Tl.BREAKPOINTS_CHANGE,{detail:s});t.dispatchEvent(o)}}function uie(t){const e=t.split(/\s+/);return Object.fromEntries(e.map(r=>r.split(":")))}function cie(t,e){return Object.keys(t).filter(r=>e>=parseInt(t[r]))}class h5 extends K.HTMLElement{constructor(){super(),ks(this,P1),ks(this,N1),ks(this,vh),ks(this,av),ks(this,sc),ks(this,Ym,0),ks(this,Yl,null),ks(this,gh,null),ks(this,Iu,void 0),this.breakpointsComputed=!1,this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(d5.content.cloneNode(!0)));const e=a=>{const o=this.media;for(const l of a)l.type==="childList"&&(l.removedNodes.forEach(u=>{if(u.slot=="media"&&l.target==this){let c=l.previousSibling&&l.previousSibling.previousElementSibling;if(!c||!o)this.mediaUnsetCallback(u);else{let d=c.slot!=="media";for(;(c=c.previousSibling)!==null;)c.slot=="media"&&(d=!1);d&&this.mediaUnsetCallback(u)}}}),o&&l.addedNodes.forEach(u=>{u===o&&this.handleMediaUpdated(o)}))};new MutationObserver(e).observe(this,{childList:!0,subtree:!0});let n=!1;ic(this,a=>{n||(setTimeout(()=>{oie(a),n=!1,this.breakpointsComputed||(this.breakpointsComputed=!0,this.dispatchEvent(new CustomEvent(Tl.BREAKPOINTS_COMPUTED,{bubbles:!0,composed:!0})))},0),n=!0)});const s=this.querySelector(":scope > slot[slot=media]");s&&s.addEventListener("slotchange",()=>{if(!s.assignedElements({flatten:!0}).length){Ua(this,Yl)&&this.mediaUnsetCallback(Ua(this,Yl));return}this.handleMediaUpdated(this.media)})}static get observedAttributes(){return[mt.AUTOHIDE,mt.GESTURES_DISABLED].concat(sie).filter(e=>![O.MEDIA_RENDITION_LIST,O.MEDIA_AUDIO_TRACK_LIST,O.MEDIA_CHAPTERS_CUES,O.MEDIA_WIDTH,O.MEDIA_HEIGHT].includes(e))}attributeChangedCallback(e,r,n){e.toLowerCase()==mt.AUTOHIDE&&(this.autohide=n)}get media(){let e=this.querySelector(":scope > [slot=media]");return(e==null?void 0:e.nodeName)=="SLOT"&&(e=e.assignedElements({flatten:!0})[0]),e}async handleMediaUpdated(e){e&&(cd(this,Yl,e),e.localName.includes("-")&&await K.customElements.whenDefined(e.localName),this.mediaSetCallback(e))}connectedCallback(){var e;const n=this.getAttribute(mt.AUDIO)!=null?si.AUDIO_PLAYER():si.VIDEO_PLAYER();this.setAttribute("role","region"),this.setAttribute("aria-label",n),this.handleMediaUpdated(this.media),this.setAttribute(mt.USER_INACTIVE,""),this.addEventListener("pointerdown",this),this.addEventListener("pointermove",this),this.addEventListener("pointerup",this),this.addEventListener("mouseleave",this),this.addEventListener("keyup",this),(e=K.window)==null||e.addEventListener("mouseup",this)}disconnectedCallback(){var e;this.media&&this.mediaUnsetCallback(this.media),(e=K.window)==null||e.removeEventListener("mouseup",this)}mediaSetCallback(e){}mediaUnsetCallback(e){cd(this,Yl,null)}handleEvent(e){switch(e.type){case"pointerdown":cd(this,Ym,e.timeStamp);break;case"pointermove":Oi(this,P1,u5).call(this,e);break;case"pointerup":Oi(this,N1,c5).call(this,e);break;case"mouseleave":Oi(this,vh,sv).call(this);break;case"mouseup":this.removeAttribute(mt.KEYBOARD_CONTROL);break;case"keyup":Oi(this,sc,bh).call(this),this.setAttribute(mt.KEYBOARD_CONTROL,"");break}}set autohide(e){const r=Number(e);cd(this,Iu,isNaN(r)?0:r)}get autohide(){return(Ua(this,Iu)===void 0?2:Ua(this,Iu)).toString()}}Ym=new WeakMap;Yl=new WeakMap;gh=new WeakMap;Iu=new WeakMap;P1=new WeakSet;u5=function(t){t.pointerType!=="mouse"&&t.timeStamp-Ua(this,Ym)<250||(Oi(this,av,aS).call(this),clearTimeout(Ua(this,gh)),[this,this.media].includes(t.target)&&Oi(this,sc,bh).call(this))};N1=new WeakSet;c5=function(t){if(t.pointerType==="touch"){const e=!this.hasAttribute(mt.USER_INACTIVE);[this,this.media].includes(t.target)&&e?Oi(this,vh,sv).call(this):Oi(this,sc,bh).call(this)}else t.composedPath().some(e=>["media-play-button","media-fullscreen-button"].includes(e==null?void 0:e.localName))&&Oi(this,sc,bh).call(this)};vh=new WeakSet;sv=function(){if(Ua(this,Iu)<0||this.hasAttribute(mt.USER_INACTIVE))return;this.setAttribute(mt.USER_INACTIVE,"");const t=new K.CustomEvent(Tl.USER_INACTIVE,{composed:!0,bubbles:!0,detail:!0});this.dispatchEvent(t)};av=new WeakSet;aS=function(){if(!this.hasAttribute(mt.USER_INACTIVE))return;this.removeAttribute(mt.USER_INACTIVE);const t=new K.CustomEvent(Tl.USER_INACTIVE,{composed:!0,bubbles:!0,detail:!1});this.dispatchEvent(t)};sc=new WeakSet;bh=function(){Oi(this,av,aS).call(this),clearTimeout(Ua(this,gh));const t=parseInt(this.autohide);t<0||cd(this,gh,setTimeout(()=>{Oi(this,vh,sv).call(this)},t*1e3))};K.customElements.get("media-container")||K.customElements.define("media-container",h5);var f5=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Gr=(t,e,r)=>(f5(t,e,"read from private field"),r?r.call(t):e.get(t)),Bc=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Ff=(t,e,r,n)=>(f5(t,e,"write to private field"),e.set(t,r),r),Xl,Zl,Xm,Xo,Ms,va;class ov{constructor(e,r,{defaultValue:n}={defaultValue:void 0}){Bc(this,Ms),Bc(this,Xl,void 0),Bc(this,Zl,void 0),Bc(this,Xm,void 0),Bc(this,Xo,new Set),Ff(this,Xl,e),Ff(this,Zl,r),Ff(this,Xm,new Set(n))}[Symbol.iterator](){return Gr(this,Ms,va).values()}get length(){return Gr(this,Ms,va).size}get value(){var e;return(e=[...Gr(this,Ms,va)].join(" "))!=null?e:""}set value(e){var r;e!==this.value&&(Ff(this,Xo,new Set),this.add(...(r=e==null?void 0:e.split(" "))!=null?r:[]))}toString(){return this.value}item(e){return[...Gr(this,Ms,va)][e]}values(){return Gr(this,Ms,va).values()}forEach(e,r){Gr(this,Ms,va).forEach(e,r)}add(...e){var r,n;e.forEach(i=>Gr(this,Xo).add(i)),!(this.value===""&&!((r=Gr(this,Xl))!=null&&r.hasAttribute(`${Gr(this,Zl)}`)))&&((n=Gr(this,Xl))==null||n.setAttribute(`${Gr(this,Zl)}`,`${this.value}`))}remove(...e){var r;e.forEach(n=>Gr(this,Xo).delete(n)),(r=Gr(this,Xl))==null||r.setAttribute(`${Gr(this,Zl)}`,`${this.value}`)}contains(e){return Gr(this,Ms,va).has(e)}toggle(e,r){return typeof r<"u"?r?(this.add(e),!0):(this.remove(e),!1):this.contains(e)?(this.remove(e),!1):(this.add(e),!0)}replace(e,r){return this.remove(e),this.add(r),e===r}}Xl=new WeakMap;Zl=new WeakMap;Xm=new WeakMap;Xo=new WeakMap;Ms=new WeakSet;va=function(){return Gr(this,Xo).size?Gr(this,Xo):Gr(this,Xm)};const die=(t="")=>t.split(/\s+/),p5=(t="")=>{const[e,r,n]=t.split(":"),i=n?decodeURIComponent(n):void 0;return{kind:e==="cc"?_s.CAPTIONS:_s.SUBTITLES,language:r,label:i}},lv=(t="",e={})=>die(t).map(r=>{const n=p5(r);return{...e,...n}}),m5=t=>t?Array.isArray(t)?t.map(e=>typeof e=="string"?p5(e):e):typeof t=="string"?lv(t):[t]:[],F1=({kind:t,label:e,language:r}={kind:"subtitles"})=>e?`${t==="captions"?"cc":"sb"}:${r}:${encodeURIComponent(e)}`:r,yh=(t=[])=>Array.prototype.map.call(t,F1).join(" "),hie=(t,e)=>r=>r[t]===e,g5=t=>{const e=Object.entries(t).map(([r,n])=>hie(r,n));return r=>e.every(n=>n(r))},zd=(t,e=[],r=[])=>{const n=m5(r).map(g5),i=s=>n.some(a=>a(s));Array.from(e).filter(i).forEach(s=>{s.mode=t})},uv=(t,e=()=>!0)=>{if(!(t!=null&&t.textTracks))return[];const r=typeof e=="function"?e:g5(e);return Array.from(t.textTracks).filter(r)},v5=t=>{var e;return!!((e=t.mediaSubtitlesShowing)!=null&&e.length)||t.hasAttribute(O.MEDIA_SUBTITLES_SHOWING)},fie=t=>{var e;const{media:r,fullscreenElement:n}=t,i=n&&"requestFullscreen"in n?"requestFullscreen":n&&"webkitRequestFullScreen"in n?"webkitRequestFullScreen":void 0;if(i){const s=(e=n[i])==null?void 0:e.call(n);if(s instanceof Promise)return s.catch(()=>{})}else r!=null&&r.webkitEnterFullscreen?r.webkitEnterFullscreen():r!=null&&r.requestFullscreen&&r.requestFullscreen()},MI="exitFullscreen"in Fe?"exitFullscreen":"webkitExitFullscreen"in Fe?"webkitExitFullscreen":"webkitCancelFullScreen"in Fe?"webkitCancelFullScreen":void 0,pie=t=>{var e;const{documentElement:r}=t;if(MI){const n=(e=r==null?void 0:r[MI])==null?void 0:e.call(r);if(n instanceof Promise)return n.catch(()=>{})}},dd="fullscreenElement"in Fe?"fullscreenElement":"webkitFullscreenElement"in Fe?"webkitFullscreenElement":void 0,mie=t=>{const{documentElement:e,media:r}=t,n=e==null?void 0:e[dd];return!n&&"webkitDisplayingFullscreen"in r&&"webkitPresentationMode"in r&&r.webkitDisplayingFullscreen&&r.webkitPresentationMode===jne.FULLSCREEN?r:n},gie=t=>{var e;const{media:r,documentElement:n,fullscreenElement:i=r}=t;if(!r||!n)return!1;const s=mie(t);if(!s)return!1;if(s===i||s===r)return!0;if(s.localName.includes("-")){let a=s.shadowRoot;if(!(dd in a))return ra(s,i);for(;a!=null&&a[dd];){if(a[dd]===i)return!0;a=(e=a[dd])==null?void 0:e.shadowRoot}}return!1},vie="fullscreenEnabled"in Fe?"fullscreenEnabled":"webkitFullscreenEnabled"in Fe?"webkitFullscreenEnabled":void 0,bie=t=>{const{documentElement:e,media:r}=t;return!!(e!=null&&e[vie])||r&&"webkitSupportsFullscreen"in r};let $f;const oS=()=>{var t,e;return $f||($f=(e=(t=Fe)==null?void 0:t.createElement)==null?void 0:e.call(t,"video"),$f)},yie=async(t=oS())=>{if(!t)return!1;const e=t.volume;t.volume=e/2+.1;const r=new AbortController,n=await Promise.race([Eie(t,r.signal),_ie(t,e)]);return r.abort(),n},Eie=(t,e)=>new Promise(r=>{t.addEventListener("volumechange",()=>r(!0),{signal:e})}),_ie=async(t,e)=>{for(let r=0;r<10;r++){if(t.volume===e)return!1;await XN(10)}return t.volume!==e},Tie=/.*Version\/.*Safari\/.*/.test(K.navigator.userAgent),b5=(t=oS())=>K.matchMedia("(display-mode: standalone)").matches&&Tie?!1:typeof(t==null?void 0:t.requestPictureInPicture)=="function",y5=(t=oS())=>bie({documentElement:Fe,media:t}),xie=y5(),Sie=b5(),wie=!!K.WebKitPlaybackTargetAvailabilityEvent,Aie=!!K.chrome,Zm=t=>uv(t.media,e=>[_s.SUBTITLES,_s.CAPTIONS].includes(e.kind)).sort((e,r)=>e.kind>=r.kind?1:-1),E5=t=>uv(t.media,e=>e.mode===Uu.SHOWING&&[_s.SUBTITLES,_s.CAPTIONS].includes(e.kind)),_5=(t,e)=>{const r=Zm(t),n=E5(t),i=!!n.length;if(r.length){if(e===!1||i&&e!==!0)zd(Uu.DISABLED,r,n);else if(e===!0||!i&&e!==!1){let s=r[0];const{options:a}=t;if(!(a!=null&&a.noSubtitlesLangPref)){const c=globalThis.localStorage.getItem("media-chrome-pref-subtitles-lang"),d=c?[c,...globalThis.navigator.languages]:globalThis.navigator.languages,h=r.filter(f=>d.some(p=>f.language.toLowerCase().startsWith(p.split("-")[0]))).sort((f,p)=>{const m=d.findIndex(v=>f.language.toLowerCase().startsWith(v.split("-")[0])),g=d.findIndex(v=>p.language.toLowerCase().startsWith(v.split("-")[0]));return m-g});h[0]&&(s=h[0])}const{language:o,label:l,kind:u}=s;zd(Uu.DISABLED,r,n),zd(Uu.SHOWING,r,[{language:o,label:l,kind:u}])}}},lS=(t,e)=>t===e?!0:typeof t!=typeof e?!1:typeof t=="number"&&Number.isNaN(t)&&Number.isNaN(e)?!0:typeof t!="object"?!1:Array.isArray(t)?Rie(t,e):Object.entries(t).every(([r,n])=>r in e&&lS(n,e[r])),Rie=(t,e)=>{const r=Array.isArray(t),n=Array.isArray(e);return r!==n?!1:r||n?t.length!==e.length?!1:t.every((i,s)=>lS(i,e[s])):!0},Cie=Object.values(Hs);let Qm;const Iie=yie().then(t=>(Qm=t,Qm)),kie=async(...t)=>{await Promise.all(t.filter(e=>e).map(async e=>{if(!("localName"in e&&e instanceof K.HTMLElement))return;const r=e.localName;if(!r.includes("-"))return;const n=K.customElements.get(r);n&&e instanceof n||(await K.customElements.whenDefined(r),K.customElements.upgrade(e))}))},Q0={mediaWidth:{get(t){var e;const{media:r}=t;return(e=r==null?void 0:r.videoWidth)!=null?e:0},mediaEvents:["resize"]},mediaHeight:{get(t){var e;const{media:r}=t;return(e=r==null?void 0:r.videoHeight)!=null?e:0},mediaEvents:["resize"]},mediaPaused:{get(t){var e;const{media:r}=t;return(e=r==null?void 0:r.paused)!=null?e:!0},set(t,e){var r;const{media:n}=e;n&&(t?n.pause():(r=n.play())==null||r.catch(()=>{}))},mediaEvents:["play","playing","pause","emptied"]},mediaHasPlayed:{get(t,e){const{media:r}=t;return r?e?e.type==="playing":!r.paused:!1},mediaEvents:["playing","emptied"]},mediaEnded:{get(t){var e;const{media:r}=t;return(e=r==null?void 0:r.ended)!=null?e:!1},mediaEvents:["seeked","ended","emptied"]},mediaPlaybackRate:{get(t){var e;const{media:r}=t;return(e=r==null?void 0:r.playbackRate)!=null?e:1},set(t,e){const{media:r}=e;r&&Number.isFinite(+t)&&(r.playbackRate=+t)},mediaEvents:["ratechange","loadstart"]},mediaMuted:{get(t){var e;const{media:r}=t;return(e=r==null?void 0:r.muted)!=null?e:!1},set(t,e){const{media:r}=e;r&&(r.muted=t)},mediaEvents:["volumechange"]},mediaVolume:{get(t){var e;const{media:r}=t;return(e=r==null?void 0:r.volume)!=null?e:1},set(t,e){const{media:r}=e;if(r){try{t==null?K.localStorage.removeItem("media-chrome-pref-volume"):K.localStorage.setItem("media-chrome-pref-volume",t.toString())}catch{}Number.isFinite(+t)&&(r.volume=+t)}},mediaEvents:["volumechange"],stateOwnersUpdateHandlers:[(t,e)=>{const{options:{noVolumePref:r}}=e;if(!r)try{const n=K.localStorage.getItem("media-chrome-pref-volume");if(n==null)return;Q0.mediaVolume.set(+n,e),t(+n)}catch(n){console.debug("Error getting volume pref",n)}}]},mediaVolumeLevel:{get(t){const{media:e}=t;return typeof(e==null?void 0:e.volume)>"u"?"high":e.muted||e.volume===0?"off":e.volume<.5?"low":e.volume<.75?"medium":"high"},mediaEvents:["volumechange"]},mediaCurrentTime:{get(t){var e;const{media:r}=t;return(e=r==null?void 0:r.currentTime)!=null?e:0},set(t,e){const{media:r}=e;!r||!rS(t)||(r.currentTime=t)},mediaEvents:["timeupdate","loadedmetadata"]},mediaDuration:{get(t){const{media:e,options:{defaultDuration:r}={}}=t;return r&&(!e||!e.duration||Number.isNaN(e.duration)||!Number.isFinite(e.duration))?r:Number.isFinite(e==null?void 0:e.duration)?e.duration:Number.NaN},mediaEvents:["durationchange","loadedmetadata","emptied"]},mediaLoading:{get(t){const{media:e}=t;return(e==null?void 0:e.readyState)<3},mediaEvents:["waiting","playing","emptied"]},mediaSeekable:{get(t){var e;const{media:r}=t;if(!((e=r==null?void 0:r.seekable)!=null&&e.length))return;const n=r.seekable.start(0),i=r.seekable.end(r.seekable.length-1);if(!(!n&&!i))return[Number(n.toFixed(3)),Number(i.toFixed(3))]},mediaEvents:["loadedmetadata","emptied","progress","seekablechange"]},mediaBuffered:{get(t){var e;const{media:r}=t,n=(e=r==null?void 0:r.buffered)!=null?e:[];return Array.from(n).map((i,s)=>[Number(n.start(s).toFixed(3)),Number(n.end(s).toFixed(3))])},mediaEvents:["progress","emptied"]},mediaStreamType:{get(t){const{media:e,options:{defaultStreamType:r}={}}=t,n=[Hs.LIVE,Hs.ON_DEMAND].includes(r)?r:void 0;if(!e)return n;const{streamType:i}=e;if(Cie.includes(i))return i===Hs.UNKNOWN?n:i;const s=e.duration;return s===1/0?Hs.LIVE:Number.isFinite(s)?Hs.ON_DEMAND:n},mediaEvents:["emptied","durationchange","loadedmetadata","streamtypechange"]},mediaTargetLiveWindow:{get(t){const{media:e}=t;if(!e)return Number.NaN;const{targetLiveWindow:r}=e,n=Q0.mediaStreamType.get(t);return(r==null||Number.isNaN(r))&&n===Hs.LIVE?0:r},mediaEvents:["emptied","durationchange","loadedmetadata","streamtypechange","targetlivewindowchange"]},mediaTimeIsLive:{get(t){const{media:e,options:{liveEdgeOffset:r=10}={}}=t;if(!e)return!1;if(typeof e.liveEdgeStart=="number")return Number.isNaN(e.liveEdgeStart)?!1:e.currentTime>=e.liveEdgeStart;if(!(Q0.mediaStreamType.get(t)===Hs.LIVE))return!1;const i=e.seekable;if(!i)return!0;if(!i.length)return!1;const s=i.end(i.length-1)-r;return e.currentTime>=s},mediaEvents:["playing","timeupdate","progress","waiting","emptied"]},mediaSubtitlesList:{get(t){return Zm(t).map(({kind:e,label:r,language:n})=>({kind:e,label:r,language:n}))},mediaEvents:["loadstart"],textTracksEvents:["addtrack","removetrack"]},mediaSubtitlesShowing:{get(t){return E5(t).map(({kind:e,label:r,language:n})=>({kind:e,label:r,language:n}))},mediaEvents:["loadstart"],textTracksEvents:["addtrack","removetrack","change"],stateOwnersUpdateHandlers:[(t,e)=>{var r,n;const{media:i,options:s}=e;if(!i)return;const a=o=>{var l;!s.defaultSubtitles||o&&![_s.CAPTIONS,_s.SUBTITLES].includes((l=o==null?void 0:o.track)==null?void 0:l.kind)||_5(e,!0)};return(r=i.textTracks)==null||r.addEventListener("addtrack",a),(n=i.textTracks)==null||n.addEventListener("removetrack",a),a(),()=>{var o,l;(o=i.textTracks)==null||o.removeEventListener("addtrack",a),(l=i.textTracks)==null||l.removeEventListener("removetrack",a)}}]},mediaChaptersCues:{get(t){var e;const{media:r}=t;if(!r)return[];const[n]=uv(r,{kind:_s.CHAPTERS});return Array.from((e=n==null?void 0:n.cues)!=null?e:[]).map(({text:i,startTime:s,endTime:a})=>({text:i,startTime:s,endTime:a}))},mediaEvents:["loadstart","loadedmetadata"],textTracksEvents:["addtrack","removetrack","change"],stateOwnersUpdateHandlers:[(t,e)=>{var r;const{media:n}=e;if(!n)return;const i=n.querySelector('track[kind="chapters"][default][src]'),s=(r=n.shadowRoot)==null?void 0:r.querySelector(':is(video,audio) > track[kind="chapters"][default][src]');return i==null||i.addEventListener("load",t),s==null||s.addEventListener("load",t),()=>{i==null||i.removeEventListener("load",t),s==null||s.removeEventListener("load",t)}}]},mediaIsPip:{get(t){var e,r;const{media:n,documentElement:i}=t;if(!n||!i||!i.pictureInPictureElement)return!1;if(i.pictureInPictureElement===n)return!0;if(i.pictureInPictureElement instanceof HTMLMediaElement)return(e=n.localName)!=null&&e.includes("-")?ra(n,i.pictureInPictureElement):!1;if(i.pictureInPictureElement.localName.includes("-")){let s=i.pictureInPictureElement.shadowRoot;for(;s!=null&&s.pictureInPictureElement;){if(s.pictureInPictureElement===n)return!0;s=(r=s.pictureInPictureElement)==null?void 0:r.shadowRoot}}return!1},set(t,e){const{media:r}=e;if(r)if(t){if(!Fe.pictureInPictureEnabled){console.warn("MediaChrome: Picture-in-picture is not enabled");return}if(!r.requestPictureInPicture){console.warn("MediaChrome: The current media does not support picture-in-picture");return}const n=()=>{console.warn("MediaChrome: The media is not ready for picture-in-picture. It must have a readyState > 0.")};r.requestPictureInPicture().catch(i=>{if(i.code===11){if(!r.src){console.warn("MediaChrome: The media is not ready for picture-in-picture. It must have a src set.");return}if(r.readyState===0&&r.preload==="none"){const s=()=>{r.removeEventListener("loadedmetadata",a),r.preload="none"},a=()=>{r.requestPictureInPicture().catch(n),s()};r.addEventListener("loadedmetadata",a),r.preload="metadata",setTimeout(()=>{r.readyState===0&&n(),s()},1e3)}else throw i}else throw i})}else Fe.pictureInPictureElement&&Fe.exitPictureInPicture()},mediaEvents:["enterpictureinpicture","leavepictureinpicture"]},mediaRenditionList:{get(t){var e;const{media:r}=t;return[...(e=r==null?void 0:r.videoRenditions)!=null?e:[]].map(n=>({...n}))},mediaEvents:["emptied","loadstart"],videoRenditionsEvents:["addrendition","removerendition"]},mediaRenditionSelected:{get(t){var e,r,n;const{media:i}=t;return(n=(r=i==null?void 0:i.videoRenditions)==null?void 0:r[(e=i.videoRenditions)==null?void 0:e.selectedIndex])==null?void 0:n.id},set(t,e){const{media:r}=e;if(!(r!=null&&r.videoRenditions)){console.warn("MediaController: Rendition selection not supported by this media.");return}const n=t,i=Array.prototype.findIndex.call(r.videoRenditions,s=>s.id==n);r.videoRenditions.selectedIndex!=i&&(r.videoRenditions.selectedIndex=i)},mediaEvents:["emptied"],videoRenditionsEvents:["addrendition","removerendition","change"]},mediaAudioTrackList:{get(t){var e;const{media:r}=t;return[...(e=r==null?void 0:r.audioTracks)!=null?e:[]]},mediaEvents:["emptied","loadstart"],audioTracksEvents:["addtrack","removetrack"]},mediaAudioTrackEnabled:{get(t){var e,r;const{media:n}=t;return(r=[...(e=n==null?void 0:n.audioTracks)!=null?e:[]].find(i=>i.enabled))==null?void 0:r.id},set(t,e){const{media:r}=e;if(!(r!=null&&r.audioTracks)){console.warn("MediaChrome: Audio track selection not supported by this media.");return}const n=t;for(const i of r.audioTracks)i.enabled=n==i.id},mediaEvents:["emptied"],audioTracksEvents:["addtrack","removetrack","change"]},mediaIsFullscreen:{get(t){return gie(t)},set(t,e){t?fie(e):pie(e)},rootEvents:["fullscreenchange","webkitfullscreenchange"],mediaEvents:["webkitbeginfullscreen","webkitendfullscreen","webkitpresentationmodechanged"]},mediaIsCasting:{get(t){var e;const{media:r}=t;return!(r!=null&&r.remote)||((e=r.remote)==null?void 0:e.state)==="disconnected"?!1:!!r.remote.state},set(t,e){var r,n;const{media:i}=e;if(i&&!(t&&((r=i.remote)==null?void 0:r.state)!=="disconnected")&&!(!t&&((n=i.remote)==null?void 0:n.state)!=="connected")){if(typeof i.remote.prompt!="function"){console.warn("MediaChrome: Casting is not supported in this environment");return}i.remote.prompt().catch(()=>{})}},remoteEvents:["connect","connecting","disconnect"]},mediaIsAirplaying:{get(){return!1},set(t,e){const{media:r}=e;if(r){if(!(r.webkitShowPlaybackTargetPicker&&K.WebKitPlaybackTargetAvailabilityEvent)){console.warn("MediaChrome: received a request to select AirPlay but AirPlay is not supported in this environment");return}r.webkitShowPlaybackTargetPicker()}},mediaEvents:["webkitcurrentplaybacktargetiswirelesschanged"]},mediaFullscreenUnavailable:{get(t){const{media:e}=t;if(!xie||!y5(e))return hi.UNSUPPORTED}},mediaPipUnavailable:{get(t){const{media:e}=t;if(!Sie||!b5(e))return hi.UNSUPPORTED}},mediaVolumeUnavailable:{get(t){const{media:e}=t;if(Qm===!1||(e==null?void 0:e.volume)==null)return hi.UNSUPPORTED},stateOwnersUpdateHandlers:[t=>{Qm==null&&Iie.then(e=>t(e?void 0:hi.UNSUPPORTED))}]},mediaCastUnavailable:{get(t,{availability:e="not-available"}={}){var r;const{media:n}=t;if(!Aie||!((r=n==null?void 0:n.remote)!=null&&r.state))return hi.UNSUPPORTED;if(!(e==null||e==="available"))return hi.UNAVAILABLE},stateOwnersUpdateHandlers:[(t,e)=>{var r;const{media:n}=e;return n?(n.disableRemotePlayback||n.hasAttribute("disableremoteplayback")||(r=n==null?void 0:n.remote)==null||r.watchAvailability(s=>{t({availability:s?"available":"not-available"})}).catch(s=>{s.name==="NotSupportedError"?t({availability:null}):t({availability:"not-available"})}),()=>{var s;(s=n==null?void 0:n.remote)==null||s.cancelWatchAvailability().catch(()=>{})}):void 0}]},mediaAirplayUnavailable:{get(t,e){if(!wie)return hi.UNSUPPORTED;if((e==null?void 0:e.availability)==="not-available")return hi.UNAVAILABLE},mediaEvents:["webkitplaybacktargetavailabilitychanged"],stateOwnersUpdateHandlers:[(t,e)=>{var r;const{media:n}=e;return n?(n.disableRemotePlayback||n.hasAttribute("disableremoteplayback")||(r=n==null?void 0:n.remote)==null||r.watchAvailability(s=>{t({availability:s?"available":"not-available"})}).catch(s=>{s.name==="NotSupportedError"?t({availability:null}):t({availability:"not-available"})}),()=>{var s;(s=n==null?void 0:n.remote)==null||s.cancelWatchAvailability().catch(()=>{})}):void 0}]},mediaRenditionUnavailable:{get(t){var e;const{media:r}=t;if(!(r!=null&&r.videoRenditions))return hi.UNSUPPORTED;if(!((e=r.videoRenditions)!=null&&e.length))return hi.UNAVAILABLE},mediaEvents:["emptied","loadstart"],videoRenditionsEvents:["addrendition","removerendition"]},mediaAudioTrackUnavailable:{get(t){var e,r;const{media:n}=t;if(!(n!=null&&n.audioTracks))return hi.UNSUPPORTED;if(((r=(e=n.audioTracks)==null?void 0:e.length)!=null?r:0)<=1)return hi.UNAVAILABLE},mediaEvents:["emptied","loadstart"],audioTracksEvents:["addtrack","removetrack"]}},Lie={[Re.MEDIA_PREVIEW_REQUEST](t,e,{detail:r}){var n,i,s;const{media:a}=e,o=r??void 0;let l,u;if(a&&o!=null){const[f]=uv(a,{kind:_s.METADATA,label:"thumbnails"}),p=Array.prototype.find.call((n=f==null?void 0:f.cues)!=null?n:[],(m,g,v)=>g===0?m.endTime>o:g===v.length-1?m.startTime<=o:m.startTime<=o&&m.endTime>o);if(p){const m=/'^(?:[a-z]+:)?\/\//i.test(p.text)||(i=a==null?void 0:a.querySelector('track[label="thumbnails"]'))==null?void 0:i.src,g=new URL(p.text,m);u=new URLSearchParams(g.hash).get("#xywh").split(",").map(b=>+b),l=g.href}}const c=t.mediaDuration.get(e);let h=(s=t.mediaChaptersCues.get(e).find((f,p,m)=>p===m.length-1&&c===f.endTime?f.startTime<=o&&f.endTime>=o:f.startTime<=o&&f.endTime>o))==null?void 0:s.text;return r!=null&&h==null&&(h=""),{mediaPreviewTime:o,mediaPreviewImage:l,mediaPreviewCoords:u,mediaPreviewChapter:h}},[Re.MEDIA_PAUSE_REQUEST](t,e){t["mediaPaused"].set(!0,e)},[Re.MEDIA_PLAY_REQUEST](t,e){var r;const n="mediaPaused";if(t.mediaStreamType.get(e)===Hs.LIVE){const a=!(t.mediaTargetLiveWindow.get(e)>0),o=(r=t.mediaSeekable.get(e))==null?void 0:r[1];a&&o&&t.mediaCurrentTime.set(o,e)}t[n].set(!1,e)},[Re.MEDIA_PLAYBACK_RATE_REQUEST](t,e,{detail:r}){const n="mediaPlaybackRate",i=r;t[n].set(i,e)},[Re.MEDIA_MUTE_REQUEST](t,e){t["mediaMuted"].set(!0,e)},[Re.MEDIA_UNMUTE_REQUEST](t,e){const r="mediaMuted";t.mediaVolume.get(e)||t.mediaVolume.set(.25,e),t[r].set(!1,e)},[Re.MEDIA_VOLUME_REQUEST](t,e,{detail:r}){const n="mediaVolume",i=r;i&&t.mediaMuted.get(e)&&t.mediaMuted.set(!1,e),t[n].set(i,e)},[Re.MEDIA_SEEK_REQUEST](t,e,{detail:r}){const n="mediaCurrentTime",i=r;t[n].set(i,e)},[Re.MEDIA_SEEK_TO_LIVE_REQUEST](t,e){var r;const n="mediaCurrentTime",i=(r=t.mediaSeekable.get(e))==null?void 0:r[1];Number.isNaN(Number(i))||t[n].set(i,e)},[Re.MEDIA_SHOW_SUBTITLES_REQUEST](t,e,{detail:r}){var n;const{options:i}=e,s=Zm(e),a=m5(r),o=(n=a[0])==null?void 0:n.language;o&&!i.noSubtitlesLangPref&&K.localStorage.setItem("media-chrome-pref-subtitles-lang",o),zd(Uu.SHOWING,s,a)},[Re.MEDIA_DISABLE_SUBTITLES_REQUEST](t,e,{detail:r}){const n=Zm(e),i=r??[];zd(Uu.DISABLED,n,i)},[Re.MEDIA_TOGGLE_SUBTITLES_REQUEST](t,e,{detail:r}){_5(e,r)},[Re.MEDIA_RENDITION_REQUEST](t,e,{detail:r}){const n="mediaRenditionSelected",i=r;t[n].set(i,e)},[Re.MEDIA_AUDIO_TRACK_REQUEST](t,e,{detail:r}){const n="mediaAudioTrackEnabled",i=r;t[n].set(i,e)},[Re.MEDIA_ENTER_PIP_REQUEST](t,e){const r="mediaIsPip";t.mediaIsFullscreen.get(e)&&t.mediaIsFullscreen.set(!1,e),t[r].set(!0,e)},[Re.MEDIA_EXIT_PIP_REQUEST](t,e){t["mediaIsPip"].set(!1,e)},[Re.MEDIA_ENTER_FULLSCREEN_REQUEST](t,e){const r="mediaIsFullscreen";t.mediaIsPip.get(e)&&t.mediaIsPip.set(!1,e),t[r].set(!0,e)},[Re.MEDIA_EXIT_FULLSCREEN_REQUEST](t,e){t["mediaIsFullscreen"].set(!1,e)},[Re.MEDIA_ENTER_CAST_REQUEST](t,e){const r="mediaIsCasting";t.mediaIsFullscreen.get(e)&&t.mediaIsFullscreen.set(!1,e),t[r].set(!0,e)},[Re.MEDIA_EXIT_CAST_REQUEST](t,e){t["mediaIsCasting"].set(!1,e)},[Re.MEDIA_AIRPLAY_REQUEST](t,e){t["mediaIsAirplaying"].set(!0,e)}},Die=({media:t,fullscreenElement:e,documentElement:r,stateMediator:n=Q0,requestMap:i=Lie,options:s={},monitorStateOwnersOnlyWithSubscriptions:a=!0})=>{const o=[],l={options:{...s}};let u=Object.freeze({mediaPreviewTime:void 0,mediaPreviewImage:void 0,mediaPreviewCoords:void 0,mediaPreviewChapter:void 0});const c=m=>{m!=null&&(lS(m,u)||(u=Object.freeze({...u,...m}),o.forEach(g=>g(u))))},d=()=>{const m=Object.entries(n).reduce((g,[v,{get:b}])=>(g[v]=b(l),g),{});c(m)},h={};let f;const p=async(m,g)=>{var v,b,y,T,x,_,S,A,k,I,C,N,P,V,M,U;const B=!!f;if(f={...l,...f??{},...m},B)return;await kie(...Object.values(m));const X=o.length>0&&g===0&&a,te=l.media!==f.media,D=((v=l.media)==null?void 0:v.textTracks)!==((b=f.media)==null?void 0:b.textTracks),L=((y=l.media)==null?void 0:y.videoRenditions)!==((T=f.media)==null?void 0:T.videoRenditions),Y=((x=l.media)==null?void 0:x.audioTracks)!==((_=f.media)==null?void 0:_.audioTracks),$=((S=l.media)==null?void 0:S.remote)!==((A=f.media)==null?void 0:A.remote),j=l.documentElement!==f.documentElement,z=!!l.media&&(te||X),re=!!((k=l.media)!=null&&k.textTracks)&&(D||X),ne=!!((I=l.media)!=null&&I.videoRenditions)&&(L||X),ue=!!((C=l.media)!=null&&C.audioTracks)&&(Y||X),Te=!!((N=l.media)!=null&&N.remote)&&($||X),ce=!!l.documentElement&&(j||X),_e=z||re||ne||ue||Te||ce,De=o.length===0&&g===1&&a,nt=!!f.media&&(te||De),ke=!!((P=f.media)!=null&&P.textTracks)&&(D||De),Oe=!!((V=f.media)!=null&&V.videoRenditions)&&(L||De),ar=!!((M=f.media)!=null&&M.audioTracks)&&(Y||De),Et=!!((U=f.media)!=null&&U.remote)&&($||De),Gt=!!f.documentElement&&(j||De),er=nt||ke||Oe||ar||Et||Gt;if(!(_e||er)){Object.entries(f).forEach(([ze,$e])=>{l[ze]=$e}),d(),f=void 0;return}Object.entries(n).forEach(([ze,{get:$e,mediaEvents:tr=[],textTracksEvents:wt=[],videoRenditionsEvents:gt=[],audioTracksEvents:mr=[],remoteEvents:It=[],rootEvents:Kt=[],stateOwnersUpdateHandlers:nn=[]}])=>{h[ze]||(h[ze]={});const de=ye=>{const ot=$e(l,ye);c({[ze]:ot})};let he;he=h[ze].mediaEvents,tr.forEach(ye=>{he&&z&&(l.media.removeEventListener(ye,he),h[ze].mediaEvents=void 0),nt&&(f.media.addEventListener(ye,de),h[ze].mediaEvents=de)}),he=h[ze].textTracksEvents,wt.forEach(ye=>{var ot,qt;he&&re&&((ot=l.media.textTracks)==null||ot.removeEventListener(ye,he),h[ze].textTracksEvents=void 0),ke&&((qt=f.media.textTracks)==null||qt.addEventListener(ye,de),h[ze].textTracksEvents=de)}),he=h[ze].videoRenditionsEvents,gt.forEach(ye=>{var ot,qt;he&&ne&&((ot=l.media.videoRenditions)==null||ot.removeEventListener(ye,he),h[ze].videoRenditionsEvents=void 0),Oe&&((qt=f.media.videoRenditions)==null||qt.addEventListener(ye,de),h[ze].videoRenditionsEvents=de)}),he=h[ze].audioTracksEvents,mr.forEach(ye=>{var ot,qt;he&&ue&&((ot=l.media.audioTracks)==null||ot.removeEventListener(ye,he),h[ze].audioTracksEvents=void 0),ar&&((qt=f.media.audioTracks)==null||qt.addEventListener(ye,de),h[ze].audioTracksEvents=de)}),he=h[ze].remoteEvents,It.forEach(ye=>{var ot,qt;he&&Te&&((ot=l.media.remote)==null||ot.removeEventListener(ye,he),h[ze].remoteEvents=void 0),Et&&((qt=f.media.remote)==null||qt.addEventListener(ye,de),h[ze].remoteEvents=de)}),he=h[ze].rootEvents,Kt.forEach(ye=>{he&&ce&&(l.documentElement.removeEventListener(ye,he),h[ze].rootEvents=void 0),Gt&&(f.documentElement.addEventListener(ye,de),h[ze].rootEvents=de)});const Me=h[ze].stateOwnersUpdateHandlers;nn.forEach(ye=>{Me&&_e&&Me(),er&&(h[ze].stateOwnersUpdateHandlers=ye(de,f))})}),Object.entries(f).forEach(([ze,$e])=>{l[ze]=$e}),d(),f=void 0};return p({media:t,fullscreenElement:e,documentElement:r,options:s}),{dispatch(m){const{type:g,detail:v}=m;if(i[g]){c(i[g](n,l,m));return}g==="mediaelementchangerequest"?p({media:v}):g==="fullscreenelementchangerequest"?p({fullscreenElement:v}):g==="documentelementchangerequest"?p({documentElement:v}):g==="optionschangerequest"&&Object.entries(v??{}).forEach(([b,y])=>{l.options[b]=y})},getState(){return u},subscribe(m){return p({},o.length+1),o.push(m),m(u),()=>{const g=o.indexOf(m);g>=0&&(p({},o.length-1),o.splice(g,1))}}}};var Oie=Die,uS=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},it=(t,e,r)=>(uS(t,e,"read from private field"),r?r.call(t):e.get(t)),Ls=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},ha=(t,e,r,n)=>(uS(t,e,"write to private field"),e.set(t,r),r),Ia=(t,e,r)=>(uS(t,e,"access private method"),r),ka,hd,Jt,fd,zi,J0,ep,$1,ac,Eh,tp,U1;const T5=["ArrowLeft","ArrowRight","Enter"," ","f","m","k","c"],PI=10,ft={DEFAULT_SUBTITLES:"defaultsubtitles",DEFAULT_STREAM_TYPE:"defaultstreamtype",DEFAULT_DURATION:"defaultduration",FULLSCREEN_ELEMENT:"fullscreenelement",HOTKEYS:"hotkeys",KEYS_USED:"keysused",LIVE_EDGE_OFFSET:"liveedgeoffset",NO_AUTO_SEEK_TO_LIVE:"noautoseektolive",NO_HOTKEYS:"nohotkeys",NO_VOLUME_PREF:"novolumepref",NO_SUBTITLES_LANG_PREF:"nosubtitleslangpref",NO_DEFAULT_STORE:"nodefaultstore",KEYBOARD_FORWARD_SEEK_OFFSET:"keyboardforwardseekoffset",KEYBOARD_BACKWARD_SEEK_OFFSET:"keyboardbackwardseekoffset"};class x5 extends h5{constructor(){super(),Ls(this,ep),Ls(this,ac),Ls(this,tp),this.mediaStateReceivers=[],this.associatedElementSubscriptions=new Map,Ls(this,ka,new ov(this,ft.HOTKEYS)),Ls(this,hd,void 0),Ls(this,Jt,void 0),Ls(this,fd,void 0),Ls(this,zi,void 0),Ls(this,J0,r=>{var n;(n=it(this,Jt))==null||n.dispatch(r)}),this.associateElement(this);let e={};ha(this,fd,r=>{Object.entries(r).forEach(([n,i])=>{if(n in e&&e[n]===i)return;this.propagateMediaState(n,i);const s=n.toLowerCase(),a=new K.CustomEvent(Bne[s],{composed:!0,detail:i});this.dispatchEvent(a)}),e=r}),this.enableHotkeys()}static get observedAttributes(){return super.observedAttributes.concat(ft.NO_HOTKEYS,ft.HOTKEYS,ft.DEFAULT_STREAM_TYPE,ft.DEFAULT_SUBTITLES,ft.DEFAULT_DURATION)}get mediaStore(){return it(this,Jt)}set mediaStore(e){var r,n;if(it(this,Jt)&&((r=it(this,zi))==null||r.call(this),ha(this,zi,void 0)),ha(this,Jt,e),!it(this,Jt)&&!this.hasAttribute(ft.NO_DEFAULT_STORE)){Ia(this,ep,$1).call(this);return}ha(this,zi,(n=it(this,Jt))==null?void 0:n.subscribe(it(this,fd)))}get fullscreenElement(){var e;return(e=it(this,hd))!=null?e:this}set fullscreenElement(e){var r;this.hasAttribute(ft.FULLSCREEN_ELEMENT)&&this.removeAttribute(ft.FULLSCREEN_ELEMENT),ha(this,hd,e),(r=it(this,Jt))==null||r.dispatch({type:"fullscreenelementchangerequest",detail:this.fullscreenElement})}attributeChangedCallback(e,r,n){var i,s,a,o,l,u;if(super.attributeChangedCallback(e,r,n),e===ft.NO_HOTKEYS)n!==r&&n===""?(this.hasAttribute(ft.HOTKEYS)&&console.warn("Media Chrome: Both `hotkeys` and `nohotkeys` have been set. All hotkeys will be disabled."),this.disableHotkeys()):n!==r&&n===null&&this.enableHotkeys();else if(e===ft.HOTKEYS)it(this,ka).value=n;else if(e===ft.DEFAULT_SUBTITLES&&n!==r)(i=it(this,Jt))==null||i.dispatch({type:"optionschangerequest",detail:{defaultSubtitles:this.hasAttribute(ft.DEFAULT_SUBTITLES)}});else if(e===ft.DEFAULT_STREAM_TYPE)(a=it(this,Jt))==null||a.dispatch({type:"optionschangerequest",detail:{defaultStreamType:(s=this.getAttribute(ft.DEFAULT_STREAM_TYPE))!=null?s:void 0}});else if(e===ft.LIVE_EDGE_OFFSET)(o=it(this,Jt))==null||o.dispatch({type:"optionschangerequest",detail:{liveEdgeOffset:this.hasAttribute(ft.LIVE_EDGE_OFFSET)?+this.getAttribute(ft.LIVE_EDGE_OFFSET):void 0}});else if(e===ft.FULLSCREEN_ELEMENT){const c=n?(l=this.getRootNode())==null?void 0:l.getElementById(n):void 0;ha(this,hd,c),(u=it(this,Jt))==null||u.dispatch({type:"fullscreenelementchangerequest",detail:this.fullscreenElement})}}connectedCallback(){var e,r;!it(this,Jt)&&!this.hasAttribute(ft.NO_DEFAULT_STORE)&&Ia(this,ep,$1).call(this),(e=it(this,Jt))==null||e.dispatch({type:"documentelementchangerequest",detail:Fe}),super.connectedCallback(),it(this,Jt)&&!it(this,zi)&&ha(this,zi,(r=it(this,Jt))==null?void 0:r.subscribe(it(this,fd))),this.enableHotkeys()}disconnectedCallback(){var e,r,n,i;(e=super.disconnectedCallback)==null||e.call(this),it(this,Jt)&&((r=it(this,Jt))==null||r.dispatch({type:"documentelementchangerequest",detail:void 0}),(n=it(this,Jt))==null||n.dispatch({type:Re.MEDIA_TOGGLE_SUBTITLES_REQUEST,detail:!1})),it(this,zi)&&((i=it(this,zi))==null||i.call(this),ha(this,zi,void 0))}mediaSetCallback(e){var r;super.mediaSetCallback(e),(r=it(this,Jt))==null||r.dispatch({type:"mediaelementchangerequest",detail:e}),e.hasAttribute("tabindex")||(e.tabIndex=-1)}mediaUnsetCallback(e){var r;super.mediaUnsetCallback(e),(r=it(this,Jt))==null||r.dispatch({type:"mediaelementchangerequest",detail:void 0})}propagateMediaState(e,r){$I(this.mediaStateReceivers,e,r)}associateElement(e){if(!e)return;const{associatedElementSubscriptions:r}=this;if(r.has(e))return;const n=this.registerMediaStateReceiver.bind(this),i=this.unregisterMediaStateReceiver.bind(this),s=Uie(e,n,i);Object.values(Re).forEach(a=>{e.addEventListener(a,it(this,J0))}),r.set(e,s)}unassociateElement(e){if(!e)return;const{associatedElementSubscriptions:r}=this;if(!r.has(e))return;r.get(e)(),r.delete(e),Object.values(Re).forEach(i=>{e.removeEventListener(i,it(this,J0))})}registerMediaStateReceiver(e){if(!e)return;const r=this.mediaStateReceivers;r.indexOf(e)>-1||(r.push(e),it(this,Jt)&&Object.entries(it(this,Jt).getState()).forEach(([i,s])=>{$I([e],i,s)}))}unregisterMediaStateReceiver(e){const r=this.mediaStateReceivers,n=r.indexOf(e);n<0||r.splice(n,1)}enableHotkeys(){this.addEventListener("keydown",Ia(this,tp,U1))}disableHotkeys(){this.removeEventListener("keydown",Ia(this,tp,U1)),this.removeEventListener("keyup",Ia(this,ac,Eh))}get hotkeys(){return it(this,ka)}keyboardShortcutHandler(e){var r,n,i,s,a;const o=e.target;if(((i=(n=(r=o.getAttribute(ft.KEYS_USED))==null?void 0:r.split(" "))!=null?n:o==null?void 0:o.keysUsed)!=null?i:[]).map(h=>h==="Space"?" ":h).filter(Boolean).includes(e.key))return;let u,c,d;if(!it(this,ka).contains(`no${e.key.toLowerCase()}`)&&!(e.key===" "&&it(this,ka).contains("nospace")))switch(e.key){case" ":case"k":u=it(this,Jt).getState().mediaPaused?Re.MEDIA_PLAY_REQUEST:Re.MEDIA_PAUSE_REQUEST,this.dispatchEvent(new K.CustomEvent(u,{composed:!0,bubbles:!0}));break;case"m":u=this.mediaStore.getState().mediaVolumeLevel==="off"?Re.MEDIA_UNMUTE_REQUEST:Re.MEDIA_MUTE_REQUEST,this.dispatchEvent(new K.CustomEvent(u,{composed:!0,bubbles:!0}));break;case"f":u=this.mediaStore.getState().mediaIsFullscreen?Re.MEDIA_EXIT_FULLSCREEN_REQUEST:Re.MEDIA_ENTER_FULLSCREEN_REQUEST,this.dispatchEvent(new K.CustomEvent(u,{composed:!0,bubbles:!0}));break;case"c":this.dispatchEvent(new K.CustomEvent(Re.MEDIA_TOGGLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0}));break;case"ArrowLeft":{const h=this.hasAttribute(ft.KEYBOARD_BACKWARD_SEEK_OFFSET)?+this.getAttribute(ft.KEYBOARD_BACKWARD_SEEK_OFFSET):PI;c=Math.max(((s=this.mediaStore.getState().mediaCurrentTime)!=null?s:0)-h,0),d=new K.CustomEvent(Re.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:c}),this.dispatchEvent(d);break}case"ArrowRight":{const h=this.hasAttribute(ft.KEYBOARD_FORWARD_SEEK_OFFSET)?+this.getAttribute(ft.KEYBOARD_FORWARD_SEEK_OFFSET):PI;c=Math.max(((a=this.mediaStore.getState().mediaCurrentTime)!=null?a:0)+h,0),d=new K.CustomEvent(Re.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:c}),this.dispatchEvent(d);break}}}}ka=new WeakMap;hd=new WeakMap;Jt=new WeakMap;fd=new WeakMap;zi=new WeakMap;J0=new WeakMap;ep=new WeakSet;$1=function(){var t;this.mediaStore=Oie({media:this.media,fullscreenElement:this.fullscreenElement,options:{defaultSubtitles:this.hasAttribute(ft.DEFAULT_SUBTITLES),defaultDuration:this.hasAttribute(ft.DEFAULT_DURATION)?+this.getAttribute(ft.DEFAULT_DURATION):void 0,defaultStreamType:(t=this.getAttribute(ft.DEFAULT_STREAM_TYPE))!=null?t:void 0,liveEdgeOffset:this.hasAttribute(ft.LIVE_EDGE_OFFSET)?+this.getAttribute(ft.LIVE_EDGE_OFFSET):void 0,noVolumePref:this.hasAttribute(ft.NO_VOLUME_PREF),noSubtitlesLangPref:this.hasAttribute(ft.NO_SUBTITLES_LANG_PREF)}})};ac=new WeakSet;Eh=function(t){const{key:e}=t;if(!T5.includes(e)){this.removeEventListener("keyup",Ia(this,ac,Eh));return}this.keyboardShortcutHandler(t)};tp=new WeakSet;U1=function(t){const{metaKey:e,altKey:r,key:n}=t;if(e||r||!T5.includes(n)){this.removeEventListener("keyup",Ia(this,ac,Eh));return}[" ","ArrowLeft","ArrowRight"].includes(n)&&!(it(this,ka).contains(`no${n.toLowerCase()}`)||n===" "&&it(this,ka).contains("nospace"))&&t.preventDefault(),this.addEventListener("keyup",Ia(this,ac,Eh),{once:!0})};const Mie=Object.values(O),Pie=Object.values(qN),S5=t=>{var e,r,n,i;let{observedAttributes:s}=t.constructor;!s&&((e=t.nodeName)!=null&&e.includes("-"))&&(K.customElements.upgrade(t),{observedAttributes:s}=t.constructor);const a=(i=(n=(r=t==null?void 0:t.getAttribute)==null?void 0:r.call(t,Bt.MEDIA_CHROME_ATTRIBUTES))==null?void 0:n.split)==null?void 0:i.call(n,/\s+/);return Array.isArray(s||a)?(s||a).filter(o=>Mie.includes(o)):[]},Nie=t=>{var e,r;return(e=t.nodeName)!=null&&e.includes("-")&&K.customElements.get((r=t.nodeName)==null?void 0:r.toLowerCase())&&!(t instanceof K.customElements.get(t.nodeName.toLowerCase()))&&K.customElements.upgrade(t),Pie.some(n=>n in t)},B1=t=>Nie(t)||!!S5(t).length,NI=t=>{var e;return(e=t==null?void 0:t.join)==null?void 0:e.call(t,":")},FI={[O.MEDIA_SUBTITLES_LIST]:yh,[O.MEDIA_SUBTITLES_SHOWING]:yh,[O.MEDIA_SEEKABLE]:NI,[O.MEDIA_BUFFERED]:t=>t==null?void 0:t.map(NI).join(" "),[O.MEDIA_PREVIEW_COORDS]:t=>t==null?void 0:t.join(" "),[O.MEDIA_RENDITION_LIST]:Hne,[O.MEDIA_AUDIO_TRACK_LIST]:Kne},Fie=async(t,e,r)=>{var n,i;if(t.isConnected||await XN(0),typeof r=="boolean"||r==null)return Jr(t,e,r);if(typeof r=="number")return Pr(t,e,r);if(typeof r=="string")return $r(t,e,r);if(Array.isArray(r)&&!r.length)return t.removeAttribute(e);const s=(i=(n=FI[e])==null?void 0:n.call(FI,r))!=null?i:r;return t.setAttribute(e,s)},$ie=t=>{var e;return!!((e=t.closest)!=null&&e.call(t,'*[slot="media"]'))},bo=(t,e)=>{if($ie(t))return;const r=(i,s)=>{var a,o;B1(i)&&s(i);const{children:l=[]}=i??{},u=(o=(a=i==null?void 0:i.shadowRoot)==null?void 0:a.children)!=null?o:[];[...l,...u].forEach(d=>bo(d,s))},n=t==null?void 0:t.nodeName.toLowerCase();if(n.includes("-")&&!B1(t)){K.customElements.whenDefined(n).then(()=>{r(t,e)});return}r(t,e)},$I=(t,e,r)=>{t.forEach(n=>{if(e in n){n[e]=r;return}const i=S5(n),s=e.toLowerCase();i.includes(s)&&Fie(n,s,r)})},Uie=(t,e,r)=>{bo(t,e);const n=c=>{var d;const h=(d=c==null?void 0:c.composedPath()[0])!=null?d:c.target;e(h)},i=c=>{var d;const h=(d=c==null?void 0:c.composedPath()[0])!=null?d:c.target;r(h)};t.addEventListener(Re.REGISTER_MEDIA_STATE_RECEIVER,n),t.addEventListener(Re.UNREGISTER_MEDIA_STATE_RECEIVER,i);const s=c=>{c.forEach(d=>{const{addedNodes:h=[],removedNodes:f=[],type:p,target:m,attributeName:g}=d;p==="childList"?(Array.prototype.forEach.call(h,v=>bo(v,e)),Array.prototype.forEach.call(f,v=>bo(v,r))):p==="attributes"&&g===Bt.MEDIA_CHROME_ATTRIBUTES&&(B1(m)?e(m):r(m))})};let a=[];const o=c=>{const d=c.target;d.name!=="media"&&(a.forEach(h=>bo(h,r)),a=[...d.assignedElements({flatten:!0})],a.forEach(h=>bo(h,e)))};t.addEventListener("slotchange",o);const l=new MutationObserver(s);return l.observe(t,{childList:!0,attributes:!0,subtree:!0}),()=>{bo(t,r),t.removeEventListener("slotchange",o),l.disconnect(),t.removeEventListener(Re.REGISTER_MEDIA_STATE_RECEIVER,n),t.removeEventListener(Re.UNREGISTER_MEDIA_STATE_RECEIVER,i)}};K.customElements.get("media-controller")||K.customElements.define("media-controller",x5);var Bie=x5,cS=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Tr=(t,e,r)=>(cS(t,e,"read from private field"),r?r.call(t):e.get(t)),Nl=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Uf=(t,e,r,n)=>(cS(t,e,"write to private field"),e.set(t,r),r),jie=(t,e,r)=>(cS(t,e,"access private method"),r),Yi,ku,La,Ql,rp,j1,w5;const Bf={TOOLTIP_PLACEMENT:"tooltipplacement"},A5=Fe.createElement("template");A5.innerHTML=`
<style>
  :host {
    position: relative;
    font: var(--media-font,
      var(--media-font-weight, bold)
      var(--media-font-size, 14px) /
      var(--media-text-content-height, var(--media-control-height, 24px))
      var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
    color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
    background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));
    padding: var(--media-button-padding, var(--media-control-padding, 10px));
    justify-content: var(--media-button-justify-content, center);
    display: inline-flex;
    align-items: center;
    vertical-align: middle;
    box-sizing: border-box;
    transition: background .15s linear;
    pointer-events: auto;
    cursor: pointer;
    -webkit-tap-highlight-color: transparent;
  }

  
  :host(:focus-visible) {
    box-shadow: inset 0 0 0 2px rgb(27 127 204 / .9);
    outline: 0;
  }
  
  :host(:where(:focus)) {
    box-shadow: none;
    outline: 0;
  }

  :host(:hover) {
    background: var(--media-control-hover-background, rgba(50 50 70 / .7));
  }

  svg, img, ::slotted(svg), ::slotted(img) {
    width: var(--media-button-icon-width);
    height: var(--media-button-icon-height, var(--media-control-height, 24px));
    transform: var(--media-button-icon-transform);
    transition: var(--media-button-icon-transition);
    fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));
    vertical-align: middle;
    max-width: 100%;
    max-height: 100%;
    min-width: 100%;
  }

  media-tooltip {
    
    max-width: 0;
    overflow-x: clip;
    opacity: 0;
    transition: opacity .3s, max-width 0s 9s;
  }

  :host(:hover) media-tooltip,
  :host(:focus-visible) media-tooltip {
    max-width: 100vw;
    opacity: 1;
    transition: opacity .3s;
  }

  :host([notooltip]) slot[name="tooltip"] {
    display: none;
  }
</style>

<slot name="tooltip">
  <media-tooltip part="tooltip" aria-hidden="true">
    <slot name="tooltip-content"></slot>
  </media-tooltip>
</slot>
`;class oi extends K.HTMLElement{constructor(e={}){var r;if(super(),Nl(this,j1),Nl(this,Yi,void 0),this.preventClick=!1,this.tooltipEl=null,this.tooltipContent="",Nl(this,ku,n=>{this.preventClick||this.handleClick(n),setTimeout(Tr(this,La),0)}),Nl(this,La,()=>{var n,i;(i=(n=this.tooltipEl)==null?void 0:n.updateXOffset)==null||i.call(n)}),Nl(this,Ql,n=>{const{key:i}=n;if(!this.keysUsed.includes(i)){this.removeEventListener("keyup",Tr(this,Ql));return}this.preventClick||this.handleClick(n)}),Nl(this,rp,n=>{const{metaKey:i,altKey:s,key:a}=n;if(i||s||!this.keysUsed.includes(a)){this.removeEventListener("keyup",Tr(this,Ql));return}this.addEventListener("keyup",Tr(this,Ql),{once:!0})}),!this.shadowRoot){this.attachShadow({mode:"open"});const n=A5.content.cloneNode(!0);this.nativeEl=n;let i=e.slotTemplate;i||(i=Fe.createElement("template"),i.innerHTML=`<slot>${e.defaultContent||""}</slot>`),e.tooltipContent&&(n.querySelector('slot[name="tooltip-content"]').innerHTML=(r=e.tooltipContent)!=null?r:"",this.tooltipContent=e.tooltipContent),this.nativeEl.appendChild(i.content.cloneNode(!0)),this.shadowRoot.appendChild(n)}this.tooltipEl=this.shadowRoot.querySelector("media-tooltip")}static get observedAttributes(){return["disabled",Bf.TOOLTIP_PLACEMENT,Bt.MEDIA_CONTROLLER]}enable(){this.addEventListener("click",Tr(this,ku)),this.addEventListener("keydown",Tr(this,rp)),this.tabIndex=0}disable(){this.removeEventListener("click",Tr(this,ku)),this.removeEventListener("keydown",Tr(this,rp)),this.removeEventListener("keyup",Tr(this,Ql)),this.tabIndex=-1}attributeChangedCallback(e,r,n){var i,s,a,o,l;e===Bt.MEDIA_CONTROLLER?(r&&((s=(i=Tr(this,Yi))==null?void 0:i.unassociateElement)==null||s.call(i,this),Uf(this,Yi,null)),n&&this.isConnected&&(Uf(this,Yi,(a=this.getRootNode())==null?void 0:a.getElementById(n)),(l=(o=Tr(this,Yi))==null?void 0:o.associateElement)==null||l.call(o,this))):e==="disabled"&&n!==r?n==null?this.enable():this.disable():e===Bf.TOOLTIP_PLACEMENT&&this.tooltipEl&&n!==r&&(this.tooltipEl.placement=n),Tr(this,La).call(this)}connectedCallback(){var e,r,n;const{style:i}=Ar(this.shadowRoot,":host");i.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`),this.hasAttribute("disabled")||this.enable(),this.setAttribute("role","button");const s=this.getAttribute(Bt.MEDIA_CONTROLLER);s&&(Uf(this,Yi,(e=this.getRootNode())==null?void 0:e.getElementById(s)),(n=(r=Tr(this,Yi))==null?void 0:r.associateElement)==null||n.call(r,this)),K.customElements.whenDefined("media-tooltip").then(()=>jie(this,j1,w5).call(this))}disconnectedCallback(){var e,r;this.disable(),(r=(e=Tr(this,Yi))==null?void 0:e.unassociateElement)==null||r.call(e,this),Uf(this,Yi,null),this.removeEventListener("mouseenter",Tr(this,La)),this.removeEventListener("focus",Tr(this,La)),this.removeEventListener("click",Tr(this,ku))}get keysUsed(){return["Enter"," "]}get tooltipPlacement(){return Fr(this,Bf.TOOLTIP_PLACEMENT)}set tooltipPlacement(e){$r(this,Bf.TOOLTIP_PLACEMENT,e)}handleClick(e){}}Yi=new WeakMap;ku=new WeakMap;La=new WeakMap;Ql=new WeakMap;rp=new WeakMap;j1=new WeakSet;w5=function(){this.addEventListener("mouseenter",Tr(this,La)),this.addEventListener("focus",Tr(this,La)),this.addEventListener("click",Tr(this,ku));const t=this.tooltipPlacement;t&&this.tooltipEl&&(this.tooltipEl.placement=t)};K.customElements.get("media-chrome-button")||K.customElements.define("media-chrome-button",oi);const UI=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M22.13 3H3.87a.87.87 0 0 0-.87.87v13.26a.87.87 0 0 0 .87.87h3.4L9 16H5V5h16v11h-4l1.72 2h3.4a.87.87 0 0 0 .87-.87V3.87a.87.87 0 0 0-.86-.87Zm-8.75 11.44a.5.5 0 0 0-.76 0l-4.91 5.73a.5.5 0 0 0 .38.83h9.82a.501.501 0 0 0 .38-.83l-4.91-5.73Z"/>
</svg>
`,R5=Fe.createElement("template");R5.innerHTML=`
  <style>
    :host([${O.MEDIA_IS_AIRPLAYING}]) slot[name=icon] slot:not([name=exit]) {
      display: none !important;
    }

    
    :host(:not([${O.MEDIA_IS_AIRPLAYING}])) slot[name=icon] slot:not([name=enter]) {
      display: none !important;
    }

    :host([${O.MEDIA_IS_AIRPLAYING}]) slot[name=tooltip-enter],
    :host(:not([${O.MEDIA_IS_AIRPLAYING}])) slot[name=tooltip-exit] {
      display: none;
    }
  </style>

  <slot name="icon">
    <slot name="enter">${UI}</slot>
    <slot name="exit">${UI}</slot>
  </slot>
`;const Hie=`
  <slot name="tooltip-enter">${br.ENTER_AIRPLAY}</slot>
  <slot name="tooltip-exit">${br.EXIT_AIRPLAY}</slot>
`,BI=t=>{const e=t.mediaIsAirplaying?xn.EXIT_AIRPLAY():xn.ENTER_AIRPLAY();t.setAttribute("aria-label",e)};class Vie extends oi{static get observedAttributes(){return[...super.observedAttributes,O.MEDIA_IS_AIRPLAYING,O.MEDIA_AIRPLAY_UNAVAILABLE]}constructor(e={}){super({slotTemplate:R5,tooltipContent:Hie,...e})}connectedCallback(){super.connectedCallback(),BI(this)}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===O.MEDIA_IS_AIRPLAYING&&BI(this)}get mediaIsAirplaying(){return Qr(this,O.MEDIA_IS_AIRPLAYING)}set mediaIsAirplaying(e){Jr(this,O.MEDIA_IS_AIRPLAYING,e)}get mediaAirplayUnavailable(){return Fr(this,O.MEDIA_AIRPLAY_UNAVAILABLE)}set mediaAirplayUnavailable(e){$r(this,O.MEDIA_AIRPLAY_UNAVAILABLE,e)}handleClick(){const e=new K.CustomEvent(Re.MEDIA_AIRPLAY_REQUEST,{composed:!0,bubbles:!0});this.dispatchEvent(e)}}K.customElements.get("media-airplay-button")||K.customElements.define("media-airplay-button",Vie);const Wie=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>
</svg>`,Gie=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M17.73 14.09a1.4 1.4 0 0 1-1 .37 1.579 1.579 0 0 1-1.27-.58A3 3 0 0 1 15 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34A2.89 2.89 0 0 0 19 9.07a3 3 0 0 0-2.14-.78 3.14 3.14 0 0 0-2.42 1 3.91 3.91 0 0 0-.93 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.17 3.17 0 0 0 1.07-1.74l-1.4-.45c-.083.43-.3.822-.62 1.12Zm-7.22 0a1.43 1.43 0 0 1-1 .37 1.58 1.58 0 0 1-1.27-.58A3 3 0 0 1 7.76 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34a2.81 2.81 0 0 0-.74-1.32 2.94 2.94 0 0 0-2.13-.78 3.18 3.18 0 0 0-2.43 1 4 4 0 0 0-.92 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.23 3.23 0 0 0 1.07-1.74l-1.4-.45a2.06 2.06 0 0 1-.6 1.07Zm12.32-8.41a2.59 2.59 0 0 0-2.3-2.51C18.72 3.05 15.86 3 13 3c-2.86 0-5.72.05-7.53.17a2.59 2.59 0 0 0-2.3 2.51c-.23 4.207-.23 8.423 0 12.63a2.57 2.57 0 0 0 2.3 2.5c1.81.13 4.67.19 7.53.19 2.86 0 5.72-.06 7.53-.19a2.57 2.57 0 0 0 2.3-2.5c.23-4.207.23-8.423 0-12.63Zm-1.49 12.53a1.11 1.11 0 0 1-.91 1.11c-1.67.11-4.45.18-7.43.18-2.98 0-5.76-.07-7.43-.18a1.11 1.11 0 0 1-.91-1.11c-.21-4.14-.21-8.29 0-12.43a1.11 1.11 0 0 1 .91-1.11C7.24 4.56 10 4.49 13 4.49s5.76.07 7.43.18a1.11 1.11 0 0 1 .91 1.11c.21 4.14.21 8.29 0 12.43Z"/>
</svg>`,C5=Fe.createElement("template");C5.innerHTML=`
  <style>
    :host([aria-checked="true"]) slot[name=off] {
      display: none !important;
    }

    
    :host(:not([aria-checked="true"])) slot[name=on] {
      display: none !important;
    }

    :host([aria-checked="true"]) slot[name=tooltip-enable],
    :host(:not([aria-checked="true"])) slot[name=tooltip-disable] {
      display: none;
    }
  </style>

  <slot name="icon">
    <slot name="on">${Wie}</slot>
    <slot name="off">${Gie}</slot>
  </slot>
`;const Kie=`
  <slot name="tooltip-enable">${br.ENABLE_CAPTIONS}</slot>
  <slot name="tooltip-disable">${br.DISABLE_CAPTIONS}</slot>
`,jI=t=>{t.setAttribute("aria-checked",v5(t).toString())};class qie extends oi{static get observedAttributes(){return[...super.observedAttributes,O.MEDIA_SUBTITLES_LIST,O.MEDIA_SUBTITLES_SHOWING]}constructor(e={}){super({slotTemplate:C5,tooltipContent:Kie,...e}),this._captionsReady=!1}connectedCallback(){super.connectedCallback(),this.setAttribute("role","switch"),this.setAttribute("aria-label",si.CLOSED_CAPTIONS()),jI(this)}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===O.MEDIA_SUBTITLES_SHOWING&&jI(this)}get mediaSubtitlesList(){return HI(this,O.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(e){VI(this,O.MEDIA_SUBTITLES_LIST,e)}get mediaSubtitlesShowing(){return HI(this,O.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(e){VI(this,O.MEDIA_SUBTITLES_SHOWING,e)}handleClick(){this.dispatchEvent(new K.CustomEvent(Re.MEDIA_TOGGLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0}))}}const HI=(t,e)=>{const r=t.getAttribute(e);return r?lv(r):[]},VI=(t,e,r)=>{if(!(r!=null&&r.length)){t.removeAttribute(e);return}const n=yh(r);t.getAttribute(e)!==n&&t.setAttribute(e,n)};K.customElements.get("media-captions-button")||K.customElements.define("media-captions-button",qie);const zie='<svg aria-hidden="true" viewBox="0 0 24 24"><g><path class="cast_caf_icon_arch0" d="M1,18 L1,21 L4,21 C4,19.3 2.66,18 1,18 L1,18 Z"/><path class="cast_caf_icon_arch1" d="M1,14 L1,16 C3.76,16 6,18.2 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z"/><path class="cast_caf_icon_arch2" d="M1,10 L1,12 C5.97,12 10,16.0 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z"/><path class="cast_caf_icon_box" d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z"/></g></svg>',Yie='<svg aria-hidden="true" viewBox="0 0 24 24"><g><path class="cast_caf_icon_arch0" d="M1,18 L1,21 L4,21 C4,19.3 2.66,18 1,18 L1,18 Z"/><path class="cast_caf_icon_arch1" d="M1,14 L1,16 C3.76,16 6,18.2 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z"/><path class="cast_caf_icon_arch2" d="M1,10 L1,12 C5.97,12 10,16.0 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z"/><path class="cast_caf_icon_box" d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z"/><path class="cast_caf_icon_boxfill" d="M5,7 L5,8.63 C8,8.6 13.37,14 13.37,17 L19,17 L19,7 Z"/></g></svg>',I5=Fe.createElement("template");I5.innerHTML=`
  <style>
  :host([${O.MEDIA_IS_CASTING}]) slot[name=icon] slot:not([name=exit]) {
    display: none !important;
  }

  
  :host(:not([${O.MEDIA_IS_CASTING}])) slot[name=icon] slot:not([name=enter]) {
    display: none !important;
  }

  :host([${O.MEDIA_IS_CASTING}]) slot[name=tooltip-enter],
    :host(:not([${O.MEDIA_IS_CASTING}])) slot[name=tooltip-exit] {
      display: none;
    }
  </style>

  <slot name="icon">
    <slot name="enter">${zie}</slot>
    <slot name="exit">${Yie}</slot>
  </slot>
`;const Xie=`
  <slot name="tooltip-enter">${br.START_CAST}</slot>
  <slot name="tooltip-exit">${br.STOP_CAST}</slot>
`,WI=t=>{const e=t.mediaIsCasting?xn.EXIT_CAST():xn.ENTER_CAST();t.setAttribute("aria-label",e)};class Zie extends oi{static get observedAttributes(){return[...super.observedAttributes,O.MEDIA_IS_CASTING,O.MEDIA_CAST_UNAVAILABLE]}constructor(e={}){super({slotTemplate:I5,tooltipContent:Xie,...e})}connectedCallback(){super.connectedCallback(),WI(this)}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===O.MEDIA_IS_CASTING&&WI(this)}get mediaIsCasting(){return Qr(this,O.MEDIA_IS_CASTING)}set mediaIsCasting(e){Jr(this,O.MEDIA_IS_CASTING,e)}get mediaCastUnavailable(){return Fr(this,O.MEDIA_CAST_UNAVAILABLE)}set mediaCastUnavailable(e){$r(this,O.MEDIA_CAST_UNAVAILABLE,e)}handleClick(){const e=this.mediaIsCasting?Re.MEDIA_EXIT_CAST_REQUEST:Re.MEDIA_ENTER_CAST_REQUEST;this.dispatchEvent(new K.CustomEvent(e,{composed:!0,bubbles:!0}))}}K.customElements.get("media-cast-button")||K.customElements.define("media-cast-button",Zie);var dS=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Bu=(t,e,r)=>(dS(t,e,"read from private field"),r?r.call(t):e.get(t)),co=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},k5=(t,e,r,n)=>(dS(t,e,"write to private field"),e.set(t,r),r),jc=(t,e,r)=>(dS(t,e,"access private method"),r),_h,ml,H1,L5,V1,D5,W1,O5,G1,M5,K1,P5;const N5=Fe.createElement("template");N5.innerHTML=`
  <style>
    :host {
      font: var(--media-font,
        var(--media-font-weight, normal)
        var(--media-font-size, 14px) /
        var(--media-text-content-height, var(--media-control-height, 24px))
        var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
      color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
      background: var(--media-dialog-background, var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .8))));
      border-radius: var(--media-dialog-border-radius);
      border: var(--media-dialog-border, none);
      display: var(--media-dialog-display, inline-flex);
      transition: var(--media-dialog-transition-in,
        visibility 0s,
        opacity .2s ease-out,
        transform .15s ease-out
      ) !important;
      
      visibility: var(--media-dialog-visibility, visible);
      opacity: var(--media-dialog-opacity, 1);
      transform: var(--media-dialog-transform-in, translateY(0) scale(1));
    }

    :host([hidden]) {
      transition: var(--media-dialog-transition-out,
        visibility .15s ease-in,
        opacity .15s ease-in,
        transform .15s ease-in
      ) !important;
      visibility: var(--media-dialog-hidden-visibility, hidden);
      opacity: var(--media-dialog-hidden-opacity, 0);
      transform: var(--media-dialog-transform-out, translateY(2px) scale(.99));
      pointer-events: none;
    }
  </style>
  <slot></slot>
`;const Ub={HIDDEN:"hidden",ANCHOR:"anchor"};class F5 extends K.HTMLElement{constructor(){super(),co(this,H1),co(this,V1),co(this,W1),co(this,G1),co(this,K1),co(this,_h,null),co(this,ml,null),this.shadowRoot||(this.attachShadow({mode:"open"}),this.nativeEl=this.constructor.template.content.cloneNode(!0),this.shadowRoot.append(this.nativeEl)),this.addEventListener("invoke",this),this.addEventListener("focusout",this),this.addEventListener("keydown",this)}static get observedAttributes(){return[Ub.HIDDEN,Ub.ANCHOR]}handleEvent(e){switch(e.type){case"invoke":jc(this,W1,O5).call(this,e);break;case"focusout":jc(this,G1,M5).call(this,e);break;case"keydown":jc(this,K1,P5).call(this,e);break}}connectedCallback(){this.role||(this.role="dialog")}attributeChangedCallback(e,r,n){e===Ub.HIDDEN&&n!==r&&(this.hidden?jc(this,V1,D5).call(this):jc(this,H1,L5).call(this))}focus(){k5(this,_h,iS());const e=this.querySelector('[autofocus], [tabindex]:not([tabindex="-1"]), [role="menu"]');e==null||e.focus()}get keysUsed(){return["Escape","Tab"]}}_h=new WeakMap;ml=new WeakMap;H1=new WeakSet;L5=function(){var t;(t=Bu(this,ml))==null||t.setAttribute("aria-expanded","true"),this.addEventListener("transitionend",()=>this.focus(),{once:!0})};V1=new WeakSet;D5=function(){var t;(t=Bu(this,ml))==null||t.setAttribute("aria-expanded","false")};W1=new WeakSet;O5=function(t){k5(this,ml,t.relatedTarget),ra(this,t.relatedTarget)||(this.hidden=!this.hidden)};G1=new WeakSet;M5=function(t){var e;ra(this,t.relatedTarget)||((e=Bu(this,_h))==null||e.focus(),Bu(this,ml)&&Bu(this,ml)!==t.relatedTarget&&!this.hidden&&(this.hidden=!0))};K1=new WeakSet;P5=function(t){var e,r,n,i,s;const{key:a,ctrlKey:o,altKey:l,metaKey:u}=t;o||l||u||this.keysUsed.includes(a)&&(t.preventDefault(),t.stopPropagation(),a==="Tab"?(t.shiftKey?(r=(e=this.previousElementSibling)==null?void 0:e.focus)==null||r.call(e):(i=(n=this.nextElementSibling)==null?void 0:n.focus)==null||i.call(n),this.blur()):a==="Escape"&&((s=Bu(this,_h))==null||s.focus(),this.hidden=!0))};F5.template=N5;K.customElements.get("media-chrome-dialog")||K.customElements.define("media-chrome-dialog",F5);var hS=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},lr=(t,e,r)=>(hS(t,e,"read from private field"),r?r.call(t):e.get(t)),an=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},ba=(t,e,r,n)=>(hS(t,e,"write to private field"),e.set(t,r),r),Ri=(t,e,r)=>(hS(t,e,"access private method"),r),Xi,cv,np,ip,Ci,Jm,sp,ap,op,fS,$5,lp,q1,up,z1,eg,pS,Y1,U5,X1,B5,Z1,j5,Q1,H5;const V5=Fe.createElement("template");V5.innerHTML=`
  <style>
    :host {
      --_focus-box-shadow: var(--media-focus-box-shadow, inset 0 0 0 2px rgb(27 127 204 / .9));
      --_media-range-padding: var(--media-range-padding, var(--media-control-padding, 10px));

      box-shadow: var(--_focus-visible-box-shadow, none);
      background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));
      height: calc(var(--media-control-height, 24px) + 2 * var(--_media-range-padding));
      display: inline-flex;
      align-items: center;
      
      vertical-align: middle;
      box-sizing: border-box;
      position: relative;
      width: 100px;
      transition: background .15s linear;
      cursor: pointer;
      pointer-events: auto;
      touch-action: none; 
      z-index: 1; 
    }

    
    input[type=range]:focus {
      outline: 0;
    }
    input[type=range]:focus::-webkit-slider-runnable-track {
      outline: 0;
    }

    :host(:hover) {
      background: var(--media-control-hover-background, rgb(50 50 70 / .7));
    }

    #leftgap {
      padding-left: var(--media-range-padding-left, var(--_media-range-padding));
    }

    #rightgap {
      padding-right: var(--media-range-padding-right, var(--_media-range-padding));
    }

    #startpoint,
    #endpoint {
      position: absolute;
    }

    #endpoint {
      right: 0;
    }

    #container {
      
      width: var(--media-range-track-width, 100%);
      transform: translate(var(--media-range-track-translate-x, 0px), var(--media-range-track-translate-y, 0px));
      position: relative;
      height: 100%;
      display: flex;
      align-items: center;
      min-width: 40px;
    }

    #range {
      
      display: var(--media-time-range-hover-display, block);
      bottom: var(--media-time-range-hover-bottom, -7px);
      height: var(--media-time-range-hover-height, max(100% + 7px, 25px));
      width: 100%;
      position: absolute;
      cursor: pointer;

      -webkit-appearance: none; 
      -webkit-tap-highlight-color: transparent;
      background: transparent; 
      margin: 0;
      z-index: 1;
    }

    @media (hover: hover) {
      #range {
        bottom: var(--media-time-range-hover-bottom, -5px);
        height: var(--media-time-range-hover-height, max(100% + 5px, 20px));
      }
    }

    
    
    #range::-webkit-slider-thumb {
      -webkit-appearance: none;
      background: transparent;
      width: .1px;
      height: .1px;
    }

    
    #range::-moz-range-thumb {
      background: transparent;
      border: transparent;
      width: .1px;
      height: .1px;
    }

    #appearance {
      height: var(--media-range-track-height, 4px);
      display: flex;
      flex-direction: column;
      justify-content: center;
      width: 100%;
      position: absolute;
      
      will-change: transform;
    }

    #track {
      background: var(--media-range-track-background, rgb(255 255 255 / .2));
      border-radius: var(--media-range-track-border-radius, 1px);
      border: var(--media-range-track-border, none);
      outline: var(--media-range-track-outline);
      outline-offset: var(--media-range-track-outline-offset);
      backdrop-filter: var(--media-range-track-backdrop-filter);
      -webkit-backdrop-filter: var(--media-range-track-backdrop-filter);
      box-shadow: var(--media-range-track-box-shadow, none);
      position: absolute;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }

    #progress,
    #pointer {
      position: absolute;
      height: 100%;
      will-change: width;
    }

    #progress {
      background: var(--media-range-bar-color, var(--media-primary-color, rgb(238 238 238)));
      transition: var(--media-range-track-transition);
    }

    #pointer {
      background: var(--media-range-track-pointer-background);
      border-right: var(--media-range-track-pointer-border-right);
      transition: visibility .25s, opacity .25s;
      visibility: hidden;
      opacity: 0;
    }

    @media (hover: hover) {
      :host(:hover) #pointer {
        transition: visibility .5s, opacity .5s;
        visibility: visible;
        opacity: 1;
      }
    }

    #thumb {
      width: var(--media-range-thumb-width, 10px);
      height: var(--media-range-thumb-height, 10px);
      margin-left: calc(var(--media-range-thumb-width, 10px) / -2);
      border: var(--media-range-thumb-border, none);
      border-radius: var(--media-range-thumb-border-radius, 10px);
      background: var(--media-range-thumb-background, var(--media-primary-color, rgb(238 238 238)));
      box-shadow: var(--media-range-thumb-box-shadow, 1px 1px 1px transparent);
      transition: var(--media-range-thumb-transition);
      transform: var(--media-range-thumb-transform, none);
      opacity: var(--media-range-thumb-opacity, 1);
      position: absolute;
      left: 0;
      cursor: pointer;
    }

    :host([disabled]) #thumb {
      background-color: #777;
    }

    .segments #appearance {
      height: var(--media-range-segment-hover-height, 7px);
    }

    #track {
      clip-path: url(#segments-clipping);
    }

    #segments {
      --segments-gap: var(--media-range-segments-gap, 2px);
      position: absolute;
      width: 100%;
      height: 100%;
    }

    #segments-clipping {
      transform: translateX(calc(var(--segments-gap) / 2));
    }

    #segments-clipping:empty {
      display: none;
    }

    #segments-clipping rect {
      height: var(--media-range-track-height, 4px);
      y: calc((var(--media-range-segment-hover-height, 7px) - var(--media-range-track-height, 4px)) / 2);
      transition: var(--media-range-segment-transition, transform .1s ease-in-out);
      transform: var(--media-range-segment-transform, scaleY(1));
      transform-origin: center;
    }
  </style>
  <div id="leftgap"></div>
  <div id="container">
    <div id="startpoint"></div>
    <div id="endpoint"></div>
    <div id="appearance">
      <div id="track" part="track">
        <div id="pointer"></div>
        <div id="progress" part="progress"></div>
      </div>
      <div id="thumb" part="thumb"></div>
      <svg id="segments"><clipPath id="segments-clipping"></clipPath></svg>
    </div>
    <input id="range" type="range" min="0" max="1" step="any" value="0">
  </div>
  <div id="rightgap"></div>
`;class mS extends K.HTMLElement{constructor(){super(),an(this,fS),an(this,lp),an(this,up),an(this,eg),an(this,Y1),an(this,X1),an(this,Z1),an(this,Q1),an(this,Xi,void 0),an(this,cv,void 0),an(this,np,void 0),an(this,ip,void 0),an(this,Ci,{}),an(this,Jm,[]),an(this,sp,()=>{if(this.range.matches(":focus-visible")){const{style:e}=Ar(this.shadowRoot,":host");e.setProperty("--_focus-visible-box-shadow","var(--_focus-box-shadow)")}}),an(this,ap,()=>{const{style:e}=Ar(this.shadowRoot,":host");e.removeProperty("--_focus-visible-box-shadow")}),an(this,op,()=>{const e=this.shadowRoot.querySelector("#segments-clipping");e&&e.parentNode.append(e)}),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(V5.content.cloneNode(!0))),this.container=this.shadowRoot.querySelector("#container"),ba(this,np,this.shadowRoot.querySelector("#startpoint")),ba(this,ip,this.shadowRoot.querySelector("#endpoint")),this.range=this.shadowRoot.querySelector("#range"),this.appearance=this.shadowRoot.querySelector("#appearance")}static get observedAttributes(){return["disabled","aria-disabled",Bt.MEDIA_CONTROLLER]}attributeChangedCallback(e,r,n){var i,s,a,o,l;e===Bt.MEDIA_CONTROLLER?(r&&((s=(i=lr(this,Xi))==null?void 0:i.unassociateElement)==null||s.call(i,this),ba(this,Xi,null)),n&&this.isConnected&&(ba(this,Xi,(a=this.getRootNode())==null?void 0:a.getElementById(n)),(l=(o=lr(this,Xi))==null?void 0:o.associateElement)==null||l.call(o,this))):(e==="disabled"||e==="aria-disabled"&&r!==n)&&(n==null?(this.range.removeAttribute(e),Ri(this,lp,q1).call(this)):(this.range.setAttribute(e,n),Ri(this,up,z1).call(this)))}connectedCallback(){var e,r,n;const{style:i}=Ar(this.shadowRoot,":host");i.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`),lr(this,Ci).pointer=Ar(this.shadowRoot,"#pointer"),lr(this,Ci).progress=Ar(this.shadowRoot,"#progress"),lr(this,Ci).thumb=Ar(this.shadowRoot,"#thumb"),lr(this,Ci).activeSegment=Ar(this.shadowRoot,"#segments-clipping rect:nth-child(0)");const s=this.getAttribute(Bt.MEDIA_CONTROLLER);s&&(ba(this,Xi,(e=this.getRootNode())==null?void 0:e.getElementById(s)),(n=(r=lr(this,Xi))==null?void 0:r.associateElement)==null||n.call(r,this)),this.updateBar(),this.shadowRoot.addEventListener("focusin",lr(this,sp)),this.shadowRoot.addEventListener("focusout",lr(this,ap)),Ri(this,lp,q1).call(this),ic(this.container,lr(this,op))}disconnectedCallback(){var e,r;Ri(this,up,z1).call(this),(r=(e=lr(this,Xi))==null?void 0:e.unassociateElement)==null||r.call(e,this),ba(this,Xi,null),this.shadowRoot.removeEventListener("focusin",lr(this,sp)),this.shadowRoot.removeEventListener("focusout",lr(this,ap)),mh(this.container,lr(this,op))}updatePointerBar(e){var r;(r=lr(this,Ci).pointer)==null||r.style.setProperty("width",`${this.getPointerRatio(e)*100}%`)}updateBar(){var e,r;const n=this.range.valueAsNumber*100;(e=lr(this,Ci).progress)==null||e.style.setProperty("width",`${n}%`),(r=lr(this,Ci).thumb)==null||r.style.setProperty("left",`${n}%`)}updateSegments(e){const r=this.shadowRoot.querySelector("#segments-clipping");if(r.textContent="",this.container.classList.toggle("segments",!!(e!=null&&e.length)),!(e!=null&&e.length))return;const n=[...new Set([+this.range.min,...e.flatMap(s=>[s.start,s.end]),+this.range.max])];ba(this,Jm,[...n]);const i=n.pop();for(const[s,a]of n.entries()){const[o,l]=[s===0,s===n.length-1],u=o?"calc(var(--segments-gap) / -1)":`${a*100}%`,d=`calc(${((l?i:n[s+1])-a)*100}%${o||l?"":" - var(--segments-gap)"})`,h=Fe.createElementNS("http://www.w3.org/2000/svg","rect"),f=Ar(this.shadowRoot,`#segments-clipping rect:nth-child(${s+1})`);f.style.setProperty("x",u),f.style.setProperty("width",d),r.append(h)}}getPointerRatio(e){const r=eie(e.clientX,e.clientY,lr(this,np).getBoundingClientRect(),lr(this,ip).getBoundingClientRect());return Math.max(0,Math.min(1,r))}get dragging(){return this.hasAttribute("dragging")}handleEvent(e){switch(e.type){case"pointermove":Ri(this,Q1,H5).call(this,e);break;case"input":this.updateBar();break;case"pointerenter":Ri(this,Y1,U5).call(this,e);break;case"pointerdown":Ri(this,eg,pS).call(this,e);break;case"pointerup":Ri(this,X1,B5).call(this);break;case"pointerleave":Ri(this,Z1,j5).call(this);break}}get keysUsed(){return["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"]}}Xi=new WeakMap;cv=new WeakMap;np=new WeakMap;ip=new WeakMap;Ci=new WeakMap;Jm=new WeakMap;sp=new WeakMap;ap=new WeakMap;op=new WeakMap;fS=new WeakSet;$5=function(t){const e=lr(this,Ci).activeSegment;if(!e)return;const r=this.getPointerRatio(t),i=`#segments-clipping rect:nth-child(${lr(this,Jm).findIndex((s,a,o)=>{const l=o[a+1];return l!=null&&r>=s&&r<=l})+1})`;(e.selectorText!=i||!e.style.transform)&&(e.selectorText=i,e.style.setProperty("transform","var(--media-range-segment-hover-transform, scaleY(2))"))};lp=new WeakSet;q1=function(){this.hasAttribute("disabled")||(this.addEventListener("input",this),this.addEventListener("pointerdown",this),this.addEventListener("pointerenter",this))};up=new WeakSet;z1=function(){var t,e;this.removeEventListener("input",this),this.removeEventListener("pointerdown",this),this.removeEventListener("pointerenter",this),(t=K.window)==null||t.removeEventListener("pointerup",this),(e=K.window)==null||e.removeEventListener("pointermove",this)};eg=new WeakSet;pS=function(t){var e;ba(this,cv,t.composedPath().includes(this.range)),(e=K.window)==null||e.addEventListener("pointerup",this)};Y1=new WeakSet;U5=function(t){var e;t.pointerType!=="mouse"&&Ri(this,eg,pS).call(this,t),this.addEventListener("pointerleave",this),(e=K.window)==null||e.addEventListener("pointermove",this)};X1=new WeakSet;B5=function(){var t;(t=K.window)==null||t.removeEventListener("pointerup",this),this.toggleAttribute("dragging",!1),this.range.disabled=this.hasAttribute("disabled")};Z1=new WeakSet;j5=function(){var t,e;this.removeEventListener("pointerleave",this),(t=K.window)==null||t.removeEventListener("pointermove",this),this.toggleAttribute("dragging",!1),this.range.disabled=this.hasAttribute("disabled"),(e=lr(this,Ci).activeSegment)==null||e.style.removeProperty("transform")};Q1=new WeakSet;H5=function(t){this.toggleAttribute("dragging",t.buttons===1||t.pointerType!=="mouse"),this.updatePointerBar(t),Ri(this,fS,$5).call(this,t),this.dragging&&(t.pointerType!=="mouse"||!lr(this,cv))&&(this.range.disabled=!0,this.range.valueAsNumber=this.getPointerRatio(t),this.range.dispatchEvent(new Event("input",{bubbles:!0,composed:!0})))};K.customElements.get("media-chrome-range")||K.customElements.define("media-chrome-range",mS);var W5=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},jf=(t,e,r)=>(W5(t,e,"read from private field"),r?r.call(t):e.get(t)),Qie=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Hf=(t,e,r,n)=>(W5(t,e,"write to private field"),e.set(t,r),r),Zi;const G5=Fe.createElement("template");G5.innerHTML=`
  <style>
    :host {
      
      box-sizing: border-box;
      display: var(--media-control-display, var(--media-control-bar-display, inline-flex));
      color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
      --media-loading-indicator-icon-height: 44px;
    }

    ::slotted(media-time-range),
    ::slotted(media-volume-range) {
      min-height: 100%;
    }

    ::slotted(media-time-range),
    ::slotted(media-clip-selector) {
      flex-grow: 1;
    }

    ::slotted([role="menu"]) {
      position: absolute;
    }
  </style>

  <slot></slot>
`;class Jie extends K.HTMLElement{constructor(){super(),Qie(this,Zi,void 0),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(G5.content.cloneNode(!0)))}static get observedAttributes(){return[Bt.MEDIA_CONTROLLER]}attributeChangedCallback(e,r,n){var i,s,a,o,l;e===Bt.MEDIA_CONTROLLER&&(r&&((s=(i=jf(this,Zi))==null?void 0:i.unassociateElement)==null||s.call(i,this),Hf(this,Zi,null)),n&&this.isConnected&&(Hf(this,Zi,(a=this.getRootNode())==null?void 0:a.getElementById(n)),(l=(o=jf(this,Zi))==null?void 0:o.associateElement)==null||l.call(o,this)))}connectedCallback(){var e,r,n;const i=this.getAttribute(Bt.MEDIA_CONTROLLER);i&&(Hf(this,Zi,(e=this.getRootNode())==null?void 0:e.getElementById(i)),(n=(r=jf(this,Zi))==null?void 0:r.associateElement)==null||n.call(r,this))}disconnectedCallback(){var e,r;(r=(e=jf(this,Zi))==null?void 0:e.unassociateElement)==null||r.call(e,this),Hf(this,Zi,null)}}Zi=new WeakMap;K.customElements.get("media-control-bar")||K.customElements.define("media-control-bar",Jie);var K5=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Vf=(t,e,r)=>(K5(t,e,"read from private field"),r?r.call(t):e.get(t)),ese=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Wf=(t,e,r,n)=>(K5(t,e,"write to private field"),e.set(t,r),r),Qi;const q5=Fe.createElement("template");q5.innerHTML=`
  <style>
    :host {
      font: var(--media-font,
        var(--media-font-weight, normal)
        var(--media-font-size, 14px) /
        var(--media-text-content-height, var(--media-control-height, 24px))
        var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
      color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
      background: var(--media-text-background, var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7))));
      padding: var(--media-control-padding, 10px);
      display: inline-flex;
      justify-content: center;
      align-items: center;
      vertical-align: middle;
      box-sizing: border-box;
      text-align: center;
      pointer-events: auto;
    }

    
    :host(:focus-visible) {
      box-shadow: inset 0 0 0 2px rgb(27 127 204 / .9);
      outline: 0;
    }

    
    :host(:where(:focus)) {
      box-shadow: none;
      outline: 0;
    }
  </style>
  <slot></slot>
`;class tf extends K.HTMLElement{constructor(){super(),ese(this,Qi,void 0),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(q5.content.cloneNode(!0)))}static get observedAttributes(){return[Bt.MEDIA_CONTROLLER]}attributeChangedCallback(e,r,n){var i,s,a,o,l;e===Bt.MEDIA_CONTROLLER&&(r&&((s=(i=Vf(this,Qi))==null?void 0:i.unassociateElement)==null||s.call(i,this),Wf(this,Qi,null)),n&&this.isConnected&&(Wf(this,Qi,(a=this.getRootNode())==null?void 0:a.getElementById(n)),(l=(o=Vf(this,Qi))==null?void 0:o.associateElement)==null||l.call(o,this)))}connectedCallback(){var e,r,n;const{style:i}=Ar(this.shadowRoot,":host");i.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`);const s=this.getAttribute(Bt.MEDIA_CONTROLLER);s&&(Wf(this,Qi,(e=this.getRootNode())==null?void 0:e.getElementById(s)),(n=(r=Vf(this,Qi))==null?void 0:r.associateElement)==null||n.call(r,this))}disconnectedCallback(){var e,r;(r=(e=Vf(this,Qi))==null?void 0:e.unassociateElement)==null||r.call(e,this),Wf(this,Qi,null)}}Qi=new WeakMap;K.customElements.get("media-text-display")||K.customElements.define("media-text-display",tf);var z5=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},GI=(t,e,r)=>(z5(t,e,"read from private field"),r?r.call(t):e.get(t)),tse=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},rse=(t,e,r,n)=>(z5(t,e,"write to private field"),e.set(t,r),r),pd;class nse extends tf{constructor(){super(),tse(this,pd,void 0),rse(this,pd,this.shadowRoot.querySelector("slot")),GI(this,pd).textContent=al(0)}static get observedAttributes(){return[...super.observedAttributes,O.MEDIA_DURATION]}attributeChangedCallback(e,r,n){e===O.MEDIA_DURATION&&(GI(this,pd).textContent=al(+n)),super.attributeChangedCallback(e,r,n)}get mediaDuration(){return pr(this,O.MEDIA_DURATION)}set mediaDuration(e){Pr(this,O.MEDIA_DURATION,e)}}pd=new WeakMap;K.customElements.get("media-duration-display")||K.customElements.define("media-duration-display",nse);const ise=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M16 3v2.5h3.5V9H22V3h-6ZM4 9h2.5V5.5H10V3H4v6Zm15.5 9.5H16V21h6v-6h-2.5v3.5ZM6.5 15H4v6h6v-2.5H6.5V15Z"/>
</svg>`,sse=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M18.5 6.5V3H16v6h6V6.5h-3.5ZM16 21h2.5v-3.5H22V15h-6v6ZM4 17.5h3.5V21H10v-6H4v2.5Zm3.5-11H4V9h6V3H7.5v3.5Z"/>
</svg>`,Y5=Fe.createElement("template");Y5.innerHTML=`
  <style>
    :host([${O.MEDIA_IS_FULLSCREEN}]) slot[name=icon] slot:not([name=exit]) {
      display: none !important;
    }

    
    :host(:not([${O.MEDIA_IS_FULLSCREEN}])) slot[name=icon] slot:not([name=enter]) {
      display: none !important;
    }

    :host([${O.MEDIA_IS_FULLSCREEN}]) slot[name=tooltip-enter],
    :host(:not([${O.MEDIA_IS_FULLSCREEN}])) slot[name=tooltip-exit] {
      display: none;
    }
  </style>

  <slot name="icon">
    <slot name="enter">${ise}</slot>
    <slot name="exit">${sse}</slot>
  </slot>
`;const ase=`
  <slot name="tooltip-enter">${br.ENTER_FULLSCREEN}</slot>
  <slot name="tooltip-exit">${br.EXIT_FULLSCREEN}</slot>
`,KI=t=>{const e=t.mediaIsFullscreen?xn.EXIT_FULLSCREEN():xn.ENTER_FULLSCREEN();t.setAttribute("aria-label",e)};class ose extends oi{static get observedAttributes(){return[...super.observedAttributes,O.MEDIA_IS_FULLSCREEN,O.MEDIA_FULLSCREEN_UNAVAILABLE]}constructor(e={}){super({slotTemplate:Y5,tooltipContent:ase,...e})}connectedCallback(){super.connectedCallback(),KI(this)}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===O.MEDIA_IS_FULLSCREEN&&KI(this)}get mediaFullscreenUnavailable(){return Fr(this,O.MEDIA_FULLSCREEN_UNAVAILABLE)}set mediaFullscreenUnavailable(e){$r(this,O.MEDIA_FULLSCREEN_UNAVAILABLE,e)}get mediaIsFullscreen(){return Qr(this,O.MEDIA_IS_FULLSCREEN)}set mediaIsFullscreen(e){Jr(this,O.MEDIA_IS_FULLSCREEN,e)}handleClick(){const e=this.mediaIsFullscreen?Re.MEDIA_EXIT_FULLSCREEN_REQUEST:Re.MEDIA_ENTER_FULLSCREEN_REQUEST;this.dispatchEvent(new K.CustomEvent(e,{composed:!0,bubbles:!0}))}}K.customElements.get("media-fullscreen-button")||K.customElements.define("media-fullscreen-button",ose);const{MEDIA_TIME_IS_LIVE:cp,MEDIA_PAUSED:Yd}=O,{MEDIA_SEEK_TO_LIVE_REQUEST:lse,MEDIA_PLAY_REQUEST:use}=Re,cse='<svg viewBox="0 0 6 12"><circle cx="3" cy="6" r="2"></circle></svg>',X5=Fe.createElement("template");X5.innerHTML=`
  <style>
  :host { --media-tooltip-display: none; }
  
  slot[name=indicator] > *,
  :host ::slotted([slot=indicator]) {
    
    min-width: auto;
    fill: var(--media-live-button-icon-color, rgb(140, 140, 140));
    color: var(--media-live-button-icon-color, rgb(140, 140, 140));
  }

  :host([${cp}]:not([${Yd}])) slot[name=indicator] > *,
  :host([${cp}]:not([${Yd}])) ::slotted([slot=indicator]) {
    fill: var(--media-live-button-indicator-color, rgb(255, 0, 0));
    color: var(--media-live-button-indicator-color, rgb(255, 0, 0));
  }

  :host([${cp}]:not([${Yd}])) {
    cursor: not-allowed;
  }

  </style>

  <slot name="indicator">${cse}</slot>
  
  <slot name="spacer">&nbsp;</slot><slot name="text">LIVE</slot>
`;const qI=t=>{const e=t.mediaPaused||!t.mediaTimeIsLive,r=e?xn.SEEK_LIVE():xn.PLAYING_LIVE();t.setAttribute("aria-label",r),e?t.removeAttribute("aria-disabled"):t.setAttribute("aria-disabled","true")};class dse extends oi{static get observedAttributes(){return[...super.observedAttributes,Yd,cp]}constructor(e={}){super({slotTemplate:X5,...e})}connectedCallback(){qI(this),super.connectedCallback()}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),qI(this)}get mediaPaused(){return Qr(this,O.MEDIA_PAUSED)}set mediaPaused(e){Jr(this,O.MEDIA_PAUSED,e)}get mediaTimeIsLive(){return Qr(this,O.MEDIA_TIME_IS_LIVE)}set mediaTimeIsLive(e){Jr(this,O.MEDIA_TIME_IS_LIVE,e)}handleClick(){!this.mediaPaused&&this.mediaTimeIsLive||(this.dispatchEvent(new K.CustomEvent(lse,{composed:!0,bubbles:!0})),this.hasAttribute(Yd)&&this.dispatchEvent(new K.CustomEvent(use,{composed:!0,bubbles:!0})))}}K.customElements.get("media-live-button")||K.customElements.define("media-live-button",dse);var Z5=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Hc=(t,e,r)=>(Z5(t,e,"read from private field"),r?r.call(t):e.get(t)),zI=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Vc=(t,e,r,n)=>(Z5(t,e,"write to private field"),e.set(t,r),r),Ji,dp;const YI={LOADING_DELAY:"loadingdelay"},Q5=500,J5=Fe.createElement("template"),hse=`
<svg aria-hidden="true" viewBox="0 0 100 100">
  <path d="M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50">
    <animateTransform
       attributeName="transform"
       attributeType="XML"
       type="rotate"
       dur="1s"
       from="0 50 50"
       to="360 50 50"
       repeatCount="indefinite" />
  </path>
</svg>
`;J5.innerHTML=`
<style>
:host {
  display: var(--media-control-display, var(--media-loading-indicator-display, inline-block));
  vertical-align: middle;
  box-sizing: border-box;
  --_loading-indicator-delay: var(--media-loading-indicator-transition-delay, ${Q5}ms);
}

#status {
  color: rgba(0,0,0,0);
  width: 0px;
  height: 0px;
}

:host slot[name=icon] > *,
:host ::slotted([slot=icon]) {
  opacity: var(--media-loading-indicator-opacity, 0);
  transition: opacity 0.15s;
}

:host([${O.MEDIA_LOADING}]:not([${O.MEDIA_PAUSED}])) slot[name=icon] > *,
:host([${O.MEDIA_LOADING}]:not([${O.MEDIA_PAUSED}])) ::slotted([slot=icon]) {
  opacity: var(--media-loading-indicator-opacity, 1);
  transition: opacity 0.15s var(--_loading-indicator-delay);
}

:host #status {
  visibility: var(--media-loading-indicator-opacity, hidden);
  transition: visibility 0.15s;
}

:host([${O.MEDIA_LOADING}]:not([${O.MEDIA_PAUSED}])) #status {
  visibility: var(--media-loading-indicator-opacity, visible);
  transition: visibility 0.15s var(--_loading-indicator-delay);
}

svg, img, ::slotted(svg), ::slotted(img) {
  width: var(--media-loading-indicator-icon-width);
  height: var(--media-loading-indicator-icon-height, 100px);
  fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));
  vertical-align: middle;
}
</style>

<slot name="icon">${hse}</slot>
<div id="status" role="status" aria-live="polite">${si.MEDIA_LOADING()}</div>
`;class fse extends K.HTMLElement{constructor(){if(super(),zI(this,Ji,void 0),zI(this,dp,Q5),!this.shadowRoot){const e=this.attachShadow({mode:"open"}),r=J5.content.cloneNode(!0);e.appendChild(r)}}static get observedAttributes(){return[Bt.MEDIA_CONTROLLER,O.MEDIA_PAUSED,O.MEDIA_LOADING,YI.LOADING_DELAY]}attributeChangedCallback(e,r,n){var i,s,a,o,l;e===YI.LOADING_DELAY&&r!==n?this.loadingDelay=Number(n):e===Bt.MEDIA_CONTROLLER&&(r&&((s=(i=Hc(this,Ji))==null?void 0:i.unassociateElement)==null||s.call(i,this),Vc(this,Ji,null)),n&&this.isConnected&&(Vc(this,Ji,(a=this.getRootNode())==null?void 0:a.getElementById(n)),(l=(o=Hc(this,Ji))==null?void 0:o.associateElement)==null||l.call(o,this)))}connectedCallback(){var e,r,n;const i=this.getAttribute(Bt.MEDIA_CONTROLLER);i&&(Vc(this,Ji,(e=this.getRootNode())==null?void 0:e.getElementById(i)),(n=(r=Hc(this,Ji))==null?void 0:r.associateElement)==null||n.call(r,this))}disconnectedCallback(){var e,r;(r=(e=Hc(this,Ji))==null?void 0:e.unassociateElement)==null||r.call(e,this),Vc(this,Ji,null)}get loadingDelay(){return Hc(this,dp)}set loadingDelay(e){Vc(this,dp,e);const{style:r}=Ar(this.shadowRoot,":host");r.setProperty("--_loading-indicator-delay",`var(--media-loading-indicator-transition-delay, ${e}ms)`)}get mediaPaused(){return Qr(this,O.MEDIA_PAUSED)}set mediaPaused(e){Jr(this,O.MEDIA_PAUSED,e)}get mediaLoading(){return Qr(this,O.MEDIA_LOADING)}set mediaLoading(e){Jr(this,O.MEDIA_LOADING,e)}}Ji=new WeakMap;dp=new WeakMap;K.customElements.get("media-loading-indicator")||K.customElements.define("media-loading-indicator",fse);const{MEDIA_VOLUME_LEVEL:ho}=O,pse=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M16.5 12A4.5 4.5 0 0 0 14 8v2.18l2.45 2.45a4.22 4.22 0 0 0 .05-.63Zm2.5 0a6.84 6.84 0 0 1-.54 2.64L20 16.15A8.8 8.8 0 0 0 21 12a9 9 0 0 0-7-8.77v2.06A7 7 0 0 1 19 12ZM4.27 3 3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25A6.92 6.92 0 0 1 14 18.7v2.06A9 9 0 0 0 17.69 19l2 2.05L21 19.73l-9-9L4.27 3ZM12 4 9.91 6.09 12 8.18V4Z"/>
</svg>`,XI=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M3 9v6h4l5 5V4L7 9H3Zm13.5 3A4.5 4.5 0 0 0 14 8v8a4.47 4.47 0 0 0 2.5-4Z"/>
</svg>`,mse=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M3 9v6h4l5 5V4L7 9H3Zm13.5 3A4.5 4.5 0 0 0 14 8v8a4.47 4.47 0 0 0 2.5-4ZM14 3.23v2.06a7 7 0 0 1 0 13.42v2.06a9 9 0 0 0 0-17.54Z"/>
</svg>`,e4=Fe.createElement("template");e4.innerHTML=`
  <style>
  
  :host(:not([${ho}])) slot[name=icon] slot:not([name=high]), 
  :host([${ho}=high]) slot[name=icon] slot:not([name=high]) {
    display: none !important;
  }

  :host([${ho}=off]) slot[name=icon] slot:not([name=off]) {
    display: none !important;
  }

  :host([${ho}=low]) slot[name=icon] slot:not([name=low]) {
    display: none !important;
  }

  :host([${ho}=medium]) slot[name=icon] slot:not([name=medium]) {
    display: none !important;
  }

  :host(:not([${ho}=off])) slot[name=tooltip-unmute],
  :host([${ho}=off]) slot[name=tooltip-mute] {
    display: none;
  }
  </style>

  <slot name="icon">
    <slot name="off">${pse}</slot>
    <slot name="low">${XI}</slot>
    <slot name="medium">${XI}</slot>
    <slot name="high">${mse}</slot>
  </slot>
`;const gse=`
  <slot name="tooltip-mute">${br.MUTE}</slot>
  <slot name="tooltip-unmute">${br.UNMUTE}</slot>
`,ZI=t=>{const r=t.mediaVolumeLevel==="off"?xn.UNMUTE():xn.MUTE();t.setAttribute("aria-label",r)};class vse extends oi{static get observedAttributes(){return[...super.observedAttributes,O.MEDIA_VOLUME_LEVEL]}constructor(e={}){super({slotTemplate:e4,tooltipContent:gse,...e})}connectedCallback(){ZI(this),super.connectedCallback()}attributeChangedCallback(e,r,n){e===O.MEDIA_VOLUME_LEVEL&&ZI(this),super.attributeChangedCallback(e,r,n)}get mediaVolumeLevel(){return Fr(this,O.MEDIA_VOLUME_LEVEL)}set mediaVolumeLevel(e){$r(this,O.MEDIA_VOLUME_LEVEL,e)}handleClick(){const e=this.mediaVolumeLevel==="off"?Re.MEDIA_UNMUTE_REQUEST:Re.MEDIA_MUTE_REQUEST;this.dispatchEvent(new K.CustomEvent(e,{composed:!0,bubbles:!0}))}}K.customElements.get("media-mute-button")||K.customElements.define("media-mute-button",vse);const QI=`<svg aria-hidden="true" viewBox="0 0 28 24">
  <path d="M24 3H4a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h20a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1Zm-1 16H5V5h18v14Zm-3-8h-7v5h7v-5Z"/>
</svg>`,t4=Fe.createElement("template");t4.innerHTML=`
  <style>
  :host([${O.MEDIA_IS_PIP}]) slot[name=icon] slot:not([name=exit]) {
    display: none !important;
  }

  
  :host(:not([${O.MEDIA_IS_PIP}])) slot[name=icon] slot:not([name=enter]) {
    display: none !important;
  }

  :host([${O.MEDIA_IS_PIP}]) slot[name=tooltip-enter],
  :host(:not([${O.MEDIA_IS_PIP}])) slot[name=tooltip-exit] {
    display: none;
  }
  </style>

  <slot name="icon">
    <slot name="enter">${QI}</slot>
    <slot name="exit">${QI}</slot>
  </slot>
`;const bse=`
  <slot name="tooltip-enter">${br.ENTER_PIP}</slot>
  <slot name="tooltip-exit">${br.EXIT_PIP}</slot>
`,JI=t=>{const e=t.mediaIsPip?xn.EXIT_PIP():xn.ENTER_PIP();t.setAttribute("aria-label",e)};class yse extends oi{static get observedAttributes(){return[...super.observedAttributes,O.MEDIA_IS_PIP,O.MEDIA_PIP_UNAVAILABLE]}constructor(e={}){super({slotTemplate:t4,tooltipContent:bse,...e})}connectedCallback(){JI(this),super.connectedCallback()}attributeChangedCallback(e,r,n){e===O.MEDIA_IS_PIP&&JI(this),super.attributeChangedCallback(e,r,n)}get mediaPipUnavailable(){return Fr(this,O.MEDIA_PIP_UNAVAILABLE)}set mediaPipUnavailable(e){$r(this,O.MEDIA_PIP_UNAVAILABLE,e)}get mediaIsPip(){return Qr(this,O.MEDIA_IS_PIP)}set mediaIsPip(e){Jr(this,O.MEDIA_IS_PIP,e)}handleClick(){const e=this.mediaIsPip?Re.MEDIA_EXIT_PIP_REQUEST:Re.MEDIA_ENTER_PIP_REQUEST;this.dispatchEvent(new K.CustomEvent(e,{composed:!0,bubbles:!0}))}}K.customElements.get("media-pip-button")||K.customElements.define("media-pip-button",yse);var Ese=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Gf=(t,e,r)=>(Ese(t,e,"read from private field"),r?r.call(t):e.get(t)),_se=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Jl;const Bb={RATES:"rates"},r4=[1,1.2,1.5,1.7,2],md=1,n4=Fe.createElement("template");n4.innerHTML=`
  <style>
    :host {
      min-width: 5ch;
      padding: var(--media-button-padding, var(--media-control-padding, 10px 5px));
    }
  </style>
  <slot name="icon"></slot>
`;class Tse extends oi{constructor(e={}){super({slotTemplate:n4,tooltipContent:br.PLAYBACK_RATE,...e}),_se(this,Jl,new ov(this,Bb.RATES,{defaultValue:r4})),this.container=this.shadowRoot.querySelector('slot[name="icon"]'),this.container.innerHTML=`${md}x`}static get observedAttributes(){return[...super.observedAttributes,O.MEDIA_PLAYBACK_RATE,Bb.RATES]}attributeChangedCallback(e,r,n){if(super.attributeChangedCallback(e,r,n),e===Bb.RATES&&(Gf(this,Jl).value=n),e===O.MEDIA_PLAYBACK_RATE){const i=n?+n:Number.NaN,s=Number.isNaN(i)?md:i;this.container.innerHTML=`${s}x`,this.setAttribute("aria-label",si.PLAYBACK_RATE({playbackRate:s}))}}get rates(){return Gf(this,Jl)}set rates(e){e?Array.isArray(e)&&(Gf(this,Jl).value=e.join(" ")):Gf(this,Jl).value=""}get mediaPlaybackRate(){return pr(this,O.MEDIA_PLAYBACK_RATE,md)}set mediaPlaybackRate(e){Pr(this,O.MEDIA_PLAYBACK_RATE,e)}handleClick(){var e,r;const n=Array.from(this.rates.values(),a=>+a).sort((a,o)=>a-o),i=(r=(e=n.find(a=>a>this.mediaPlaybackRate))!=null?e:n[0])!=null?r:md,s=new K.CustomEvent(Re.MEDIA_PLAYBACK_RATE_REQUEST,{composed:!0,bubbles:!0,detail:i});this.dispatchEvent(s)}}Jl=new WeakMap;K.customElements.get("media-playback-rate-button")||K.customElements.define("media-playback-rate-button",Tse);const xse=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="m6 21 15-9L6 3v18Z"/>
</svg>`,Sse=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M6 20h4V4H6v16Zm8-16v16h4V4h-4Z"/>
</svg>`,i4=Fe.createElement("template");i4.innerHTML=`
  <style>
    :host([${O.MEDIA_PAUSED}]) slot[name=pause],
    :host(:not([${O.MEDIA_PAUSED}])) slot[name=play] {
      display: none !important;
    }

    :host([${O.MEDIA_PAUSED}]) slot[name=tooltip-pause],
    :host(:not([${O.MEDIA_PAUSED}])) slot[name=tooltip-play] {
      display: none;
    }
  </style>

  <slot name="icon">
    <slot name="play">${xse}</slot>
    <slot name="pause">${Sse}</slot>
  </slot>
`;const wse=`
  <slot name="tooltip-play">${br.PLAY}</slot>
  <slot name="tooltip-pause">${br.PAUSE}</slot>
`,ek=t=>{const e=t.mediaPaused?xn.PLAY():xn.PAUSE();t.setAttribute("aria-label",e)};class Ase extends oi{static get observedAttributes(){return[...super.observedAttributes,O.MEDIA_PAUSED,O.MEDIA_ENDED]}constructor(e={}){super({slotTemplate:i4,tooltipContent:wse,...e})}connectedCallback(){ek(this),super.connectedCallback()}attributeChangedCallback(e,r,n){e===O.MEDIA_PAUSED&&ek(this),super.attributeChangedCallback(e,r,n)}get mediaPaused(){return Qr(this,O.MEDIA_PAUSED)}set mediaPaused(e){Jr(this,O.MEDIA_PAUSED,e)}handleClick(){const e=this.mediaPaused?Re.MEDIA_PLAY_REQUEST:Re.MEDIA_PAUSE_REQUEST;this.dispatchEvent(new K.CustomEvent(e,{composed:!0,bubbles:!0}))}}K.customElements.get("media-play-button")||K.customElements.define("media-play-button",Ase);const Gi={PLACEHOLDER_SRC:"placeholdersrc",SRC:"src"},s4=Fe.createElement("template");s4.innerHTML=`
  <style>
    :host {
      pointer-events: none;
      display: var(--media-poster-image-display, inline-block);
      box-sizing: border-box;
    }

    img {
      max-width: 100%;
      max-height: 100%;
      min-width: 100%;
      min-height: 100%;
      background-repeat: no-repeat;
      background-position: var(--media-poster-image-background-position, var(--media-object-position, center));
      background-size: var(--media-poster-image-background-size, var(--media-object-fit, contain));
      object-fit: var(--media-object-fit, contain);
      object-position: var(--media-object-position, center);
    }
  </style>

  <img part="poster img" aria-hidden="true" id="image"/>
`;const Rse=t=>{t.style.removeProperty("background-image")},Cse=(t,e)=>{t.style["background-image"]=`url('${e}')`};class Ise extends K.HTMLElement{static get observedAttributes(){return[Gi.PLACEHOLDER_SRC,Gi.SRC]}constructor(){super(),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(s4.content.cloneNode(!0))),this.image=this.shadowRoot.querySelector("#image")}attributeChangedCallback(e,r,n){e===Gi.SRC&&(n==null?this.image.removeAttribute(Gi.SRC):this.image.setAttribute(Gi.SRC,n)),e===Gi.PLACEHOLDER_SRC&&(n==null?Rse(this.image):Cse(this.image,n))}get placeholderSrc(){return Fr(this,Gi.PLACEHOLDER_SRC)}set placeholderSrc(e){$r(this,Gi.SRC,e)}get src(){return Fr(this,Gi.SRC)}set src(e){$r(this,Gi.SRC,e)}}K.customElements.get("media-poster-image")||K.customElements.define("media-poster-image",Ise);var a4=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},kse=(t,e,r)=>(a4(t,e,"read from private field"),r?r.call(t):e.get(t)),Lse=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Dse=(t,e,r,n)=>(a4(t,e,"write to private field"),e.set(t,r),r),hp;class Ose extends tf{constructor(){super(),Lse(this,hp,void 0),Dse(this,hp,this.shadowRoot.querySelector("slot"))}static get observedAttributes(){return[...super.observedAttributes,O.MEDIA_PREVIEW_CHAPTER]}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===O.MEDIA_PREVIEW_CHAPTER&&n!==r&&n!=null&&(kse(this,hp).textContent=n,n!==""?this.setAttribute("aria-valuetext",`chapter: ${n}`):this.removeAttribute("aria-valuetext"))}get mediaPreviewChapter(){return Fr(this,O.MEDIA_PREVIEW_CHAPTER)}set mediaPreviewChapter(e){$r(this,O.MEDIA_PREVIEW_CHAPTER,e)}}hp=new WeakMap;K.customElements.get("media-preview-chapter-display")||K.customElements.define("media-preview-chapter-display",Ose);var o4=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Kf=(t,e,r)=>(o4(t,e,"read from private field"),r?r.call(t):e.get(t)),Mse=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},qf=(t,e,r,n)=>(o4(t,e,"write to private field"),e.set(t,r),r),es;const l4=Fe.createElement("template");l4.innerHTML=`
  <style>
    :host {
      box-sizing: border-box;
      display: var(--media-control-display, var(--media-preview-thumbnail-display, inline-block));
      overflow: hidden;
    }

    img {
      display: none;
      position: relative;
    }
  </style>
  <img crossorigin loading="eager" decoding="async">
`;class Pse extends K.HTMLElement{constructor(){super(),Mse(this,es,void 0),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(l4.content.cloneNode(!0)))}static get observedAttributes(){return[Bt.MEDIA_CONTROLLER,O.MEDIA_PREVIEW_IMAGE,O.MEDIA_PREVIEW_COORDS]}connectedCallback(){var e,r,n;const i=this.getAttribute(Bt.MEDIA_CONTROLLER);i&&(qf(this,es,(e=this.getRootNode())==null?void 0:e.getElementById(i)),(n=(r=Kf(this,es))==null?void 0:r.associateElement)==null||n.call(r,this))}disconnectedCallback(){var e,r;(r=(e=Kf(this,es))==null?void 0:e.unassociateElement)==null||r.call(e,this),qf(this,es,null)}attributeChangedCallback(e,r,n){var i,s,a,o,l;[O.MEDIA_PREVIEW_IMAGE,O.MEDIA_PREVIEW_COORDS].includes(e)&&this.update(),e===Bt.MEDIA_CONTROLLER&&(r&&((s=(i=Kf(this,es))==null?void 0:i.unassociateElement)==null||s.call(i,this),qf(this,es,null)),n&&this.isConnected&&(qf(this,es,(a=this.getRootNode())==null?void 0:a.getElementById(n)),(l=(o=Kf(this,es))==null?void 0:o.associateElement)==null||l.call(o,this)))}get mediaPreviewImage(){return Fr(this,O.MEDIA_PREVIEW_IMAGE)}set mediaPreviewImage(e){$r(this,O.MEDIA_PREVIEW_IMAGE,e)}get mediaPreviewCoords(){const e=this.getAttribute(O.MEDIA_PREVIEW_COORDS);if(e)return e.split(/\s+/).map(r=>+r)}set mediaPreviewCoords(e){if(!e){this.removeAttribute(O.MEDIA_PREVIEW_COORDS);return}this.setAttribute(O.MEDIA_PREVIEW_COORDS,e.join(" "))}update(){const e=this.mediaPreviewCoords,r=this.mediaPreviewImage;if(!(e&&r))return;const[n,i,s,a]=e,o=r.split("#")[0],l=getComputedStyle(this),{maxWidth:u,maxHeight:c,minWidth:d,minHeight:h}=l,f=Math.min(parseInt(u)/s,parseInt(c)/a),p=Math.max(parseInt(d)/s,parseInt(h)/a),m=f<1,g=m?f:p>1?p:1,{style:v}=Ar(this.shadowRoot,":host"),b=Ar(this.shadowRoot,"img").style,y=this.shadowRoot.querySelector("img"),T=m?"min":"max";v.setProperty(`${T}-width`,"initial","important"),v.setProperty(`${T}-height`,"initial","important"),v.width=`${s*g}px`,v.height=`${a*g}px`;const x=()=>{b.width=`${this.imgWidth*g}px`,b.height=`${this.imgHeight*g}px`,b.display="block"};y.src!==o&&(y.onload=()=>{this.imgWidth=y.naturalWidth,this.imgHeight=y.naturalHeight,x()},y.src=o,x()),x(),b.transform=`translate(-${n*g}px, -${i*g}px)`}}es=new WeakMap;K.customElements.get("media-preview-thumbnail")||K.customElements.define("media-preview-thumbnail",Pse);var u4=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},tk=(t,e,r)=>(u4(t,e,"read from private field"),r?r.call(t):e.get(t)),Nse=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Fse=(t,e,r,n)=>(u4(t,e,"write to private field"),e.set(t,r),r),gd;class $se extends tf{constructor(){super(),Nse(this,gd,void 0),Fse(this,gd,this.shadowRoot.querySelector("slot")),tk(this,gd).textContent=al(0)}static get observedAttributes(){return[...super.observedAttributes,O.MEDIA_PREVIEW_TIME]}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===O.MEDIA_PREVIEW_TIME&&n!=null&&(tk(this,gd).textContent=al(parseFloat(n)))}get mediaPreviewTime(){return pr(this,O.MEDIA_PREVIEW_TIME)}set mediaPreviewTime(e){Pr(this,O.MEDIA_PREVIEW_TIME,e)}}gd=new WeakMap;K.customElements.get("media-preview-time-display")||K.customElements.define("media-preview-time-display",$se);const Fl={SEEK_OFFSET:"seekoffset"},fp=30,Use=`<svg aria-hidden="true" viewBox="0 0 20 24"><defs><style>.text{font-size:8px;font-family:Arial-BoldMT, Arial;font-weight:700;}</style></defs><text class="text value" transform="translate(2.18 19.87)">${fp}</text><path d="M10 6V3L4.37 7 10 10.94V8a5.54 5.54 0 0 1 1.9 10.48v2.12A7.5 7.5 0 0 0 10 6Z"/></svg>`,c4=Fe.createElement("template");c4.innerHTML=`
  <slot name="icon">${Use}</slot>
`;const Bse=0;class jse extends oi{static get observedAttributes(){return[...super.observedAttributes,O.MEDIA_CURRENT_TIME,Fl.SEEK_OFFSET]}constructor(e={}){super({slotTemplate:c4,tooltipContent:br.SEEK_BACKWARD,...e})}connectedCallback(){this.seekOffset=pr(this,Fl.SEEK_OFFSET,fp),super.connectedCallback()}attributeChangedCallback(e,r,n){e===Fl.SEEK_OFFSET&&(this.seekOffset=pr(this,Fl.SEEK_OFFSET,fp)),super.attributeChangedCallback(e,r,n)}get seekOffset(){return pr(this,Fl.SEEK_OFFSET,fp)}set seekOffset(e){Pr(this,Fl.SEEK_OFFSET,e),this.setAttribute("aria-label",xn.SEEK_BACK_N_SECS({seekOffset:this.seekOffset})),n5(i5(this,"icon"),this.seekOffset)}get mediaCurrentTime(){return pr(this,O.MEDIA_CURRENT_TIME,Bse)}set mediaCurrentTime(e){Pr(this,O.MEDIA_CURRENT_TIME,e)}handleClick(){const e=Math.max(this.mediaCurrentTime-this.seekOffset,0),r=new K.CustomEvent(Re.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(r)}}K.customElements.get("media-seek-backward-button")||K.customElements.define("media-seek-backward-button",jse);const $l={SEEK_OFFSET:"seekoffset"},pp=30,Hse=`<svg aria-hidden="true" viewBox="0 0 20 24"><defs><style>.text{font-size:8px;font-family:Arial-BoldMT, Arial;font-weight:700;}</style></defs><text class="text value" transform="translate(8.9 19.87)">${pp}</text><path d="M10 6V3l5.61 4L10 10.94V8a5.54 5.54 0 0 0-1.9 10.48v2.12A7.5 7.5 0 0 1 10 6Z"/></svg>`,d4=Fe.createElement("template");d4.innerHTML=`
  <slot name="icon">${Hse}</slot>
`;const Vse=0;class Wse extends oi{static get observedAttributes(){return[...super.observedAttributes,O.MEDIA_CURRENT_TIME,$l.SEEK_OFFSET]}constructor(e={}){super({slotTemplate:d4,tooltipContent:br.SEEK_FORWARD,...e})}connectedCallback(){this.seekOffset=pr(this,$l.SEEK_OFFSET,pp),super.connectedCallback()}attributeChangedCallback(e,r,n){e===$l.SEEK_OFFSET&&(this.seekOffset=pr(this,$l.SEEK_OFFSET,pp)),super.attributeChangedCallback(e,r,n)}get seekOffset(){return pr(this,$l.SEEK_OFFSET,pp)}set seekOffset(e){Pr(this,$l.SEEK_OFFSET,e),this.setAttribute("aria-label",xn.SEEK_FORWARD_N_SECS({seekOffset:this.seekOffset})),n5(i5(this,"icon"),this.seekOffset)}get mediaCurrentTime(){return pr(this,O.MEDIA_CURRENT_TIME,Vse)}set mediaCurrentTime(e){Pr(this,O.MEDIA_CURRENT_TIME,e)}handleClick(){const e=this.mediaCurrentTime+this.seekOffset,r=new K.CustomEvent(Re.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(r)}}K.customElements.get("media-seek-forward-button")||K.customElements.define("media-seek-forward-button",Wse);var h4=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},jb=(t,e,r)=>(h4(t,e,"read from private field"),r?r.call(t):e.get(t)),Gse=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Kse=(t,e,r,n)=>(h4(t,e,"write to private field"),e.set(t,r),r),eu;const Di={REMAINING:"remaining",SHOW_DURATION:"showduration",NO_TOGGLE:"notoggle"},rk=[...Object.values(Di),O.MEDIA_CURRENT_TIME,O.MEDIA_DURATION,O.MEDIA_SEEKABLE],nk=["Enter"," "],qse="&nbsp;/&nbsp;",ik=(t,{timesSep:e=qse}={})=>{var r,n;const i=t.hasAttribute(Di.REMAINING),s=t.hasAttribute(Di.SHOW_DURATION),a=(r=t.mediaCurrentTime)!=null?r:0,[,o]=(n=t.mediaSeekable)!=null?n:[];let l=0;Number.isFinite(t.mediaDuration)?l=t.mediaDuration:Number.isFinite(o)&&(l=o);const u=al(i?0-(l-a):a);return s?`${u}${e}${al(l)}`:u},zse="video not loaded, unknown time.",Yse=t=>{var e;const r=t.mediaCurrentTime,[,n]=(e=t.mediaSeekable)!=null?e:[];let i=null;if(Number.isFinite(t.mediaDuration)?i=t.mediaDuration:Number.isFinite(n)&&(i=n),r==null||i===null){t.setAttribute("aria-valuetext",zse);return}const s=t.hasAttribute(Di.REMAINING),a=t.hasAttribute(Di.SHOW_DURATION),o=qd(s?0-(i-r):r);if(!a){t.setAttribute("aria-valuetext",o);return}const l=qd(i),u=`${o} of ${l}`;t.setAttribute("aria-valuetext",u)};class Xse extends tf{constructor(){super(),Gse(this,eu,void 0),Kse(this,eu,this.shadowRoot.querySelector("slot")),jb(this,eu).innerHTML=`${ik(this)}`}static get observedAttributes(){return[...super.observedAttributes,...rk,"disabled"]}connectedCallback(){const{style:e}=Ar(this.shadowRoot,":host(:hover:not([notoggle]))");e.setProperty("cursor","pointer"),e.setProperty("background","var(--media-control-hover-background, rgba(50 50 70 / .7))"),this.hasAttribute("disabled")||this.enable(),this.setAttribute("role","progressbar"),this.setAttribute("aria-label",si.PLAYBACK_TIME());const r=n=>{const{key:i}=n;if(!nk.includes(i)){this.removeEventListener("keyup",r);return}this.toggleTimeDisplay()};this.addEventListener("keydown",n=>{const{metaKey:i,altKey:s,key:a}=n;if(i||s||!nk.includes(a)){this.removeEventListener("keyup",r);return}this.addEventListener("keyup",r)}),this.addEventListener("click",this.toggleTimeDisplay),super.connectedCallback()}toggleTimeDisplay(){this.noToggle||(this.hasAttribute("remaining")?this.removeAttribute("remaining"):this.setAttribute("remaining",""))}disconnectedCallback(){this.disable(),super.disconnectedCallback()}attributeChangedCallback(e,r,n){rk.includes(e)?this.update():e==="disabled"&&n!==r&&(n==null?this.enable():this.disable()),super.attributeChangedCallback(e,r,n)}enable(){this.tabIndex=0}disable(){this.tabIndex=-1}get remaining(){return Qr(this,Di.REMAINING)}set remaining(e){Jr(this,Di.REMAINING,e)}get showDuration(){return Qr(this,Di.SHOW_DURATION)}set showDuration(e){Jr(this,Di.SHOW_DURATION,e)}get noToggle(){return Qr(this,Di.NO_TOGGLE)}set noToggle(e){Jr(this,Di.NO_TOGGLE,e)}get mediaDuration(){return pr(this,O.MEDIA_DURATION)}set mediaDuration(e){Pr(this,O.MEDIA_DURATION,e)}get mediaCurrentTime(){return pr(this,O.MEDIA_CURRENT_TIME)}set mediaCurrentTime(e){Pr(this,O.MEDIA_CURRENT_TIME,e)}get mediaSeekable(){const e=this.getAttribute(O.MEDIA_SEEKABLE);if(e)return e.split(":").map(r=>+r)}set mediaSeekable(e){if(e==null){this.removeAttribute(O.MEDIA_SEEKABLE);return}this.setAttribute(O.MEDIA_SEEKABLE,e.join(":"))}update(){const e=ik(this);Yse(this),e!==jb(this,eu).innerHTML&&(jb(this,eu).innerHTML=e)}}eu=new WeakMap;K.customElements.get("media-time-display")||K.customElements.define("media-time-display",Xse);var f4=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Wr=(t,e,r)=>(f4(t,e,"read from private field"),r?r.call(t):e.get(t)),Ki=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Zn=(t,e,r,n)=>(f4(t,e,"write to private field"),e.set(t,r),r),Zse=(t,e,r,n)=>({set _(i){Zn(t,e,i)},get _(){return Wr(t,e,n)}}),tu,mp,ru,vd,gp,vp,bp,nu,yo,yp;class Qse{constructor(e,r,n){Ki(this,tu,void 0),Ki(this,mp,void 0),Ki(this,ru,void 0),Ki(this,vd,void 0),Ki(this,gp,void 0),Ki(this,vp,void 0),Ki(this,bp,void 0),Ki(this,nu,void 0),Ki(this,yo,0),Ki(this,yp,(i=performance.now())=>{Zn(this,yo,requestAnimationFrame(Wr(this,yp))),Zn(this,vd,performance.now()-Wr(this,ru));const s=1e3/this.fps;if(Wr(this,vd)>s){Zn(this,ru,i-Wr(this,vd)%s);const a=1e3/((i-Wr(this,mp))/++Zse(this,gp)._),o=(i-Wr(this,vp))/1e3/this.duration;let l=Wr(this,bp)+o*this.playbackRate;l-Wr(this,tu).valueAsNumber>0?Zn(this,nu,this.playbackRate/this.duration/a):(Zn(this,nu,.995*Wr(this,nu)),l=Wr(this,tu).valueAsNumber+Wr(this,nu)),this.callback(l)}}),Zn(this,tu,e),this.callback=r,this.fps=n}start(){Wr(this,yo)===0&&(Zn(this,ru,performance.now()),Zn(this,mp,Wr(this,ru)),Zn(this,gp,0),Wr(this,yp).call(this))}stop(){Wr(this,yo)!==0&&(cancelAnimationFrame(Wr(this,yo)),Zn(this,yo,0))}update({start:e,duration:r,playbackRate:n}){const i=e-Wr(this,tu).valueAsNumber,s=Math.abs(r-this.duration);(i>0||i<-.03||s>=.5)&&this.callback(e),Zn(this,bp,e),Zn(this,vp,performance.now()),this.duration=r,this.playbackRate=n}}tu=new WeakMap;mp=new WeakMap;ru=new WeakMap;vd=new WeakMap;gp=new WeakMap;vp=new WeakMap;bp=new WeakMap;nu=new WeakMap;yo=new WeakMap;yp=new WeakMap;var gS=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Dr=(t,e,r)=>(gS(t,e,"read from private field"),r?r.call(t):e.get(t)),Vr=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},ts=(t,e,r,n)=>(gS(t,e,"write to private field"),e.set(t,r),r),yn=(t,e,r)=>(gS(t,e,"access private method"),r),iu,ol,tg,Xd,rg,Ep,Th,xh,su,au,bd,vS,p4,J1,ng,bS,ig,yS,sg,ES,eE,m4,Sh,ag,tE,g4;const Jse="video not loaded, unknown time.",eae=t=>{const e=t.range,r=qd(+b4(t)),n=qd(+t.mediaSeekableEnd),i=r&&n?`${r} of ${n}`:Jse;e.setAttribute("aria-valuetext",i)},v4=Fe.createElement("template");v4.innerHTML=`
  <style>
    :host {
      --media-box-border-radius: 4px;
      --media-box-padding-left: 10px;
      --media-box-padding-right: 10px;
      --media-preview-border-radius: var(--media-box-border-radius);
      --media-box-arrow-offset: var(--media-box-border-radius);
      --_control-background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));
      --_preview-background: var(--media-preview-background, var(--_control-background));

      
      contain: layout;
    }

    #buffered {
      background: var(--media-time-range-buffered-color, rgb(255 255 255 / .4));
      position: absolute;
      height: 100%;
      will-change: width;
    }

    #preview-rail,
    #current-rail {
      width: 100%;
      position: absolute;
      left: 0;
      bottom: 100%;
      pointer-events: none;
      will-change: transform;
    }

    [part~="box"] {
      width: min-content;
      
      position: absolute;
      bottom: 100%;
      flex-direction: column;
      align-items: center;
      transform: translateX(-50%);
    }

    [part~="current-box"] {
      display: var(--media-current-box-display, var(--media-box-display, flex));
      margin: var(--media-current-box-margin, var(--media-box-margin, 0 0 5px));
      visibility: hidden;
    }

    [part~="preview-box"] {
      display: var(--media-preview-box-display, var(--media-box-display, flex));
      margin: var(--media-preview-box-margin, var(--media-box-margin, 0 0 5px));
      transition-property: var(--media-preview-transition-property, visibility, opacity);
      transition-duration: var(--media-preview-transition-duration-out, .25s);
      transition-delay: var(--media-preview-transition-delay-out, 0s);
      visibility: hidden;
      opacity: 0;
    }

    :host(:is([${O.MEDIA_PREVIEW_IMAGE}], [${O.MEDIA_PREVIEW_TIME}])[dragging]) [part~="preview-box"] {
      transition-duration: var(--media-preview-transition-duration-in, .5s);
      transition-delay: var(--media-preview-transition-delay-in, .25s);
      visibility: visible;
      opacity: 1;
    }

    @media (hover: hover) {
      :host(:is([${O.MEDIA_PREVIEW_IMAGE}], [${O.MEDIA_PREVIEW_TIME}]):hover) [part~="preview-box"] {
        transition-duration: var(--media-preview-transition-duration-in, .5s);
        transition-delay: var(--media-preview-transition-delay-in, .25s);
        visibility: visible;
        opacity: 1;
      }
    }

    media-preview-thumbnail,
    ::slotted(media-preview-thumbnail) {
      visibility: hidden;
      
      transition: visibility 0s .25s;
      transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));
      background: var(--media-preview-thumbnail-background, var(--_preview-background));
      box-shadow: var(--media-preview-thumbnail-box-shadow, 0 0 4px rgb(0 0 0 / .2));
      max-width: var(--media-preview-thumbnail-max-width, 180px);
      max-height: var(--media-preview-thumbnail-max-height, 160px);
      min-width: var(--media-preview-thumbnail-min-width, 120px);
      min-height: var(--media-preview-thumbnail-min-height, 80px);
      border: var(--media-preview-thumbnail-border);
      border-radius: var(--media-preview-thumbnail-border-radius,
        var(--media-preview-border-radius) var(--media-preview-border-radius) 0 0);
    }

    :host([${O.MEDIA_PREVIEW_IMAGE}][dragging]) media-preview-thumbnail,
    :host([${O.MEDIA_PREVIEW_IMAGE}][dragging]) ::slotted(media-preview-thumbnail) {
      transition-delay: var(--media-preview-transition-delay-in, .25s);
      visibility: visible;
    }

    @media (hover: hover) {
      :host([${O.MEDIA_PREVIEW_IMAGE}]:hover) media-preview-thumbnail,
      :host([${O.MEDIA_PREVIEW_IMAGE}]:hover) ::slotted(media-preview-thumbnail) {
        transition-delay: var(--media-preview-transition-delay-in, .25s);
        visibility: visible;
      }

      :host([${O.MEDIA_PREVIEW_TIME}]:hover) {
        --media-time-range-hover-display: block;
      }
    }

    media-preview-chapter-display,
    ::slotted(media-preview-chapter-display) {
      font-size: var(--media-font-size, 13px);
      line-height: 17px;
      min-width: 0;
      visibility: hidden;
      
      transition: min-width 0s, border-radius 0s, margin 0s, padding 0s, visibility 0s;
      transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));
      background: var(--media-preview-chapter-background, var(--_preview-background));
      border-radius: var(--media-preview-chapter-border-radius,
        var(--media-preview-border-radius) var(--media-preview-border-radius)
        var(--media-preview-border-radius) var(--media-preview-border-radius));
      padding: var(--media-preview-chapter-padding, 3.5px 9px);
      margin: var(--media-preview-chapter-margin, 0 0 5px);
      text-shadow: var(--media-preview-chapter-text-shadow, 0 0 4px rgb(0 0 0 / .75));
    }

    :host([${O.MEDIA_PREVIEW_IMAGE}]) media-preview-chapter-display,
    :host([${O.MEDIA_PREVIEW_IMAGE}]) ::slotted(media-preview-chapter-display) {
      transition-delay: var(--media-preview-transition-delay-in, .25s);
      border-radius: var(--media-preview-chapter-border-radius, 0);
      padding: var(--media-preview-chapter-padding, 3.5px 9px 0);
      margin: var(--media-preview-chapter-margin, 0);
      min-width: 100%;
    }

    media-preview-chapter-display[${O.MEDIA_PREVIEW_CHAPTER}],
    ::slotted(media-preview-chapter-display[${O.MEDIA_PREVIEW_CHAPTER}]) {
      visibility: visible;
    }

    media-preview-chapter-display:not([aria-valuetext]),
    ::slotted(media-preview-chapter-display:not([aria-valuetext])) {
      display: none;
    }

    media-preview-time-display,
    ::slotted(media-preview-time-display),
    media-time-display,
    ::slotted(media-time-display) {
      font-size: var(--media-font-size, 13px);
      line-height: 17px;
      min-width: 0;
      
      transition: min-width 0s, border-radius 0s;
      transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));
      background: var(--media-preview-time-background, var(--_preview-background));
      border-radius: var(--media-preview-time-border-radius,
        var(--media-preview-border-radius) var(--media-preview-border-radius)
        var(--media-preview-border-radius) var(--media-preview-border-radius));
      padding: var(--media-preview-time-padding, 3.5px 9px);
      margin: var(--media-preview-time-margin, 0);
      text-shadow: var(--media-preview-time-text-shadow, 0 0 4px rgb(0 0 0 / .75));
      transform: translateX(min(
        max(calc(50% - var(--_box-width) / 2),
        calc(var(--_box-shift, 0))),
        calc(var(--_box-width) / 2 - 50%)
      ));
    }

    :host([${O.MEDIA_PREVIEW_IMAGE}]) media-preview-time-display,
    :host([${O.MEDIA_PREVIEW_IMAGE}]) ::slotted(media-preview-time-display) {
      transition-delay: var(--media-preview-transition-delay-in, .25s);
      border-radius: var(--media-preview-time-border-radius,
        0 0 var(--media-preview-border-radius) var(--media-preview-border-radius));
      min-width: 100%;
    }

    :host([${O.MEDIA_PREVIEW_TIME}]:hover) {
      --media-time-range-hover-display: block;
    }

    [part~="arrow"],
    ::slotted([part~="arrow"]) {
      display: var(--media-box-arrow-display, inline-block);
      transform: translateX(min(
        max(calc(50% - var(--_box-width) / 2 + var(--media-box-arrow-offset)),
        calc(var(--_box-shift, 0))),
        calc(var(--_box-width) / 2 - 50% - var(--media-box-arrow-offset))
      ));
      
      border-color: transparent;
      border-top-color: var(--media-box-arrow-background, var(--_control-background));
      border-width: var(--media-box-arrow-border-width,
        var(--media-box-arrow-height, 5px) var(--media-box-arrow-width, 6px) 0);
      border-style: solid;
      justify-content: center;
      height: 0;
    }
  </style>
  <div id="preview-rail">
    <slot name="preview" part="box preview-box">
      <media-preview-thumbnail></media-preview-thumbnail>
      <media-preview-chapter-display></media-preview-chapter-display>
      <media-preview-time-display></media-preview-time-display>
      <slot name="preview-arrow"><div part="arrow"></div></slot>
    </slot>
  </div>
  <div id="current-rail">
    <slot name="current" part="box current-box">
      
    </slot>
  </div>
`;const zf=(t,e=t.mediaCurrentTime)=>{const r=Number.isFinite(t.mediaSeekableStart)?t.mediaSeekableStart:0,n=Number.isFinite(t.mediaDuration)?t.mediaDuration:t.mediaSeekableEnd;if(Number.isNaN(n))return 0;const i=(e-r)/(n-r);return Math.max(0,Math.min(i,1))},b4=(t,e=t.range.valueAsNumber)=>{const r=Number.isFinite(t.mediaSeekableStart)?t.mediaSeekableStart:0,n=Number.isFinite(t.mediaDuration)?t.mediaDuration:t.mediaSeekableEnd;return Number.isNaN(n)?0:e*(n-r)+r};class tae extends mS{constructor(){super(),Vr(this,au),Vr(this,vS),Vr(this,ng),Vr(this,ig),Vr(this,sg),Vr(this,eE),Vr(this,Sh),Vr(this,tE),Vr(this,iu,void 0),Vr(this,ol,void 0),Vr(this,tg,void 0),Vr(this,Xd,void 0),Vr(this,rg,void 0),Vr(this,Ep,void 0),Vr(this,Th,void 0),Vr(this,xh,void 0),Vr(this,su,void 0),Vr(this,J1,n=>{this.dragging||(rS(n)&&(this.range.valueAsNumber=n),this.updateBar())}),this.container.appendChild(v4.content.cloneNode(!0)),this.shadowRoot.querySelector("#track").insertAdjacentHTML("afterbegin",'<div id="buffered" part="buffered"></div>'),ts(this,tg,this.shadowRoot.querySelectorAll('[part~="box"]')),ts(this,rg,this.shadowRoot.querySelector('[part~="preview-box"]')),ts(this,Ep,this.shadowRoot.querySelector('[part~="current-box"]'));const r=getComputedStyle(this);ts(this,Th,parseInt(r.getPropertyValue("--media-box-padding-left"))),ts(this,xh,parseInt(r.getPropertyValue("--media-box-padding-right"))),ts(this,ol,new Qse(this.range,Dr(this,J1),60))}static get observedAttributes(){return[...super.observedAttributes,O.MEDIA_PAUSED,O.MEDIA_DURATION,O.MEDIA_SEEKABLE,O.MEDIA_CURRENT_TIME,O.MEDIA_PREVIEW_IMAGE,O.MEDIA_PREVIEW_TIME,O.MEDIA_PREVIEW_CHAPTER,O.MEDIA_BUFFERED,O.MEDIA_PLAYBACK_RATE,O.MEDIA_LOADING,O.MEDIA_ENDED]}connectedCallback(){var e;super.connectedCallback(),this.range.setAttribute("aria-label",si.SEEK()),yn(this,au,bd).call(this),ts(this,iu,this.getRootNode()),(e=Dr(this,iu))==null||e.addEventListener("transitionstart",this)}disconnectedCallback(){var e;super.disconnectedCallback(),yn(this,au,bd).call(this),(e=Dr(this,iu))==null||e.removeEventListener("transitionstart",this),ts(this,iu,null)}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),r!=n&&(e===O.MEDIA_CURRENT_TIME||e===O.MEDIA_PAUSED||e===O.MEDIA_ENDED||e===O.MEDIA_LOADING||e===O.MEDIA_DURATION||e===O.MEDIA_SEEKABLE?(Dr(this,ol).update({start:zf(this),duration:this.mediaSeekableEnd-this.mediaSeekableStart,playbackRate:this.mediaPlaybackRate}),yn(this,au,bd).call(this),eae(this)):e===O.MEDIA_BUFFERED&&this.updateBufferedBar(),(e===O.MEDIA_DURATION||e===O.MEDIA_SEEKABLE)&&(this.mediaChaptersCues=Dr(this,su),this.updateBar()))}get mediaChaptersCues(){return Dr(this,su)}set mediaChaptersCues(e){var r;ts(this,su,e),this.updateSegments((r=Dr(this,su))==null?void 0:r.map(n=>({start:zf(this,n.startTime),end:zf(this,n.endTime)})))}get mediaPaused(){return Qr(this,O.MEDIA_PAUSED)}set mediaPaused(e){Jr(this,O.MEDIA_PAUSED,e)}get mediaLoading(){return Qr(this,O.MEDIA_LOADING)}set mediaLoading(e){Jr(this,O.MEDIA_LOADING,e)}get mediaDuration(){return pr(this,O.MEDIA_DURATION)}set mediaDuration(e){Pr(this,O.MEDIA_DURATION,e)}get mediaCurrentTime(){return pr(this,O.MEDIA_CURRENT_TIME)}set mediaCurrentTime(e){Pr(this,O.MEDIA_CURRENT_TIME,e)}get mediaPlaybackRate(){return pr(this,O.MEDIA_PLAYBACK_RATE,1)}set mediaPlaybackRate(e){Pr(this,O.MEDIA_PLAYBACK_RATE,e)}get mediaBuffered(){const e=this.getAttribute(O.MEDIA_BUFFERED);return e?e.split(" ").map(r=>r.split(":").map(n=>+n)):[]}set mediaBuffered(e){if(!e){this.removeAttribute(O.MEDIA_BUFFERED);return}const r=e.map(n=>n.join(":")).join(" ");this.setAttribute(O.MEDIA_BUFFERED,r)}get mediaSeekable(){const e=this.getAttribute(O.MEDIA_SEEKABLE);if(e)return e.split(":").map(r=>+r)}set mediaSeekable(e){if(e==null){this.removeAttribute(O.MEDIA_SEEKABLE);return}this.setAttribute(O.MEDIA_SEEKABLE,e.join(":"))}get mediaSeekableEnd(){var e;const[,r=this.mediaDuration]=(e=this.mediaSeekable)!=null?e:[];return r}get mediaSeekableStart(){var e;const[r=0]=(e=this.mediaSeekable)!=null?e:[];return r}get mediaPreviewImage(){return Fr(this,O.MEDIA_PREVIEW_IMAGE)}set mediaPreviewImage(e){$r(this,O.MEDIA_PREVIEW_IMAGE,e)}get mediaPreviewTime(){return pr(this,O.MEDIA_PREVIEW_TIME)}set mediaPreviewTime(e){Pr(this,O.MEDIA_PREVIEW_TIME,e)}get mediaEnded(){return Qr(this,O.MEDIA_ENDED)}set mediaEnded(e){Jr(this,O.MEDIA_ENDED,e)}updateBar(){super.updateBar(),this.updateBufferedBar(),this.updateCurrentBox()}updateBufferedBar(){var e;const r=this.mediaBuffered;if(!r.length)return;let n;if(this.mediaEnded)n=1;else{const s=this.mediaCurrentTime,[,a=this.mediaSeekableStart]=(e=r.find(([o,l])=>o<=s&&s<=l))!=null?e:[];n=zf(this,a)}const{style:i}=Ar(this.shadowRoot,"#buffered");i.setProperty("width",`${n*100}%`)}updateCurrentBox(){if(!this.shadowRoot.querySelector('slot[name="current"]').assignedElements().length)return;const r=Ar(this.shadowRoot,"#current-rail"),n=Ar(this.shadowRoot,'[part~="current-box"]'),i=yn(this,ng,bS).call(this,Dr(this,Ep)),s=yn(this,ig,yS).call(this,i,this.range.valueAsNumber),a=yn(this,sg,ES).call(this,i,this.range.valueAsNumber);r.style.transform=`translateX(${s})`,r.style.setProperty("--_range-width",`${i.range.width}`),n.style.setProperty("--_box-shift",`${a}`),n.style.setProperty("--_box-width",`${i.box.width}px`),n.style.setProperty("visibility","initial")}handleEvent(e){switch(super.handleEvent(e),e.type){case"input":yn(this,tE,g4).call(this);break;case"pointermove":yn(this,eE,m4).call(this,e);break;case"pointerup":case"pointerleave":yn(this,Sh,ag).call(this,null);break;case"transitionstart":ra(e.target,this)&&setTimeout(()=>yn(this,au,bd).call(this),0);break}}}iu=new WeakMap;ol=new WeakMap;tg=new WeakMap;Xd=new WeakMap;rg=new WeakMap;Ep=new WeakMap;Th=new WeakMap;xh=new WeakMap;su=new WeakMap;au=new WeakSet;bd=function(){yn(this,vS,p4).call(this)?Dr(this,ol).start():Dr(this,ol).stop()};vS=new WeakSet;p4=function(){return this.isConnected&&!this.mediaPaused&&!this.mediaLoading&&!this.mediaEnded&&this.mediaSeekableEnd>0&&s5(this)};J1=new WeakMap;ng=new WeakSet;bS=function(t){var e;const n=((e=this.getAttribute("bounds")?xc(this,`#${this.getAttribute("bounds")}`):this.parentElement)!=null?e:this).getBoundingClientRect(),i=this.range.getBoundingClientRect(),s=t.offsetWidth,a=-(i.left-n.left-s/2),o=n.right-i.left-s/2;return{box:{width:s,min:a,max:o},bounds:n,range:i}};ig=new WeakSet;yS=function(t,e){let r=`${e*100}%`;const{width:n,min:i,max:s}=t.box;if(!n)return r;if(Number.isNaN(i)||(r=`max(${`calc(1 / var(--_range-width) * 100 * ${i}% + var(--media-box-padding-left))`}, ${r})`),!Number.isNaN(s)){const o=`calc(1 / var(--_range-width) * 100 * ${s}% - var(--media-box-padding-right))`;r=`min(${r}, ${o})`}return r};sg=new WeakSet;ES=function(t,e){const{width:r,min:n,max:i}=t.box,s=e*t.range.width;if(s<n+Dr(this,Th)){const a=t.range.left-t.bounds.left-Dr(this,Th);return`${s-r/2+a}px`}if(s>i-Dr(this,xh)){const a=t.bounds.right-t.range.right-Dr(this,xh);return`${s+r/2-a-t.range.width}px`}return 0};eE=new WeakSet;m4=function(t){const e=[...Dr(this,tg)].some(c=>t.composedPath().includes(c));if(!this.dragging&&(e||!t.composedPath().includes(this))){yn(this,Sh,ag).call(this,null);return}const r=this.mediaSeekableEnd;if(!r)return;const n=Ar(this.shadowRoot,"#preview-rail"),i=Ar(this.shadowRoot,'[part~="preview-box"]'),s=yn(this,ng,bS).call(this,Dr(this,rg));let a=(t.clientX-s.range.left)/s.range.width;a=Math.max(0,Math.min(1,a));const o=yn(this,ig,yS).call(this,s,a),l=yn(this,sg,ES).call(this,s,a);n.style.transform=`translateX(${o})`,n.style.setProperty("--_range-width",`${s.range.width}`),i.style.setProperty("--_box-shift",`${l}`),i.style.setProperty("--_box-width",`${s.box.width}px`);const u=Math.round(Dr(this,Xd))-Math.round(a*r);Math.abs(u)<1&&a>.01&&a<.99||(ts(this,Xd,a*r),yn(this,Sh,ag).call(this,Dr(this,Xd)))};Sh=new WeakSet;ag=function(t){this.dispatchEvent(new K.CustomEvent(Re.MEDIA_PREVIEW_REQUEST,{composed:!0,bubbles:!0,detail:t}))};tE=new WeakSet;g4=function(){Dr(this,ol).stop();const t=b4(this);this.dispatchEvent(new K.CustomEvent(Re.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:t}))};K.customElements.get("media-time-range")||K.customElements.define("media-time-range",tae);const Ul={PLACEMENT:"placement",BOUNDS:"bounds"},y4=Fe.createElement("template");y4.innerHTML=`
  <style>
    :host {
      --_tooltip-background-color: var(--media-tooltip-background-color, var(--media-secondary-color, rgba(20, 20, 30, .7)));
      --_tooltip-background: var(--media-tooltip-background, var(--_tooltip-background-color));
      --_tooltip-arrow-half-width: calc(var(--media-tooltip-arrow-width, 12px) / 2);
      --_tooltip-arrow-height: var(--media-tooltip-arrow-height, 5px);
      --_tooltip-arrow-background: var(--media-tooltip-arrow-color, var(--_tooltip-background-color));
      position: relative;
      pointer-events: none;
      display: var(--media-tooltip-display, inline-flex);
      justify-content: center;
      align-items: center;
      box-sizing: border-box;
      z-index: var(--media-tooltip-z-index, 1);
      background: var(--_tooltip-background);
      color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
      font: var(--media-font,
        var(--media-font-weight, 400)
        var(--media-font-size, 13px) /
        var(--media-text-content-height, var(--media-control-height, 18px))
        var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
      padding: var(--media-tooltip-padding, .35em .7em);
      border: var(--media-tooltip-border, none);
      border-radius: var(--media-tooltip-border-radius, 5px);
      filter: var(--media-tooltip-filter, drop-shadow(0 0 4px rgba(0, 0, 0, .2)));
      white-space: var(--media-tooltip-white-space, nowrap);
    }

    :host([hidden]) {
      display: none;
    }

    img, svg {
      display: inline-block;
    }

    #arrow {
      position: absolute;
      width: 0px;
      height: 0px;
      border-style: solid;
      display: var(--media-tooltip-arrow-display, block);
    }

    :host(:not([placement])),
    :host([placement="top"]) {
      position: absolute;
      bottom: calc(100% + var(--media-tooltip-distance, 12px));
      left: 50%;
      transform: translate(calc(-50% - var(--media-tooltip-offset-x, 0px)), 0);
    }
    :host(:not([placement])) #arrow,
    :host([placement="top"]) #arrow {
      top: 100%;
      left: 50%;
      border-width: var(--_tooltip-arrow-height) var(--_tooltip-arrow-half-width) 0 var(--_tooltip-arrow-half-width);
      border-color: var(--_tooltip-arrow-background) transparent transparent transparent;
      transform: translate(calc(-50% + var(--media-tooltip-offset-x, 0px)), 0);
    }

    :host([placement="right"]) {
      position: absolute;
      left: calc(100% + var(--media-tooltip-distance, 12px));
      top: 50%;
      transform: translate(0, -50%);
    }
    :host([placement="right"]) #arrow {
      top: 50%;
      right: 100%;
      border-width: var(--_tooltip-arrow-half-width) var(--_tooltip-arrow-height) var(--_tooltip-arrow-half-width) 0;
      border-color: transparent var(--_tooltip-arrow-background) transparent transparent;
      transform: translate(0, -50%);
    }

    :host([placement="bottom"]) {
      position: absolute;
      top: calc(100% + var(--media-tooltip-distance, 12px));
      left: 50%;
      transform: translate(calc(-50% - var(--media-tooltip-offset-x, 0px)), 0);
    }
    :host([placement="bottom"]) #arrow {
      bottom: 100%;
      left: 50%;
      border-width: 0 var(--_tooltip-arrow-half-width) var(--_tooltip-arrow-height) var(--_tooltip-arrow-half-width);
      border-color: transparent transparent var(--_tooltip-arrow-background) transparent;
      transform: translate(calc(-50% + var(--media-tooltip-offset-x, 0px)), 0);
    }

    :host([placement="left"]) {
      position: absolute;
      right: calc(100% + var(--media-tooltip-distance, 12px));
      top: 50%;
      transform: translate(0, -50%);
    }
    :host([placement="left"]) #arrow {
      top: 50%;
      left: 100%;
      border-width: var(--_tooltip-arrow-half-width) 0 var(--_tooltip-arrow-half-width) var(--_tooltip-arrow-height);
      border-color: transparent transparent transparent var(--_tooltip-arrow-background);
      transform: translate(0, -50%);
    }
    
    :host([placement="none"]) #arrow {
      display: none;
    }

  </style>
  <slot></slot>
  <div id="arrow"></div>
`;class rae extends K.HTMLElement{constructor(){if(super(),this.updateXOffset=()=>{var e;if(!s5(this,{checkOpacity:!1,checkVisibilityCSS:!1}))return;const r=this.placement;if(r==="left"||r==="right"){this.style.removeProperty("--media-tooltip-offset-x");return}const n=getComputedStyle(this),i=(e=xc(this,"#"+this.bounds))!=null?e:_i(this);if(!i)return;const{x:s,width:a}=i.getBoundingClientRect(),{x:o,width:l}=this.getBoundingClientRect(),u=o+l,c=s+a,d=n.getPropertyValue("--media-tooltip-offset-x"),h=d?parseFloat(d.replace("px","")):0,f=n.getPropertyValue("--media-tooltip-container-margin"),p=f?parseFloat(f.replace("px","")):0,m=o-s+h-p,g=u-c+h+p;if(m<0){this.style.setProperty("--media-tooltip-offset-x",`${m}px`);return}if(g>0){this.style.setProperty("--media-tooltip-offset-x",`${g}px`);return}this.style.removeProperty("--media-tooltip-offset-x")},this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(y4.content.cloneNode(!0))),this.arrowEl=this.shadowRoot.querySelector("#arrow"),Object.prototype.hasOwnProperty.call(this,"placement")){const e=this.placement;delete this.placement,this.placement=e}}static get observedAttributes(){return[Ul.PLACEMENT,Ul.BOUNDS]}get placement(){return Fr(this,Ul.PLACEMENT)}set placement(e){$r(this,Ul.PLACEMENT,e)}get bounds(){return Fr(this,Ul.BOUNDS)}set bounds(e){$r(this,Ul.BOUNDS,e)}}K.customElements.get("media-tooltip")||K.customElements.define("media-tooltip",rae);const nae=1,iae=t=>t.mediaMuted?0:t.mediaVolume,sae=t=>`${Math.round(t*100)}%`;class aae extends mS{static get observedAttributes(){return[...super.observedAttributes,O.MEDIA_VOLUME,O.MEDIA_MUTED,O.MEDIA_VOLUME_UNAVAILABLE]}constructor(){super(),this.range.addEventListener("input",()=>{const e=this.range.value,r=new K.CustomEvent(Re.MEDIA_VOLUME_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(r)})}connectedCallback(){super.connectedCallback(),this.range.setAttribute("aria-label",si.VOLUME())}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),(e===O.MEDIA_VOLUME||e===O.MEDIA_MUTED)&&(this.range.valueAsNumber=iae(this),this.range.setAttribute("aria-valuetext",sae(this.range.valueAsNumber)),this.updateBar())}get mediaVolume(){return pr(this,O.MEDIA_VOLUME,nae)}set mediaVolume(e){Pr(this,O.MEDIA_VOLUME,e)}get mediaMuted(){return Qr(this,O.MEDIA_MUTED)}set mediaMuted(e){Jr(this,O.MEDIA_MUTED,e)}get mediaVolumeUnavailable(){return Fr(this,O.MEDIA_VOLUME_UNAVAILABLE)}set mediaVolumeUnavailable(e){$r(this,O.MEDIA_VOLUME_UNAVAILABLE,e)}}K.customElements.get("media-volume-range")||K.customElements.define("media-volume-range",aae);var oae=Object.defineProperty,lae=Object.getPrototypeOf,uae=Reflect.get,cae=(t,e,r)=>e in t?oae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Wt=(t,e,r)=>(cae(t,typeof e!="symbol"?e+"":e,r),r),_S=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},W=(t,e,r)=>(_S(t,e,"read from private field"),r?r.call(t):e.get(t)),Ie=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Pe=(t,e,r,n)=>(_S(t,e,"write to private field"),e.set(t,r),r),rr=(t,e,r)=>(_S(t,e,"access private method"),r),Hb=(t,e,r)=>uae(lae(t),r,e),dv=class{addEventListener(){}removeEventListener(){}dispatchEvent(e){return!0}};if(typeof DocumentFragment>"u"){class t extends dv{}globalThis.DocumentFragment=t}var TS=class extends dv{},dae=class extends dv{},hae={get(t){},define(t,e,r){},getName(t){return null},upgrade(t){},whenDefined(t){return Promise.resolve(TS)}},_p,fae=class{constructor(e,r={}){Ie(this,_p,void 0),Pe(this,_p,r==null?void 0:r.detail)}get detail(){return W(this,_p)}initCustomEvent(){}};_p=new WeakMap;function pae(t,e){return new TS}var mae={document:{createElement:pae},DocumentFragment,customElements:hae,CustomEvent:fae,EventTarget:dv,HTMLElement:TS,HTMLVideoElement:dae},gae=typeof window>"u"||typeof globalThis.customElements>"u",Vb=gae?mae:globalThis,vae=()=>{try{return"0.22.0"}catch{}return"UNKNOWN"},bae=vae(),yae=()=>bae,xS=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting","waitingforkey","resize","enterpictureinpicture","leavepictureinpicture","webkitbeginfullscreen","webkitendfullscreen","webkitpresentationmodechanged"];function Eae(t){return`
    <style>
      :host {
        display: inline-flex;
        line-height: 0;
        flex-direction: column;
        justify-content: end;
      }

      audio {
        width: 100%;
      }
    </style>
    <slot name="media">
      <audio${_4(t)}></audio>
    </slot>
    <slot></slot>
  `}function _ae(t){return`
    <style>
      :host {
        display: inline-block;
        line-height: 0;
      }

      video {
        max-width: 100%;
        max-height: 100%;
        min-width: 100%;
        min-height: 100%;
        object-fit: var(--media-object-fit, contain);
        object-position: var(--media-object-position, 50% 50%);
      }

      video::-webkit-media-text-track-container {
        transform: var(--media-webkit-text-track-transform);
        transition: var(--media-webkit-text-track-transition);
      }
    </style>
    <slot name="media">
      <video${_4(t)}></video>
    </slot>
    <slot></slot>
  `}var E4=(t,{tag:e,is:r})=>{var n,i,s,a,o,l,u,c,d,h,f,p,m,g,v,b,y;let T=(i=(n=globalThis.document)==null?void 0:n.createElement)==null?void 0:i.call(n,e,{is:r}),x=T?Tae(T):[];return s=class extends t{constructor(){super(),Ie(this,h),Ie(this,p),Ie(this,g),Ie(this,b),Ie(this,u,void 0),Ie(this,c,void 0),Ie(this,d,new Map)}static get observedAttributes(){var _,S,A;return rr(_=s,o,l).call(_),[...(A=(S=T==null?void 0:T.constructor)==null?void 0:S.observedAttributes)!=null?A:[],"autopictureinpicture","disablepictureinpicture","disableremoteplayback","autoplay","controls","controlslist","crossorigin","loop","muted","playsinline","poster","preload","src"]}get nativeEl(){var _,S,A;return rr(this,h,f).call(this),(A=(S=(_=W(this,c))!=null?_:this.shadowRoot.querySelector(e))!=null?S:this.querySelector(":scope > [slot=media]"))!=null?A:this.querySelector(e)}set nativeEl(_){Pe(this,c,_)}get defaultMuted(){return this.hasAttribute("muted")}set defaultMuted(_){this.toggleAttribute("muted",!!_)}get src(){return this.getAttribute("src")}set src(_){this.setAttribute("src",`${_}`)}get preload(){var _,S;return(S=this.getAttribute("preload"))!=null?S:(_=this.nativeEl)==null?void 0:_.preload}set preload(_){this.setAttribute("preload",`${_}`)}init(){var _,S;if(!this.shadowRoot){this.attachShadow({mode:"open"});let A=xae(this.attributes);r&&(A.is=r),e&&(A.part=e),this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(A)}this.nativeEl.muted=this.hasAttribute("muted");for(let A of x)rr(this,g,v).call(this,A);this.shadowRoot.addEventListener("slotchange",this),rr(this,p,m).call(this);for(let A of this.constructor.Events)(S=(_=this.shadowRoot).addEventListener)==null||S.call(_,A,this,!0)}handleEvent(_){if(_.type==="slotchange"){rr(this,p,m).call(this);return}_.target===this.nativeEl&&this.dispatchEvent(new CustomEvent(_.type,{detail:_.detail}))}attributeChangedCallback(_,S,A){rr(this,h,f).call(this),rr(this,b,y).call(this,_,S,A)}connectedCallback(){rr(this,h,f).call(this)}},a=new WeakMap,o=new WeakSet,l=function(){if(W(this,a))return;Pe(this,a,!0);let _=new Set(this.observedAttributes);_.delete("muted");for(let S of x)if(!(S in this.prototype))if(typeof T[S]=="function")this.prototype[S]=function(...A){return rr(this,h,f).call(this),this.call?this.call(S,...A):this.nativeEl[S].apply(this.nativeEl,A)};else{let A={get(){var k,I,C;rr(this,h,f).call(this);let N=S.toLowerCase();if(_.has(N)){let P=this.getAttribute(N);return P===null?!1:P===""?!0:P}return(C=(k=this.get)==null?void 0:k.call(this,S))!=null?C:(I=this.nativeEl)==null?void 0:I[S]}};S!==S.toUpperCase()&&(A.set=function(k){rr(this,h,f).call(this);let I=S.toLowerCase();if(_.has(I)){k===!0||k===!1||k==null?this.toggleAttribute(I,!!k):this.setAttribute(I,k);return}if(this.set){this.set(S,k);return}this.nativeEl[S]=k}),Object.defineProperty(this.prototype,S,A)}},u=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakSet,f=function(){W(this,u)||(Pe(this,u,!0),this.init())},p=new WeakSet,m=function(){let _=new Map(W(this,d));this.shadowRoot.querySelector("slot:not([name])").assignedElements({flatten:!0}).filter(S=>["track","source"].includes(S.localName)).forEach(S=>{var A,k;_.delete(S);let I=W(this,d).get(S);I||(I=S.cloneNode(),W(this,d).set(S,I)),(k=(A=this.nativeEl).append)==null||k.call(A,I),I.localName==="track"&&I.default&&(I.kind==="chapters"||I.kind==="metadata")&&I.track.mode==="disabled"&&(I.track.mode="hidden")}),_.forEach(S=>S.remove())},g=new WeakSet,v=function(_){if(Object.prototype.hasOwnProperty.call(this,_)){let S=this[_];delete this[_],this[_]=S}},b=new WeakSet,y=function(_,S,A){var k,I,C,N,P,V;["id","class"].includes(_)||!s.observedAttributes.includes(_)&&this.constructor.observedAttributes.includes(_)||(A===null?(I=(k=this.nativeEl).removeAttribute)==null||I.call(k,_):((N=(C=this.nativeEl).getAttribute)==null?void 0:N.call(C,_))!=A&&((V=(P=this.nativeEl).setAttribute)==null||V.call(P,_,A)))},Ie(s,o),Wt(s,"getTemplateHTML",e.endsWith("audio")?Eae:_ae),Wt(s,"shadowRootOptions",{mode:"open"}),Wt(s,"Events",xS),Ie(s,a,void 0),s};function Tae(t){let e=[];for(let r=Object.getPrototypeOf(t);r&&r!==HTMLElement.prototype;r=Object.getPrototypeOf(r))e.push(...Object.getOwnPropertyNames(r));return e}function _4(t){let e="";for(let r in t){let n=t[r];n===""?e+=` ${r}`:e+=` ${r}="${n}"`}return e}function xae(t){let e={};for(let r of t)e[r.name]=r.value;return e}var sk,Wb=E4((sk=globalThis.HTMLElement)!=null?sk:class{},{tag:"video"}),ak;E4((ak=globalThis.HTMLElement)!=null?ak:class{},{tag:"audio"});var ll=new WeakMap,Gb=class extends Error{},Sae=class extends Error{},wae=globalThis.WeakRef?class extends Set{add(t){super.add(new WeakRef(t))}forEach(t){super.forEach(e=>{let r=e.deref();r&&t(r)})}}:Set;function Aae(t){var e,r,n;(r=(e=globalThis.chrome)==null?void 0:e.cast)!=null&&r.isAvailable?(n=globalThis.cast)!=null&&n.framework?t():customElements.whenDefined("google-cast-button").then(t):globalThis.__onGCastApiAvailable=()=>{customElements.whenDefined("google-cast-button").then(t)}}function Rae(){return globalThis.chrome}function Cae(){var t;let e="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1";if((t=globalThis.chrome)!=null&&t.cast||document.querySelector(`script[src="${e}"]`))return;let r=document.createElement("script");r.src=e,document.head.append(r)}function gl(){var t,e;return(e=(t=globalThis.cast)==null?void 0:t.framework)==null?void 0:e.CastContext.getInstance()}function SS(){var t;return(t=gl())==null?void 0:t.getCurrentSession()}function wS(){var t;return(t=SS())==null?void 0:t.getSessionObj().media[0]}function Iae(t){return new Promise((e,r)=>{wS().editTracksInfo(t,e,r)})}function kae(t){return new Promise((e,r)=>{wS().getStatus(t,e,r)})}function T4(t){return gl().setOptions({...x4(),...t})}function x4(){return{receiverApplicationId:"CC1AD845",autoJoinPolicy:"origin_scoped",androidReceiverCompatible:!1,language:"en-US",resumeSavedSession:!0}}var Tp=new wae,Da=new WeakSet,kr;Aae(()=>{var t,e,r,n;if(!((e=(t=globalThis.chrome)==null?void 0:t.cast)!=null&&e.isAvailable)){console.debug("chrome.cast.isAvailable",(n=(r=globalThis.chrome)==null?void 0:r.cast)==null?void 0:n.isAvailable);return}kr||(kr=cast.framework,gl().addEventListener(kr.CastContextEventType.CAST_STATE_CHANGED,i=>{Tp.forEach(s=>{var a,o;return(o=(a=ll.get(s)).onCastStateChanged)==null?void 0:o.call(a,i)})}),gl().addEventListener(kr.CastContextEventType.SESSION_STATE_CHANGED,i=>{Tp.forEach(s=>{var a,o;return(o=(a=ll.get(s)).onSessionStateChanged)==null?void 0:o.call(a,i)})}),Tp.forEach(i=>{var s,a;return(a=(s=ll.get(i)).init)==null?void 0:a.call(s)}))});var ok=0,kt,xp,gi,wa,Lu,ou,Zo,rE,Aa,Eo,nE,lk,og,iE,sE,S4,Sp,aE,oE,uk,wp,Kb,Lae=class extends EventTarget{constructor(e){super(),Ie(this,Aa),Ie(this,nE),Ie(this,og),Ie(this,sE),Ie(this,Sp),Ie(this,oE),Ie(this,wp),Ie(this,kt,void 0),Ie(this,xp,void 0),Ie(this,gi,void 0),Ie(this,wa,void 0),Ie(this,Lu,"disconnected"),Ie(this,ou,!1),Ie(this,Zo,new Set),Ie(this,rE,new WeakMap),Pe(this,kt,e),Tp.add(this),ll.set(this,{init:()=>rr(this,Sp,aE).call(this),onCastStateChanged:()=>rr(this,og,iE).call(this),onSessionStateChanged:()=>rr(this,sE,S4).call(this),getCastPlayer:()=>W(this,Aa,Eo)}),rr(this,Sp,aE).call(this)}get state(){return W(this,Lu)}async watchAvailability(e){if(W(this,kt).disableRemotePlayback)throw new Gb("disableRemotePlayback attribute is present.");return W(this,rE).set(e,++ok),W(this,Zo).add(e),ok}async cancelWatchAvailability(e){if(W(this,kt).disableRemotePlayback)throw new Gb("disableRemotePlayback attribute is present.");e?W(this,Zo).delete(e):W(this,Zo).clear()}async prompt(){var e,r,n,i;if(W(this,kt).disableRemotePlayback)throw new Gb("disableRemotePlayback attribute is present.");if(!((r=(e=globalThis.chrome)==null?void 0:e.cast)!=null&&r.isAvailable))throw new Sae("The RemotePlayback API is disabled on this platform.");let s=Da.has(W(this,kt));Da.add(W(this,kt)),T4(W(this,kt).castOptions),Object.entries(W(this,wa)).forEach(([a,o])=>{W(this,gi).controller.addEventListener(a,o)});try{await gl().requestSession()}catch(a){if(a==="cancel"){s||Da.delete(W(this,kt));return}throw new Error(a)}(i=(n=ll.get(W(this,kt)))==null?void 0:n.loadOnPrompt)==null||i.call(n)}};kt=new WeakMap,xp=new WeakMap,gi=new WeakMap,wa=new WeakMap,Lu=new WeakMap,ou=new WeakMap,Zo=new WeakMap,rE=new WeakMap,Aa=new WeakSet,Eo=function(){if(Da.has(W(this,kt)))return W(this,gi)},nE=new WeakSet,lk=function(){Da.has(W(this,kt))&&(Object.entries(W(this,wa)).forEach(([t,e])=>{W(this,gi).controller.removeEventListener(t,e)}),Da.delete(W(this,kt)),W(this,kt).muted=W(this,gi).isMuted,W(this,kt).currentTime=W(this,gi).savedPlayerState.currentTime,W(this,gi).savedPlayerState.isPaused===!1&&W(this,kt).play())},og=new WeakSet,iE=function(){let t=gl().getCastState();if(Da.has(W(this,kt))&&t==="CONNECTING"&&(Pe(this,Lu,"connecting"),this.dispatchEvent(new Event("connecting"))),!W(this,ou)&&t!=null&&t.includes("CONNECT")){Pe(this,ou,!0);for(let e of W(this,Zo))e(!0)}else if(W(this,ou)&&(!t||t==="NO_DEVICES_AVAILABLE")){Pe(this,ou,!1);for(let e of W(this,Zo))e(!1)}},sE=new WeakSet,S4=async function(){var t;let{SESSION_RESUMED:e}=kr.SessionState;if(gl().getSessionState()===e&&W(this,kt).castSrc===((t=wS())==null?void 0:t.media.contentId)){Da.add(W(this,kt)),Object.entries(W(this,wa)).forEach(([r,n])=>{W(this,gi).controller.addEventListener(r,n)});try{await kae(new chrome.cast.media.GetStatusRequest)}catch(r){console.error(r)}W(this,wa)[kr.RemotePlayerEventType.IS_PAUSED_CHANGED](),W(this,wa)[kr.RemotePlayerEventType.PLAYER_STATE_CHANGED]()}},Sp=new WeakSet,aE=function(){!kr||W(this,xp)||(Pe(this,xp,!0),T4(W(this,kt).castOptions),W(this,kt).textTracks.addEventListener("change",()=>rr(this,wp,Kb).call(this)),rr(this,og,iE).call(this),Pe(this,gi,new kr.RemotePlayer),new kr.RemotePlayerController(W(this,gi)),Pe(this,wa,{[kr.RemotePlayerEventType.IS_CONNECTED_CHANGED]:({value:t})=>{t===!0?(Pe(this,Lu,"connected"),this.dispatchEvent(new Event("connect"))):(rr(this,nE,lk).call(this),Pe(this,Lu,"disconnected"),this.dispatchEvent(new Event("disconnect")))},[kr.RemotePlayerEventType.DURATION_CHANGED]:()=>{W(this,kt).dispatchEvent(new Event("durationchange"))},[kr.RemotePlayerEventType.VOLUME_LEVEL_CHANGED]:()=>{W(this,kt).dispatchEvent(new Event("volumechange"))},[kr.RemotePlayerEventType.IS_MUTED_CHANGED]:()=>{W(this,kt).dispatchEvent(new Event("volumechange"))},[kr.RemotePlayerEventType.CURRENT_TIME_CHANGED]:()=>{var t;(t=W(this,Aa,Eo))!=null&&t.isMediaLoaded&&W(this,kt).dispatchEvent(new Event("timeupdate"))},[kr.RemotePlayerEventType.VIDEO_INFO_CHANGED]:()=>{W(this,kt).dispatchEvent(new Event("resize"))},[kr.RemotePlayerEventType.IS_PAUSED_CHANGED]:()=>{W(this,kt).dispatchEvent(new Event(this.paused?"pause":"play"))},[kr.RemotePlayerEventType.PLAYER_STATE_CHANGED]:()=>{var t,e;((t=W(this,Aa,Eo))==null?void 0:t.playerState)!==chrome.cast.media.PlayerState.PAUSED&&W(this,kt).dispatchEvent(new Event({[chrome.cast.media.PlayerState.PLAYING]:"playing",[chrome.cast.media.PlayerState.BUFFERING]:"waiting",[chrome.cast.media.PlayerState.IDLE]:"emptied"}[(e=W(this,Aa,Eo))==null?void 0:e.playerState]))},[kr.RemotePlayerEventType.IS_MEDIA_LOADED_CHANGED]:async()=>{var t;(t=W(this,Aa,Eo))!=null&&t.isMediaLoaded&&(await Promise.resolve(),rr(this,oE,uk).call(this))}}))},oE=new WeakSet,uk=function(){rr(this,wp,Kb).call(this)},wp=new WeakSet,Kb=async function(){var t,e,r,n,i;if(!W(this,Aa,Eo))return;let s=((e=(t=W(this,gi).mediaInfo)==null?void 0:t.tracks)!=null?e:[]).filter(({type:h})=>h===chrome.cast.media.TrackType.TEXT),a=[...W(this,kt).textTracks].filter(({kind:h})=>h==="subtitles"||h==="captions"),o=s.map(({language:h,name:f,trackId:p})=>{var m;let{mode:g}=(m=a.find(v=>v.language===h&&v.label===f))!=null?m:{};return g?{mode:g,trackId:p}:!1}).filter(Boolean),l=o.filter(({mode:h})=>h!=="showing").map(({trackId:h})=>h),u=o.find(({mode:h})=>h==="showing"),c=(i=(n=(r=SS())==null?void 0:r.getSessionObj().media[0])==null?void 0:n.activeTrackIds)!=null?i:[],d=c;if(c.length&&(d=d.filter(h=>!l.includes(h))),u!=null&&u.trackId&&(d=[...d,u.trackId]),d=[...new Set(d)],!((h,f)=>h.length===f.length&&h.every(p=>f.includes(p)))(c,d))try{let h=new chrome.cast.media.EditTracksInfoRequest(d);await Iae(h)}catch(h){console.error(h)}};var Dae=t=>{var e,r,n,i,s,a,o,l,u,c;return r=class extends t{constructor(){super(...arguments),Ie(this,o),Ie(this,u),Ie(this,n,{paused:!1}),Ie(this,i,x4()),Ie(this,s,void 0),Ie(this,a,void 0)}get remote(){return W(this,a)?W(this,a):Rae()?(Cae(),ll.set(this,{loadOnPrompt:()=>rr(this,u,c).call(this)}),Pe(this,a,new Lae(this))):super.remote}attributeChangedCallback(d,h,f){if(super.attributeChangedCallback(d,h,f),d==="cast-receiver"&&f){W(this,i).receiverApplicationId=f;return}if(W(this,o,l))switch(d){case"cast-stream-type":case"cast-src":this.load();break}}async load(){var d,h;if(!W(this,o,l))return super.load();let f=new chrome.cast.media.MediaInfo(this.castSrc,this.castContentType);f.customData=this.castCustomData;let p=[...this.querySelectorAll("track")].filter(({kind:b,src:y})=>y&&(b==="subtitles"||b==="captions")),m=[],g=0;p.length&&(f.tracks=p.map(b=>{let y=++g;m.length===0&&b.track.mode==="showing"&&m.push(y);let T=new chrome.cast.media.Track(y,chrome.cast.media.TrackType.TEXT);return T.trackContentId=b.src,T.trackContentType="text/vtt",T.subtype=b.kind==="captions"?chrome.cast.media.TextTrackType.CAPTIONS:chrome.cast.media.TextTrackType.SUBTITLES,T.name=b.label,T.language=b.srclang,T})),this.castStreamType==="live"?f.streamType=chrome.cast.media.StreamType.LIVE:f.streamType=chrome.cast.media.StreamType.BUFFERED,f.metadata=new chrome.cast.media.GenericMediaMetadata,f.metadata.title=this.title,f.metadata.images=[{url:this.poster}];let v=new chrome.cast.media.LoadRequest(f);v.currentTime=(d=super.currentTime)!=null?d:0,v.autoplay=!W(this,n).paused,v.activeTrackIds=m,await((h=SS())==null?void 0:h.loadMedia(v)),this.dispatchEvent(new Event("volumechange"))}play(){var d;if(W(this,o,l)){W(this,o,l).isPaused&&((d=W(this,o,l).controller)==null||d.playOrPause());return}return super.play()}pause(){var d;if(W(this,o,l)){W(this,o,l).isPaused||(d=W(this,o,l).controller)==null||d.playOrPause();return}super.pause()}get castOptions(){return W(this,i)}get castReceiver(){var d;return(d=this.getAttribute("cast-receiver"))!=null?d:void 0}set castReceiver(d){this.castReceiver!=d&&this.setAttribute("cast-receiver",`${d}`)}get castSrc(){var d,h,f;return(f=(h=this.getAttribute("cast-src"))!=null?h:(d=this.querySelector("source"))==null?void 0:d.src)!=null?f:this.currentSrc}set castSrc(d){this.castSrc!=d&&this.setAttribute("cast-src",`${d}`)}get castContentType(){var d;return(d=this.getAttribute("cast-content-type"))!=null?d:void 0}set castContentType(d){this.setAttribute("cast-content-type",`${d}`)}get castStreamType(){var d,h;return(h=(d=this.getAttribute("cast-stream-type"))!=null?d:this.streamType)!=null?h:void 0}set castStreamType(d){this.setAttribute("cast-stream-type",`${d}`)}get castCustomData(){return W(this,s)}set castCustomData(d){let h=typeof d;if(!["object","undefined"].includes(h)){console.error(`castCustomData must be nullish or an object but value was of type ${h}`);return}Pe(this,s,d)}get readyState(){if(W(this,o,l))switch(W(this,o,l).playerState){case chrome.cast.media.PlayerState.IDLE:return 0;case chrome.cast.media.PlayerState.BUFFERING:return 2;default:return 3}return super.readyState}get paused(){return W(this,o,l)?W(this,o,l).isPaused:super.paused}get muted(){var d;return W(this,o,l)?(d=W(this,o,l))==null?void 0:d.isMuted:super.muted}set muted(d){var h;if(W(this,o,l)){(d&&!W(this,o,l).isMuted||!d&&W(this,o,l).isMuted)&&((h=W(this,o,l).controller)==null||h.muteOrUnmute());return}super.muted=d}get volume(){var d,h;return W(this,o,l)?(h=(d=W(this,o,l))==null?void 0:d.volumeLevel)!=null?h:1:super.volume}set volume(d){var h;if(W(this,o,l)){W(this,o,l).volumeLevel=+d,(h=W(this,o,l).controller)==null||h.setVolumeLevel();return}super.volume=d}get duration(){var d,h,f;return W(this,o,l)&&(d=W(this,o,l))!=null&&d.isMediaLoaded?(f=(h=W(this,o,l))==null?void 0:h.duration)!=null?f:NaN:super.duration}get currentTime(){var d,h,f;return W(this,o,l)&&(d=W(this,o,l))!=null&&d.isMediaLoaded?(f=(h=W(this,o,l))==null?void 0:h.currentTime)!=null?f:0:super.currentTime}set currentTime(d){var h;if(W(this,o,l)){W(this,o,l).currentTime=d,(h=W(this,o,l).controller)==null||h.seek();return}super.currentTime=d}},n=new WeakMap,i=new WeakMap,s=new WeakMap,a=new WeakMap,o=new WeakSet,l=function(){var d,h;return(h=(d=ll.get(this.remote))==null?void 0:d.getCastPlayer)==null?void 0:h.call(d)},u=new WeakSet,c=async function(){W(this,n).paused=Hb(r.prototype,this,"paused"),Hb(r.prototype,this,"pause").call(this),this.muted=Hb(r.prototype,this,"muted");try{await this.load()}catch(d){console.error(d)}},Wt(r,"observedAttributes",[...(e=t.observedAttributes)!=null?e:[],"cast-src","cast-content-type","cast-stream-type","cast-receiver"]),r},hv=class extends Event{constructor(e,r){super(e),Wt(this,"track"),this.track=r.track}},lE=new WeakMap;function Ee(t){var e;return(e=lE.get(t))!=null?e:Oae(t,{})}function Oae(t,e){let r=lE.get(t);return r||lE.set(t,r={}),Object.assign(r,e)}function uE(t,e){let r=t.videoTracks;Ee(e).media=t,Ee(e).renditionSet||(Ee(e).renditionSet=new Set);let n=Ee(r).trackSet;n.add(e);let i=n.size-1;i in dE.prototype||Object.defineProperty(dE.prototype,i,{get(){return[...Ee(this).trackSet][i]}}),queueMicrotask(()=>{r.dispatchEvent(new hv("addtrack",{track:e}))})}function cE(t){var e;let r=(e=Ee(t).media)==null?void 0:e.videoTracks;r&&(Ee(r).trackSet.delete(t),queueMicrotask(()=>{r.dispatchEvent(new hv("removetrack",{track:t}))}))}function Mae(t){var e;let r=(e=Ee(t).media.videoTracks)!=null?e:[],n=!1;for(let i of r)i!==t&&(i.selected=!1,n=!0);if(n){if(Ee(r).changeRequested)return;Ee(r).changeRequested=!0,queueMicrotask(()=>{delete Ee(r).changeRequested,r.dispatchEvent(new Event("change"))})}}var _o,To,xo,lu,yd,dE=class extends EventTarget{constructor(){super(),Ie(this,lu),Ie(this,_o,void 0),Ie(this,To,void 0),Ie(this,xo,void 0),Ee(this).trackSet=new Set}[Symbol.iterator](){return W(this,lu,yd).values()}get length(){return W(this,lu,yd).size}getTrackById(t){var e;return(e=[...W(this,lu,yd)].find(r=>r.id===t))!=null?e:null}get selectedIndex(){return[...W(this,lu,yd)].findIndex(t=>t.selected)}get onaddtrack(){return W(this,_o)}set onaddtrack(t){W(this,_o)&&(this.removeEventListener("addtrack",W(this,_o)),Pe(this,_o,void 0)),typeof t=="function"&&(Pe(this,_o,t),this.addEventListener("addtrack",t))}get onremovetrack(){return W(this,To)}set onremovetrack(t){W(this,To)&&(this.removeEventListener("removetrack",W(this,To)),Pe(this,To,void 0)),typeof t=="function"&&(Pe(this,To,t),this.addEventListener("removetrack",t))}get onchange(){return W(this,xo)}set onchange(t){W(this,xo)&&(this.removeEventListener("change",W(this,xo)),Pe(this,xo,void 0)),typeof t=="function"&&(Pe(this,xo,t),this.addEventListener("change",t))}};_o=new WeakMap,To=new WeakMap,xo=new WeakMap,lu=new WeakSet,yd=function(){return Ee(this).trackSet};var fv=class extends Event{constructor(e,r){super(e),Wt(this,"rendition"),this.rendition=r.rendition}};function Pae(t,e){let r=Ee(t).media.videoRenditions;Ee(e).media=Ee(t).media,Ee(e).track=t;let n=Ee(t).renditionSet;n.add(e);let i=n.size-1;i in hE.prototype||Object.defineProperty(hE.prototype,i,{get(){return uu(this)[i]}}),queueMicrotask(()=>{t.selected&&r.dispatchEvent(new fv("addrendition",{rendition:e}))})}function Nae(t){let e=Ee(t).media.videoRenditions,r=Ee(t).track;Ee(r).renditionSet.delete(t),queueMicrotask(()=>{Ee(t).track.selected&&e.dispatchEvent(new fv("removerendition",{rendition:t}))})}function Fae(t){let e=Ee(t).media.videoRenditions;!e||Ee(e).changeRequested||(Ee(e).changeRequested=!0,queueMicrotask(()=>{delete Ee(e).changeRequested,Ee(t).track.selected&&e.dispatchEvent(new Event("change"))}))}function uu(t){return[...Ee(t).media.videoTracks].filter(e=>e.selected).flatMap(e=>[...Ee(e).renditionSet])}var So,wo,Ao,hE=class extends EventTarget{constructor(){super(...arguments),Ie(this,So,void 0),Ie(this,wo,void 0),Ie(this,Ao,void 0)}[Symbol.iterator](){return uu(this).values()}get length(){return uu(this).length}getRenditionById(e){var r;return(r=uu(this).find(n=>`${n.id}`==`${e}`))!=null?r:null}get selectedIndex(){return uu(this).findIndex(e=>e.selected)}set selectedIndex(e){for(let[r,n]of uu(this).entries())n.selected=r===e}get onaddrendition(){return W(this,So)}set onaddrendition(e){W(this,So)&&(this.removeEventListener("addrendition",W(this,So)),Pe(this,So,void 0)),typeof e=="function"&&(Pe(this,So,e),this.addEventListener("addrendition",e))}get onremoverendition(){return W(this,wo)}set onremoverendition(e){W(this,wo)&&(this.removeEventListener("removerendition",W(this,wo)),Pe(this,wo,void 0)),typeof e=="function"&&(Pe(this,wo,e),this.addEventListener("removerendition",e))}get onchange(){return W(this,Ao)}set onchange(e){W(this,Ao)&&(this.removeEventListener("change",W(this,Ao)),Pe(this,Ao,void 0)),typeof e=="function"&&(Pe(this,Ao,e),this.addEventListener("change",e))}};So=new WeakMap,wo=new WeakMap,Ao=new WeakMap;var Ed,$ae=class{constructor(){Wt(this,"src"),Wt(this,"id"),Wt(this,"width"),Wt(this,"height"),Wt(this,"bitrate"),Wt(this,"frameRate"),Wt(this,"codec"),Ie(this,Ed,!1)}get selected(){return W(this,Ed)}set selected(e){W(this,Ed)!==e&&(Pe(this,Ed,e),Fae(this))}};Ed=new WeakMap;var _d,w4=class{constructor(){Wt(this,"id"),Wt(this,"kind"),Wt(this,"label",""),Wt(this,"language",""),Wt(this,"sourceBuffer"),Ie(this,_d,!1)}addRendition(e,r,n,i,s,a){let o=new $ae;return o.src=e,o.width=r,o.height=n,o.frameRate=a,o.bitrate=s,o.codec=i,Pae(this,o),o}removeRendition(e){Nae(e)}get selected(){return W(this,_d)}set selected(e){W(this,_d)!==e&&(Pe(this,_d,e),e===!0&&Mae(this))}};_d=new WeakMap;function Uae(t,e){let r=Ee(t).media.audioRenditions;Ee(e).media=Ee(t).media,Ee(e).track=t;let n=Ee(t).renditionSet;n.add(e);let i=n.size-1;i in fE.prototype||Object.defineProperty(fE.prototype,i,{get(){return cu(this)[i]}}),queueMicrotask(()=>{t.enabled&&r.dispatchEvent(new fv("addrendition",{rendition:e}))})}function Bae(t){let e=Ee(t).media.audioRenditions,r=Ee(t).track;Ee(r).renditionSet.delete(t),queueMicrotask(()=>{Ee(t).track.enabled&&e.dispatchEvent(new fv("removerendition",{rendition:t}))})}function jae(t){let e=Ee(t).media.audioRenditions;!e||Ee(e).changeRequested||(Ee(e).changeRequested=!0,queueMicrotask(()=>{delete Ee(e).changeRequested,Ee(t).track.enabled&&e.dispatchEvent(new Event("change"))}))}function cu(t){return[...Ee(t).media.audioTracks].filter(e=>e.enabled).flatMap(e=>[...Ee(e).renditionSet])}var Ro,Co,Io,fE=class extends EventTarget{constructor(){super(...arguments),Ie(this,Ro,void 0),Ie(this,Co,void 0),Ie(this,Io,void 0)}[Symbol.iterator](){return cu(this).values()}get length(){return cu(this).length}getRenditionById(e){var r;return(r=cu(this).find(n=>`${n.id}`==`${e}`))!=null?r:null}get selectedIndex(){return cu(this).findIndex(e=>e.selected)}set selectedIndex(e){for(let[r,n]of cu(this).entries())n.selected=r===e}get onaddrendition(){return W(this,Ro)}set onaddrendition(e){W(this,Ro)&&(this.removeEventListener("addrendition",W(this,Ro)),Pe(this,Ro,void 0)),typeof e=="function"&&(Pe(this,Ro,e),this.addEventListener("addrendition",e))}get onremoverendition(){return W(this,Co)}set onremoverendition(e){W(this,Co)&&(this.removeEventListener("removerendition",W(this,Co)),Pe(this,Co,void 0)),typeof e=="function"&&(Pe(this,Co,e),this.addEventListener("removerendition",e))}get onchange(){return W(this,Io)}set onchange(e){W(this,Io)&&(this.removeEventListener("change",W(this,Io)),Pe(this,Io,void 0)),typeof e=="function"&&(Pe(this,Io,e),this.addEventListener("change",e))}};Ro=new WeakMap,Co=new WeakMap,Io=new WeakMap;var Td,Hae=class{constructor(){Wt(this,"src"),Wt(this,"id"),Wt(this,"bitrate"),Wt(this,"codec"),Ie(this,Td,!1)}get selected(){return W(this,Td)}set selected(e){W(this,Td)!==e&&(Pe(this,Td,e),jae(this))}};Td=new WeakMap;function pE(t,e){let r=t.audioTracks;Ee(e).media=t,Ee(e).renditionSet||(Ee(e).renditionSet=new Set);let n=Ee(r).trackSet;n.add(e);let i=n.size-1;i in gE.prototype||Object.defineProperty(gE.prototype,i,{get(){return[...Ee(this).trackSet][i]}}),queueMicrotask(()=>{r.dispatchEvent(new hv("addtrack",{track:e}))})}function mE(t){var e;let r=(e=Ee(t).media)==null?void 0:e.audioTracks;r&&(Ee(r).trackSet.delete(t),queueMicrotask(()=>{r.dispatchEvent(new hv("removetrack",{track:t}))}))}function Vae(t){let e=Ee(t).media.audioTracks;!e||Ee(e).changeRequested||(Ee(e).changeRequested=!0,queueMicrotask(()=>{delete Ee(e).changeRequested,e.dispatchEvent(new Event("change"))}))}var ko,Lo,Do,xd,Ap,gE=class extends EventTarget{constructor(){super(),Ie(this,xd),Ie(this,ko,void 0),Ie(this,Lo,void 0),Ie(this,Do,void 0),Ee(this).trackSet=new Set}[Symbol.iterator](){return W(this,xd,Ap).values()}get length(){return W(this,xd,Ap).size}getTrackById(e){var r;return(r=[...W(this,xd,Ap)].find(n=>n.id===e))!=null?r:null}get onaddtrack(){return W(this,ko)}set onaddtrack(e){W(this,ko)&&(this.removeEventListener("addtrack",W(this,ko)),Pe(this,ko,void 0)),typeof e=="function"&&(Pe(this,ko,e),this.addEventListener("addtrack",e))}get onremovetrack(){return W(this,Lo)}set onremovetrack(e){W(this,Lo)&&(this.removeEventListener("removetrack",W(this,Lo)),Pe(this,Lo,void 0)),typeof e=="function"&&(Pe(this,Lo,e),this.addEventListener("removetrack",e))}get onchange(){return W(this,Do)}set onchange(e){W(this,Do)&&(this.removeEventListener("change",W(this,Do)),Pe(this,Do,void 0)),typeof e=="function"&&(Pe(this,Do,e),this.addEventListener("change",e))}};ko=new WeakMap,Lo=new WeakMap,Do=new WeakMap,xd=new WeakSet,Ap=function(){return Ee(this).trackSet};var Sd,A4=class{constructor(){Wt(this,"id"),Wt(this,"kind"),Wt(this,"label",""),Wt(this,"language",""),Wt(this,"sourceBuffer"),Ie(this,Sd,!1)}addRendition(e,r,n){let i=new Hae;return i.src=e,i.codec=r,i.bitrate=n,Uae(this,i),i}removeRendition(e){Bae(e)}get enabled(){return W(this,Sd)}set enabled(e){W(this,Sd)!==e&&(Pe(this,Sd,e),Vae(this))}};Sd=new WeakMap;var ck=lg(globalThis.HTMLMediaElement,"video"),dk=lg(globalThis.HTMLMediaElement,"audio");function Wae(t){if(!(t!=null&&t.prototype))return t;let e=lg(t,"video");(!e||`${e}`.includes("[native code]"))&&Object.defineProperty(t.prototype,"videoTracks",{get(){return Gae(this)}});let r=lg(t,"audio");(!r||`${r}`.includes("[native code]"))&&Object.defineProperty(t.prototype,"audioTracks",{get(){return Kae(this)}}),"addVideoTrack"in t.prototype||(t.prototype.addVideoTrack=function(s,a="",o=""){let l=new w4;return l.kind=s,l.label=a,l.language=o,uE(this,l),l}),"removeVideoTrack"in t.prototype||(t.prototype.removeVideoTrack=cE),"addAudioTrack"in t.prototype||(t.prototype.addAudioTrack=function(s,a="",o=""){let l=new A4;return l.kind=s,l.label=a,l.language=o,pE(this,l),l}),"removeAudioTrack"in t.prototype||(t.prototype.removeAudioTrack=mE),"videoRenditions"in t.prototype||Object.defineProperty(t.prototype,"videoRenditions",{get(){return n(this)}});let n=s=>{let a=Ee(s).videoRenditions;return a||(a=new hE,Ee(a).media=s,Ee(s).videoRenditions=a),a};"audioRenditions"in t.prototype||Object.defineProperty(t.prototype,"audioRenditions",{get(){return i(this)}});let i=s=>{let a=Ee(s).audioRenditions;return a||(a=new fE,Ee(a).media=s,Ee(s).audioRenditions=a),a};return t}function lg(t,e){var r;if(t!=null&&t.prototype)return(r=Object.getOwnPropertyDescriptor(t.prototype,`${e}Tracks`))==null?void 0:r.get}function Gae(t){var e;let r=Ee(t).videoTracks;if(!r&&(r=new dE,Ee(t).videoTracks=r,ck)){let n=ck.call((e=t.nativeEl)!=null?e:t);for(let i of n)uE(t,i);n.addEventListener("change",()=>{r.dispatchEvent(new Event("change"))}),n.addEventListener("addtrack",i=>{if([...r].some(s=>s instanceof w4)){for(let s of n)cE(s);return}uE(t,i.track)}),n.addEventListener("removetrack",i=>{cE(i.track)})}return r}function Kae(t){var e;let r=Ee(t).audioTracks;if(!r&&(r=new gE,Ee(t).audioTracks=r,dk)){let n=dk.call((e=t.nativeEl)!=null?e:t);for(let i of n)pE(t,i);n.addEventListener("change",()=>{r.dispatchEvent(new Event("change"))}),n.addEventListener("addtrack",i=>{if([...r].some(s=>s instanceof A4)){for(let s of n)mE(s);return}pE(t,i.track)}),n.addEventListener("removetrack",i=>{mE(i.track)})}return r}xS.push("castchange","entercast","leavecast");var ee={BEACON_COLLECTION_DOMAIN:"beacon-collection-domain",CUSTOM_DOMAIN:"custom-domain",DEBUG:"debug",DISABLE_TRACKING:"disable-tracking",DISABLE_COOKIES:"disable-cookies",DRM_TOKEN:"drm-token",PLAYBACK_TOKEN:"playback-token",ENV_KEY:"env-key",MAX_RESOLUTION:"max-resolution",MIN_RESOLUTION:"min-resolution",RENDITION_ORDER:"rendition-order",PROGRAM_START_TIME:"program-start-time",PROGRAM_END_TIME:"program-end-time",ASSET_START_TIME:"asset-start-time",ASSET_END_TIME:"asset-end-time",METADATA_URL:"metadata-url",PLAYBACK_ID:"playback-id",PLAYER_SOFTWARE_NAME:"player-software-name",PLAYER_SOFTWARE_VERSION:"player-software-version",PREFER_CMCD:"prefer-cmcd",PREFER_PLAYBACK:"prefer-playback",START_TIME:"start-time",STREAM_TYPE:"stream-type",TARGET_LIVE_WINDOW:"target-live-window",LIVE_EDGE_OFFSET:"live-edge-offset",TYPE:"type"},qae=Object.values(ee),zae=yae(),Yae="mux-video",rs,wd,Rp,Ad,Cp,Ip,kp,Lp,Dp,Rd,Op,Xae=class extends Wb{constructor(){super(),Ie(this,Rd),Ie(this,rs,void 0),Ie(this,wd,void 0),Ie(this,Rp,void 0),Ie(this,Ad,{}),Ie(this,Cp,{}),Ie(this,Ip,void 0),Ie(this,kp,void 0),Ie(this,Lp,void 0),Ie(this,Dp,void 0),Pe(this,Rp,Tne())}static get observedAttributes(){var e;return[...qae,...(e=Wb.observedAttributes)!=null?e:[]]}get preferCmcd(){var e;return(e=this.getAttribute(ee.PREFER_CMCD))!=null?e:void 0}set preferCmcd(e){e!==this.preferCmcd&&(e?qm.includes(e)?this.setAttribute(ee.PREFER_CMCD,e):console.warn(`Invalid value for preferCmcd. Must be one of ${qm.join()}`):this.removeAttribute(ee.PREFER_CMCD))}get playerInitTime(){return W(this,Rp)}get playerSoftwareName(){var e;return(e=W(this,Lp))!=null?e:Yae}set playerSoftwareName(e){Pe(this,Lp,e)}get playerSoftwareVersion(){var e;return(e=W(this,kp))!=null?e:zae}set playerSoftwareVersion(e){Pe(this,kp,e)}get _hls(){var e;return(e=W(this,rs))==null?void 0:e.engine}get mux(){var e;return(e=this.nativeEl)==null?void 0:e.mux}get error(){var e;return(e=FN(this.nativeEl))!=null?e:null}get errorTranslator(){return W(this,Dp)}set errorTranslator(e){Pe(this,Dp,e)}get src(){return this.getAttribute("src")}set src(e){e!==this.src&&(e==null?this.removeAttribute("src"):this.setAttribute("src",e))}get type(){var e;return(e=this.getAttribute(ee.TYPE))!=null?e:void 0}set type(e){e!==this.type&&(e?this.setAttribute(ee.TYPE,e):this.removeAttribute(ee.TYPE))}get autoplay(){let e=this.getAttribute("autoplay");return e===null?!1:e===""?!0:e}set autoplay(e){let r=this.autoplay;e!==r&&(e?this.setAttribute("autoplay",typeof e=="string"?e:""):this.removeAttribute("autoplay"))}get preload(){let e=this.getAttribute("preload");return e===""?"auto":["none","metadata","auto"].includes(e)?e:super.preload}set preload(e){e!=this.getAttribute("preload")&&(["","none","metadata","auto"].includes(e)?this.setAttribute("preload",e):this.removeAttribute("preload"))}get debug(){return this.getAttribute(ee.DEBUG)!=null}set debug(e){e!==this.debug&&(e?this.setAttribute(ee.DEBUG,""):this.removeAttribute(ee.DEBUG))}get disableTracking(){return this.hasAttribute(ee.DISABLE_TRACKING)}set disableTracking(e){e!==this.disableTracking&&this.toggleAttribute(ee.DISABLE_TRACKING,!!e)}get disableCookies(){return this.hasAttribute(ee.DISABLE_COOKIES)}set disableCookies(e){e!==this.disableCookies&&(e?this.setAttribute(ee.DISABLE_COOKIES,""):this.removeAttribute(ee.DISABLE_COOKIES))}get startTime(){let e=this.getAttribute(ee.START_TIME);if(e==null)return;let r=+e;return Number.isNaN(r)?void 0:r}set startTime(e){e!==this.startTime&&(e==null?this.removeAttribute(ee.START_TIME):this.setAttribute(ee.START_TIME,`${e}`))}get playbackId(){var e;return this.hasAttribute(ee.PLAYBACK_ID)?this.getAttribute(ee.PLAYBACK_ID):(e=NN(this.src))!=null?e:void 0}set playbackId(e){e!==this.playbackId&&(e?this.setAttribute(ee.PLAYBACK_ID,e):this.removeAttribute(ee.PLAYBACK_ID))}get maxResolution(){var e;return(e=this.getAttribute(ee.MAX_RESOLUTION))!=null?e:void 0}set maxResolution(e){e!==this.maxResolution&&(e?this.setAttribute(ee.MAX_RESOLUTION,e):this.removeAttribute(ee.MAX_RESOLUTION))}get minResolution(){var e;return(e=this.getAttribute(ee.MIN_RESOLUTION))!=null?e:void 0}set minResolution(e){e!==this.minResolution&&(e?this.setAttribute(ee.MIN_RESOLUTION,e):this.removeAttribute(ee.MIN_RESOLUTION))}get renditionOrder(){var e;return(e=this.getAttribute(ee.RENDITION_ORDER))!=null?e:void 0}set renditionOrder(e){e!==this.renditionOrder&&(e?this.setAttribute(ee.RENDITION_ORDER,e):this.removeAttribute(ee.RENDITION_ORDER))}get programStartTime(){let e=this.getAttribute(ee.PROGRAM_START_TIME);if(e==null)return;let r=+e;return Number.isNaN(r)?void 0:r}set programStartTime(e){e==null?this.removeAttribute(ee.PROGRAM_START_TIME):this.setAttribute(ee.PROGRAM_START_TIME,`${e}`)}get programEndTime(){let e=this.getAttribute(ee.PROGRAM_END_TIME);if(e==null)return;let r=+e;return Number.isNaN(r)?void 0:r}set programEndTime(e){e==null?this.removeAttribute(ee.PROGRAM_END_TIME):this.setAttribute(ee.PROGRAM_END_TIME,`${e}`)}get assetStartTime(){let e=this.getAttribute(ee.ASSET_START_TIME);if(e==null)return;let r=+e;return Number.isNaN(r)?void 0:r}set assetStartTime(e){e==null?this.removeAttribute(ee.ASSET_START_TIME):this.setAttribute(ee.ASSET_START_TIME,`${e}`)}get assetEndTime(){let e=this.getAttribute(ee.ASSET_END_TIME);if(e==null)return;let r=+e;return Number.isNaN(r)?void 0:r}set assetEndTime(e){e==null?this.removeAttribute(ee.ASSET_END_TIME):this.setAttribute(ee.ASSET_END_TIME,`${e}`)}get customDomain(){var e;return(e=this.getAttribute(ee.CUSTOM_DOMAIN))!=null?e:void 0}set customDomain(e){e!==this.customDomain&&(e?this.setAttribute(ee.CUSTOM_DOMAIN,e):this.removeAttribute(ee.CUSTOM_DOMAIN))}get drmToken(){var e;return(e=this.getAttribute(ee.DRM_TOKEN))!=null?e:void 0}set drmToken(e){e!==this.drmToken&&(e?this.setAttribute(ee.DRM_TOKEN,e):this.removeAttribute(ee.DRM_TOKEN))}get playbackToken(){var e,r,n,i;if(this.hasAttribute(ee.PLAYBACK_TOKEN))return(e=this.getAttribute(ee.PLAYBACK_TOKEN))!=null?e:void 0;if(this.hasAttribute(ee.PLAYBACK_ID)){let[,s]=Xx((r=this.playbackId)!=null?r:"");return(n=new URLSearchParams(s).get("token"))!=null?n:void 0}if(this.src)return(i=new URLSearchParams(this.src).get("token"))!=null?i:void 0}set playbackToken(e){e!==this.playbackToken&&(e?this.setAttribute(ee.PLAYBACK_TOKEN,e):this.removeAttribute(ee.PLAYBACK_TOKEN))}get tokens(){let e=this.getAttribute(ee.PLAYBACK_TOKEN),r=this.getAttribute(ee.DRM_TOKEN);return{...W(this,Cp),...e!=null?{playback:e}:{},...r!=null?{drm:r}:{}}}set tokens(e){Pe(this,Cp,e??{})}get ended(){return BN(this.nativeEl,this._hls)}get envKey(){var e;return(e=this.getAttribute(ee.ENV_KEY))!=null?e:void 0}set envKey(e){e!==this.envKey&&(e?this.setAttribute(ee.ENV_KEY,e):this.removeAttribute(ee.ENV_KEY))}get beaconCollectionDomain(){var e;return(e=this.getAttribute(ee.BEACON_COLLECTION_DOMAIN))!=null?e:void 0}set beaconCollectionDomain(e){e!==this.beaconCollectionDomain&&(e?this.setAttribute(ee.BEACON_COLLECTION_DOMAIN,e):this.removeAttribute(ee.BEACON_COLLECTION_DOMAIN))}get streamType(){var e;return(e=this.getAttribute(ee.STREAM_TYPE))!=null?e:D1(this.nativeEl)}set streamType(e){e!==this.streamType&&(e?this.setAttribute(ee.STREAM_TYPE,e):this.removeAttribute(ee.STREAM_TYPE))}get targetLiveWindow(){return this.hasAttribute(ee.TARGET_LIVE_WINDOW)?+this.getAttribute(ee.TARGET_LIVE_WINDOW):wne(this.nativeEl)}set targetLiveWindow(e){e!=this.targetLiveWindow&&(e==null?this.removeAttribute(ee.TARGET_LIVE_WINDOW):this.setAttribute(ee.TARGET_LIVE_WINDOW,`${+e}`))}get liveEdgeStart(){var e,r;if(this.hasAttribute(ee.LIVE_EDGE_OFFSET)){let{liveEdgeOffset:n}=this,i=(e=this.nativeEl.seekable.end(0))!=null?e:0,s=(r=this.nativeEl.seekable.start(0))!=null?r:0;return Math.max(s,i-n)}return Ane(this.nativeEl)}get liveEdgeOffset(){if(this.hasAttribute(ee.LIVE_EDGE_OFFSET))return+this.getAttribute(ee.LIVE_EDGE_OFFSET)}set liveEdgeOffset(e){e!=this.targetLiveWindow&&(e==null?this.removeAttribute(ee.LIVE_EDGE_OFFSET):this.setAttribute(ee.LIVE_EDGE_OFFSET,`${+e}`))}get seekable(){return eS(this.nativeEl)}async addCuePoints(e){return kN(this.nativeEl,e)}get activeCuePoint(){return LN(this.nativeEl)}get cuePoints(){return nne(this.nativeEl)}async addChapters(e){return ON(this.nativeEl,e)}get activeChapter(){return MN(this.nativeEl)}get chapters(){return sne(this.nativeEl)}getStartDate(){return one(this.nativeEl,this._hls)}get currentPdt(){return lne(this.nativeEl,this._hls)}get preferPlayback(){let e=this.getAttribute(ee.PREFER_PLAYBACK);if(e===ps.MSE||e===ps.NATIVE)return e}set preferPlayback(e){e!==this.preferPlayback&&(e===ps.MSE||e===ps.NATIVE?this.setAttribute(ee.PREFER_PLAYBACK,e):this.removeAttribute(ee.PREFER_PLAYBACK))}get metadata(){return{...this.getAttributeNames().filter(e=>e.startsWith("metadata-")&&![ee.METADATA_URL].includes(e)).reduce((e,r)=>{let n=this.getAttribute(r);return n!=null&&(e[r.replace(/^metadata-/,"").replace(/-/g,"_")]=n),e},{}),...W(this,Ad)}}set metadata(e){Pe(this,Ad,e??{}),this.mux&&this.mux.emit("hb",W(this,Ad))}get _hlsConfig(){return W(this,Ip)}set _hlsConfig(e){Pe(this,Ip,e)}load(){Pe(this,rs,Ine(this,this.nativeEl,W(this,rs)))}unload(){jN(this.nativeEl,W(this,rs)),Pe(this,rs,void 0)}attributeChangedCallback(e,r,n){var i,s;switch(Wb.observedAttributes.includes(e)&&!["src","autoplay","preload"].includes(e)&&super.attributeChangedCallback(e,r,n),e){case ee.PLAYER_SOFTWARE_NAME:this.playerSoftwareName=n??void 0;break;case ee.PLAYER_SOFTWARE_VERSION:this.playerSoftwareVersion=n??void 0;break;case"src":{let a=!!r,o=!!n;!a&&o?rr(this,Rd,Op).call(this):a&&!o?this.unload():a&&o&&(this.unload(),rr(this,Rd,Op).call(this));break}case"autoplay":if(n===r)break;(i=W(this,rs))==null||i.setAutoplay(this.autoplay);break;case"preload":if(n===r)break;(s=W(this,rs))==null||s.setPreload(n);break;case ee.PLAYBACK_ID:this.src=L1(this);break;case ee.DEBUG:{let a=this.debug;this.mux&&console.info("Cannot toggle debug mode of mux data after initialization. Make sure you set all metadata to override before setting the src."),this._hls&&(this._hls.config.debug=a);break}case ee.METADATA_URL:n&&fetch(n).then(a=>a.json()).then(a=>this.metadata=a).catch(()=>console.error(`Unable to load or parse metadata JSON from metadata-url ${n}!`));break;case ee.STREAM_TYPE:(n==null||n!==r)&&this.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}));break;case ee.TARGET_LIVE_WINDOW:(n==null||n!==r)&&this.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0,detail:this.targetLiveWindow}));break}}connectedCallback(){var e;(e=super.connectedCallback)==null||e.call(this),this.nativeEl&&this.src&&!W(this,rs)&&rr(this,Rd,Op).call(this)}disconnectedCallback(){this.unload()}};rs=new WeakMap,wd=new WeakMap,Rp=new WeakMap,Ad=new WeakMap,Cp=new WeakMap,Ip=new WeakMap,kp=new WeakMap,Lp=new WeakMap,Dp=new WeakMap,Rd=new WeakSet,Op=async function(){W(this,wd)||(await Pe(this,wd,Promise.resolve()),Pe(this,wd,null),this.load())};var Mp,vE=class extends Dae(Wae(Xae)){constructor(){super(...arguments),Ie(this,Mp,void 0)}get muxCastCustomData(){return{mux:{playbackId:this.playbackId,minResolution:this.minResolution,maxResolution:this.maxResolution,renditionOrder:this.renditionOrder,customDomain:this.customDomain,tokens:{drm:this.drmToken},envKey:this.envKey,metadata:this.metadata,disableCookies:this.disableCookies,disableTracking:this.disableTracking,beaconCollectionDomain:this.beaconCollectionDomain,startTime:this.startTime,preferCmcd:this.preferCmcd}}}get castCustomData(){var e;return(e=W(this,Mp))!=null?e:this.muxCastCustomData}set castCustomData(e){Pe(this,Mp,e)}};Mp=new WeakMap;Vb.customElements.get("mux-video")||(Vb.customElements.define("mux-video",vE),Vb.MuxVideoElement=vE);var Zae=vE,R4=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},tt=(t,e,r)=>(R4(t,e,"read from private field"),r?r.call(t):e.get(t)),us=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Gs=(t,e,r,n)=>(R4(t,e,"write to private field"),e.set(t,r),r),du,Pp,Oo,Cd,ya,Ea,_a,Mo,hu,Np,wi;const hk=1,fk=0,Qae=1,Jae={processCallback(t,e,r){if(r){for(const[n,i]of e)if(n in r){const s=r[n];typeof s=="boolean"&&i instanceof Pi&&typeof i.element[i.attributeName]=="boolean"?i.booleanValue=s:typeof s=="function"&&i instanceof Pi?i.element[i.attributeName]=s:i.value=s}}}};class pv extends K.DocumentFragment{constructor(e,r,n=Jae){var i;super(),us(this,du,void 0),us(this,Pp,void 0),this.append(e.content.cloneNode(!0)),Gs(this,du,C4(this)),Gs(this,Pp,n),(i=n.createCallback)==null||i.call(n,this,tt(this,du),r),n.processCallback(this,tt(this,du),r)}update(e){tt(this,Pp).processCallback(this,tt(this,du),e)}}du=new WeakMap;Pp=new WeakMap;const C4=(t,e=[])=>{let r,n;for(const i of t.attributes||[])if(i.value.includes("{{")){const s=new toe;for([r,n]of mk(i.value))if(!r)s.append(n);else{const a=new Pi(t,i.name,i.namespaceURI);s.append(a),e.push([n,a])}i.value=s.toString()}for(const i of t.childNodes)if(i.nodeType===hk&&!(i instanceof HTMLTemplateElement))C4(i,e);else{const s=i.data;if(i.nodeType===hk||s.includes("{{")){const a=[];if(s)for([r,n]of mk(s))if(!r)a.push(new Text(n));else{const o=new Sc(t);a.push(o),e.push([n,o])}else if(i instanceof HTMLTemplateElement){const o=new L4(t,i);a.push(o),e.push([o.expression,o])}i.replaceWith(...a.flatMap(o=>o.replacementNodes||[o]))}}return e},pk={},mk=t=>{let e="",r=0,n=pk[t],i=0,s;if(n)return n;for(n=[];s=t[i];i++)s==="{"&&t[i+1]==="{"&&t[i-1]!=="\\"&&t[i+2]&&++r==1?(e&&n.push([fk,e]),e="",i++):s==="}"&&t[i+1]==="}"&&t[i-1]!=="\\"&&!--r?(n.push([Qae,e.trim()]),e="",i++):e+=s||"";return e&&n.push([fk,(r>0?"{{":"")+e]),pk[t]=n},eoe=11;class I4{get value(){return""}set value(e){}toString(){return this.value}}const k4=new WeakMap;class toe{constructor(){us(this,Oo,[])}[Symbol.iterator](){return tt(this,Oo).values()}get length(){return tt(this,Oo).length}item(e){return tt(this,Oo)[e]}append(...e){for(const r of e)r instanceof Pi&&k4.set(r,this),tt(this,Oo).push(r)}toString(){return tt(this,Oo).join("")}}Oo=new WeakMap;class Pi extends I4{constructor(e,r,n){super(),us(this,Mo),us(this,Cd,""),us(this,ya,void 0),us(this,Ea,void 0),us(this,_a,void 0),Gs(this,ya,e),Gs(this,Ea,r),Gs(this,_a,n)}get attributeName(){return tt(this,Ea)}get attributeNamespace(){return tt(this,_a)}get element(){return tt(this,ya)}get value(){return tt(this,Cd)}set value(e){tt(this,Cd)!==e&&(Gs(this,Cd,e),!tt(this,Mo,hu)||tt(this,Mo,hu).length===1?e==null?tt(this,ya).removeAttributeNS(tt(this,_a),tt(this,Ea)):tt(this,ya).setAttributeNS(tt(this,_a),tt(this,Ea),e):tt(this,ya).setAttributeNS(tt(this,_a),tt(this,Ea),tt(this,Mo,hu).toString()))}get booleanValue(){return tt(this,ya).hasAttributeNS(tt(this,_a),tt(this,Ea))}set booleanValue(e){if(!tt(this,Mo,hu)||tt(this,Mo,hu).length===1)this.value=e?"":null;else throw new DOMException("Value is not fully templatized")}}Cd=new WeakMap;ya=new WeakMap;Ea=new WeakMap;_a=new WeakMap;Mo=new WeakSet;hu=function(){return k4.get(this)};class Sc extends I4{constructor(e,r){super(),us(this,Np,void 0),us(this,wi,void 0),Gs(this,Np,e),Gs(this,wi,r?[...r]:[new Text])}get replacementNodes(){return tt(this,wi)}get parentNode(){return tt(this,Np)}get nextSibling(){return tt(this,wi)[tt(this,wi).length-1].nextSibling}get previousSibling(){return tt(this,wi)[0].previousSibling}get value(){return tt(this,wi).map(e=>e.textContent).join("")}set value(e){this.replace(e)}replace(...e){const r=e.flat().flatMap(n=>n==null?[new Text]:n.forEach?[...n]:n.nodeType===eoe?[...n.childNodes]:n.nodeType?[n]:[new Text(n)]);r.length||r.push(new Text),Gs(this,wi,roe(tt(this,wi)[0].parentNode,tt(this,wi),r,this.nextSibling))}}Np=new WeakMap;wi=new WeakMap;class L4 extends Sc{constructor(e,r){const n=r.getAttribute("directive")||r.getAttribute("type");let i=r.getAttribute("expression")||r.getAttribute(n)||"";i.startsWith("{{")&&(i=i.trim().slice(2,-2).trim()),super(e),this.expression=i,this.template=r,this.directive=n}}function roe(t,e,r,n=null){let i=0,s,a,o,l=r.length,u=e.length;for(;i<l&&i<u&&e[i]==r[i];)i++;for(;i<l&&i<u&&r[l-1]==e[u-1];)n=r[--u,--l];if(i==u)for(;i<l;)t.insertBefore(r[i++],n);if(i==l)for(;i<u;)t.removeChild(e[i++]);else{for(s=e[i];i<l;)o=r[i++],a=s?s.nextSibling:n,s==o?s=a:i<l&&r[i]==a?(t.replaceChild(o,s),s=a):t.insertBefore(o,s);for(;s!=n;)a=s.nextSibling,t.removeChild(s),s=a}return r}const gk={string:t=>String(t)};class D4{constructor(e){this.template=e,this.state=void 0}}const Qo=new WeakMap,Jo=new WeakMap,bE={partial:(t,e)=>{e[t.expression]=new D4(t.template)},if:(t,e)=>{var r;if(O4(t.expression,e))if(Qo.get(t)!==t.template){Qo.set(t,t.template);const n=new pv(t.template,e,AS);t.replace(n),Jo.set(t,n)}else(r=Jo.get(t))==null||r.update(e);else t.replace(""),Qo.delete(t),Jo.delete(t)}},noe=Object.keys(bE),AS={processCallback(t,e,r){var n,i;if(r)for(const[s,a]of e){if(a instanceof L4){if(!a.directive){const l=noe.find(u=>a.template.hasAttribute(u));l&&(a.directive=l,a.expression=a.template.getAttribute(l))}(n=bE[a.directive])==null||n.call(bE,a,r);continue}let o=O4(s,r);if(o instanceof D4){Qo.get(a)!==o.template?(Qo.set(a,o.template),o=new pv(o.template,o.state,AS),a.value=o,Jo.set(a,o)):(i=Jo.get(a))==null||i.update(o.state);continue}o?(a instanceof Pi&&a.attributeName.startsWith("aria-")&&(o=String(o)),a instanceof Pi?typeof o=="boolean"?a.booleanValue=o:typeof o=="function"?a.element[a.attributeName]=o:a.value=o:(a.value=o,Qo.delete(a),Jo.delete(a))):a instanceof Pi?a.value=void 0:(a.value=void 0,Qo.delete(a),Jo.delete(a))}}},vk={"!":t=>!t,"!!":t=>!!t,"==":(t,e)=>t==e,"!=":(t,e)=>t!=e,">":(t,e)=>t>e,">=":(t,e)=>t>=e,"<":(t,e)=>t<e,"<=":(t,e)=>t<=e,"??":(t,e)=>t??e,"|":(t,e)=>{var r;return(r=gk[e])==null?void 0:r.call(gk,t)}};function ioe(t){return soe(t,{boolean:/true|false/,number:/-?\d+\.?\d*/,string:/(["'])((?:\\.|[^\\])*?)\1/,operator:/[!=><][=!]?|\?\?|\|/,ws:/\s+/,param:/[$a-z_][$\w]*/i}).filter(({type:e})=>e!=="ws")}function O4(t,e={}){var r,n,i,s,a,o,l;const u=ioe(t);if(u.length===0||u.some(({type:c})=>!c))return Wc(t);if(((r=u[0])==null?void 0:r.token)===">"){const c=e[(n=u[1])==null?void 0:n.token];if(!c)return Wc(t);const d={...e};c.state=d;const h=u.slice(2);for(let f=0;f<h.length;f+=3){const p=(i=h[f])==null?void 0:i.token,m=(s=h[f+1])==null?void 0:s.token,g=(a=h[f+2])==null?void 0:a.token;p&&m==="="&&(d[p]=Gc(g,e))}return c}if(u.length===1)return Yf(u[0])?Gc(u[0].token,e):Wc(t);if(u.length===2){const c=(o=u[0])==null?void 0:o.token,d=vk[c];if(!d||!Yf(u[1]))return Wc(t);const h=Gc(u[1].token,e);return d(h)}if(u.length===3){const c=(l=u[1])==null?void 0:l.token,d=vk[c];if(!d||!Yf(u[0])||!Yf(u[2]))return Wc(t);const h=Gc(u[0].token,e);if(c==="|")return d(h,u[2].token);const f=Gc(u[2].token,e);return d(h,f)}}function Wc(t){return console.warn(`Warning: invalid expression \`${t}\``),!1}function Yf({type:t}){return["number","boolean","string","param"].includes(t)}function Gc(t,e){const r=t[0],n=t.slice(-1);return t==="true"||t==="false"?t==="true":r===n&&["'",'"'].includes(r)?t.slice(1,-1):YN(t)?parseFloat(t):e[t]}function soe(t,e){let r,n,i;const s=[];for(;t;){i=null,r=t.length;for(const a in e)n=e[a].exec(t),n&&n.index<r&&(i={token:n[0],type:a,matches:n.slice(1)},r=n.index);r&&s.push({token:t.substr(0,r),type:void 0}),i&&s.push(i),t=t.substr(r+(i?i.token.length:0))}return s}var RS=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},yE=(t,e,r)=>(RS(t,e,"read from private field"),r?r.call(t):e.get(t)),Kc=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},el=(t,e,r,n)=>(RS(t,e,"write to private field"),e.set(t,r),r),qb=(t,e,r)=>(RS(t,e,"access private method"),r),ju,Fp,Hu,EE,M4,$p,_E;const zb={mediatargetlivewindow:"targetlivewindow",mediastreamtype:"streamtype"},P4=Fe.createElement("template");P4.innerHTML=`
  <style>
    :host {
      display: inline-block;
      line-height: 0;

      /* Hide theme element until the breakpoints are available to avoid flicker. */
      visibility: hidden;
    }

    media-controller {
      width: 100%;
      height: 100%;
    }

    media-captions-button:not([mediasubtitleslist]),
    media-captions-menu:not([mediasubtitleslist]),
    media-captions-menu-button:not([mediasubtitleslist]),
    media-audio-track-menu[mediaaudiotrackunavailable],
    media-audio-track-menu-button[mediaaudiotrackunavailable],
    media-rendition-menu[mediarenditionunavailable],
    media-rendition-menu-button[mediarenditionunavailable],
    media-volume-range[mediavolumeunavailable],
    media-airplay-button[mediaairplayunavailable],
    media-fullscreen-button[mediafullscreenunavailable],
    media-cast-button[mediacastunavailable],
    media-pip-button[mediapipunavailable] {
      display: none;
    }
  </style>
`;class mv extends K.HTMLElement{constructor(){super(),Kc(this,EE),Kc(this,$p),Kc(this,ju,void 0),Kc(this,Fp,void 0),Kc(this,Hu,void 0),this.shadowRoot?this.renderRoot=this.shadowRoot:(this.renderRoot=this.attachShadow({mode:"open"}),this.createRenderer());const e=new MutationObserver(r=>{var n;this.mediaController&&!((n=this.mediaController)!=null&&n.breakpointsComputed)||r.some(i=>{const s=i.target;return s===this?!0:s.localName!=="media-controller"?!1:!!(zb[i.attributeName]||i.attributeName.startsWith("breakpoint"))})&&this.render()});e.observe(this,{attributes:!0}),e.observe(this.renderRoot,{attributes:!0,subtree:!0}),this.addEventListener(Tl.BREAKPOINTS_COMPUTED,this.render),qb(this,EE,M4).call(this,"template")}get mediaController(){return this.renderRoot.querySelector("media-controller")}get template(){var e;return(e=yE(this,ju))!=null?e:this.constructor.template}set template(e){el(this,Hu,null),el(this,ju,e),this.createRenderer()}get props(){var e,r,n;const i=[...Array.from((r=(e=this.mediaController)==null?void 0:e.attributes)!=null?r:[]).filter(({name:a})=>zb[a]||a.startsWith("breakpoint")),...Array.from(this.attributes)],s={};for(const a of i){const o=(n=zb[a.name])!=null?n:Xne(a.name);let{value:l}=a;l!=null?(YN(l)&&(l=parseFloat(l)),s[o]=l===""?!0:l):s[o]=!1}return s}attributeChangedCallback(e,r,n){e==="template"&&r!=n&&qb(this,$p,_E).call(this)}connectedCallback(){qb(this,$p,_E).call(this)}createRenderer(){this.template&&this.template!==yE(this,Fp)&&(el(this,Fp,this.template),this.renderer=new pv(this.template,this.props,this.constructor.processor),this.renderRoot.textContent="",this.renderRoot.append(P4.content.cloneNode(!0),this.renderer))}render(){var e;if((e=this.renderer)==null||e.update(this.props),this.renderRoot.isConnected){const{style:r}=Ar(this.renderRoot,":host");r.visibility==="hidden"&&r.removeProperty("visibility")}}}ju=new WeakMap;Fp=new WeakMap;Hu=new WeakMap;EE=new WeakSet;M4=function(t){if(Object.prototype.hasOwnProperty.call(this,t)){const e=this[t];delete this[t],this[t]=e}};$p=new WeakSet;_E=function(){var t;const e=this.getAttribute("template");if(!e||e===yE(this,Hu))return;const r=this.getRootNode(),n=(t=r==null?void 0:r.getElementById)==null?void 0:t.call(r,e);if(n){el(this,Hu,e),el(this,ju,n),this.createRenderer();return}aoe(e)&&(el(this,Hu,e),ooe(e).then(i=>{const s=Fe.createElement("template");s.innerHTML=i,el(this,ju,s),this.createRenderer()}).catch(console.error))};mv.observedAttributes=["template"];mv.processor=AS;function aoe(t){if(!/^(\/|\.\/|https?:\/\/)/.test(t))return!1;const e=/^https?:\/\//.test(t)?void 0:location.origin;try{new URL(t,e)}catch{return!1}return!0}async function ooe(t){const e=await fetch(t);if(e.status!==200)throw new Error(`Failed to load resource: the server responded with a status of ${e.status}`);return e.text()}K.customElements.get("media-theme")||K.customElements.define("media-theme",mv);function loe({anchor:t,floating:e,placement:r}){const n=uoe({anchor:t,floating:e}),{x:i,y:s}=doe(n,r);return{x:i,y:s}}function uoe({anchor:t,floating:e}){return{anchor:coe(t,e.offsetParent),floating:{x:0,y:0,width:e.offsetWidth,height:e.offsetHeight}}}function coe(t,e){var r;const n=t.getBoundingClientRect(),i=(r=e==null?void 0:e.getBoundingClientRect())!=null?r:{x:0,y:0};return{x:n.x-i.x,y:n.y-i.y,width:n.width,height:n.height}}function doe({anchor:t,floating:e},r){const n=hoe(r)==="x"?"y":"x",i=n==="y"?"height":"width",s=N4(r),a=t.x+t.width/2-e.width/2,o=t.y+t.height/2-e.height/2,l=t[i]/2-e[i]/2;let u;switch(s){case"top":u={x:a,y:t.y-e.height};break;case"bottom":u={x:a,y:t.y+t.height};break;case"right":u={x:t.x+t.width,y:o};break;case"left":u={x:t.x-e.width,y:o};break;default:u={x:t.x,y:t.y}}switch(r.split("-")[1]){case"start":u[n]-=l;break;case"end":u[n]+=l;break}return u}function N4(t){return t.split("-")[0]}function hoe(t){return["top","bottom"].includes(N4(t))?"y":"x"}class CS extends Event{constructor({action:e="auto",relatedTarget:r,...n}){super("invoke",n),this.action=e,this.relatedTarget=r}}class foe extends Event{constructor({newState:e,oldState:r,...n}){super("toggle",n),this.newState=e,this.oldState=r}}var IS=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Tt=(t,e,r)=>(IS(t,e,"read from private field"),r?r.call(t):e.get(t)),Ht=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},ns=(t,e,r,n)=>(IS(t,e,"write to private field"),e.set(t,r),r),Yt=(t,e,r)=>(IS(t,e,"access private method"),r),is,ul,Ja,Up,Bp,cl,wh,TE,F4,ug,jp,xE,SE,$4,wE,U4,AE,B4,Vu,Wu,Gu,Ah,cg,kS,RE,j4,LS,H4,CE,V4,DS,W4,IE,G4,kE,K4,Zd,dg,LE,q4,Qd,hg,Hp,DE;function oc({type:t,text:e,value:r,checked:n}){const i=Fe.createElement("media-chrome-menu-item");i.type=t??"",i.part.add("menu-item"),t&&i.part.add(t),i.value=r,i.checked=n;const s=Fe.createElement("span");return s.textContent=e,i.append(s),i}function dl(t,e){let r=t.querySelector(`:scope > [slot="${e}"]`);if((r==null?void 0:r.nodeName)=="SLOT"&&(r=r.assignedElements({flatten:!0})[0]),r)return r=r.cloneNode(!0),r;const n=t.shadowRoot.querySelector(`[name="${e}"] > svg`);return n?n.cloneNode(!0):""}const z4=Fe.createElement("template");z4.innerHTML=`
  <style>
    :host {
      font: var(--media-font,
        var(--media-font-weight, normal)
        var(--media-font-size, 14px) /
        var(--media-text-content-height, var(--media-control-height, 24px))
        var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
      color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
      background: var(--media-menu-background, var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .8))));
      border-radius: var(--media-menu-border-radius);
      border: var(--media-menu-border, none);
      display: var(--media-menu-display, inline-flex);
      transition: var(--media-menu-transition-in,
        visibility 0s,
        opacity .2s ease-out,
        transform .15s ease-out,
        left .2s ease-in-out,
        min-width .2s ease-in-out,
        min-height .2s ease-in-out
      ) !important;
      
      visibility: var(--media-menu-visibility, visible);
      opacity: var(--media-menu-opacity, 1);
      max-height: var(--media-menu-max-height, var(--_menu-max-height, 300px));
      transform: var(--media-menu-transform-in, translateY(0) scale(1));
      flex-direction: column;
      
      min-height: 0;
      position: relative;
      bottom: var(--_menu-bottom);
      box-sizing: border-box;
    }

    :host([hidden]) {
      transition: var(--media-menu-transition-out,
        visibility .15s ease-in,
        opacity .15s ease-in,
        transform .15s ease-in
      ) !important;
      visibility: var(--media-menu-hidden-visibility, hidden);
      opacity: var(--media-menu-hidden-opacity, 0);
      max-height: var(--media-menu-hidden-max-height,
        var(--media-menu-max-height, var(--_menu-max-height, 300px)));
      transform: var(--media-menu-transform-out, translateY(2px) scale(.99));
      pointer-events: none;
    }

    :host([slot="submenu"]) {
      background: none;
      width: 100%;
      min-height: 100%;
      position: absolute;
      bottom: 0;
      right: -100%;
    }

    #container {
      display: flex;
      flex-direction: column;
      min-height: 0;
      transition: transform .2s ease-out;
      transform: translate(0, 0);
    }

    #container.has-expanded {
      transition: transform .2s ease-in;
      transform: translate(-100%, 0);
    }

    button {
      background: none;
      color: inherit;
      border: none;
      padding: 0;
      font: inherit;
      outline: inherit;
      display: inline-flex;
      align-items: center;
    }

    slot[name="header"][hidden] {
      display: none;
    }

    slot[name="header"] > *,
    slot[name="header"]::slotted(*) {
      padding: .4em .7em;
      border-bottom: 1px solid rgb(255 255 255 / .25);
      cursor: default;
    }

    slot[name="header"] > button[part~="back"],
    slot[name="header"]::slotted(button[part~="back"]) {
      cursor: pointer;
    }

    svg[part~="back"] {
      height: var(--media-menu-icon-height, var(--media-control-height, 24px));
      fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));
      display: block;
      margin-right: .5ch;
    }

    slot:not([name]) {
      gap: var(--media-menu-gap);
      flex-direction: var(--media-menu-flex-direction, column);
      overflow: var(--media-menu-overflow, hidden auto);
      display: flex;
      min-height: 0;
    }

    :host([role="menu"]) slot:not([name]) {
      padding-block: .4em;
    }

    slot:not([name])::slotted([role="menu"]) {
      background: none;
    }

    media-chrome-menu-item > span {
      margin-right: .5ch;
      max-width: var(--media-menu-item-max-width);
      text-overflow: ellipsis;
      overflow: hidden;
    }
  </style>
  <style id="layout-row" media="width:0">

    slot[name="header"] > *,
    slot[name="header"]::slotted(*) {
      padding: .4em .5em;
    }

    slot:not([name]) {
      gap: var(--media-menu-gap, .25em);
      flex-direction: var(--media-menu-flex-direction, row);
      padding-inline: .5em;
    }

    media-chrome-menu-item {
      padding: .3em .5em;
    }

    media-chrome-menu-item[aria-checked="true"] {
      background: var(--media-menu-item-checked-background, rgb(255 255 255 / .2));
    }

    
    media-chrome-menu-item::part(checked-indicator) {
      display: var(--media-menu-item-checked-indicator-display, none);
    }
  </style>
  <div id="container">
    <slot name="header" hidden>
      <button part="back button" aria-label="Back to previous menu">
        <slot name="back-icon">
          <svg aria-hidden="true" viewBox="0 0 20 24" part="back indicator">
            <path d="m11.88 17.585.742-.669-4.2-4.665 4.2-4.666-.743-.669-4.803 5.335 4.803 5.334Z"/>
          </svg>
        </slot>
        <slot name="title"></slot>
      </button>
    </slot>
    <slot></slot>
  </div>
  <slot name="checked-indicator" hidden></slot>
`;const fo={STYLE:"style",HIDDEN:"hidden",DISABLED:"disabled",ANCHOR:"anchor"};class na extends K.HTMLElement{constructor(){super(),Ht(this,TE),Ht(this,jp),Ht(this,SE),Ht(this,wE),Ht(this,AE),Ht(this,Gu),Ht(this,cg),Ht(this,RE),Ht(this,LS),Ht(this,CE),Ht(this,DS),Ht(this,IE),Ht(this,kE),Ht(this,Zd),Ht(this,LE),Ht(this,Qd),Ht(this,Hp),Ht(this,is,null),Ht(this,ul,null),Ht(this,Ja,null),Ht(this,Up,new Set),Ht(this,Bp,void 0),Ht(this,cl,!1),Ht(this,wh,null),Ht(this,ug,()=>{const e=Tt(this,Up),r=new Set(this.items);for(const n of e)r.has(n)||this.dispatchEvent(new CustomEvent("removemenuitem",{detail:n}));for(const n of r)e.has(n)||this.dispatchEvent(new CustomEvent("addmenuitem",{detail:n}));ns(this,Up,r)}),Ht(this,Vu,()=>{Yt(this,Gu,Ah).call(this),Yt(this,cg,kS).call(this,!1)}),Ht(this,Wu,()=>{Yt(this,Gu,Ah).call(this)}),this.shadowRoot||(this.attachShadow({mode:"open"}),this.nativeEl=this.constructor.template.content.cloneNode(!0),this.shadowRoot.append(this.nativeEl)),this.container=this.shadowRoot.querySelector("#container"),this.defaultSlot=this.shadowRoot.querySelector("slot:not([name])"),this.shadowRoot.addEventListener("slotchange",this),ns(this,Bp,new MutationObserver(Tt(this,ug))),Tt(this,Bp).observe(this.defaultSlot,{childList:!0})}static get observedAttributes(){return[fo.DISABLED,fo.HIDDEN,fo.STYLE,fo.ANCHOR,Bt.MEDIA_CONTROLLER]}static formatMenuItemText(e){return e}enable(){this.addEventListener("click",this),this.addEventListener("focusout",this),this.addEventListener("keydown",this),this.addEventListener("invoke",this),this.addEventListener("toggle",this)}disable(){this.removeEventListener("click",this),this.removeEventListener("focusout",this),this.removeEventListener("keyup",this),this.removeEventListener("invoke",this),this.removeEventListener("toggle",this)}handleEvent(e){switch(e.type){case"slotchange":Yt(this,TE,F4).call(this,e);break;case"invoke":Yt(this,SE,$4).call(this,e);break;case"click":Yt(this,RE,j4).call(this,e);break;case"toggle":Yt(this,CE,V4).call(this,e);break;case"focusout":Yt(this,IE,G4).call(this,e);break;case"keydown":Yt(this,kE,K4).call(this,e);break}}connectedCallback(){var e,r;ns(this,wh,a5(this.shadowRoot,":host")),Yt(this,jp,xE).call(this),this.hasAttribute("disabled")||this.enable(),this.role||(this.role="menu"),ns(this,is,M1(this)),(r=(e=Tt(this,is))==null?void 0:e.associateElement)==null||r.call(e,this),this.hidden||(ic(Rh(this),Tt(this,Vu)),ic(this,Tt(this,Wu)))}disconnectedCallback(){var e,r;mh(Rh(this),Tt(this,Vu)),mh(this,Tt(this,Wu)),this.disable(),(r=(e=Tt(this,is))==null?void 0:e.unassociateElement)==null||r.call(e,this),ns(this,is,null)}attributeChangedCallback(e,r,n){var i,s,a,o;e===fo.HIDDEN&&n!==r?(Tt(this,cl)||ns(this,cl,!0),this.hidden?Yt(this,AE,B4).call(this):Yt(this,wE,U4).call(this),this.dispatchEvent(new foe({oldState:this.hidden?"open":"closed",newState:this.hidden?"closed":"open",bubbles:!0}))):e===Bt.MEDIA_CONTROLLER?(r&&((s=(i=Tt(this,is))==null?void 0:i.unassociateElement)==null||s.call(i,this),ns(this,is,null)),n&&this.isConnected&&(ns(this,is,M1(this)),(o=(a=Tt(this,is))==null?void 0:a.associateElement)==null||o.call(a,this))):e===fo.DISABLED&&n!==r?n==null?this.enable():this.disable():e===fo.STYLE&&n!==r&&Yt(this,jp,xE).call(this)}formatMenuItemText(e,r){return this.constructor.formatMenuItemText(e,r)}get anchor(){return this.getAttribute("anchor")}set anchor(e){this.setAttribute("anchor",`${e}`)}get anchorElement(){var e;return this.anchor?(e=iv(this))==null?void 0:e.querySelector(`#${this.anchor}`):null}get items(){return this.defaultSlot.assignedElements({flatten:!0}).filter(poe)}get radioGroupItems(){return this.items.filter(e=>e.role==="menuitemradio")}get checkedItems(){return this.items.filter(e=>e.checked)}get value(){var e,r;return(r=(e=this.checkedItems[0])==null?void 0:e.value)!=null?r:""}set value(e){const r=this.items.find(n=>n.value===e);r&&Yt(this,Hp,DE).call(this,r)}focus(){if(ns(this,ul,iS()),this.items.length){Yt(this,Qd,hg).call(this,this.items[0]),this.items[0].focus();return}const e=this.querySelector('[autofocus], [tabindex]:not([tabindex="-1"]), [role="menu"]');e==null||e.focus()}handleSelect(e){var r;const n=Yt(this,Zd,dg).call(this,e);n&&(Yt(this,Hp,DE).call(this,n,n.type==="checkbox"),Tt(this,Ja)&&!this.hidden&&((r=Tt(this,ul))==null||r.focus(),this.hidden=!0))}get keysUsed(){return["Enter","Escape","Tab"," ","ArrowDown","ArrowUp","Home","End"]}handleMove(e){var r,n;const{key:i}=e,s=this.items,a=(n=(r=Yt(this,Zd,dg).call(this,e))!=null?r:Yt(this,LE,q4).call(this))!=null?n:s[0],o=s.indexOf(a);let l=Math.max(0,o);i==="ArrowDown"?l++:i==="ArrowUp"?l--:e.key==="Home"?l=0:e.key==="End"&&(l=s.length-1),l<0&&(l=s.length-1),l>s.length-1&&(l=0),Yt(this,Qd,hg).call(this,s[l]),s[l].focus()}}is=new WeakMap;ul=new WeakMap;Ja=new WeakMap;Up=new WeakMap;Bp=new WeakMap;cl=new WeakMap;wh=new WeakMap;TE=new WeakSet;F4=function(t){const e=t.target;for(const r of e.assignedNodes({flatten:!0}))r.nodeType===3&&r.textContent.trim()===""&&r.remove();if(["header","title"].includes(e.name)){const r=this.shadowRoot.querySelector('slot[name="header"]');r.hidden=e.assignedNodes().length===0}e.name||Tt(this,ug).call(this)};ug=new WeakMap;jp=new WeakSet;xE=function(){var t;const e=this.shadowRoot.querySelector("#layout-row"),r=(t=getComputedStyle(this).getPropertyValue("--media-menu-layout"))==null?void 0:t.trim();e.setAttribute("media",r==="row"?"":"width:0")};SE=new WeakSet;$4=function(t){ns(this,Ja,t.relatedTarget),ra(this,t.relatedTarget)||(this.hidden=!this.hidden)};wE=new WeakSet;U4=function(){var t;(t=Tt(this,Ja))==null||t.setAttribute("aria-expanded","true"),this.addEventListener("transitionend",()=>this.focus(),{once:!0}),ic(Rh(this),Tt(this,Vu)),ic(this,Tt(this,Wu))};AE=new WeakSet;B4=function(){var t;(t=Tt(this,Ja))==null||t.setAttribute("aria-expanded","false"),mh(Rh(this),Tt(this,Vu)),mh(this,Tt(this,Wu))};Vu=new WeakMap;Wu=new WeakMap;Gu=new WeakSet;Ah=function(t){if(this.hasAttribute("mediacontroller")&&!this.anchor||this.hidden||!this.anchorElement)return;const{x:e,y:r}=loe({anchor:this.anchorElement,floating:this,placement:"top-start"});t??(t=this.offsetWidth);const i=Rh(this).getBoundingClientRect(),s=i.width-e-t,a=i.height-r-this.offsetHeight,{style:o}=Tt(this,wh);o.setProperty("position","absolute"),o.setProperty("right",`${Math.max(0,s)}px`),o.setProperty("--_menu-bottom",`${a}px`);const l=getComputedStyle(this),c=o.getPropertyValue("--_menu-bottom")===l.bottom?a:parseFloat(l.bottom),d=i.height-c-parseFloat(l.marginBottom);this.style.setProperty("--_menu-max-height",`${d}px`)};cg=new WeakSet;kS=function(t){const e=this.querySelector('[role="menuitem"][aria-haspopup][aria-expanded="true"]'),r=e==null?void 0:e.querySelector('[role="menu"]'),{style:n}=Tt(this,wh);if(t||n.setProperty("--media-menu-transition-in","none"),r){const i=r.offsetHeight,s=Math.max(r.offsetWidth,e.offsetWidth);this.style.setProperty("min-width",`${s}px`),this.style.setProperty("min-height",`${i}px`),Yt(this,Gu,Ah).call(this,s)}else this.style.removeProperty("min-width"),this.style.removeProperty("min-height"),Yt(this,Gu,Ah).call(this);n.removeProperty("--media-menu-transition-in")};RE=new WeakSet;j4=function(t){var e;if(t.stopPropagation(),t.composedPath().includes(Tt(this,LS,H4))){(e=Tt(this,ul))==null||e.focus(),this.hidden=!0;return}const r=Yt(this,Zd,dg).call(this,t);!r||r.hasAttribute("disabled")||(Yt(this,Qd,hg).call(this,r),this.handleSelect(t))};LS=new WeakSet;H4=function(){var t;return(t=this.shadowRoot.querySelector('slot[name="header"]').assignedElements({flatten:!0}))==null?void 0:t.find(r=>r.matches('button[part~="back"]'))};CE=new WeakSet;V4=function(t){if(t.target===this)return;Yt(this,DS,W4).call(this);const e=Array.from(this.querySelectorAll('[role="menuitem"][aria-haspopup]'));for(const r of e)r.invokeTargetElement!=t.target&&t.newState=="open"&&r.getAttribute("aria-expanded")=="true"&&!r.invokeTargetElement.hidden&&r.invokeTargetElement.dispatchEvent(new CS({relatedTarget:r}));for(const r of e)r.setAttribute("aria-expanded",`${!r.submenuElement.hidden}`);Yt(this,cg,kS).call(this,!0)};DS=new WeakSet;W4=function(){const e=this.querySelector('[role="menuitem"] > [role="menu"]:not([hidden])');this.container.classList.toggle("has-expanded",!!e)};IE=new WeakSet;G4=function(t){var e;ra(this,t.relatedTarget)||(Tt(this,cl)&&((e=Tt(this,ul))==null||e.focus()),Tt(this,Ja)&&Tt(this,Ja)!==t.relatedTarget&&!this.hidden&&(this.hidden=!0))};kE=new WeakSet;K4=function(t){var e,r,n,i,s;const{key:a,ctrlKey:o,altKey:l,metaKey:u}=t;if(!(o||l||u)&&this.keysUsed.includes(a))if(t.preventDefault(),t.stopPropagation(),a==="Tab"){if(Tt(this,cl)){this.hidden=!0;return}t.shiftKey?(r=(e=this.previousElementSibling)==null?void 0:e.focus)==null||r.call(e):(i=(n=this.nextElementSibling)==null?void 0:n.focus)==null||i.call(n),this.blur()}else a==="Escape"?((s=Tt(this,ul))==null||s.focus(),Tt(this,cl)&&(this.hidden=!0)):a==="Enter"||a===" "?this.handleSelect(t):this.handleMove(t)};Zd=new WeakSet;dg=function(t){return t.composedPath().find(e=>["menuitemradio","menuitemcheckbox"].includes(e.role))};LE=new WeakSet;q4=function(){return this.items.find(t=>t.tabIndex===0)};Qd=new WeakSet;hg=function(t){for(const e of this.items)e.tabIndex=e===t?0:-1};Hp=new WeakSet;DE=function(t,e){const r=[...this.checkedItems];t.type==="radio"&&this.radioGroupItems.forEach(n=>n.checked=!1),e?t.checked=!t.checked:t.checked=!0,this.checkedItems.some((n,i)=>n!=r[i])&&this.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))};na.template=z4;function poe(t){return["menuitem","menuitemradio","menuitemcheckbox"].includes(t==null?void 0:t.role)}function Rh(t){var e;return(e=t.getAttribute("bounds")?xc(t,`#${t.getAttribute("bounds")}`):_i(t)||t.parentElement)!=null?e:t}K.customElements.get("media-chrome-menu")||K.customElements.define("media-chrome-menu",na);var OS=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},ms=(t,e,r)=>(OS(t,e,"read from private field"),e.get(t)),Ds=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Yb=(t,e,r,n)=>(OS(t,e,"write to private field"),e.set(t,r),r),cs=(t,e,r)=>(OS(t,e,"access private method"),r),Vp,Jd,OE,Y4,MS,X4,PS,Z4,gs,lc,Ch,ME,Q4,Wp,PE;const J4=Fe.createElement("template");J4.innerHTML=`
  <style>
    :host {
      transition: var(--media-menu-item-transition,
        background .15s linear,
        opacity .2s ease-in-out
      );
      outline: var(--media-menu-item-outline, 0);
      outline-offset: var(--media-menu-item-outline-offset, -1px);
      cursor: pointer;
      display: flex;
      align-items: center;
      align-self: stretch;
      justify-self: stretch;
      white-space: nowrap;
      white-space-collapse: collapse;
      text-wrap: nowrap;
      padding: .4em .8em .4em 1em;
    }

    :host(:focus-visible) {
      box-shadow: var(--media-menu-item-focus-shadow, inset 0 0 0 2px rgb(27 127 204 / .9));
      outline: var(--media-menu-item-hover-outline, 0);
      outline-offset: var(--media-menu-item-hover-outline-offset,  var(--media-menu-item-outline-offset, -1px));
    }

    :host(:hover) {
      cursor: pointer;
      background: var(--media-menu-item-hover-background, rgb(92 92 102 / .5));
      outline: var(--media-menu-item-hover-outline);
      outline-offset: var(--media-menu-item-hover-outline-offset,  var(--media-menu-item-outline-offset, -1px));
    }

    :host([aria-checked="true"]) {
      background: var(--media-menu-item-checked-background);
    }

    :host([hidden]) {
      display: none;
    }

    :host([disabled]) {
      pointer-events: none;
      color: rgba(255, 255, 255, .3);
    }

    slot:not([name]) {
      width: 100%;
    }

    slot:not([name="submenu"]) {
      display: inline-flex;
      align-items: center;
      transition: inherit;
      opacity: var(--media-menu-item-opacity, 1);
    }

    slot[name="description"] {
      justify-content: end;
    }

    slot[name="description"] > span {
      display: inline-block;
      margin-inline: 1em .2em;
      max-width: var(--media-menu-item-description-max-width, 100px);
      text-overflow: ellipsis;
      overflow: hidden;
      font-size: .8em;
      font-weight: 400;
      text-align: right;
      position: relative;
      top: .04em;
    }

    slot[name="checked-indicator"] {
      display: none;
    }

    :host(:is([role="menuitemradio"],[role="menuitemcheckbox"])) slot[name="checked-indicator"] {
      display: var(--media-menu-item-checked-indicator-display, inline-block);
    }

    
    svg, img, ::slotted(svg), ::slotted(img) {
      height: var(--media-menu-item-icon-height, var(--media-control-height, 24px));
      fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));
      display: block;
    }

    
    [part~="indicator"],
    ::slotted([part~="indicator"]) {
      fill: var(--media-menu-item-indicator-fill,
        var(--media-icon-color, var(--media-primary-color, rgb(238 238 238))));
      height: var(--media-menu-item-indicator-height, 1.25em);
      margin-right: .5ch;
    }

    [part~="checked-indicator"] {
      visibility: hidden;
    }

    :host([aria-checked="true"]) [part~="checked-indicator"] {
      visibility: visible;
    }
  </style>
  <slot name="checked-indicator">
    <svg aria-hidden="true" viewBox="0 1 24 24" part="checked-indicator indicator">
      <path d="m10 15.17 9.193-9.191 1.414 1.414-10.606 10.606-6.364-6.364 1.414-1.414 4.95 4.95Z"/>
    </svg>
  </slot>
  <slot name="prefix"></slot>
  <slot></slot>
  <slot name="description"></slot>
  <slot name="suffix"></slot>
  <slot name="submenu"></slot>
`;const fi={TYPE:"type",VALUE:"value",CHECKED:"checked",DISABLED:"disabled"};class gv extends K.HTMLElement{constructor(){super(),Ds(this,OE),Ds(this,MS),Ds(this,PS),Ds(this,lc),Ds(this,ME),Ds(this,Wp),Ds(this,Vp,!1),Ds(this,Jd,void 0),Ds(this,gs,()=>{var e,r;this.setAttribute("submenusize",`${this.submenuElement.items.length}`);const n=this.shadowRoot.querySelector('slot[name="description"]'),i=(e=this.submenuElement.checkedItems)==null?void 0:e[0],s=(r=i==null?void 0:i.dataset.description)!=null?r:i==null?void 0:i.text,a=Fe.createElement("span");a.textContent=s??"",n.replaceChildren(a)}),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.append(this.constructor.template.content.cloneNode(!0))),this.shadowRoot.addEventListener("slotchange",this)}static get observedAttributes(){return[fi.TYPE,fi.DISABLED,fi.CHECKED,fi.VALUE]}enable(){this.hasAttribute("tabindex")||this.setAttribute("tabindex","-1"),qc(this)&&!this.hasAttribute("aria-checked")&&this.setAttribute("aria-checked","false"),this.addEventListener("click",this),this.addEventListener("keydown",this)}disable(){this.removeAttribute("tabindex"),this.removeEventListener("click",this),this.removeEventListener("keydown",this),this.removeEventListener("keyup",this)}handleEvent(e){switch(e.type){case"slotchange":cs(this,OE,Y4).call(this,e);break;case"click":this.handleClick(e);break;case"keydown":cs(this,ME,Q4).call(this,e);break;case"keyup":cs(this,lc,Ch).call(this,e);break}}attributeChangedCallback(e,r,n){e===fi.CHECKED&&qc(this)&&!ms(this,Vp)?this.setAttribute("aria-checked",n!=null?"true":"false"):e===fi.TYPE&&n!==r?this.role="menuitem"+n:e===fi.DISABLED&&n!==r&&(n==null?this.enable():this.disable())}connectedCallback(){this.hasAttribute(fi.DISABLED)||this.enable(),this.role="menuitem"+this.type,Yb(this,Jd,NE(this,this.parentNode)),cs(this,Wp,PE).call(this)}disconnectedCallback(){this.disable(),cs(this,Wp,PE).call(this),Yb(this,Jd,null)}get invokeTarget(){return this.getAttribute("invoketarget")}set invokeTarget(e){this.setAttribute("invoketarget",`${e}`)}get invokeTargetElement(){var e;return this.invokeTarget?(e=iv(this))==null?void 0:e.querySelector(`#${this.invokeTarget}`):this.submenuElement}get submenuElement(){return this.shadowRoot.querySelector('slot[name="submenu"]').assignedElements({flatten:!0})[0]}get type(){var e;return(e=this.getAttribute(fi.TYPE))!=null?e:""}set type(e){this.setAttribute(fi.TYPE,`${e}`)}get value(){var e;return(e=this.getAttribute(fi.VALUE))!=null?e:this.text}set value(e){this.setAttribute(fi.VALUE,e)}get text(){var e;return((e=this.textContent)!=null?e:"").trim()}get checked(){if(qc(this))return this.getAttribute("aria-checked")==="true"}set checked(e){qc(this)&&(Yb(this,Vp,!0),this.setAttribute("aria-checked",e?"true":"false"),e?this.part.add("checked"):this.part.remove("checked"))}handleClick(e){qc(this)||this.invokeTargetElement&&ra(this,e.target)&&this.invokeTargetElement.dispatchEvent(new CS({relatedTarget:this}))}get keysUsed(){return["Enter"," "]}}Vp=new WeakMap;Jd=new WeakMap;OE=new WeakSet;Y4=function(t){const e=t.target;if(!(e!=null&&e.name))for(const n of e.assignedNodes({flatten:!0}))n instanceof Text&&n.textContent.trim()===""&&n.remove();e.name==="submenu"&&(this.submenuElement?cs(this,MS,X4).call(this):cs(this,PS,Z4).call(this))};MS=new WeakSet;X4=async function(){this.setAttribute("aria-haspopup","menu"),this.setAttribute("aria-expanded",`${!this.submenuElement.hidden}`),this.submenuElement.addEventListener("change",ms(this,gs)),this.submenuElement.addEventListener("addmenuitem",ms(this,gs)),this.submenuElement.addEventListener("removemenuitem",ms(this,gs)),ms(this,gs).call(this)};PS=new WeakSet;Z4=function(){this.removeAttribute("aria-haspopup"),this.removeAttribute("aria-expanded"),this.submenuElement.removeEventListener("change",ms(this,gs)),this.submenuElement.removeEventListener("addmenuitem",ms(this,gs)),this.submenuElement.removeEventListener("removemenuitem",ms(this,gs)),ms(this,gs).call(this)};gs=new WeakMap;lc=new WeakSet;Ch=function(t){const{key:e}=t;if(!this.keysUsed.includes(e)){this.removeEventListener("keyup",cs(this,lc,Ch));return}this.handleClick(t)};ME=new WeakSet;Q4=function(t){const{metaKey:e,altKey:r,key:n}=t;if(e||r||!this.keysUsed.includes(n)){this.removeEventListener("keyup",cs(this,lc,Ch));return}this.addEventListener("keyup",cs(this,lc,Ch),{once:!0})};Wp=new WeakSet;PE=function(){var t;const e=(t=ms(this,Jd))==null?void 0:t.radioGroupItems;if(!e)return;let r=e.filter(n=>n.getAttribute("aria-checked")==="true").pop();r||(r=e[0]);for(const n of e)n.setAttribute("aria-checked","false");r==null||r.setAttribute("aria-checked","true")};gv.template=J4;function qc(t){return t.type==="radio"||t.type==="checkbox"}function NE(t,e){if(!t)return null;const{host:r}=t.getRootNode();return!e&&r?NE(t,r):e!=null&&e.items?e:NE(e,e==null?void 0:e.parentNode)}K.customElements.get("media-chrome-menu-item")||K.customElements.define("media-chrome-menu-item",gv);const e6=Fe.createElement("template");e6.innerHTML=na.template.innerHTML+`
  <style>
    :host {
      background: var(--media-settings-menu-background,
        var(--media-menu-background,
        var(--media-control-background,
        var(--media-secondary-color, rgb(20 20 30 / .8)))));
      min-width: var(--media-settings-menu-min-width, 170px);
      border-radius: 2px 2px 0 0;
      overflow: hidden;
    }

    :host([role="menu"]) {
      
      justify-content: end;
    }

    slot:not([name]) {
      justify-content: var(--media-settings-menu-justify-content);
      flex-direction: var(--media-settings-menu-flex-direction, column);
      overflow: visible;
    }

    #container.has-expanded {
      --media-settings-menu-item-opacity: 0;
    }
  </style>
`;class t6 extends na{get anchorElement(){return this.anchor!=="auto"?super.anchorElement:_i(this).querySelector("media-settings-menu-button")}}t6.template=e6;K.customElements.get("media-settings-menu")||K.customElements.define("media-settings-menu",t6);var bk;const fg=Fe.createElement("template");fg.innerHTML=gv.template.innerHTML+`
  <style>
    slot:not([name="submenu"]) {
      opacity: var(--media-settings-menu-item-opacity, var(--media-menu-item-opacity));
    }

    :host([aria-expanded="true"]:hover) {
      background: transparent;
    }
  </style>
`;(bk=fg.content)!=null&&bk.querySelector&&(fg.content.querySelector('slot[name="suffix"]').innerHTML=`
    <svg aria-hidden="true" viewBox="0 0 20 24">
      <path d="m8.12 17.585-.742-.669 4.2-4.665-4.2-4.666.743-.669 4.803 5.335-4.803 5.334Z"/>
    </svg>
  `);class r6 extends gv{}r6.template=fg;K.customElements.get("media-settings-menu-item")||K.customElements.define("media-settings-menu-item",r6);class wc extends oi{connectedCallback(){super.connectedCallback(),this.invokeTargetElement&&this.setAttribute("aria-haspopup","menu")}get invokeTarget(){return this.getAttribute("invoketarget")}set invokeTarget(e){this.setAttribute("invoketarget",`${e}`)}get invokeTargetElement(){var e;return this.invokeTarget?(e=iv(this))==null?void 0:e.querySelector(`#${this.invokeTarget}`):null}handleClick(){var e;(e=this.invokeTargetElement)==null||e.dispatchEvent(new CS({relatedTarget:this}))}}K.customElements.get("media-chrome-menu-button")||K.customElements.define("media-chrome-menu-button",wc);const n6=Fe.createElement("template");n6.innerHTML=`
  <style>
    :host([aria-expanded="true"]) slot[name=tooltip] {
      display: none;
    }
  </style>
  <slot name="icon">
    <svg aria-hidden="true" viewBox="0 0 24 24">
      <path d="M4.5 14.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Zm7.5 0a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Zm7.5 0a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z"/>
    </svg>
  </slot>
`;class moe extends wc{static get observedAttributes(){return[...super.observedAttributes,"target"]}constructor(){super({slotTemplate:n6,tooltipContent:br.SETTINGS})}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",si.SETTINGS())}get invokeTargetElement(){return this.invokeTarget!=null?super.invokeTargetElement:_i(this).querySelector("media-settings-menu")}}K.customElements.get("media-settings-menu-button")||K.customElements.define("media-settings-menu-button",moe);var NS=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},i6=(t,e,r)=>(NS(t,e,"read from private field"),r?r.call(t):e.get(t)),Xf=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},FE=(t,e,r,n)=>(NS(t,e,"write to private field"),e.set(t,r),r),Zf=(t,e,r)=>(NS(t,e,"access private method"),r),Id,pg,Gp,$E,Kp,UE;class goe extends na{constructor(){super(...arguments),Xf(this,Gp),Xf(this,Kp),Xf(this,Id,[]),Xf(this,pg,void 0)}static get observedAttributes(){return[...super.observedAttributes,O.MEDIA_AUDIO_TRACK_LIST,O.MEDIA_AUDIO_TRACK_ENABLED,O.MEDIA_AUDIO_TRACK_UNAVAILABLE]}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===O.MEDIA_AUDIO_TRACK_ENABLED&&r!==n?this.value=n:e===O.MEDIA_AUDIO_TRACK_LIST&&r!==n&&(FE(this,Id,qne(n??"")),Zf(this,Gp,$E).call(this))}connectedCallback(){super.connectedCallback(),this.addEventListener("change",Zf(this,Kp,UE))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",Zf(this,Kp,UE))}get anchorElement(){var e;return this.anchor!=="auto"?super.anchorElement:(e=_i(this))==null?void 0:e.querySelector("media-audio-track-menu-button")}get mediaAudioTrackList(){return i6(this,Id)}set mediaAudioTrackList(e){FE(this,Id,e),Zf(this,Gp,$E).call(this)}get mediaAudioTrackEnabled(){var e;return(e=Fr(this,O.MEDIA_AUDIO_TRACK_ENABLED))!=null?e:""}set mediaAudioTrackEnabled(e){$r(this,O.MEDIA_AUDIO_TRACK_ENABLED,e)}}Id=new WeakMap;pg=new WeakMap;Gp=new WeakSet;$E=function(){if(i6(this,pg)===JSON.stringify(this.mediaAudioTrackList))return;FE(this,pg,JSON.stringify(this.mediaAudioTrackList));const t=this.mediaAudioTrackList;this.defaultSlot.textContent="";for(const e of t){const r=this.formatMenuItemText(e.label,e),n=oc({type:"radio",text:r,value:`${e.id}`,checked:e.enabled});n.prepend(dl(this,"checked-indicator")),this.defaultSlot.append(n)}};Kp=new WeakSet;UE=function(){if(this.value==null)return;const t=new K.CustomEvent(Re.MEDIA_AUDIO_TRACK_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(t)};K.customElements.get("media-audio-track-menu")||K.customElements.define("media-audio-track-menu",goe);const voe=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M11 17H9.5V7H11v10Zm-3-3H6.5v-4H8v4Zm6-5h-1.5v6H14V9Zm3 7h-1.5V8H17v8Z"/>
  <path d="M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10Zm-2 0a8 8 0 1 0-16 0 8 8 0 0 0 16 0Z"/>
</svg>`,s6=Fe.createElement("template");s6.innerHTML=`
  <style>
    :host([aria-expanded="true"]) slot[name=tooltip] {
      display: none;
    }
  </style>
  <slot name="icon">${voe}</slot>
`;class boe extends wc{static get observedAttributes(){return[...super.observedAttributes,O.MEDIA_AUDIO_TRACK_ENABLED,O.MEDIA_AUDIO_TRACK_UNAVAILABLE]}constructor(){super({slotTemplate:s6,tooltipContent:br.AUDIO_TRACK_MENU})}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",si.AUDIO_TRACKS())}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n)}get invokeTargetElement(){var e;return this.invokeTarget!=null?super.invokeTargetElement:(e=_i(this))==null?void 0:e.querySelector("media-audio-track-menu")}get mediaAudioTrackEnabled(){var e;return(e=Fr(this,O.MEDIA_AUDIO_TRACK_ENABLED))!=null?e:""}set mediaAudioTrackEnabled(e){$r(this,O.MEDIA_AUDIO_TRACK_ENABLED,e)}}K.customElements.get("media-audio-track-menu-button")||K.customElements.define("media-audio-track-menu-button",boe);var FS=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},yoe=(t,e,r)=>(FS(t,e,"read from private field"),r?r.call(t):e.get(t)),Xb=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Eoe=(t,e,r,n)=>(FS(t,e,"write to private field"),e.set(t,r),r),Zb=(t,e,r)=>(FS(t,e,"access private method"),r),mg,BE,a6,qp,jE;const _oe=`
  <svg aria-hidden="true" viewBox="0 0 26 24" part="captions-indicator indicator">
    <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>
  </svg>`,o6=Fe.createElement("template");o6.innerHTML=na.template.innerHTML+`
  <slot name="captions-indicator" hidden>${_oe}</slot>`;class l6 extends na{constructor(){super(...arguments),Xb(this,BE),Xb(this,qp),Xb(this,mg,void 0)}static get observedAttributes(){return[...super.observedAttributes,O.MEDIA_SUBTITLES_LIST,O.MEDIA_SUBTITLES_SHOWING]}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===O.MEDIA_SUBTITLES_LIST&&r!==n?Zb(this,BE,a6).call(this):e===O.MEDIA_SUBTITLES_SHOWING&&r!==n&&(this.value=n)}connectedCallback(){super.connectedCallback(),this.addEventListener("change",Zb(this,qp,jE))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",Zb(this,qp,jE))}get anchorElement(){return this.anchor!=="auto"?super.anchorElement:_i(this).querySelector("media-captions-menu-button")}get mediaSubtitlesList(){return yk(this,O.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(e){Ek(this,O.MEDIA_SUBTITLES_LIST,e)}get mediaSubtitlesShowing(){return yk(this,O.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(e){Ek(this,O.MEDIA_SUBTITLES_SHOWING,e)}}mg=new WeakMap;BE=new WeakSet;a6=function(){var t;if(yoe(this,mg)===JSON.stringify(this.mediaSubtitlesList))return;Eoe(this,mg,JSON.stringify(this.mediaSubtitlesList)),this.defaultSlot.textContent="";const e=!this.value,r=oc({type:"radio",text:this.formatMenuItemText("Off"),value:"off",checked:e});r.prepend(dl(this,"checked-indicator")),this.defaultSlot.append(r);const n=this.mediaSubtitlesList;for(const i of n){const s=oc({type:"radio",text:this.formatMenuItemText(i.label,i),value:F1(i),checked:this.value==F1(i)});s.prepend(dl(this,"checked-indicator")),((t=i.kind)!=null?t:"subs")==="captions"&&s.append(dl(this,"captions-indicator")),this.defaultSlot.append(s)}};qp=new WeakSet;jE=function(){const t=this.mediaSubtitlesShowing,e=this.getAttribute(O.MEDIA_SUBTITLES_SHOWING),r=this.value!==e;if(t!=null&&t.length&&r&&this.dispatchEvent(new K.CustomEvent(Re.MEDIA_DISABLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0,detail:t})),!this.value||!r)return;const n=new K.CustomEvent(Re.MEDIA_SHOW_SUBTITLES_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(n)};l6.template=o6;const yk=(t,e)=>{const r=t.getAttribute(e);return r?lv(r):[]},Ek=(t,e,r)=>{if(!(r!=null&&r.length)){t.removeAttribute(e);return}const n=yh(r);t.getAttribute(e)!==n&&t.setAttribute(e,n)};K.customElements.get("media-captions-menu")||K.customElements.define("media-captions-menu",l6);var Toe=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},xoe=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Soe=(t,e,r,n)=>(Toe(t,e,"write to private field"),e.set(t,r),r),HE;const woe=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>
</svg>`,Aoe=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M17.73 14.09a1.4 1.4 0 0 1-1 .37 1.579 1.579 0 0 1-1.27-.58A3 3 0 0 1 15 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34A2.89 2.89 0 0 0 19 9.07a3 3 0 0 0-2.14-.78 3.14 3.14 0 0 0-2.42 1 3.91 3.91 0 0 0-.93 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.17 3.17 0 0 0 1.07-1.74l-1.4-.45c-.083.43-.3.822-.62 1.12Zm-7.22 0a1.43 1.43 0 0 1-1 .37 1.58 1.58 0 0 1-1.27-.58A3 3 0 0 1 7.76 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34a2.81 2.81 0 0 0-.74-1.32 2.94 2.94 0 0 0-2.13-.78 3.18 3.18 0 0 0-2.43 1 4 4 0 0 0-.92 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.23 3.23 0 0 0 1.07-1.74l-1.4-.45a2.06 2.06 0 0 1-.6 1.07Zm12.32-8.41a2.59 2.59 0 0 0-2.3-2.51C18.72 3.05 15.86 3 13 3c-2.86 0-5.72.05-7.53.17a2.59 2.59 0 0 0-2.3 2.51c-.23 4.207-.23 8.423 0 12.63a2.57 2.57 0 0 0 2.3 2.5c1.81.13 4.67.19 7.53.19 2.86 0 5.72-.06 7.53-.19a2.57 2.57 0 0 0 2.3-2.5c.23-4.207.23-8.423 0-12.63Zm-1.49 12.53a1.11 1.11 0 0 1-.91 1.11c-1.67.11-4.45.18-7.43.18-2.98 0-5.76-.07-7.43-.18a1.11 1.11 0 0 1-.91-1.11c-.21-4.14-.21-8.29 0-12.43a1.11 1.11 0 0 1 .91-1.11C7.24 4.56 10 4.49 13 4.49s5.76.07 7.43.18a1.11 1.11 0 0 1 .91 1.11c.21 4.14.21 8.29 0 12.43Z"/>
</svg>`,u6=Fe.createElement("template");u6.innerHTML=`
  <style>
    :host([aria-checked="true"]) slot[name=off] {
      display: none !important;
    }

    
    :host(:not([aria-checked="true"])) slot[name=on] {
      display: none !important;
    }

    :host([aria-expanded="true"]) slot[name=tooltip] {
      display: none;
    }
  </style>

  <slot name="icon">
    <slot name="on">${woe}</slot>
    <slot name="off">${Aoe}</slot>
  </slot>
`;const _k=t=>{t.setAttribute("aria-checked",v5(t).toString())};class Roe extends wc{constructor(e={}){super({slotTemplate:u6,tooltipContent:br.CAPTIONS,...e}),xoe(this,HE,void 0),Soe(this,HE,!1)}static get observedAttributes(){return[...super.observedAttributes,O.MEDIA_SUBTITLES_LIST,O.MEDIA_SUBTITLES_SHOWING]}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",si.CLOSED_CAPTIONS()),_k(this)}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===O.MEDIA_SUBTITLES_SHOWING&&_k(this)}get invokeTargetElement(){var e;return this.invokeTarget!=null?super.invokeTargetElement:(e=_i(this))==null?void 0:e.querySelector("media-captions-menu")}get mediaSubtitlesList(){return Tk(this,O.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(e){xk(this,O.MEDIA_SUBTITLES_LIST,e)}get mediaSubtitlesShowing(){return Tk(this,O.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(e){xk(this,O.MEDIA_SUBTITLES_SHOWING,e)}}HE=new WeakMap;const Tk=(t,e)=>{const r=t.getAttribute(e);return r?lv(r):[]},xk=(t,e,r)=>{if(!(r!=null&&r.length)){t.removeAttribute(e);return}const n=yh(r);t.getAttribute(e)!==n&&t.setAttribute(e,n)};K.customElements.get("media-captions-menu-button")||K.customElements.define("media-captions-menu-button",Roe);var c6=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Qf=(t,e,r)=>(c6(t,e,"read from private field"),r?r.call(t):e.get(t)),Qb=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},zc=(t,e,r)=>(c6(t,e,"access private method"),r),fu,kd,zp,Yp,VE;const Jb={RATES:"rates"};class Coe extends na{constructor(){super(),Qb(this,kd),Qb(this,Yp),Qb(this,fu,new ov(this,Jb.RATES,{defaultValue:r4})),zc(this,kd,zp).call(this)}static get observedAttributes(){return[...super.observedAttributes,O.MEDIA_PLAYBACK_RATE,Jb.RATES]}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===O.MEDIA_PLAYBACK_RATE&&r!=n?this.value=n:e===Jb.RATES&&r!=n&&(Qf(this,fu).value=n,zc(this,kd,zp).call(this))}connectedCallback(){super.connectedCallback(),this.addEventListener("change",zc(this,Yp,VE))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",zc(this,Yp,VE))}get anchorElement(){return this.anchor!=="auto"?super.anchorElement:_i(this).querySelector("media-playback-rate-menu-button")}get rates(){return Qf(this,fu)}set rates(e){e?Array.isArray(e)&&(Qf(this,fu).value=e.join(" ")):Qf(this,fu).value="",zc(this,kd,zp).call(this)}get mediaPlaybackRate(){return pr(this,O.MEDIA_PLAYBACK_RATE,md)}set mediaPlaybackRate(e){Pr(this,O.MEDIA_PLAYBACK_RATE,e)}}fu=new WeakMap;kd=new WeakSet;zp=function(){this.defaultSlot.textContent="";for(const t of this.rates){const e=oc({type:"radio",text:this.formatMenuItemText(`${t}x`,t),value:t,checked:this.mediaPlaybackRate==t});e.prepend(dl(this,"checked-indicator")),this.defaultSlot.append(e)}};Yp=new WeakSet;VE=function(){if(!this.value)return;const t=new K.CustomEvent(Re.MEDIA_PLAYBACK_RATE_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(t)};K.customElements.get("media-playback-rate-menu")||K.customElements.define("media-playback-rate-menu",Coe);var Ioe=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Jf=(t,e,r)=>(Ioe(t,e,"read from private field"),r?r.call(t):e.get(t)),koe=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},pu;const ey={RATES:"rates"},Loe=[1,1.2,1.5,1.7,2],ty=1,d6=Fe.createElement("template");d6.innerHTML=`
  <style>
    :host {
      min-width: 5ch;
      padding: var(--media-button-padding, var(--media-control-padding, 10px 5px));
    }
    
    :host([aria-expanded="true"]) slot[name=tooltip] {
      display: none;
    }
  </style>
  <slot name="icon"></slot>
`;class Doe extends wc{constructor(e={}){super({slotTemplate:d6,tooltipContent:br.PLAYBACK_RATE,...e}),koe(this,pu,new ov(this,ey.RATES,{defaultValue:Loe})),this.container=this.shadowRoot.querySelector('slot[name="icon"]'),this.container.innerHTML=`${ty}x`}static get observedAttributes(){return[...super.observedAttributes,O.MEDIA_PLAYBACK_RATE,ey.RATES]}attributeChangedCallback(e,r,n){if(super.attributeChangedCallback(e,r,n),e===ey.RATES&&(Jf(this,pu).value=n),e===O.MEDIA_PLAYBACK_RATE){const i=n?+n:Number.NaN,s=Number.isNaN(i)?ty:i;this.container.innerHTML=`${s}x`,this.setAttribute("aria-label",si.PLAYBACK_RATE({playbackRate:s}))}}get invokeTargetElement(){return this.invokeTarget!=null?super.invokeTargetElement:_i(this).querySelector("media-playback-rate-menu")}get rates(){return Jf(this,pu)}set rates(e){e?Array.isArray(e)&&(Jf(this,pu).value=e.join(" ")):Jf(this,pu).value=""}get mediaPlaybackRate(){return pr(this,O.MEDIA_PLAYBACK_RATE,ty)}set mediaPlaybackRate(e){Pr(this,O.MEDIA_PLAYBACK_RATE,e)}}pu=new WeakMap;K.customElements.get("media-playback-rate-menu-button")||K.customElements.define("media-playback-rate-menu-button",Doe);var $S=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Ld=(t,e,r)=>($S(t,e,"read from private field"),r?r.call(t):e.get(t)),e0=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Sk=(t,e,r,n)=>($S(t,e,"write to private field"),e.set(t,r),r),Yc=(t,e,r)=>($S(t,e,"access private method"),r),Dd,Du,Od,Xp,Zp,WE;class Ooe extends na{constructor(){super(...arguments),e0(this,Od),e0(this,Zp),e0(this,Dd,[]),e0(this,Du,{})}static get observedAttributes(){return[...super.observedAttributes,O.MEDIA_RENDITION_LIST,O.MEDIA_RENDITION_SELECTED,O.MEDIA_RENDITION_UNAVAILABLE,O.MEDIA_HEIGHT]}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===O.MEDIA_RENDITION_SELECTED&&r!==n?this.value=n??"auto":e===O.MEDIA_RENDITION_LIST&&r!==n?(Sk(this,Dd,Vne(n)),Yc(this,Od,Xp).call(this)):e===O.MEDIA_HEIGHT&&r!==n&&Yc(this,Od,Xp).call(this)}connectedCallback(){super.connectedCallback(),this.addEventListener("change",Yc(this,Zp,WE))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",Yc(this,Zp,WE))}get anchorElement(){return this.anchor!=="auto"?super.anchorElement:_i(this).querySelector("media-rendition-menu-button")}get mediaRenditionList(){return Ld(this,Dd)}set mediaRenditionList(e){Sk(this,Dd,e),Yc(this,Od,Xp).call(this)}get mediaRenditionSelected(){return Fr(this,O.MEDIA_RENDITION_SELECTED)}set mediaRenditionSelected(e){$r(this,O.MEDIA_RENDITION_SELECTED,e)}get mediaHeight(){return pr(this,O.MEDIA_HEIGHT)}set mediaHeight(e){Pr(this,O.MEDIA_HEIGHT,e)}}Dd=new WeakMap;Du=new WeakMap;Od=new WeakSet;Xp=function(){if(Ld(this,Du).mediaRenditionList===JSON.stringify(this.mediaRenditionList)&&Ld(this,Du).mediaHeight===this.mediaHeight)return;Ld(this,Du).mediaRenditionList=JSON.stringify(this.mediaRenditionList),Ld(this,Du).mediaHeight=this.mediaHeight;const t=this.mediaRenditionList.sort((i,s)=>s.height-i.height);for(const i of t)i.selected=i.id===this.mediaRenditionSelected;this.defaultSlot.textContent="";const e=!this.mediaRenditionSelected;for(const i of t){const s=this.formatMenuItemText(`${Math.min(i.width,i.height)}p`,i),a=oc({type:"radio",text:s,value:`${i.id}`,checked:i.selected&&!e});a.prepend(dl(this,"checked-indicator")),this.defaultSlot.append(a)}const r=oc({type:"radio",text:this.formatMenuItemText("Auto"),value:"auto",checked:e}),n=this.mediaHeight>0?`Auto (${this.mediaHeight}p)`:"Auto";r.dataset.description=n,r.prepend(dl(this,"checked-indicator")),this.defaultSlot.append(r)};Zp=new WeakSet;WE=function(){if(this.value==null)return;const t=new K.CustomEvent(Re.MEDIA_RENDITION_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(t)};K.customElements.get("media-rendition-menu")||K.customElements.define("media-rendition-menu",Ooe);const Moe=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M13.5 2.5h2v6h-2v-2h-11v-2h11v-2Zm4 2h4v2h-4v-2Zm-12 4h2v6h-2v-2h-3v-2h3v-2Zm4 2h12v2h-12v-2Zm1 4h2v6h-2v-2h-8v-2h8v-2Zm4 2h7v2h-7v-2Z" />
</svg>`,h6=Fe.createElement("template");h6.innerHTML=`
  <style>
    :host([aria-expanded="true"]) slot[name=tooltip] {
      display: none;
    }
  </style>
  <slot name="icon">${Moe}</slot>
`;class Poe extends wc{static get observedAttributes(){return[...super.observedAttributes,O.MEDIA_RENDITION_SELECTED,O.MEDIA_RENDITION_UNAVAILABLE,O.MEDIA_HEIGHT]}constructor(){super({slotTemplate:h6,tooltipContent:br.RENDITIONS})}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",si.QUALITY())}get invokeTargetElement(){return this.invokeTarget!=null?super.invokeTargetElement:_i(this).querySelector("media-rendition-menu")}get mediaRenditionSelected(){return Fr(this,O.MEDIA_RENDITION_SELECTED)}set mediaRenditionSelected(e){$r(this,O.MEDIA_RENDITION_SELECTED,e)}get mediaHeight(){return pr(this,O.MEDIA_HEIGHT)}set mediaHeight(e){Pr(this,O.MEDIA_HEIGHT,e)}}K.customElements.get("media-rendition-menu-button")||K.customElements.define("media-rendition-menu-button",Poe);var US=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},At=(t,e,r)=>(US(t,e,"read from private field"),r?r.call(t):e.get(t)),Kr=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Zs=(t,e,r,n)=>(US(t,e,"write to private field"),e.set(t,r),r),wr=(t,e,r)=>(US(t,e,"access private method"),r),vv=class{addEventListener(){}removeEventListener(){}dispatchEvent(e){return!0}};if(typeof DocumentFragment>"u"){class t extends vv{}globalThis.DocumentFragment=t}var BS=class extends vv{},Noe=class extends vv{},Foe={get(t){},define(t,e,r){},getName(t){return null},upgrade(t){},whenDefined(t){return Promise.resolve(BS)}},Qp,$oe=class{constructor(t,e={}){Kr(this,Qp,void 0),Zs(this,Qp,e==null?void 0:e.detail)}get detail(){return At(this,Qp)}initCustomEvent(){}};Qp=new WeakMap;function Uoe(t,e){return new BS}var f6={document:{createElement:Uoe},DocumentFragment,customElements:Foe,CustomEvent:$oe,EventTarget:vv,HTMLElement:BS,HTMLVideoElement:Noe},p6=typeof window>"u"||typeof globalThis.customElements>"u",en=p6?f6:globalThis,Ka=p6?f6.document:globalThis.document;function Boe(t){let e="";return Object.entries(t).forEach(([r,n])=>{n!=null&&(e+=`${GE(r)}: ${n}; `)}),e?e.trim():void 0}function GE(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function m6(t){return t.replace(/[-_]([a-z])/g,(e,r)=>r.toUpperCase())}function vi(t){if(t==null)return;let e=+t;return Number.isNaN(e)?void 0:e}function g6(t){let e=joe(t).toString();return e?"?"+e:""}function joe(t){let e={};for(let r in t)t[r]!=null&&(e[r]=t[r]);return new URLSearchParams(e)}var v6=(t,e)=>!t||!e?!1:t.contains(e)?!0:v6(t,e.getRootNode().host),b6="mux.com",Hoe=()=>{try{return"3.1.0"}catch{}return"UNKNOWN"},Voe=Hoe(),y6=()=>Voe,Woe=(t,{token:e,customDomain:r=b6,thumbnailTime:n,programTime:i}={})=>{var s;let a=e==null?n:void 0,{aud:o}=(s=$u(e))!=null?s:{};if(!(e&&o!=="t"))return`https://image.${r}/${t}/thumbnail.webp${g6({token:e,time:a,program_time:i})}`},Goe=(t,{token:e,customDomain:r=b6,programStartTime:n,programEndTime:i}={})=>{var s;let{aud:a}=(s=$u(e))!=null?s:{};if(!(e&&a!=="s"))return`https://image.${r}/${t}/storyboard.vtt${g6({token:e,format:"webp",program_start_time:n,program_end_time:i})}`},jS=t=>{if(t){if([$t.LIVE,$t.ON_DEMAND].includes(t))return t;if(t!=null&&t.includes("live"))return $t.LIVE}},Koe={crossorigin:"crossOrigin",playsinline:"playsInline"};function qoe(t){var e;return(e=Koe[t])!=null?e:m6(t)}var mu,gu,Un,zoe=class{constructor(e,r){Kr(this,mu,void 0),Kr(this,gu,void 0),Kr(this,Un,[]),Zs(this,mu,e),Zs(this,gu,r)}[Symbol.iterator](){return At(this,Un).values()}get length(){return At(this,Un).length}get value(){var e;return(e=At(this,Un).join(" "))!=null?e:""}set value(e){var r;e!==this.value&&(Zs(this,Un,[]),this.add(...(r=e==null?void 0:e.split(" "))!=null?r:[]))}toString(){return this.value}item(e){return At(this,Un)[e]}values(){return At(this,Un).values()}keys(){return At(this,Un).keys()}forEach(e){At(this,Un).forEach(e)}add(...e){var r,n;e.forEach(i=>{this.contains(i)||At(this,Un).push(i)}),!(this.value===""&&!((r=At(this,mu))!=null&&r.hasAttribute(`${At(this,gu)}`)))&&((n=At(this,mu))==null||n.setAttribute(`${At(this,gu)}`,`${this.value}`))}remove(...e){var r;e.forEach(n=>{At(this,Un).splice(At(this,Un).indexOf(n),1)}),(r=At(this,mu))==null||r.setAttribute(`${At(this,gu)}`,`${this.value}`)}contains(e){return At(this,Un).includes(e)}toggle(e,r){return typeof r<"u"?r?(this.add(e),!0):(this.remove(e),!1):this.contains(e)?(this.remove(e),!1):(this.add(e),!0)}replace(e,r){this.remove(e),this.add(r)}};mu=new WeakMap,gu=new WeakMap,Un=new WeakMap;var E6=`[mux-player ${y6()}]`;function Vs(...t){console.warn(E6,...t)}function yi(...t){console.error(E6,...t)}function _6(t){var e;let r=(e=t.message)!=null?e:"";t.context&&(r+=` ${t.context}`),t.file&&(r+=` ${Le("Read more: ")}
https://github.com/muxinc/elements/blob/main/errors/${t.file}`),Vs(r)}var vn={AUTOPLAY:"autoplay",CROSSORIGIN:"crossorigin",LOOP:"loop",MUTED:"muted",PLAYSINLINE:"playsinline",PRELOAD:"preload"},Po={VOLUME:"volume",PLAYBACKRATE:"playbackrate",MUTED:"muted"},wk=Object.freeze({length:0,start(t){let e=t>>>0;if(e>=this.length)throw new DOMException(`Failed to execute 'start' on 'TimeRanges': The index provided (${e}) is greater than or equal to the maximum bound (${this.length}).`);return 0},end(t){let e=t>>>0;if(e>=this.length)throw new DOMException(`Failed to execute 'end' on 'TimeRanges': The index provided (${e}) is greater than or equal to the maximum bound (${this.length}).`);return 0}}),Yoe=xS.filter(t=>t!=="error"),Xoe=Object.values(vn).filter(t=>![vn.PLAYSINLINE].includes(t)),Zoe=Object.values(Po),Md,Qoe=class extends en.HTMLElement{constructor(){super(),Kr(this,Md,new WeakMap);let t=e=>{for(let r of e)r.type==="childList"&&(r.removedNodes.forEach(n=>{var i;(i=At(this,Md).get(n))==null||i.remove()}),r.addedNodes.forEach(n=>{var i;let s=n;s!=null&&s.slot||(i=this.media)==null||i.append(Ak(At(this,Md),n))}))};new MutationObserver(t).observe(this,{childList:!0,subtree:!0})}static get observedAttributes(){return[...Xoe,...Zoe]}init(){this.querySelectorAll(":scope > :not([slot])").forEach(t=>{var e;(e=this.media)==null||e.append(Ak(At(this,Md),t))}),Yoe.forEach(t=>{var e;(e=this.media)==null||e.addEventListener(t,r=>{this.dispatchEvent(new Event(r.type))})})}attributeChangedCallback(t,e,r){var n,i;switch(t){case Po.MUTED:{this.media&&(this.media.muted=r!=null,this.media.defaultMuted=r!=null);return}case Po.VOLUME:{let s=(n=vi(r))!=null?n:1;this.media&&(this.media.volume=s);return}case Po.PLAYBACKRATE:{let s=(i=vi(r))!=null?i:1;this.media&&(this.media.playbackRate=s,this.media.defaultPlaybackRate=s);return}}}play(){var t,e;return(e=(t=this.media)==null?void 0:t.play())!=null?e:Promise.reject()}pause(){var t;(t=this.media)==null||t.pause()}load(){var t;(t=this.media)==null||t.load()}requestCast(t){var e;return(e=this.media)==null?void 0:e.requestCast(t)}get media(){var t;return(t=this.shadowRoot)==null?void 0:t.querySelector("mux-video")}get audioTracks(){return this.media.audioTracks}get videoTracks(){return this.media.videoTracks}get audioRenditions(){return this.media.audioRenditions}get videoRenditions(){return this.media.videoRenditions}get paused(){var t,e;return(e=(t=this.media)==null?void 0:t.paused)!=null?e:!0}get duration(){var t,e;return(e=(t=this.media)==null?void 0:t.duration)!=null?e:NaN}get ended(){var t,e;return(e=(t=this.media)==null?void 0:t.ended)!=null?e:!1}get buffered(){var t,e;return(e=(t=this.media)==null?void 0:t.buffered)!=null?e:wk}get seekable(){var t,e;return(e=(t=this.media)==null?void 0:t.seekable)!=null?e:wk}get readyState(){var t,e;return(e=(t=this.media)==null?void 0:t.readyState)!=null?e:0}get videoWidth(){var t,e;return(e=(t=this.media)==null?void 0:t.videoWidth)!=null?e:0}get videoHeight(){var t,e;return(e=(t=this.media)==null?void 0:t.videoHeight)!=null?e:0}get currentSrc(){var t,e;return(e=(t=this.media)==null?void 0:t.currentSrc)!=null?e:""}get currentTime(){var t,e;return(e=(t=this.media)==null?void 0:t.currentTime)!=null?e:0}set currentTime(t){this.media&&(this.media.currentTime=Number(t))}get volume(){var t,e;return(e=(t=this.media)==null?void 0:t.volume)!=null?e:1}set volume(t){this.media&&(this.media.volume=Number(t))}get playbackRate(){var t,e;return(e=(t=this.media)==null?void 0:t.playbackRate)!=null?e:1}set playbackRate(t){this.media&&(this.media.playbackRate=Number(t))}get defaultPlaybackRate(){var t;return(t=vi(this.getAttribute(Po.PLAYBACKRATE)))!=null?t:1}set defaultPlaybackRate(t){t!=null?this.setAttribute(Po.PLAYBACKRATE,`${t}`):this.removeAttribute(Po.PLAYBACKRATE)}get crossOrigin(){return Xc(this,vn.CROSSORIGIN)}set crossOrigin(t){this.setAttribute(vn.CROSSORIGIN,`${t}`)}get autoplay(){return Xc(this,vn.AUTOPLAY)!=null}set autoplay(t){t?this.setAttribute(vn.AUTOPLAY,typeof t=="string"?t:""):this.removeAttribute(vn.AUTOPLAY)}get loop(){return Xc(this,vn.LOOP)!=null}set loop(t){t?this.setAttribute(vn.LOOP,""):this.removeAttribute(vn.LOOP)}get muted(){var t,e;return(e=(t=this.media)==null?void 0:t.muted)!=null?e:!1}set muted(t){this.media&&(this.media.muted=!!t)}get defaultMuted(){return Xc(this,vn.MUTED)!=null}set defaultMuted(t){t?this.setAttribute(vn.MUTED,""):this.removeAttribute(vn.MUTED)}get playsInline(){return Xc(this,vn.PLAYSINLINE)!=null}set playsInline(t){yi("playsInline is set to true by default and is not currently supported as a setter.")}get preload(){return this.media?this.media.preload:this.getAttribute("preload")}set preload(t){["","none","metadata","auto"].includes(t)?this.setAttribute(vn.PRELOAD,t):this.removeAttribute(vn.PRELOAD)}};Md=new WeakMap;function Xc(t,e){return t.media?t.media.getAttribute(e):t.getAttribute(e)}function Ak(t,e){let r=t.get(e);return r||(r=e.cloneNode(),t.set(e,r)),r}var Rk=Qoe,Joe=`:host {
  --media-control-display: var(--controls);
  --media-loading-indicator-display: var(--loading-indicator);
  --media-dialog-display: var(--dialog);
  --media-play-button-display: var(--play-button);
  --media-live-button-display: var(--live-button);
  --media-seek-backward-button-display: var(--seek-backward-button);
  --media-seek-forward-button-display: var(--seek-forward-button);
  --media-mute-button-display: var(--mute-button);
  --media-captions-button-display: var(--captions-button);
  --media-captions-menu-button-display: var(--captions-menu-button, var(--media-captions-button-display));
  --media-rendition-menu-button-display: var(--rendition-menu-button);
  --media-audio-track-menu-button-display: var(--audio-track-menu-button);
  --media-airplay-button-display: var(--airplay-button);
  --media-pip-button-display: var(--pip-button);
  --media-fullscreen-button-display: var(--fullscreen-button);
  --media-cast-button-display: var(--cast-button, var(--_cast-button-drm-display));
  --media-playback-rate-button-display: var(--playback-rate-button);
  --media-playback-rate-menu-button-display: var(--playback-rate-menu-button);
  --media-volume-range-display: var(--volume-range);
  --media-time-range-display: var(--time-range);
  --media-time-display-display: var(--time-display);
  --media-duration-display-display: var(--duration-display);
  --media-title-display-display: var(--title-display);

  display: inline-block;
  width: 100%;
  line-height: 0;
}

/* Hide custom elements that are not defined yet */
:not(:defined) {
  display: none;
}

a {
  color: #fff;
  font-size: 0.9em;
  text-decoration: underline;
}

media-theme {
  width: 100%;
  height: 100%;
  direction: ltr;
}

media-poster-image {
  width: 100%;
  height: 100%;
}

media-poster-image:not([src]):not([placeholdersrc]) {
  display: none;
}

::part(top),
[part~='top'] {
  --media-control-display: var(--controls, var(--top-controls));
  --media-play-button-display: var(--play-button, var(--top-play-button));
  --media-live-button-display: var(--live-button, var(--top-live-button));
  --media-seek-backward-button-display: var(--seek-backward-button, var(--top-seek-backward-button));
  --media-seek-forward-button-display: var(--seek-forward-button, var(--top-seek-forward-button));
  --media-mute-button-display: var(--mute-button, var(--top-mute-button));
  --media-captions-button-display: var(--captions-button, var(--top-captions-button));
  --media-captions-menu-button-display: var(
    --captions-menu-button,
    var(--media-captions-button-display, var(--top-captions-menu-button))
  );
  --media-rendition-menu-button-display: var(--rendition-menu-button, var(--top-rendition-menu-button));
  --media-audio-track-menu-button-display: var(--audio-track-menu-button, var(--top-audio-track-menu-button));
  --media-airplay-button-display: var(--airplay-button, var(--top-airplay-button));
  --media-pip-button-display: var(--pip-button, var(--top-pip-button));
  --media-fullscreen-button-display: var(--fullscreen-button, var(--top-fullscreen-button));
  --media-cast-button-display: var(--cast-button, var(--top-cast-button, var(--_cast-button-drm-display)));
  --media-playback-rate-button-display: var(--playback-rate-button, var(--top-playback-rate-button));
  --media-playback-rate-menu-button-display: var(
    --captions-menu-button,
    var(--media-playback-rate-button-display, var(--top-playback-rate-menu-button))
  );
  --media-volume-range-display: var(--volume-range, var(--top-volume-range));
  --media-time-range-display: var(--time-range, var(--top-time-range));
  --media-time-display-display: var(--time-display, var(--top-time-display));
  --media-duration-display-display: var(--duration-display, var(--top-duration-display));
  --media-title-display-display: var(--title-display, var(--top-title-display));
}

::part(center),
[part~='center'] {
  --media-control-display: var(--controls, var(--center-controls));
  --media-play-button-display: var(--play-button, var(--center-play-button));
  --media-live-button-display: var(--live-button, var(--center-live-button));
  --media-seek-backward-button-display: var(--seek-backward-button, var(--center-seek-backward-button));
  --media-seek-forward-button-display: var(--seek-forward-button, var(--center-seek-forward-button));
  --media-mute-button-display: var(--mute-button, var(--center-mute-button));
  --media-captions-button-display: var(--captions-button, var(--center-captions-button));
  --media-captions-menu-button-display: var(
    --captions-menu-button,
    var(--media-captions-button-display, var(--center-captions-menu-button))
  );
  --media-rendition-menu-button-display: var(--rendition-menu-button, var(--center-rendition-menu-button));
  --media-audio-track-menu-button-display: var(--audio-track-menu-button, var(--center-audio-track-menu-button));
  --media-airplay-button-display: var(--airplay-button, var(--center-airplay-button));
  --media-pip-button-display: var(--pip-button, var(--center-pip-button));
  --media-fullscreen-button-display: var(--fullscreen-button, var(--center-fullscreen-button));
  --media-cast-button-display: var(--cast-button, var(--center-cast-button, var(--_cast-button-drm-display)));
  --media-playback-rate-button-display: var(--playback-rate-button, var(--center-playback-rate-button));
  --media-playback-rate-menu-button-display: var(
    --playback-rate-menu-button,
    var(--media-playback-rate-button-display, var(--center-playback-rate-menu-button))
  );
  --media-volume-range-display: var(--volume-range, var(--center-volume-range));
  --media-time-range-display: var(--time-range, var(--center-time-range));
  --media-time-display-display: var(--time-display, var(--center-time-display));
  --media-duration-display-display: var(--duration-display, var(--center-duration-display));
}

::part(bottom),
[part~='bottom'] {
  --media-control-display: var(--controls, var(--bottom-controls));
  --media-play-button-display: var(--play-button, var(--bottom-play-button));
  --media-live-button-display: var(--live-button, var(--bottom-live-button));
  --media-seek-backward-button-display: var(--seek-backward-button, var(--bottom-seek-backward-button));
  --media-seek-forward-button-display: var(--seek-forward-button, var(--bottom-seek-forward-button));
  --media-mute-button-display: var(--mute-button, var(--bottom-mute-button));
  --media-captions-button-display: var(--captions-button, var(--bottom-captions-button));
  --media-captions-menu-button-display: var(
    --captions-menu-button,
    var(--media-captions-button-display, var(--bottom-captions-menu-button))
  );
  --media-rendition-menu-button-display: var(--rendition-menu-button, var(--bottom-rendition-menu-button));
  --media-audio-track-menu-button-display: var(--audio-track-menu-button, var(--bottom-audio-track-menu-button));
  --media-airplay-button-display: var(--airplay-button, var(--bottom-airplay-button));
  --media-pip-button-display: var(--pip-button, var(--bottom-pip-button));
  --media-fullscreen-button-display: var(--fullscreen-button, var(--bottom-fullscreen-button));
  --media-cast-button-display: var(--cast-button, var(--bottom-cast-button, var(--_cast-button-drm-display)));
  --media-playback-rate-button-display: var(--playback-rate-button, var(--bottom-playback-rate-button));
  --media-playback-rate-menu-button-display: var(
    --playback-rate-menu-button,
    var(--media-playback-rate-button-display, var(--bottom-playback-rate-menu-button))
  );
  --media-volume-range-display: var(--volume-range, var(--bottom-volume-range));
  --media-time-range-display: var(--time-range, var(--bottom-time-range));
  --media-time-display-display: var(--time-display, var(--bottom-time-display));
  --media-duration-display-display: var(--duration-display, var(--bottom-duration-display));
  --media-title-display-display: var(--title-display, var(--bottom-title-display));
}

:host([no-tooltips]) {
  --media-tooltip-display: none;
}
`,T6=`
  :host {
    z-index: 100;
    display: var(--media-dialog-display, flex);
    justify-content: center;
    align-items: center;
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
    box-sizing: border-box;
    color: #fff;
    line-height: 18px;
    font-family: Arial, sans-serif;
    padding: var(--media-dialog-backdrop-padding, 0);
    background: var(--media-dialog-backdrop-background,
      linear-gradient(to bottom, rgba(20, 20, 30, 0.7) 50%, rgba(20, 20, 30, 0.9))
    );
    /* Needs to use !important to prevent overwrite of media-chrome */
    transition: var(--media-dialog-transition-open, visibility .2s, opacity .2s) !important;
    transform: var(--media-dialog-transform-open, none) !important;
    visibility: visible !important;
    opacity: 1 !important;
    pointer-events: auto !important;
  }

  :host(:not([open])) {
    /* Needs to use !important to prevent overwrite of media-chrome */
    transition: var(--media-dialog-transition-close, visibility .1s, opacity .1s) !important;
    transform: var(--media-dialog-transform-close, none) !important;
    visibility: hidden !important;
    opacity: 0 !important;
    pointer-events: none !important;
  }

  :focus-visible {
    box-shadow: 0 0 0 2px rgba(27, 127, 204, 0.9);
  }

  .dialog {
    position: relative;
    box-sizing: border-box;
    background: var(--media-dialog-background, none);
    padding: var(--media-dialog-padding, 10px);
    width: min(320px, 100%);
    word-wrap: break-word;
    max-height: 100%;
    overflow: auto;
    text-align: center;
    line-height: 1.4;
  }
`,x6=Ka.createElement("template");x6.innerHTML=`
  <style>
    ${T6}
  </style>

  <div class="dialog">
    <slot></slot>
  </div>
`;var Ku=class extends en.HTMLElement{constructor(){var e;super(),this.attachShadow({mode:"open"}),(e=this.shadowRoot)==null||e.appendChild(this.constructor.template.content.cloneNode(!0))}show(){this.setAttribute("open",""),this.dispatchEvent(new CustomEvent("open",{composed:!0,bubbles:!0})),Ck(this)}close(){this.hasAttribute("open")&&(this.removeAttribute("open"),this.dispatchEvent(new CustomEvent("close",{composed:!0,bubbles:!0})),ele(this))}attributeChangedCallback(e,r,n){e==="open"&&r!==n&&(n!=null?this.show():this.close())}connectedCallback(){this.hasAttribute("role")||this.setAttribute("role","dialog"),this.hasAttribute("open")&&Ck(this)}};Ku.styles=T6,Ku.template=x6,Ku.observedAttributes=["open"];function Ck(t){let e=new CustomEvent("initfocus",{composed:!0,bubbles:!0,cancelable:!0});if(t.dispatchEvent(e),e.defaultPrevented)return;let r=t.querySelector("[autofocus]:not([disabled])");!r&&t.tabIndex>=0&&(r=t),r||(r=S6(t.shadowRoot)),t._previouslyFocusedElement=Ka.activeElement,Ka.activeElement instanceof HTMLElement&&Ka.activeElement.blur(),t.addEventListener("transitionend",()=>{r instanceof HTMLElement&&r.focus({preventScroll:!0})},{once:!0})}function S6(t){let e=["button","input","keygen","select","textarea"].map(function(n){return n+":not([disabled])"});e.push('[tabindex]:not([disabled]):not([tabindex=""])');let r=t==null?void 0:t.querySelector(e.join(", "));if(!r&&"attachShadow"in Element.prototype){let n=(t==null?void 0:t.querySelectorAll("*"))||[];for(let i=0;i<n.length&&!(n[i].tagName&&n[i].shadowRoot&&(r=S6(n[i].shadowRoot),r));i++);}return r}function ele(t){t._previouslyFocusedElement instanceof HTMLElement&&t._previouslyFocusedElement.focus()}en.customElements.get("media-dialog")||(en.customElements.define("media-dialog",Ku),en.MediaDialog=Ku);var w6=Ku,A6=Ka.createElement("template");A6.innerHTML=`
  <style>
    ${w6.styles}

    .close {
      background: none;
      color: inherit;
      border: none;
      padding: 0;
      font: inherit;
      cursor: pointer;
      outline: inherit;
      width: 28px;
      height: 28px;
      position: absolute;
      top: 1rem;
      right: 1rem;
    }
  </style>

  <div class="dialog">
    <slot></slot>
  </div>

  <slot name="close">
    <button class="close" tabindex="0">
      <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
  </slot>
`;var KE=class extends w6{constructor(){var t,e;super(),(e=(t=this.shadowRoot)==null?void 0:t.querySelector(".close"))==null||e.addEventListener("click",()=>{this.close()})}};KE.template=A6;en.customElements.get("mxp-dialog")||(en.customElements.define("mxp-dialog",KE),en.MxpDialog=KE);var Zc=new WeakMap,tle=class R6{constructor(e,r){this.element=e,this.type=r,this.element.addEventListener(this.type,this);let n=Zc.get(this.element);n&&n.set(this.type,this)}set(e){if(typeof e=="function")this.handleEvent=e.bind(this.element);else if(typeof e=="object"&&typeof e.handleEvent=="function")this.handleEvent=e.handleEvent.bind(e);else{this.element.removeEventListener(this.type,this);let r=Zc.get(this.element);r&&r.delete(this.type)}}static for(e){Zc.has(e.element)||Zc.set(e.element,new Map);let r=e.attributeName.slice(2),n=Zc.get(e.element);return n&&n.has(r)?n.get(r):new R6(e.element,r)}};function rle(t,e){return t instanceof Pi&&t.attributeName.startsWith("on")?(tle.for(t).set(e),t.element.removeAttributeNS(t.attributeNamespace,t.attributeName),!0):!1}function nle(t,e){return e instanceof C6&&t instanceof Sc?(e.renderInto(t),!0):!1}function ile(t,e){return e instanceof DocumentFragment&&t instanceof Sc?(e.childNodes.length&&t.replace(...e.childNodes),!0):!1}function sle(t,e){if(t instanceof Pi){let r=t.attributeNamespace,n=t.element.getAttributeNS(r,t.attributeName);return String(e)!==n&&(t.value=String(e)),!0}return t.value=String(e),!0}function ale(t,e){if(t instanceof Pi&&e instanceof Element){let r=t.element;return r[t.attributeName]!==e&&(t.element.removeAttributeNS(t.attributeNamespace,t.attributeName),r[t.attributeName]=e),!0}return!1}function ole(t,e){if(typeof e=="boolean"&&t instanceof Pi){let r=t.attributeNamespace,n=t.element.hasAttributeNS(r,t.attributeName);return e!==n&&(t.booleanValue=e),!0}return!1}function lle(t,e){return e===!1&&t instanceof Sc?(t.replace(""),!0):!1}function ule(t,e){ale(t,e)||ole(t,e)||rle(t,e)||lle(t,e)||nle(t,e)||ile(t,e)||sle(t,e)}var ry=new Map,Ik=new WeakMap,kk=new WeakMap,C6=class{constructor(e,r,n){this.strings=e,this.values=r,this.processor=n,this.stringsKey=this.strings.join("")}get template(){if(ry.has(this.stringsKey))return ry.get(this.stringsKey);{let e=Ka.createElement("template"),r=this.strings.length-1;return e.innerHTML=this.strings.reduce((n,i,s)=>n+i+(s<r?`{{ ${s} }}`:""),""),ry.set(this.stringsKey,e),e}}renderInto(e){var r;let n=this.template;if(Ik.get(e)!==n){Ik.set(e,n);let s=new pv(n,this.values,this.processor);kk.set(e,s),e instanceof Sc?e.replace(...s.children):e.appendChild(s);return}let i=kk.get(e);(r=i==null?void 0:i.update)==null||r.call(i,this.values)}},cle={processCallback(t,e,r){var n;if(r){for(let[i,s]of e)if(i in r){let a=(n=r[i])!=null?n:"";ule(s,a)}}}};function Ta(t,...e){return new C6(t,e,cle)}function dle(t,e){t.renderInto(e)}var hle=t=>{let{tokens:e}=t;return e.drm?":host { --_cast-button-drm-display: none; }":""},fle=t=>Ta`
  <style>
    ${hle(t)}
    ${Joe}
  </style>
  ${vle(t)}
`,ple=t=>{let e=t.hotKeys?`${t.hotKeys}`:"";return jS(t.streamType)==="live"&&(e+=" noarrowleft noarrowright"),e},mle={TOP:"top",CENTER:"center",BOTTOM:"bottom",LAYER:"layer",MEDIA_LAYER:"media-layer",POSTER_LAYER:"poster-layer",VERTICAL_LAYER:"vertical-layer",CENTERED_LAYER:"centered-layer",GESTURE_LAYER:"gesture-layer",CONTROLLER_LAYER:"controller",BUTTON:"button",RANGE:"range",DISPLAY:"display",CONTROL_BAR:"control-bar",MENU_BUTTON:"menu-button",LISTBOX:"listbox",OPTION:"option",POSTER:"poster",LIVE:"live",PLAY:"play",PRE_PLAY:"pre-play",SEEK_BACKWARD:"seek-backward",SEEK_FORWARD:"seek-forward",MUTE:"mute",CAPTIONS:"captions",AIRPLAY:"airplay",PIP:"pip",FULLSCREEN:"fullscreen",CAST:"cast",PLAYBACK_RATE:"playback-rate",VOLUME:"volume",TIME:"time",TITLE:"title",AUDIO_TRACK:"audio-track",RENDITION:"rendition"},gle=Object.values(mle).join(", "),vle=t=>{var e,r,n,i,s,a,o,l,u,c,d,h,f,p,m,g,v,b,y,T,x,_,S,A,k,I,C,N,P,V,M,U,B,X,te,D,L,Y;return Ta`
  <media-theme
    template="${t.themeTemplate||!1}"
    defaultstreamtype="${(e=t.defaultStreamType)!=null?e:!1}"
    hotkeys="${ple(t)||!1}"
    nohotkeys="${t.noHotKeys||!t.hasSrc||t.isDialogOpen||!1}"
    noautoseektolive="${!!((r=t.streamType)!=null&&r.includes($t.LIVE))&&t.targetLiveWindow!==0}"
    novolumepref="${t.novolumepref||!1}"
    disabled="${!t.hasSrc||t.isDialogOpen}"
    audio="${(n=t.audio)!=null?n:!1}"
    style="${(i=Boe({"--media-primary-color":t.primaryColor,"--media-secondary-color":t.secondaryColor,"--media-accent-color":t.accentColor}))!=null?i:!1}"
    defaultsubtitles="${!t.defaultHiddenCaptions}"
    forwardseekoffset="${(s=t.forwardSeekOffset)!=null?s:!1}"
    backwardseekoffset="${(a=t.backwardSeekOffset)!=null?a:!1}"
    playbackrates="${(o=t.playbackRates)!=null?o:!1}"
    defaultshowremainingtime="${(l=t.defaultShowRemainingTime)!=null?l:!1}"
    defaultduration="${(u=t.defaultDuration)!=null?u:!1}"
    hideduration="${(c=t.hideDuration)!=null?c:!1}"
    title="${(d=t.title)!=null?d:!1}"
    exportparts="${gle}"
  >
    <mux-video
      slot="media"
      target-live-window="${(h=t.targetLiveWindow)!=null?h:!1}"
      stream-type="${(f=jS(t.streamType))!=null?f:!1}"
      crossorigin="${(p=t.crossOrigin)!=null?p:""}"
      playsinline
      autoplay="${(m=t.autoplay)!=null?m:!1}"
      muted="${(g=t.muted)!=null?g:!1}"
      loop="${(v=t.loop)!=null?v:!1}"
      preload="${(b=t.preload)!=null?b:!1}"
      debug="${(y=t.debug)!=null?y:!1}"
      prefer-cmcd="${(T=t.preferCmcd)!=null?T:!1}"
      disable-tracking="${(x=t.disableTracking)!=null?x:!1}"
      disable-cookies="${(_=t.disableCookies)!=null?_:!1}"
      prefer-playback="${(S=t.preferPlayback)!=null?S:!1}"
      start-time="${t.startTime!=null?t.startTime:!1}"
      beacon-collection-domain="${(A=t.beaconCollectionDomain)!=null?A:!1}"
      player-software-name="${(k=t.playerSoftwareName)!=null?k:!1}"
      player-software-version="${(I=t.playerSoftwareVersion)!=null?I:!1}"
      env-key="${(C=t.envKey)!=null?C:!1}"
      custom-domain="${(N=t.customDomain)!=null?N:!1}"
      src="${t.src?t.src:t.playbackId?L1(t):!1}"
      cast-src="${t.src?t.src:t.playbackId?L1(t):!1}"
      cast-receiver="${(P=t.castReceiver)!=null?P:!1}"
      drm-token="${(M=(V=t.tokens)==null?void 0:V.drm)!=null?M:!1}"
      exportparts="video"
    >
      ${t.storyboard?Ta`<track label="thumbnails" default kind="metadata" src="${t.storyboard}" />`:Ta``}
    </mux-video>
    <slot name="poster" slot="poster">
      <media-poster-image
        part="poster"
        exportparts="poster, img"
        src="${t.poster?t.poster:!1}"
        placeholdersrc="${(U=t.placeholder)!=null?U:!1}"
      ></media-poster-image>
    </slot>
    <mxp-dialog
      no-auto-hide
      open="${(B=t.isDialogOpen)!=null?B:!1}"
      onclose="${t.onCloseErrorDialog}"
      oninitfocus="${t.onInitFocusDialog}"
    >
      ${(X=t.dialog)!=null&&X.title?Ta`<h3>${t.dialog.title}</h3>`:Ta``}
      <p>
        ${(te=t.dialog)==null?void 0:te.message}
        ${(D=t.dialog)!=null&&D.linkUrl?Ta`<a
              href="${t.dialog.linkUrl}"
              target="_blank"
              rel="external noopener"
              aria-label="${(L=t.dialog.linkText)!=null?L:""} ${Le("(opens in a new window)")}"
              >${(Y=t.dialog.linkText)!=null?Y:t.dialog.linkUrl}</a
            >`:Ta``}
      </p>
    </mxp-dialog>
  </media-theme>
`},I6=t=>t.charAt(0).toUpperCase()+t.slice(1),ble=(t,e=!1)=>{var r,n;if(t.muxCode){let i=I6((r=t.errorCategory)!=null?r:"video"),s=tv((n=t.errorCategory)!=null?n:Xt.VIDEO);if(t.muxCode===Ne.NETWORK_OFFLINE)return Le("Your device appears to be offline",e);if(t.muxCode===Ne.NETWORK_TOKEN_EXPIRED)return Le("{category} URL has expired",e).format({category:i});if([Ne.NETWORK_TOKEN_SUB_MISMATCH,Ne.NETWORK_TOKEN_AUD_MISMATCH,Ne.NETWORK_TOKEN_AUD_MISSING,Ne.NETWORK_TOKEN_MALFORMED].includes(t.muxCode))return Le("{category} URL is formatted incorrectly",e).format({category:i});if(t.muxCode===Ne.NETWORK_TOKEN_MISSING)return Le("Invalid {categoryName} URL",e).format({categoryName:s});if(t.muxCode===Ne.NETWORK_NOT_FOUND)return Le("{category} does not exist",e).format({category:i});if(t.muxCode===Ne.NETWORK_NOT_READY)return Le("{category} is not currently available",e).format({category:i})}if(t.code){if(t.code===be.MEDIA_ERR_NETWORK)return Le("Network Error",e);if(t.code===be.MEDIA_ERR_DECODE)return Le("Media Error",e);if(t.code===be.MEDIA_ERR_SRC_NOT_SUPPORTED)return Le("Source Not Supported",e)}return Le("Error",e)},yle=(t,e=!1)=>{var r,n;if(t.muxCode){let i=I6((r=t.errorCategory)!=null?r:"video"),s=tv((n=t.errorCategory)!=null?n:Xt.VIDEO);return t.muxCode===Ne.NETWORK_OFFLINE?Le("Check your internet connection and try reloading this video.",e):t.muxCode===Ne.NETWORK_TOKEN_EXPIRED?Le("The video’s secured {tokenNamePrefix}-token has expired.",e).format({tokenNamePrefix:s}):t.muxCode===Ne.NETWORK_TOKEN_SUB_MISMATCH?Le("The video’s playback ID does not match the one encoded in the {tokenNamePrefix}-token.",e).format({tokenNamePrefix:s}):t.muxCode===Ne.NETWORK_TOKEN_MALFORMED?Le("{category} URL is formatted incorrectly",e).format({category:i}):[Ne.NETWORK_TOKEN_AUD_MISMATCH,Ne.NETWORK_TOKEN_AUD_MISSING].includes(t.muxCode)?Le("The {tokenNamePrefix}-token is formatted with incorrect information.",e).format({tokenNamePrefix:s}):[Ne.NETWORK_TOKEN_MISSING,Ne.NETWORK_INVALID_URL].includes(t.muxCode)?Le("The video URL or {tokenNamePrefix}-token are formatted with incorrect or incomplete information.",e).format({tokenNamePrefix:s}):t.muxCode===Ne.NETWORK_NOT_FOUND?"":t.muxCode===Ne.NETWORK_NOT_READY?Le("The live stream or video file are not yet ready.",e):t.message}return t.code&&(t.code===be.MEDIA_ERR_NETWORK||t.code===be.MEDIA_ERR_DECODE||(t.code,be.MEDIA_ERR_SRC_NOT_SUPPORTED)),t.message},Ele=(t,e=!1)=>{let r=ble(t,e),n=yle(t,e);return{title:r,message:n}},_le=t=>{if(t.muxCode){if(t.muxCode===Ne.NETWORK_TOKEN_EXPIRED)return"403-expired-token.md";if(t.muxCode===Ne.NETWORK_TOKEN_MALFORMED)return"403-malformatted-token.md";if([Ne.NETWORK_TOKEN_AUD_MISMATCH,Ne.NETWORK_TOKEN_AUD_MISSING].includes(t.muxCode))return"403-incorrect-aud-value.md";if(t.muxCode===Ne.NETWORK_TOKEN_SUB_MISMATCH)return"403-playback-id-mismatch.md";if(t.muxCode===Ne.NETWORK_TOKEN_MISSING)return"missing-signed-tokens.md";if(t.muxCode===Ne.NETWORK_NOT_FOUND)return"404-not-found.md";if(t.muxCode===Ne.NETWORK_NOT_READY)return"412-not-playable.md"}if(t.code){if(t.code===be.MEDIA_ERR_NETWORK)return"";if(t.code===be.MEDIA_ERR_DECODE)return"media-decode-error.md";if(t.code===be.MEDIA_ERR_SRC_NOT_SUPPORTED)return"media-src-not-supported.md"}return""},Tle=(t,e)=>{let r=_le(t);return{message:t.message,context:t.context,file:r}};function Lk(t,e=!1){let r=Ele(t,e),n=Tle(t);return{dialog:r,devlog:n}}var xle=`<template id="media-theme-gerwig">
  <style>
    @keyframes pre-play-hide {
      0% {
        transform: scale(1);
        opacity: 1;
      }

      30% {
        transform: scale(0.7);
      }

      100% {
        transform: scale(1.5);
        opacity: 0;
      }
    }

    :host {
      --_primary-color: var(--media-primary-color, #fff);
      --_secondary-color: var(--media-secondary-color, transparent);
      --_accent-color: var(--media-accent-color, #fa50b5);
      --_text-color: var(--media-text-color, #000);

      --media-icon-color: var(--_primary-color);
      --media-control-background: var(--_secondary-color);
      --media-control-hover-background: var(--_accent-color);
      --media-time-buffered-color: rgba(255, 255, 255, 0.4);
      --media-preview-time-text-shadow: none;
      --media-control-height: 14px;
      --media-control-padding: 6px;
      --media-tooltip-container-margin: 6px;
      --media-tooltip-distance: 18px;

      color: var(--_primary-color);
      display: inline-block;
      width: 100%;
      height: 100%;
    }

    :host([audio]) {
      --_secondary-color: var(--media-secondary-color, black);
      --media-preview-time-text-shadow: none;
    }

    :host([audio]) ::slotted([slot='media']) {
      height: 0px;
    }

    :host([audio]) media-loading-indicator {
      display: none;
    }

    :host([audio]) media-controller {
      background: transparent;
    }

    :host([audio]) media-controller::part(vertical-layer) {
      background: transparent;
    }

    :host([audio]) media-control-bar {
      width: 100%;
      background-color: var(--media-control-background);
    }

    /*
     * 0.433s is the transition duration for VTT Regions.
     * Borrowed here, so the captions don't move too fast.
     */
    media-controller {
      --media-webkit-text-track-transform: translateY(0) scale(0.98);
      --media-webkit-text-track-transition: transform 0.433s ease-out 0.3s;
    }
    media-controller:is([mediapaused], :not([userinactive])) {
      --media-webkit-text-track-transform: translateY(-50px) scale(0.98);
      --media-webkit-text-track-transition: transform 0.15s ease;
    }

    /*
     * CSS specific to iOS devices.
     * See: https://stackoverflow.com/questions/30102792/css-media-query-to-target-only-ios-devices/60220757#60220757
     */
    @supports (-webkit-touch-callout: none) {
      /* Disable subtitle adjusting for iOS Safari */
      media-controller[mediaisfullscreen] {
        --media-webkit-text-track-transform: unset;
        --media-webkit-text-track-transition: unset;
      }
    }

    media-time-range {
      --media-box-padding-left: 6px;
      --media-box-padding-right: 6px;
      --media-range-bar-color: var(--_accent-color);
      --media-time-range-buffered-color: var(--_primary-color);
      --media-range-track-color: transparent;
      --media-range-track-background: rgba(255, 255, 255, 0.4);
      --media-range-thumb-background: radial-gradient(
        circle,
        #000 0%,
        #000 25%,
        var(--_accent-color) 25%,
        var(--_accent-color)
      );
      --media-range-thumb-width: 12px;
      --media-range-thumb-height: 12px;
      --media-range-thumb-transform: scale(0);
      --media-range-thumb-transition: transform 0.3s;
      --media-range-thumb-opacity: 1;
      --media-preview-background: var(--_primary-color);
      --media-box-arrow-background: var(--_primary-color);
      --media-preview-thumbnail-border: 5px solid var(--_primary-color);
      --media-preview-border-radius: 5px;
      --media-text-color: var(--_text-color);
      --media-control-hover-background: transparent;
      --media-preview-chapter-text-shadow: none;
      color: var(--_accent-color);
      padding: 0 6px;
    }

    :host([audio]) media-time-range {
      --media-preview-time-padding: 1.5px 6px;
      --media-preview-box-margin: 0 0 -5px;
    }

    media-time-range:hover {
      --media-range-thumb-transform: scale(1);
    }

    media-preview-thumbnail {
      border-bottom-width: 0;
    }

    [part~='menu'] {
      border-radius: 2px;
      border: 1px solid rgba(0, 0, 0, 0.1);
      bottom: 50px;
      padding: 2.5px 10px;
    }

    [part~='menu']::part(indicator) {
      fill: var(--_accent-color);
    }

    [part~='menu']::part(menu-item) {
      box-sizing: border-box;
      display: flex;
      align-items: center;
      padding: 6px 10px;
      min-height: 34px;
    }

    [part~='menu']::part(checked) {
      font-weight: 700;
    }

    media-captions-menu,
    media-rendition-menu,
    media-audio-track-menu,
    media-playback-rate-menu {
      position: absolute; /* ensure they don't take up space in DOM on load */
      --media-menu-background: var(--_primary-color);
      --media-menu-item-checked-background: transparent;
      --media-text-color: var(--_text-color);
      --media-menu-item-hover-background: transparent;
      --media-menu-item-hover-outline: var(--_accent-color) solid 1px;
    }

    /* The icon is a circle so make it 16px high instead of 14px for more balance. */
    media-audio-track-menu-button {
      --media-control-padding: 5px;
      --media-control-height: 16px;
    }

    media-playback-rate-menu-button {
      --media-control-padding: 6px 3px;
      min-width: 4.4ch;
    }

    media-playback-rate-menu {
      --media-menu-flex-direction: row;
      --media-menu-item-checked-background: var(--_accent-color);
      --media-menu-item-checked-indicator-display: none;
      margin-right: 6px;
      padding: 0;
      --media-menu-gap: 0.25em;
    }

    media-playback-rate-menu[part~='menu']::part(menu-item) {
      padding: 6px 6px 6px 8px;
    }

    media-playback-rate-menu[part~='menu']::part(checked) {
      color: #fff;
    }

    :host(:not([audio])) media-time-range {
      /* Adding px is required here for calc() */
      --media-range-padding: 0px;
      background: transparent;
      z-index: 10;
      height: 10px;
      bottom: -3px;
      width: 100%;
    }

    media-control-bar :is([role='button'], [role='switch'], button) {
      line-height: 0;
    }

    media-control-bar :is([part*='button'], [part*='range'], [part*='display']) {
      border-radius: 3px;
    }

    .spacer {
      flex-grow: 1;
      background-color: var(--media-control-background, rgba(20, 20, 30, 0.7));
    }

    media-control-bar[slot~='top-chrome'] {
      min-height: 42px;
      pointer-events: none;
    }

    media-control-bar {
      --gradient-steps: hsl(0 0% 0% / 0) 0%, hsl(0 0% 0% / 0.013) 8.1%, hsl(0 0% 0% / 0.049) 15.5%,
        hsl(0 0% 0% / 0.104) 22.5%, hsl(0 0% 0% / 0.175) 29%, hsl(0 0% 0% / 0.259) 35.3%, hsl(0 0% 0% / 0.352) 41.2%,
        hsl(0 0% 0% / 0.45) 47.1%, hsl(0 0% 0% / 0.55) 52.9%, hsl(0 0% 0% / 0.648) 58.8%, hsl(0 0% 0% / 0.741) 64.7%,
        hsl(0 0% 0% / 0.825) 71%, hsl(0 0% 0% / 0.896) 77.5%, hsl(0 0% 0% / 0.951) 84.5%, hsl(0 0% 0% / 0.987) 91.9%,
        hsl(0 0% 0%) 100%;
    }

    :host([title]:not([audio])) media-control-bar[slot='top-chrome']::before {
      content: '';
      position: absolute;
      width: 100%;
      padding-bottom: min(100px, 25%);
      background: linear-gradient(to top, var(--gradient-steps));
      opacity: 0.8;
      pointer-events: none;
    }

    :host(:not([audio])) media-control-bar[part~='bottom']::before {
      content: '';
      position: absolute;
      width: 100%;
      bottom: 0;
      left: 0;
      padding-bottom: min(100px, 25%);
      background: linear-gradient(to bottom, var(--gradient-steps));
      opacity: 0.8;
      z-index: 1;
      pointer-events: none;
    }

    media-control-bar[part~='bottom'] > * {
      z-index: 20;
    }

    media-control-bar[part~='bottom'] {
      padding: 6px 6px;
    }

    media-control-bar[slot~='top-chrome'] > * {
      --media-control-background: transparent;
      --media-control-hover-background: transparent;
      position: relative;
    }

    media-controller::part(vertical-layer) {
      transition: background-color 1s;
    }

    media-controller:is([mediapaused], :not([userinactive]))::part(vertical-layer) {
      background-color: var(--controls-backdrop-color, var(--controls, transparent));
      transition: background-color 0.25s;
    }

    .center-controls {
      --media-button-icon-width: 100%;
      --media-button-icon-height: auto;
      --media-tooltip-display: none;
      pointer-events: none;
      width: 100%;
      display: flex;
      flex-flow: row;
      align-items: center;
      justify-content: center;
      filter: drop-shadow(0 0 2px rgb(0 0 0 / 0.25)) drop-shadow(0 0 6px rgb(0 0 0 / 0.25));
      paint-order: stroke;
      stroke: rgba(102, 102, 102, 1);
      stroke-width: 0.3px;
      text-shadow:
        0 0 2px rgb(0 0 0 / 0.25),
        0 0 6px rgb(0 0 0 / 0.25);
    }

    .center-controls media-play-button {
      --media-control-background: transparent;
      --media-control-hover-background: transparent;
      --media-control-padding: 0;
      width: 40px;
    }

    [breakpointsm] .center-controls media-play-button {
      width: 90px;
      height: 90px;
      border-radius: 50%;
      transition: background 0.4s;
      padding: 24px;
      --media-control-background: #000;
      --media-control-hover-background: var(--_accent-color);
    }

    .center-controls media-seek-backward-button,
    .center-controls media-seek-forward-button {
      --media-control-background: transparent;
      --media-control-hover-background: transparent;
      padding: 0;
      margin: 0 20px;
      width: max(33px, min(8%, 40px));
    }

    [breakpointsm]:not([audio]) .center-controls.pre-playback {
      display: grid;
      align-items: initial;
      justify-content: initial;
      height: 100%;
      overflow: hidden;
    }

    [breakpointsm]:not([audio]) .center-controls.pre-playback media-play-button {
      place-self: var(--_pre-playback-place, center);
      grid-area: 1 / 1;
      margin: 16px;
    }

    /* Show and hide controls or pre-playback state */

    [breakpointsm]:is([mediahasplayed], :not([mediapaused])):not([audio])
      .center-controls.pre-playback
      media-play-button {
      /* Using \`forwards\` would lead to a laggy UI after the animation got in the end state */
      animation: 0.3s linear pre-play-hide;
      opacity: 0;
      pointer-events: none;
    }

    .autoplay-unmute {
      --media-control-hover-background: transparent;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      filter: drop-shadow(0 0 2px rgb(0 0 0 / 0.25)) drop-shadow(0 0 6px rgb(0 0 0 / 0.25));
    }

    .autoplay-unmute-btn {
      --media-control-height: 16px;
      border-radius: 8px;
      background: #000;
      color: var(--_primary-color);
      display: flex;
      align-items: center;
      padding: 8px 16px;
      font-size: 18px;
      font-weight: 500;
      cursor: pointer;
    }

    .autoplay-unmute-btn:hover {
      background: var(--_accent-color);
    }

    [breakpointsm] .autoplay-unmute-btn {
      --media-control-height: 30px;
      padding: 14px 24px;
      font-size: 26px;
    }

    .autoplay-unmute-btn svg {
      margin: 0 6px 0 0;
    }

    [breakpointsm] .autoplay-unmute-btn svg {
      margin: 0 10px 0 0;
    }

    media-controller:not([audio]):not([mediahasplayed]) *:is(media-control-bar, media-time-range) {
      display: none;
    }

    media-loading-indicator {
      --media-loading-icon-width: 100%;
      --media-button-icon-height: auto;
      display: var(--media-control-display, var(--media-loading-indicator-display, flex));
      pointer-events: none;
      position: absolute;
      width: min(15%, 150px);
      flex-flow: row;
      align-items: center;
      justify-content: center;
    }

    /* Intentionally don't target the div for transition but the children
     of the div. Prevents messing with media-chrome's autohide feature. */
    media-loading-indicator + div * {
      transition: opacity 0.15s;
      opacity: 1;
    }

    media-loading-indicator[medialoading]:not([mediapaused]) ~ div > * {
      opacity: 0;
      transition-delay: 400ms;
    }

    media-volume-range {
      width: min(100%, 100px);
      --media-range-padding-left: 10px;
      --media-range-padding-right: 10px;
      --media-range-thumb-width: 12px;
      --media-range-thumb-height: 12px;
      --media-range-thumb-background: radial-gradient(
        circle,
        #000 0%,
        #000 25%,
        var(--_primary-color) 25%,
        var(--_primary-color)
      );
      --media-control-hover-background: none;
    }

    media-time-display {
      white-space: nowrap;
    }

    /* Generic style for explicitly disabled controls */
    media-control-bar[part~='bottom'] [disabled],
    media-control-bar[part~='bottom'] [aria-disabled='true'] {
      opacity: 60%;
      cursor: not-allowed;
    }

    media-text-display {
      --media-font-size: 16px;
      --media-control-padding: 14px;
      font-weight: 500;
    }

    media-play-button.animated *:is(g, path) {
      transition: all 0.3s;
    }

    media-play-button.animated[mediapaused] .pause-icon-pt1 {
      opacity: 0;
    }

    media-play-button.animated[mediapaused] .pause-icon-pt2 {
      transform-origin: center center;
      transform: scaleY(0);
    }

    media-play-button.animated[mediapaused] .play-icon {
      clip-path: inset(0 0 0 0);
    }

    media-play-button.animated:not([mediapaused]) .play-icon {
      clip-path: inset(0 0 0 100%);
    }

    media-seek-forward-button,
    media-seek-backward-button {
      --media-font-weight: 400;
    }

    .mute-icon {
      display: inline-block;
    }

    .mute-icon :is(path, g) {
      transition: opacity 0.5s;
    }

    .muted {
      opacity: 0;
    }

    media-mute-button[mediavolumelevel='low'] :is(.volume-medium, .volume-high),
    media-mute-button[mediavolumelevel='medium'] :is(.volume-high) {
      opacity: 0;
    }

    media-mute-button[mediavolumelevel='off'] .unmuted {
      opacity: 0;
    }

    media-mute-button[mediavolumelevel='off'] .muted {
      opacity: 1;
    }

    /**
     * Our defaults for these buttons are to hide them at small sizes
     * users can override this with CSS
     */
    media-controller:not([breakpointsm]):not([audio]) {
      --bottom-play-button: none;
      --bottom-seek-backward-button: none;
      --bottom-seek-forward-button: none;
      --bottom-time-display: none;
      --bottom-playback-rate-menu-button: none;
      --bottom-pip-button: none;
    }
  </style>

  <template partial="TitleDisplay">
    <template if="title">
      <media-text-display part="top title display" class="title-display">{{title}}</media-text-display>
    </template>
  </template>

  <template partial="PlayButton">
    <media-play-button
      part="{{section ?? 'bottom'}} play button"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
      class="animated"
    >
      <svg aria-hidden="true" viewBox="0 0 18 14" slot="icon">
        <g class="play-icon">
          <path
            d="M15.5987 6.2911L3.45577 0.110898C2.83667 -0.204202 2.06287 0.189698 2.06287 0.819798V13.1802C2.06287 13.8103 2.83667 14.2042 3.45577 13.8891L15.5987 7.7089C16.2178 7.3938 16.2178 6.6061 15.5987 6.2911Z"
          />
        </g>
        <g class="pause-icon">
          <path
            class="pause-icon-pt1"
            d="M5.90709 0H2.96889C2.46857 0 2.06299 0.405585 2.06299 0.9059V13.0941C2.06299 13.5944 2.46857 14 2.96889 14H5.90709C6.4074 14 6.81299 13.5944 6.81299 13.0941V0.9059C6.81299 0.405585 6.4074 0 5.90709 0Z"
          />
          <path
            class="pause-icon-pt2"
            d="M15.1571 0H12.2189C11.7186 0 11.313 0.405585 11.313 0.9059V13.0941C11.313 13.5944 11.7186 14 12.2189 14H15.1571C15.6574 14 16.063 13.5944 16.063 13.0941V0.9059C16.063 0.405585 15.6574 0 15.1571 0Z"
          />
        </g>
      </svg>
    </media-play-button>
  </template>

  <template partial="PrePlayButton">
    <media-play-button
      part="{{section ?? 'center'}} play button pre-play"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    >
      <svg aria-hidden="true" viewBox="0 0 18 14" slot="icon" style="transform: translate(3px, 0)">
        <path
          d="M15.5987 6.2911L3.45577 0.110898C2.83667 -0.204202 2.06287 0.189698 2.06287 0.819798V13.1802C2.06287 13.8103 2.83667 14.2042 3.45577 13.8891L15.5987 7.7089C16.2178 7.3938 16.2178 6.6061 15.5987 6.2911Z"
        />
      </svg>
    </media-play-button>
  </template>

  <template partial="SeekBackwardButton">
    <media-seek-backward-button
      seekoffset="{{backwardseekoffset}}"
      part="{{section ?? 'bottom'}} seek-backward button"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    >
      <svg viewBox="0 0 22 14" aria-hidden="true" slot="icon">
        <path
          d="M3.65 2.07888L0.0864 6.7279C-0.0288 6.87812 -0.0288 7.12188 0.0864 7.2721L3.65 11.9211C3.7792 12.0896 4 11.9703 4 11.7321V2.26787C4 2.02968 3.7792 1.9104 3.65 2.07888Z"
        />
        <text transform="translate(6 12)" style="font-size: 14px; font-family: 'ArialMT', 'Arial'">
          {{backwardseekoffset}}
        </text>
      </svg>
    </media-seek-backward-button>
  </template>

  <template partial="SeekForwardButton">
    <media-seek-forward-button
      seekoffset="{{forwardseekoffset}}"
      part="{{section ?? 'bottom'}} seek-forward button"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    >
      <svg viewBox="0 0 22 14" aria-hidden="true" slot="icon">
        <g>
          <text transform="translate(-1 12)" style="font-size: 14px; font-family: 'ArialMT', 'Arial'">
            {{forwardseekoffset}}
          </text>
          <path
            d="M18.35 11.9211L21.9136 7.2721C22.0288 7.12188 22.0288 6.87812 21.9136 6.7279L18.35 2.07888C18.2208 1.91041 18 2.02968 18 2.26787V11.7321C18 11.9703 18.2208 12.0896 18.35 11.9211Z"
          />
        </g>
      </svg>
    </media-seek-forward-button>
  </template>

  <template partial="MuteButton">
    <media-mute-button part="bottom mute button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" slot="icon" class="mute-icon" aria-hidden="true">
        <g class="unmuted">
          <path
            d="M6.76786 1.21233L3.98606 3.98924H1.19937C0.593146 3.98924 0.101743 4.51375 0.101743 5.1607V6.96412L0 6.99998L0.101743 7.03583V8.83926C0.101743 9.48633 0.593146 10.0108 1.19937 10.0108H3.98606L6.76773 12.7877C7.23561 13.2547 8 12.9007 8 12.2171V1.78301C8 1.09925 7.23574 0.745258 6.76786 1.21233Z"
          />
          <path
            class="volume-low"
            d="M10 3.54781C10.7452 4.55141 11.1393 5.74511 11.1393 6.99991C11.1393 8.25471 10.7453 9.44791 10 10.4515L10.7988 11.0496C11.6734 9.87201 12.1356 8.47161 12.1356 6.99991C12.1356 5.52821 11.6735 4.12731 10.7988 2.94971L10 3.54781Z"
          />
          <path
            class="volume-medium"
            d="M12.3778 2.40086C13.2709 3.76756 13.7428 5.35806 13.7428 7.00026C13.7428 8.64246 13.2709 10.233 12.3778 11.5992L13.2106 12.1484C14.2107 10.6185 14.739 8.83796 14.739 7.00016C14.739 5.16236 14.2107 3.38236 13.2106 1.85156L12.3778 2.40086Z"
          />
          <path
            class="volume-high"
            d="M15.5981 0.75L14.7478 1.2719C15.7937 2.9919 16.3468 4.9723 16.3468 7C16.3468 9.0277 15.7937 11.0082 14.7478 12.7281L15.5981 13.25C16.7398 11.3722 17.343 9.211 17.343 7C17.343 4.789 16.7398 2.6268 15.5981 0.75Z"
          />
        </g>
        <g class="muted">
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M4.39976 4.98924H1.19937C1.19429 4.98924 1.17777 4.98961 1.15296 5.01609C1.1271 5.04369 1.10174 5.09245 1.10174 5.1607V8.83926C1.10174 8.90761 1.12714 8.95641 1.15299 8.984C1.17779 9.01047 1.1943 9.01084 1.19937 9.01084H4.39977L7 11.6066V2.39357L4.39976 4.98924ZM7.47434 1.92006C7.4743 1.9201 7.47439 1.92002 7.47434 1.92006V1.92006ZM6.76773 12.7877L3.98606 10.0108H1.19937C0.593146 10.0108 0.101743 9.48633 0.101743 8.83926V7.03583L0 6.99998L0.101743 6.96412V5.1607C0.101743 4.51375 0.593146 3.98924 1.19937 3.98924H3.98606L6.76786 1.21233C7.23574 0.745258 8 1.09925 8 1.78301V12.2171C8 12.9007 7.23561 13.2547 6.76773 12.7877Z"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M15.2677 9.30323C15.463 9.49849 15.7796 9.49849 15.9749 9.30323C16.1701 9.10796 16.1701 8.79138 15.9749 8.59612L14.2071 6.82841L15.9749 5.06066C16.1702 4.8654 16.1702 4.54882 15.9749 4.35355C15.7796 4.15829 15.4631 4.15829 15.2678 4.35355L13.5 6.1213L11.7322 4.35348C11.537 4.15822 11.2204 4.15822 11.0251 4.35348C10.8298 4.54874 10.8298 4.86532 11.0251 5.06058L12.7929 6.82841L11.0251 8.59619C10.8299 8.79146 10.8299 9.10804 11.0251 9.3033C11.2204 9.49856 11.537 9.49856 11.7323 9.3033L13.5 7.53552L15.2677 9.30323Z"
          />
        </g>
      </svg>
    </media-mute-button>
  </template>

  <template partial="PipButton">
    <media-pip-button part="bottom pip button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="icon">
        <path
          d="M15.9891 0H2.011C0.9004 0 0 0.9003 0 2.0109V11.989C0 13.0996 0.9004 14 2.011 14H15.9891C17.0997 14 18 13.0997 18 11.9891V2.0109C18 0.9003 17.0997 0 15.9891 0ZM17 11.9891C17 12.5465 16.5465 13 15.9891 13H2.011C1.4536 13 1.0001 12.5465 1.0001 11.9891V2.0109C1.0001 1.4535 1.4536 0.9999 2.011 0.9999H15.9891C16.5465 0.9999 17 1.4535 17 2.0109V11.9891Z"
        />
        <path
          d="M15.356 5.67822H8.19523C8.03253 5.67822 7.90063 5.81012 7.90063 5.97282V11.3836C7.90063 11.5463 8.03253 11.6782 8.19523 11.6782H15.356C15.5187 11.6782 15.6506 11.5463 15.6506 11.3836V5.97282C15.6506 5.81012 15.5187 5.67822 15.356 5.67822Z"
        />
      </svg>
    </media-pip-button>
  </template>

  <template partial="CaptionsMenu">
    <media-captions-menu-button part="bottom captions button">
      <svg aria-hidden="true" viewBox="0 0 18 14" slot="on">
        <path
          d="M15.989 0H2.011C0.9004 0 0 0.9003 0 2.0109V11.9891C0 13.0997 0.9004 14 2.011 14H15.989C17.0997 14 18 13.0997 18 11.9891V2.0109C18 0.9003 17.0997 0 15.989 0ZM4.2292 8.7639C4.5954 9.1902 5.0935 9.4031 5.7233 9.4031C6.1852 9.4031 6.5544 9.301 6.8302 9.0969C7.1061 8.8933 7.2863 8.614 7.3702 8.26H8.4322C8.3062 8.884 8.0093 9.3733 7.5411 9.7273C7.0733 10.0813 6.4703 10.2581 5.732 10.2581C5.108 10.2581 4.5699 10.1219 4.1168 9.8489C3.6637 9.5759 3.3141 9.1946 3.0685 8.7058C2.8224 8.2165 2.6994 7.6511 2.6994 7.009C2.6994 6.3611 2.8224 5.7927 3.0685 5.3034C3.3141 4.8146 3.6637 4.4323 4.1168 4.1559C4.5699 3.88 5.108 3.7418 5.732 3.7418C6.4703 3.7418 7.0733 3.922 7.5411 4.2818C8.0094 4.6422 8.3062 5.1461 8.4322 5.794H7.3702C7.2862 5.4283 7.106 5.1368 6.8302 4.921C6.5544 4.7052 6.1852 4.5968 5.7233 4.5968C5.0934 4.5968 4.5954 4.8116 4.2292 5.2404C3.8635 5.6696 3.6804 6.259 3.6804 7.009C3.6804 7.7531 3.8635 8.3381 4.2292 8.7639ZM11.0974 8.7639C11.4636 9.1902 11.9617 9.4031 12.5915 9.4031C13.0534 9.4031 13.4226 9.301 13.6984 9.0969C13.9743 8.8933 14.1545 8.614 14.2384 8.26H15.3004C15.1744 8.884 14.8775 9.3733 14.4093 9.7273C13.9415 10.0813 13.3385 10.2581 12.6002 10.2581C11.9762 10.2581 11.4381 10.1219 10.985 9.8489C10.5319 9.5759 10.1823 9.1946 9.9367 8.7058C9.6906 8.2165 9.5676 7.6511 9.5676 7.009C9.5676 6.3611 9.6906 5.7927 9.9367 5.3034C10.1823 4.8146 10.5319 4.4323 10.985 4.1559C11.4381 3.88 11.9762 3.7418 12.6002 3.7418C13.3385 3.7418 13.9415 3.922 14.4093 4.2818C14.8776 4.6422 15.1744 5.1461 15.3004 5.794H14.2384C14.1544 5.4283 13.9742 5.1368 13.6984 4.921C13.4226 4.7052 13.0534 4.5968 12.5915 4.5968C11.9616 4.5968 11.4636 4.8116 11.0974 5.2404C10.7317 5.6696 10.5486 6.259 10.5486 7.009C10.5486 7.7531 10.7317 8.3381 11.0974 8.7639Z"
        />
      </svg>
      <svg aria-hidden="true" viewBox="0 0 18 14" slot="off">
        <path
          d="M5.73219 10.258C5.10819 10.258 4.57009 10.1218 4.11699 9.8488C3.66389 9.5758 3.31429 9.1945 3.06869 8.7057C2.82259 8.2164 2.69958 7.651 2.69958 7.0089C2.69958 6.361 2.82259 5.7926 3.06869 5.3033C3.31429 4.8145 3.66389 4.4322 4.11699 4.1558C4.57009 3.8799 5.10819 3.7417 5.73219 3.7417C6.47049 3.7417 7.07348 3.9219 7.54128 4.2817C8.00958 4.6421 8.30638 5.146 8.43238 5.7939H7.37039C7.28639 5.4282 7.10618 5.1367 6.83039 4.9209C6.55459 4.7051 6.18538 4.5967 5.72348 4.5967C5.09358 4.5967 4.59559 4.8115 4.22939 5.2403C3.86369 5.6695 3.68058 6.2589 3.68058 7.0089C3.68058 7.753 3.86369 8.338 4.22939 8.7638C4.59559 9.1901 5.09368 9.403 5.72348 9.403C6.18538 9.403 6.55459 9.3009 6.83039 9.0968C7.10629 8.8932 7.28649 8.6139 7.37039 8.2599H8.43238C8.30638 8.8839 8.00948 9.3732 7.54128 9.7272C7.07348 10.0812 6.47049 10.258 5.73219 10.258Z"
        />
        <path
          d="M12.6003 10.258C11.9763 10.258 11.4382 10.1218 10.9851 9.8488C10.532 9.5758 10.1824 9.1945 9.93685 8.7057C9.69075 8.2164 9.56775 7.651 9.56775 7.0089C9.56775 6.361 9.69075 5.7926 9.93685 5.3033C10.1824 4.8145 10.532 4.4322 10.9851 4.1558C11.4382 3.8799 11.9763 3.7417 12.6003 3.7417C13.3386 3.7417 13.9416 3.9219 14.4094 4.2817C14.8777 4.6421 15.1745 5.146 15.3005 5.7939H14.2385C14.1545 5.4282 13.9743 5.1367 13.6985 4.9209C13.4227 4.7051 13.0535 4.5967 12.5916 4.5967C11.9617 4.5967 11.4637 4.8115 11.0975 5.2403C10.7318 5.6695 10.5487 6.2589 10.5487 7.0089C10.5487 7.753 10.7318 8.338 11.0975 8.7638C11.4637 9.1901 11.9618 9.403 12.5916 9.403C13.0535 9.403 13.4227 9.3009 13.6985 9.0968C13.9744 8.8932 14.1546 8.6139 14.2385 8.2599H15.3005C15.1745 8.8839 14.8776 9.3732 14.4094 9.7272C13.9416 10.0812 13.3386 10.258 12.6003 10.258Z"
        />
        <path
          d="M15.9891 1C16.5465 1 17 1.4535 17 2.011V11.9891C17 12.5465 16.5465 13 15.9891 13H2.0109C1.4535 13 1 12.5465 1 11.9891V2.0109C1 1.4535 1.4535 0.9999 2.0109 0.9999L15.9891 1ZM15.9891 0H2.0109C0.9003 0 0 0.9003 0 2.0109V11.9891C0 13.0997 0.9003 14 2.0109 14H15.9891C17.0997 14 18 13.0997 18 11.9891V2.0109C18 0.9003 17.0997 0 15.9891 0Z"
        />
      </svg>
    </media-captions-menu-button>
    <media-captions-menu
      hidden
      anchor="auto"
      part="bottom captions menu"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
      exportparts="menu-item"
    >
      <div slot="checked-indicator">
        <style>
          .indicator {
            position: relative;
            top: 1px;
            width: 0.9em;
            height: auto;
            fill: var(--_accent-color);
            margin-right: 5px;
          }

          [aria-checked='false'] .indicator {
            display: none;
          }
        </style>
        <svg viewBox="0 0 14 18" class="indicator">
          <path
            d="M12.252 3.48c-.115.033-.301.161-.425.291-.059.063-1.407 1.815-2.995 3.894s-2.897 3.79-2.908 3.802c-.013.014-.661-.616-1.672-1.624-.908-.905-1.702-1.681-1.765-1.723-.401-.27-.783-.211-1.176.183a1.285 1.285 0 0 0-.261.342.582.582 0 0 0-.082.35c0 .165.01.205.08.35.075.153.213.296 2.182 2.271 1.156 1.159 2.17 2.159 2.253 2.222.189.143.338.196.539.194.203-.003.412-.104.618-.299.205-.193 6.7-8.693 6.804-8.903a.716.716 0 0 0 .085-.345c.01-.179.005-.203-.062-.339-.124-.252-.45-.531-.746-.639a.784.784 0 0 0-.469-.027"
            fill-rule="evenodd"
          />
        </svg></div
    ></media-captions-menu>
  </template>

  <template partial="AirplayButton">
    <media-airplay-button part="bottom airplay button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="icon">
        <path
          d="M16.1383 0H1.8618C0.8335 0 0 0.8335 0 1.8617V10.1382C0 11.1664 0.8335 12 1.8618 12H3.076C3.1204 11.9433 3.1503 11.8785 3.2012 11.826L4.004 11H1.8618C1.3866 11 1 10.6134 1 10.1382V1.8617C1 1.3865 1.3866 0.9999 1.8618 0.9999H16.1383C16.6135 0.9999 17.0001 1.3865 17.0001 1.8617V10.1382C17.0001 10.6134 16.6135 11 16.1383 11H13.9961L14.7989 11.826C14.8499 11.8785 14.8798 11.9432 14.9241 12H16.1383C17.1665 12 18.0001 11.1664 18.0001 10.1382V1.8617C18 0.8335 17.1665 0 16.1383 0Z"
        />
        <path
          d="M9.55061 8.21903C9.39981 8.06383 9.20001 7.98633 9.00011 7.98633C8.80021 7.98633 8.60031 8.06383 8.44951 8.21903L4.09771 12.697C3.62471 13.1838 3.96961 13.9998 4.64831 13.9998H13.3518C14.0304 13.9998 14.3754 13.1838 13.9023 12.697L9.55061 8.21903Z"
        />
      </svg>
    </media-airplay-button>
  </template>

  <template partial="FullscreenButton">
    <media-fullscreen-button part="bottom fullscreen button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="enter">
        <path
          d="M1.00745 4.39539L1.01445 1.98789C1.01605 1.43049 1.47085 0.978289 2.02835 0.979989L6.39375 0.992589L6.39665 -0.007411L2.03125 -0.020011C0.920646 -0.023211 0.0176463 0.874489 0.0144463 1.98509L0.00744629 4.39539H1.00745Z"
        />
        <path
          d="M17.0144 2.03431L17.0076 4.39541H18.0076L18.0144 2.03721C18.0176 0.926712 17.1199 0.0237125 16.0093 0.0205125L11.6439 0.0078125L11.641 1.00781L16.0064 1.02041C16.5638 1.02201 17.016 1.47681 17.0144 2.03431Z"
        />
        <path
          d="M16.9925 9.60498L16.9855 12.0124C16.9839 12.5698 16.5291 13.022 15.9717 13.0204L11.6063 13.0078L11.6034 14.0078L15.9688 14.0204C17.0794 14.0236 17.9823 13.1259 17.9855 12.0153L17.9925 9.60498H16.9925Z"
        />
        <path
          d="M0.985626 11.9661L0.992426 9.60498H-0.0074737L-0.0142737 11.9632C-0.0174737 13.0738 0.880226 13.9767 1.99083 13.98L6.35623 13.9926L6.35913 12.9926L1.99373 12.98C1.43633 12.9784 0.983926 12.5236 0.985626 11.9661Z"
        />
      </svg>
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="exit">
        <path
          d="M5.39655 -0.0200195L5.38955 2.38748C5.38795 2.94488 4.93315 3.39708 4.37565 3.39538L0.0103463 3.38278L0.00744629 4.38278L4.37285 4.39538C5.48345 4.39858 6.38635 3.50088 6.38965 2.39028L6.39665 -0.0200195H5.39655Z"
        />
        <path
          d="M12.6411 2.36891L12.6479 0.0078125H11.6479L11.6411 2.36601C11.6379 3.47651 12.5356 4.37951 13.6462 4.38271L18.0116 4.39531L18.0145 3.39531L13.6491 3.38271C13.0917 3.38111 12.6395 2.92641 12.6411 2.36891Z"
        />
        <path
          d="M12.6034 14.0204L12.6104 11.613C12.612 11.0556 13.0668 10.6034 13.6242 10.605L17.9896 10.6176L17.9925 9.61759L13.6271 9.60499C12.5165 9.60179 11.6136 10.4995 11.6104 11.6101L11.6034 14.0204H12.6034Z"
        />
        <path
          d="M5.359 11.6315L5.3522 13.9926H6.3522L6.359 11.6344C6.3622 10.5238 5.4645 9.62088 4.3539 9.61758L-0.0115043 9.60498L-0.0144043 10.605L4.351 10.6176C4.9084 10.6192 5.3607 11.074 5.359 11.6315Z"
        />
      </svg>
    </media-fullscreen-button>
  </template>

  <template partial="CastButton">
    <media-cast-button part="bottom cast button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="enter">
        <path
          d="M16.0072 0H2.0291C0.9185 0 0.0181 0.9003 0.0181 2.011V5.5009C0.357 5.5016 0.6895 5.5275 1.0181 5.5669V2.011C1.0181 1.4536 1.4716 1 2.029 1H16.0072C16.5646 1 17.0181 1.4536 17.0181 2.011V11.9891C17.0181 12.5465 16.5646 13 16.0072 13H8.4358C8.4746 13.3286 8.4999 13.6611 8.4999 13.9999H16.0071C17.1177 13.9999 18.018 13.0996 18.018 11.989V2.011C18.0181 0.9003 17.1178 0 16.0072 0ZM0 6.4999V7.4999C3.584 7.4999 6.5 10.4159 6.5 13.9999H7.5C7.5 9.8642 4.1357 6.4999 0 6.4999ZM0 8.7499V9.7499C2.3433 9.7499 4.25 11.6566 4.25 13.9999H5.25C5.25 11.1049 2.895 8.7499 0 8.7499ZM0.0181 11V14H3.0181C3.0181 12.3431 1.675 11 0.0181 11Z"
        />
      </svg>
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="exit">
        <path
          d="M15.9891 0H2.01103C0.900434 0 3.35947e-05 0.9003 3.35947e-05 2.011V5.5009C0.338934 5.5016 0.671434 5.5275 1.00003 5.5669V2.011C1.00003 1.4536 1.45353 1 2.01093 1H15.9891C16.5465 1 17 1.4536 17 2.011V11.9891C17 12.5465 16.5465 13 15.9891 13H8.41773C8.45653 13.3286 8.48183 13.6611 8.48183 13.9999H15.989C17.0996 13.9999 17.9999 13.0996 17.9999 11.989V2.011C18 0.9003 17.0997 0 15.9891 0ZM-0.0180664 6.4999V7.4999C3.56593 7.4999 6.48193 10.4159 6.48193 13.9999H7.48193C7.48193 9.8642 4.11763 6.4999 -0.0180664 6.4999ZM-0.0180664 8.7499V9.7499C2.32523 9.7499 4.23193 11.6566 4.23193 13.9999H5.23193C5.23193 11.1049 2.87693 8.7499 -0.0180664 8.7499ZM3.35947e-05 11V14H3.00003C3.00003 12.3431 1.65693 11 3.35947e-05 11Z"
        />
        <path d="M2.15002 5.634C5.18352 6.4207 7.57252 8.8151 8.35282 11.8499H15.8501V2.1499H2.15002V5.634Z" />
      </svg>
    </media-cast-button>
  </template>

  <template partial="LiveButton">
    <media-live-button part="{{section ?? 'top'}} live button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <span slot="text">Live</span>
    </media-live-button>
  </template>

  <template partial="PlaybackRateMenu">
    <media-playback-rate-menu-button part="bottom playback-rate button"></media-playback-rate-menu-button>
    <media-playback-rate-menu
      hidden
      anchor="auto"
      rates="{{playbackrates}}"
      exportparts="menu-item"
      part="bottom playback-rate menu"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    ></media-playback-rate-menu>
  </template>

  <template partial="VolumeRange">
    <media-volume-range
      part="bottom volume range"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    ></media-volume-range>
  </template>

  <template partial="TimeDisplay">
    <media-time-display
      remaining="{{defaultshowremainingtime}}"
      showduration="{{!hideduration}}"
      part="bottom time display"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    ></media-time-display>
  </template>

  <template partial="TimeRange">
    <media-time-range part="bottom time range" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <media-preview-thumbnail slot="preview"></media-preview-thumbnail>
      <media-preview-chapter-display slot="preview"></media-preview-chapter-display>
      <media-preview-time-display slot="preview"></media-preview-time-display>
      <div slot="preview" part="arrow"></div>
    </media-time-range>
  </template>

  <template partial="AudioTrackMenu">
    <media-audio-track-menu-button part="bottom audio-track button">
      <svg aria-hidden="true" slot="icon" viewBox="0 0 18 16">
        <path d="M9 15A7 7 0 1 1 9 1a7 7 0 0 1 0 14Zm0 1A8 8 0 1 0 9 0a8 8 0 0 0 0 16Z" />
        <path
          d="M5.2 6.3a.5.5 0 0 1 .5.5v2.4a.5.5 0 1 1-1 0V6.8a.5.5 0 0 1 .5-.5Zm2.4-2.4a.5.5 0 0 1 .5.5v7.2a.5.5 0 0 1-1 0V4.4a.5.5 0 0 1 .5-.5ZM10 5.5a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm2.4-.8a.5.5 0 0 1 .5.5v5.6a.5.5 0 0 1-1 0V5.2a.5.5 0 0 1 .5-.5Z"
        />
      </svg>
    </media-audio-track-menu-button>
    <media-audio-track-menu
      hidden
      anchor="auto"
      part="bottom audio-track menu"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
      exportparts="menu-item"
    >
      <div slot="checked-indicator">
        <style>
          .indicator {
            position: relative;
            top: 1px;
            width: 0.9em;
            height: auto;
            fill: var(--_accent-color);
            margin-right: 5px;
          }

          [aria-checked='false'] .indicator {
            display: none;
          }
        </style>
        <svg viewBox="0 0 14 18" class="indicator">
          <path
            d="M12.252 3.48c-.115.033-.301.161-.425.291-.059.063-1.407 1.815-2.995 3.894s-2.897 3.79-2.908 3.802c-.013.014-.661-.616-1.672-1.624-.908-.905-1.702-1.681-1.765-1.723-.401-.27-.783-.211-1.176.183a1.285 1.285 0 0 0-.261.342.582.582 0 0 0-.082.35c0 .165.01.205.08.35.075.153.213.296 2.182 2.271 1.156 1.159 2.17 2.159 2.253 2.222.189.143.338.196.539.194.203-.003.412-.104.618-.299.205-.193 6.7-8.693 6.804-8.903a.716.716 0 0 0 .085-.345c.01-.179.005-.203-.062-.339-.124-.252-.45-.531-.746-.639a.784.784 0 0 0-.469-.027"
            fill-rule="evenodd"
          />
        </svg>
      </div>
    </media-audio-track-menu>
  </template>

  <template partial="RenditionMenu">
    <media-rendition-menu-button part="bottom rendition button">
      <svg aria-hidden="true" slot="icon" viewBox="0 0 18 14">
        <path
          d="M2.25 9a2 2 0 1 0 0-4 2 2 0 0 0 0 4ZM9 9a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm6.75 0a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z"
        />
      </svg>
    </media-rendition-menu-button>
    <media-rendition-menu
      hidden
      anchor="auto"
      part="bottom rendition menu"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    >
      <div slot="checked-indicator">
        <style>
          .indicator {
            position: relative;
            top: 1px;
            width: 0.9em;
            height: auto;
            fill: var(--_accent-color);
            margin-right: 5px;
          }

          [aria-checked='false'] .indicator {
            display: none;
          }
        </style>
        <svg viewBox="0 0 14 18" class="indicator">
          <path
            d="M12.252 3.48c-.115.033-.301.161-.425.291-.059.063-1.407 1.815-2.995 3.894s-2.897 3.79-2.908 3.802c-.013.014-.661-.616-1.672-1.624-.908-.905-1.702-1.681-1.765-1.723-.401-.27-.783-.211-1.176.183a1.285 1.285 0 0 0-.261.342.582.582 0 0 0-.082.35c0 .165.01.205.08.35.075.153.213.296 2.182 2.271 1.156 1.159 2.17 2.159 2.253 2.222.189.143.338.196.539.194.203-.003.412-.104.618-.299.205-.193 6.7-8.693 6.804-8.903a.716.716 0 0 0 .085-.345c.01-.179.005-.203-.062-.339-.124-.252-.45-.531-.746-.639a.784.784 0 0 0-.469-.027"
            fill-rule="evenodd"
          />
        </svg>
      </div>
    </media-rendition-menu>
  </template>

  <media-controller
    part="controller"
    defaultstreamtype="{{defaultstreamtype ?? 'on-demand'}}"
    breakpoints="sm:470"
    gesturesdisabled="{{disabled}}"
    hotkeys="{{hotkeys}}"
    nohotkeys="{{nohotkeys}}"
    novolumepref="{{novolumepref}}"
    audio="{{audio}}"
    noautoseektolive="{{noautoseektolive}}"
    defaultsubtitles="{{defaultsubtitles}}"
    defaultduration="{{defaultduration ?? false}}"
    keyboardforwardseekoffset="{{forwardseekoffset}}"
    keyboardbackwardseekoffset="{{backwardseekoffset}}"
    exportparts="layer, media-layer, poster-layer, vertical-layer, centered-layer, gesture-layer"
    style="--_pre-playback-place:{{preplaybackplace ?? 'center'}}"
  >
    <slot name="media" slot="media"></slot>
    <slot name="poster" slot="poster"></slot>

    <media-loading-indicator slot="centered-chrome" noautohide></media-loading-indicator>

    <template if="!audio">
      <!-- Pre-playback UI -->
      <!-- same for both on-demand and live -->
      <div slot="centered-chrome" class="center-controls pre-playback">
        <template if="!breakpointsm">{{>PlayButton section="center"}}</template>
        <template if="breakpointsm">{{>PrePlayButton section="center"}}</template>
      </div>

      <!-- Autoplay centered unmute button -->
      <!--
        todo: figure out how show this with available state variables
        needs to show when:
        - autoplay is enabled
        - playback has been successful
        - audio is muted
        - in place / instead of the pre-plaback play button
        - not to show again after user has interacted with this button
          - OR user has interacted with the mute button in the control bar
      -->
      <!--
        There should be a >MuteButton to the left of the "Unmute" text, but a templating bug
        makes it appear even if commented out in the markup, add it back when code is un-commented
      -->
      <!-- <div slot="centered-chrome" class="autoplay-unmute">
        <div role="button" class="autoplay-unmute-btn">Unmute</div>
      </div> -->

      <template if="streamtype == 'on-demand'">
        <template if="breakpointsm">
          <media-control-bar part="control-bar top" slot="top-chrome">{{>TitleDisplay}} </media-control-bar>
        </template>
        {{>TimeRange}}
        <media-control-bar part="control-bar bottom">
          {{>PlayButton}} {{>SeekBackwardButton}} {{>SeekForwardButton}} {{>TimeDisplay}} {{>MuteButton}}
          {{>VolumeRange}}
          <div class="spacer"></div>
          {{>RenditionMenu}} {{>PlaybackRateMenu}} {{>AudioTrackMenu}} {{>CaptionsMenu}} {{>AirplayButton}}
          {{>CastButton}} {{>PipButton}} {{>FullscreenButton}}
        </media-control-bar>
      </template>

      <template if="streamtype == 'live'">
        <media-control-bar part="control-bar top" slot="top-chrome">
          {{>LiveButton}}
          <template if="breakpointsm"> {{>TitleDisplay}} </template>
        </media-control-bar>
        <template if="targetlivewindow > 0">{{>TimeRange}}</template>
        <media-control-bar part="control-bar bottom">
          {{>PlayButton}}
          <template if="targetlivewindow > 0">{{>SeekBackwardButton}} {{>SeekForwardButton}}</template>
          {{>MuteButton}} {{>VolumeRange}}
          <div class="spacer"></div>
          {{>RenditionMenu}} {{>AudioTrackMenu}} {{>CaptionsMenu}} {{>AirplayButton}} {{>CastButton}} {{>PipButton}}
          {{>FullscreenButton}}
        </media-control-bar>
      </template>
    </template>

    <template if="audio">
      <template if="streamtype == 'on-demand'">
        <template if="title">
          <media-control-bar part="control-bar top">{{>TitleDisplay}}</media-control-bar>
        </template>
        <media-control-bar part="control-bar bottom">
          {{>PlayButton}}
          <template if="breakpointsm"> {{>SeekBackwardButton}} {{>SeekForwardButton}} </template>
          {{>MuteButton}}
          <template if="breakpointsm">{{>VolumeRange}}</template>
          {{>TimeDisplay}} {{>TimeRange}}
          <template if="breakpointsm">{{>PlaybackRateMenu}}</template>
          {{>AirplayButton}} {{>CastButton}}
        </media-control-bar>
      </template>

      <template if="streamtype == 'live'">
        <template if="title">
          <media-control-bar part="control-bar top">{{>TitleDisplay}}</media-control-bar>
        </template>
        <media-control-bar part="control-bar bottom">
          {{>PlayButton}} {{>LiveButton section="bottom"}} {{>MuteButton}}
          <template if="breakpointsm">
            {{>VolumeRange}}
            <template if="targetlivewindow > 0"> {{>SeekBackwardButton}} {{>SeekForwardButton}} </template>
          </template>
          <template if="targetlivewindow > 0"> {{>TimeDisplay}} {{>TimeRange}} </template>
          <template if="!targetlivewindow"><div class="spacer"></div></template>
          {{>AirplayButton}} {{>CastButton}}
        </media-control-bar>
      </template>
    </template>

    <slot></slot>
  </media-controller>
</template>
`,qE=Ka.createElement("template");"innerHTML"in qE&&(qE.innerHTML=xle);var Dk,Ok,k6=class extends mv{};k6.template=(Ok=(Dk=qE.content)==null?void 0:Dk.children)==null?void 0:Ok[0];en.customElements.get("media-theme-gerwig")||en.customElements.define("media-theme-gerwig",k6);var Sle="gerwig",Ps={SRC:"src",POSTER:"poster"},le={STYLE:"style",DEFAULT_HIDDEN_CAPTIONS:"default-hidden-captions",PRIMARY_COLOR:"primary-color",SECONDARY_COLOR:"secondary-color",ACCENT_COLOR:"accent-color",FORWARD_SEEK_OFFSET:"forward-seek-offset",BACKWARD_SEEK_OFFSET:"backward-seek-offset",PLAYBACK_TOKEN:"playback-token",THUMBNAIL_TOKEN:"thumbnail-token",STORYBOARD_TOKEN:"storyboard-token",DRM_TOKEN:"drm-token",STORYBOARD_SRC:"storyboard-src",THUMBNAIL_TIME:"thumbnail-time",AUDIO:"audio",NOHOTKEYS:"nohotkeys",HOTKEYS:"hotkeys",PLAYBACK_RATES:"playbackrates",DEFAULT_SHOW_REMAINING_TIME:"default-show-remaining-time",DEFAULT_DURATION:"default-duration",TITLE:"title",PLACEHOLDER:"placeholder",THEME:"theme",DEFAULT_STREAM_TYPE:"default-stream-type",TARGET_LIVE_WINDOW:"target-live-window",EXTRA_SOURCE_PARAMS:"extra-source-params",NO_VOLUME_PREF:"no-volume-pref",CAST_RECEIVER:"cast-receiver",NO_TOOLTIPS:"no-tooltips"},zE=["audio","backwardseekoffset","defaultduration","defaultshowremainingtime","defaultsubtitles","noautoseektolive","disabled","exportparts","forwardseekoffset","hideduration","hotkeys","nohotkeys","playbackrates","defaultstreamtype","streamtype","style","targetlivewindow","template","title","novolumepref"];function wle(t,e){var r;return{src:!t.playbackId&&t.src,playbackId:t.playbackId,hasSrc:!!t.playbackId||!!t.src||!!t.currentSrc,poster:t.poster,storyboard:t.storyboard,storyboardSrc:t.getAttribute(le.STORYBOARD_SRC),placeholder:t.getAttribute("placeholder"),themeTemplate:Ale(t),thumbnailTime:!t.tokens.thumbnail&&t.thumbnailTime,autoplay:t.autoplay,crossOrigin:t.crossOrigin,loop:t.loop,noHotKeys:t.hasAttribute(le.NOHOTKEYS),hotKeys:t.getAttribute(le.HOTKEYS),muted:t.muted,paused:t.paused,preload:t.preload,envKey:t.envKey,preferCmcd:t.preferCmcd,debug:t.debug,disableTracking:t.disableTracking,disableCookies:t.disableCookies,tokens:t.tokens,beaconCollectionDomain:t.beaconCollectionDomain,maxResolution:t.maxResolution,minResolution:t.minResolution,programStartTime:t.programStartTime,programEndTime:t.programEndTime,assetStartTime:t.assetStartTime,assetEndTime:t.assetEndTime,renditionOrder:t.renditionOrder,metadata:t.metadata,playerSoftwareName:t.playerSoftwareName,playerSoftwareVersion:t.playerSoftwareVersion,startTime:t.startTime,preferPlayback:t.preferPlayback,audio:t.audio,defaultStreamType:t.defaultStreamType,targetLiveWindow:t.getAttribute(ee.TARGET_LIVE_WINDOW),streamType:jS(t.getAttribute(ee.STREAM_TYPE)),primaryColor:t.getAttribute(le.PRIMARY_COLOR),secondaryColor:t.getAttribute(le.SECONDARY_COLOR),accentColor:t.getAttribute(le.ACCENT_COLOR),forwardSeekOffset:t.forwardSeekOffset,backwardSeekOffset:t.backwardSeekOffset,defaultHiddenCaptions:t.defaultHiddenCaptions,defaultDuration:t.defaultDuration,defaultShowRemainingTime:t.defaultShowRemainingTime,hideDuration:Rle(t),playbackRates:t.getAttribute(le.PLAYBACK_RATES),customDomain:(r=t.getAttribute(ee.CUSTOM_DOMAIN))!=null?r:void 0,title:t.getAttribute(le.TITLE),novolumepref:t.hasAttribute(le.NO_VOLUME_PREF),castReceiver:t.castReceiver,...e,extraSourceParams:t.extraSourceParams}}function Ale(t){var e,r;let n=t.theme;if(n){let i=(r=(e=t.getRootNode())==null?void 0:e.getElementById)==null?void 0:r.call(e,n);if(i&&i instanceof HTMLTemplateElement)return i;n.startsWith("media-theme-")||(n=`media-theme-${n}`);let s=en.customElements.get(n);if(s!=null&&s.template)return s.template}}function Rle(t){var e;let r=(e=t.mediaController)==null?void 0:e.querySelector("media-time-display");return r&&getComputedStyle(r).getPropertyValue("--media-duration-display-display").trim()==="none"}function Mk(t){let e=t.hasAttribute(le.TITLE)?{video_title:t.getAttribute(le.TITLE)}:{};return t.getAttributeNames().filter(r=>r.startsWith("metadata-")).reduce((r,n)=>{let i=t.getAttribute(n);return i!==null&&(r[n.replace(/^metadata-/,"").replace(/-/g,"_")]=i),r},e)}var Cle=Object.values(ee),Ile=Object.values(Ps),kle=Object.values(le),Lle=y6(),Dle="mux-player",Pk={dialog:void 0,isDialogOpen:!1},Ole={redundant_streams:!0},Jp,em,No,tm,qu,Ns,xa,YE,L6,gg,XE,Ra,Fo,ZE,Nk,QE,Fk,JE,$k,e_,Uk,Bk=class extends Rk{constructor(){super(),Kr(this,Ns),Kr(this,YE),Kr(this,gg),Kr(this,Ra),Kr(this,ZE),Kr(this,QE),Kr(this,JE),Kr(this,e_),Kr(this,Jp,!1),Kr(this,em,{}),Kr(this,No,!0),Kr(this,tm,new zoe(this,"hotkeys")),Kr(this,qu,{...Pk,onCloseErrorDialog:()=>wr(this,gg,XE).call(this,{dialog:void 0,isDialogOpen:!1}),onInitFocusDialog:e=>{v6(this,Ka.activeElement)||e.preventDefault()}}),this.attachShadow({mode:"open"}),wr(this,YE,L6).call(this),this.isConnected&&wr(this,Ns,xa).call(this)}static get observedAttributes(){var e;return[...(e=Rk.observedAttributes)!=null?e:[],...Ile,...Cle,...kle]}get mediaTheme(){var e;return(e=this.shadowRoot)==null?void 0:e.querySelector("media-theme")}get mediaController(){var e,r;return(r=(e=this.mediaTheme)==null?void 0:e.shadowRoot)==null?void 0:r.querySelector("media-controller")}connectedCallback(){var e;let r=(e=this.shadowRoot)==null?void 0:e.querySelector("mux-video");r&&(r.metadata=Mk(this))}attributeChangedCallback(e,r,n){switch(wr(this,Ns,xa).call(this),super.attributeChangedCallback(e,r,n),e){case le.HOTKEYS:At(this,tm).value=n;break;case le.THUMBNAIL_TIME:{n!=null&&this.tokens.thumbnail&&Vs(Le("Use of thumbnail-time with thumbnail-token is currently unsupported. Ignore thumbnail-time."));break}case le.THUMBNAIL_TOKEN:{if(n){let i=$u(n);if(i){let{aud:s}=i,a=Kd.THUMBNAIL;s!==a&&Vs(Le("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.").format({aud:s,expectedAud:a,tokenNamePrefix:"thumbnail"}))}}break}case le.STORYBOARD_TOKEN:{if(n){let i=$u(n);if(i){let{aud:s}=i,a=Kd.STORYBOARD;s!==a&&Vs(Le("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.").format({aud:s,expectedAud:a,tokenNamePrefix:"storyboard"}))}}break}case le.DRM_TOKEN:{if(n){let i=$u(n);if(i){let{aud:s}=i,a=Kd.DRM;s!==a&&Vs(Le("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.").format({aud:s,expectedAud:a,tokenNamePrefix:"drm"}))}}break}case ee.PLAYBACK_ID:{n!=null&&n.includes("?token")&&yi(Le("The specificed playback ID {playbackId} contains a token which must be provided via the playback-token attribute.").format({playbackId:n}));break}case ee.STREAM_TYPE:n&&![$t.LIVE,$t.ON_DEMAND,$t.UNKNOWN].includes(n)?["ll-live","live:dvr","ll-live:dvr"].includes(this.streamType)?this.targetLiveWindow=n.includes("dvr")?Number.POSITIVE_INFINITY:0:_6({file:"invalid-stream-type.md",message:Le("Invalid stream-type value supplied: `{streamType}`. Please provide stream-type as either: `on-demand` or `live`").format({streamType:this.streamType})}):n===$t.LIVE?this.getAttribute(le.TARGET_LIVE_WINDOW)==null&&(this.targetLiveWindow=0):this.targetLiveWindow=Number.NaN}[ee.PLAYBACK_ID,Ps.SRC,le.PLAYBACK_TOKEN].includes(e)&&r!==n&&Zs(this,qu,{...At(this,qu),...Pk}),wr(this,Ra,Fo).call(this,{[qoe(e)]:n})}get preferCmcd(){var e;return(e=this.getAttribute(ee.PREFER_CMCD))!=null?e:void 0}set preferCmcd(e){e!==this.preferCmcd&&(e?qm.includes(e)?this.setAttribute(ee.PREFER_CMCD,e):Vs(`Invalid value for preferCmcd. Must be one of ${qm.join()}`):this.removeAttribute(ee.PREFER_CMCD))}get hasPlayed(){var e,r;return(r=(e=this.mediaController)==null?void 0:e.hasAttribute(O.MEDIA_HAS_PLAYED))!=null?r:!1}get inLiveWindow(){var e;return(e=this.mediaController)==null?void 0:e.hasAttribute(O.MEDIA_TIME_IS_LIVE)}get _hls(){var e;return(e=this.media)==null?void 0:e._hls}get mux(){var e;return(e=this.media)==null?void 0:e.mux}get theme(){var e;return(e=this.getAttribute(le.THEME))!=null?e:Sle}set theme(e){this.setAttribute(le.THEME,`${e}`)}get themeProps(){let e=this.mediaTheme;if(!e)return;let r={};for(let n of e.getAttributeNames()){if(zE.includes(n))continue;let i=e.getAttribute(n);r[m6(n)]=i===""?!0:i}return r}set themeProps(e){var r,n;wr(this,Ns,xa).call(this);let i={...this.themeProps,...e};for(let s in i){if(zE.includes(s))continue;let a=e==null?void 0:e[s];typeof a=="boolean"||a==null?(r=this.mediaTheme)==null||r.toggleAttribute(GE(s),!!a):(n=this.mediaTheme)==null||n.setAttribute(GE(s),a)}}get playbackId(){var e;return(e=this.getAttribute(ee.PLAYBACK_ID))!=null?e:void 0}set playbackId(e){e?this.setAttribute(ee.PLAYBACK_ID,e):this.removeAttribute(ee.PLAYBACK_ID)}get src(){var e,r;return this.playbackId?(e=po(this,Ps.SRC))!=null?e:void 0:(r=this.getAttribute(Ps.SRC))!=null?r:void 0}set src(e){e?this.setAttribute(Ps.SRC,e):this.removeAttribute(Ps.SRC)}get poster(){var e;let r=this.getAttribute(Ps.POSTER);if(r!=null)return r;let{tokens:n}=this;if(n.playback&&!n.thumbnail){Vs("Missing expected thumbnail token. No poster image will be shown");return}if(this.playbackId&&!this.audio)return Woe(this.playbackId,{customDomain:this.customDomain,thumbnailTime:(e=this.thumbnailTime)!=null?e:this.startTime,programTime:this.programStartTime,token:n.thumbnail})}set poster(e){e||e===""?this.setAttribute(Ps.POSTER,e):this.removeAttribute(Ps.POSTER)}get storyboardSrc(){var e;return(e=this.getAttribute(le.STORYBOARD_SRC))!=null?e:void 0}set storyboardSrc(e){e?this.setAttribute(le.STORYBOARD_SRC,e):this.removeAttribute(le.STORYBOARD_SRC)}get storyboard(){let{tokens:e}=this;if(this.storyboardSrc&&!e.storyboard)return this.storyboardSrc;if(!(this.audio||!this.playbackId||!this.streamType||[$t.LIVE,$t.UNKNOWN].includes(this.streamType)||e.playback&&!e.storyboard))return Goe(this.playbackId,{customDomain:this.customDomain,token:e.storyboard,programStartTime:this.programStartTime,programEndTime:this.programEndTime})}get audio(){return this.hasAttribute(le.AUDIO)}set audio(e){if(!e){this.removeAttribute(le.AUDIO);return}this.setAttribute(le.AUDIO,"")}get hotkeys(){return At(this,tm)}get nohotkeys(){return this.hasAttribute(le.NOHOTKEYS)}set nohotkeys(e){if(!e){this.removeAttribute(le.NOHOTKEYS);return}this.setAttribute(le.NOHOTKEYS,"")}get thumbnailTime(){return vi(this.getAttribute(le.THUMBNAIL_TIME))}set thumbnailTime(e){this.setAttribute(le.THUMBNAIL_TIME,`${e}`)}get title(){var e;return(e=this.getAttribute(le.TITLE))!=null?e:""}set title(e){e!==this.title&&(e?this.setAttribute(le.TITLE,e):this.removeAttribute("title"),super.title=e)}get placeholder(){var e;return(e=po(this,le.PLACEHOLDER))!=null?e:""}set placeholder(e){this.setAttribute(le.PLACEHOLDER,`${e}`)}get primaryColor(){var e,r;let n=this.getAttribute(le.PRIMARY_COLOR);if(n!=null||this.mediaTheme&&(n=(r=(e=en.getComputedStyle(this.mediaTheme))==null?void 0:e.getPropertyValue("--_primary-color"))==null?void 0:r.trim(),n))return n}set primaryColor(e){this.setAttribute(le.PRIMARY_COLOR,`${e}`)}get secondaryColor(){var e,r;let n=this.getAttribute(le.SECONDARY_COLOR);if(n!=null||this.mediaTheme&&(n=(r=(e=en.getComputedStyle(this.mediaTheme))==null?void 0:e.getPropertyValue("--_secondary-color"))==null?void 0:r.trim(),n))return n}set secondaryColor(e){this.setAttribute(le.SECONDARY_COLOR,`${e}`)}get accentColor(){var e,r;let n=this.getAttribute(le.ACCENT_COLOR);if(n!=null||this.mediaTheme&&(n=(r=(e=en.getComputedStyle(this.mediaTheme))==null?void 0:e.getPropertyValue("--_accent-color"))==null?void 0:r.trim(),n))return n}set accentColor(e){this.setAttribute(le.ACCENT_COLOR,`${e}`)}get defaultShowRemainingTime(){return this.hasAttribute(le.DEFAULT_SHOW_REMAINING_TIME)}set defaultShowRemainingTime(e){e?this.setAttribute(le.DEFAULT_SHOW_REMAINING_TIME,""):this.removeAttribute(le.DEFAULT_SHOW_REMAINING_TIME)}get playbackRates(){if(this.hasAttribute(le.PLAYBACK_RATES))return this.getAttribute(le.PLAYBACK_RATES).trim().split(/\s*,?\s+/).map(e=>Number(e)).filter(e=>!Number.isNaN(e)).sort((e,r)=>e-r)}set playbackRates(e){if(!e){this.removeAttribute(le.PLAYBACK_RATES);return}this.setAttribute(le.PLAYBACK_RATES,e.join(" "))}get forwardSeekOffset(){var e;return(e=vi(this.getAttribute(le.FORWARD_SEEK_OFFSET)))!=null?e:10}set forwardSeekOffset(e){this.setAttribute(le.FORWARD_SEEK_OFFSET,`${e}`)}get backwardSeekOffset(){var e;return(e=vi(this.getAttribute(le.BACKWARD_SEEK_OFFSET)))!=null?e:10}set backwardSeekOffset(e){this.setAttribute(le.BACKWARD_SEEK_OFFSET,`${e}`)}get defaultHiddenCaptions(){return this.hasAttribute(le.DEFAULT_HIDDEN_CAPTIONS)}set defaultHiddenCaptions(e){e?this.setAttribute(le.DEFAULT_HIDDEN_CAPTIONS,""):this.removeAttribute(le.DEFAULT_HIDDEN_CAPTIONS)}get defaultDuration(){return vi(this.getAttribute(le.DEFAULT_DURATION))}set defaultDuration(e){e==null?this.removeAttribute(le.DEFAULT_DURATION):this.setAttribute(le.DEFAULT_DURATION,`${e}`)}get playerSoftwareName(){var e;return(e=this.getAttribute(ee.PLAYER_SOFTWARE_NAME))!=null?e:Dle}get playerSoftwareVersion(){var e;return(e=this.getAttribute(ee.PLAYER_SOFTWARE_VERSION))!=null?e:Lle}get beaconCollectionDomain(){var e;return(e=this.getAttribute(ee.BEACON_COLLECTION_DOMAIN))!=null?e:void 0}set beaconCollectionDomain(e){e!==this.beaconCollectionDomain&&(e?this.setAttribute(ee.BEACON_COLLECTION_DOMAIN,e):this.removeAttribute(ee.BEACON_COLLECTION_DOMAIN))}get maxResolution(){var e;return(e=this.getAttribute(ee.MAX_RESOLUTION))!=null?e:void 0}set maxResolution(e){e!==this.maxResolution&&(e?this.setAttribute(ee.MAX_RESOLUTION,e):this.removeAttribute(ee.MAX_RESOLUTION))}get minResolution(){var e;return(e=this.getAttribute(ee.MIN_RESOLUTION))!=null?e:void 0}set minResolution(e){e!==this.minResolution&&(e?this.setAttribute(ee.MIN_RESOLUTION,e):this.removeAttribute(ee.MIN_RESOLUTION))}get renditionOrder(){var e;return(e=this.getAttribute(ee.RENDITION_ORDER))!=null?e:void 0}set renditionOrder(e){e!==this.renditionOrder&&(e?this.setAttribute(ee.RENDITION_ORDER,e):this.removeAttribute(ee.RENDITION_ORDER))}get programStartTime(){return vi(this.getAttribute(ee.PROGRAM_START_TIME))}set programStartTime(e){e==null?this.removeAttribute(ee.PROGRAM_START_TIME):this.setAttribute(ee.PROGRAM_START_TIME,`${e}`)}get programEndTime(){return vi(this.getAttribute(ee.PROGRAM_END_TIME))}set programEndTime(e){e==null?this.removeAttribute(ee.PROGRAM_END_TIME):this.setAttribute(ee.PROGRAM_END_TIME,`${e}`)}get assetStartTime(){return vi(this.getAttribute(ee.ASSET_START_TIME))}set assetStartTime(e){e==null?this.removeAttribute(ee.ASSET_START_TIME):this.setAttribute(ee.ASSET_START_TIME,`${e}`)}get assetEndTime(){return vi(this.getAttribute(ee.ASSET_END_TIME))}set assetEndTime(e){e==null?this.removeAttribute(ee.ASSET_END_TIME):this.setAttribute(ee.ASSET_END_TIME,`${e}`)}get extraSourceParams(){return this.hasAttribute(le.EXTRA_SOURCE_PARAMS)?[...new URLSearchParams(this.getAttribute(le.EXTRA_SOURCE_PARAMS)).entries()].reduce((e,[r,n])=>(e[r]=n,e),{}):Ole}set extraSourceParams(e){e==null?this.removeAttribute(le.EXTRA_SOURCE_PARAMS):this.setAttribute(le.EXTRA_SOURCE_PARAMS,new URLSearchParams(e).toString())}get customDomain(){var e;return(e=this.getAttribute(ee.CUSTOM_DOMAIN))!=null?e:void 0}set customDomain(e){e!==this.customDomain&&(e?this.setAttribute(ee.CUSTOM_DOMAIN,e):this.removeAttribute(ee.CUSTOM_DOMAIN))}get envKey(){var e;return(e=po(this,ee.ENV_KEY))!=null?e:void 0}set envKey(e){this.setAttribute(ee.ENV_KEY,`${e}`)}get noVolumePref(){return this.hasAttribute(le.NO_VOLUME_PREF)}set noVolumePref(e){e?this.setAttribute(le.NO_VOLUME_PREF,""):this.removeAttribute(le.NO_VOLUME_PREF)}get debug(){return po(this,ee.DEBUG)!=null}set debug(e){e?this.setAttribute(ee.DEBUG,""):this.removeAttribute(ee.DEBUG)}get disableTracking(){return po(this,ee.DISABLE_TRACKING)!=null}set disableTracking(e){this.toggleAttribute(ee.DISABLE_TRACKING,!!e)}get disableCookies(){return po(this,ee.DISABLE_COOKIES)!=null}set disableCookies(e){e?this.setAttribute(ee.DISABLE_COOKIES,""):this.removeAttribute(ee.DISABLE_COOKIES)}get streamType(){var e,r,n;return(n=(r=this.getAttribute(ee.STREAM_TYPE))!=null?r:(e=this.media)==null?void 0:e.streamType)!=null?n:$t.UNKNOWN}set streamType(e){this.setAttribute(ee.STREAM_TYPE,`${e}`)}get defaultStreamType(){var e,r,n;return(n=(r=this.getAttribute(le.DEFAULT_STREAM_TYPE))!=null?r:(e=this.mediaController)==null?void 0:e.getAttribute(le.DEFAULT_STREAM_TYPE))!=null?n:$t.ON_DEMAND}set defaultStreamType(e){e?this.setAttribute(le.DEFAULT_STREAM_TYPE,e):this.removeAttribute(le.DEFAULT_STREAM_TYPE)}get targetLiveWindow(){var e,r;return this.hasAttribute(le.TARGET_LIVE_WINDOW)?+this.getAttribute(le.TARGET_LIVE_WINDOW):(r=(e=this.media)==null?void 0:e.targetLiveWindow)!=null?r:Number.NaN}set targetLiveWindow(e){e==this.targetLiveWindow||Number.isNaN(e)&&Number.isNaN(this.targetLiveWindow)||(e==null?this.removeAttribute(le.TARGET_LIVE_WINDOW):this.setAttribute(le.TARGET_LIVE_WINDOW,`${+e}`))}get liveEdgeStart(){var e;return(e=this.media)==null?void 0:e.liveEdgeStart}get startTime(){return vi(po(this,ee.START_TIME))}set startTime(e){this.setAttribute(ee.START_TIME,`${e}`)}get preferPlayback(){let e=this.getAttribute(ee.PREFER_PLAYBACK);if(e===ps.MSE||e===ps.NATIVE)return e}set preferPlayback(e){e!==this.preferPlayback&&(e===ps.MSE||e===ps.NATIVE?this.setAttribute(ee.PREFER_PLAYBACK,e):this.removeAttribute(ee.PREFER_PLAYBACK))}get metadata(){var e;return(e=this.media)==null?void 0:e.metadata}set metadata(e){if(wr(this,Ns,xa).call(this),!this.media){yi("underlying media element missing when trying to set metadata. metadata will not be set.");return}this.media.metadata={...Mk(this),...e}}get _hlsConfig(){var e;return(e=this.media)==null?void 0:e._hlsConfig}set _hlsConfig(e){if(wr(this,Ns,xa).call(this),!this.media){yi("underlying media element missing when trying to set _hlsConfig. _hlsConfig will not be set.");return}this.media._hlsConfig=e}async addCuePoints(e){var r;if(wr(this,Ns,xa).call(this),!this.media){yi("underlying media element missing when trying to addCuePoints. cuePoints will not be added.");return}return(r=this.media)==null?void 0:r.addCuePoints(e)}get activeCuePoint(){var e;return(e=this.media)==null?void 0:e.activeCuePoint}get cuePoints(){var e,r;return(r=(e=this.media)==null?void 0:e.cuePoints)!=null?r:[]}addChapters(e){var r;if(wr(this,Ns,xa).call(this),!this.media){yi("underlying media element missing when trying to addChapters. chapters will not be added.");return}return(r=this.media)==null?void 0:r.addChapters(e)}get activeChapter(){var e;return(e=this.media)==null?void 0:e.activeChapter}get chapters(){var e,r;return(r=(e=this.media)==null?void 0:e.chapters)!=null?r:[]}getStartDate(){var e;return(e=this.media)==null?void 0:e.getStartDate()}get currentPdt(){var e;return(e=this.media)==null?void 0:e.currentPdt}get tokens(){let e=this.getAttribute(le.PLAYBACK_TOKEN),r=this.getAttribute(le.DRM_TOKEN),n=this.getAttribute(le.THUMBNAIL_TOKEN),i=this.getAttribute(le.STORYBOARD_TOKEN);return{...At(this,em),...e!=null?{playback:e}:{},...r!=null?{drm:r}:{},...n!=null?{thumbnail:n}:{},...i!=null?{storyboard:i}:{}}}set tokens(e){Zs(this,em,e??{})}get playbackToken(){var e;return(e=this.getAttribute(le.PLAYBACK_TOKEN))!=null?e:void 0}set playbackToken(e){this.setAttribute(le.PLAYBACK_TOKEN,`${e}`)}get drmToken(){var e;return(e=this.getAttribute(le.DRM_TOKEN))!=null?e:void 0}set drmToken(e){this.setAttribute(le.DRM_TOKEN,`${e}`)}get thumbnailToken(){var e;return(e=this.getAttribute(le.THUMBNAIL_TOKEN))!=null?e:void 0}set thumbnailToken(e){this.setAttribute(le.THUMBNAIL_TOKEN,`${e}`)}get storyboardToken(){var e;return(e=this.getAttribute(le.STORYBOARD_TOKEN))!=null?e:void 0}set storyboardToken(e){this.setAttribute(le.STORYBOARD_TOKEN,`${e}`)}addTextTrack(e,r,n,i){var s;let a=(s=this.media)==null?void 0:s.nativeEl;if(a)return Zx(a,e,r,n,i)}removeTextTrack(e){var r;let n=(r=this.media)==null?void 0:r.nativeEl;if(n)return rne(n,e)}get textTracks(){var e;return(e=this.media)==null?void 0:e.textTracks}get castReceiver(){var e;return(e=this.getAttribute(le.CAST_RECEIVER))!=null?e:void 0}set castReceiver(e){e!==this.castReceiver&&(e?this.setAttribute(le.CAST_RECEIVER,e):this.removeAttribute(le.CAST_RECEIVER))}get castCustomData(){var e;return(e=this.media)==null?void 0:e.castCustomData}set castCustomData(e){if(!this.media){yi("underlying media element missing when trying to set castCustomData. castCustomData will not be set.");return}this.media.castCustomData=e}get noTooltips(){return this.hasAttribute(le.NO_TOOLTIPS)}set noTooltips(e){if(!e){this.removeAttribute(le.NO_TOOLTIPS);return}this.setAttribute(le.NO_TOOLTIPS,"")}};Jp=new WeakMap,em=new WeakMap,No=new WeakMap,tm=new WeakMap,qu=new WeakMap,Ns=new WeakSet,xa=function(){var t,e,r,n;if(!At(this,Jp)){Zs(this,Jp,!0),wr(this,Ra,Fo).call(this);try{if(customElements.upgrade(this.mediaTheme),!(this.mediaTheme instanceof en.HTMLElement))throw""}catch{yi("<media-theme> failed to upgrade!")}try{if(customElements.upgrade(this.media),!(this.media instanceof Zae))throw""}catch{yi("<mux-video> failed to upgrade!")}try{if(customElements.upgrade(this.mediaController),!(this.mediaController instanceof Bie))throw""}catch{yi("<media-controller> failed to upgrade!")}this.init(),wr(this,ZE,Nk).call(this),wr(this,QE,Fk).call(this),wr(this,JE,$k).call(this),Zs(this,No,(e=(t=this.mediaController)==null?void 0:t.hasAttribute(mt.USER_INACTIVE))!=null?e:!0),wr(this,e_,Uk).call(this),(r=this.media)==null||r.addEventListener("streamtypechange",()=>wr(this,Ra,Fo).call(this)),(n=this.media)==null||n.addEventListener("loadstart",()=>wr(this,Ra,Fo).call(this))}},YE=new WeakSet,L6=function(){var t,e;try{(t=window==null?void 0:window.CSS)==null||t.registerProperty({name:"--media-primary-color",syntax:"<color>",inherits:!0}),(e=window==null?void 0:window.CSS)==null||e.registerProperty({name:"--media-secondary-color",syntax:"<color>",inherits:!0})}catch{}},gg=new WeakSet,XE=function(t){Object.assign(At(this,qu),t),wr(this,Ra,Fo).call(this)},Ra=new WeakSet,Fo=function(t={}){dle(fle(wle(this,{...At(this,qu),...t})),this.shadowRoot)},ZE=new WeakSet,Nk=function(){let t=e=>{var r,n;if(!(e!=null&&e.startsWith("theme-")))return;let i=e.replace(/^theme-/,"");if(zE.includes(i))return;let s=this.getAttribute(e);s!=null?(r=this.mediaTheme)==null||r.setAttribute(i,s):(n=this.mediaTheme)==null||n.removeAttribute(i)};new MutationObserver(e=>{for(let{attributeName:r}of e)t(r)}).observe(this,{attributes:!0}),this.getAttributeNames().forEach(t)},QE=new WeakSet,Fk=function(){var t;let e=r=>{let{detail:n}=r;if(n instanceof be||(n=new be(n.message,n.code,n.fatal)),!(n!=null&&n.fatal)){Vs(n),n.data&&Vs(`${n.name} data:`,n.data);return}let{dialog:i,devlog:s}=Lk(n,!1);s.message&&_6(s),yi(n),n.data&&yi(`${n.name} data:`,n.data),wr(this,gg,XE).call(this,{isDialogOpen:!0,dialog:i})};this.addEventListener("error",e),this.media&&(this.media.errorTranslator=(r={})=>{var n,i,s;if(!(((n=this.media)==null?void 0:n.error)instanceof be))return r;let{devlog:a}=Lk((i=this.media)==null?void 0:i.error,!1);return{player_error_code:(s=this.media)==null?void 0:s.error.code,player_error_message:a.message?String(a.message):r.player_error_message,player_error_context:a.context?String(a.context):r.player_error_context}}),(t=this.media)==null||t.addEventListener("error",r=>{var n,i;let{detail:s}=r;if(!s){let{message:a,code:o}=(i=(n=this.media)==null?void 0:n.error)!=null?i:{};s=new be(a,o)}s!=null&&s.fatal&&this.dispatchEvent(new CustomEvent("error",{detail:s}))})},JE=new WeakSet,$k=function(){var t,e,r,n;let i=()=>wr(this,Ra,Fo).call(this);(e=(t=this.media)==null?void 0:t.textTracks)==null||e.addEventListener("addtrack",i),(n=(r=this.media)==null?void 0:r.textTracks)==null||n.addEventListener("removetrack",i)},e_=new WeakSet,Uk=function(){var t,e;if(!/Firefox/i.test(navigator.userAgent))return;let r,n=new WeakMap,i=()=>this.streamType===$t.LIVE&&!this.secondaryColor&&this.offsetWidth>=800,s=(l,u,c=!1)=>{i()||Array.from(l&&l.activeCues||[]).forEach(d=>{if(!(!d.snapToLines||d.line<-5||d.line>=0&&d.line<10))if(!u||this.paused){let h=d.text.split(`
`).length,f=-3;this.streamType===$t.LIVE&&(f=-2);let p=f-h;if(d.line===p&&!c)return;n.has(d)||n.set(d,d.line),d.line=p}else setTimeout(()=>{d.line=n.get(d)||"auto"},500)})},a=()=>{var l,u;s(r,(u=(l=this.mediaController)==null?void 0:l.hasAttribute(mt.USER_INACTIVE))!=null?u:!1)},o=()=>{var l,u;let c=Array.from(((u=(l=this.mediaController)==null?void 0:l.media)==null?void 0:u.textTracks)||[]).filter(d=>["subtitles","captions"].includes(d.kind)&&d.mode==="showing")[0];c!==r&&(r==null||r.removeEventListener("cuechange",a)),r=c,r==null||r.addEventListener("cuechange",a),s(r,At(this,No))};o(),(t=this.textTracks)==null||t.addEventListener("change",o),(e=this.textTracks)==null||e.addEventListener("addtrack",o),this.addEventListener("userinactivechange",()=>{var l,u;let c=(u=(l=this.mediaController)==null?void 0:l.hasAttribute(mt.USER_INACTIVE))!=null?u:!0;At(this,No)!==c&&(Zs(this,No,c),s(r,At(this,No)))})};function po(t,e){return t.media?t.media.getAttribute(e):t.getAttribute(e)}en.customElements.get("mux-player")||(en.customElements.define("mux-player",Bk),en.MuxPlayerElement=Bk);var jk={className:"class",classname:"class",htmlFor:"for",crossOrigin:"crossorigin",viewBox:"viewBox",playsInline:"playsinline",autoPlay:"autoplay",playbackRate:"playbackrate"},Mle=t=>t==null,Ple=(t,e)=>Mle(e)?!1:t in e,Nle=t=>t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`),Fle=(t,e)=>{if(!(typeof e=="boolean"&&!e)){if(Ple(t,jk))return jk[t];if(typeof e!=null)return/[A-Z]/.test(t)?Nle(t):t}},$le=(t,e)=>typeof t=="boolean"?"":t,Ule=(t={})=>Object.entries(t).reduce((e,[r,n])=>{let i=Fle(r,n);if(!i)return e;let s=$le(n);return e[i]=s,e},{}),Ble=(...t)=>{let e=R.useRef(null);return R.useEffect(()=>{t.forEach(r=>{r&&(typeof r=="function"?r(e.current):r.current=e.current)})},[t]),e},jle=Object.prototype.hasOwnProperty,Hle=(t,e)=>{if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(Array.isArray(t))return!Array.isArray(e)||t.length!==e.length?!1:t.some((i,s)=>e[s]===i);let r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(!jle.call(e,r[i])||!Object.is(t[r[i]],e[r[i]]))return!1;return!0},D6=(t,e,r)=>!Hle(e,t[r]),Vle=(t,e,r)=>{t[r]=e},Wle=(t,e,r,n=Vle,i=D6)=>R.useEffect(()=>{let s=r==null?void 0:r.current;s&&i(s,e,t)&&n(s,e,t)},[r==null?void 0:r.current,e]),qi=Wle,Gle=()=>{try{return"3.1.0"}catch{}return"UNKNOWN"},Kle=Gle(),qle=()=>Kle,zle=Z.forwardRef(({children:t,...e},r)=>Z.createElement("mux-player",Ule({...e,ref:r}),t)),zt=(t,e,r)=>R.useEffect(()=>{let n=e==null?void 0:e.current;if(!(!n||!r))return n.addEventListener(t,r),()=>{n.removeEventListener(t,r)}},[e==null?void 0:e.current,r]),Yle=(t,e)=>{let{onAbort:r,onCanPlay:n,onCanPlayThrough:i,onEmptied:s,onLoadStart:a,onLoadedData:o,onLoadedMetadata:l,onProgress:u,onDurationChange:c,onVolumeChange:d,onRateChange:h,onResize:f,onWaiting:p,onPlay:m,onPlaying:g,onTimeUpdate:v,onPause:b,onSeeking:y,onSeeked:T,onStalled:x,onSuspend:_,onEnded:S,onError:A,onCuePointChange:k,onCuePointsChange:I,onChapterChange:C,metadata:N,tokens:P,paused:V,playbackId:M,playbackRates:U,currentTime:B,themeProps:X,extraSourceParams:te,castCustomData:D,_hlsConfig:L,...Y}=e;return qi("playbackRates",U,t),qi("metadata",N,t),qi("extraSourceParams",te,t),qi("_hlsConfig",L,t),qi("themeProps",X,t),qi("tokens",P,t),qi("playbackId",M,t),qi("castCustomData",D,t),qi("paused",V,t,($,j)=>{j!=null&&(j?$.pause():$.play())},($,j,z)=>$.hasAttribute("autoplay")&&!$.hasPlayed?!1:D6($,j,z)),qi("currentTime",B,t,($,j)=>{j!=null&&($.currentTime=j)}),zt("abort",t,r),zt("canplay",t,n),zt("canplaythrough",t,i),zt("emptied",t,s),zt("loadstart",t,a),zt("loadeddata",t,o),zt("loadedmetadata",t,l),zt("progress",t,u),zt("durationchange",t,c),zt("volumechange",t,d),zt("ratechange",t,h),zt("resize",t,f),zt("waiting",t,p),zt("play",t,m),zt("playing",t,g),zt("timeupdate",t,v),zt("pause",t,b),zt("seeking",t,y),zt("seeked",t,T),zt("stalled",t,x),zt("suspend",t,_),zt("ended",t,S),zt("error",t,A),zt("cuepointchange",t,k),zt("cuepointschange",t,I),zt("chapterchange",t,C),[Y]},Xle=qle(),Zle="mux-player-react",Qle=Z.forwardRef((t,e)=>{let r=R.useRef(null),n=Ble(r,e),[i]=Yle(r,t);return Z.createElement(zle,{ref:n,playerSoftwareName:Zle,playerSoftwareVersion:Xle,...i})}),O6=Qle,M6={},HS={},VS={};Object.defineProperty(VS,"__esModule",{value:!0});VS.default=rue;var Hk="html",Vk="head",t0="body",Jle=/<([a-zA-Z]+[0-9]?)/,Wk=/<head[^]*>/i,Gk=/<body[^]*>/i,vg=function(t,e){throw new Error("This browser does not support `document.implementation.createHTMLDocument`")},t_=function(t,e){throw new Error("This browser does not support `DOMParser.prototype.parseFromString`")},Kk=typeof window=="object"&&window.DOMParser;if(typeof Kk=="function"){var eue=new Kk,tue="text/html";t_=function(t,e){return e&&(t="<".concat(e,">").concat(t,"</").concat(e,">")),eue.parseFromString(t,tue)},vg=t_}if(typeof document=="object"&&document.implementation){var r0=document.implementation.createHTMLDocument();vg=function(t,e){if(e){var r=r0.documentElement.querySelector(e);return r&&(r.innerHTML=t),r0}return r0.documentElement.innerHTML=t,r0}}var n0=typeof document=="object"&&document.createElement("template"),r_;n0&&n0.content&&(r_=function(t){return n0.innerHTML=t,n0.content.childNodes});function rue(t){var e,r,n=t.match(Jle),i=n&&n[1]?n[1].toLowerCase():"";switch(i){case Hk:{var s=t_(t);if(!Wk.test(t)){var a=s.querySelector(Vk);(e=a==null?void 0:a.parentNode)===null||e===void 0||e.removeChild(a)}if(!Gk.test(t)){var a=s.querySelector(t0);(r=a==null?void 0:a.parentNode)===null||r===void 0||r.removeChild(a)}return s.querySelectorAll(Hk)}case Vk:case t0:{var o=vg(t).querySelectorAll(i);return Gk.test(t)&&Wk.test(t)?o[0].parentNode.childNodes:o}default:{if(r_)return r_(t);var a=vg(t,t0).querySelector(t0);return a.childNodes}}}var bv={},Ni={},Ac={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Doctype=t.CDATA=t.Tag=t.Style=t.Script=t.Comment=t.Directive=t.Text=t.Root=t.isTag=t.ElementType=void 0;var e;(function(n){n.Root="root",n.Text="text",n.Directive="directive",n.Comment="comment",n.Script="script",n.Style="style",n.Tag="tag",n.CDATA="cdata",n.Doctype="doctype"})(e=t.ElementType||(t.ElementType={}));function r(n){return n.type===e.Tag||n.type===e.Script||n.type===e.Style}t.isTag=r,t.Root=e.Root,t.Text=e.Text,t.Directive=e.Directive,t.Comment=e.Comment,t.Script=e.Script,t.Style=e.Style,t.Tag=e.Tag,t.CDATA=e.CDATA,t.Doctype=e.Doctype})(Ac);var st={},no=we&&we.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),eh=we&&we.__assign||function(){return eh=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},eh.apply(this,arguments)};Object.defineProperty(st,"__esModule",{value:!0});st.cloneNode=st.hasChildren=st.isDocument=st.isDirective=st.isComment=st.isText=st.isCDATA=st.isTag=st.Element=st.Document=st.CDATA=st.NodeWithChildren=st.ProcessingInstruction=st.Comment=st.Text=st.DataNode=st.Node=void 0;var Gn=Ac,WS=function(){function t(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(t.prototype,"parentNode",{get:function(){return this.parent},set:function(e){this.parent=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previousSibling",{get:function(){return this.prev},set:function(e){this.prev=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextSibling",{get:function(){return this.next},set:function(e){this.next=e},enumerable:!1,configurable:!0}),t.prototype.cloneNode=function(e){return e===void 0&&(e=!1),GS(this,e)},t}();st.Node=WS;var yv=function(t){no(e,t);function e(r){var n=t.call(this)||this;return n.data=r,n}return Object.defineProperty(e.prototype,"nodeValue",{get:function(){return this.data},set:function(r){this.data=r},enumerable:!1,configurable:!0}),e}(WS);st.DataNode=yv;var P6=function(t){no(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=Gn.ElementType.Text,r}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),e}(yv);st.Text=P6;var N6=function(t){no(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=Gn.ElementType.Comment,r}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),e}(yv);st.Comment=N6;var F6=function(t){no(e,t);function e(r,n){var i=t.call(this,n)||this;return i.name=r,i.type=Gn.ElementType.Directive,i}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),e}(yv);st.ProcessingInstruction=F6;var Ev=function(t){no(e,t);function e(r){var n=t.call(this)||this;return n.children=r,n}return Object.defineProperty(e.prototype,"firstChild",{get:function(){var r;return(r=this.children[0])!==null&&r!==void 0?r:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childNodes",{get:function(){return this.children},set:function(r){this.children=r},enumerable:!1,configurable:!0}),e}(WS);st.NodeWithChildren=Ev;var $6=function(t){no(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=Gn.ElementType.CDATA,r}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),e}(Ev);st.CDATA=$6;var U6=function(t){no(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=Gn.ElementType.Root,r}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),e}(Ev);st.Document=U6;var B6=function(t){no(e,t);function e(r,n,i,s){i===void 0&&(i=[]),s===void 0&&(s=r==="script"?Gn.ElementType.Script:r==="style"?Gn.ElementType.Style:Gn.ElementType.Tag);var a=t.call(this,i)||this;return a.name=r,a.attribs=n,a.type=s,a}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tagName",{get:function(){return this.name},set:function(r){this.name=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"attributes",{get:function(){var r=this;return Object.keys(this.attribs).map(function(n){var i,s;return{name:n,value:r.attribs[n],namespace:(i=r["x-attribsNamespace"])===null||i===void 0?void 0:i[n],prefix:(s=r["x-attribsPrefix"])===null||s===void 0?void 0:s[n]}})},enumerable:!1,configurable:!0}),e}(Ev);st.Element=B6;function j6(t){return(0,Gn.isTag)(t)}st.isTag=j6;function H6(t){return t.type===Gn.ElementType.CDATA}st.isCDATA=H6;function V6(t){return t.type===Gn.ElementType.Text}st.isText=V6;function W6(t){return t.type===Gn.ElementType.Comment}st.isComment=W6;function G6(t){return t.type===Gn.ElementType.Directive}st.isDirective=G6;function K6(t){return t.type===Gn.ElementType.Root}st.isDocument=K6;function nue(t){return Object.prototype.hasOwnProperty.call(t,"children")}st.hasChildren=nue;function GS(t,e){e===void 0&&(e=!1);var r;if(V6(t))r=new P6(t.data);else if(W6(t))r=new N6(t.data);else if(j6(t)){var n=e?ny(t.children):[],i=new B6(t.name,eh({},t.attribs),n);n.forEach(function(l){return l.parent=i}),t.namespace!=null&&(i.namespace=t.namespace),t["x-attribsNamespace"]&&(i["x-attribsNamespace"]=eh({},t["x-attribsNamespace"])),t["x-attribsPrefix"]&&(i["x-attribsPrefix"]=eh({},t["x-attribsPrefix"])),r=i}else if(H6(t)){var n=e?ny(t.children):[],s=new $6(n);n.forEach(function(u){return u.parent=s}),r=s}else if(K6(t)){var n=e?ny(t.children):[],a=new U6(n);n.forEach(function(u){return u.parent=a}),t["x-mode"]&&(a["x-mode"]=t["x-mode"]),r=a}else if(G6(t)){var o=new F6(t.name,t.data);t["x-name"]!=null&&(o["x-name"]=t["x-name"],o["x-publicId"]=t["x-publicId"],o["x-systemId"]=t["x-systemId"]),r=o}else throw new Error("Not implemented yet: ".concat(t.type));return r.startIndex=t.startIndex,r.endIndex=t.endIndex,t.sourceCodeLocation!=null&&(r.sourceCodeLocation=t.sourceCodeLocation),r}st.cloneNode=GS;function ny(t){for(var e=t.map(function(n){return GS(n,!0)}),r=1;r<e.length;r++)e[r].prev=e[r-1],e[r-1].next=e[r];return e}(function(t){var e=we&&we.__createBinding||(Object.create?function(o,l,u,c){c===void 0&&(c=u);var d=Object.getOwnPropertyDescriptor(l,u);(!d||("get"in d?!l.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(o,c,d)}:function(o,l,u,c){c===void 0&&(c=u),o[c]=l[u]}),r=we&&we.__exportStar||function(o,l){for(var u in o)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&e(l,o,u)};Object.defineProperty(t,"__esModule",{value:!0}),t.DomHandler=void 0;var n=Ac,i=st;r(st,t);var s={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},a=function(){function o(l,u,c){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof u=="function"&&(c=u,u=s),typeof l=="object"&&(u=l,l=void 0),this.callback=l??null,this.options=u??s,this.elementCB=c??null}return o.prototype.onparserinit=function(l){this.parser=l},o.prototype.onreset=function(){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},o.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},o.prototype.onerror=function(l){this.handleCallback(l)},o.prototype.onclosetag=function(){this.lastNode=null;var l=this.tagStack.pop();this.options.withEndIndices&&(l.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(l)},o.prototype.onopentag=function(l,u){var c=this.options.xmlMode?n.ElementType.Tag:void 0,d=new i.Element(l,u,void 0,c);this.addNode(d),this.tagStack.push(d)},o.prototype.ontext=function(l){var u=this.lastNode;if(u&&u.type===n.ElementType.Text)u.data+=l,this.options.withEndIndices&&(u.endIndex=this.parser.endIndex);else{var c=new i.Text(l);this.addNode(c),this.lastNode=c}},o.prototype.oncomment=function(l){if(this.lastNode&&this.lastNode.type===n.ElementType.Comment){this.lastNode.data+=l;return}var u=new i.Comment(l);this.addNode(u),this.lastNode=u},o.prototype.oncommentend=function(){this.lastNode=null},o.prototype.oncdatastart=function(){var l=new i.Text(""),u=new i.CDATA([l]);this.addNode(u),l.parent=u,this.lastNode=l},o.prototype.oncdataend=function(){this.lastNode=null},o.prototype.onprocessinginstruction=function(l,u){var c=new i.ProcessingInstruction(l,u);this.addNode(c)},o.prototype.handleCallback=function(l){if(typeof this.callback=="function")this.callback(l,this.dom);else if(l)throw l},o.prototype.addNode=function(l){var u=this.tagStack[this.tagStack.length-1],c=u.children[u.children.length-1];this.options.withStartIndices&&(l.startIndex=this.parser.startIndex),this.options.withEndIndices&&(l.endIndex=this.parser.endIndex),u.children.push(l),c&&(l.prev=c,c.next=l),l.parent=u,this.lastNode=null},o}();t.DomHandler=a,t.default=a})(Ni);var q6={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CASE_SENSITIVE_TAG_NAMES_MAP=t.CASE_SENSITIVE_TAG_NAMES=void 0,t.CASE_SENSITIVE_TAG_NAMES=["animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","linearGradient","radialGradient","textPath"],t.CASE_SENSITIVE_TAG_NAMES_MAP=t.CASE_SENSITIVE_TAG_NAMES.reduce(function(e,r){return e[r.toLowerCase()]=r,e},{})})(q6);Object.defineProperty(bv,"__esModule",{value:!0});bv.formatAttributes=z6;bv.formatDOM=Y6;var i0=Ni,iue=q6;function sue(t){return iue.CASE_SENSITIVE_TAG_NAMES_MAP[t]}function z6(t){for(var e={},r=0,n=t.length;r<n;r++){var i=t[r];e[i.name]=i.value}return e}function aue(t){t=t.toLowerCase();var e=sue(t);return e||t}function Y6(t,e,r){e===void 0&&(e=null);for(var n=[],i,s=0,a=t.length;s<a;s++){var o=t[s];switch(o.nodeType){case 1:{var l=aue(o.nodeName);i=new i0.Element(l,z6(o.attributes)),i.children=Y6(l==="template"?o.content.childNodes:o.childNodes,i);break}case 3:i=new i0.Text(o.nodeValue);break;case 8:i=new i0.Comment(o.nodeValue);break;default:continue}var u=n[s-1]||null;u&&(u.next=i),i.parent=e,i.prev=u,i.next=null,n.push(i)}return r&&(i=new i0.ProcessingInstruction(r.substring(0,r.indexOf(" ")).toLowerCase(),r),i.next=n[0]||null,i.parent=e,n.unshift(i),n[1]&&(n[1].prev=n[0])),n}var oue=we&&we.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(HS,"__esModule",{value:!0});HS.default=due;var lue=oue(VS),uue=bv,cue=/<(![a-zA-Z\s]+)>/;function due(t){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];var e=t.match(cue),r=e?e[1]:void 0;return(0,uue.formatDOM)((0,lue.default)(t),null,r)}var _v={},Bi={},Tv={},hue=0;Tv.SAME=hue;var fue=1;Tv.CAMELCASE=fue;Tv.possibleStandardNames={accept:0,acceptCharset:1,"accept-charset":"acceptCharset",accessKey:1,action:0,allowFullScreen:1,alt:0,as:0,async:0,autoCapitalize:1,autoComplete:1,autoCorrect:1,autoFocus:1,autoPlay:1,autoSave:1,capture:0,cellPadding:1,cellSpacing:1,challenge:0,charSet:1,checked:0,children:0,cite:0,class:"className",classID:1,className:1,cols:0,colSpan:1,content:0,contentEditable:1,contextMenu:1,controls:0,controlsList:1,coords:0,crossOrigin:1,dangerouslySetInnerHTML:1,data:0,dateTime:1,default:0,defaultChecked:1,defaultValue:1,defer:0,dir:0,disabled:0,disablePictureInPicture:1,disableRemotePlayback:1,download:0,draggable:0,encType:1,enterKeyHint:1,for:"htmlFor",form:0,formMethod:1,formAction:1,formEncType:1,formNoValidate:1,formTarget:1,frameBorder:1,headers:0,height:0,hidden:0,high:0,href:0,hrefLang:1,htmlFor:1,httpEquiv:1,"http-equiv":"httpEquiv",icon:0,id:0,innerHTML:1,inputMode:1,integrity:0,is:0,itemID:1,itemProp:1,itemRef:1,itemScope:1,itemType:1,keyParams:1,keyType:1,kind:0,label:0,lang:0,list:0,loop:0,low:0,manifest:0,marginWidth:1,marginHeight:1,max:0,maxLength:1,media:0,mediaGroup:1,method:0,min:0,minLength:1,multiple:0,muted:0,name:0,noModule:1,nonce:0,noValidate:1,open:0,optimum:0,pattern:0,placeholder:0,playsInline:1,poster:0,preload:0,profile:0,radioGroup:1,readOnly:1,referrerPolicy:1,rel:0,required:0,reversed:0,role:0,rows:0,rowSpan:1,sandbox:0,scope:0,scoped:0,scrolling:0,seamless:0,selected:0,shape:0,size:0,sizes:0,span:0,spellCheck:1,src:0,srcDoc:1,srcLang:1,srcSet:1,start:0,step:0,style:0,summary:0,tabIndex:1,target:0,title:0,type:0,useMap:1,value:0,width:0,wmode:0,wrap:0,about:0,accentHeight:1,"accent-height":"accentHeight",accumulate:0,additive:0,alignmentBaseline:1,"alignment-baseline":"alignmentBaseline",allowReorder:1,alphabetic:0,amplitude:0,arabicForm:1,"arabic-form":"arabicForm",ascent:0,attributeName:1,attributeType:1,autoReverse:1,azimuth:0,baseFrequency:1,baselineShift:1,"baseline-shift":"baselineShift",baseProfile:1,bbox:0,begin:0,bias:0,by:0,calcMode:1,capHeight:1,"cap-height":"capHeight",clip:0,clipPath:1,"clip-path":"clipPath",clipPathUnits:1,clipRule:1,"clip-rule":"clipRule",color:0,colorInterpolation:1,"color-interpolation":"colorInterpolation",colorInterpolationFilters:1,"color-interpolation-filters":"colorInterpolationFilters",colorProfile:1,"color-profile":"colorProfile",colorRendering:1,"color-rendering":"colorRendering",contentScriptType:1,contentStyleType:1,cursor:0,cx:0,cy:0,d:0,datatype:0,decelerate:0,descent:0,diffuseConstant:1,direction:0,display:0,divisor:0,dominantBaseline:1,"dominant-baseline":"dominantBaseline",dur:0,dx:0,dy:0,edgeMode:1,elevation:0,enableBackground:1,"enable-background":"enableBackground",end:0,exponent:0,externalResourcesRequired:1,fill:0,fillOpacity:1,"fill-opacity":"fillOpacity",fillRule:1,"fill-rule":"fillRule",filter:0,filterRes:1,filterUnits:1,floodOpacity:1,"flood-opacity":"floodOpacity",floodColor:1,"flood-color":"floodColor",focusable:0,fontFamily:1,"font-family":"fontFamily",fontSize:1,"font-size":"fontSize",fontSizeAdjust:1,"font-size-adjust":"fontSizeAdjust",fontStretch:1,"font-stretch":"fontStretch",fontStyle:1,"font-style":"fontStyle",fontVariant:1,"font-variant":"fontVariant",fontWeight:1,"font-weight":"fontWeight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:1,"glyph-name":"glyphName",glyphOrientationHorizontal:1,"glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphOrientationVertical:1,"glyph-orientation-vertical":"glyphOrientationVertical",glyphRef:1,gradientTransform:1,gradientUnits:1,hanging:0,horizAdvX:1,"horiz-adv-x":"horizAdvX",horizOriginX:1,"horiz-origin-x":"horizOriginX",ideographic:0,imageRendering:1,"image-rendering":"imageRendering",in2:0,in:0,inlist:0,intercept:0,k1:0,k2:0,k3:0,k4:0,k:0,kernelMatrix:1,kernelUnitLength:1,kerning:0,keyPoints:1,keySplines:1,keyTimes:1,lengthAdjust:1,letterSpacing:1,"letter-spacing":"letterSpacing",lightingColor:1,"lighting-color":"lightingColor",limitingConeAngle:1,local:0,markerEnd:1,"marker-end":"markerEnd",markerHeight:1,markerMid:1,"marker-mid":"markerMid",markerStart:1,"marker-start":"markerStart",markerUnits:1,markerWidth:1,mask:0,maskContentUnits:1,maskUnits:1,mathematical:0,mode:0,numOctaves:1,offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:1,"overline-position":"overlinePosition",overlineThickness:1,"overline-thickness":"overlineThickness",paintOrder:1,"paint-order":"paintOrder",panose1:0,"panose-1":"panose1",pathLength:1,patternContentUnits:1,patternTransform:1,patternUnits:1,pointerEvents:1,"pointer-events":"pointerEvents",points:0,pointsAtX:1,pointsAtY:1,pointsAtZ:1,prefix:0,preserveAlpha:1,preserveAspectRatio:1,primitiveUnits:1,property:0,r:0,radius:0,refX:1,refY:1,renderingIntent:1,"rendering-intent":"renderingIntent",repeatCount:1,repeatDur:1,requiredExtensions:1,requiredFeatures:1,resource:0,restart:0,result:0,results:0,rotate:0,rx:0,ry:0,scale:0,security:0,seed:0,shapeRendering:1,"shape-rendering":"shapeRendering",slope:0,spacing:0,specularConstant:1,specularExponent:1,speed:0,spreadMethod:1,startOffset:1,stdDeviation:1,stemh:0,stemv:0,stitchTiles:1,stopColor:1,"stop-color":"stopColor",stopOpacity:1,"stop-opacity":"stopOpacity",strikethroughPosition:1,"strikethrough-position":"strikethroughPosition",strikethroughThickness:1,"strikethrough-thickness":"strikethroughThickness",string:0,stroke:0,strokeDasharray:1,"stroke-dasharray":"strokeDasharray",strokeDashoffset:1,"stroke-dashoffset":"strokeDashoffset",strokeLinecap:1,"stroke-linecap":"strokeLinecap",strokeLinejoin:1,"stroke-linejoin":"strokeLinejoin",strokeMiterlimit:1,"stroke-miterlimit":"strokeMiterlimit",strokeWidth:1,"stroke-width":"strokeWidth",strokeOpacity:1,"stroke-opacity":"strokeOpacity",suppressContentEditableWarning:1,suppressHydrationWarning:1,surfaceScale:1,systemLanguage:1,tableValues:1,targetX:1,targetY:1,textAnchor:1,"text-anchor":"textAnchor",textDecoration:1,"text-decoration":"textDecoration",textLength:1,textRendering:1,"text-rendering":"textRendering",to:0,transform:0,typeof:0,u1:0,u2:0,underlinePosition:1,"underline-position":"underlinePosition",underlineThickness:1,"underline-thickness":"underlineThickness",unicode:0,unicodeBidi:1,"unicode-bidi":"unicodeBidi",unicodeRange:1,"unicode-range":"unicodeRange",unitsPerEm:1,"units-per-em":"unitsPerEm",unselectable:0,vAlphabetic:1,"v-alphabetic":"vAlphabetic",values:0,vectorEffect:1,"vector-effect":"vectorEffect",version:0,vertAdvY:1,"vert-adv-y":"vertAdvY",vertOriginX:1,"vert-origin-x":"vertOriginX",vertOriginY:1,"vert-origin-y":"vertOriginY",vHanging:1,"v-hanging":"vHanging",vIdeographic:1,"v-ideographic":"vIdeographic",viewBox:1,viewTarget:1,visibility:0,vMathematical:1,"v-mathematical":"vMathematical",vocab:0,widths:0,wordSpacing:1,"word-spacing":"wordSpacing",writingMode:1,"writing-mode":"writingMode",x1:0,x2:0,x:0,xChannelSelector:1,xHeight:1,"x-height":"xHeight",xlinkActuate:1,"xlink:actuate":"xlinkActuate",xlinkArcrole:1,"xlink:arcrole":"xlinkArcrole",xlinkHref:1,"xlink:href":"xlinkHref",xlinkRole:1,"xlink:role":"xlinkRole",xlinkShow:1,"xlink:show":"xlinkShow",xlinkTitle:1,"xlink:title":"xlinkTitle",xlinkType:1,"xlink:type":"xlinkType",xmlBase:1,"xml:base":"xmlBase",xmlLang:1,"xml:lang":"xmlLang",xmlns:0,"xml:space":"xmlSpace",xmlnsXlink:1,"xmlns:xlink":"xmlnsXlink",xmlSpace:1,y1:0,y2:0,y:0,yChannelSelector:1,z:0,zoomAndPan:1};const X6=0,io=1,xv=2,Sv=3,KS=4,Z6=5,Q6=6;function pue(t){return fn.hasOwnProperty(t)?fn[t]:null}function In(t,e,r,n,i,s,a){this.acceptsBooleans=e===xv||e===Sv||e===KS,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}const fn={},mue=["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"];mue.forEach(t=>{fn[t]=new In(t,X6,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(([t,e])=>{fn[t]=new In(t,io,!1,e,null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(t=>{fn[t]=new In(t,xv,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(t=>{fn[t]=new In(t,xv,!1,t,null,!1,!1)});["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(t=>{fn[t]=new In(t,Sv,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(t=>{fn[t]=new In(t,Sv,!0,t,null,!1,!1)});["capture","download"].forEach(t=>{fn[t]=new In(t,KS,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(t=>{fn[t]=new In(t,Q6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(t=>{fn[t]=new In(t,Z6,!1,t.toLowerCase(),null,!1,!1)});const qS=/[\-\:]([a-z])/g,zS=t=>t[1].toUpperCase();["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(t=>{const e=t.replace(qS,zS);fn[e]=new In(e,io,!1,t,null,!1,!1)});["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(t=>{const e=t.replace(qS,zS);fn[e]=new In(e,io,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(t=>{const e=t.replace(qS,zS);fn[e]=new In(e,io,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(t=>{fn[t]=new In(t,io,!1,t.toLowerCase(),null,!1,!1)});const gue="xlinkHref";fn[gue]=new In("xlinkHref",io,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(t=>{fn[t]=new In(t,io,!1,t.toLowerCase(),null,!0,!0)});const{CAMELCASE:vue,SAME:bue,possibleStandardNames:qk}=Tv,yue=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",Eue=yue+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",_ue=RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+Eue+"]*$")),Tue=Object.keys(qk).reduce((t,e)=>{const r=qk[e];return r===bue?t[e]=e:r===vue?t[e.toLowerCase()]=e:t[e]=r,t},{});Bi.BOOLEAN=Sv;Bi.BOOLEANISH_STRING=xv;Bi.NUMERIC=Z6;Bi.OVERLOADED_BOOLEAN=KS;Bi.POSITIVE_NUMERIC=Q6;Bi.RESERVED=X6;Bi.STRING=io;Bi.getPropertyInfo=pue;Bi.isCustomAttribute=_ue;Bi.possibleStandardNames=Tue;var YS={},XS={},zk=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,xue=/\n/g,Sue=/^\s*/,wue=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Aue=/^:\s*/,Rue=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Cue=/^[;\s]*/,Iue=/^\s+|\s+$/g,kue=`
`,Yk="/",Xk="*",jo="",Lue="comment",Due="declaration",Oue=function(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var r=1,n=1;function i(p){var m=p.match(xue);m&&(r+=m.length);var g=p.lastIndexOf(kue);n=~g?p.length-g:n+p.length}function s(){var p={line:r,column:n};return function(m){return m.position=new a(p),u(),m}}function a(p){this.start=p,this.end={line:r,column:n},this.source=e.source}a.prototype.content=t;function o(p){var m=new Error(e.source+":"+r+":"+n+": "+p);if(m.reason=p,m.filename=e.source,m.line=r,m.column=n,m.source=t,!e.silent)throw m}function l(p){var m=p.exec(t);if(m){var g=m[0];return i(g),t=t.slice(g.length),m}}function u(){l(Sue)}function c(p){var m;for(p=p||[];m=d();)m!==!1&&p.push(m);return p}function d(){var p=s();if(!(Yk!=t.charAt(0)||Xk!=t.charAt(1))){for(var m=2;jo!=t.charAt(m)&&(Xk!=t.charAt(m)||Yk!=t.charAt(m+1));)++m;if(m+=2,jo===t.charAt(m-1))return o("End of comment missing");var g=t.slice(2,m-2);return n+=2,i(g),t=t.slice(m),n+=2,p({type:Lue,comment:g})}}function h(){var p=s(),m=l(wue);if(m){if(d(),!l(Aue))return o("property missing ':'");var g=l(Rue),v=p({type:Due,property:Zk(m[0].replace(zk,jo)),value:g?Zk(g[0].replace(zk,jo)):jo});return l(Cue),v}}function f(){var p=[];c(p);for(var m;m=h();)m!==!1&&(p.push(m),c(p));return p}return u(),f()};function Zk(t){return t?t.replace(Iue,jo):jo}var Mue=we&&we.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(XS,"__esModule",{value:!0});XS.default=Nue;var Pue=Mue(Oue);function Nue(t,e){var r=null;if(!t||typeof t!="string")return r;var n=(0,Pue.default)(t),i=typeof e=="function";return n.forEach(function(s){if(s.type==="declaration"){var a=s.property,o=s.value;i?e(a,o,s):o&&(r=r||{},r[a]=o)}}),r}var wv={};Object.defineProperty(wv,"__esModule",{value:!0});wv.camelCase=void 0;var Fue=/^--[a-zA-Z0-9_-]+$/,$ue=/-([a-z])/g,Uue=/^[^-]+$/,Bue=/^-(webkit|moz|ms|o|khtml)-/,jue=/^-(ms)-/,Hue=function(t){return!t||Uue.test(t)||Fue.test(t)},Vue=function(t,e){return e.toUpperCase()},Qk=function(t,e){return"".concat(e,"-")},Wue=function(t,e){return e===void 0&&(e={}),Hue(t)?t:(t=t.toLowerCase(),e.reactCompat?t=t.replace(jue,Qk):t=t.replace(Bue,Qk),t.replace($ue,Vue))};wv.camelCase=Wue;var Gue=we&&we.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Kue=Gue(XS),que=wv;function n_(t,e){var r={};return!t||typeof t!="string"||(0,Kue.default)(t,function(n,i){n&&i&&(r[(0,que.camelCase)(n,e)]=i)}),r}n_.default=n_;var zue=n_;(function(t){var e=we&&we.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(t,"__esModule",{value:!0}),t.returnFirstArg=t.canTextBeChildOfNode=t.ELEMENTS_WITH_NO_TEXT_CHILDREN=t.PRESERVE_CUSTOM_ATTRIBUTES=void 0,t.isCustomComponent=s,t.setStyleProp=o;var r=R,n=e(zue),i=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);function s(c,d){return c.includes("-")?!i.has(c):!!(d&&typeof d.is=="string")}var a={reactCompat:!0};function o(c,d){if(typeof c=="string"){if(!c.trim()){d.style={};return}try{d.style=(0,n.default)(c,a)}catch{d.style={}}}}t.PRESERVE_CUSTOM_ATTRIBUTES=Number(r.version.split(".")[0])>=16,t.ELEMENTS_WITH_NO_TEXT_CHILDREN=new Set(["tr","tbody","thead","tfoot","colgroup","table","head","html","frameset"]);var l=function(c){return!t.ELEMENTS_WITH_NO_TEXT_CHILDREN.has(c.name)};t.canTextBeChildOfNode=l;var u=function(c){return c};t.returnFirstArg=u})(YS);Object.defineProperty(_v,"__esModule",{value:!0});_v.default=Que;var Pd=Bi,Jk=YS,Yue=["checked","value"],Xue=["input","select","textarea"],Zue={reset:!0,submit:!0};function Que(t,e){t===void 0&&(t={});var r={},n=!!(t.type&&Zue[t.type]);for(var i in t){var s=t[i];if((0,Pd.isCustomAttribute)(i)){r[i]=s;continue}var a=i.toLowerCase(),o=eL(a);if(o){var l=(0,Pd.getPropertyInfo)(o);switch(Yue.includes(o)&&Xue.includes(e)&&!n&&(o=eL("default"+a)),r[o]=s,l&&l.type){case Pd.BOOLEAN:r[o]=!0;break;case Pd.OVERLOADED_BOOLEAN:s===""&&(r[o]=!0);break}continue}Jk.PRESERVE_CUSTOM_ATTRIBUTES&&(r[i]=s)}return(0,Jk.setStyleProp)(t.style,r),r}function eL(t){return Pd.possibleStandardNames[t]}var ZS={},Jue=we&&we.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ZS,"__esModule",{value:!0});ZS.default=J6;var iy=R,ece=Jue(_v),th=YS,tce={cloneElement:iy.cloneElement,createElement:iy.createElement,isValidElement:iy.isValidElement};function J6(t,e){e===void 0&&(e={});for(var r=[],n=typeof e.replace=="function",i=e.transform||th.returnFirstArg,s=e.library||tce,a=s.cloneElement,o=s.createElement,l=s.isValidElement,u=t.length,c=0;c<u;c++){var d=t[c];if(n){var h=e.replace(d,c);if(l(h)){u>1&&(h=a(h,{key:h.key||c})),r.push(i(h,d,c));continue}}if(d.type==="text"){var f=!d.data.trim().length;if(f&&d.parent&&!(0,th.canTextBeChildOfNode)(d.parent)||e.trim&&f)continue;r.push(i(d.data,d,c));continue}var p=d,m={};rce(p)?((0,th.setStyleProp)(p.attribs.style,p.attribs),m=p.attribs):p.attribs&&(m=(0,ece.default)(p.attribs,p.name));var g=void 0;switch(d.type){case"script":case"style":d.children[0]&&(m.dangerouslySetInnerHTML={__html:d.children[0].data});break;case"tag":d.name==="textarea"&&d.children[0]?m.defaultValue=d.children[0].data:d.children&&d.children.length&&(g=J6(d.children,e));break;default:continue}u>1&&(m.key=c),r.push(i(o(d.name,m,g),d,c))}return r.length===1?r[0]:r}function rce(t){return th.PRESERVE_CUSTOM_ATTRIBUTES&&t.type==="tag"&&(0,th.isCustomComponent)(t.name,t.attribs)}(function(t){var e=we&&we.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(t,"__esModule",{value:!0}),t.htmlToDOM=t.domToReact=t.attributesToProps=t.Text=t.ProcessingInstruction=t.Element=t.Comment=void 0,t.default=o;var r=e(HS);t.htmlToDOM=r.default;var n=e(_v);t.attributesToProps=n.default;var i=e(ZS);t.domToReact=i.default;var s=Ni;Object.defineProperty(t,"Comment",{enumerable:!0,get:function(){return s.Comment}}),Object.defineProperty(t,"Element",{enumerable:!0,get:function(){return s.Element}}),Object.defineProperty(t,"ProcessingInstruction",{enumerable:!0,get:function(){return s.ProcessingInstruction}}),Object.defineProperty(t,"Text",{enumerable:!0,get:function(){return s.Text}});var a={lowerCaseAttributeNames:!1};function o(l,u){if(typeof l!="string")throw new TypeError("First argument must be a string");return l?(0,i.default)((0,r.default)(l,(u==null?void 0:u.htmlparser2)||a),u):[]}})(M6);const tL=ct(M6),nce=tL.default||tL;function uc(t,e){var r;const i=(((r=t.ownerDocument)===null||r===void 0?void 0:r.defaultView)||window).getComputedStyle(t);return i.getPropertyValue(e)||i[e]}const Bl=96,sy=25.4,ice=72,sce=6;function i_(t){return t?uc(t,"fontSize")||i_(t.parentElement):uc(window.document.documentElement,"fontSize")}function ace(t){var e;const r=t||"0",n=parseFloat(r),i=r.match(/[\d-.]+(\w+)$/),s=(e=i==null?void 0:i[1])!==null&&e!==void 0?e:"";return[n,s.toLowerCase()]}function s_(t,e){var r,n;const i=(n=(r=e==null?void 0:e.ownerDocument)===null||r===void 0?void 0:r.defaultView)!==null&&n!==void 0?n:window,s=i.document.documentElement||i.document.body,[a,o]=ace(t);switch(o){case"rem":return a*s_(i_(window.document.documentElement));case"em":return a*s_(i_(e),e==null?void 0:e.parentElement);case"in":return a*Bl;case"q":return a*Bl/sy/4;case"mm":return a*Bl/sy;case"cm":return a*Bl*10/sy;case"pt":return a*Bl/ice;case"pc":return a*Bl/sce;case"vh":return(a*i.innerHeight||s.clientWidth)/100;case"vw":return(a*i.innerWidth||s.clientHeight)/100;case"vmin":return a*Math.min(i.innerWidth||s.clientWidth,i.innerHeight||s.clientHeight)/100;case"vmax":return a*Math.max(i.innerWidth||s.clientWidth,i.innerHeight||s.clientHeight)/100;default:return a}}function a_(t,e=0){let r=0,n;return Object.assign((...s)=>{const a=Math.max(0,r+e-Date.now());a?(clearTimeout(n),n=setTimeout(()=>{r=Date.now(),t(...s)},a)):(r=Date.now(),t(...s))},{cancel:()=>{r=0,clearTimeout(n)}})}function Oa(t,e){t.classList.add(e)}function Ma(t,e){t.classList.remove(e)}function rL(t,e){return t.classList.contains(e)}const e8="littlefoot__tooltip";function o_(t){const e=Number.parseFloat(uc(t,"marginLeft")),r=t.offsetWidth-e;return(t.getBoundingClientRect().left+r/2)/window.innerWidth}function oce(t,e,r){const[n,i]=function(s,a){const o=Number.parseInt(uc(a,"marginTop"),10),l=2*o+a.offsetHeight,u=s.getBoundingClientRect().top+s.offsetHeight/2,c=window.innerHeight-u;return c>=l||c>=u?["below",c-o-15]:["above",u-o-15]}(e,t);if(r!==n){Ma(t,"is-"+r),Oa(t,"is-"+n);const s=100*o_(e)+"%",a=n==="above"?"100%":"0";t.style.transformOrigin=s+" "+a}return[n,i]}const Qc="is-active",Jc="is-changing",nL="is-scrollable",iL=t=>document.body.contains(t);function lce({id:t,button:e,content:r,host:n,popover:i,wrapper:s}){let a=0,o="above";return{id:t,activate:l=>{var u;e.setAttribute("aria-expanded","true"),Oa(e,Jc),Oa(e,Qc),e.insertAdjacentElement("afterend",i),i.style.maxWidth=document.body.clientWidth+"px",u=r,a=Math.round(s_(uc(u,"maxHeight"),u)),l==null||l(i,e)},dismiss:l=>{e.setAttribute("aria-expanded","false"),Oa(e,Jc),Ma(e,Qc),Ma(i,Qc),l==null||l(i,e)},isActive:()=>rL(e,Qc),isReady:()=>!rL(e,Jc),ready:()=>{Oa(i,Qc),Ma(e,Jc)},remove:()=>{i.remove(),Ma(e,Jc)},reposition:()=>{if(iL(i)){const[l,u]=oce(i,e,o);o=l,r.style.maxHeight=Math.min(a,u)+"px",i.offsetHeight<r.scrollHeight?(Oa(i,nL),r.setAttribute("tabindex","0")):(Ma(i,nL),r.removeAttribute("tabindex"))}},resize:()=>{iL(i)&&(i.style.left=function(l,u){const c=l.offsetWidth;return-o_(u)*c+Number.parseInt(uc(u,"marginLeft"),10)+u.offsetWidth/2}(r,e)+"px",s.style.maxWidth=r.offsetWidth+"px",function(l,u){const c=l.querySelector("."+e8);c&&(c.style.left=100*o_(u)+"%")}(i,e))},destroy:()=>n.remove()}}const sL="is-fully-scrolled",uce=t=>e=>{const r=e.currentTarget,n=-e.deltaY;n>0&&Ma(t,sL),r&&n<=0&&n<r.clientHeight+r.scrollTop-r.scrollHeight&&Oa(t,sL)},t8="littlefoot__content",r8="littlefoot__wrapper",bg="littlefoot--print",n8=(...t)=>t.forEach(e=>Oa(e,bg));function rh(t,e){return Array.from(t.querySelectorAll(e))}function aL(t,e){return t.querySelector("."+e)||t.firstElementChild||t}function l_(t){const e=document.createElement("div");e.innerHTML=t;const r=e.firstElementChild;return r.remove(),r}function cce(t){return t!==void 0}function i8(t){const e=t.parentElement,r=rh(e,":scope > :not(."+bg+")"),n=r.filter(i=>i.tagName==="HR");r.length===n.length&&(n8(...n.concat(e)),i8(e))}function s8(t,e){const r=t.parentElement;t.remove(),r&&r!==e&&!r.innerHTML.replace(/(\[\]|&nbsp;|\s)/g,"")&&s8(r,e)}function dce([t,e,r],n){const i=l_(r.outerHTML);rh(i,'[href$="#'+t+'"]').forEach(a=>s8(a,i));const s=i.innerHTML.trim();return[e,r,{id:String(n+1),number:n+1,reference:"lf-"+t,content:s.startsWith("<")?s:"<p>"+s+"</p>"}]}function oL(t){return e=>t.replace(/<%=?\s*(\w+?)\s*%>/g,(r,n)=>{var i;return String((i=e[n])!==null&&i!==void 0?i:"")})}function hce(t,e){const r=oL(t),n=oL(e);return([i,s])=>{const a=s.id,o=l_('<span class="littlefoot">'+r(s)+"</span>"),l=o.firstElementChild;l.setAttribute("aria-expanded","false"),l.dataset.footnoteButton="",l.dataset.footnoteId=a;const u=l_(n(s));u.dataset.footnotePopover="",u.dataset.footnoteId=a;const c=aL(u,r8),d=aL(u,t8);return function(h,f){h.addEventListener("wheel",a_(uce(f),16))}(d,u),i.insertAdjacentElement("beforebegin",o),{id:a,button:l,host:o,popover:u,content:d,wrapper:c}}}function fce({allowDuplicates:t,anchorParentSelector:e,anchorPattern:r,buttonTemplate:n,contentTemplate:i,footnoteSelector:s,numberResetSelector:a,scope:o}){const l=function(u,c,d){return rh(u,d+' a[href*="#"]').filter(h=>(h.href+h.rel).match(c))}(document,r,o).map(function(u,c,d,h){const f=[];return p=>{const m=p.href.split("#")[1],g=m?rh(u,"#"+window.CSS.escape(m)).find(b=>c||!f.includes(b)):void 0,v=g==null?void 0:g.closest(h);if(v){f.push(v);const b=p.closest(d)||p;return[b.id||p.id,b,v]}}}(document,t,e,s)).filter(cce).map(dce).map(a?function(u){let c=0,d=null;return([h,f,p])=>{const m=h.closest(u);return c=d===m?c+1:1,d=m,[h,f,Object.assign(Object.assign({},p),{number:c})]}}(a):u=>u).map(([u,c,d])=>(n8(u,c),i8(c),[u,d])).map(hce(n,i)).map(lce);return{footnotes:l,unmount(){l.forEach(u=>u.destroy()),rh(document,"."+bg).forEach(u=>Ma(u,bg))}}}const u_="[data-footnote-id]",c_=(t,e)=>t.target.closest(e),a8=t=>t==null?void 0:t.dataset.footnoteId,lL=t=>e=>{e.preventDefault();const r=c_(e,u_),n=a8(r);n&&t(n)},Nd=document.addEventListener,uL=window.addEventListener,cL=(t,e,r,n)=>Nd(t,i=>{const s=i.target;s!=null&&s.closest(e)&&r.call(s,i)},n),pce={activateDelay:100,activateOnHover:!1,allowDuplicates:!0,allowMultiple:!1,anchorParentSelector:"sup",anchorPattern:/(fn|footnote|note)[:\-_\d]/gi,dismissDelay:100,dismissOnUnhover:!1,dismissOnDocumentTouch:!0,footnoteSelector:"li",hoverDelay:250,numberResetSelector:"",scope:"",contentTemplate:`<aside class="littlefoot__popover" id="fncontent:<% id %>"><div class="${r8}"><div class="${t8}"><% content %></div></div><div class="${e8}"></div></aside>`,buttonTemplate:'<button class="littlefoot__button" id="<% reference %>" title="See Footnote <% number %>"><svg role="img" aria-labelledby="title-<% reference %>" viewbox="0 0 31 6" preserveAspectRatio="xMidYMid"><title id="title-<% reference %>">Footnote <% number %></title><circle r="3" cx="3" cy="3" fill="white"></circle><circle r="3" cx="15" cy="3" fill="white"></circle><circle r="3" cx="27" cy="3" fill="white"></circle></svg></button>'};function mce(t={}){const e=Object.assign(Object.assign({},pce),t),r=function({footnotes:i,unmount:s},a){let o;const l=h=>f=>{f.isReady()&&(f.dismiss(a.dismissCallback),setTimeout(f.remove,h))},u=h=>f=>{a.allowMultiple||i.filter(p=>p.id!==f.id).forEach(l(a.dismissDelay)),f.isReady()&&(f.activate(a.activateCallback),f.reposition(),f.resize(),setTimeout(f.ready,h))},c=h=>f=>{const p=i.find(m=>m.id===f);p&&h(p)},d=()=>i.forEach(l(a.dismissDelay));return{activate:(h,f)=>c(u(f))(h),dismiss:(h,f)=>c(l(f))(h),dismissAll:d,touchOutside:()=>{a.dismissOnDocumentTouch&&d()},repositionAll:()=>i.forEach(h=>h.reposition()),resizeAll:()=>i.forEach(h=>h.resize()),toggle:c(h=>h.isActive()?l(a.dismissDelay)(h):u(a.activateDelay)(h)),hover:c(h=>{o=h.id,a.activateOnHover&&!h.isActive()&&u(a.hoverDelay)(h)}),unhover:c(h=>{h.id===o&&(o=null),a.dismissOnUnhover&&setTimeout(()=>i.filter(f=>f.id!==o).forEach(l(a.dismissDelay)),a.hoverDelay)}),unmount:s}}(fce(e),e),n=function(i){const s=h=>{const f=c_(h,"[data-footnote-button]"),p=a8(f);p?(h.preventDefault(),i.toggle(p)):c_(h,"[data-footnote-popover]")||i.touchOutside()},a=a_(i.repositionAll,16),o=a_(i.resizeAll,16),l=lL(i.hover),u=lL(i.unhover),c=new AbortController,d={signal:c.signal};return Nd("touchend",s,d),Nd("click",s,d),Nd("keyup",h=>{h.keyCode!==27&&h.key!=="Escape"&&h.key!=="Esc"||i.dismissAll()},d),Nd("gestureend",a,d),uL("scroll",a,d),uL("resize",o,d),cL("mouseover",u_,l,d),cL("mouseout",u_,u,d),()=>{c.abort()}}(r);return{activate(i,s=e.activateDelay){r.activate(i,s)},dismiss(i,s=e.dismissDelay){i===void 0?r.dismissAll():r.dismiss(i,s)},unmount(){n(),r.unmount()},getSetting:i=>e[i],updateSetting(i,s){e[i]=s}}}function En(){return En=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},En.apply(this,arguments)}function QS(t,e){if(t==null)return{};var r,n,i={},s=Object.keys(t);for(n=0;n<s.length;n++)e.indexOf(r=s[n])>=0||(i[r]=t[r]);return i}function rm(t){var e=R.useRef({fn:t,curr:void 0}).current;if(e.fn=t,!e.curr){var r=Object.create(null);Object.keys(t).forEach(function(n){r[n]=function(){var i;return(i=e.fn[n]).call.apply(i,[e.fn].concat([].slice.call(arguments)))}}),e.curr=r}return e.curr}function d_(t){return R.useReducer(function(e,r){return En({},e,typeof r=="function"?r(e):r)},t)}R.createContext(void 0);var Fs=typeof window<"u"&&"ontouchstart"in window,h_=function(t,e,r){return Math.max(Math.min(t,r),e)},s0=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=0),h_(t,1*(1-r),Math.max(6,e)*(1+r))},f_=typeof window>"u"||/ServerSideRendering/.test(navigator&&navigator.userAgent)?R.useEffect:R.useLayoutEffect;function vu(t,e,r){var n=R.useRef(e);n.current=e,R.useEffect(function(){function i(s){n.current(s)}return t&&window.addEventListener(t,i,r),function(){t&&window.removeEventListener(t,i)}},[t])}var gce=["container"];function vce(t){var e=t.container,r=e===void 0?document.body:e,n=QS(t,gce);return B_.createPortal(Z.createElement("div",En({},n)),r)}function bce(t){return Z.createElement("svg",En({width:"44",height:"44",viewBox:"0 0 768 768"},t),Z.createElement("path",{d:"M607.5 205.5l-178.5 178.5 178.5 178.5-45 45-178.5-178.5-178.5 178.5-45-45 178.5-178.5-178.5-178.5 45-45 178.5 178.5 178.5-178.5z"}))}function yce(t){return Z.createElement("svg",En({width:"44",height:"44",viewBox:"0 0 768 768"},t),Z.createElement("path",{d:"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z"}))}function Ece(t){return Z.createElement("svg",En({width:"44",height:"44",viewBox:"0 0 768 768"},t),Z.createElement("path",{d:"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z"}))}function _ce(){return R.useEffect(function(){var t=document.body.style,e=t.overflow;return t.overflow="hidden",function(){t.overflow=e}},[]),null}function dL(t){var e=t.touches[0],r=e.clientX,n=e.clientY;if(t.touches.length>=2){var i=t.touches[1],s=i.clientX,a=i.clientY;return[(r+s)/2,(n+a)/2,Math.sqrt(Math.pow(s-r,2)+Math.pow(a-n,2))]}return[r,n,0]}var Ca=function(t,e,r,n){var i,s=r*e,a=(s-n)/2,o=t;return s<=n?(i=1,o=0):t>0&&a-t<=0?(i=2,o=a):t<0&&a+t<=0&&(i=3,o=-a),[i,o]};function ay(t,e,r,n,i,s,a,o,l,u){a===void 0&&(a=innerWidth/2),o===void 0&&(o=innerHeight/2),l===void 0&&(l=0),u===void 0&&(u=0);var c=Ca(t,s,r,innerWidth)[0],d=Ca(e,s,n,innerHeight),h=innerWidth/2,f=innerHeight/2;return{x:a-s/i*(a-(h+t))-h+(n/r>=3&&r*s===innerWidth?0:c?l/2:l),y:o-s/i*(o-(f+e))-f+(d[0]?u/2:u),lastCX:a,lastCY:o}}function p_(t,e,r){var n=t%180!=0;return n?[r,e,n]:[e,r,n]}function oy(t,e,r){var n=p_(r,innerWidth,innerHeight),i=n[0],s=n[1],a=0,o=i,l=s,u=t/e*s,c=e/t*i;return t<i&&e<s?(o=t,l=e):t<i&&e>=s?o=u:t>=i&&e<s||t/e>i/s?l=c:e/t>=3&&!n[2]?a=((l=c)-s)/2:o=u,{width:o,height:l,x:0,y:a,pause:!0}}function a0(t,e){var r=e.leading,n=r!==void 0&&r,i=e.maxWait,s=e.wait,a=s===void 0?i||0:s,o=R.useRef(t);o.current=t;var l=R.useRef(0),u=R.useRef(),c=function(){return u.current&&clearTimeout(u.current)},d=R.useCallback(function(){var h=[].slice.call(arguments),f=Date.now();function p(){l.current=f,c(),o.current.apply(null,h)}var m=l.current,g=f-m;if(m===0&&(n&&p(),l.current=f),i!==void 0){if(g>i)return void p()}else g<a&&(l.current=f);c(),u.current=setTimeout(function(){p(),l.current=0},a)},[a,i,n]);return d.cancel=c,d}var hL=function(t,e,r){return Ho(t,e,r,100,function(n){return n},function(){return Ho(e,t,r)})},Tce=function(t){return 1-Math.pow(1-t,4)};function Ho(t,e,r,n,i,s){n===void 0&&(n=400),i===void 0&&(i=Tce);var a=e-t;if(a!==0){var o=Date.now(),l=0,u=function(){var d=Math.min(1,(Date.now()-o)/n);r(t+i(d)*a)&&d<1?c():(cancelAnimationFrame(l),d>=1&&s&&s())};c()}function c(){l=requestAnimationFrame(u)}}var xce={T:0,L:0,W:0,H:0,FIT:void 0},o8=function(){var t=R.useRef(!1);return R.useEffect(function(){return t.current=!0,function(){t.current=!1}},[]),t},Sce=["className"];function wce(t){var e=t.className,r=e===void 0?"":e,n=QS(t,Sce);return Z.createElement("div",En({className:"PhotoView__Spinner "+r},n),Z.createElement("svg",{viewBox:"0 0 32 32",width:"36",height:"36",fill:"white"},Z.createElement("path",{opacity:".25",d:"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"}),Z.createElement("path",{d:"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z"})))}var Ace=["src","loaded","broken","className","onPhotoLoad","loadingElement","brokenElement"];function Rce(t){var e=t.src,r=t.loaded,n=t.broken,i=t.className,s=t.onPhotoLoad,a=t.loadingElement,o=t.brokenElement,l=QS(t,Ace),u=o8();return e&&!n?Z.createElement(Z.Fragment,null,Z.createElement("img",En({className:"PhotoView__Photo"+(i?" "+i:""),src:e,onLoad:function(c){var d=c.target;u.current&&s({loaded:!0,naturalWidth:d.naturalWidth,naturalHeight:d.naturalHeight})},onError:function(){u.current&&s({broken:!0})},alt:""},l)),!r&&(Z.createElement("span",{className:"PhotoView__icon"},a)||Z.createElement(wce,{className:"PhotoView__icon"}))):o?Z.createElement("span",{className:"PhotoView__icon"},typeof o=="function"?o({src:e}):o):null}var Cce={naturalWidth:void 0,naturalHeight:void 0,width:void 0,height:void 0,loaded:void 0,broken:!1,x:0,y:0,touched:!1,maskTouched:!1,rotate:0,scale:1,CX:0,CY:0,lastX:0,lastY:0,lastCX:0,lastCY:0,lastScale:1,touchTime:0,touchLength:0,pause:!0,stopRaf:!0,reach:void 0};function Ice(t){var e=t.item,r=e.src,n=e.render,i=e.width,s=i===void 0?0:i,a=e.height,o=a===void 0?0:a,l=e.originRef,u=t.visible,c=t.speed,d=t.easing,h=t.wrapClassName,f=t.className,p=t.style,m=t.loadingElement,g=t.brokenElement,v=t.onPhotoTap,b=t.onMaskTap,y=t.onReachMove,T=t.onReachUp,x=t.onPhotoResize,_=t.isActive,S=t.expose,A=d_(Cce),k=A[0],I=A[1],C=R.useRef(0),N=o8(),P=k.naturalWidth,V=P===void 0?s:P,M=k.naturalHeight,U=M===void 0?o:M,B=k.width,X=B===void 0?s:B,te=k.height,D=te===void 0?o:te,L=k.loaded,Y=L===void 0?!r:L,$=k.broken,j=k.x,z=k.y,re=k.touched,ne=k.stopRaf,ue=k.maskTouched,Te=k.rotate,ce=k.scale,_e=k.CX,De=k.CY,nt=k.lastX,ke=k.lastY,Oe=k.lastCX,ar=k.lastCY,Et=k.lastScale,Gt=k.touchTime,er=k.touchLength,jt=k.pause,ze=k.reach,$e=rm({onScale:function(se){return tr(s0(se))},onRotate:function(se){Te!==se&&(S({rotate:se}),I(En({rotate:se},oy(V,U,se))))}});function tr(se,Ue,dt){ce!==se&&(S({scale:se}),I(En({scale:se},ay(j,z,X,D,ce,se,Ue,dt),se<=1&&{x:0,y:0})))}var wt=a0(function(se,Ue,dt){if(dt===void 0&&(dt=0),(re||ue)&&_){var li=p_(Te,X,D),Ti=li[0],zn=li[1];if(dt===0&&C.current===0){var F=Math.abs(se-_e)<=20,H=Math.abs(Ue-De)<=20;if(F&&H)return void I({lastCX:se,lastCY:Ue});C.current=F?Ue>De?3:2:1}var Q,ie=se-Oe,me=Ue-ar;if(dt===0){var Ae=Ca(ie+nt,ce,Ti,innerWidth)[0],He=Ca(me+ke,ce,zn,innerHeight);Q=function(ve,pe,Se,Ke){return pe&&ve===1||Ke==="x"?"x":Se&&ve>1||Ke==="y"?"y":void 0}(C.current,Ae,He[0],ze),Q!==void 0&&y(Q,se,Ue,ce)}if(Q==="x"||ue)return void I({reach:"x"});var ge=s0(ce+(dt-er)/100/2*ce,V/X,.2);S({scale:ge}),I(En({touchLength:dt,reach:Q,scale:ge},ay(j,z,X,D,ce,ge,se,Ue,ie,me)))}},{maxWait:8});function gt(se){return!ne&&!re&&(N.current&&I(En({},se,{pause:u})),N.current)}var mr,It,Kt,nn,de,he,Me,ye,ot=(de=function(se){return gt({x:se})},he=function(se){return gt({y:se})},Me=function(se){return N.current&&(S({scale:se}),I({scale:se})),!re&&N.current},ye=rm({X:function(se){return de(se)},Y:function(se){return he(se)},S:function(se){return Me(se)}}),function(se,Ue,dt,li,Ti,zn,F,H,Q,ie,me){var Ae=p_(ie,Ti,zn),He=Ae[0],ge=Ae[1],ve=Ca(se,H,He,innerWidth),pe=ve[0],Se=ve[1],Ke=Ca(Ue,H,ge,innerHeight),Qe=Ke[0],gr=Ke[1],vt=Date.now()-me;if(vt>=200||H!==F||Math.abs(Q-F)>1){var Je=ay(se,Ue,Ti,zn,F,H),_t=Je.x,kn=Je.y,Ur=pe?Se:_t!==se?_t:null,pn=Qe?gr:kn!==Ue?kn:null;return Ur!==null&&Ho(se,Ur,ye.X),pn!==null&&Ho(Ue,pn,ye.Y),void(H!==F&&Ho(F,H,ye.S))}var Br=(se-dt)/vt,ui=(Ue-li)/vt,Ln=Math.sqrt(Math.pow(Br,2)+Math.pow(ui,2)),sn=!1,Dn=!1;(function(mn,Ge){var rt,jr=mn,Sn=0,bt=0,Yn=function(Cc){rt||(rt=Cc);var Ic=Cc-rt,Tw=Math.sign(mn),xw=-.001*Tw,Sw=Math.sign(-jr)*Math.pow(jr,2)*2e-4,GF=jr*Ic+(xw+Sw)*Math.pow(Ic,2)/2;Sn+=GF,rt=Cc,Tw*(jr+=(xw+Sw)*Ic)<=0?On():Ge(Sn)?Xn():On()};function Xn(){bt=requestAnimationFrame(Yn)}function On(){cancelAnimationFrame(bt)}Xn()})(Ln,function(mn){var Ge=se+mn*(Br/Ln),rt=Ue+mn*(ui/Ln),jr=Ca(Ge,F,He,innerWidth),Sn=jr[0],bt=jr[1],Yn=Ca(rt,F,ge,innerHeight),Xn=Yn[0],On=Yn[1];if(Sn&&!sn&&(sn=!0,pe?Ho(Ge,bt,ye.X):hL(bt,Ge+(Ge-bt),ye.X)),Xn&&!Dn&&(Dn=!0,Qe?Ho(rt,On,ye.Y):hL(On,rt+(rt-On),ye.Y)),sn&&Dn)return!1;var Cc=sn||ye.X(bt),Ic=Dn||ye.Y(On);return Cc&&Ic})}),qt=(mr=v,It=function(se,Ue){ze||tr(ce!==1?1:Math.max(2,V/X),se,Ue)},Kt=R.useRef(0),nn=a0(function(){Kt.current=0,mr.apply(void 0,[].slice.call(arguments))},{wait:300}),function(){var se=[].slice.call(arguments);Kt.current+=1,nn.apply(void 0,se),Kt.current>=2&&(nn.cancel(),Kt.current=0,It.apply(void 0,se))});function Hi(se,Ue){if(C.current=0,(re||ue)&&_){I({touched:!1,maskTouched:!1,pause:!1,stopRaf:!1,reach:void 0});var dt=s0(ce,V/X);if(ot(j,z,nt,ke,X,D,ce,dt,Et,Te,Gt),T(se,Ue),_e===se&&De===Ue){if(re)return void qt(se,Ue);ue&&b(se,Ue)}}}function sa(se,Ue,dt){dt===void 0&&(dt=0),I({touched:!0,CX:se,CY:Ue,lastCX:se,lastCY:Ue,lastX:j,lastY:z,lastScale:ce,touchLength:dt,touchTime:Date.now()})}function Rs(se){I({maskTouched:!0,CX:se.clientX,CY:se.clientY,lastX:j,lastY:z})}vu(Fs?void 0:"mousemove",function(se){se.preventDefault(),wt(se.clientX,se.clientY)}),vu(Fs?void 0:"mouseup",function(se){Hi(se.clientX,se.clientY)}),vu(Fs?"touchmove":void 0,function(se){se.preventDefault();var Ue=dL(se);wt.apply(void 0,Ue)},{passive:!1}),vu(Fs?"touchend":void 0,function(se){var Ue=se.changedTouches[0];Hi(Ue.clientX,Ue.clientY)},{passive:!1}),vu("resize",a0(function(){Y&&!re&&(I(oy(V,U,Te)),x())},{maxWait:8})),f_(function(){_&&S(En({scale:ce,rotate:Te},$e))},[_]);var qn=function(se,Ue,dt,li,Ti,zn,F,H,Q,ie){var me=function(_t,kn,Ur,pn,Br){var ui=R.useRef(!1),Ln=d_({lead:!0,scale:Ur}),sn=Ln[0],Dn=sn.lead,mn=sn.scale,Ge=Ln[1],rt=a0(function(jr){try{return Br(!0),Ge({lead:!1,scale:jr}),Promise.resolve()}catch(Sn){return Promise.reject(Sn)}},{wait:pn});return f_(function(){ui.current?(Br(!1),Ge({lead:!0}),rt(Ur)):ui.current=!0},[Ur]),Dn?[_t*mn,kn*mn,Ur/mn]:[_t*Ur,kn*Ur,1]}(zn,F,H,Q,ie),Ae=me[0],He=me[1],ge=me[2],ve=function(_t,kn,Ur,pn,Br){var ui=R.useState(xce),Ln=ui[0],sn=ui[1],Dn=R.useState(0),mn=Dn[0],Ge=Dn[1],rt=R.useRef(),jr=rm({OK:function(){return _t&&Ge(4)}});function Sn(bt){Br(!1),Ge(bt)}return R.useEffect(function(){if(rt.current||(rt.current=Date.now()),Ur){if(function(bt,Yn){var Xn=bt&&bt.current;if(Xn&&Xn.nodeType===1){var On=Xn.getBoundingClientRect();Yn({T:On.top,L:On.left,W:On.width,H:On.height,FIT:Xn.tagName==="IMG"?getComputedStyle(Xn).objectFit:void 0})}}(kn,sn),_t)return Date.now()-rt.current<250?(Ge(1),requestAnimationFrame(function(){Ge(2),requestAnimationFrame(function(){return Sn(3)})}),void setTimeout(jr.OK,pn)):void Ge(4);Sn(5)}},[_t,Ur]),[mn,Ln]}(se,Ue,dt,Q,ie),pe=ve[0],Se=ve[1],Ke=Se.W,Qe=Se.FIT,gr=innerWidth/2,vt=innerHeight/2,Je=pe<3||pe>4;return[Je?Ke?Se.L:gr:li+(gr-zn*H/2),Je?Ke?Se.T:vt:Ti+(vt-F*H/2),Ae,Je&&Qe?Ae*(Se.H/Ke):He,pe===0?ge:Je?Ke/(zn*H)||.01:ge,Je?Qe?1:0:1,pe,Qe]}(u,l,Y,j,z,X,D,ce,c,function(se){return I({pause:se})}),Ye=qn[4],Ot=qn[6],yr="transform "+c+"ms "+d,or={className:f,onMouseDown:Fs?void 0:function(se){se.stopPropagation(),se.button===0&&sa(se.clientX,se.clientY,0)},onTouchStart:Fs?function(se){se.stopPropagation(),sa.apply(void 0,dL(se))}:void 0,onWheel:function(se){if(!ze){var Ue=s0(ce-se.deltaY/100/2,V/X);I({stopRaf:!0}),tr(Ue,se.clientX,se.clientY)}},style:{width:qn[2]+"px",height:qn[3]+"px",opacity:qn[5],objectFit:Ot===4?void 0:qn[7],transform:Te?"rotate("+Te+"deg)":void 0,transition:Ot>2?yr+", opacity "+c+"ms ease, height "+(Ot<4?c/2:Ot>4?c:0)+"ms "+d:void 0}};return Z.createElement("div",{className:"PhotoView__PhotoWrap"+(h?" "+h:""),style:p,onMouseDown:!Fs&&_?Rs:void 0,onTouchStart:Fs&&_?function(se){return Rs(se.touches[0])}:void 0},Z.createElement("div",{className:"PhotoView__PhotoBox",style:{transform:"matrix("+Ye+", 0, 0, "+Ye+", "+qn[0]+", "+qn[1]+")",transition:re||jt?void 0:yr,willChange:_?"transform":void 0}},r?Z.createElement(Rce,En({src:r,loaded:Y,broken:$},or,{onPhotoLoad:function(se){I(En({},se,se.loaded&&oy(se.naturalWidth||0,se.naturalHeight||0,Te)))},loadingElement:m,brokenElement:g})):n&&n({attrs:or,scale:Ye,rotate:Te})))}var fL={x:0,touched:!1,pause:!1,lastCX:void 0,lastCY:void 0,bg:void 0,lastBg:void 0,overlay:!0,minimal:!0,scale:1,rotate:0};function kce(t){var e=t.loop,r=e===void 0?3:e,n=t.speed,i=t.easing,s=t.photoClosable,a=t.maskClosable,o=a===void 0||a,l=t.maskOpacity,u=l===void 0?1:l,c=t.pullClosable,d=c===void 0||c,h=t.bannerVisible,f=h===void 0||h,p=t.overlayRender,m=t.toolbarRender,g=t.className,v=t.maskClassName,b=t.photoClassName,y=t.photoWrapClassName,T=t.loadingElement,x=t.brokenElement,_=t.images,S=t.index,A=S===void 0?0:S,k=t.onIndexChange,I=t.visible,C=t.onClose,N=t.afterClose,P=t.portalContainer,V=d_(fL),M=V[0],U=V[1],B=R.useState(0),X=B[0],te=B[1],D=M.x,L=M.touched,Y=M.pause,$=M.lastCX,j=M.lastCY,z=M.bg,re=z===void 0?u:z,ne=M.lastBg,ue=M.overlay,Te=M.minimal,ce=M.scale,_e=M.rotate,De=M.onScale,nt=M.onRotate,ke=t.hasOwnProperty("index"),Oe=ke?A:X,ar=ke?k:te,Et=R.useRef(Oe),Gt=_.length,er=_[Oe],jt=typeof r=="boolean"?r:Gt>r,ze=function(Ye,Ot){var yr=R.useReducer(function(dt){return!dt},!1)[1],or=R.useRef(0),se=function(dt,li){var Ti=R.useRef(dt);function zn(F){Ti.current=F}return R.useMemo(function(){(function(F){Ye?(F(Ye),or.current=1):or.current=2})(zn)},[dt]),[Ti.current,zn]}(Ye),Ue=se[1];return[se[0],or.current,function(){yr(),or.current===2&&(Ue(!1),Ot&&Ot()),or.current=0}]}(I,N),$e=ze[0],tr=ze[1],wt=ze[2];f_(function(){if($e)return U({pause:!0,x:Oe*-(innerWidth+20)}),void(Et.current=Oe);U(fL)},[$e]);var gt=rm({close:function(Ye){nt&&nt(0),U({overlay:!0,lastBg:re}),C(Ye)},changeIndex:function(Ye,Ot){Ot===void 0&&(Ot=!1);var yr=jt?Et.current+(Ye-Oe):Ye,or=Gt-1,se=h_(yr,0,or),Ue=jt?yr:se,dt=innerWidth+20;U({touched:!1,lastCX:void 0,lastCY:void 0,x:-dt*Ue,pause:Ot}),Et.current=Ue,ar&&ar(jt?Ye<0?or:Ye>or?0:Ye:se)}}),mr=gt.close,It=gt.changeIndex;function Kt(Ye){return Ye?mr():U({overlay:!ue})}function nn(){U({x:-(innerWidth+20)*Oe,lastCX:void 0,lastCY:void 0,pause:!0}),Et.current=Oe}function de(Ye,Ot,yr,or){Ye==="x"?function(se){if($!==void 0){var Ue=se-$,dt=Ue;!jt&&(Oe===0&&Ue>0||Oe===Gt-1&&Ue<0)&&(dt=Ue/2),U({touched:!0,lastCX:$,x:-(innerWidth+20)*Et.current+dt,pause:!1})}else U({touched:!0,lastCX:se,x:D,pause:!1})}(Ot):Ye==="y"&&function(se,Ue){if(j!==void 0){var dt=u===null?null:h_(u,.01,u-Math.abs(se-j)/100/4);U({touched:!0,lastCY:j,bg:Ue===1?dt:u,minimal:Ue===1})}else U({touched:!0,lastCY:se,bg:re,minimal:!0})}(yr,or)}function he(Ye,Ot){var yr=Ye-($??Ye),or=Ot-(j??Ot),se=!1;if(yr<-40)It(Oe+1);else if(yr>40)It(Oe-1);else{var Ue=-(innerWidth+20)*Et.current;Math.abs(or)>100&&Te&&d&&(se=!0,mr()),U({touched:!1,x:Ue,lastCX:void 0,lastCY:void 0,bg:u,overlay:!!se||ue})}}vu("keydown",function(Ye){if(I)switch(Ye.key){case"ArrowLeft":It(Oe-1,!0);break;case"ArrowRight":It(Oe+1,!0);break;case"Escape":mr()}});var Me=function(Ye,Ot,yr){return R.useMemo(function(){var or=Ye.length;return yr?Ye.concat(Ye).concat(Ye).slice(or+Ot-1,or+Ot+2):Ye.slice(Math.max(Ot-1,0),Math.min(Ot+2,or+1))},[Ye,Ot,yr])}(_,Oe,jt);if(!$e)return null;var ye=ue&&!tr,ot=I?re:ne,qt=De&&nt&&{images:_,index:Oe,visible:I,onClose:mr,onIndexChange:It,overlayVisible:ye,overlay:er&&er.overlay,scale:ce,rotate:_e,onScale:De,onRotate:nt},Hi=n?n(tr):400,sa=i?i(tr):"cubic-bezier(0.25, 0.8, 0.25, 1)",Rs=n?n(3):600,qn=i?i(3):"cubic-bezier(0.25, 0.8, 0.25, 1)";return Z.createElement(vce,{className:"PhotoView-Portal"+(ye?"":" PhotoView-Slider__clean")+(I?"":" PhotoView-Slider__willClose")+(g?" "+g:""),role:"dialog",onClick:function(Ye){return Ye.stopPropagation()},container:P},I&&Z.createElement(_ce,null),Z.createElement("div",{className:"PhotoView-Slider__Backdrop"+(v?" "+v:"")+(tr===1?" PhotoView-Slider__fadeIn":tr===2?" PhotoView-Slider__fadeOut":""),style:{background:ot?"rgba(0, 0, 0, "+ot+")":void 0,transitionTimingFunction:sa,transitionDuration:(L?0:Hi)+"ms",animationDuration:Hi+"ms"},onAnimationEnd:wt}),f&&Z.createElement("div",{className:"PhotoView-Slider__BannerWrap"},Z.createElement("div",{className:"PhotoView-Slider__Counter"},Oe+1," / ",Gt),Z.createElement("div",{className:"PhotoView-Slider__BannerRight"},m&&qt&&m(qt),Z.createElement(bce,{className:"PhotoView-Slider__toolbarIcon",onClick:mr}))),Me.map(function(Ye,Ot){var yr=jt||Oe!==0?Et.current-1+Ot:Oe+Ot;return Z.createElement(Ice,{key:jt?Ye.key+"/"+Ye.src+"/"+yr:Ye.key,item:Ye,speed:Hi,easing:sa,visible:I,onReachMove:de,onReachUp:he,onPhotoTap:function(){return Kt(s)},onMaskTap:function(){return Kt(o)},wrapClassName:y,className:b,style:{left:(innerWidth+20)*yr+"px",transform:"translate3d("+D+"px, 0px, 0)",transition:L||Y?void 0:"transform "+Rs+"ms "+qn},loadingElement:T,brokenElement:x,onPhotoResize:nn,isActive:Et.current===yr,expose:U})}),!Fs&&f&&Z.createElement(Z.Fragment,null,(jt||Oe!==0)&&Z.createElement("div",{className:"PhotoView-Slider__ArrowLeft",onClick:function(){return It(Oe-1,!0)}},Z.createElement(yce,null)),(jt||Oe+1<Gt)&&Z.createElement("div",{className:"PhotoView-Slider__ArrowRight",onClick:function(){return It(Oe+1,!0)}},Z.createElement(Ece,null))),p&&qt&&Z.createElement("div",{className:"PhotoView-Slider__Overlay"},p(qt)))}const Lce={hljs:{display:"block",overflowX:"auto",padding:"0.5em",color:"#abb2bf",background:"#282c34"},"hljs-comment":{color:"#5c6370",fontStyle:"italic"},"hljs-quote":{color:"#5c6370",fontStyle:"italic"},"hljs-doctag":{color:"#c678dd"},"hljs-keyword":{color:"#c678dd"},"hljs-formula":{color:"#c678dd"},"hljs-section":{color:"#e06c75"},"hljs-name":{color:"#e06c75"},"hljs-selector-tag":{color:"#e06c75"},"hljs-deletion":{color:"#e06c75"},"hljs-subst":{color:"#e06c75"},"hljs-literal":{color:"#56b6c2"},"hljs-string":{color:"#98c379"},"hljs-regexp":{color:"#98c379"},"hljs-addition":{color:"#98c379"},"hljs-attribute":{color:"#98c379"},"hljs-meta-string":{color:"#98c379"},"hljs-built_in":{color:"#e6c07b"},"hljs-class .hljs-title":{color:"#e6c07b"},"hljs-attr":{color:"#d19a66"},"hljs-variable":{color:"#d19a66"},"hljs-template-variable":{color:"#d19a66"},"hljs-type":{color:"#d19a66"},"hljs-selector-class":{color:"#d19a66"},"hljs-selector-attr":{color:"#d19a66"},"hljs-selector-pseudo":{color:"#d19a66"},"hljs-number":{color:"#d19a66"},"hljs-symbol":{color:"#61aeee"},"hljs-bullet":{color:"#61aeee"},"hljs-link":{color:"#61aeee",textDecoration:"underline"},"hljs-meta":{color:"#61aeee"},"hljs-selector-id":{color:"#61aeee"},"hljs-title":{color:"#61aeee"},"hljs-emphasis":{fontStyle:"italic"},"hljs-strong":{fontWeight:"bold"}};function Dce(t,e){if(t==null)return{};var r,n,i=i9(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.includes(r)||{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function m_(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Oce(t){if(Array.isArray(t))return m_(t)}function Mce(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Pce(t,e){if(t){if(typeof t=="string")return m_(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m_(t,e):void 0}}function Nce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g_(t){return Oce(t)||Mce(t)||Pce(t)||Nce()}function pL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ou(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pL(Object(r),!0).forEach(function(n){yt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Fce(t){var e=t.length;if(e===0||e===1)return t;if(e===2)return[t[0],t[1],"".concat(t[0],".").concat(t[1]),"".concat(t[1],".").concat(t[0])];if(e===3)return[t[0],t[1],t[2],"".concat(t[0],".").concat(t[1]),"".concat(t[0],".").concat(t[2]),"".concat(t[1],".").concat(t[0]),"".concat(t[1],".").concat(t[2]),"".concat(t[2],".").concat(t[0]),"".concat(t[2],".").concat(t[1]),"".concat(t[0],".").concat(t[1],".").concat(t[2]),"".concat(t[0],".").concat(t[2],".").concat(t[1]),"".concat(t[1],".").concat(t[0],".").concat(t[2]),"".concat(t[1],".").concat(t[2],".").concat(t[0]),"".concat(t[2],".").concat(t[0],".").concat(t[1]),"".concat(t[2],".").concat(t[1],".").concat(t[0])];if(e>=4)return[t[0],t[1],t[2],t[3],"".concat(t[0],".").concat(t[1]),"".concat(t[0],".").concat(t[2]),"".concat(t[0],".").concat(t[3]),"".concat(t[1],".").concat(t[0]),"".concat(t[1],".").concat(t[2]),"".concat(t[1],".").concat(t[3]),"".concat(t[2],".").concat(t[0]),"".concat(t[2],".").concat(t[1]),"".concat(t[2],".").concat(t[3]),"".concat(t[3],".").concat(t[0]),"".concat(t[3],".").concat(t[1]),"".concat(t[3],".").concat(t[2]),"".concat(t[0],".").concat(t[1],".").concat(t[2]),"".concat(t[0],".").concat(t[1],".").concat(t[3]),"".concat(t[0],".").concat(t[2],".").concat(t[1]),"".concat(t[0],".").concat(t[2],".").concat(t[3]),"".concat(t[0],".").concat(t[3],".").concat(t[1]),"".concat(t[0],".").concat(t[3],".").concat(t[2]),"".concat(t[1],".").concat(t[0],".").concat(t[2]),"".concat(t[1],".").concat(t[0],".").concat(t[3]),"".concat(t[1],".").concat(t[2],".").concat(t[0]),"".concat(t[1],".").concat(t[2],".").concat(t[3]),"".concat(t[1],".").concat(t[3],".").concat(t[0]),"".concat(t[1],".").concat(t[3],".").concat(t[2]),"".concat(t[2],".").concat(t[0],".").concat(t[1]),"".concat(t[2],".").concat(t[0],".").concat(t[3]),"".concat(t[2],".").concat(t[1],".").concat(t[0]),"".concat(t[2],".").concat(t[1],".").concat(t[3]),"".concat(t[2],".").concat(t[3],".").concat(t[0]),"".concat(t[2],".").concat(t[3],".").concat(t[1]),"".concat(t[3],".").concat(t[0],".").concat(t[1]),"".concat(t[3],".").concat(t[0],".").concat(t[2]),"".concat(t[3],".").concat(t[1],".").concat(t[0]),"".concat(t[3],".").concat(t[1],".").concat(t[2]),"".concat(t[3],".").concat(t[2],".").concat(t[0]),"".concat(t[3],".").concat(t[2],".").concat(t[1]),"".concat(t[0],".").concat(t[1],".").concat(t[2],".").concat(t[3]),"".concat(t[0],".").concat(t[1],".").concat(t[3],".").concat(t[2]),"".concat(t[0],".").concat(t[2],".").concat(t[1],".").concat(t[3]),"".concat(t[0],".").concat(t[2],".").concat(t[3],".").concat(t[1]),"".concat(t[0],".").concat(t[3],".").concat(t[1],".").concat(t[2]),"".concat(t[0],".").concat(t[3],".").concat(t[2],".").concat(t[1]),"".concat(t[1],".").concat(t[0],".").concat(t[2],".").concat(t[3]),"".concat(t[1],".").concat(t[0],".").concat(t[3],".").concat(t[2]),"".concat(t[1],".").concat(t[2],".").concat(t[0],".").concat(t[3]),"".concat(t[1],".").concat(t[2],".").concat(t[3],".").concat(t[0]),"".concat(t[1],".").concat(t[3],".").concat(t[0],".").concat(t[2]),"".concat(t[1],".").concat(t[3],".").concat(t[2],".").concat(t[0]),"".concat(t[2],".").concat(t[0],".").concat(t[1],".").concat(t[3]),"".concat(t[2],".").concat(t[0],".").concat(t[3],".").concat(t[1]),"".concat(t[2],".").concat(t[1],".").concat(t[0],".").concat(t[3]),"".concat(t[2],".").concat(t[1],".").concat(t[3],".").concat(t[0]),"".concat(t[2],".").concat(t[3],".").concat(t[0],".").concat(t[1]),"".concat(t[2],".").concat(t[3],".").concat(t[1],".").concat(t[0]),"".concat(t[3],".").concat(t[0],".").concat(t[1],".").concat(t[2]),"".concat(t[3],".").concat(t[0],".").concat(t[2],".").concat(t[1]),"".concat(t[3],".").concat(t[1],".").concat(t[0],".").concat(t[2]),"".concat(t[3],".").concat(t[1],".").concat(t[2],".").concat(t[0]),"".concat(t[3],".").concat(t[2],".").concat(t[0],".").concat(t[1]),"".concat(t[3],".").concat(t[2],".").concat(t[1],".").concat(t[0])]}var ly={};function $ce(t){if(t.length===0||t.length===1)return t;var e=t.join(".");return ly[e]||(ly[e]=Fce(t)),ly[e]}function Uce(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=t.filter(function(s){return s!=="token"}),i=$ce(n);return i.reduce(function(s,a){return Ou(Ou({},s),r[a])},e)}function mL(t){return t.join(" ")}function Bce(t,e){var r=0;return function(n){return r+=1,n.map(function(i,s){return l8({node:i,stylesheet:t,useInlineStyles:e,key:"code-segment-".concat(r,"-").concat(s)})})}}function l8(t){var e=t.node,r=t.stylesheet,n=t.style,i=n===void 0?{}:n,s=t.useInlineStyles,a=t.key,o=e.properties,l=e.type,u=e.tagName,c=e.value;if(l==="text")return c;if(u){var d=Bce(r,s),h;if(!s)h=Ou(Ou({},o),{},{className:mL(o.className)});else{var f=Object.keys(r).reduce(function(v,b){return b.split(".").forEach(function(y){v.includes(y)||v.push(y)}),v},[]),p=o.className&&o.className.includes("token")?["token"]:[],m=o.className&&p.concat(o.className.filter(function(v){return!f.includes(v)}));h=Ou(Ou({},o),{},{className:mL(m)||void 0,style:Uce(o.className,Object.assign({},o.style,i),r)})}var g=d(e.children);return Z.createElement(u,xt({key:a},h),g)}}const jce=function(t,e){var r=t.listLanguages();return r.indexOf(e)!==-1};var Hce=["language","children","style","customStyle","codeTagProps","useInlineStyles","showLineNumbers","showInlineLineNumbers","startingLineNumber","lineNumberContainerStyle","lineNumberStyle","wrapLines","wrapLongLines","lineProps","renderer","PreTag","CodeTag","code","astGenerator"];function gL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ba(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gL(Object(r),!0).forEach(function(n){yt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Vce=/\n/g;function Wce(t){return t.match(Vce)}function Gce(t){var e=t.lines,r=t.startingLineNumber,n=t.style;return e.map(function(i,s){var a=s+r;return Z.createElement("span",{key:"line-".concat(s),className:"react-syntax-highlighter-line-number",style:typeof n=="function"?n(a):n},"".concat(a,`
`))})}function Kce(t){var e=t.codeString,r=t.codeStyle,n=t.containerStyle,i=n===void 0?{float:"left",paddingRight:"10px"}:n,s=t.numberStyle,a=s===void 0?{}:s,o=t.startingLineNumber;return Z.createElement("code",{style:Object.assign({},r,i)},Gce({lines:e.replace(/\n$/,"").split(`
`),style:a,startingLineNumber:o}))}function qce(t){return"".concat(t.toString().length,".25em")}function u8(t,e){return{type:"element",tagName:"span",properties:{key:"line-number--".concat(t),className:["comment","linenumber","react-syntax-highlighter-line-number"],style:e},children:[{type:"text",value:t}]}}function c8(t,e,r){var n={display:"inline-block",minWidth:qce(r),paddingRight:"1em",textAlign:"right",userSelect:"none"},i=typeof t=="function"?t(e):t,s=Ba(Ba({},n),i);return s}function nm(t){var e=t.children,r=t.lineNumber,n=t.lineNumberStyle,i=t.largestLineNumber,s=t.showInlineLineNumbers,a=t.lineProps,o=a===void 0?{}:a,l=t.className,u=l===void 0?[]:l,c=t.showLineNumbers,d=t.wrapLongLines,h=t.wrapLines,f=h===void 0?!1:h,p=f?Ba({},typeof o=="function"?o(r):o):{};if(p.className=p.className?[].concat(g_(p.className.trim().split(/\s+/)),g_(u)):u,r&&s){var m=c8(n,r,i);e.unshift(u8(r,m))}return d&c&&(p.style=Ba({display:"flex"},p.style)),{type:"element",tagName:"span",properties:p,children:e}}function d8(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],n=0;n<t.length;n++){var i=t[n];if(i.type==="text")r.push(nm({children:[i],className:g_(new Set(e))}));else if(i.children){var s=e.concat(i.properties.className);d8(i.children,s).forEach(function(a){return r.push(a)})}}return r}function zce(t,e,r,n,i,s,a,o,l){var u,c=d8(t.value),d=[],h=-1,f=0;function p(x,_){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return nm({children:x,lineNumber:_,lineNumberStyle:o,largestLineNumber:a,showInlineLineNumbers:i,lineProps:r,className:S,showLineNumbers:n,wrapLongLines:l,wrapLines:e})}function m(x,_){if(n&&_&&i){var S=c8(o,_,a);x.unshift(u8(_,S))}return x}function g(x,_){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return e||S.length>0?p(x,_,S):m(x,_)}for(var v=function(){var _=c[f],S=_.children[0].value,A=Wce(S);if(A){var k=S.split(`
`);k.forEach(function(I,C){var N=n&&d.length+s,P={type:"text",value:"".concat(I,`
`)};if(C===0){var V=c.slice(h+1,f).concat(nm({children:[P],className:_.properties.className})),M=g(V,N);d.push(M)}else if(C===k.length-1){var U=c[f+1]&&c[f+1].children&&c[f+1].children[0],B={type:"text",value:"".concat(I)};if(U){var X=nm({children:[B],className:_.properties.className});c.splice(f+1,0,X)}else{var te=[B],D=g(te,N,_.properties.className);d.push(D)}}else{var L=[P],Y=g(L,N,_.properties.className);d.push(Y)}}),h=f}f++};f<c.length;)v();if(h!==c.length-1){var b=c.slice(h+1,c.length);if(b&&b.length){var y=n&&d.length+s,T=g(b,y);d.push(T)}}return e?d:(u=[]).concat.apply(u,d)}function Yce(t){var e=t.rows,r=t.stylesheet,n=t.useInlineStyles;return e.map(function(i,s){return l8({node:i,stylesheet:r,useInlineStyles:n,key:"code-segement".concat(s)})})}function h8(t){return t&&typeof t.highlightAuto<"u"}function Xce(t){var e=t.astGenerator,r=t.language,n=t.code,i=t.defaultCodeValue;if(h8(e)){var s=jce(e,r);return r==="text"?{value:i,language:"text"}:s?e.highlight(r,n):e.highlightAuto(n)}try{return r&&r!=="text"?{value:e.highlight(n,r)}:{value:i}}catch{return{value:i}}}function Zce(t,e){return function(n){var i=n.language,s=n.children,a=n.style,o=a===void 0?e:a,l=n.customStyle,u=l===void 0?{}:l,c=n.codeTagProps,d=c===void 0?{className:i?"language-".concat(i):void 0,style:Ba(Ba({},o['code[class*="language-"]']),o['code[class*="language-'.concat(i,'"]')])}:c,h=n.useInlineStyles,f=h===void 0?!0:h,p=n.showLineNumbers,m=p===void 0?!1:p,g=n.showInlineLineNumbers,v=g===void 0?!0:g,b=n.startingLineNumber,y=b===void 0?1:b,T=n.lineNumberContainerStyle,x=n.lineNumberStyle,_=x===void 0?{}:x,S=n.wrapLines,A=n.wrapLongLines,k=A===void 0?!1:A,I=n.lineProps,C=I===void 0?{}:I,N=n.renderer,P=n.PreTag,V=P===void 0?"pre":P,M=n.CodeTag,U=M===void 0?"code":M,B=n.code,X=B===void 0?(Array.isArray(s)?s[0]:s)||"":B,te=n.astGenerator,D=Dce(n,Hce);te=te||t;var L=m?Z.createElement(Kce,{containerStyle:T,codeStyle:d.style||{},numberStyle:_,startingLineNumber:y,codeString:X}):null,Y=o.hljs||o['pre[class*="language-"]']||{backgroundColor:"#fff"},$=h8(te)?"hljs":"prismjs",j=f?Object.assign({},D,{style:Object.assign({},Y,u)}):Object.assign({},D,{className:D.className?"".concat($," ").concat(D.className):$,style:Object.assign({},u)});if(k?d.style=Ba({whiteSpace:"pre-wrap"},d.style):d.style=Ba({whiteSpace:"pre"},d.style),!te)return Z.createElement(V,j,L,Z.createElement(U,d,X));(S===void 0&&N||k)&&(S=!0),N=N||Yce;var z=[{type:"text",value:X}],re=Xce({astGenerator:te,language:i,code:X,defaultCodeValue:z});re.language===null&&(re.value=z);var ne=re.value.length;ne===1&&re.value[0].type==="text"&&(ne=re.value[0].value.split(`
`).length);var ue=ne+y,Te=zce(re,S,C,m,v,y,ue,_,k);return Z.createElement(V,j,Z.createElement(U,d,!v&&L,N({rows:Te,stylesheet:o,useInlineStyles:f})))}}var xl={};function JS(t){return t instanceof Map?t.clear=t.delete=t.set=function(){throw new Error("map is read-only")}:t instanceof Set&&(t.add=t.clear=t.delete=function(){throw new Error("set is read-only")}),Object.freeze(t),Object.getOwnPropertyNames(t).forEach(function(e){var r=t[e];typeof r=="object"&&!Object.isFrozen(r)&&JS(r)}),t}var f8=JS,Qce=JS;f8.default=Qce;let vL=class{constructor(e){e.data===void 0&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}};function zu(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function ja(t,...e){const r=Object.create(null);for(const n in t)r[n]=t[n];return e.forEach(function(n){for(const i in n)r[i]=n[i]}),r}const Jce="</span>",bL=t=>!!t.kind;class ede{constructor(e,r){this.buffer="",this.classPrefix=r.classPrefix,e.walk(this)}addText(e){this.buffer+=zu(e)}openNode(e){if(!bL(e))return;let r=e.kind;e.sublanguage||(r=`${this.classPrefix}${r}`),this.span(r)}closeNode(e){bL(e)&&(this.buffer+=Jce)}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}}class ew{constructor(){this.rootNode={children:[]},this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){const r={kind:e,children:[]};this.add(r),this.stack.push(r)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,r){return typeof r=="string"?e.addText(r):r.children&&(e.openNode(r),r.children.forEach(n=>this._walk(e,n)),e.closeNode(r)),e}static _collapse(e){typeof e!="string"&&e.children&&(e.children.every(r=>typeof r=="string")?e.children=[e.children.join("")]:e.children.forEach(r=>{ew._collapse(r)}))}}class tde extends ew{constructor(e){super(),this.options=e}addKeyword(e,r){e!==""&&(this.openNode(r),this.addText(e),this.closeNode())}addText(e){e!==""&&this.add(e)}addSublanguage(e,r){const n=e.root;n.kind=r,n.sublanguage=!0,this.add(n)}toHTML(){return new ede(this,this.options).value()}finalize(){return!0}}function rde(t){return new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"m")}function Ih(t){return t?typeof t=="string"?t:t.source:null}function nde(...t){return t.map(r=>Ih(r)).join("")}function ide(...t){return"("+t.map(r=>Ih(r)).join("|")+")"}function sde(t){return new RegExp(t.toString()+"|").exec("").length-1}function ade(t,e){const r=t&&t.exec(e);return r&&r.index===0}const ode=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function lde(t,e="|"){let r=0;return t.map(n=>{r+=1;const i=r;let s=Ih(n),a="";for(;s.length>0;){const o=ode.exec(s);if(!o){a+=s;break}a+=s.substring(0,o.index),s=s.substring(o.index+o[0].length),o[0][0]==="\\"&&o[1]?a+="\\"+String(Number(o[1])+i):(a+=o[0],o[0]==="("&&r++)}return a}).map(n=>`(${n})`).join(e)}const ude=/\b\B/,p8="[a-zA-Z]\\w*",tw="[a-zA-Z_]\\w*",rw="\\b\\d+(\\.\\d+)?",m8="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",g8="\\b(0b[01]+)",cde="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",dde=(t={})=>{const e=/^#![ ]*\//;return t.binary&&(t.begin=nde(e,/.*\b/,t.binary,/\b.*/)),ja({className:"meta",begin:e,end:/$/,relevance:0,"on:begin":(r,n)=>{r.index!==0&&n.ignoreMatch()}},t)},kh={begin:"\\\\[\\s\\S]",relevance:0},hde={className:"string",begin:"'",end:"'",illegal:"\\n",contains:[kh]},fde={className:"string",begin:'"',end:'"',illegal:"\\n",contains:[kh]},v8={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},Av=function(t,e,r={}){const n=ja({className:"comment",begin:t,end:e,contains:[]},r);return n.contains.push(v8),n.contains.push({className:"doctag",begin:"(?:TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):",relevance:0}),n},pde=Av("//","$"),mde=Av("/\\*","\\*/"),gde=Av("#","$"),vde={className:"number",begin:rw,relevance:0},bde={className:"number",begin:m8,relevance:0},yde={className:"number",begin:g8,relevance:0},Ede={className:"number",begin:rw+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},_de={begin:/(?=\/[^/\n]*\/)/,contains:[{className:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[kh,{begin:/\[/,end:/\]/,relevance:0,contains:[kh]}]}]},Tde={className:"title",begin:p8,relevance:0},xde={className:"title",begin:tw,relevance:0},Sde={begin:"\\.\\s*"+tw,relevance:0},wde=function(t){return Object.assign(t,{"on:begin":(e,r)=>{r.data._beginMatch=e[1]},"on:end":(e,r)=>{r.data._beginMatch!==e[1]&&r.ignoreMatch()}})};var o0=Object.freeze({__proto__:null,MATCH_NOTHING_RE:ude,IDENT_RE:p8,UNDERSCORE_IDENT_RE:tw,NUMBER_RE:rw,C_NUMBER_RE:m8,BINARY_NUMBER_RE:g8,RE_STARTERS_RE:cde,SHEBANG:dde,BACKSLASH_ESCAPE:kh,APOS_STRING_MODE:hde,QUOTE_STRING_MODE:fde,PHRASAL_WORDS_MODE:v8,COMMENT:Av,C_LINE_COMMENT_MODE:pde,C_BLOCK_COMMENT_MODE:mde,HASH_COMMENT_MODE:gde,NUMBER_MODE:vde,C_NUMBER_MODE:bde,BINARY_NUMBER_MODE:yde,CSS_NUMBER_MODE:Ede,REGEXP_MODE:_de,TITLE_MODE:Tde,UNDERSCORE_TITLE_MODE:xde,METHOD_GUARD:Sde,END_SAME_AS_BEGIN:wde});function Ade(t,e){t.input[t.index-1]==="."&&e.ignoreMatch()}function Rde(t,e){e&&t.beginKeywords&&(t.begin="\\b("+t.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",t.__beforeBegin=Ade,t.keywords=t.keywords||t.beginKeywords,delete t.beginKeywords,t.relevance===void 0&&(t.relevance=0))}function Cde(t,e){Array.isArray(t.illegal)&&(t.illegal=ide(...t.illegal))}function Ide(t,e){if(t.match){if(t.begin||t.end)throw new Error("begin & end are not supported with match");t.begin=t.match,delete t.match}}function kde(t,e){t.relevance===void 0&&(t.relevance=1)}const Lde=["of","and","for","in","not","or","if","then","parent","list","value"],Dde="keyword";function b8(t,e,r=Dde){const n={};return typeof t=="string"?i(r,t.split(" ")):Array.isArray(t)?i(r,t):Object.keys(t).forEach(function(s){Object.assign(n,b8(t[s],e,s))}),n;function i(s,a){e&&(a=a.map(o=>o.toLowerCase())),a.forEach(function(o){const l=o.split("|");n[l[0]]=[s,Ode(l[0],l[1])]})}}function Ode(t,e){return e?Number(e):Mde(t)?0:1}function Mde(t){return Lde.includes(t.toLowerCase())}function Pde(t,{plugins:e}){function r(o,l){return new RegExp(Ih(o),"m"+(t.case_insensitive?"i":"")+(l?"g":""))}class n{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(l,u){u.position=this.position++,this.matchIndexes[this.matchAt]=u,this.regexes.push([u,l]),this.matchAt+=sde(l)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const l=this.regexes.map(u=>u[1]);this.matcherRe=r(lde(l),!0),this.lastIndex=0}exec(l){this.matcherRe.lastIndex=this.lastIndex;const u=this.matcherRe.exec(l);if(!u)return null;const c=u.findIndex((h,f)=>f>0&&h!==void 0),d=this.matchIndexes[c];return u.splice(0,c),Object.assign(u,d)}}class i{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(l){if(this.multiRegexes[l])return this.multiRegexes[l];const u=new n;return this.rules.slice(l).forEach(([c,d])=>u.addRule(c,d)),u.compile(),this.multiRegexes[l]=u,u}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(l,u){this.rules.push([l,u]),u.type==="begin"&&this.count++}exec(l){const u=this.getMatcher(this.regexIndex);u.lastIndex=this.lastIndex;let c=u.exec(l);if(this.resumingScanAtSamePosition()&&!(c&&c.index===this.lastIndex)){const d=this.getMatcher(0);d.lastIndex=this.lastIndex+1,c=d.exec(l)}return c&&(this.regexIndex+=c.position+1,this.regexIndex===this.count&&this.considerAll()),c}}function s(o){const l=new i;return o.contains.forEach(u=>l.addRule(u.begin,{rule:u,type:"begin"})),o.terminatorEnd&&l.addRule(o.terminatorEnd,{type:"end"}),o.illegal&&l.addRule(o.illegal,{type:"illegal"}),l}function a(o,l){const u=o;if(o.isCompiled)return u;[Ide].forEach(d=>d(o,l)),t.compilerExtensions.forEach(d=>d(o,l)),o.__beforeBegin=null,[Rde,Cde,kde].forEach(d=>d(o,l)),o.isCompiled=!0;let c=null;if(typeof o.keywords=="object"&&(c=o.keywords.$pattern,delete o.keywords.$pattern),o.keywords&&(o.keywords=b8(o.keywords,t.case_insensitive)),o.lexemes&&c)throw new Error("ERR: Prefer `keywords.$pattern` to `mode.lexemes`, BOTH are not allowed. (see mode reference) ");return c=c||o.lexemes||/\w+/,u.keywordPatternRe=r(c,!0),l&&(o.begin||(o.begin=/\B|\b/),u.beginRe=r(o.begin),o.endSameAsBegin&&(o.end=o.begin),!o.end&&!o.endsWithParent&&(o.end=/\B|\b/),o.end&&(u.endRe=r(o.end)),u.terminatorEnd=Ih(o.end)||"",o.endsWithParent&&l.terminatorEnd&&(u.terminatorEnd+=(o.end?"|":"")+l.terminatorEnd)),o.illegal&&(u.illegalRe=r(o.illegal)),o.contains||(o.contains=[]),o.contains=[].concat(...o.contains.map(function(d){return Nde(d==="self"?o:d)})),o.contains.forEach(function(d){a(d,u)}),o.starts&&a(o.starts,l),u.matcher=s(u),u}if(t.compilerExtensions||(t.compilerExtensions=[]),t.contains&&t.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return t.classNameAliases=ja(t.classNameAliases||{}),a(t)}function y8(t){return t?t.endsWithParent||y8(t.starts):!1}function Nde(t){return t.variants&&!t.cachedVariants&&(t.cachedVariants=t.variants.map(function(e){return ja(t,{variants:null},e)})),t.cachedVariants?t.cachedVariants:y8(t)?ja(t,{starts:t.starts?ja(t.starts):null}):Object.isFrozen(t)?ja(t):t}var Fde="10.7.3";function $de(t){return!!(t||t==="")}function Ude(t){const e={props:["language","code","autodetect"],data:function(){return{detectedLanguage:"",unknownLanguage:!1}},computed:{className(){return this.unknownLanguage?"":"hljs "+this.detectedLanguage},highlighted(){if(!this.autoDetect&&!t.getLanguage(this.language))return console.warn(`The language "${this.language}" you specified could not be found.`),this.unknownLanguage=!0,zu(this.code);let n={};return this.autoDetect?(n=t.highlightAuto(this.code),this.detectedLanguage=n.language):(n=t.highlight(this.language,this.code,this.ignoreIllegals),this.detectedLanguage=this.language),n.value},autoDetect(){return!this.language||$de(this.autodetect)},ignoreIllegals(){return!0}},render(n){return n("pre",{},[n("code",{class:this.className,domProps:{innerHTML:this.highlighted}})])}};return{Component:e,VuePlugin:{install(n){n.component("highlightjs",e)}}}}const Bde={"after:highlightElement":({el:t,result:e,text:r})=>{const n=yL(t);if(!n.length)return;const i=document.createElement("div");i.innerHTML=e.value,e.value=jde(n,yL(i),r)}};function v_(t){return t.nodeName.toLowerCase()}function yL(t){const e=[];return function r(n,i){for(let s=n.firstChild;s;s=s.nextSibling)s.nodeType===3?i+=s.nodeValue.length:s.nodeType===1&&(e.push({event:"start",offset:i,node:s}),i=r(s,i),v_(s).match(/br|hr|img|input/)||e.push({event:"stop",offset:i,node:s}));return i}(t,0),e}function jde(t,e,r){let n=0,i="";const s=[];function a(){return!t.length||!e.length?t.length?t:e:t[0].offset!==e[0].offset?t[0].offset<e[0].offset?t:e:e[0].event==="start"?t:e}function o(c){function d(h){return" "+h.nodeName+'="'+zu(h.value)+'"'}i+="<"+v_(c)+[].map.call(c.attributes,d).join("")+">"}function l(c){i+="</"+v_(c)+">"}function u(c){(c.event==="start"?o:l)(c.node)}for(;t.length||e.length;){let c=a();if(i+=zu(r.substring(n,c[0].offset)),n=c[0].offset,c===t){s.reverse().forEach(l);do u(c.splice(0,1)[0]),c=a();while(c===t&&c.length&&c[0].offset===n);s.reverse().forEach(o)}else c[0].event==="start"?s.push(c[0].node):s.pop(),u(c.splice(0,1)[0])}return i+zu(r.substr(n))}const EL={},uy=t=>{console.error(t)},_L=(t,...e)=>{console.log(`WARN: ${t}`,...e)},pi=(t,e)=>{EL[`${t}/${e}`]||(console.log(`Deprecated as of ${t}. ${e}`),EL[`${t}/${e}`]=!0)},cy=zu,TL=ja,xL=Symbol("nomatch"),Hde=function(t){const e=Object.create(null),r=Object.create(null),n=[];let i=!0;const s=/(^(<[^>]+>|\t|)+|\n)/gm,a="Could not find the language '{}', did you forget to load/include a language module?",o={disableAutodetect:!0,name:"Plain text",contains:[]};let l={noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:null,__emitter:tde};function u($){return l.noHighlightRe.test($)}function c($){let j=$.className+" ";j+=$.parentNode?$.parentNode.className:"";const z=l.languageDetectRe.exec(j);if(z){const re=M(z[1]);return re||(_L(a.replace("{}",z[1])),_L("Falling back to no-highlight mode for this block.",$)),re?z[1]:"no-highlight"}return j.split(/\s+/).find(re=>u(re)||M(re))}function d($,j,z,re){let ne="",ue="";typeof j=="object"?(ne=$,z=j.ignoreIllegals,ue=j.language,re=void 0):(pi("10.7.0","highlight(lang, code, ...args) has been deprecated."),pi("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),ue=$,ne=j);const Te={code:ne,language:ue};D("before:highlight",Te);const ce=Te.result?Te.result:h(Te.language,Te.code,z,re);return ce.code=Te.code,D("after:highlight",ce),ce}function h($,j,z,re){function ne(de,he){const Me=er.case_insensitive?he[0].toLowerCase():he[0];return Object.prototype.hasOwnProperty.call(de.keywords,Me)&&de.keywords[Me]}function ue(){if(!$e.keywords){wt.addText(gt);return}let de=0;$e.keywordPatternRe.lastIndex=0;let he=$e.keywordPatternRe.exec(gt),Me="";for(;he;){Me+=gt.substring(de,he.index);const ye=ne($e,he);if(ye){const[ot,qt]=ye;if(wt.addText(Me),Me="",mr+=qt,ot.startsWith("_"))Me+=he[0];else{const Hi=er.classNameAliases[ot]||ot;wt.addKeyword(he[0],Hi)}}else Me+=he[0];de=$e.keywordPatternRe.lastIndex,he=$e.keywordPatternRe.exec(gt)}Me+=gt.substr(de),wt.addText(Me)}function Te(){if(gt==="")return;let de=null;if(typeof $e.subLanguage=="string"){if(!e[$e.subLanguage]){wt.addText(gt);return}de=h($e.subLanguage,gt,!0,tr[$e.subLanguage]),tr[$e.subLanguage]=de.top}else de=p(gt,$e.subLanguage.length?$e.subLanguage:null);$e.relevance>0&&(mr+=de.relevance),wt.addSublanguage(de.emitter,de.language)}function ce(){$e.subLanguage!=null?Te():ue(),gt=""}function _e(de){return de.className&&wt.openNode(er.classNameAliases[de.className]||de.className),$e=Object.create(de,{parent:{value:$e}}),$e}function De(de,he,Me){let ye=ade(de.endRe,Me);if(ye){if(de["on:end"]){const ot=new vL(de);de["on:end"](he,ot),ot.isMatchIgnored&&(ye=!1)}if(ye){for(;de.endsParent&&de.parent;)de=de.parent;return de}}if(de.endsWithParent)return De(de.parent,he,Me)}function nt(de){return $e.matcher.regexIndex===0?(gt+=de[0],1):(nn=!0,0)}function ke(de){const he=de[0],Me=de.rule,ye=new vL(Me),ot=[Me.__beforeBegin,Me["on:begin"]];for(const qt of ot)if(qt&&(qt(de,ye),ye.isMatchIgnored))return nt(he);return Me&&Me.endSameAsBegin&&(Me.endRe=rde(he)),Me.skip?gt+=he:(Me.excludeBegin&&(gt+=he),ce(),!Me.returnBegin&&!Me.excludeBegin&&(gt=he)),_e(Me),Me.returnBegin?0:he.length}function Oe(de){const he=de[0],Me=j.substr(de.index),ye=De($e,de,Me);if(!ye)return xL;const ot=$e;ot.skip?gt+=he:(ot.returnEnd||ot.excludeEnd||(gt+=he),ce(),ot.excludeEnd&&(gt=he));do $e.className&&wt.closeNode(),!$e.skip&&!$e.subLanguage&&(mr+=$e.relevance),$e=$e.parent;while($e!==ye.parent);return ye.starts&&(ye.endSameAsBegin&&(ye.starts.endRe=ye.endRe),_e(ye.starts)),ot.returnEnd?0:he.length}function ar(){const de=[];for(let he=$e;he!==er;he=he.parent)he.className&&de.unshift(he.className);de.forEach(he=>wt.openNode(he))}let Et={};function Gt(de,he){const Me=he&&he[0];if(gt+=de,Me==null)return ce(),0;if(Et.type==="begin"&&he.type==="end"&&Et.index===he.index&&Me===""){if(gt+=j.slice(he.index,he.index+1),!i){const ye=new Error("0 width match regex");throw ye.languageName=$,ye.badRule=Et.rule,ye}return 1}if(Et=he,he.type==="begin")return ke(he);if(he.type==="illegal"&&!z){const ye=new Error('Illegal lexeme "'+Me+'" for mode "'+($e.className||"<unnamed>")+'"');throw ye.mode=$e,ye}else if(he.type==="end"){const ye=Oe(he);if(ye!==xL)return ye}if(he.type==="illegal"&&Me==="")return 1;if(Kt>1e5&&Kt>he.index*3)throw new Error("potential infinite loop, way more iterations than matches");return gt+=Me,Me.length}const er=M($);if(!er)throw uy(a.replace("{}",$)),new Error('Unknown language: "'+$+'"');const jt=Pde(er,{plugins:n});let ze="",$e=re||jt;const tr={},wt=new l.__emitter(l);ar();let gt="",mr=0,It=0,Kt=0,nn=!1;try{for($e.matcher.considerAll();;){Kt++,nn?nn=!1:$e.matcher.considerAll(),$e.matcher.lastIndex=It;const de=$e.matcher.exec(j);if(!de)break;const he=j.substring(It,de.index),Me=Gt(he,de);It=de.index+Me}return Gt(j.substr(It)),wt.closeAllNodes(),wt.finalize(),ze=wt.toHTML(),{relevance:Math.floor(mr),value:ze,language:$,illegal:!1,emitter:wt,top:$e}}catch(de){if(de.message&&de.message.includes("Illegal"))return{illegal:!0,illegalBy:{msg:de.message,context:j.slice(It-100,It+100),mode:de.mode},sofar:ze,relevance:0,value:cy(j),emitter:wt};if(i)return{illegal:!1,relevance:0,value:cy(j),emitter:wt,language:$,top:$e,errorRaised:de};throw de}}function f($){const j={relevance:0,emitter:new l.__emitter(l),value:cy($),illegal:!1,top:o};return j.emitter.addText($),j}function p($,j){j=j||l.languages||Object.keys(e);const z=f($),re=j.filter(M).filter(B).map(_e=>h(_e,$,!1));re.unshift(z);const ne=re.sort((_e,De)=>{if(_e.relevance!==De.relevance)return De.relevance-_e.relevance;if(_e.language&&De.language){if(M(_e.language).supersetOf===De.language)return 1;if(M(De.language).supersetOf===_e.language)return-1}return 0}),[ue,Te]=ne,ce=ue;return ce.second_best=Te,ce}function m($){return l.tabReplace||l.useBR?$.replace(s,j=>j===`
`?l.useBR?"<br>":j:l.tabReplace?j.replace(/\t/g,l.tabReplace):j):$}function g($,j,z){const re=j?r[j]:z;$.classList.add("hljs"),re&&$.classList.add(re)}const v={"before:highlightElement":({el:$})=>{l.useBR&&($.innerHTML=$.innerHTML.replace(/\n/g,"").replace(/<br[ /]*>/g,`
`))},"after:highlightElement":({result:$})=>{l.useBR&&($.value=$.value.replace(/\n/g,"<br>"))}},b=/^(<[^>]+>|\t)+/gm,y={"after:highlightElement":({result:$})=>{l.tabReplace&&($.value=$.value.replace(b,j=>j.replace(/\t/g,l.tabReplace)))}};function T($){let j=null;const z=c($);if(u(z))return;D("before:highlightElement",{el:$,language:z}),j=$;const re=j.textContent,ne=z?d(re,{language:z,ignoreIllegals:!0}):p(re);D("after:highlightElement",{el:$,result:ne,text:re}),$.innerHTML=ne.value,g($,z,ne.language),$.result={language:ne.language,re:ne.relevance,relavance:ne.relevance},ne.second_best&&($.second_best={language:ne.second_best.language,re:ne.second_best.relevance,relavance:ne.second_best.relevance})}function x($){$.useBR&&(pi("10.3.0","'useBR' will be removed entirely in v11.0"),pi("10.3.0","Please see https://github.com/highlightjs/highlight.js/issues/2559")),l=TL(l,$)}const _=()=>{if(_.called)return;_.called=!0,pi("10.6.0","initHighlighting() is deprecated.  Use highlightAll() instead."),document.querySelectorAll("pre code").forEach(T)};function S(){pi("10.6.0","initHighlightingOnLoad() is deprecated.  Use highlightAll() instead."),A=!0}let A=!1;function k(){if(document.readyState==="loading"){A=!0;return}document.querySelectorAll("pre code").forEach(T)}function I(){A&&k()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",I,!1);function C($,j){let z=null;try{z=j(t)}catch(re){if(uy("Language definition for '{}' could not be registered.".replace("{}",$)),i)uy(re);else throw re;z=o}z.name||(z.name=$),e[$]=z,z.rawDefinition=j.bind(null,t),z.aliases&&U(z.aliases,{languageName:$})}function N($){delete e[$];for(const j of Object.keys(r))r[j]===$&&delete r[j]}function P(){return Object.keys(e)}function V($){pi("10.4.0","requireLanguage will be removed entirely in v11."),pi("10.4.0","Please see https://github.com/highlightjs/highlight.js/pull/2844");const j=M($);if(j)return j;throw new Error("The '{}' language is required, but not loaded.".replace("{}",$))}function M($){return $=($||"").toLowerCase(),e[$]||e[r[$]]}function U($,{languageName:j}){typeof $=="string"&&($=[$]),$.forEach(z=>{r[z.toLowerCase()]=j})}function B($){const j=M($);return j&&!j.disableAutodetect}function X($){$["before:highlightBlock"]&&!$["before:highlightElement"]&&($["before:highlightElement"]=j=>{$["before:highlightBlock"](Object.assign({block:j.el},j))}),$["after:highlightBlock"]&&!$["after:highlightElement"]&&($["after:highlightElement"]=j=>{$["after:highlightBlock"](Object.assign({block:j.el},j))})}function te($){X($),n.push($)}function D($,j){const z=$;n.forEach(function(re){re[z]&&re[z](j)})}function L($){return pi("10.2.0","fixMarkup will be removed entirely in v11.0"),pi("10.2.0","Please see https://github.com/highlightjs/highlight.js/issues/2534"),m($)}function Y($){return pi("10.7.0","highlightBlock will be removed entirely in v12.0"),pi("10.7.0","Please use highlightElement now."),T($)}Object.assign(t,{highlight:d,highlightAuto:p,highlightAll:k,fixMarkup:L,highlightElement:T,highlightBlock:Y,configure:x,initHighlighting:_,initHighlightingOnLoad:S,registerLanguage:C,unregisterLanguage:N,listLanguages:P,getLanguage:M,registerAliases:U,requireLanguage:V,autoDetection:B,inherit:TL,addPlugin:te,vuePlugin:Ude(t).VuePlugin}),t.debugMode=function(){i=!1},t.safeMode=function(){i=!0},t.versionString=Fde;for(const $ in o0)typeof o0[$]=="object"&&f8(o0[$]);return Object.assign(t,o0),t.addPlugin(v),t.addPlugin(Bde),t.addPlugin(y),t};var Vde=Hde({}),Wde=Vde,E8={exports:{}};(function(t){(function(){var e;e=t.exports=i,e.format=i,e.vsprintf=n,typeof console<"u"&&typeof console.log=="function"&&(e.printf=r);function r(){console.log(i.apply(null,arguments))}function n(s,a){return i.apply(null,[s].concat(a))}function i(s){for(var a=1,o=[].slice.call(arguments),l=0,u=s.length,c="",d,h=!1,f,p,m=!1,g,v=function(){return o[a++]},b=function(){for(var y="";/\d/.test(s[l]);)y+=s[l++],d=s[l];return y.length>0?parseInt(y):null};l<u;++l)if(d=s[l],h)switch(h=!1,d=="."?(m=!1,d=s[++l]):d=="0"&&s[l+1]=="."?(m=!0,l+=2,d=s[l]):m=!0,g=b(),d){case"b":c+=parseInt(v(),10).toString(2);break;case"c":f=v(),typeof f=="string"||f instanceof String?c+=f:c+=String.fromCharCode(parseInt(f,10));break;case"d":c+=parseInt(v(),10);break;case"f":p=String(parseFloat(v()).toFixed(g||6)),c+=m?p:p.replace(/^0/,"");break;case"j":c+=JSON.stringify(v());break;case"o":c+="0"+parseInt(v(),10).toString(8);break;case"s":c+=v();break;case"x":c+="0x"+parseInt(v(),10).toString(16);break;case"X":c+="0x"+parseInt(v(),10).toString(16).toUpperCase();break;default:c+=d;break}else d==="%"?h=!0:c+=d;return c}})()})(E8);var Gde=E8.exports,Kde=Gde,so=ao(Error),qde=so;so.eval=ao(EvalError);so.range=ao(RangeError);so.reference=ao(ReferenceError);so.syntax=ao(SyntaxError);so.type=ao(TypeError);so.uri=ao(URIError);so.create=ao;function ao(t){return e.displayName=t.displayName||t.name,e;function e(r){return r&&(r=Kde.apply(null,arguments)),new t(r)}}var ds=Wde,im=qde;xl.highlight=_8;xl.highlightAuto=Yde;xl.registerLanguage=Xde;xl.listLanguages=Zde;xl.registerAlias=Qde;ia.prototype.addText=the;ia.prototype.addKeyword=Jde;ia.prototype.addSublanguage=ehe;ia.prototype.openNode=rhe;ia.prototype.closeNode=nhe;ia.prototype.closeAllNodes=T8;ia.prototype.finalize=T8;ia.prototype.toHTML=ihe;var zde="hljs-";function _8(t,e,r){var n=ds.configure({}),i=r||{},s=i.prefix,a;if(typeof t!="string")throw im("Expected `string` for name, got `%s`",t);if(!ds.getLanguage(t))throw im("Unknown language: `%s` is not registered",t);if(typeof e!="string")throw im("Expected `string` for value, got `%s`",e);if(s==null&&(s=zde),ds.configure({__emitter:ia,classPrefix:s}),a=ds.highlight(e,{language:t,ignoreIllegals:!0}),ds.configure(n||{}),a.errorRaised)throw a.errorRaised;return{relevance:a.relevance,language:a.language,value:a.emitter.rootNode.children}}function Yde(t,e){var r=e||{},n=r.subset||ds.listLanguages();r.prefix;var i=n.length,s=-1,a,o,l,u;if(typeof t!="string")throw im("Expected `string` for value, got `%s`",t);for(o={relevance:0,language:null,value:[]},a={relevance:0,language:null,value:[]};++s<i;)u=n[s],ds.getLanguage(u)&&(l=_8(u,t,e),l.language=u,l.relevance>o.relevance&&(o=l),l.relevance>a.relevance&&(o=a,a=l));return o.language&&(a.secondBest=o),a}function Xde(t,e){ds.registerLanguage(t,e)}function Zde(){return ds.listLanguages()}function Qde(t,e){var r=t,n;e&&(r={},r[t]=e);for(n in r)ds.registerAliases(r[n],{languageName:n})}function ia(t){this.options=t,this.rootNode={children:[]},this.stack=[this.rootNode]}function Jde(t,e){this.openNode(e),this.addText(t),this.closeNode()}function ehe(t,e){var r=this.stack,n=r[r.length-1],i=t.rootNode.children,s=e?{type:"element",tagName:"span",properties:{className:[e]},children:i}:i;n.children=n.children.concat(s)}function the(t){var e=this.stack,r,n;t!==""&&(r=e[e.length-1],n=r.children[r.children.length-1],n&&n.type==="text"?n.value+=t:r.children.push({type:"text",value:t}))}function rhe(t){var e=this.stack,r=this.options.classPrefix+t,n=e[e.length-1],i={type:"element",tagName:"span",properties:{className:[r]},children:[]};n.children.push(i),e.push(i)}function nhe(){this.stack.pop()}function ihe(){return""}function T8(){}function x8(t){return t?typeof t=="string"?t:t.source:null}function SL(t){return Vo("(?=",t,")")}function she(t){return Vo("(",t,")?")}function Vo(...t){return t.map(r=>x8(r)).join("")}function ahe(...t){return"("+t.map(r=>x8(r)).join("|")+")"}function ohe(t){const e=Vo(/[A-Z_]/,she(/[A-Z0-9_.-]*:/),/[A-Z0-9_.-]*/),r=/[A-Za-z0-9._:-]+/,n={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},i={begin:/\s/,contains:[{className:"meta-keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},s=t.inherit(i,{begin:/\(/,end:/\)/}),a=t.inherit(t.APOS_STRING_MODE,{className:"meta-string"}),o=t.inherit(t.QUOTE_STRING_MODE,{className:"meta-string"}),l={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:r,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[n]},{begin:/'/,end:/'/,contains:[n]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[i,o,a,s,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[i,s,o,a]}]}]},t.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},n,{className:"meta",begin:/<\?xml/,end:/\?>/,relevance:10},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[l],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[l],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:Vo(/</,SL(Vo(e,ahe(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:e,relevance:0,starts:l}]},{className:"tag",begin:Vo(/<\//,SL(Vo(e,/>/))),contains:[{className:"name",begin:e,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}var lhe=ohe;const wL=ct(lhe);function uhe(t){return t?typeof t=="string"?t:t.source:null}function che(...t){return t.map(r=>uhe(r)).join("")}function dhe(t){const e={},r={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[e]}]};Object.assign(e,{className:"variable",variants:[{begin:che(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},r]});const n={className:"subst",begin:/\$\(/,end:/\)/,contains:[t.BACKSLASH_ESCAPE]},i={begin:/<<-?\s*(?=\w+)/,starts:{contains:[t.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},s={className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,e,n]};n.contains.push(s);const a={className:"",begin:/\\"/},o={className:"string",begin:/'/,end:/'/},l={begin:/\$\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},t.NUMBER_MODE,e]},u=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],c=t.SHEBANG({binary:`(${u.join("|")})`,relevance:10}),d={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[t.inherit(t.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0};return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z._-]+\b/,keyword:"if then else elif fi for while in do done case esac function",literal:"true false",built_in:"break cd continue eval exec exit export getopts hash pwd readonly return shift test times trap umask unset alias bind builtin caller command declare echo enable help let local logout mapfile printf read readarray source type typeset ulimit unalias set shopt autoload bg bindkey bye cap chdir clone comparguments compcall compctl compdescribe compfiles compgroups compquote comptags comptry compvalues dirs disable disown echotc echoti emulate fc fg float functions getcap getln history integer jobs kill limit log noglob popd print pushd pushln rehash sched setcap setopt stat suspend ttyctl unfunction unhash unlimit unsetopt vared wait whence where which zcompile zformat zftp zle zmodload zparseopts zprof zpty zregexparse zsocket zstyle ztcp"},contains:[c,t.SHEBANG(),d,l,t.HASH_COMMENT_MODE,i,s,a,o,e]}}var hhe=dhe;const fhe=ct(hhe);function phe(t){return t?typeof t=="string"?t:t.source:null}function l0(t){return mhe("(",t,")?")}function mhe(...t){return t.map(r=>phe(r)).join("")}function ghe(t){const e=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",n="[a-zA-Z_]\\w*::",s="("+r+"|"+l0(n)+"[a-zA-Z_]\\w*"+l0("<[^<>]+>")+")",a={className:"keyword",begin:"\\b[a-z\\d_]*_t\\b"},l={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},u={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},c={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{"meta-keyword":"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(l,{className:"meta-string"}),{className:"meta-string",begin:/<.*?>/},e,t.C_BLOCK_COMMENT_MODE]},d={className:"title",begin:l0(n)+t.IDENT_RE,relevance:0},h=l0(n)+t.IDENT_RE+"\\s*\\(",f={keyword:"int float while private char char8_t char16_t char32_t catch import module export virtual operator sizeof dynamic_cast|10 typedef const_cast|10 const for static_cast|10 union namespace unsigned long volatile static protected bool template mutable if public friend do goto auto void enum else break extern using asm case typeid wchar_t short reinterpret_cast|10 default double register explicit signed typename try this switch continue inline delete alignas alignof constexpr consteval constinit decltype concept co_await co_return co_yield requires noexcept static_assert thread_local restrict final override atomic_bool atomic_char atomic_schar atomic_uchar atomic_short atomic_ushort atomic_int atomic_uint atomic_long atomic_ulong atomic_llong atomic_ullong new throw return and and_eq bitand bitor compl not not_eq or or_eq xor xor_eq",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr _Bool complex _Complex imaginary _Imaginary",literal:"true false nullptr NULL"},p=[c,a,e,t.C_BLOCK_COMMENT_MODE,u,l],m={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:f,contains:p.concat([{begin:/\(/,end:/\)/,keywords:f,contains:p.concat(["self"]),relevance:0}]),relevance:0},g={className:"function",begin:"("+s+"[\\*&\\s]+)+"+h,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:f,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:f,relevance:0},{begin:h,returnBegin:!0,contains:[d],relevance:0},{className:"params",begin:/\(/,end:/\)/,keywords:f,relevance:0,contains:[e,t.C_BLOCK_COMMENT_MODE,l,u,a,{begin:/\(/,end:/\)/,keywords:f,relevance:0,contains:["self",e,t.C_BLOCK_COMMENT_MODE,l,u,a]}]},a,e,t.C_BLOCK_COMMENT_MODE,c]};return{name:"C",aliases:["h"],keywords:f,disableAutodetect:!0,illegal:"</",contains:[].concat(m,g,p,[c,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",end:">",keywords:f,contains:["self",a]},{begin:t.IDENT_RE+"::",keywords:f},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},t.TITLE_MODE]}]),exports:{preprocessor:c,strings:l,keywords:f}}}var vhe=ghe;const bhe=ct(vhe);function yhe(t){return t?typeof t=="string"?t:t.source:null}function Ehe(t){return nw("(?=",t,")")}function u0(t){return nw("(",t,")?")}function nw(...t){return t.map(r=>yhe(r)).join("")}function _he(t){const e=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",n="[a-zA-Z_]\\w*::",s="("+r+"|"+u0(n)+"[a-zA-Z_]\\w*"+u0("<[^<>]+>")+")",a={className:"keyword",begin:"\\b[a-z\\d_]*_t\\b"},l={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},u={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},c={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{"meta-keyword":"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(l,{className:"meta-string"}),{className:"meta-string",begin:/<.*?>/},e,t.C_BLOCK_COMMENT_MODE]},d={className:"title",begin:u0(n)+t.IDENT_RE,relevance:0},h=u0(n)+t.IDENT_RE+"\\s*\\(",p={keyword:"int float while private char char8_t char16_t char32_t catch import module export virtual operator sizeof dynamic_cast|10 typedef const_cast|10 const for static_cast|10 union namespace unsigned long volatile static protected bool template mutable if public friend do goto auto void enum else break extern using asm case typeid wchar_t short reinterpret_cast|10 default double register explicit signed typename try this switch continue inline delete alignas alignof constexpr consteval constinit decltype concept co_await co_return co_yield requires noexcept static_assert thread_local restrict final override atomic_bool atomic_char atomic_schar atomic_uchar atomic_short atomic_ushort atomic_int atomic_uint atomic_long atomic_ulong atomic_llong atomic_ullong new throw return and and_eq bitand bitor compl not not_eq or or_eq xor xor_eq",built_in:"_Bool _Complex _Imaginary",_relevance_hints:["asin","atan2","atan","calloc","ceil","cosh","cos","exit","exp","fabs","floor","fmod","fprintf","fputs","free","frexp","auto_ptr","deque","list","queue","stack","vector","map","set","pair","bitset","multiset","multimap","unordered_set","fscanf","future","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","tolower","toupper","labs","ldexp","log10","log","malloc","realloc","memchr","memcmp","memcpy","memset","modf","pow","printf","putchar","puts","scanf","sinh","sin","snprintf","sprintf","sqrt","sscanf","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","tanh","tan","unordered_map","unordered_multiset","unordered_multimap","priority_queue","make_pair","array","shared_ptr","abort","terminate","abs","acos","vfprintf","vprintf","vsprintf","endl","initializer_list","unique_ptr","complex","imaginary","std","string","wstring","cin","cout","cerr","clog","stdin","stdout","stderr","stringstream","istringstream","ostringstream"],literal:"true false nullptr NULL"},m={className:"function.dispatch",relevance:0,keywords:p,begin:nw(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!while)/,t.IDENT_RE,Ehe(/\s*\(/))},g=[m,c,a,e,t.C_BLOCK_COMMENT_MODE,u,l],v={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:p,contains:g.concat([{begin:/\(/,end:/\)/,keywords:p,contains:g.concat(["self"]),relevance:0}]),relevance:0},b={className:"function",begin:"("+s+"[\\*&\\s]+)+"+h,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:p,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:p,relevance:0},{begin:h,returnBegin:!0,contains:[d],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[l,u]},{className:"params",begin:/\(/,end:/\)/,keywords:p,relevance:0,contains:[e,t.C_BLOCK_COMMENT_MODE,l,u,a,{begin:/\(/,end:/\)/,keywords:p,relevance:0,contains:["self",e,t.C_BLOCK_COMMENT_MODE,l,u,a]}]},a,e,t.C_BLOCK_COMMENT_MODE,c]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:p,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(v,b,m,g,[c,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",end:">",keywords:p,contains:["self",a]},{begin:t.IDENT_RE+"::",keywords:p},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},t.TITLE_MODE]}]),exports:{preprocessor:c,strings:l,keywords:p}}}var The=_he;const xhe=ct(The);function She(t){const e=["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],r=["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"],n=["default","false","null","true"],i=["abstract","as","base","break","case","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"],s=["add","alias","and","ascending","async","await","by","descending","equals","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","remove","select","set","unmanaged","value|0","var","when","where","with","yield"],a={keyword:i.concat(s),built_in:e,literal:n},o=t.inherit(t.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),l={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},u={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},c=t.inherit(u,{illegal:/\n/}),d={className:"subst",begin:/\{/,end:/\}/,keywords:a},h=t.inherit(d,{illegal:/\n/}),f={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},t.BACKSLASH_ESCAPE,h]},p={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},d]},m=t.inherit(p,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},h]});d.contains=[p,f,u,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,l,t.C_BLOCK_COMMENT_MODE],h.contains=[m,f,c,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,l,t.inherit(t.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];const g={variants:[p,f,u,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},v={begin:"<",end:">",contains:[{beginKeywords:"in out"},o]},b=t.IDENT_RE+"(<"+t.IDENT_RE+"(\\s*,\\s*"+t.IDENT_RE+")*>)?(\\[\\])?",y={begin:"@"+t.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:a,illegal:/::/,contains:[t.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"<!--|-->"},{begin:"</?",end:">"}]}]}),t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{"meta-keyword":"if else elif endif define undef warning error line region endregion pragma checksum"}},g,l,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},o,v,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[o,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[o,v,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"meta-string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+b+"\\s+)+"+t.IDENT_RE+"\\s*(<.+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:a,contains:[{beginKeywords:r.join(" "),relevance:0},{begin:t.IDENT_RE+"\\s*(<.+>\\s*)?\\(",returnBegin:!0,contains:[t.TITLE_MODE,v],relevance:0},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,relevance:0,contains:[g,l,t.C_BLOCK_COMMENT_MODE]},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},y]}}var whe=She;const Ahe=ct(whe),Rhe=t=>({IMPORTANT:{className:"meta",begin:"!important"},HEXCOLOR:{className:"number",begin:"#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})"},ATTRIBUTE_SELECTOR_MODE:{className:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]}}),Che=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],Ihe=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],khe=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],Lhe=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],Dhe=["align-content","align-items","align-self","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","auto","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","clip-path","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-variant","font-variant-ligatures","font-variation-settings","font-weight","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inherit","initial","justify-content","left","letter-spacing","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","mask","max-height","max-width","min-height","min-width","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","perspective","perspective-origin","pointer-events","position","quotes","resize","right","src","tab-size","table-layout","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-indent","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","white-space","widows","width","word-break","word-spacing","word-wrap","z-index"].reverse();function Ohe(t){return t?typeof t=="string"?t:t.source:null}function Mhe(t){return Phe("(?=",t,")")}function Phe(...t){return t.map(r=>Ohe(r)).join("")}function Nhe(t){const e=Rhe(t),r={className:"built_in",begin:/[\w-]+(?=\()/},n={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},i="and or not only",s=/@-?\w[\w]*(-\w+)*/,a="[a-zA-Z-][a-zA-Z0-9_-]*",o=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[t.C_BLOCK_COMMENT_MODE,n,t.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+a,relevance:0},e.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+khe.join("|")+")"},{begin:"::("+Lhe.join("|")+")"}]},{className:"attribute",begin:"\\b("+Dhe.join("|")+")\\b"},{begin:":",end:"[;}]",contains:[e.HEXCOLOR,e.IMPORTANT,t.CSS_NUMBER_MODE,...o,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},r]},{begin:Mhe(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:s},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:i,attribute:Ihe.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...o,t.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+Che.join("|")+")\\b"}]}}var Fhe=Nhe;const $he=ct(Fhe);function Uhe(t){return t?typeof t=="string"?t:t.source:null}function Bhe(...t){return t.map(r=>Uhe(r)).join("")}function jhe(t){const e={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},r={begin:"^[-\\*]{3,}",end:"$"},n={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},i={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},s={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},o={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:Bhe(/\[.+?\]\(/,/[A-Za-z][A-Za-z0-9+.-]*/,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.+?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},l={className:"strong",contains:[],variants:[{begin:/_{2}/,end:/_{2}/},{begin:/\*{2}/,end:/\*{2}/}]},u={className:"emphasis",contains:[],variants:[{begin:/\*(?!\*)/,end:/\*/},{begin:/_(?!_)/,end:/_/,relevance:0}]};l.contains.push(u),u.contains.push(l);let c=[e,o];return l.contains=l.contains.concat(c),u.contains=u.contains.concat(c),c=c.concat(l,u),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:c},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:c}]}]},e,i,l,u,{className:"quote",begin:"^>\\s+",contains:c,end:"$"},n,r,o,s]}}var Hhe=jhe;const Vhe=ct(Hhe);function Whe(t){return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,variants:[{begin:/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/},{begin:/^\*\*\* +\d+,\d+ +\*\*\*\*$/},{begin:/^--- +\d+,\d+ +----$/}]},{className:"comment",variants:[{begin:/Index: /,end:/$/},{begin:/^index/,end:/$/},{begin:/={3,}/,end:/$/},{begin:/^-{3}/,end:/$/},{begin:/^\*{3} /,end:/$/},{begin:/^\+{3}/,end:/$/},{begin:/^\*{15}$/},{begin:/^diff --git/,end:/$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}var Ghe=Whe;const Khe=ct(Ghe);function qhe(t){return{name:"Dockerfile",aliases:["docker"],case_insensitive:!0,keywords:"from maintainer expose env arg user onbuild stopsignal",contains:[t.HASH_COMMENT_MODE,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,t.NUMBER_MODE,{beginKeywords:"run cmd entrypoint volume add copy workdir label healthcheck shell",starts:{end:/[^\\]$/,subLanguage:"bash"}}],illegal:"</"}}var zhe=qhe;const Yhe=ct(zhe);function Xhe(t){return t?typeof t=="string"?t:t.source:null}function Zhe(t){return S8("(?=",t,")")}function S8(...t){return t.map(r=>Xhe(r)).join("")}function Qhe(t){const e="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",r={keyword:"and then defined module in return redo if BEGIN retry end for self when next until do begin unless END rescue else break undef not super class case require yield alias while ensure elsif or include attr_reader attr_writer attr_accessor __FILE__",built_in:"proc lambda",literal:"true false nil"},n={className:"doctag",begin:"@[A-Za-z]+"},i={begin:"#<",end:">"},s=[t.COMMENT("#","$",{contains:[n]}),t.COMMENT("^=begin","^=end",{contains:[n],relevance:10}),t.COMMENT("^__END__","\\n$")],a={className:"subst",begin:/#\{/,end:/\}/,keywords:r},o={className:"string",contains:[t.BACKSLASH_ESCAPE,a],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:/<<[-~]?'?(\w+)\n(?:[^\n]*\n)*?\s*\1\b/,returnBegin:!0,contains:[{begin:/<<[-~]?'?/},t.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[t.BACKSLASH_ESCAPE,a]})]}]},l="[1-9](_?[0-9])*|0",u="[0-9](_?[0-9])*",c={className:"number",relevance:0,variants:[{begin:`\\b(${l})(\\.(${u}))?([eE][+-]?(${u})|r)?i?\\b`},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]},d={className:"params",begin:"\\(",end:"\\)",endsParent:!0,keywords:r},h=[o,{className:"class",beginKeywords:"class module",end:"$|;",illegal:/=/,contains:[t.inherit(t.TITLE_MODE,{begin:"[A-Za-z_]\\w*(::\\w+)*(\\?|!)?"}),{begin:"<\\s*",contains:[{begin:"("+t.IDENT_RE+"::)?"+t.IDENT_RE,relevance:0}]}].concat(s)},{className:"function",begin:S8(/def\s+/,Zhe(e+"\\s*(\\(|;|$)")),relevance:0,keywords:"def",end:"$|;",contains:[t.inherit(t.TITLE_MODE,{begin:e}),d].concat(s)},{begin:t.IDENT_RE+"::"},{className:"symbol",begin:t.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[o,{begin:e}],relevance:0},c,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{className:"params",begin:/\|/,end:/\|/,relevance:0,keywords:r},{begin:"("+t.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{className:"regexp",contains:[t.BACKSLASH_ESCAPE,a],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(i,s),relevance:0}].concat(i,s);a.contains=h,d.contains=h;const g=[{begin:/^\s*=>/,starts:{end:"$",contains:h}},{className:"meta",begin:"^("+"[>?]>"+"|"+"[\\w#]+\\(\\w+\\):\\d+:\\d+>"+"|"+"(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>"+")(?=[ ])",starts:{end:"$",contains:h}}];return s.unshift(i),{name:"Ruby",aliases:["rb","gemspec","podspec","thor","irb"],keywords:r,illegal:/\/\*/,contains:[t.SHEBANG({binary:"ruby"})].concat(g).concat(s).concat(h)}}var Jhe=Qhe;const efe=ct(Jhe);function tfe(t){const e={keyword:"break default func interface select case map struct chan else goto package switch const fallthrough if range type continue for import return var go defer bool byte complex64 complex128 float32 float64 int8 int16 int32 int64 string uint8 uint16 uint32 uint64 int uint uintptr rune",literal:"true false iota nil",built_in:"append cap close complex copy imag len make new panic print println real recover delete"};return{name:"Go",aliases:["golang"],keywords:e,illegal:"</",contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{className:"string",variants:[t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{begin:t.C_NUMBER_RE+"[i]",relevance:1},t.C_NUMBER_MODE]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[t.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,keywords:e,illegal:/["']/}]}]}}var rfe=tfe;const nfe=ct(rfe);function w8(t){return t?typeof t=="string"?t:t.source:null}function ife(t){return A8("(?=",t,")")}function A8(...t){return t.map(r=>w8(r)).join("")}function sfe(...t){return"("+t.map(r=>w8(r)).join("|")+")"}function afe(t){const e={className:"number",relevance:0,variants:[{begin:/([+-]+)?[\d]+_[\d_]+/},{begin:t.NUMBER_RE}]},r=t.COMMENT();r.variants=[{begin:/;/,end:/$/},{begin:/#/,end:/$/}];const n={className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)\}/}]},i={className:"literal",begin:/\bon|off|true|false|yes|no\b/},s={className:"string",contains:[t.BACKSLASH_ESCAPE],variants:[{begin:"'''",end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'},{begin:"'",end:"'"}]},a={begin:/\[/,end:/\]/,contains:[r,i,n,s,e,"self"],relevance:0},c=sfe(/[A-Za-z0-9_-]+/,/"(\\"|[^"])*"/,/'[^']*'/),d=A8(c,"(\\s*\\.\\s*",c,")*",ife(/\s*=\s*[^#\s]/));return{name:"TOML, also INI",aliases:["toml"],case_insensitive:!0,illegal:/\S/,contains:[r,{className:"section",begin:/\[+/,end:/\]+/},{begin:d,className:"attr",starts:{end:/$/,contains:[r,a,i,n,s,e]}}]}}var ofe=afe;const lfe=ct(ofe);var bu="[0-9](_*[0-9])*",c0=`\\.(${bu})`,d0="[0-9a-fA-F](_*[0-9a-fA-F])*",ufe={className:"number",variants:[{begin:`(\\b(${bu})((${c0})|\\.)?|(${c0}))[eE][+-]?(${bu})[fFdD]?\\b`},{begin:`\\b(${bu})((${c0})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${c0})[fFdD]?\\b`},{begin:`\\b(${bu})[fFdD]\\b`},{begin:`\\b0[xX]((${d0})\\.?|(${d0})?\\.(${d0}))[pP][+-]?(${bu})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${d0})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function cfe(t){var e="[À-ʸa-zA-Z_$][À-ʸa-zA-Z_$0-9]*",r=e+"(<"+e+"(\\s*,\\s*"+e+")*>)?",n="false synchronized int abstract float private char boolean var static null if const for true while long strictfp finally protected import native final void enum else break transient catch instanceof byte super volatile case assert short package default double public try this switch continue throws protected public private module requires exports do",i={className:"meta",begin:"@"+e,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]};const s=ufe;return{name:"Java",aliases:["jsp"],keywords:n,illegal:/<\/|#/,contains:[t.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,{className:"class",beginKeywords:"class interface enum",end:/[{;=]/,excludeEnd:!0,relevance:1,keywords:"class interface enum",illegal:/[:"\[\]]/,contains:[{beginKeywords:"extends implements"},t.UNDERSCORE_TITLE_MODE]},{beginKeywords:"new throw return else",relevance:0},{className:"class",begin:"record\\s+"+t.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,excludeEnd:!0,end:/[{;=]/,keywords:n,contains:[{beginKeywords:"record"},{begin:t.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[t.UNDERSCORE_TITLE_MODE]},{className:"params",begin:/\(/,end:/\)/,keywords:n,relevance:0,contains:[t.C_BLOCK_COMMENT_MODE]},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{className:"function",begin:"("+r+"\\s+)+"+t.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:n,contains:[{begin:t.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[t.UNDERSCORE_TITLE_MODE]},{className:"params",begin:/\(/,end:/\)/,keywords:n,relevance:0,contains:[i,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,s,t.C_BLOCK_COMMENT_MODE]},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},s,i]}}var dfe=cfe;const hfe=ct(dfe),AL="[A-Za-z$_][0-9A-Za-z$_]*",ffe=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],pfe=["true","false","null","undefined","NaN","Infinity"],mfe=["Intl","DataView","Number","Math","Date","String","RegExp","Object","Function","Boolean","Error","Symbol","Set","Map","WeakSet","WeakMap","Proxy","Reflect","JSON","Promise","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Float32Array","Array","Uint8Array","Uint8ClampedArray","ArrayBuffer","BigInt64Array","BigUint64Array","BigInt"],gfe=["EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],vfe=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],bfe=["arguments","this","super","console","window","document","localStorage","module","global"],yfe=[].concat(vfe,bfe,mfe,gfe);function Efe(t){return t?typeof t=="string"?t:t.source:null}function RL(t){return b_("(?=",t,")")}function b_(...t){return t.map(r=>Efe(r)).join("")}function _fe(t){const e=(T,{after:x})=>{const _="</"+T[0].slice(1);return T.input.indexOf(_,x)!==-1},r=AL,n={begin:"<>",end:"</>"},i={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(T,x)=>{const _=T[0].length+T.index,S=T.input[_];if(S==="<"){x.ignoreMatch();return}S===">"&&(e(T,{after:_})||x.ignoreMatch())}},s={$pattern:AL,keyword:ffe,literal:pfe,built_in:yfe},a="[0-9](_?[0-9])*",o=`\\.(${a})`,l="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",u={className:"number",variants:[{begin:`(\\b(${l})((${o})|\\.)?|(${o}))[eE][+-]?(${a})\\b`},{begin:`\\b(${l})\\b((${o})\\b|\\.)?|(${o})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},c={className:"subst",begin:"\\$\\{",end:"\\}",keywords:s,contains:[]},d={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,c],subLanguage:"xml"}},h={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,c],subLanguage:"css"}},f={className:"string",begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE,c]},m={className:"comment",variants:[t.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+",contains:[{className:"type",begin:"\\{",end:"\\}",relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),t.C_BLOCK_COMMENT_MODE,t.C_LINE_COMMENT_MODE]},g=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,d,h,f,u,t.REGEXP_MODE];c.contains=g.concat({begin:/\{/,end:/\}/,keywords:s,contains:["self"].concat(g)});const v=[].concat(m,c.contains),b=v.concat([{begin:/\(/,end:/\)/,keywords:s,contains:["self"].concat(v)}]),y={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:s,contains:b};return{name:"Javascript",aliases:["js","jsx","mjs","cjs"],keywords:s,exports:{PARAMS_CONTAINS:b},illegal:/#(?![$_A-z])/,contains:[t.SHEBANG({label:"shebang",binary:"node",relevance:5}),{label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,d,h,f,m,u,{begin:b_(/[{,\n]\s*/,RL(b_(/(((\/\/.*$)|(\/\*(\*[^/]|[^*])*\*\/))\s*)*/,r+"\\s*:"))),relevance:0,contains:[{className:"attr",begin:r+RL("\\s*:"),relevance:0}]},{begin:"("+t.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",contains:[m,t.REGEXP_MODE,{className:"function",begin:"(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+t.UNDERSCORE_IDENT_RE+")\\s*=>",returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:t.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:s,contains:b}]}]},{begin:/,/,relevance:0},{className:"",begin:/\s/,end:/\s*/,skip:!0},{variants:[{begin:n.begin,end:n.end},{begin:i.begin,"on:begin":i.isTrulyOpeningTag,end:i.end}],subLanguage:"xml",contains:[{begin:i.begin,end:i.end,skip:!0,contains:["self"]}]}],relevance:0},{className:"function",beginKeywords:"function",end:/[{;]/,excludeEnd:!0,keywords:s,contains:["self",t.inherit(t.TITLE_MODE,{begin:r}),y],illegal:/%/},{beginKeywords:"while if switch catch for"},{className:"function",begin:t.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,contains:[y,t.inherit(t.TITLE_MODE,{begin:r})]},{variants:[{begin:"\\."+r},{begin:"\\$"+r}],relevance:0},{className:"class",beginKeywords:"class",end:/[{;=]/,excludeEnd:!0,illegal:/[:"[\]]/,contains:[{beginKeywords:"extends"},t.UNDERSCORE_TITLE_MODE]},{begin:/\b(?=constructor)/,end:/[{;]/,excludeEnd:!0,contains:[t.inherit(t.TITLE_MODE,{begin:r}),"self",y]},{begin:"(get|set)\\s+(?="+r+"\\()",end:/\{/,keywords:"get set",contains:[t.inherit(t.TITLE_MODE,{begin:r}),{begin:/\(\)/},y]},{begin:/\$[(.]/}]}}var Tfe=_fe;const xfe=ct(Tfe);function Sfe(t){const e={literal:"true false null"},r=[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE],n=[t.QUOTE_STRING_MODE,t.C_NUMBER_MODE],i={end:",",endsWithParent:!0,excludeEnd:!0,contains:n,keywords:e},s={begin:/\{/,end:/\}/,contains:[{className:"attr",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE],illegal:"\\n"},t.inherit(i,{begin:/:/})].concat(r),illegal:"\\S"},a={begin:"\\[",end:"\\]",contains:[t.inherit(i)],illegal:"\\S"};return n.push(s,a),r.forEach(function(o){n.push(o)}),{name:"JSON",contains:n,keywords:e,illegal:"\\S"}}var wfe=Sfe;const Afe=ct(wfe);var yu="[0-9](_*[0-9])*",h0=`\\.(${yu})`,f0="[0-9a-fA-F](_*[0-9a-fA-F])*",Rfe={className:"number",variants:[{begin:`(\\b(${yu})((${h0})|\\.)?|(${h0}))[eE][+-]?(${yu})[fFdD]?\\b`},{begin:`\\b(${yu})((${h0})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${h0})[fFdD]?\\b`},{begin:`\\b(${yu})[fFdD]\\b`},{begin:`\\b0[xX]((${f0})\\.?|(${f0})?\\.(${f0}))[pP][+-]?(${yu})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${f0})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function Cfe(t){const e={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},r={className:"keyword",begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",begin:/@\w+/}]}},n={className:"symbol",begin:t.UNDERSCORE_IDENT_RE+"@"},i={className:"subst",begin:/\$\{/,end:/\}/,contains:[t.C_NUMBER_MODE]},s={className:"variable",begin:"\\$"+t.UNDERSCORE_IDENT_RE},a={className:"string",variants:[{begin:'"""',end:'"""(?=[^"])',contains:[s,i]},{begin:"'",end:"'",illegal:/\n/,contains:[t.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,contains:[t.BACKSLASH_ESCAPE,s,i]}]};i.contains.push(a);const o={className:"meta",begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+t.UNDERSCORE_IDENT_RE+")?"},l={className:"meta",begin:"@"+t.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:[t.inherit(a,{className:"meta-string"})]}]},u=Rfe,c=t.COMMENT("/\\*","\\*/",{contains:[t.C_BLOCK_COMMENT_MODE]}),d={variants:[{className:"type",begin:t.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,contains:[]}]},h=d;return h.variants[1].contains=[d],d.variants[1].contains=[h],{name:"Kotlin",aliases:["kt","kts"],keywords:e,contains:[t.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),t.C_LINE_COMMENT_MODE,c,r,n,o,l,{className:"function",beginKeywords:"fun",end:"[(]|$",returnBegin:!0,excludeEnd:!0,keywords:e,relevance:5,contains:[{begin:t.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[t.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:e,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,endsWithParent:!0,contains:[d,t.C_LINE_COMMENT_MODE,c],relevance:0},t.C_LINE_COMMENT_MODE,c,o,l,a,t.C_NUMBER_MODE]},c]},{className:"class",beginKeywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,illegal:"extends implements",contains:[{beginKeywords:"public protected internal private constructor"},t.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,]|$/,excludeBegin:!0,returnEnd:!0},o,l]},a,{className:"meta",begin:"^#!/usr/bin/env",end:"$",illegal:`
`},u]}}var Ife=Cfe;const kfe=ct(Ife);function Lfe(t){const e="\\[=*\\[",r="\\]=*\\]",n={begin:e,end:r,contains:["self"]},i=[t.COMMENT("--(?!"+e+")","$"),t.COMMENT("--"+e,r,{contains:[n],relevance:10})];return{name:"Lua",keywords:{$pattern:t.UNDERSCORE_IDENT_RE,literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},contains:i.concat([{className:"function",beginKeywords:"function",end:"\\)",contains:[t.inherit(t.TITLE_MODE,{begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",begin:"\\(",endsWithParent:!0,contains:i}].concat(i)},t.C_NUMBER_MODE,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,{className:"string",begin:e,end:r,contains:[n],relevance:5}])}}var Dfe=Lfe;const Ofe=ct(Dfe);function Mfe(t){const e={className:"variable",begin:"\\$+[a-zA-Z_-ÿ][a-zA-Z0-9_-ÿ]*(?![A-Za-z0-9])(?![$])"},r={className:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?[=]?/},{begin:/\?>/}]},n={className:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},i=t.inherit(t.APOS_STRING_MODE,{illegal:null}),s=t.inherit(t.QUOTE_STRING_MODE,{illegal:null,contains:t.QUOTE_STRING_MODE.contains.concat(n)}),a=t.END_SAME_AS_BEGIN({begin:/<<<[ \t]*(\w+)\n/,end:/[ \t]*(\w+)\b/,contains:t.QUOTE_STRING_MODE.contains.concat(n)}),o={className:"string",contains:[t.BACKSLASH_ESCAPE,r],variants:[t.inherit(i,{begin:"b'",end:"'"}),t.inherit(s,{begin:'b"',end:'"'}),s,i,a]},l={className:"number",variants:[{begin:"\\b0b[01]+(?:_[01]+)*\\b"},{begin:"\\b0o[0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0x[\\da-f]+(?:_[\\da-f]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:e[+-]?\\d+)?"}],relevance:0},u={keyword:"__CLASS__ __DIR__ __FILE__ __FUNCTION__ __LINE__ __METHOD__ __NAMESPACE__ __TRAIT__ die echo exit include include_once print require require_once array abstract and as binary bool boolean break callable case catch class clone const continue declare default do double else elseif empty enddeclare endfor endforeach endif endswitch endwhile enum eval extends final finally float for foreach from global goto if implements instanceof insteadof int integer interface isset iterable list match|0 mixed new object or private protected public real return string switch throw trait try unset use var void while xor yield",literal:"false null true",built_in:"Error|0 AppendIterator ArgumentCountError ArithmeticError ArrayIterator ArrayObject AssertionError BadFunctionCallException BadMethodCallException CachingIterator CallbackFilterIterator CompileError Countable DirectoryIterator DivisionByZeroError DomainException EmptyIterator ErrorException Exception FilesystemIterator FilterIterator GlobIterator InfiniteIterator InvalidArgumentException IteratorIterator LengthException LimitIterator LogicException MultipleIterator NoRewindIterator OutOfBoundsException OutOfRangeException OuterIterator OverflowException ParentIterator ParseError RangeException RecursiveArrayIterator RecursiveCachingIterator RecursiveCallbackFilterIterator RecursiveDirectoryIterator RecursiveFilterIterator RecursiveIterator RecursiveIteratorIterator RecursiveRegexIterator RecursiveTreeIterator RegexIterator RuntimeException SeekableIterator SplDoublyLinkedList SplFileInfo SplFileObject SplFixedArray SplHeap SplMaxHeap SplMinHeap SplObjectStorage SplObserver SplObserver SplPriorityQueue SplQueue SplStack SplSubject SplSubject SplTempFileObject TypeError UnderflowException UnexpectedValueException UnhandledMatchError ArrayAccess Closure Generator Iterator IteratorAggregate Serializable Stringable Throwable Traversable WeakReference WeakMap Directory __PHP_Incomplete_Class parent php_user_filter self static stdClass"};return{aliases:["php3","php4","php5","php6","php7","php8"],case_insensitive:!0,keywords:u,contains:[t.HASH_COMMENT_MODE,t.COMMENT("//","$",{contains:[r]}),t.COMMENT("/\\*","\\*/",{contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),t.COMMENT("__halt_compiler.+?;",!1,{endsWithParent:!0,keywords:"__halt_compiler"}),r,{className:"keyword",begin:/\$this\b/},e,{begin:/(::|->)+[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/},{className:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},t.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{className:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:u,contains:["self",e,t.C_BLOCK_COMMENT_MODE,o,l]}]},{className:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},t.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[t.UNDERSCORE_TITLE_MODE]},{beginKeywords:"use",relevance:0,end:";",contains:[t.UNDERSCORE_TITLE_MODE]},o,l]}}var Pfe=Mfe;const Nfe=ct(Pfe);function Ffe(t){return{name:"PHP template",subLanguage:"xml",contains:[{begin:/<\?(php|=)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},t.inherit(t.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),t.inherit(t.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]}]}}var $fe=Ffe;const Ufe=ct($fe);function Bfe(t){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:!0}}var jfe=Bfe;const Hfe=ct(jfe);function Vfe(t){const e=["string","char","byte","int","long","bool","decimal","single","double","DateTime","xml","array","hashtable","void"],r="Add|Clear|Close|Copy|Enter|Exit|Find|Format|Get|Hide|Join|Lock|Move|New|Open|Optimize|Pop|Push|Redo|Remove|Rename|Reset|Resize|Search|Select|Set|Show|Skip|Split|Step|Switch|Undo|Unlock|Watch|Backup|Checkpoint|Compare|Compress|Convert|ConvertFrom|ConvertTo|Dismount|Edit|Expand|Export|Group|Import|Initialize|Limit|Merge|Mount|Out|Publish|Restore|Save|Sync|Unpublish|Update|Approve|Assert|Build|Complete|Confirm|Deny|Deploy|Disable|Enable|Install|Invoke|Register|Request|Restart|Resume|Start|Stop|Submit|Suspend|Uninstall|Unregister|Wait|Debug|Measure|Ping|Repair|Resolve|Test|Trace|Connect|Disconnect|Read|Receive|Send|Write|Block|Grant|Protect|Revoke|Unblock|Unprotect|Use|ForEach|Sort|Tee|Where",n="-and|-as|-band|-bnot|-bor|-bxor|-casesensitive|-ccontains|-ceq|-cge|-cgt|-cle|-clike|-clt|-cmatch|-cne|-cnotcontains|-cnotlike|-cnotmatch|-contains|-creplace|-csplit|-eq|-exact|-f|-file|-ge|-gt|-icontains|-ieq|-ige|-igt|-ile|-ilike|-ilt|-imatch|-in|-ine|-inotcontains|-inotlike|-inotmatch|-ireplace|-is|-isnot|-isplit|-join|-le|-like|-lt|-match|-ne|-not|-notcontains|-notin|-notlike|-notmatch|-or|-regex|-replace|-shl|-shr|-split|-wildcard|-xor",i={$pattern:/-?[A-z\.\-]+\b/,keyword:"if else foreach return do while until elseif begin for trap data dynamicparam end break throw param continue finally in switch exit filter try process catch hidden static parameter",built_in:"ac asnp cat cd CFS chdir clc clear clhy cli clp cls clv cnsn compare copy cp cpi cpp curl cvpa dbp del diff dir dnsn ebp echo|0 epal epcsv epsn erase etsn exsn fc fhx fl ft fw gal gbp gc gcb gci gcm gcs gdr gerr ghy gi gin gjb gl gm gmo gp gps gpv group gsn gsnp gsv gtz gu gv gwmi h history icm iex ihy ii ipal ipcsv ipmo ipsn irm ise iwmi iwr kill lp ls man md measure mi mount move mp mv nal ndr ni nmo npssc nsn nv ogv oh popd ps pushd pwd r rbp rcjb rcsn rd rdr ren ri rjb rm rmdir rmo rni rnp rp rsn rsnp rujb rv rvpa rwmi sajb sal saps sasv sbp sc scb select set shcm si sl sleep sls sort sp spjb spps spsv start stz sujb sv swmi tee trcm type wget where wjb write"},s=/\w[\w\d]*((-)[\w\d]+)*/,a={begin:"`[\\s\\S]",relevance:0},o={className:"variable",variants:[{begin:/\$\B/},{className:"keyword",begin:/\$this/},{begin:/\$[\w\d][\w\d_:]*/}]},l={className:"literal",begin:/\$(null|true|false)\b/},u={className:"string",variants:[{begin:/"/,end:/"/},{begin:/@"/,end:/^"@/}],contains:[a,o,{className:"variable",begin:/\$[A-z]/,end:/[^A-z]/}]},c={className:"string",variants:[{begin:/'/,end:/'/},{begin:/@'/,end:/^'@/}]},d={className:"doctag",variants:[{begin:/\.(synopsis|description|example|inputs|outputs|notes|link|component|role|functionality)/},{begin:/\.(parameter|forwardhelptargetname|forwardhelpcategory|remotehelprunspace|externalhelp)\s+\S+/}]},h=t.inherit(t.COMMENT(null,null),{variants:[{begin:/#/,end:/$/},{begin:/<#/,end:/#>/}],contains:[d]}),f={className:"built_in",variants:[{begin:"(".concat(r,")+(-)[\\w\\d]+")}]},p={className:"class",beginKeywords:"class enum",end:/\s*[{]/,excludeEnd:!0,relevance:0,contains:[t.TITLE_MODE]},m={className:"function",begin:/function\s+/,end:/\s*\{|$/,excludeEnd:!0,returnBegin:!0,relevance:0,contains:[{begin:"function",relevance:0,className:"keyword"},{className:"title",begin:s,relevance:0},{begin:/\(/,end:/\)/,className:"params",relevance:0,contains:[o]}]},g={begin:/using\s/,end:/$/,returnBegin:!0,contains:[u,c,{className:"keyword",begin:/(using|assembly|command|module|namespace|type)/}]},v={variants:[{className:"operator",begin:"(".concat(n,")\\b")},{className:"literal",begin:/(-)[\w\d]+/,relevance:0}]},b={className:"selector-tag",begin:/@\B/,relevance:0},y={className:"function",begin:/\[.*\]\s*[\w]+[ ]??\(/,end:/$/,returnBegin:!0,relevance:0,contains:[{className:"keyword",begin:"(".concat(i.keyword.toString().replace(/\s/g,"|"),")\\b"),endsParent:!0,relevance:0},t.inherit(t.TITLE_MODE,{endsParent:!0})]},T=[y,h,a,t.NUMBER_MODE,u,c,f,o,l,b],x={begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0,relevance:0,contains:[].concat("self",T,{begin:"("+e.join("|")+")",className:"built_in",relevance:0},{className:"type",begin:/[\.\w\d]+/,relevance:0})};return y.contains.unshift(x),{name:"PowerShell",aliases:["ps","ps1"],case_insensitive:!0,keywords:i,contains:T.concat(p,m,g,v,x)}}var Wfe=Vfe;const Gfe=ct(Wfe);function Kfe(t){return t?typeof t=="string"?t:t.source:null}function qfe(t){return zfe("(?=",t,")")}function zfe(...t){return t.map(r=>Kfe(r)).join("")}function Yfe(t){const s={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:["and","as","assert","async","await","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},a={className:"meta",begin:/^(>>>|\.\.\.) /},o={className:"subst",begin:/\{/,end:/\}/,keywords:s,illegal:/#/},l={begin:/\{\{/,relevance:0},u={className:"string",contains:[t.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,a],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,a],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,a,l,o]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,a,l,o]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[t.BACKSLASH_ESCAPE,l,o]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,l,o]},t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},c="[0-9](_?[0-9])*",d=`(\\b(${c}))?\\.(${c})|\\b(${c})\\.`,h={className:"number",relevance:0,variants:[{begin:`(\\b(${c})|(${d}))[eE][+-]?(${c})[jJ]?\\b`},{begin:`(${d})[jJ]?`},{begin:"\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?\\b"},{begin:"\\b0[bB](_?[01])+[lL]?\\b"},{begin:"\\b0[oO](_?[0-7])+[lL]?\\b"},{begin:"\\b0[xX](_?[0-9a-fA-F])+[lL]?\\b"},{begin:`\\b(${c})[jJ]\\b`}]},f={className:"comment",begin:qfe(/# type:/),end:/$/,keywords:s,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},p={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:s,contains:["self",a,h,u,t.HASH_COMMENT_MODE]}]};return o.contains=[u,h,a],{name:"Python",aliases:["py","gyp","ipython"],keywords:s,illegal:/(<\/|->|\?)|=>/,contains:[a,h,{begin:/\bself\b/},{beginKeywords:"if",relevance:0},u,f,t.HASH_COMMENT_MODE,{variants:[{className:"function",beginKeywords:"def"},{className:"class",beginKeywords:"class"}],end:/:/,illegal:/[${=;\n,]/,contains:[t.UNDERSCORE_TITLE_MODE,p,{begin:/->/,endsWithParent:!0,keywords:s}]},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[h,p,u]}]}}var Xfe=Yfe;const Zfe=ct(Xfe);function Qfe(t){const e="([ui](8|16|32|64|128|size)|f(32|64))?",r="abstract as async await become box break const continue crate do dyn else enum extern false final fn for if impl in let loop macro match mod move mut override priv pub ref return self Self static struct super trait true try type typeof unsafe unsized use virtual where while yield",n="drop i8 i16 i32 i64 i128 isize u8 u16 u32 u64 u128 usize f32 f64 str char bool Box Option Result String Vec Copy Send Sized Sync Drop Fn FnMut FnOnce ToOwned Clone Debug PartialEq PartialOrd Eq Ord AsRef AsMut Into From Default Iterator Extend IntoIterator DoubleEndedIterator ExactSizeIterator SliceConcatExt ToString assert! assert_eq! bitflags! bytes! cfg! col! concat! concat_idents! debug_assert! debug_assert_eq! env! panic! file! format! format_args! include_bin! include_str! line! local_data_key! module_path! option_env! print! println! select! stringify! try! unimplemented! unreachable! vec! write! writeln! macro_rules! assert_ne! debug_assert_ne!";return{name:"Rust",aliases:["rs"],keywords:{$pattern:t.IDENT_RE+"!?",keyword:r,literal:"true false Some None Ok Err",built_in:n},illegal:"</",contains:[t.C_LINE_COMMENT_MODE,t.COMMENT("/\\*","\\*/",{contains:["self"]}),t.inherit(t.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"string",variants:[{begin:/r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'\\?(x\w{2}|u\w{4}|U\w{8}|.)'/}]},{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*/},{className:"number",variants:[{begin:"\\b0b([01_]+)"+e},{begin:"\\b0o([0-7_]+)"+e},{begin:"\\b0x([A-Fa-f0-9_]+)"+e},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+e}],relevance:0},{className:"function",beginKeywords:"fn",end:"(\\(|<)",excludeEnd:!0,contains:[t.UNDERSCORE_TITLE_MODE]},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"meta-string",begin:/"/,end:/"/}]},{className:"class",beginKeywords:"type",end:";",contains:[t.inherit(t.UNDERSCORE_TITLE_MODE,{endsParent:!0})],illegal:"\\S"},{className:"class",beginKeywords:"trait enum struct union",end:/\{/,contains:[t.inherit(t.UNDERSCORE_TITLE_MODE,{endsParent:!0})],illegal:"[\\w\\d]"},{begin:t.IDENT_RE+"::",keywords:{built_in:n}},{begin:"->"}]}}var Jfe=Qfe;const e0e=ct(Jfe);function t0e(t){return{name:"Shell Session",aliases:["console"],contains:[{className:"meta",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#]/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}var r0e=t0e;const n0e=ct(r0e);function R8(t){return t?typeof t=="string"?t:t.source:null}function i0e(...t){return t.map(r=>R8(r)).join("")}function dy(...t){return"("+t.map(r=>R8(r)).join("|")+")"}function s0e(t){const e=t.COMMENT("--","$"),r={className:"string",variants:[{begin:/'/,end:/'/,contains:[{begin:/''/}]}]},n={begin:/"/,end:/"/,contains:[{begin:/""/}]},i=["true","false","unknown"],s=["double precision","large object","with timezone","without timezone"],a=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],o=["add","asc","collation","desc","final","first","last","view"],l=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update   ","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],u=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],c=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],d=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],h=u,f=[...l,...o].filter(b=>!u.includes(b)),p={className:"variable",begin:/@[a-z0-9]+/},m={className:"operator",begin:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},g={begin:i0e(/\b/,dy(...h),/\s*\(/),keywords:{built_in:h}};function v(b,{exceptions:y,when:T}={}){const x=T;return y=y||[],b.map(_=>_.match(/\|\d+$/)||y.includes(_)?_:x(_)?`${_}|0`:_)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:v(f,{when:b=>b.length<3}),literal:i,type:a,built_in:c},contains:[{begin:dy(...d),keywords:{$pattern:/[\w\.]+/,keyword:f.concat(d),literal:i,type:a}},{className:"type",begin:dy(...s)},g,p,r,n,t.C_NUMBER_MODE,t.C_BLOCK_COMMENT_MODE,e,m]}}var a0e=s0e;const o0e=ct(a0e);function C8(t){return t?typeof t=="string"?t:t.source:null}function jl(t){return Vt("(?=",t,")")}function Vt(...t){return t.map(r=>C8(r)).join("")}function wn(...t){return"("+t.map(r=>C8(r)).join("|")+")"}const iw=t=>Vt(/\b/,t,/\w$/.test(t)?/\b/:/\B/),CL=["Protocol","Type"].map(iw),hy=["init","self"].map(iw),l0e=["Any","Self"],fy=["associatedtype","async","await",/as\?/,/as!/,"as","break","case","catch","class","continue","convenience","default","defer","deinit","didSet","do","dynamic","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","lazy","let","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],IL=["false","nil","true"],u0e=["assignment","associativity","higherThan","left","lowerThan","none","right"],c0e=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warn_unqualified_access","#warning"],kL=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],I8=wn(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),k8=wn(I8,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),py=Vt(I8,k8,"*"),L8=wn(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),yg=wn(L8,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),$s=Vt(L8,yg,"*"),my=Vt(/[A-Z]/,yg,"*"),d0e=["autoclosure",Vt(/convention\(/,wn("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",Vt(/objc\(/,$s,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","testable","UIApplicationMain","unknown","usableFromInline"],h0e=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];function f0e(t){const e={match:/\s+/,relevance:0},r=t.COMMENT("/\\*","\\*/",{contains:["self"]}),n=[t.C_LINE_COMMENT_MODE,r],i={className:"keyword",begin:Vt(/\./,jl(wn(...CL,...hy))),end:wn(...CL,...hy),excludeBegin:!0},s={match:Vt(/\./,wn(...fy)),relevance:0},a=fy.filter(ce=>typeof ce=="string").concat(["_|0"]),o=fy.filter(ce=>typeof ce!="string").concat(l0e).map(iw),l={variants:[{className:"keyword",match:wn(...o,...hy)}]},u={$pattern:wn(/\b\w+/,/#\w+/),keyword:a.concat(c0e),literal:IL},c=[i,s,l],d={match:Vt(/\./,wn(...kL)),relevance:0},h={className:"built_in",match:Vt(/\b/,wn(...kL),/(?=\()/)},f=[d,h],p={match:/->/,relevance:0},m={className:"operator",relevance:0,variants:[{match:py},{match:`\\.(\\.|${k8})+`}]},g=[p,m],v="([0-9]_*)+",b="([0-9a-fA-F]_*)+",y={className:"number",relevance:0,variants:[{match:`\\b(${v})(\\.(${v}))?([eE][+-]?(${v}))?\\b`},{match:`\\b0x(${b})(\\.(${b}))?([pP][+-]?(${v}))?\\b`},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},T=(ce="")=>({className:"subst",variants:[{match:Vt(/\\/,ce,/[0\\tnr"']/)},{match:Vt(/\\/,ce,/u\{[0-9a-fA-F]{1,8}\}/)}]}),x=(ce="")=>({className:"subst",match:Vt(/\\/,ce,/[\t ]*(?:[\r\n]|\r\n)/)}),_=(ce="")=>({className:"subst",label:"interpol",begin:Vt(/\\/,ce,/\(/),end:/\)/}),S=(ce="")=>({begin:Vt(ce,/"""/),end:Vt(/"""/,ce),contains:[T(ce),x(ce),_(ce)]}),A=(ce="")=>({begin:Vt(ce,/"/),end:Vt(/"/,ce),contains:[T(ce),_(ce)]}),k={className:"string",variants:[S(),S("#"),S("##"),S("###"),A(),A("#"),A("##"),A("###")]},I={match:Vt(/`/,$s,/`/)},C={className:"variable",match:/\$\d+/},N={className:"variable",match:`\\$${yg}+`},P=[I,C,N],V={match:/(@|#)available/,className:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:h0e,contains:[...g,y,k]}]}},M={className:"keyword",match:Vt(/@/,wn(...d0e))},U={className:"meta",match:Vt(/@/,$s)},B=[V,M,U],X={match:jl(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:Vt(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,yg,"+")},{className:"type",match:my,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:Vt(/\s+&\s+/,jl(my)),relevance:0}]},te={begin:/</,end:/>/,keywords:u,contains:[...n,...c,...B,p,X]};X.contains.push(te);const D={match:Vt($s,/\s*:/),keywords:"_|0",relevance:0},L={begin:/\(/,end:/\)/,relevance:0,keywords:u,contains:["self",D,...n,...c,...f,...g,y,k,...P,...B,X]},Y={beginKeywords:"func",contains:[{className:"title",match:wn(I.match,$s,py),endsParent:!0,relevance:0},e]},$={begin:/</,end:/>/,contains:[...n,X]},j={begin:wn(jl(Vt($s,/\s*:/)),jl(Vt($s,/\s+/,$s,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:$s}]},z={begin:/\(/,end:/\)/,keywords:u,contains:[j,...n,...c,...g,y,k,...B,X,L],endsParent:!0,illegal:/["']/},re={className:"function",match:jl(/\bfunc\b/),contains:[Y,$,z,e],illegal:[/\[/,/%/]},ne={className:"function",match:/\b(subscript|init[?!]?)\s*(?=[<(])/,keywords:{keyword:"subscript init init? init!",$pattern:/\w+[?!]?/},contains:[$,z,e],illegal:/\[|%/},ue={beginKeywords:"operator",end:t.MATCH_NOTHING_RE,contains:[{className:"title",match:py,endsParent:!0,relevance:0}]},Te={beginKeywords:"precedencegroup",end:t.MATCH_NOTHING_RE,contains:[{className:"title",match:my,relevance:0},{begin:/{/,end:/}/,relevance:0,endsParent:!0,keywords:[...u0e,...IL],contains:[X]}]};for(const ce of k.variants){const _e=ce.contains.find(nt=>nt.label==="interpol");_e.keywords=u;const De=[...c,...f,...g,y,k,...P];_e.contains=[...De,{begin:/\(/,end:/\)/,contains:["self",...De]}]}return{name:"Swift",keywords:u,contains:[...n,re,ne,{className:"class",beginKeywords:"struct protocol class extension enum",end:"\\{",excludeEnd:!0,keywords:u,contains:[t.inherit(t.TITLE_MODE,{begin:/[A-Za-z$_][\u00C0-\u02B80-9A-Za-z$_]*/}),...c]},ue,Te,{beginKeywords:"import",end:/$/,contains:[...n],relevance:0},...c,...f,...g,y,k,...P,...B,X,L]}}var p0e=f0e;const m0e=ct(p0e);function g0e(t){var e="true false yes no null",r="[\\w#;/?:@&=+$,.~*'()[\\]]+",n={className:"attr",variants:[{begin:"\\w[\\w :\\/.-]*:(?=[ 	]|$)"},{begin:'"\\w[\\w :\\/.-]*":(?=[ 	]|$)'},{begin:"'\\w[\\w :\\/.-]*':(?=[ 	]|$)"}]},i={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},s={className:"string",relevance:0,variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/\S+/}],contains:[t.BACKSLASH_ESCAPE,i]},a=t.inherit(s,{variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),o="[0-9]{4}(-[0-9][0-9]){0,2}",l="([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?",u="(\\.[0-9]*)?",c="([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?",d={className:"number",begin:"\\b"+o+l+u+c+"\\b"},h={end:",",endsWithParent:!0,excludeEnd:!0,keywords:e,relevance:0},f={begin:/\{/,end:/\}/,contains:[h],illegal:"\\n",relevance:0},p={begin:"\\[",end:"\\]",contains:[h],illegal:"\\n",relevance:0},m=[n,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+r},{className:"type",begin:"!<"+r+">"},{className:"type",begin:"!"+r},{className:"type",begin:"!!"+r},{className:"meta",begin:"&"+t.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+t.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},t.HASH_COMMENT_MODE,{beginKeywords:e,keywords:{literal:e}},d,{className:"number",begin:t.C_NUMBER_RE+"\\b",relevance:0},f,p,s],g=[...m];return g.pop(),g.push(a),h.contains=g,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:m}}var v0e=g0e;const b0e=ct(v0e),Eg="[A-Za-z$_][0-9A-Za-z$_]*",D8=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],O8=["true","false","null","undefined","NaN","Infinity"],y0e=["Intl","DataView","Number","Math","Date","String","RegExp","Object","Function","Boolean","Error","Symbol","Set","Map","WeakSet","WeakMap","Proxy","Reflect","JSON","Promise","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Float32Array","Array","Uint8Array","Uint8ClampedArray","ArrayBuffer","BigInt64Array","BigUint64Array","BigInt"],E0e=["EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],_0e=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],T0e=["arguments","this","super","console","window","document","localStorage","module","global"],M8=[].concat(_0e,T0e,y0e,E0e);function x0e(t){return t?typeof t=="string"?t:t.source:null}function LL(t){return y_("(?=",t,")")}function y_(...t){return t.map(r=>x0e(r)).join("")}function S0e(t){const e=(T,{after:x})=>{const _="</"+T[0].slice(1);return T.input.indexOf(_,x)!==-1},r=Eg,n={begin:"<>",end:"</>"},i={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(T,x)=>{const _=T[0].length+T.index,S=T.input[_];if(S==="<"){x.ignoreMatch();return}S===">"&&(e(T,{after:_})||x.ignoreMatch())}},s={$pattern:Eg,keyword:D8,literal:O8,built_in:M8},a="[0-9](_?[0-9])*",o=`\\.(${a})`,l="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",u={className:"number",variants:[{begin:`(\\b(${l})((${o})|\\.)?|(${o}))[eE][+-]?(${a})\\b`},{begin:`\\b(${l})\\b((${o})\\b|\\.)?|(${o})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},c={className:"subst",begin:"\\$\\{",end:"\\}",keywords:s,contains:[]},d={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,c],subLanguage:"xml"}},h={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,c],subLanguage:"css"}},f={className:"string",begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE,c]},m={className:"comment",variants:[t.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+",contains:[{className:"type",begin:"\\{",end:"\\}",relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),t.C_BLOCK_COMMENT_MODE,t.C_LINE_COMMENT_MODE]},g=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,d,h,f,u,t.REGEXP_MODE];c.contains=g.concat({begin:/\{/,end:/\}/,keywords:s,contains:["self"].concat(g)});const v=[].concat(m,c.contains),b=v.concat([{begin:/\(/,end:/\)/,keywords:s,contains:["self"].concat(v)}]),y={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:s,contains:b};return{name:"Javascript",aliases:["js","jsx","mjs","cjs"],keywords:s,exports:{PARAMS_CONTAINS:b},illegal:/#(?![$_A-z])/,contains:[t.SHEBANG({label:"shebang",binary:"node",relevance:5}),{label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,d,h,f,m,u,{begin:y_(/[{,\n]\s*/,LL(y_(/(((\/\/.*$)|(\/\*(\*[^/]|[^*])*\*\/))\s*)*/,r+"\\s*:"))),relevance:0,contains:[{className:"attr",begin:r+LL("\\s*:"),relevance:0}]},{begin:"("+t.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",contains:[m,t.REGEXP_MODE,{className:"function",begin:"(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+t.UNDERSCORE_IDENT_RE+")\\s*=>",returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:t.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:s,contains:b}]}]},{begin:/,/,relevance:0},{className:"",begin:/\s/,end:/\s*/,skip:!0},{variants:[{begin:n.begin,end:n.end},{begin:i.begin,"on:begin":i.isTrulyOpeningTag,end:i.end}],subLanguage:"xml",contains:[{begin:i.begin,end:i.end,skip:!0,contains:["self"]}]}],relevance:0},{className:"function",beginKeywords:"function",end:/[{;]/,excludeEnd:!0,keywords:s,contains:["self",t.inherit(t.TITLE_MODE,{begin:r}),y],illegal:/%/},{beginKeywords:"while if switch catch for"},{className:"function",begin:t.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,contains:[y,t.inherit(t.TITLE_MODE,{begin:r})]},{variants:[{begin:"\\."+r},{begin:"\\$"+r}],relevance:0},{className:"class",beginKeywords:"class",end:/[{;=]/,excludeEnd:!0,illegal:/[:"[\]]/,contains:[{beginKeywords:"extends"},t.UNDERSCORE_TITLE_MODE]},{begin:/\b(?=constructor)/,end:/[{;]/,excludeEnd:!0,contains:[t.inherit(t.TITLE_MODE,{begin:r}),"self",y]},{begin:"(get|set)\\s+(?="+r+"\\()",end:/\{/,keywords:"get set",contains:[t.inherit(t.TITLE_MODE,{begin:r}),{begin:/\(\)/},y]},{begin:/\$[(.]/}]}}function w0e(t){const e=Eg,r={beginKeywords:"namespace",end:/\{/,excludeEnd:!0},n={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:"interface extends"},i={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},s=["any","void","number","boolean","string","object","never","enum"],a=["type","namespace","typedef","interface","public","private","protected","implements","declare","abstract","readonly"],o={$pattern:Eg,keyword:D8.concat(a),literal:O8,built_in:M8.concat(s)},l={className:"meta",begin:"@"+e},u=(h,f,p)=>{const m=h.contains.findIndex(g=>g.label===f);if(m===-1)throw new Error("can not find mode to replace");h.contains.splice(m,1,p)},c=S0e(t);Object.assign(c.keywords,o),c.exports.PARAMS_CONTAINS.push(l),c.contains=c.contains.concat([l,r,n]),u(c,"shebang",t.SHEBANG()),u(c,"use_strict",i);const d=c.contains.find(h=>h.className==="function");return d.relevance=0,Object.assign(c,{name:"TypeScript",aliases:["ts","tsx"]}),c}var A0e=w0e;const R0e=ct(A0e);var sw=Zce(xl,{});sw.registerLanguage=xl.registerLanguage;const C0e={bash:fhe,c:bhe,cpp:xhe,csharp:Ahe,css:$he,diff:Khe,dockerfile:Yhe,go:nfe,html:wL,ini:lfe,java:hfe,javascript:xfe,json:Afe,kotlin:kfe,lua:Ofe,markdown:Vhe,php:Nfe,phpTemplate:Ufe,plaintext:Hfe,powershell:Gfe,python:Zfe,ruby:efe,rust:e0e,shell:n0e,sql:o0e,swift:m0e,typescript:R0e,xml:wL,yaml:b0e},I0e=()=>{for(const[t,e]of Object.entries(C0e))sw.registerLanguage(t,e)},P8={bash:"Bash",c:"C",cpp:"C++",csharp:"C#",css:"CSS",diff:"Diff",dockerfile:"Dockerfile",go:"Go",html:"HTML",ini:"INI",java:"Java",javascript:"JavaScript",json:"JSON",kotlin:"Kotlin",lua:"Lua",markdown:"Markdown",php:"PHP","php-template":"PHP Template",plaintext:"Plaintext",powershell:"PowerShell",python:"Python",ruby:"Ruby",rust:"Rust",shell:"Shell",sql:"SQL",swift:"Swift",typescript:"TypeScript",xml:"XML",yaml:"YAML"},N8=Object.keys(P8),F8=({children:t})=>{const{polyglot:e}=oe(St),[r,n]=R.useState("plaintext"),i=R.useCallback(()=>{navigator.clipboard.writeText(t.trim()).then(()=>et.success(e.t("actions.copied"))).catch(a=>{console.error(a),et.error(e.t("actions.copy_failed"))})},[t,e]),s=t.trim();return R.useEffect(()=>{setTimeout(()=>{const a=b9.highlightAuto(t).language;N8.includes(a)?n(a):console.info("detectedLanguage not supported: ",a)},$d)},[t]),E.jsxs("div",{className:"code-block-container",children:[E.jsxs("div",{className:"code-block-header",children:[E.jsx(k0e,{language:r,setLanguage:n}),E.jsx(L0e,{onClick:i})]}),E.jsx(sw,{language:r,showLineNumbers:!0,style:Lce,wrapLines:!0,children:s})]})},k0e=({language:t,setLanguage:e})=>E.jsx(cr,{showSearch:!0,className:"language-selector",value:t,triggerProps:{autoAlignPopupWidth:!1,autoAlignPopupMinWidth:!0,position:"bl"},onChange:e,children:N8.map(r=>E.jsx(cr.Option,{value:r,children:P8[r]||r},r))}),L0e=({onClick:t})=>{const{polyglot:e}=oe(St);return E.jsx(Mr,{mini:!0,content:e.t("actions.copy_to_clipboard_tooltip"),children:E.jsx(ht,{className:"copy-button",icon:E.jsx(s9,{}),onClick:t})})},p0=({imgNode:t,isIcon:e,isBigImage:r,index:n,togglePhotoSlider:i})=>{const{fontSize:s}=oe(Lt);return e?E.jsx("img",{...t.attribs,alt:t.attribs.alt??"image",className:"icon-image",style:{height:`${s}rem`}}):E.jsxs("div",{style:{position:"relative"},children:[E.jsx("img",{...t.attribs,alt:t.attribs.alt??"image",className:r?"big-image":""}),E.jsx("button",{className:"image-overlay-button",type:"button",onClick:a=>{a.preventDefault(),i(n)}})]})},DL=(t,e)=>e?t.children.find(r=>r.type==="tag"&&r.name==="img"):t,$8=({node:t,index:e,togglePhotoSlider:r,isLinkWrapper:n=!1})=>{var u;const[i,s]=R.useState(!1),[a,o]=R.useState(!1),l=DL(t,n);return R.useEffect(()=>{const d=DL(t,n).attribs.src,h=new Image;h.src=d,h.onload=()=>{const f=h.width<=100&&h.height<=100,p=h.width>768;s(f),o(p&&!f)}},[t,n]),i?n?E.jsxs("a",{...t.attribs,children:[E.jsx(p0,{imgNode:l,index:e,isBigImage:a,isIcon:i,togglePhotoSlider:r}),(u=t.children[1])==null?void 0:u.data]}):E.jsx(p0,{imgNode:l,index:e,isBigImage:a,isIcon:i,togglePhotoSlider:r}):E.jsx("div",{className:"image-wrapper",children:E.jsx("div",{className:"image-container",children:n?E.jsxs("div",{children:[E.jsx("a",{...t.attribs,children:E.jsx(p0,{imgNode:l,index:e,isBigImage:a,isIcon:i,togglePhotoSlider:r})}),E.jsx(Uh,{content:t.attribs.href,children:E.jsx(qa,{className:"link-tag",icon:E.jsx(gD,{}),onClick:c=>{c.stopPropagation(),window.open(t.attribs.href,"_blank")},children:t.attribs.href})})]}):E.jsx(p0,{imgNode:l,index:e,isBigImage:a,isIcon:i,togglePhotoSlider:r})})})},_g=({children:t,duration:e=PO,y:r=0,x:n=0,...i})=>E.jsx(SY.div,{animate:{opacity:1,y:0,x:0},exit:{opacity:0,y:0,x:0},initial:{opacity:0,y:r,x:n},transition:{duration:e},...i,children:t});var U8={},Lh={},aw={},Dh={},ow={};Object.defineProperty(ow,"__esModule",{value:!0});ow.default=new Uint16Array('ᵁ<Õıʊҝջאٵ۞ޢߖࠏ੊ઑඡ๭༉༦჊ረዡᐕᒝᓃᓟᔥ\0\0\0\0\0\0ᕫᛍᦍᰒᷝ὾⁠↰⊍⏀⏻⑂⠤⤒ⴈ⹈⿎〖㊺㘹㞬㣾㨨㩱㫠㬮ࠀEMabcfglmnoprstu\\bfms¦³¹ÈÏlig耻Æ䃆P耻&䀦cute耻Á䃁reve;䄂Āiyx}rc耻Â䃂;䐐r;쀀𝔄rave耻À䃀pha;䎑acr;䄀d;橓Āgp¡on;䄄f;쀀𝔸plyFunction;恡ing耻Å䃅Ācs¾Ãr;쀀𝒜ign;扔ilde耻Ã䃃ml耻Ä䃄ЀaceforsuåûþėĜĢħĪĀcrêòkslash;或Ŷöø;櫧ed;挆y;䐑ƀcrtąċĔause;戵noullis;愬a;䎒r;쀀𝔅pf;쀀𝔹eve;䋘còēmpeq;扎܀HOacdefhilorsuōőŖƀƞƢƵƷƺǜȕɳɸɾcy;䐧PY耻©䂩ƀcpyŝŢźute;䄆Ā;iŧŨ拒talDifferentialD;慅leys;愭ȀaeioƉƎƔƘron;䄌dil耻Ç䃇rc;䄈nint;戰ot;䄊ĀdnƧƭilla;䂸terDot;䂷òſi;䎧rcleȀDMPTǇǋǑǖot;抙inus;抖lus;投imes;抗oĀcsǢǸkwiseContourIntegral;戲eCurlyĀDQȃȏoubleQuote;思uote;怙ȀlnpuȞȨɇɕonĀ;eȥȦ户;橴ƀgitȯȶȺruent;扡nt;戯ourIntegral;戮ĀfrɌɎ;愂oduct;成nterClockwiseContourIntegral;戳oss;樯cr;쀀𝒞pĀ;Cʄʅ拓ap;才րDJSZacefiosʠʬʰʴʸˋ˗ˡ˦̳ҍĀ;oŹʥtrahd;椑cy;䐂cy;䐅cy;䐏ƀgrsʿ˄ˇger;怡r;憡hv;櫤Āayː˕ron;䄎;䐔lĀ;t˝˞戇a;䎔r;쀀𝔇Āaf˫̧Ācm˰̢riticalȀADGT̖̜̀̆cute;䂴oŴ̋̍;䋙bleAcute;䋝rave;䁠ilde;䋜ond;拄ferentialD;慆Ѱ̽\0\0\0͔͂\0Ѕf;쀀𝔻ƀ;DE͈͉͍䂨ot;惜qual;扐blèCDLRUVͣͲ΂ϏϢϸontourIntegraìȹoɴ͹\0\0ͻ»͉nArrow;懓Āeo·ΤftƀARTΐΖΡrrow;懐ightArrow;懔eåˊngĀLRΫτeftĀARγιrrow;柸ightArrow;柺ightArrow;柹ightĀATϘϞrrow;懒ee;抨pɁϩ\0\0ϯrrow;懑ownArrow;懕erticalBar;戥ǹABLRTaВЪаўѿͼrrowƀ;BUНОТ憓ar;椓pArrow;懵reve;䌑eft˒к\0ц\0ѐightVector;楐eeVector;楞ectorĀ;Bљњ憽ar;楖ightǔѧ\0ѱeeVector;楟ectorĀ;BѺѻ懁ar;楗eeĀ;A҆҇护rrow;憧ĀctҒҗr;쀀𝒟rok;䄐ࠀNTacdfglmopqstuxҽӀӄӋӞӢӧӮӵԡԯԶՒ՝ՠեG;䅊H耻Ð䃐cute耻É䃉ƀaiyӒӗӜron;䄚rc耻Ê䃊;䐭ot;䄖r;쀀𝔈rave耻È䃈ement;戈ĀapӺӾcr;䄒tyɓԆ\0\0ԒmallSquare;旻erySmallSquare;斫ĀgpԦԪon;䄘f;쀀𝔼silon;䎕uĀaiԼՉlĀ;TՂՃ橵ilde;扂librium;懌Āci՗՚r;愰m;橳a;䎗ml耻Ë䃋Āipժկsts;戃onentialE;慇ʀcfiosօֈ֍ֲ׌y;䐤r;쀀𝔉lledɓ֗\0\0֣mallSquare;旼erySmallSquare;斪Ͱֺ\0ֿ\0\0ׄf;쀀𝔽All;戀riertrf;愱cò׋؀JTabcdfgorstר׬ׯ׺؀ؒؖ؛؝أ٬ٲcy;䐃耻>䀾mmaĀ;d׷׸䎓;䏜reve;䄞ƀeiy؇،ؐdil;䄢rc;䄜;䐓ot;䄠r;쀀𝔊;拙pf;쀀𝔾eater̀EFGLSTصلَٖٛ٦qualĀ;Lؾؿ扥ess;招ullEqual;执reater;檢ess;扷lantEqual;橾ilde;扳cr;쀀𝒢;扫ЀAacfiosuڅڋږڛڞڪھۊRDcy;䐪Āctڐڔek;䋇;䁞irc;䄤r;愌lbertSpace;愋ǰگ\0ڲf;愍izontalLine;攀Āctۃۅòکrok;䄦mpńېۘownHumðįqual;扏܀EJOacdfgmnostuۺ۾܃܇܎ܚܞܡܨ݄ݸދޏޕcy;䐕lig;䄲cy;䐁cute耻Í䃍Āiyܓܘrc耻Î䃎;䐘ot;䄰r;愑rave耻Ì䃌ƀ;apܠܯܿĀcgܴܷr;䄪inaryI;慈lieóϝǴ݉\0ݢĀ;eݍݎ戬Āgrݓݘral;戫section;拂isibleĀCTݬݲomma;恣imes;恢ƀgptݿރވon;䄮f;쀀𝕀a;䎙cr;愐ilde;䄨ǫޚ\0ޞcy;䐆l耻Ï䃏ʀcfosuެ޷޼߂ߐĀiyޱ޵rc;䄴;䐙r;쀀𝔍pf;쀀𝕁ǣ߇\0ߌr;쀀𝒥rcy;䐈kcy;䐄΀HJacfosߤߨ߽߬߱ࠂࠈcy;䐥cy;䐌ppa;䎚Āey߶߻dil;䄶;䐚r;쀀𝔎pf;쀀𝕂cr;쀀𝒦րJTaceflmostࠥࠩࠬࡐࡣ঳সে্਷ੇcy;䐉耻<䀼ʀcmnpr࠷࠼ࡁࡄࡍute;䄹bda;䎛g;柪lacetrf;愒r;憞ƀaeyࡗ࡜ࡡron;䄽dil;䄻;䐛Āfsࡨ॰tԀACDFRTUVarࡾࢩࢱࣦ࣠ࣼयज़ΐ४Ānrࢃ࢏gleBracket;柨rowƀ;BR࢙࢚࢞憐ar;懤ightArrow;懆eiling;挈oǵࢷ\0ࣃbleBracket;柦nǔࣈ\0࣒eeVector;楡ectorĀ;Bࣛࣜ懃ar;楙loor;挊ightĀAV࣯ࣵrrow;憔ector;楎Āerँगeƀ;AVउऊऐ抣rrow;憤ector;楚iangleƀ;BEतथऩ抲ar;槏qual;抴pƀDTVषूौownVector;楑eeVector;楠ectorĀ;Bॖॗ憿ar;楘ectorĀ;B॥०憼ar;楒ightáΜs̀EFGLSTॾঋকঝঢভqualGreater;拚ullEqual;扦reater;扶ess;檡lantEqual;橽ilde;扲r;쀀𝔏Ā;eঽা拘ftarrow;懚idot;䄿ƀnpw৔ਖਛgȀLRlr৞৷ਂਐeftĀAR০৬rrow;柵ightArrow;柷ightArrow;柶eftĀarγਊightáοightáϊf;쀀𝕃erĀLRਢਬeftArrow;憙ightArrow;憘ƀchtਾੀੂòࡌ;憰rok;䅁;扪Ѐacefiosuਗ਼੝੠੷੼અઋ઎p;椅y;䐜Ādl੥੯iumSpace;恟lintrf;愳r;쀀𝔐nusPlus;戓pf;쀀𝕄cò੶;䎜ҀJacefostuણધભીଔଙඑ඗ඞcy;䐊cute;䅃ƀaey઴હાron;䅇dil;䅅;䐝ƀgswે૰଎ativeƀMTV૓૟૨ediumSpace;怋hiĀcn૦૘ë૙eryThiî૙tedĀGL૸ଆreaterGreateòٳessLesóੈLine;䀊r;쀀𝔑ȀBnptଢନଷ଺reak;恠BreakingSpace;䂠f;愕ڀ;CDEGHLNPRSTV୕ୖ୪୼஡௫ఄ౞಄ದ೘ൡඅ櫬Āou୛୤ngruent;扢pCap;扭oubleVerticalBar;戦ƀlqxஃஊ஛ement;戉ualĀ;Tஒஓ扠ilde;쀀≂̸ists;戄reater΀;EFGLSTஶஷ஽௉௓௘௥扯qual;扱ullEqual;쀀≧̸reater;쀀≫̸ess;批lantEqual;쀀⩾̸ilde;扵umpń௲௽ownHump;쀀≎̸qual;쀀≏̸eĀfsఊధtTriangleƀ;BEచఛడ拪ar;쀀⧏̸qual;括s̀;EGLSTవశ఼ౄోౘ扮qual;扰reater;扸ess;쀀≪̸lantEqual;쀀⩽̸ilde;扴estedĀGL౨౹reaterGreater;쀀⪢̸essLess;쀀⪡̸recedesƀ;ESಒಓಛ技qual;쀀⪯̸lantEqual;拠ĀeiಫಹverseElement;戌ghtTriangleƀ;BEೋೌ೒拫ar;쀀⧐̸qual;拭ĀquೝഌuareSuĀbp೨೹setĀ;E೰ೳ쀀⊏̸qual;拢ersetĀ;Eഃആ쀀⊐̸qual;拣ƀbcpഓതൎsetĀ;Eഛഞ쀀⊂⃒qual;抈ceedsȀ;ESTലള഻െ抁qual;쀀⪰̸lantEqual;拡ilde;쀀≿̸ersetĀ;E൘൛쀀⊃⃒qual;抉ildeȀ;EFT൮൯൵ൿ扁qual;扄ullEqual;扇ilde;扉erticalBar;戤cr;쀀𝒩ilde耻Ñ䃑;䎝܀Eacdfgmoprstuvලෂ෉෕ෛ෠෧෼ขภยา฿ไlig;䅒cute耻Ó䃓Āiy෎ීrc耻Ô䃔;䐞blac;䅐r;쀀𝔒rave耻Ò䃒ƀaei෮ෲ෶cr;䅌ga;䎩cron;䎟pf;쀀𝕆enCurlyĀDQฎบoubleQuote;怜uote;怘;橔Āclวฬr;쀀𝒪ash耻Ø䃘iŬื฼de耻Õ䃕es;樷ml耻Ö䃖erĀBP๋๠Āar๐๓r;怾acĀek๚๜;揞et;掴arenthesis;揜Ҁacfhilors๿ງຊຏຒດຝະ໼rtialD;戂y;䐟r;쀀𝔓i;䎦;䎠usMinus;䂱Āipຢອncareplanåڝf;愙Ȁ;eio຺ູ໠໤檻cedesȀ;EST່້໏໚扺qual;檯lantEqual;扼ilde;找me;怳Ādp໩໮uct;戏ortionĀ;aȥ໹l;戝Āci༁༆r;쀀𝒫;䎨ȀUfos༑༖༛༟OT耻"䀢r;쀀𝔔pf;愚cr;쀀𝒬؀BEacefhiorsu༾གྷཇའཱིྦྷྪྭ႖ႩႴႾarr;椐G耻®䂮ƀcnrཎནབute;䅔g;柫rĀ;tཛྷཝ憠l;椖ƀaeyཧཬཱron;䅘dil;䅖;䐠Ā;vླྀཹ愜erseĀEUྂྙĀlq྇ྎement;戋uilibrium;懋pEquilibrium;楯r»ཹo;䎡ghtЀACDFTUVa࿁࿫࿳ဢဨၛႇϘĀnr࿆࿒gleBracket;柩rowƀ;BL࿜࿝࿡憒ar;懥eftArrow;懄eiling;按oǵ࿹\0စbleBracket;柧nǔည\0နeeVector;楝ectorĀ;Bဝသ懂ar;楕loor;挋Āerိ၃eƀ;AVဵံြ抢rrow;憦ector;楛iangleƀ;BEၐၑၕ抳ar;槐qual;抵pƀDTVၣၮၸownVector;楏eeVector;楜ectorĀ;Bႂႃ憾ar;楔ectorĀ;B႑႒懀ar;楓Āpuႛ႞f;愝ndImplies;楰ightarrow;懛ĀchႹႼr;愛;憱leDelayed;槴ڀHOacfhimoqstuფჱჷჽᄙᄞᅑᅖᅡᅧᆵᆻᆿĀCcჩხHcy;䐩y;䐨FTcy;䐬cute;䅚ʀ;aeiyᄈᄉᄎᄓᄗ檼ron;䅠dil;䅞rc;䅜;䐡r;쀀𝔖ortȀDLRUᄪᄴᄾᅉownArrow»ОeftArrow»࢚ightArrow»࿝pArrow;憑gma;䎣allCircle;战pf;쀀𝕊ɲᅭ\0\0ᅰt;戚areȀ;ISUᅻᅼᆉᆯ斡ntersection;抓uĀbpᆏᆞsetĀ;Eᆗᆘ抏qual;抑ersetĀ;Eᆨᆩ抐qual;抒nion;抔cr;쀀𝒮ar;拆ȀbcmpᇈᇛሉላĀ;sᇍᇎ拐etĀ;Eᇍᇕqual;抆ĀchᇠህeedsȀ;ESTᇭᇮᇴᇿ扻qual;檰lantEqual;扽ilde;承Tháྌ;我ƀ;esሒሓሣ拑rsetĀ;Eሜም抃qual;抇et»ሓրHRSacfhiorsሾቄ቉ቕ቞ቱቶኟዂወዑORN耻Þ䃞ADE;愢ĀHc቎ቒcy;䐋y;䐦Ābuቚቜ;䀉;䎤ƀaeyብቪቯron;䅤dil;䅢;䐢r;쀀𝔗Āeiቻ኉ǲኀ\0ኇefore;戴a;䎘Ācn኎ኘkSpace;쀀  Space;怉ldeȀ;EFTካኬኲኼ戼qual;扃ullEqual;扅ilde;扈pf;쀀𝕋ipleDot;惛Āctዖዛr;쀀𝒯rok;䅦ૡዷጎጚጦ\0ጬጱ\0\0\0\0\0ጸጽ፷ᎅ\0᏿ᐄᐊᐐĀcrዻጁute耻Ú䃚rĀ;oጇገ憟cir;楉rǣጓ\0጖y;䐎ve;䅬Āiyጞጣrc耻Û䃛;䐣blac;䅰r;쀀𝔘rave耻Ù䃙acr;䅪Ādiፁ፩erĀBPፈ፝Āarፍፐr;䁟acĀekፗፙ;揟et;掵arenthesis;揝onĀ;P፰፱拃lus;抎Āgp፻፿on;䅲f;쀀𝕌ЀADETadps᎕ᎮᎸᏄϨᏒᏗᏳrrowƀ;BDᅐᎠᎤar;椒ownArrow;懅ownArrow;憕quilibrium;楮eeĀ;AᏋᏌ报rrow;憥ownáϳerĀLRᏞᏨeftArrow;憖ightArrow;憗iĀ;lᏹᏺ䏒on;䎥ing;䅮cr;쀀𝒰ilde;䅨ml耻Ü䃜ҀDbcdefosvᐧᐬᐰᐳᐾᒅᒊᒐᒖash;披ar;櫫y;䐒ashĀ;lᐻᐼ抩;櫦Āerᑃᑅ;拁ƀbtyᑌᑐᑺar;怖Ā;iᑏᑕcalȀBLSTᑡᑥᑪᑴar;戣ine;䁼eparator;杘ilde;所ThinSpace;怊r;쀀𝔙pf;쀀𝕍cr;쀀𝒱dash;抪ʀcefosᒧᒬᒱᒶᒼirc;䅴dge;拀r;쀀𝔚pf;쀀𝕎cr;쀀𝒲Ȁfiosᓋᓐᓒᓘr;쀀𝔛;䎞pf;쀀𝕏cr;쀀𝒳ҀAIUacfosuᓱᓵᓹᓽᔄᔏᔔᔚᔠcy;䐯cy;䐇cy;䐮cute耻Ý䃝Āiyᔉᔍrc;䅶;䐫r;쀀𝔜pf;쀀𝕐cr;쀀𝒴ml;䅸ЀHacdefosᔵᔹᔿᕋᕏᕝᕠᕤcy;䐖cute;䅹Āayᕄᕉron;䅽;䐗ot;䅻ǲᕔ\0ᕛoWidtè૙a;䎖r;愨pf;愤cr;쀀𝒵௡ᖃᖊᖐ\0ᖰᖶᖿ\0\0\0\0ᗆᗛᗫᙟ᙭\0ᚕ᚛ᚲᚹ\0ᚾcute耻á䃡reve;䄃̀;Ediuyᖜᖝᖡᖣᖨᖭ戾;쀀∾̳;房rc耻â䃢te肻´̆;䐰lig耻æ䃦Ā;r²ᖺ;쀀𝔞rave耻à䃠ĀepᗊᗖĀfpᗏᗔsym;愵èᗓha;䎱ĀapᗟcĀclᗤᗧr;䄁g;樿ɤᗰ\0\0ᘊʀ;adsvᗺᗻᗿᘁᘇ戧nd;橕;橜lope;橘;橚΀;elmrszᘘᘙᘛᘞᘿᙏᙙ戠;榤e»ᘙsdĀ;aᘥᘦ戡ѡᘰᘲᘴᘶᘸᘺᘼᘾ;榨;榩;榪;榫;榬;榭;榮;榯tĀ;vᙅᙆ戟bĀ;dᙌᙍ抾;榝Āptᙔᙗh;戢»¹arr;捼Āgpᙣᙧon;䄅f;쀀𝕒΀;Eaeiop዁ᙻᙽᚂᚄᚇᚊ;橰cir;橯;扊d;手s;䀧roxĀ;e዁ᚒñᚃing耻å䃥ƀctyᚡᚦᚨr;쀀𝒶;䀪mpĀ;e዁ᚯñʈilde耻ã䃣ml耻ä䃤Āciᛂᛈoninôɲnt;樑ࠀNabcdefiklnoprsu᛭ᛱᜰ᜼ᝃᝈ᝸᝽០៦ᠹᡐᜍ᤽᥈ᥰot;櫭Ācrᛶ᜞kȀcepsᜀᜅᜍᜓong;扌psilon;䏶rime;怵imĀ;e᜚᜛戽q;拍Ŷᜢᜦee;抽edĀ;gᜬᜭ挅e»ᜭrkĀ;t፜᜷brk;掶Āoyᜁᝁ;䐱quo;怞ʀcmprtᝓ᝛ᝡᝤᝨausĀ;eĊĉptyv;榰séᜌnoõēƀahwᝯ᝱ᝳ;䎲;愶een;扬r;쀀𝔟g΀costuvwឍឝឳេ៕៛៞ƀaiuបពរðݠrc;旯p»፱ƀdptឤឨឭot;樀lus;樁imes;樂ɱឹ\0\0ើcup;樆ar;昅riangleĀdu៍្own;施p;斳plus;樄eåᑄåᒭarow;植ƀako៭ᠦᠵĀcn៲ᠣkƀlst៺֫᠂ozenge;槫riangleȀ;dlr᠒᠓᠘᠝斴own;斾eft;旂ight;斸k;搣Ʊᠫ\0ᠳƲᠯ\0ᠱ;斒;斑4;斓ck;斈ĀeoᠾᡍĀ;qᡃᡆ쀀=⃥uiv;쀀≡⃥t;挐Ȁptwxᡙᡞᡧᡬf;쀀𝕓Ā;tᏋᡣom»Ꮜtie;拈؀DHUVbdhmptuvᢅᢖᢪᢻᣗᣛᣬ᣿ᤅᤊᤐᤡȀLRlrᢎᢐᢒᢔ;敗;敔;敖;敓ʀ;DUduᢡᢢᢤᢦᢨ敐;敦;敩;敤;敧ȀLRlrᢳᢵᢷᢹ;敝;敚;敜;教΀;HLRhlrᣊᣋᣍᣏᣑᣓᣕ救;敬;散;敠;敫;敢;敟ox;槉ȀLRlrᣤᣦᣨᣪ;敕;敒;攐;攌ʀ;DUduڽ᣷᣹᣻᣽;敥;敨;攬;攴inus;抟lus;択imes;抠ȀLRlrᤙᤛᤝ᤟;敛;敘;攘;攔΀;HLRhlrᤰᤱᤳᤵᤷ᤻᤹攂;敪;敡;敞;攼;攤;攜Āevģ᥂bar耻¦䂦Ȁceioᥑᥖᥚᥠr;쀀𝒷mi;恏mĀ;e᜚᜜lƀ;bhᥨᥩᥫ䁜;槅sub;柈Ŭᥴ᥾lĀ;e᥹᥺怢t»᥺pƀ;Eeįᦅᦇ;檮Ā;qۜۛೡᦧ\0᧨ᨑᨕᨲ\0ᨷᩐ\0\0᪴\0\0᫁\0\0ᬡᬮ᭍᭒\0᯽\0ᰌƀcpr᦭ᦲ᧝ute;䄇̀;abcdsᦿᧀᧄ᧊᧕᧙戩nd;橄rcup;橉Āau᧏᧒p;橋p;橇ot;橀;쀀∩︀Āeo᧢᧥t;恁îړȀaeiu᧰᧻ᨁᨅǰ᧵\0᧸s;橍on;䄍dil耻ç䃧rc;䄉psĀ;sᨌᨍ橌m;橐ot;䄋ƀdmnᨛᨠᨦil肻¸ƭptyv;榲t脀¢;eᨭᨮ䂢räƲr;쀀𝔠ƀceiᨽᩀᩍy;䑇ckĀ;mᩇᩈ朓ark»ᩈ;䏇r΀;Ecefms᩟᩠ᩢᩫ᪤᪪᪮旋;槃ƀ;elᩩᩪᩭ䋆q;扗eɡᩴ\0\0᪈rrowĀlr᩼᪁eft;憺ight;憻ʀRSacd᪒᪔᪖᪚᪟»ཇ;擈st;抛irc;抚ash;抝nint;樐id;櫯cir;槂ubsĀ;u᪻᪼晣it»᪼ˬ᫇᫔᫺\0ᬊonĀ;eᫍᫎ䀺Ā;qÇÆɭ᫙\0\0᫢aĀ;t᫞᫟䀬;䁀ƀ;fl᫨᫩᫫戁îᅠeĀmx᫱᫶ent»᫩eóɍǧ᫾\0ᬇĀ;dኻᬂot;橭nôɆƀfryᬐᬔᬗ;쀀𝕔oäɔ脀©;sŕᬝr;愗Āaoᬥᬩrr;憵ss;朗Ācuᬲᬷr;쀀𝒸Ābpᬼ᭄Ā;eᭁᭂ櫏;櫑Ā;eᭉᭊ櫐;櫒dot;拯΀delprvw᭠᭬᭷ᮂᮬᯔ᯹arrĀlr᭨᭪;椸;椵ɰ᭲\0\0᭵r;拞c;拟arrĀ;p᭿ᮀ憶;椽̀;bcdosᮏᮐᮖᮡᮥᮨ截rcap;橈Āauᮛᮞp;橆p;橊ot;抍r;橅;쀀∪︀Ȁalrv᮵ᮿᯞᯣrrĀ;mᮼᮽ憷;椼yƀevwᯇᯔᯘqɰᯎ\0\0ᯒreã᭳uã᭵ee;拎edge;拏en耻¤䂤earrowĀlrᯮ᯳eft»ᮀight»ᮽeäᯝĀciᰁᰇoninôǷnt;戱lcty;挭ঀAHabcdefhijlorstuwz᰸᰻᰿ᱝᱩᱵᲊᲞᲬᲷ᳻᳿ᴍᵻᶑᶫᶻ᷆᷍rò΁ar;楥Ȁglrs᱈ᱍ᱒᱔ger;怠eth;愸òᄳhĀ;vᱚᱛ怐»ऊūᱡᱧarow;椏aã̕Āayᱮᱳron;䄏;䐴ƀ;ao̲ᱼᲄĀgrʿᲁr;懊tseq;橷ƀglmᲑᲔᲘ耻°䂰ta;䎴ptyv;榱ĀirᲣᲨsht;楿;쀀𝔡arĀlrᲳᲵ»ࣜ»သʀaegsv᳂͸᳖᳜᳠mƀ;oș᳊᳔ndĀ;ș᳑uit;晦amma;䏝in;拲ƀ;io᳧᳨᳸䃷de脀÷;o᳧ᳰntimes;拇nø᳷cy;䑒cɯᴆ\0\0ᴊrn;挞op;挍ʀlptuwᴘᴝᴢᵉᵕlar;䀤f;쀀𝕕ʀ;emps̋ᴭᴷᴽᵂqĀ;d͒ᴳot;扑inus;戸lus;戔quare;抡blebarwedgåúnƀadhᄮᵝᵧownarrowóᲃarpoonĀlrᵲᵶefôᲴighôᲶŢᵿᶅkaro÷གɯᶊ\0\0ᶎrn;挟op;挌ƀcotᶘᶣᶦĀryᶝᶡ;쀀𝒹;䑕l;槶rok;䄑Ādrᶰᶴot;拱iĀ;fᶺ᠖斿Āah᷀᷃ròЩaòྦangle;榦Āci᷒ᷕy;䑟grarr;柿ऀDacdefglmnopqrstuxḁḉḙḸոḼṉṡṾấắẽỡἪἷὄ὎὚ĀDoḆᴴoôᲉĀcsḎḔute耻é䃩ter;橮ȀaioyḢḧḱḶron;䄛rĀ;cḭḮ扖耻ê䃪lon;払;䑍ot;䄗ĀDrṁṅot;扒;쀀𝔢ƀ;rsṐṑṗ檚ave耻è䃨Ā;dṜṝ檖ot;檘Ȁ;ilsṪṫṲṴ檙nters;揧;愓Ā;dṹṺ檕ot;檗ƀapsẅẉẗcr;䄓tyƀ;svẒẓẕ戅et»ẓpĀ1;ẝẤĳạả;怄;怅怃ĀgsẪẬ;䅋p;怂ĀgpẴẸon;䄙f;쀀𝕖ƀalsỄỎỒrĀ;sỊị拕l;槣us;橱iƀ;lvỚớở䎵on»ớ;䏵ȀcsuvỪỳἋἣĀioữḱrc»Ḯɩỹ\0\0ỻíՈantĀglἂἆtr»ṝess»Ṻƀaeiἒ἖Ἒls;䀽st;扟vĀ;DȵἠD;橸parsl;槥ĀDaἯἳot;打rr;楱ƀcdiἾὁỸr;愯oô͒ĀahὉὋ;䎷耻ð䃰Āmrὓὗl耻ë䃫o;悬ƀcipὡὤὧl;䀡sôծĀeoὬὴctatioîՙnentialåչৡᾒ\0ᾞ\0ᾡᾧ\0\0ῆῌ\0ΐ\0ῦῪ \0 ⁚llingdotseñṄy;䑄male;晀ƀilrᾭᾳ῁lig;耀ﬃɩᾹ\0\0᾽g;耀ﬀig;耀ﬄ;쀀𝔣lig;耀ﬁlig;쀀fjƀaltῙ῜ῡt;晭ig;耀ﬂns;斱of;䆒ǰ΅\0ῳf;쀀𝕗ĀakֿῷĀ;vῼ´拔;櫙artint;樍Āao‌⁕Ācs‑⁒α‚‰‸⁅⁈\0⁐β•‥‧‪‬\0‮耻½䂽;慓耻¼䂼;慕;慙;慛Ƴ‴\0‶;慔;慖ʴ‾⁁\0\0⁃耻¾䂾;慗;慜5;慘ƶ⁌\0⁎;慚;慝8;慞l;恄wn;挢cr;쀀𝒻ࢀEabcdefgijlnorstv₂₉₟₥₰₴⃰⃵⃺⃿℃ℒℸ̗ℾ⅒↞Ā;lٍ₇;檌ƀcmpₐₕ₝ute;䇵maĀ;dₜ᳚䎳;檆reve;䄟Āiy₪₮rc;䄝;䐳ot;䄡Ȁ;lqsؾق₽⃉ƀ;qsؾٌ⃄lanô٥Ȁ;cdl٥⃒⃥⃕c;檩otĀ;o⃜⃝檀Ā;l⃢⃣檂;檄Ā;e⃪⃭쀀⋛︀s;檔r;쀀𝔤Ā;gٳ؛mel;愷cy;䑓Ȁ;Eajٚℌℎℐ;檒;檥;檤ȀEaesℛℝ℩ℴ;扩pĀ;p℣ℤ檊rox»ℤĀ;q℮ℯ檈Ā;q℮ℛim;拧pf;쀀𝕘Āci⅃ⅆr;愊mƀ;el٫ⅎ⅐;檎;檐茀>;cdlqr׮ⅠⅪⅮⅳⅹĀciⅥⅧ;檧r;橺ot;拗Par;榕uest;橼ʀadelsↄⅪ←ٖ↛ǰ↉\0↎proø₞r;楸qĀlqؿ↖lesó₈ií٫Āen↣↭rtneqq;쀀≩︀Å↪ԀAabcefkosy⇄⇇⇱⇵⇺∘∝∯≨≽ròΠȀilmr⇐⇔⇗⇛rsðᒄf»․ilôکĀdr⇠⇤cy;䑊ƀ;cwࣴ⇫⇯ir;楈;憭ar;意irc;䄥ƀalr∁∎∓rtsĀ;u∉∊晥it»∊lip;怦con;抹r;쀀𝔥sĀew∣∩arow;椥arow;椦ʀamopr∺∾≃≞≣rr;懿tht;戻kĀlr≉≓eftarrow;憩ightarrow;憪f;쀀𝕙bar;怕ƀclt≯≴≸r;쀀𝒽asè⇴rok;䄧Ābp⊂⊇ull;恃hen»ᱛૡ⊣\0⊪\0⊸⋅⋎\0⋕⋳\0\0⋸⌢⍧⍢⍿\0⎆⎪⎴cute耻í䃭ƀ;iyݱ⊰⊵rc耻î䃮;䐸Ācx⊼⊿y;䐵cl耻¡䂡ĀfrΟ⋉;쀀𝔦rave耻ì䃬Ȁ;inoܾ⋝⋩⋮Āin⋢⋦nt;樌t;戭fin;槜ta;愩lig;䄳ƀaop⋾⌚⌝ƀcgt⌅⌈⌗r;䄫ƀelpܟ⌏⌓inåގarôܠh;䄱f;抷ed;䆵ʀ;cfotӴ⌬⌱⌽⍁are;愅inĀ;t⌸⌹戞ie;槝doô⌙ʀ;celpݗ⍌⍐⍛⍡al;抺Āgr⍕⍙eróᕣã⍍arhk;樗rod;樼Ȁcgpt⍯⍲⍶⍻y;䑑on;䄯f;쀀𝕚a;䎹uest耻¿䂿Āci⎊⎏r;쀀𝒾nʀ;EdsvӴ⎛⎝⎡ӳ;拹ot;拵Ā;v⎦⎧拴;拳Ā;iݷ⎮lde;䄩ǫ⎸\0⎼cy;䑖l耻ï䃯̀cfmosu⏌⏗⏜⏡⏧⏵Āiy⏑⏕rc;䄵;䐹r;쀀𝔧ath;䈷pf;쀀𝕛ǣ⏬\0⏱r;쀀𝒿rcy;䑘kcy;䑔Ѐacfghjos␋␖␢␧␭␱␵␻ppaĀ;v␓␔䎺;䏰Āey␛␠dil;䄷;䐺r;쀀𝔨reen;䄸cy;䑅cy;䑜pf;쀀𝕜cr;쀀𝓀஀ABEHabcdefghjlmnoprstuv⑰⒁⒆⒍⒑┎┽╚▀♎♞♥♹♽⚚⚲⛘❝❨➋⟀⠁⠒ƀart⑷⑺⑼rò৆òΕail;椛arr;椎Ā;gঔ⒋;檋ar;楢ॣ⒥\0⒪\0⒱\0\0\0\0\0⒵Ⓔ\0ⓆⓈⓍ\0⓹ute;䄺mptyv;榴raîࡌbda;䎻gƀ;dlࢎⓁⓃ;榑åࢎ;檅uo耻«䂫rЀ;bfhlpst࢙ⓞⓦⓩ⓫⓮⓱⓵Ā;f࢝ⓣs;椟s;椝ë≒p;憫l;椹im;楳l;憢ƀ;ae⓿─┄檫il;椙Ā;s┉┊檭;쀀⪭︀ƀabr┕┙┝rr;椌rk;杲Āak┢┬cĀek┨┪;䁻;䁛Āes┱┳;榋lĀdu┹┻;榏;榍Ȁaeuy╆╋╖╘ron;䄾Ādi═╔il;䄼ìࢰâ┩;䐻Ȁcqrs╣╦╭╽a;椶uoĀ;rนᝆĀdu╲╷har;楧shar;楋h;憲ʀ;fgqs▋▌উ◳◿扤tʀahlrt▘▤▷◂◨rrowĀ;t࢙□aé⓶arpoonĀdu▯▴own»њp»०eftarrows;懇ightƀahs◍◖◞rrowĀ;sࣴࢧarpoonó྘quigarro÷⇰hreetimes;拋ƀ;qs▋ও◺lanôবʀ;cdgsব☊☍☝☨c;檨otĀ;o☔☕橿Ā;r☚☛檁;檃Ā;e☢☥쀀⋚︀s;檓ʀadegs☳☹☽♉♋pproøⓆot;拖qĀgq♃♅ôউgtò⒌ôছiíলƀilr♕࣡♚sht;楼;쀀𝔩Ā;Eজ♣;檑š♩♶rĀdu▲♮Ā;l॥♳;楪lk;斄cy;䑙ʀ;achtੈ⚈⚋⚑⚖rò◁orneòᴈard;楫ri;旺Āio⚟⚤dot;䅀ustĀ;a⚬⚭掰che»⚭ȀEaes⚻⚽⛉⛔;扨pĀ;p⛃⛄檉rox»⛄Ā;q⛎⛏檇Ā;q⛎⚻im;拦Ѐabnoptwz⛩⛴⛷✚✯❁❇❐Ānr⛮⛱g;柬r;懽rëࣁgƀlmr⛿✍✔eftĀar০✇ightá৲apsto;柼ightá৽parrowĀlr✥✩efô⓭ight;憬ƀafl✶✹✽r;榅;쀀𝕝us;樭imes;樴š❋❏st;戗áፎƀ;ef❗❘᠀旊nge»❘arĀ;l❤❥䀨t;榓ʀachmt❳❶❼➅➇ròࢨorneòᶌarĀ;d྘➃;業;怎ri;抿̀achiqt➘➝ੀ➢➮➻quo;怹r;쀀𝓁mƀ;egল➪➬;檍;檏Ābu┪➳oĀ;rฟ➹;怚rok;䅂萀<;cdhilqrࠫ⟒☹⟜⟠⟥⟪⟰Āci⟗⟙;檦r;橹reå◲mes;拉arr;楶uest;橻ĀPi⟵⟹ar;榖ƀ;ef⠀भ᠛旃rĀdu⠇⠍shar;楊har;楦Āen⠗⠡rtneqq;쀀≨︀Å⠞܀Dacdefhilnopsu⡀⡅⢂⢎⢓⢠⢥⢨⣚⣢⣤ઃ⣳⤂Dot;戺Ȁclpr⡎⡒⡣⡽r耻¯䂯Āet⡗⡙;時Ā;e⡞⡟朠se»⡟Ā;sျ⡨toȀ;dluျ⡳⡷⡻owîҌefôएðᏑker;斮Āoy⢇⢌mma;権;䐼ash;怔asuredangle»ᘦr;쀀𝔪o;愧ƀcdn⢯⢴⣉ro耻µ䂵Ȁ;acdᑤ⢽⣀⣄sôᚧir;櫰ot肻·Ƶusƀ;bd⣒ᤃ⣓戒Ā;uᴼ⣘;横ţ⣞⣡p;櫛ò−ðઁĀdp⣩⣮els;抧f;쀀𝕞Āct⣸⣽r;쀀𝓂pos»ᖝƀ;lm⤉⤊⤍䎼timap;抸ఀGLRVabcdefghijlmoprstuvw⥂⥓⥾⦉⦘⧚⧩⨕⨚⩘⩝⪃⪕⪤⪨⬄⬇⭄⭿⮮ⰴⱧⱼ⳩Āgt⥇⥋;쀀⋙̸Ā;v⥐௏쀀≫⃒ƀelt⥚⥲⥶ftĀar⥡⥧rrow;懍ightarrow;懎;쀀⋘̸Ā;v⥻ే쀀≪⃒ightarrow;懏ĀDd⦎⦓ash;抯ash;抮ʀbcnpt⦣⦧⦬⦱⧌la»˞ute;䅄g;쀀∠⃒ʀ;Eiop඄⦼⧀⧅⧈;쀀⩰̸d;쀀≋̸s;䅉roø඄urĀ;a⧓⧔普lĀ;s⧓ସǳ⧟\0⧣p肻 ଷmpĀ;e௹ఀʀaeouy⧴⧾⨃⨐⨓ǰ⧹\0⧻;橃on;䅈dil;䅆ngĀ;dൾ⨊ot;쀀⩭̸p;橂;䐽ash;怓΀;Aadqsxஒ⨩⨭⨻⩁⩅⩐rr;懗rĀhr⨳⨶k;椤Ā;oᏲᏰot;쀀≐̸uiöୣĀei⩊⩎ar;椨í஘istĀ;s஠டr;쀀𝔫ȀEest௅⩦⩹⩼ƀ;qs஼⩭௡ƀ;qs஼௅⩴lanô௢ií௪Ā;rஶ⪁»ஷƀAap⪊⪍⪑rò⥱rr;憮ar;櫲ƀ;svྍ⪜ྌĀ;d⪡⪢拼;拺cy;䑚΀AEadest⪷⪺⪾⫂⫅⫶⫹rò⥦;쀀≦̸rr;憚r;急Ȁ;fqs఻⫎⫣⫯tĀar⫔⫙rro÷⫁ightarro÷⪐ƀ;qs఻⪺⫪lanôౕĀ;sౕ⫴»శiíౝĀ;rవ⫾iĀ;eచథiäඐĀpt⬌⬑f;쀀𝕟膀¬;in⬙⬚⬶䂬nȀ;Edvஉ⬤⬨⬮;쀀⋹̸ot;쀀⋵̸ǡஉ⬳⬵;拷;拶iĀ;vಸ⬼ǡಸ⭁⭃;拾;拽ƀaor⭋⭣⭩rȀ;ast୻⭕⭚⭟lleì୻l;쀀⫽⃥;쀀∂̸lint;樔ƀ;ceಒ⭰⭳uåಥĀ;cಘ⭸Ā;eಒ⭽ñಘȀAait⮈⮋⮝⮧rò⦈rrƀ;cw⮔⮕⮙憛;쀀⤳̸;쀀↝̸ghtarrow»⮕riĀ;eೋೖ΀chimpqu⮽⯍⯙⬄୸⯤⯯Ȁ;cerല⯆ഷ⯉uå൅;쀀𝓃ortɭ⬅\0\0⯖ará⭖mĀ;e൮⯟Ā;q൴൳suĀbp⯫⯭å೸åഋƀbcp⯶ⰑⰙȀ;Ees⯿ⰀഢⰄ抄;쀀⫅̸etĀ;eഛⰋqĀ;qണⰀcĀ;eലⰗñസȀ;EesⰢⰣൟⰧ抅;쀀⫆̸etĀ;e൘ⰮqĀ;qൠⰣȀgilrⰽⰿⱅⱇìௗlde耻ñ䃱çృiangleĀlrⱒⱜeftĀ;eచⱚñదightĀ;eೋⱥñ೗Ā;mⱬⱭ䎽ƀ;esⱴⱵⱹ䀣ro;愖p;怇ҀDHadgilrsⲏⲔⲙⲞⲣⲰⲶⳓⳣash;抭arr;椄p;쀀≍⃒ash;抬ĀetⲨⲬ;쀀≥⃒;쀀>⃒nfin;槞ƀAetⲽⳁⳅrr;椂;쀀≤⃒Ā;rⳊⳍ쀀<⃒ie;쀀⊴⃒ĀAtⳘⳜrr;椃rie;쀀⊵⃒im;쀀∼⃒ƀAan⳰⳴ⴂrr;懖rĀhr⳺⳽k;椣Ā;oᏧᏥear;椧ቓ᪕\0\0\0\0\0\0\0\0\0\0\0\0\0ⴭ\0ⴸⵈⵠⵥ⵲ⶄᬇ\0\0ⶍⶫ\0ⷈⷎ\0ⷜ⸙⸫⸾⹃Ācsⴱ᪗ute耻ó䃳ĀiyⴼⵅrĀ;c᪞ⵂ耻ô䃴;䐾ʀabios᪠ⵒⵗǈⵚlac;䅑v;樸old;榼lig;䅓Ācr⵩⵭ir;榿;쀀𝔬ͯ⵹\0\0⵼\0ⶂn;䋛ave耻ò䃲;槁Ābmⶈ෴ar;榵Ȁacitⶕ⶘ⶥⶨrò᪀Āir⶝ⶠr;榾oss;榻nå๒;槀ƀaeiⶱⶵⶹcr;䅍ga;䏉ƀcdnⷀⷅǍron;䎿;榶pf;쀀𝕠ƀaelⷔ⷗ǒr;榷rp;榹΀;adiosvⷪⷫⷮ⸈⸍⸐⸖戨rò᪆Ȁ;efmⷷⷸ⸂⸅橝rĀ;oⷾⷿ愴f»ⷿ耻ª䂪耻º䂺gof;抶r;橖lope;橗;橛ƀclo⸟⸡⸧ò⸁ash耻ø䃸l;折iŬⸯ⸴de耻õ䃵esĀ;aǛ⸺s;樶ml耻ö䃶bar;挽ૡ⹞\0⹽\0⺀⺝\0⺢⺹\0\0⻋ຜ\0⼓\0\0⼫⾼\0⿈rȀ;astЃ⹧⹲຅脀¶;l⹭⹮䂶leìЃɩ⹸\0\0⹻m;櫳;櫽y;䐿rʀcimpt⺋⺏⺓ᡥ⺗nt;䀥od;䀮il;怰enk;怱r;쀀𝔭ƀimo⺨⺰⺴Ā;v⺭⺮䏆;䏕maô੶ne;明ƀ;tv⺿⻀⻈䏀chfork»´;䏖Āau⻏⻟nĀck⻕⻝kĀ;h⇴⻛;愎ö⇴sҀ;abcdemst⻳⻴ᤈ⻹⻽⼄⼆⼊⼎䀫cir;樣ir;樢Āouᵀ⼂;樥;橲n肻±ຝim;樦wo;樧ƀipu⼙⼠⼥ntint;樕f;쀀𝕡nd耻£䂣Ԁ;Eaceinosu່⼿⽁⽄⽇⾁⾉⾒⽾⾶;檳p;檷uå໙Ā;c໎⽌̀;acens່⽙⽟⽦⽨⽾pproø⽃urlyeñ໙ñ໎ƀaes⽯⽶⽺pprox;檹qq;檵im;拨iíໟmeĀ;s⾈ຮ怲ƀEas⽸⾐⽺ð⽵ƀdfp໬⾙⾯ƀals⾠⾥⾪lar;挮ine;挒urf;挓Ā;t໻⾴ï໻rel;抰Āci⿀⿅r;쀀𝓅;䏈ncsp;怈̀fiopsu⿚⋢⿟⿥⿫⿱r;쀀𝔮pf;쀀𝕢rime;恗cr;쀀𝓆ƀaeo⿸〉〓tĀei⿾々rnionóڰnt;樖stĀ;e【】䀿ñἙô༔઀ABHabcdefhilmnoprstux぀けさすムㄎㄫㅇㅢㅲㆎ㈆㈕㈤㈩㉘㉮㉲㊐㊰㊷ƀartぇおがròႳòϝail;検aròᱥar;楤΀cdenqrtとふへみわゔヌĀeuねぱ;쀀∽̱te;䅕iãᅮmptyv;榳gȀ;del࿑らるろ;榒;榥å࿑uo耻»䂻rր;abcfhlpstw࿜ガクシスゼゾダッデナp;極Ā;f࿠ゴs;椠;椳s;椞ë≝ð✮l;楅im;楴l;憣;憝Āaiパフil;椚oĀ;nホボ戶aló༞ƀabrョリヮrò៥rk;杳ĀakンヽcĀekヹ・;䁽;䁝Āes㄂㄄;榌lĀduㄊㄌ;榎;榐Ȁaeuyㄗㄜㄧㄩron;䅙Ādiㄡㄥil;䅗ì࿲âヺ;䑀Ȁclqsㄴㄷㄽㅄa;椷dhar;楩uoĀ;rȎȍh;憳ƀacgㅎㅟངlȀ;ipsླྀㅘㅛႜnåႻarôྩt;断ƀilrㅩဣㅮsht;楽;쀀𝔯ĀaoㅷㆆrĀduㅽㅿ»ѻĀ;l႑ㆄ;楬Ā;vㆋㆌ䏁;䏱ƀgns㆕ㇹㇼht̀ahlrstㆤㆰ㇂㇘㇤㇮rrowĀ;t࿜ㆭaéトarpoonĀduㆻㆿowîㅾp»႒eftĀah㇊㇐rrowó࿪arpoonóՑightarrows;應quigarro÷ニhreetimes;拌g;䋚ingdotseñἲƀahm㈍㈐㈓rò࿪aòՑ;怏oustĀ;a㈞㈟掱che»㈟mid;櫮Ȁabpt㈲㈽㉀㉒Ānr㈷㈺g;柭r;懾rëဃƀafl㉇㉊㉎r;榆;쀀𝕣us;樮imes;樵Āap㉝㉧rĀ;g㉣㉤䀩t;榔olint;樒arò㇣Ȁachq㉻㊀Ⴜ㊅quo;怺r;쀀𝓇Ābu・㊊oĀ;rȔȓƀhir㊗㊛㊠reåㇸmes;拊iȀ;efl㊪ၙᠡ㊫方tri;槎luhar;楨;愞ൡ㋕㋛㋟㌬㌸㍱\0㍺㎤\0\0㏬㏰\0㐨㑈㑚㒭㒱㓊㓱\0㘖\0\0㘳cute;䅛quï➺Ԁ;Eaceinpsyᇭ㋳㋵㋿㌂㌋㌏㌟㌦㌩;檴ǰ㋺\0㋼;檸on;䅡uåᇾĀ;dᇳ㌇il;䅟rc;䅝ƀEas㌖㌘㌛;檶p;檺im;择olint;樓iíሄ;䑁otƀ;be㌴ᵇ㌵担;橦΀Aacmstx㍆㍊㍗㍛㍞㍣㍭rr;懘rĀhr㍐㍒ë∨Ā;oਸ਼਴t耻§䂧i;䀻war;椩mĀin㍩ðnuóñt;朶rĀ;o㍶⁕쀀𝔰Ȁacoy㎂㎆㎑㎠rp;景Āhy㎋㎏cy;䑉;䑈rtɭ㎙\0\0㎜iäᑤaraì⹯耻­䂭Āgm㎨㎴maƀ;fv㎱㎲㎲䏃;䏂Ѐ;deglnprካ㏅㏉㏎㏖㏞㏡㏦ot;橪Ā;q኱ኰĀ;E㏓㏔檞;檠Ā;E㏛㏜檝;檟e;扆lus;樤arr;楲aròᄽȀaeit㏸㐈㐏㐗Āls㏽㐄lsetmé㍪hp;樳parsl;槤Ādlᑣ㐔e;挣Ā;e㐜㐝檪Ā;s㐢㐣檬;쀀⪬︀ƀflp㐮㐳㑂tcy;䑌Ā;b㐸㐹䀯Ā;a㐾㐿槄r;挿f;쀀𝕤aĀdr㑍ЂesĀ;u㑔㑕晠it»㑕ƀcsu㑠㑹㒟Āau㑥㑯pĀ;sᆈ㑫;쀀⊓︀pĀ;sᆴ㑵;쀀⊔︀uĀbp㑿㒏ƀ;esᆗᆜ㒆etĀ;eᆗ㒍ñᆝƀ;esᆨᆭ㒖etĀ;eᆨ㒝ñᆮƀ;afᅻ㒦ְrť㒫ֱ»ᅼaròᅈȀcemt㒹㒾㓂㓅r;쀀𝓈tmîñiì㐕aræᆾĀar㓎㓕rĀ;f㓔ឿ昆Āan㓚㓭ightĀep㓣㓪psiloîỠhé⺯s»⡒ʀbcmnp㓻㕞ሉ㖋㖎Ҁ;Edemnprs㔎㔏㔑㔕㔞㔣㔬㔱㔶抂;櫅ot;檽Ā;dᇚ㔚ot;櫃ult;櫁ĀEe㔨㔪;櫋;把lus;檿arr;楹ƀeiu㔽㕒㕕tƀ;en㔎㕅㕋qĀ;qᇚ㔏eqĀ;q㔫㔨m;櫇Ābp㕚㕜;櫕;櫓c̀;acensᇭ㕬㕲㕹㕻㌦pproø㋺urlyeñᇾñᇳƀaes㖂㖈㌛pproø㌚qñ㌗g;晪ڀ123;Edehlmnps㖩㖬㖯ሜ㖲㖴㗀㗉㗕㗚㗟㗨㗭耻¹䂹耻²䂲耻³䂳;櫆Āos㖹㖼t;檾ub;櫘Ā;dሢ㗅ot;櫄sĀou㗏㗒l;柉b;櫗arr;楻ult;櫂ĀEe㗤㗦;櫌;抋lus;櫀ƀeiu㗴㘉㘌tƀ;enሜ㗼㘂qĀ;qሢ㖲eqĀ;q㗧㗤m;櫈Ābp㘑㘓;櫔;櫖ƀAan㘜㘠㘭rr;懙rĀhr㘦㘨ë∮Ā;oਫ਩war;椪lig耻ß䃟௡㙑㙝㙠ዎ㙳㙹\0㙾㛂\0\0\0\0\0㛛㜃\0㜉㝬\0\0\0㞇ɲ㙖\0\0㙛get;挖;䏄rë๟ƀaey㙦㙫㙰ron;䅥dil;䅣;䑂lrec;挕r;쀀𝔱Ȁeiko㚆㚝㚵㚼ǲ㚋\0㚑eĀ4fኄኁaƀ;sv㚘㚙㚛䎸ym;䏑Ācn㚢㚲kĀas㚨㚮pproø዁im»ኬsðኞĀas㚺㚮ð዁rn耻þ䃾Ǭ̟㛆⋧es膀×;bd㛏㛐㛘䃗Ā;aᤏ㛕r;樱;樰ƀeps㛡㛣㜀á⩍Ȁ;bcf҆㛬㛰㛴ot;挶ir;櫱Ā;o㛹㛼쀀𝕥rk;櫚á㍢rime;怴ƀaip㜏㜒㝤dåቈ΀adempst㜡㝍㝀㝑㝗㝜㝟ngleʀ;dlqr㜰㜱㜶㝀㝂斵own»ᶻeftĀ;e⠀㜾ñम;扜ightĀ;e㊪㝋ñၚot;旬inus;樺lus;樹b;槍ime;樻ezium;揢ƀcht㝲㝽㞁Āry㝷㝻;쀀𝓉;䑆cy;䑛rok;䅧Āio㞋㞎xô᝷headĀlr㞗㞠eftarro÷ࡏightarrow»ཝऀAHabcdfghlmoprstuw㟐㟓㟗㟤㟰㟼㠎㠜㠣㠴㡑㡝㡫㢩㣌㣒㣪㣶ròϭar;楣Ācr㟜㟢ute耻ú䃺òᅐrǣ㟪\0㟭y;䑞ve;䅭Āiy㟵㟺rc耻û䃻;䑃ƀabh㠃㠆㠋ròᎭlac;䅱aòᏃĀir㠓㠘sht;楾;쀀𝔲rave耻ù䃹š㠧㠱rĀlr㠬㠮»ॗ»ႃlk;斀Āct㠹㡍ɯ㠿\0\0㡊rnĀ;e㡅㡆挜r»㡆op;挏ri;旸Āal㡖㡚cr;䅫肻¨͉Āgp㡢㡦on;䅳f;쀀𝕦̀adhlsuᅋ㡸㡽፲㢑㢠ownáᎳarpoonĀlr㢈㢌efô㠭ighô㠯iƀ;hl㢙㢚㢜䏅»ᏺon»㢚parrows;懈ƀcit㢰㣄㣈ɯ㢶\0\0㣁rnĀ;e㢼㢽挝r»㢽op;挎ng;䅯ri;旹cr;쀀𝓊ƀdir㣙㣝㣢ot;拰lde;䅩iĀ;f㜰㣨»᠓Āam㣯㣲rò㢨l耻ü䃼angle;榧ހABDacdeflnoprsz㤜㤟㤩㤭㦵㦸㦽㧟㧤㧨㧳㧹㧽㨁㨠ròϷarĀ;v㤦㤧櫨;櫩asèϡĀnr㤲㤷grt;榜΀eknprst㓣㥆㥋㥒㥝㥤㦖appá␕othinçẖƀhir㓫⻈㥙opô⾵Ā;hᎷ㥢ïㆍĀiu㥩㥭gmá㎳Ābp㥲㦄setneqĀ;q㥽㦀쀀⊊︀;쀀⫋︀setneqĀ;q㦏㦒쀀⊋︀;쀀⫌︀Āhr㦛㦟etá㚜iangleĀlr㦪㦯eft»थight»ၑy;䐲ash»ံƀelr㧄㧒㧗ƀ;beⷪ㧋㧏ar;抻q;扚lip;拮Ābt㧜ᑨaòᑩr;쀀𝔳tré㦮suĀbp㧯㧱»ജ»൙pf;쀀𝕧roð໻tré㦴Ācu㨆㨋r;쀀𝓋Ābp㨐㨘nĀEe㦀㨖»㥾nĀEe㦒㨞»㦐igzag;榚΀cefoprs㨶㨻㩖㩛㩔㩡㩪irc;䅵Ādi㩀㩑Ābg㩅㩉ar;機eĀ;qᗺ㩏;扙erp;愘r;쀀𝔴pf;쀀𝕨Ā;eᑹ㩦atèᑹcr;쀀𝓌ૣណ㪇\0㪋\0㪐㪛\0\0㪝㪨㪫㪯\0\0㫃㫎\0㫘ៜ៟tré៑r;쀀𝔵ĀAa㪔㪗ròσrò৶;䎾ĀAa㪡㪤ròθrò৫að✓is;拻ƀdptឤ㪵㪾Āfl㪺ឩ;쀀𝕩imåឲĀAa㫇㫊ròώròਁĀcq㫒ីr;쀀𝓍Āpt៖㫜ré។Ѐacefiosu㫰㫽㬈㬌㬑㬕㬛㬡cĀuy㫶㫻te耻ý䃽;䑏Āiy㬂㬆rc;䅷;䑋n耻¥䂥r;쀀𝔶cy;䑗pf;쀀𝕪cr;쀀𝓎Ācm㬦㬩y;䑎l耻ÿ䃿Ԁacdefhiosw㭂㭈㭔㭘㭤㭩㭭㭴㭺㮀cute;䅺Āay㭍㭒ron;䅾;䐷ot;䅼Āet㭝㭡træᕟa;䎶r;쀀𝔷cy;䐶grarr;懝pf;쀀𝕫cr;쀀𝓏Ājn㮅㮇;怍j;怌'.split("").map(function(t){return t.charCodeAt(0)}));var lw={};Object.defineProperty(lw,"__esModule",{value:!0});lw.default=new Uint16Array("Ȁaglq	\x1Bɭ\0\0p;䀦os;䀧t;䀾t;䀼uot;䀢".split("").map(function(t){return t.charCodeAt(0)}));var E_={};(function(t){var e;Object.defineProperty(t,"__esModule",{value:!0}),t.replaceCodePoint=t.fromCodePoint=void 0;var r=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);t.fromCodePoint=(e=String.fromCodePoint)!==null&&e!==void 0?e:function(s){var a="";return s>65535&&(s-=65536,a+=String.fromCharCode(s>>>10&1023|55296),s=56320|s&1023),a+=String.fromCharCode(s),a};function n(s){var a;return s>=55296&&s<=57343||s>1114111?65533:(a=r.get(s))!==null&&a!==void 0?a:s}t.replaceCodePoint=n;function i(s){return(0,t.fromCodePoint)(n(s))}t.default=i})(E_);(function(t){var e=we&&we.__createBinding||(Object.create?function(C,N,P,V){V===void 0&&(V=P);var M=Object.getOwnPropertyDescriptor(N,P);(!M||("get"in M?!N.__esModule:M.writable||M.configurable))&&(M={enumerable:!0,get:function(){return N[P]}}),Object.defineProperty(C,V,M)}:function(C,N,P,V){V===void 0&&(V=P),C[V]=N[P]}),r=we&&we.__setModuleDefault||(Object.create?function(C,N){Object.defineProperty(C,"default",{enumerable:!0,value:N})}:function(C,N){C.default=N}),n=we&&we.__importStar||function(C){if(C&&C.__esModule)return C;var N={};if(C!=null)for(var P in C)P!=="default"&&Object.prototype.hasOwnProperty.call(C,P)&&e(N,C,P);return r(N,C),N},i=we&&we.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(t,"__esModule",{value:!0}),t.decodeXML=t.decodeHTMLStrict=t.decodeHTMLAttribute=t.decodeHTML=t.determineBranch=t.EntityDecoder=t.DecodingMode=t.BinTrieFlags=t.fromCodePoint=t.replaceCodePoint=t.decodeCodePoint=t.xmlDecodeTree=t.htmlDecodeTree=void 0;var s=i(ow);t.htmlDecodeTree=s.default;var a=i(lw);t.xmlDecodeTree=a.default;var o=n(E_);t.decodeCodePoint=o.default;var l=E_;Object.defineProperty(t,"replaceCodePoint",{enumerable:!0,get:function(){return l.replaceCodePoint}}),Object.defineProperty(t,"fromCodePoint",{enumerable:!0,get:function(){return l.fromCodePoint}});var u;(function(C){C[C.NUM=35]="NUM",C[C.SEMI=59]="SEMI",C[C.EQUALS=61]="EQUALS",C[C.ZERO=48]="ZERO",C[C.NINE=57]="NINE",C[C.LOWER_A=97]="LOWER_A",C[C.LOWER_F=102]="LOWER_F",C[C.LOWER_X=120]="LOWER_X",C[C.LOWER_Z=122]="LOWER_Z",C[C.UPPER_A=65]="UPPER_A",C[C.UPPER_F=70]="UPPER_F",C[C.UPPER_Z=90]="UPPER_Z"})(u||(u={}));var c=32,d;(function(C){C[C.VALUE_LENGTH=49152]="VALUE_LENGTH",C[C.BRANCH_LENGTH=16256]="BRANCH_LENGTH",C[C.JUMP_TABLE=127]="JUMP_TABLE"})(d=t.BinTrieFlags||(t.BinTrieFlags={}));function h(C){return C>=u.ZERO&&C<=u.NINE}function f(C){return C>=u.UPPER_A&&C<=u.UPPER_F||C>=u.LOWER_A&&C<=u.LOWER_F}function p(C){return C>=u.UPPER_A&&C<=u.UPPER_Z||C>=u.LOWER_A&&C<=u.LOWER_Z||h(C)}function m(C){return C===u.EQUALS||p(C)}var g;(function(C){C[C.EntityStart=0]="EntityStart",C[C.NumericStart=1]="NumericStart",C[C.NumericDecimal=2]="NumericDecimal",C[C.NumericHex=3]="NumericHex",C[C.NamedEntity=4]="NamedEntity"})(g||(g={}));var v;(function(C){C[C.Legacy=0]="Legacy",C[C.Strict=1]="Strict",C[C.Attribute=2]="Attribute"})(v=t.DecodingMode||(t.DecodingMode={}));var b=function(){function C(N,P,V){this.decodeTree=N,this.emitCodePoint=P,this.errors=V,this.state=g.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=v.Strict}return C.prototype.startEntity=function(N){this.decodeMode=N,this.state=g.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},C.prototype.write=function(N,P){switch(this.state){case g.EntityStart:return N.charCodeAt(P)===u.NUM?(this.state=g.NumericStart,this.consumed+=1,this.stateNumericStart(N,P+1)):(this.state=g.NamedEntity,this.stateNamedEntity(N,P));case g.NumericStart:return this.stateNumericStart(N,P);case g.NumericDecimal:return this.stateNumericDecimal(N,P);case g.NumericHex:return this.stateNumericHex(N,P);case g.NamedEntity:return this.stateNamedEntity(N,P)}},C.prototype.stateNumericStart=function(N,P){return P>=N.length?-1:(N.charCodeAt(P)|c)===u.LOWER_X?(this.state=g.NumericHex,this.consumed+=1,this.stateNumericHex(N,P+1)):(this.state=g.NumericDecimal,this.stateNumericDecimal(N,P))},C.prototype.addToNumericResult=function(N,P,V,M){if(P!==V){var U=V-P;this.result=this.result*Math.pow(M,U)+parseInt(N.substr(P,U),M),this.consumed+=U}},C.prototype.stateNumericHex=function(N,P){for(var V=P;P<N.length;){var M=N.charCodeAt(P);if(h(M)||f(M))P+=1;else return this.addToNumericResult(N,V,P,16),this.emitNumericEntity(M,3)}return this.addToNumericResult(N,V,P,16),-1},C.prototype.stateNumericDecimal=function(N,P){for(var V=P;P<N.length;){var M=N.charCodeAt(P);if(h(M))P+=1;else return this.addToNumericResult(N,V,P,10),this.emitNumericEntity(M,2)}return this.addToNumericResult(N,V,P,10),-1},C.prototype.emitNumericEntity=function(N,P){var V;if(this.consumed<=P)return(V=this.errors)===null||V===void 0||V.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(N===u.SEMI)this.consumed+=1;else if(this.decodeMode===v.Strict)return 0;return this.emitCodePoint((0,o.replaceCodePoint)(this.result),this.consumed),this.errors&&(N!==u.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},C.prototype.stateNamedEntity=function(N,P){for(var V=this.decodeTree,M=V[this.treeIndex],U=(M&d.VALUE_LENGTH)>>14;P<N.length;P++,this.excess++){var B=N.charCodeAt(P);if(this.treeIndex=T(V,M,this.treeIndex+Math.max(1,U),B),this.treeIndex<0)return this.result===0||this.decodeMode===v.Attribute&&(U===0||m(B))?0:this.emitNotTerminatedNamedEntity();if(M=V[this.treeIndex],U=(M&d.VALUE_LENGTH)>>14,U!==0){if(B===u.SEMI)return this.emitNamedEntityData(this.treeIndex,U,this.consumed+this.excess);this.decodeMode!==v.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1},C.prototype.emitNotTerminatedNamedEntity=function(){var N,P=this,V=P.result,M=P.decodeTree,U=(M[V]&d.VALUE_LENGTH)>>14;return this.emitNamedEntityData(V,U,this.consumed),(N=this.errors)===null||N===void 0||N.missingSemicolonAfterCharacterReference(),this.consumed},C.prototype.emitNamedEntityData=function(N,P,V){var M=this.decodeTree;return this.emitCodePoint(P===1?M[N]&~d.VALUE_LENGTH:M[N+1],V),P===3&&this.emitCodePoint(M[N+2],V),V},C.prototype.end=function(){var N;switch(this.state){case g.NamedEntity:return this.result!==0&&(this.decodeMode!==v.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case g.NumericDecimal:return this.emitNumericEntity(0,2);case g.NumericHex:return this.emitNumericEntity(0,3);case g.NumericStart:return(N=this.errors)===null||N===void 0||N.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case g.EntityStart:return 0}},C}();t.EntityDecoder=b;function y(C){var N="",P=new b(C,function(V){return N+=(0,o.fromCodePoint)(V)});return function(M,U){for(var B=0,X=0;(X=M.indexOf("&",X))>=0;){N+=M.slice(B,X),P.startEntity(U);var te=P.write(M,X+1);if(te<0){B=X+P.end();break}B=X+te,X=te===0?B+1:B}var D=N+M.slice(B);return N="",D}}function T(C,N,P,V){var M=(N&d.BRANCH_LENGTH)>>7,U=N&d.JUMP_TABLE;if(M===0)return U!==0&&V===U?P:-1;if(U){var B=V-U;return B<0||B>=M?-1:C[P+B]-1}for(var X=P,te=X+M-1;X<=te;){var D=X+te>>>1,L=C[D];if(L<V)X=D+1;else if(L>V)te=D-1;else return C[D+M]}return-1}t.determineBranch=T;var x=y(s.default),_=y(a.default);function S(C,N){return N===void 0&&(N=v.Legacy),x(C,N)}t.decodeHTML=S;function A(C){return x(C,v.Attribute)}t.decodeHTMLAttribute=A;function k(C){return x(C,v.Strict)}t.decodeHTMLStrict=k;function I(C){return _(C,v.Strict)}t.decodeXML=I})(Dh);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.QuoteType=void 0;var e=Dh,r;(function(h){h[h.Tab=9]="Tab",h[h.NewLine=10]="NewLine",h[h.FormFeed=12]="FormFeed",h[h.CarriageReturn=13]="CarriageReturn",h[h.Space=32]="Space",h[h.ExclamationMark=33]="ExclamationMark",h[h.Number=35]="Number",h[h.Amp=38]="Amp",h[h.SingleQuote=39]="SingleQuote",h[h.DoubleQuote=34]="DoubleQuote",h[h.Dash=45]="Dash",h[h.Slash=47]="Slash",h[h.Zero=48]="Zero",h[h.Nine=57]="Nine",h[h.Semi=59]="Semi",h[h.Lt=60]="Lt",h[h.Eq=61]="Eq",h[h.Gt=62]="Gt",h[h.Questionmark=63]="Questionmark",h[h.UpperA=65]="UpperA",h[h.LowerA=97]="LowerA",h[h.UpperF=70]="UpperF",h[h.LowerF=102]="LowerF",h[h.UpperZ=90]="UpperZ",h[h.LowerZ=122]="LowerZ",h[h.LowerX=120]="LowerX",h[h.OpeningSquareBracket=91]="OpeningSquareBracket"})(r||(r={}));var n;(function(h){h[h.Text=1]="Text",h[h.BeforeTagName=2]="BeforeTagName",h[h.InTagName=3]="InTagName",h[h.InSelfClosingTag=4]="InSelfClosingTag",h[h.BeforeClosingTagName=5]="BeforeClosingTagName",h[h.InClosingTagName=6]="InClosingTagName",h[h.AfterClosingTagName=7]="AfterClosingTagName",h[h.BeforeAttributeName=8]="BeforeAttributeName",h[h.InAttributeName=9]="InAttributeName",h[h.AfterAttributeName=10]="AfterAttributeName",h[h.BeforeAttributeValue=11]="BeforeAttributeValue",h[h.InAttributeValueDq=12]="InAttributeValueDq",h[h.InAttributeValueSq=13]="InAttributeValueSq",h[h.InAttributeValueNq=14]="InAttributeValueNq",h[h.BeforeDeclaration=15]="BeforeDeclaration",h[h.InDeclaration=16]="InDeclaration",h[h.InProcessingInstruction=17]="InProcessingInstruction",h[h.BeforeComment=18]="BeforeComment",h[h.CDATASequence=19]="CDATASequence",h[h.InSpecialComment=20]="InSpecialComment",h[h.InCommentLike=21]="InCommentLike",h[h.BeforeSpecialS=22]="BeforeSpecialS",h[h.SpecialStartSequence=23]="SpecialStartSequence",h[h.InSpecialTag=24]="InSpecialTag",h[h.BeforeEntity=25]="BeforeEntity",h[h.BeforeNumericEntity=26]="BeforeNumericEntity",h[h.InNamedEntity=27]="InNamedEntity",h[h.InNumericEntity=28]="InNumericEntity",h[h.InHexEntity=29]="InHexEntity"})(n||(n={}));function i(h){return h===r.Space||h===r.NewLine||h===r.Tab||h===r.FormFeed||h===r.CarriageReturn}function s(h){return h===r.Slash||h===r.Gt||i(h)}function a(h){return h>=r.Zero&&h<=r.Nine}function o(h){return h>=r.LowerA&&h<=r.LowerZ||h>=r.UpperA&&h<=r.UpperZ}function l(h){return h>=r.UpperA&&h<=r.UpperF||h>=r.LowerA&&h<=r.LowerF}var u;(function(h){h[h.NoValue=0]="NoValue",h[h.Unquoted=1]="Unquoted",h[h.Single=2]="Single",h[h.Double=3]="Double"})(u=t.QuoteType||(t.QuoteType={}));var c={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])},d=function(){function h(f,p){var m=f.xmlMode,g=m===void 0?!1:m,v=f.decodeEntities,b=v===void 0?!0:v;this.cbs=p,this.state=n.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=n.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=g,this.decodeEntities=b,this.entityTrie=g?e.xmlDecodeTree:e.htmlDecodeTree}return h.prototype.reset=function(){this.state=n.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=n.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},h.prototype.write=function(f){this.offset+=this.buffer.length,this.buffer=f,this.parse()},h.prototype.end=function(){this.running&&this.finish()},h.prototype.pause=function(){this.running=!1},h.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},h.prototype.getIndex=function(){return this.index},h.prototype.getSectionStart=function(){return this.sectionStart},h.prototype.stateText=function(f){f===r.Lt||!this.decodeEntities&&this.fastForwardTo(r.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=n.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&f===r.Amp&&(this.state=n.BeforeEntity)},h.prototype.stateSpecialStartSequence=function(f){var p=this.sequenceIndex===this.currentSequence.length,m=p?s(f):(f|32)===this.currentSequence[this.sequenceIndex];if(!m)this.isSpecial=!1;else if(!p){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=n.InTagName,this.stateInTagName(f)},h.prototype.stateInSpecialTag=function(f){if(this.sequenceIndex===this.currentSequence.length){if(f===r.Gt||i(f)){var p=this.index-this.currentSequence.length;if(this.sectionStart<p){var m=this.index;this.index=p,this.cbs.ontext(this.sectionStart,p),this.index=m}this.isSpecial=!1,this.sectionStart=p+2,this.stateInClosingTagName(f);return}this.sequenceIndex=0}(f|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===c.TitleEnd?this.decodeEntities&&f===r.Amp&&(this.state=n.BeforeEntity):this.fastForwardTo(r.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(f===r.Lt)},h.prototype.stateCDATASequence=function(f){f===c.Cdata[this.sequenceIndex]?++this.sequenceIndex===c.Cdata.length&&(this.state=n.InCommentLike,this.currentSequence=c.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=n.InDeclaration,this.stateInDeclaration(f))},h.prototype.fastForwardTo=function(f){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===f)return!0;return this.index=this.buffer.length+this.offset-1,!1},h.prototype.stateInCommentLike=function(f){f===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===c.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=n.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):f!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},h.prototype.isTagStartChar=function(f){return this.xmlMode?!s(f):o(f)},h.prototype.startSpecial=function(f,p){this.isSpecial=!0,this.currentSequence=f,this.sequenceIndex=p,this.state=n.SpecialStartSequence},h.prototype.stateBeforeTagName=function(f){if(f===r.ExclamationMark)this.state=n.BeforeDeclaration,this.sectionStart=this.index+1;else if(f===r.Questionmark)this.state=n.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(f)){var p=f|32;this.sectionStart=this.index,!this.xmlMode&&p===c.TitleEnd[2]?this.startSpecial(c.TitleEnd,3):this.state=!this.xmlMode&&p===c.ScriptEnd[2]?n.BeforeSpecialS:n.InTagName}else f===r.Slash?this.state=n.BeforeClosingTagName:(this.state=n.Text,this.stateText(f))},h.prototype.stateInTagName=function(f){s(f)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(f))},h.prototype.stateBeforeClosingTagName=function(f){i(f)||(f===r.Gt?this.state=n.Text:(this.state=this.isTagStartChar(f)?n.InClosingTagName:n.InSpecialComment,this.sectionStart=this.index))},h.prototype.stateInClosingTagName=function(f){(f===r.Gt||i(f))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.AfterClosingTagName,this.stateAfterClosingTagName(f))},h.prototype.stateAfterClosingTagName=function(f){(f===r.Gt||this.fastForwardTo(r.Gt))&&(this.state=n.Text,this.baseState=n.Text,this.sectionStart=this.index+1)},h.prototype.stateBeforeAttributeName=function(f){f===r.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=n.InSpecialTag,this.sequenceIndex=0):this.state=n.Text,this.baseState=this.state,this.sectionStart=this.index+1):f===r.Slash?this.state=n.InSelfClosingTag:i(f)||(this.state=n.InAttributeName,this.sectionStart=this.index)},h.prototype.stateInSelfClosingTag=function(f){f===r.Gt?(this.cbs.onselfclosingtag(this.index),this.state=n.Text,this.baseState=n.Text,this.sectionStart=this.index+1,this.isSpecial=!1):i(f)||(this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(f))},h.prototype.stateInAttributeName=function(f){(f===r.Eq||s(f))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.AfterAttributeName,this.stateAfterAttributeName(f))},h.prototype.stateAfterAttributeName=function(f){f===r.Eq?this.state=n.BeforeAttributeValue:f===r.Slash||f===r.Gt?(this.cbs.onattribend(u.NoValue,this.index),this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(f)):i(f)||(this.cbs.onattribend(u.NoValue,this.index),this.state=n.InAttributeName,this.sectionStart=this.index)},h.prototype.stateBeforeAttributeValue=function(f){f===r.DoubleQuote?(this.state=n.InAttributeValueDq,this.sectionStart=this.index+1):f===r.SingleQuote?(this.state=n.InAttributeValueSq,this.sectionStart=this.index+1):i(f)||(this.sectionStart=this.index,this.state=n.InAttributeValueNq,this.stateInAttributeValueNoQuotes(f))},h.prototype.handleInAttributeValue=function(f,p){f===p||!this.decodeEntities&&this.fastForwardTo(p)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(p===r.DoubleQuote?u.Double:u.Single,this.index),this.state=n.BeforeAttributeName):this.decodeEntities&&f===r.Amp&&(this.baseState=this.state,this.state=n.BeforeEntity)},h.prototype.stateInAttributeValueDoubleQuotes=function(f){this.handleInAttributeValue(f,r.DoubleQuote)},h.prototype.stateInAttributeValueSingleQuotes=function(f){this.handleInAttributeValue(f,r.SingleQuote)},h.prototype.stateInAttributeValueNoQuotes=function(f){i(f)||f===r.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(u.Unquoted,this.index),this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(f)):this.decodeEntities&&f===r.Amp&&(this.baseState=this.state,this.state=n.BeforeEntity)},h.prototype.stateBeforeDeclaration=function(f){f===r.OpeningSquareBracket?(this.state=n.CDATASequence,this.sequenceIndex=0):this.state=f===r.Dash?n.BeforeComment:n.InDeclaration},h.prototype.stateInDeclaration=function(f){(f===r.Gt||this.fastForwardTo(r.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=n.Text,this.sectionStart=this.index+1)},h.prototype.stateInProcessingInstruction=function(f){(f===r.Gt||this.fastForwardTo(r.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=n.Text,this.sectionStart=this.index+1)},h.prototype.stateBeforeComment=function(f){f===r.Dash?(this.state=n.InCommentLike,this.currentSequence=c.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=n.InDeclaration},h.prototype.stateInSpecialComment=function(f){(f===r.Gt||this.fastForwardTo(r.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=n.Text,this.sectionStart=this.index+1)},h.prototype.stateBeforeSpecialS=function(f){var p=f|32;p===c.ScriptEnd[3]?this.startSpecial(c.ScriptEnd,4):p===c.StyleEnd[3]?this.startSpecial(c.StyleEnd,4):(this.state=n.InTagName,this.stateInTagName(f))},h.prototype.stateBeforeEntity=function(f){this.entityExcess=1,this.entityResult=0,f===r.Number?this.state=n.BeforeNumericEntity:f===r.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=n.InNamedEntity,this.stateInNamedEntity(f))},h.prototype.stateInNamedEntity=function(f){if(this.entityExcess+=1,this.trieIndex=(0,e.determineBranch)(this.entityTrie,this.trieCurrent,this.trieIndex+1,f),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];var p=this.trieCurrent&e.BinTrieFlags.VALUE_LENGTH;if(p){var m=(p>>14)-1;if(!this.allowLegacyEntity()&&f!==r.Semi)this.trieIndex+=m;else{var g=this.index-this.entityExcess+1;g>this.sectionStart&&this.emitPartial(this.sectionStart,g),this.entityResult=this.trieIndex,this.trieIndex+=m,this.entityExcess=0,this.sectionStart=this.index+1,m===0&&this.emitNamedEntity()}}},h.prototype.emitNamedEntity=function(){if(this.state=this.baseState,this.entityResult!==0){var f=(this.entityTrie[this.entityResult]&e.BinTrieFlags.VALUE_LENGTH)>>14;switch(f){case 1:{this.emitCodePoint(this.entityTrie[this.entityResult]&~e.BinTrieFlags.VALUE_LENGTH);break}case 2:{this.emitCodePoint(this.entityTrie[this.entityResult+1]);break}case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}},h.prototype.stateBeforeNumericEntity=function(f){(f|32)===r.LowerX?(this.entityExcess++,this.state=n.InHexEntity):(this.state=n.InNumericEntity,this.stateInNumericEntity(f))},h.prototype.emitNumericEntity=function(f){var p=this.index-this.entityExcess-1,m=p+2+ +(this.state===n.InHexEntity);m!==this.index&&(p>this.sectionStart&&this.emitPartial(this.sectionStart,p),this.sectionStart=this.index+Number(f),this.emitCodePoint((0,e.replaceCodePoint)(this.entityResult))),this.state=this.baseState},h.prototype.stateInNumericEntity=function(f){f===r.Semi?this.emitNumericEntity(!0):a(f)?(this.entityResult=this.entityResult*10+(f-r.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},h.prototype.stateInHexEntity=function(f){f===r.Semi?this.emitNumericEntity(!0):a(f)?(this.entityResult=this.entityResult*16+(f-r.Zero),this.entityExcess++):l(f)?(this.entityResult=this.entityResult*16+((f|32)-r.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},h.prototype.allowLegacyEntity=function(){return!this.xmlMode&&(this.baseState===n.Text||this.baseState===n.InSpecialTag)},h.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===n.Text||this.state===n.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===n.InAttributeValueDq||this.state===n.InAttributeValueSq||this.state===n.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},h.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},h.prototype.parse=function(){for(;this.shouldContinue();){var f=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case n.Text:{this.stateText(f);break}case n.SpecialStartSequence:{this.stateSpecialStartSequence(f);break}case n.InSpecialTag:{this.stateInSpecialTag(f);break}case n.CDATASequence:{this.stateCDATASequence(f);break}case n.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(f);break}case n.InAttributeName:{this.stateInAttributeName(f);break}case n.InCommentLike:{this.stateInCommentLike(f);break}case n.InSpecialComment:{this.stateInSpecialComment(f);break}case n.BeforeAttributeName:{this.stateBeforeAttributeName(f);break}case n.InTagName:{this.stateInTagName(f);break}case n.InClosingTagName:{this.stateInClosingTagName(f);break}case n.BeforeTagName:{this.stateBeforeTagName(f);break}case n.AfterAttributeName:{this.stateAfterAttributeName(f);break}case n.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(f);break}case n.BeforeAttributeValue:{this.stateBeforeAttributeValue(f);break}case n.BeforeClosingTagName:{this.stateBeforeClosingTagName(f);break}case n.AfterClosingTagName:{this.stateAfterClosingTagName(f);break}case n.BeforeSpecialS:{this.stateBeforeSpecialS(f);break}case n.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(f);break}case n.InSelfClosingTag:{this.stateInSelfClosingTag(f);break}case n.InDeclaration:{this.stateInDeclaration(f);break}case n.BeforeDeclaration:{this.stateBeforeDeclaration(f);break}case n.BeforeComment:{this.stateBeforeComment(f);break}case n.InProcessingInstruction:{this.stateInProcessingInstruction(f);break}case n.InNamedEntity:{this.stateInNamedEntity(f);break}case n.BeforeEntity:{this.stateBeforeEntity(f);break}case n.InHexEntity:{this.stateInHexEntity(f);break}case n.InNumericEntity:{this.stateInNumericEntity(f);break}default:this.stateBeforeNumericEntity(f)}this.index++}this.cleanup()},h.prototype.finish=function(){this.state===n.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()},h.prototype.handleTrailingData=function(){var f=this.buffer.length+this.offset;this.state===n.InCommentLike?this.currentSequence===c.CdataEnd?this.cbs.oncdata(this.sectionStart,f,0):this.cbs.oncomment(this.sectionStart,f,0):this.state===n.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===n.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===n.InTagName||this.state===n.BeforeAttributeName||this.state===n.BeforeAttributeValue||this.state===n.AfterAttributeName||this.state===n.InAttributeName||this.state===n.InAttributeValueSq||this.state===n.InAttributeValueDq||this.state===n.InAttributeValueNq||this.state===n.InClosingTagName||this.cbs.ontext(this.sectionStart,f)},h.prototype.emitPartial=function(f,p){this.baseState!==n.Text&&this.baseState!==n.InSpecialTag?this.cbs.onattribdata(f,p):this.cbs.ontext(f,p)},h.prototype.emitCodePoint=function(f){this.baseState!==n.Text&&this.baseState!==n.InSpecialTag?this.cbs.onattribentity(f):this.cbs.ontextentity(f)},h}();t.default=d})(aw);var D0e=we&&we.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),O0e=we&&we.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),M0e=we&&we.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&D0e(e,t,r);return O0e(e,t),e};Object.defineProperty(Lh,"__esModule",{value:!0});Lh.Parser=void 0;var m0=M0e(aw),OL=Dh,Hl=new Set(["input","option","optgroup","select","button","datalist","textarea"]),Nt=new Set(["p"]),ML=new Set(["thead","tbody"]),PL=new Set(["dd","dt"]),NL=new Set(["rt","rp"]),P0e=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",Nt],["h1",Nt],["h2",Nt],["h3",Nt],["h4",Nt],["h5",Nt],["h6",Nt],["select",Hl],["input",Hl],["output",Hl],["button",Hl],["datalist",Hl],["textarea",Hl],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",PL],["dt",PL],["address",Nt],["article",Nt],["aside",Nt],["blockquote",Nt],["details",Nt],["div",Nt],["dl",Nt],["fieldset",Nt],["figcaption",Nt],["figure",Nt],["footer",Nt],["form",Nt],["header",Nt],["hr",Nt],["main",Nt],["nav",Nt],["ol",Nt],["pre",Nt],["section",Nt],["table",Nt],["ul",Nt],["rt",NL],["rp",NL],["tbody",ML],["tfoot",ML]]),N0e=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),FL=new Set(["math","svg"]),$L=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),F0e=/\s|\//,$0e=function(){function t(e,r){r===void 0&&(r={});var n,i,s,a,o;this.options=r,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=e??{},this.lowerCaseTagNames=(n=r.lowerCaseTags)!==null&&n!==void 0?n:!r.xmlMode,this.lowerCaseAttributeNames=(i=r.lowerCaseAttributeNames)!==null&&i!==void 0?i:!r.xmlMode,this.tokenizer=new((s=r.Tokenizer)!==null&&s!==void 0?s:m0.default)(this.options,this),(o=(a=this.cbs).onparserinit)===null||o===void 0||o.call(a,this)}return t.prototype.ontext=function(e,r){var n,i,s=this.getSlice(e,r);this.endIndex=r-1,(i=(n=this.cbs).ontext)===null||i===void 0||i.call(n,s),this.startIndex=r},t.prototype.ontextentity=function(e){var r,n,i=this.tokenizer.getSectionStart();this.endIndex=i-1,(n=(r=this.cbs).ontext)===null||n===void 0||n.call(r,(0,OL.fromCodePoint)(e)),this.startIndex=i},t.prototype.isVoidElement=function(e){return!this.options.xmlMode&&N0e.has(e)},t.prototype.onopentagname=function(e,r){this.endIndex=r;var n=this.getSlice(e,r);this.lowerCaseTagNames&&(n=n.toLowerCase()),this.emitOpenTag(n)},t.prototype.emitOpenTag=function(e){var r,n,i,s;this.openTagStart=this.startIndex,this.tagname=e;var a=!this.options.xmlMode&&P0e.get(e);if(a)for(;this.stack.length>0&&a.has(this.stack[this.stack.length-1]);){var o=this.stack.pop();(n=(r=this.cbs).onclosetag)===null||n===void 0||n.call(r,o,!0)}this.isVoidElement(e)||(this.stack.push(e),FL.has(e)?this.foreignContext.push(!0):$L.has(e)&&this.foreignContext.push(!1)),(s=(i=this.cbs).onopentagname)===null||s===void 0||s.call(i,e),this.cbs.onopentag&&(this.attribs={})},t.prototype.endOpenTag=function(e){var r,n;this.startIndex=this.openTagStart,this.attribs&&((n=(r=this.cbs).onopentag)===null||n===void 0||n.call(r,this.tagname,this.attribs,e),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},t.prototype.onopentagend=function(e){this.endIndex=e,this.endOpenTag(!1),this.startIndex=e+1},t.prototype.onclosetag=function(e,r){var n,i,s,a,o,l;this.endIndex=r;var u=this.getSlice(e,r);if(this.lowerCaseTagNames&&(u=u.toLowerCase()),(FL.has(u)||$L.has(u))&&this.foreignContext.pop(),this.isVoidElement(u))!this.options.xmlMode&&u==="br"&&((i=(n=this.cbs).onopentagname)===null||i===void 0||i.call(n,"br"),(a=(s=this.cbs).onopentag)===null||a===void 0||a.call(s,"br",{},!0),(l=(o=this.cbs).onclosetag)===null||l===void 0||l.call(o,"br",!1));else{var c=this.stack.lastIndexOf(u);if(c!==-1)if(this.cbs.onclosetag)for(var d=this.stack.length-c;d--;)this.cbs.onclosetag(this.stack.pop(),d!==0);else this.stack.length=c;else!this.options.xmlMode&&u==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=r+1},t.prototype.onselfclosingtag=function(e){this.endIndex=e,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=e+1):this.onopentagend(e)},t.prototype.closeCurrentTag=function(e){var r,n,i=this.tagname;this.endOpenTag(e),this.stack[this.stack.length-1]===i&&((n=(r=this.cbs).onclosetag)===null||n===void 0||n.call(r,i,!e),this.stack.pop())},t.prototype.onattribname=function(e,r){this.startIndex=e;var n=this.getSlice(e,r);this.attribname=this.lowerCaseAttributeNames?n.toLowerCase():n},t.prototype.onattribdata=function(e,r){this.attribvalue+=this.getSlice(e,r)},t.prototype.onattribentity=function(e){this.attribvalue+=(0,OL.fromCodePoint)(e)},t.prototype.onattribend=function(e,r){var n,i;this.endIndex=r,(i=(n=this.cbs).onattribute)===null||i===void 0||i.call(n,this.attribname,this.attribvalue,e===m0.QuoteType.Double?'"':e===m0.QuoteType.Single?"'":e===m0.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},t.prototype.getInstructionName=function(e){var r=e.search(F0e),n=r<0?e:e.substr(0,r);return this.lowerCaseTagNames&&(n=n.toLowerCase()),n},t.prototype.ondeclaration=function(e,r){this.endIndex=r;var n=this.getSlice(e,r);if(this.cbs.onprocessinginstruction){var i=this.getInstructionName(n);this.cbs.onprocessinginstruction("!".concat(i),"!".concat(n))}this.startIndex=r+1},t.prototype.onprocessinginstruction=function(e,r){this.endIndex=r;var n=this.getSlice(e,r);if(this.cbs.onprocessinginstruction){var i=this.getInstructionName(n);this.cbs.onprocessinginstruction("?".concat(i),"?".concat(n))}this.startIndex=r+1},t.prototype.oncomment=function(e,r,n){var i,s,a,o;this.endIndex=r,(s=(i=this.cbs).oncomment)===null||s===void 0||s.call(i,this.getSlice(e,r-n)),(o=(a=this.cbs).oncommentend)===null||o===void 0||o.call(a),this.startIndex=r+1},t.prototype.oncdata=function(e,r,n){var i,s,a,o,l,u,c,d,h,f;this.endIndex=r;var p=this.getSlice(e,r-n);this.options.xmlMode||this.options.recognizeCDATA?((s=(i=this.cbs).oncdatastart)===null||s===void 0||s.call(i),(o=(a=this.cbs).ontext)===null||o===void 0||o.call(a,p),(u=(l=this.cbs).oncdataend)===null||u===void 0||u.call(l)):((d=(c=this.cbs).oncomment)===null||d===void 0||d.call(c,"[CDATA[".concat(p,"]]")),(f=(h=this.cbs).oncommentend)===null||f===void 0||f.call(h)),this.startIndex=r+1},t.prototype.onend=function(){var e,r;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var n=this.stack.length;n>0;this.cbs.onclosetag(this.stack[--n],!0));}(r=(e=this.cbs).onend)===null||r===void 0||r.call(e)},t.prototype.reset=function(){var e,r,n,i;(r=(e=this.cbs).onreset)===null||r===void 0||r.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(i=(n=this.cbs).onparserinit)===null||i===void 0||i.call(n,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1},t.prototype.parseComplete=function(e){this.reset(),this.end(e)},t.prototype.getSlice=function(e,r){for(;e-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var n=this.buffers[0].slice(e-this.bufferOffset,r-this.bufferOffset);r-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),n+=this.buffers[0].slice(0,r-this.bufferOffset);return n},t.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},t.prototype.write=function(e){var r,n;if(this.ended){(n=(r=this.cbs).onerror)===null||n===void 0||n.call(r,new Error(".write() after done!"));return}this.buffers.push(e),this.tokenizer.running&&(this.tokenizer.write(e),this.writeIndex++)},t.prototype.end=function(e){var r,n;if(this.ended){(n=(r=this.cbs).onerror)===null||n===void 0||n.call(r,new Error(".end() after done!"));return}e&&this.write(e),this.ended=!0,this.tokenizer.end()},t.prototype.pause=function(){this.tokenizer.pause()},t.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},t.prototype.parseChunk=function(e){this.write(e)},t.prototype.done=function(e){this.end(e)},t}();Lh.Parser=$0e;var sm={},ti={},rf={},B8={},vl={},uw={};Object.defineProperty(uw,"__esModule",{value:!0});function g0(t){for(var e=1;e<t.length;e++)t[e][0]+=t[e-1][0]+1;return t}uw.default=new Map(g0([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(g0([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(g0([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(g0([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]]));var Tg={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.escapeText=t.escapeAttribute=t.escapeUTF8=t.escape=t.encodeXML=t.getCodePoint=t.xmlReplacer=void 0,t.xmlReplacer=/["&'<>$\x80-\uFFFF]/g;var e=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);t.getCodePoint=String.prototype.codePointAt!=null?function(i,s){return i.codePointAt(s)}:function(i,s){return(i.charCodeAt(s)&64512)===55296?(i.charCodeAt(s)-55296)*1024+i.charCodeAt(s+1)-56320+65536:i.charCodeAt(s)};function r(i){for(var s="",a=0,o;(o=t.xmlReplacer.exec(i))!==null;){var l=o.index,u=i.charCodeAt(l),c=e.get(u);c!==void 0?(s+=i.substring(a,l)+c,a=l+1):(s+="".concat(i.substring(a,l),"&#x").concat((0,t.getCodePoint)(i,l).toString(16),";"),a=t.xmlReplacer.lastIndex+=+((u&64512)===55296))}return s+i.substr(a)}t.encodeXML=r,t.escape=r;function n(i,s){return function(o){for(var l,u=0,c="";l=i.exec(o);)u!==l.index&&(c+=o.substring(u,l.index)),c+=s.get(l[0].charCodeAt(0)),u=l.index+1;return c+o.substring(u)}}t.escapeUTF8=n(/[&<>'"]/g,e),t.escapeAttribute=n(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),t.escapeText=n(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]))})(Tg);var U0e=we&&we.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vl,"__esModule",{value:!0});vl.encodeNonAsciiHTML=vl.encodeHTML=void 0;var B0e=U0e(uw),j8=Tg,j0e=/[\t\n!-,./:-@[-`\f{-}$\x80-\uFFFF]/g;function H0e(t){return H8(j0e,t)}vl.encodeHTML=H0e;function V0e(t){return H8(j8.xmlReplacer,t)}vl.encodeNonAsciiHTML=V0e;function H8(t,e){for(var r="",n=0,i;(i=t.exec(e))!==null;){var s=i.index;r+=e.substring(n,s);var a=e.charCodeAt(s),o=B0e.default.get(a);if(typeof o=="object"){if(s+1<e.length){var l=e.charCodeAt(s+1),u=typeof o.n=="number"?o.n===l?o.o:void 0:o.n.get(l);if(u!==void 0){r+=u,n=t.lastIndex+=1;continue}}o=o.v}if(o!==void 0)r+=o,n=s+1;else{var c=(0,j8.getCodePoint)(e,s);r+="&#x".concat(c.toString(16),";"),n=t.lastIndex+=+(c!==a)}}return r+e.substr(n)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.decodeXMLStrict=t.decodeHTML5Strict=t.decodeHTML4Strict=t.decodeHTML5=t.decodeHTML4=t.decodeHTMLAttribute=t.decodeHTMLStrict=t.decodeHTML=t.decodeXML=t.DecodingMode=t.EntityDecoder=t.encodeHTML5=t.encodeHTML4=t.encodeNonAsciiHTML=t.encodeHTML=t.escapeText=t.escapeAttribute=t.escapeUTF8=t.escape=t.encodeXML=t.encode=t.decodeStrict=t.decode=t.EncodingMode=t.EntityLevel=void 0;var e=Dh,r=vl,n=Tg,i;(function(h){h[h.XML=0]="XML",h[h.HTML=1]="HTML"})(i=t.EntityLevel||(t.EntityLevel={}));var s;(function(h){h[h.UTF8=0]="UTF8",h[h.ASCII=1]="ASCII",h[h.Extensive=2]="Extensive",h[h.Attribute=3]="Attribute",h[h.Text=4]="Text"})(s=t.EncodingMode||(t.EncodingMode={}));function a(h,f){f===void 0&&(f=i.XML);var p=typeof f=="number"?f:f.level;if(p===i.HTML){var m=typeof f=="object"?f.mode:void 0;return(0,e.decodeHTML)(h,m)}return(0,e.decodeXML)(h)}t.decode=a;function o(h,f){var p;f===void 0&&(f=i.XML);var m=typeof f=="number"?{level:f}:f;return(p=m.mode)!==null&&p!==void 0||(m.mode=e.DecodingMode.Strict),a(h,m)}t.decodeStrict=o;function l(h,f){f===void 0&&(f=i.XML);var p=typeof f=="number"?{level:f}:f;return p.mode===s.UTF8?(0,n.escapeUTF8)(h):p.mode===s.Attribute?(0,n.escapeAttribute)(h):p.mode===s.Text?(0,n.escapeText)(h):p.level===i.HTML?p.mode===s.ASCII?(0,r.encodeNonAsciiHTML)(h):(0,r.encodeHTML)(h):(0,n.encodeXML)(h)}t.encode=l;var u=Tg;Object.defineProperty(t,"encodeXML",{enumerable:!0,get:function(){return u.encodeXML}}),Object.defineProperty(t,"escape",{enumerable:!0,get:function(){return u.escape}}),Object.defineProperty(t,"escapeUTF8",{enumerable:!0,get:function(){return u.escapeUTF8}}),Object.defineProperty(t,"escapeAttribute",{enumerable:!0,get:function(){return u.escapeAttribute}}),Object.defineProperty(t,"escapeText",{enumerable:!0,get:function(){return u.escapeText}});var c=vl;Object.defineProperty(t,"encodeHTML",{enumerable:!0,get:function(){return c.encodeHTML}}),Object.defineProperty(t,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return c.encodeNonAsciiHTML}}),Object.defineProperty(t,"encodeHTML4",{enumerable:!0,get:function(){return c.encodeHTML}}),Object.defineProperty(t,"encodeHTML5",{enumerable:!0,get:function(){return c.encodeHTML}});var d=Dh;Object.defineProperty(t,"EntityDecoder",{enumerable:!0,get:function(){return d.EntityDecoder}}),Object.defineProperty(t,"DecodingMode",{enumerable:!0,get:function(){return d.DecodingMode}}),Object.defineProperty(t,"decodeXML",{enumerable:!0,get:function(){return d.decodeXML}}),Object.defineProperty(t,"decodeHTML",{enumerable:!0,get:function(){return d.decodeHTML}}),Object.defineProperty(t,"decodeHTMLStrict",{enumerable:!0,get:function(){return d.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTMLAttribute",{enumerable:!0,get:function(){return d.decodeHTMLAttribute}}),Object.defineProperty(t,"decodeHTML4",{enumerable:!0,get:function(){return d.decodeHTML}}),Object.defineProperty(t,"decodeHTML5",{enumerable:!0,get:function(){return d.decodeHTML}}),Object.defineProperty(t,"decodeHTML4Strict",{enumerable:!0,get:function(){return d.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTML5Strict",{enumerable:!0,get:function(){return d.decodeHTMLStrict}}),Object.defineProperty(t,"decodeXMLStrict",{enumerable:!0,get:function(){return d.decodeXML}})})(B8);var cc={};Object.defineProperty(cc,"__esModule",{value:!0});cc.attributeNames=cc.elementNames=void 0;cc.elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(function(t){return[t.toLowerCase(),t]}));cc.attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(function(t){return[t.toLowerCase(),t]}));var Mu=we&&we.__assign||function(){return Mu=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Mu.apply(this,arguments)},W0e=we&&we.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),G0e=we&&we.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),K0e=we&&we.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&W0e(e,t,r);return G0e(e,t),e};Object.defineProperty(rf,"__esModule",{value:!0});rf.render=void 0;var Os=K0e(Ac),xg=B8,V8=cc,q0e=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function z0e(t){return t.replace(/"/g,"&quot;")}function Y0e(t,e){var r;if(t){var n=((r=e.encodeEntities)!==null&&r!==void 0?r:e.decodeEntities)===!1?z0e:e.xmlMode||e.encodeEntities!=="utf8"?xg.encodeXML:xg.escapeAttribute;return Object.keys(t).map(function(i){var s,a,o=(s=t[i])!==null&&s!==void 0?s:"";return e.xmlMode==="foreign"&&(i=(a=V8.attributeNames.get(i))!==null&&a!==void 0?a:i),!e.emptyAttrs&&!e.xmlMode&&o===""?i:"".concat(i,'="').concat(n(o),'"')}).join(" ")}}var UL=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function Rv(t,e){e===void 0&&(e={});for(var r=("length"in t)?t:[t],n="",i=0;i<r.length;i++)n+=X0e(r[i],e);return n}rf.render=Rv;rf.default=Rv;function X0e(t,e){switch(t.type){case Os.Root:return Rv(t.children,e);case Os.Doctype:case Os.Directive:return epe(t);case Os.Comment:return npe(t);case Os.CDATA:return rpe(t);case Os.Script:case Os.Style:case Os.Tag:return J0e(t,e);case Os.Text:return tpe(t,e)}}var Z0e=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),Q0e=new Set(["svg","math"]);function J0e(t,e){var r;e.xmlMode==="foreign"&&(t.name=(r=V8.elementNames.get(t.name))!==null&&r!==void 0?r:t.name,t.parent&&Z0e.has(t.parent.name)&&(e=Mu(Mu({},e),{xmlMode:!1}))),!e.xmlMode&&Q0e.has(t.name)&&(e=Mu(Mu({},e),{xmlMode:"foreign"}));var n="<".concat(t.name),i=Y0e(t.attribs,e);return i&&(n+=" ".concat(i)),t.children.length===0&&(e.xmlMode?e.selfClosingTags!==!1:e.selfClosingTags&&UL.has(t.name))?(e.xmlMode||(n+=" "),n+="/>"):(n+=">",t.children.length>0&&(n+=Rv(t.children,e)),(e.xmlMode||!UL.has(t.name))&&(n+="</".concat(t.name,">"))),n}function epe(t){return"<".concat(t.data,">")}function tpe(t,e){var r,n=t.data||"";return((r=e.encodeEntities)!==null&&r!==void 0?r:e.decodeEntities)!==!1&&!(!e.xmlMode&&t.parent&&q0e.has(t.parent.name))&&(n=e.xmlMode||e.encodeEntities!=="utf8"?(0,xg.encodeXML)(n):(0,xg.escapeText)(n)),n}function rpe(t){return"<![CDATA[".concat(t.children[0].data,"]]>")}function npe(t){return"<!--".concat(t.data,"-->")}var ipe=we&&we.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ti,"__esModule",{value:!0});ti.innerText=ti.textContent=ti.getText=ti.getInnerHTML=ti.getOuterHTML=void 0;var Ts=Ni,spe=ipe(rf),ape=Ac;function W8(t,e){return(0,spe.default)(t,e)}ti.getOuterHTML=W8;function ope(t,e){return(0,Ts.hasChildren)(t)?t.children.map(function(r){return W8(r,e)}).join(""):""}ti.getInnerHTML=ope;function am(t){return Array.isArray(t)?t.map(am).join(""):(0,Ts.isTag)(t)?t.name==="br"?`
`:am(t.children):(0,Ts.isCDATA)(t)?am(t.children):(0,Ts.isText)(t)?t.data:""}ti.getText=am;function __(t){return Array.isArray(t)?t.map(__).join(""):(0,Ts.hasChildren)(t)&&!(0,Ts.isComment)(t)?__(t.children):(0,Ts.isText)(t)?t.data:""}ti.textContent=__;function T_(t){return Array.isArray(t)?t.map(T_).join(""):(0,Ts.hasChildren)(t)&&(t.type===ape.ElementType.Tag||(0,Ts.isCDATA)(t))?T_(t.children):(0,Ts.isText)(t)?t.data:""}ti.innerText=T_;var zr={};Object.defineProperty(zr,"__esModule",{value:!0});zr.prevElementSibling=zr.nextElementSibling=zr.getName=zr.hasAttrib=zr.getAttributeValue=zr.getSiblings=zr.getParent=zr.getChildren=void 0;var cw=Ni;function G8(t){return(0,cw.hasChildren)(t)?t.children:[]}zr.getChildren=G8;function K8(t){return t.parent||null}zr.getParent=K8;function lpe(t){var e,r,n=K8(t);if(n!=null)return G8(n);for(var i=[t],s=t.prev,a=t.next;s!=null;)i.unshift(s),e=s,s=e.prev;for(;a!=null;)i.push(a),r=a,a=r.next;return i}zr.getSiblings=lpe;function upe(t,e){var r;return(r=t.attribs)===null||r===void 0?void 0:r[e]}zr.getAttributeValue=upe;function cpe(t,e){return t.attribs!=null&&Object.prototype.hasOwnProperty.call(t.attribs,e)&&t.attribs[e]!=null}zr.hasAttrib=cpe;function dpe(t){return t.name}zr.getName=dpe;function hpe(t){for(var e,r=t.next;r!==null&&!(0,cw.isTag)(r);)e=r,r=e.next;return r}zr.nextElementSibling=hpe;function fpe(t){for(var e,r=t.prev;r!==null&&!(0,cw.isTag)(r);)e=r,r=e.prev;return r}zr.prevElementSibling=fpe;var Vn={};Object.defineProperty(Vn,"__esModule",{value:!0});Vn.prepend=Vn.prependChild=Vn.append=Vn.appendChild=Vn.replaceElement=Vn.removeElement=void 0;function nf(t){if(t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t.parent){var e=t.parent.children,r=e.lastIndexOf(t);r>=0&&e.splice(r,1)}t.next=null,t.prev=null,t.parent=null}Vn.removeElement=nf;function ppe(t,e){var r=e.prev=t.prev;r&&(r.next=e);var n=e.next=t.next;n&&(n.prev=e);var i=e.parent=t.parent;if(i){var s=i.children;s[s.lastIndexOf(t)]=e,t.parent=null}}Vn.replaceElement=ppe;function mpe(t,e){if(nf(e),e.next=null,e.parent=t,t.children.push(e)>1){var r=t.children[t.children.length-2];r.next=e,e.prev=r}else e.prev=null}Vn.appendChild=mpe;function gpe(t,e){nf(e);var r=t.parent,n=t.next;if(e.next=n,e.prev=t,t.next=e,e.parent=r,n){if(n.prev=e,r){var i=r.children;i.splice(i.lastIndexOf(n),0,e)}}else r&&r.children.push(e)}Vn.append=gpe;function vpe(t,e){if(nf(e),e.parent=t,e.prev=null,t.children.unshift(e)!==1){var r=t.children[1];r.prev=e,e.next=r}else e.next=null}Vn.prependChild=vpe;function bpe(t,e){nf(e);var r=t.parent;if(r){var n=r.children;n.splice(n.indexOf(t),0,e)}t.prev&&(t.prev.next=e),e.parent=r,e.prev=t.prev,e.next=t,t.prev=e}Vn.prepend=bpe;var An={};Object.defineProperty(An,"__esModule",{value:!0});An.findAll=An.existsOne=An.findOne=An.findOneChild=An.find=An.filter=void 0;var Cv=Ni;function ype(t,e,r,n){return r===void 0&&(r=!0),n===void 0&&(n=1/0),q8(t,Array.isArray(e)?e:[e],r,n)}An.filter=ype;function q8(t,e,r,n){for(var i=[],s=[e],a=[0];;){if(a[0]>=s[0].length){if(a.length===1)return i;s.shift(),a.shift();continue}var o=s[0][a[0]++];if(t(o)&&(i.push(o),--n<=0))return i;r&&(0,Cv.hasChildren)(o)&&o.children.length>0&&(a.unshift(0),s.unshift(o.children))}}An.find=q8;function Epe(t,e){return e.find(t)}An.findOneChild=Epe;function z8(t,e,r){r===void 0&&(r=!0);for(var n=null,i=0;i<e.length&&!n;i++){var s=e[i];if((0,Cv.isTag)(s))t(s)?n=s:r&&s.children.length>0&&(n=z8(t,s.children,!0));else continue}return n}An.findOne=z8;function Y8(t,e){return e.some(function(r){return(0,Cv.isTag)(r)&&(t(r)||Y8(t,r.children))})}An.existsOne=Y8;function _pe(t,e){for(var r=[],n=[e],i=[0];;){if(i[0]>=n[0].length){if(n.length===1)return r;n.shift(),i.shift();continue}var s=n[0][i[0]++];(0,Cv.isTag)(s)&&(t(s)&&r.push(s),s.children.length>0&&(i.unshift(0),n.unshift(s.children)))}}An.findAll=_pe;var ri={};Object.defineProperty(ri,"__esModule",{value:!0});ri.getElementsByTagType=ri.getElementsByTagName=ri.getElementById=ri.getElements=ri.testElement=void 0;var Wo=Ni,Iv=An,Sg={tag_name:function(t){return typeof t=="function"?function(e){return(0,Wo.isTag)(e)&&t(e.name)}:t==="*"?Wo.isTag:function(e){return(0,Wo.isTag)(e)&&e.name===t}},tag_type:function(t){return typeof t=="function"?function(e){return t(e.type)}:function(e){return e.type===t}},tag_contains:function(t){return typeof t=="function"?function(e){return(0,Wo.isText)(e)&&t(e.data)}:function(e){return(0,Wo.isText)(e)&&e.data===t}}};function X8(t,e){return typeof e=="function"?function(r){return(0,Wo.isTag)(r)&&e(r.attribs[t])}:function(r){return(0,Wo.isTag)(r)&&r.attribs[t]===e}}function Tpe(t,e){return function(r){return t(r)||e(r)}}function Z8(t){var e=Object.keys(t).map(function(r){var n=t[r];return Object.prototype.hasOwnProperty.call(Sg,r)?Sg[r](n):X8(r,n)});return e.length===0?null:e.reduce(Tpe)}function xpe(t,e){var r=Z8(t);return r?r(e):!0}ri.testElement=xpe;function Spe(t,e,r,n){n===void 0&&(n=1/0);var i=Z8(t);return i?(0,Iv.filter)(i,e,r,n):[]}ri.getElements=Spe;function wpe(t,e,r){return r===void 0&&(r=!0),Array.isArray(e)||(e=[e]),(0,Iv.findOne)(X8("id",t),e,r)}ri.getElementById=wpe;function Ape(t,e,r,n){return r===void 0&&(r=!0),n===void 0&&(n=1/0),(0,Iv.filter)(Sg.tag_name(t),e,r,n)}ri.getElementsByTagName=Ape;function Rpe(t,e,r,n){return r===void 0&&(r=!0),n===void 0&&(n=1/0),(0,Iv.filter)(Sg.tag_type(t),e,r,n)}ri.getElementsByTagType=Rpe;var Q8={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.uniqueSort=t.compareDocumentPosition=t.DocumentPosition=t.removeSubsets=void 0;var e=Ni;function r(a){for(var o=a.length;--o>=0;){var l=a[o];if(o>0&&a.lastIndexOf(l,o-1)>=0){a.splice(o,1);continue}for(var u=l.parent;u;u=u.parent)if(a.includes(u)){a.splice(o,1);break}}return a}t.removeSubsets=r;var n;(function(a){a[a.DISCONNECTED=1]="DISCONNECTED",a[a.PRECEDING=2]="PRECEDING",a[a.FOLLOWING=4]="FOLLOWING",a[a.CONTAINS=8]="CONTAINS",a[a.CONTAINED_BY=16]="CONTAINED_BY"})(n=t.DocumentPosition||(t.DocumentPosition={}));function i(a,o){var l=[],u=[];if(a===o)return 0;for(var c=(0,e.hasChildren)(a)?a:a.parent;c;)l.unshift(c),c=c.parent;for(c=(0,e.hasChildren)(o)?o:o.parent;c;)u.unshift(c),c=c.parent;for(var d=Math.min(l.length,u.length),h=0;h<d&&l[h]===u[h];)h++;if(h===0)return n.DISCONNECTED;var f=l[h-1],p=f.children,m=l[h],g=u[h];return p.indexOf(m)>p.indexOf(g)?f===o?n.FOLLOWING|n.CONTAINED_BY:n.FOLLOWING:f===a?n.PRECEDING|n.CONTAINS:n.PRECEDING}t.compareDocumentPosition=i;function s(a){return a=a.filter(function(o,l,u){return!u.includes(o,l+1)}),a.sort(function(o,l){var u=i(o,l);return u&n.PRECEDING?-1:u&n.FOLLOWING?1:0}),a}t.uniqueSort=s})(Q8);var kv={};Object.defineProperty(kv,"__esModule",{value:!0});kv.getFeed=void 0;var Cpe=ti,sf=ri;function Ipe(t){var e=wg(Mpe,t);return e?e.name==="feed"?kpe(e):Lpe(e):null}kv.getFeed=Ipe;function kpe(t){var e,r=t.children,n={type:"atom",items:(0,sf.getElementsByTagName)("entry",r).map(function(a){var o,l=a.children,u={media:J8(l)};jn(u,"id","id",l),jn(u,"title","title",l);var c=(o=wg("link",l))===null||o===void 0?void 0:o.attribs.href;c&&(u.link=c);var d=Ha("summary",l)||Ha("content",l);d&&(u.description=d);var h=Ha("updated",l);return h&&(u.pubDate=new Date(h)),u})};jn(n,"id","id",r),jn(n,"title","title",r);var i=(e=wg("link",r))===null||e===void 0?void 0:e.attribs.href;i&&(n.link=i),jn(n,"description","subtitle",r);var s=Ha("updated",r);return s&&(n.updated=new Date(s)),jn(n,"author","email",r,!0),n}function Lpe(t){var e,r,n=(r=(e=wg("channel",t.children))===null||e===void 0?void 0:e.children)!==null&&r!==void 0?r:[],i={type:t.name.substr(0,3),id:"",items:(0,sf.getElementsByTagName)("item",t.children).map(function(a){var o=a.children,l={media:J8(o)};jn(l,"id","guid",o),jn(l,"title","title",o),jn(l,"link","link",o),jn(l,"description","description",o);var u=Ha("pubDate",o)||Ha("dc:date",o);return u&&(l.pubDate=new Date(u)),l})};jn(i,"title","title",n),jn(i,"link","link",n),jn(i,"description","description",n);var s=Ha("lastBuildDate",n);return s&&(i.updated=new Date(s)),jn(i,"author","managingEditor",n,!0),i}var Dpe=["url","type","lang"],Ope=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function J8(t){return(0,sf.getElementsByTagName)("media:content",t).map(function(e){for(var r=e.attribs,n={medium:r.medium,isDefault:!!r.isDefault},i=0,s=Dpe;i<s.length;i++){var a=s[i];r[a]&&(n[a]=r[a])}for(var o=0,l=Ope;o<l.length;o++){var a=l[o];r[a]&&(n[a]=parseInt(r[a],10))}return r.expression&&(n.expression=r.expression),n})}function wg(t,e){return(0,sf.getElementsByTagName)(t,e,!0,1)[0]}function Ha(t,e,r){return r===void 0&&(r=!1),(0,Cpe.textContent)((0,sf.getElementsByTagName)(t,e,r,1)).trim()}function jn(t,e,r,n,i){i===void 0&&(i=!1);var s=Ha(r,n,i);s&&(t[e]=s)}function Mpe(t){return t==="rss"||t==="feed"||t==="rdf:RDF"}(function(t){var e=we&&we.__createBinding||(Object.create?function(i,s,a,o){o===void 0&&(o=a);var l=Object.getOwnPropertyDescriptor(s,a);(!l||("get"in l?!s.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return s[a]}}),Object.defineProperty(i,o,l)}:function(i,s,a,o){o===void 0&&(o=a),i[o]=s[a]}),r=we&&we.__exportStar||function(i,s){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&e(s,i,a)};Object.defineProperty(t,"__esModule",{value:!0}),t.hasChildren=t.isDocument=t.isComment=t.isText=t.isCDATA=t.isTag=void 0,r(ti,t),r(zr,t),r(Vn,t),r(An,t),r(ri,t),r(Q8,t),r(kv,t);var n=Ni;Object.defineProperty(t,"isTag",{enumerable:!0,get:function(){return n.isTag}}),Object.defineProperty(t,"isCDATA",{enumerable:!0,get:function(){return n.isCDATA}}),Object.defineProperty(t,"isText",{enumerable:!0,get:function(){return n.isText}}),Object.defineProperty(t,"isComment",{enumerable:!0,get:function(){return n.isComment}}),Object.defineProperty(t,"isDocument",{enumerable:!0,get:function(){return n.isDocument}}),Object.defineProperty(t,"hasChildren",{enumerable:!0,get:function(){return n.hasChildren}})})(sm);(function(t){var e=we&&we.__createBinding||(Object.create?function(v,b,y,T){T===void 0&&(T=y);var x=Object.getOwnPropertyDescriptor(b,y);(!x||("get"in x?!b.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return b[y]}}),Object.defineProperty(v,T,x)}:function(v,b,y,T){T===void 0&&(T=y),v[T]=b[y]}),r=we&&we.__setModuleDefault||(Object.create?function(v,b){Object.defineProperty(v,"default",{enumerable:!0,value:b})}:function(v,b){v.default=b}),n=we&&we.__importStar||function(v){if(v&&v.__esModule)return v;var b={};if(v!=null)for(var y in v)y!=="default"&&Object.prototype.hasOwnProperty.call(v,y)&&e(b,v,y);return r(b,v),b},i=we&&we.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomUtils=t.parseFeed=t.getFeed=t.ElementType=t.Tokenizer=t.createDomStream=t.parseDOM=t.parseDocument=t.DefaultHandler=t.DomHandler=t.Parser=void 0;var s=Lh,a=Lh;Object.defineProperty(t,"Parser",{enumerable:!0,get:function(){return a.Parser}});var o=Ni,l=Ni;Object.defineProperty(t,"DomHandler",{enumerable:!0,get:function(){return l.DomHandler}}),Object.defineProperty(t,"DefaultHandler",{enumerable:!0,get:function(){return l.DomHandler}});function u(v,b){var y=new o.DomHandler(void 0,b);return new s.Parser(y,b).end(v),y.root}t.parseDocument=u;function c(v,b){return u(v,b).children}t.parseDOM=c;function d(v,b,y){var T=new o.DomHandler(v,b,y);return new s.Parser(T,b)}t.createDomStream=d;var h=aw;Object.defineProperty(t,"Tokenizer",{enumerable:!0,get:function(){return i(h).default}}),t.ElementType=n(Ac);var f=sm,p=sm;Object.defineProperty(t,"getFeed",{enumerable:!0,get:function(){return p.getFeed}});var m={xmlMode:!0};function g(v,b){return b===void 0&&(b=m),(0,f.getFeed)(c(v,b))}t.parseFeed=g,t.DomUtils=n(sm)})(U8);var Ppe=t=>{if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")},dw={};Object.defineProperty(dw,"__esModule",{value:!0});/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function BL(t){return Object.prototype.toString.call(t)==="[object Object]"}function Npe(t){var e,r;return BL(t)===!1?!1:(e=t.constructor,e===void 0?!0:(r=e.prototype,!(BL(r)===!1||r.hasOwnProperty("isPrototypeOf")===!1)))}dw.isPlainObject=Npe;var Fpe=function(e){return $pe(e)&&!Upe(e)};function $pe(t){return!!t&&typeof t=="object"}function Upe(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||Hpe(t)}var Bpe=typeof Symbol=="function"&&Symbol.for,jpe=Bpe?Symbol.for("react.element"):60103;function Hpe(t){return t.$$typeof===jpe}function Vpe(t){return Array.isArray(t)?[]:{}}function Oh(t,e){return e.clone!==!1&&e.isMergeableObject(t)?dc(Vpe(t),t,e):t}function Wpe(t,e,r){return t.concat(e).map(function(n){return Oh(n,r)})}function Gpe(t,e){if(!e.customMerge)return dc;var r=e.customMerge(t);return typeof r=="function"?r:dc}function Kpe(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.propertyIsEnumerable.call(t,e)}):[]}function jL(t){return Object.keys(t).concat(Kpe(t))}function eF(t,e){try{return e in t}catch{return!1}}function qpe(t,e){return eF(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))}function zpe(t,e,r){var n={};return r.isMergeableObject(t)&&jL(t).forEach(function(i){n[i]=Oh(t[i],r)}),jL(e).forEach(function(i){qpe(t,i)||(eF(t,i)&&r.isMergeableObject(e[i])?n[i]=Gpe(i,r)(t[i],e[i],r):n[i]=Oh(e[i],r))}),n}function dc(t,e,r){r=r||{},r.arrayMerge=r.arrayMerge||Wpe,r.isMergeableObject=r.isMergeableObject||Fpe,r.cloneUnlessOtherwiseSpecified=Oh;var n=Array.isArray(e),i=Array.isArray(t),s=n===i;return s?n?r.arrayMerge(t,e,r):zpe(t,e,r):Oh(e,r)}dc.all=function(e,r){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(n,i){return dc(n,i,r)},{})};var Ype=dc,Xpe=Ype,tF={exports:{}};(function(t){(function(e,r){t.exports?t.exports=r():e.parseSrcset=r()})(we,function(){return function(e){function r(T){return T===" "||T==="	"||T===`
`||T==="\f"||T==="\r"}function n(T){var x,_=T.exec(e.substring(g));if(_)return x=_[0],g+=x.length,x}for(var i=e.length,s=/^[ \t\n\r\u000c]+/,a=/^[, \t\n\r\u000c]+/,o=/^[^ \t\n\r\u000c]+/,l=/[,]+$/,u=/^\d+$/,c=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,d,h,f,p,m,g=0,v=[];;){if(n(a),g>=i)return v;d=n(o),h=[],d.slice(-1)===","?(d=d.replace(l,""),y()):b()}function b(){for(n(s),f="",p="in descriptor";;){if(m=e.charAt(g),p==="in descriptor")if(r(m))f&&(h.push(f),f="",p="after descriptor");else if(m===","){g+=1,f&&h.push(f),y();return}else if(m==="(")f=f+m,p="in parens";else if(m===""){f&&h.push(f),y();return}else f=f+m;else if(p==="in parens")if(m===")")f=f+m,p="in descriptor";else if(m===""){h.push(f),y();return}else f=f+m;else if(p==="after descriptor"&&!r(m))if(m===""){y();return}else p="in descriptor",g-=1;g+=1}}function y(){var T=!1,x,_,S,A,k={},I,C,N,P,V;for(A=0;A<h.length;A++)I=h[A],C=I[I.length-1],N=I.substring(0,I.length-1),P=parseInt(N,10),V=parseFloat(N),u.test(N)&&C==="w"?((x||_)&&(T=!0),P===0?T=!0:x=P):c.test(N)&&C==="x"?((x||_||S)&&(T=!0),V<0?T=!0:_=V):u.test(N)&&C==="h"?((S||_)&&(T=!0),P===0?T=!0:S=P):T=!0;T?console&&console.log&&console.log("Invalid srcset descriptor found in '"+e+"' at '"+I+"'."):(k.url=d,x&&(k.w=x),_&&(k.d=_),S&&(k.h=S),v.push(k))}}})})(tF);var Zpe=tF.exports,hw={exports:{}},Ze=String,rF=function(){return{isColorSupported:!1,reset:Ze,bold:Ze,dim:Ze,italic:Ze,underline:Ze,inverse:Ze,hidden:Ze,strikethrough:Ze,black:Ze,red:Ze,green:Ze,yellow:Ze,blue:Ze,magenta:Ze,cyan:Ze,white:Ze,gray:Ze,bgBlack:Ze,bgRed:Ze,bgGreen:Ze,bgYellow:Ze,bgBlue:Ze,bgMagenta:Ze,bgCyan:Ze,bgWhite:Ze,blackBright:Ze,redBright:Ze,greenBright:Ze,yellowBright:Ze,blueBright:Ze,magentaBright:Ze,cyanBright:Ze,whiteBright:Ze,bgBlackBright:Ze,bgRedBright:Ze,bgGreenBright:Ze,bgYellowBright:Ze,bgBlueBright:Ze,bgMagentaBright:Ze,bgCyanBright:Ze,bgWhiteBright:Ze}};hw.exports=rF();hw.exports.createColors=rF;var Qpe=hw.exports;const Jpe={},eme=Object.freeze(Object.defineProperty({__proto__:null,default:Jpe},Symbol.toStringTag,{value:"Module"})),ji=a9(eme);let HL=Qpe,VL=ji,x_=class nF extends Error{constructor(e,r,n,i,s,a){super(e),this.name="CssSyntaxError",this.reason=e,s&&(this.file=s),i&&(this.source=i),a&&(this.plugin=a),typeof r<"u"&&typeof n<"u"&&(typeof r=="number"?(this.line=r,this.column=n):(this.line=r.line,this.column=r.column,this.endLine=n.line,this.endColumn=n.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,nF)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line<"u"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let r=this.source;e==null&&(e=HL.isColorSupported);let n=c=>c,i=c=>c,s=c=>c;if(e){let{bold:c,gray:d,red:h}=HL.createColors(!0);i=f=>c(h(f)),n=f=>d(f),VL&&(s=f=>VL(f))}let a=r.split(/\r?\n/),o=Math.max(this.line-3,0),l=Math.min(this.line+2,a.length),u=String(l).length;return a.slice(o,l).map((c,d)=>{let h=o+1+d,f=" "+(" "+h).slice(-u)+" | ";if(h===this.line){if(c.length>160){let m=20,g=Math.max(0,this.column-m),v=Math.max(this.column+m,this.endColumn+m),b=c.slice(g,v),y=n(f.replace(/\d/g," "))+c.slice(0,Math.min(this.column-1,m-1)).replace(/[^\t]/g," ");return i(">")+n(f)+s(b)+`
 `+y+i("^")}let p=n(f.replace(/\d/g," "))+c.slice(0,this.column-1).replace(/[^\t]/g," ");return i(">")+n(f)+s(c)+`
 `+p+i("^")}return" "+n(f)+s(c)}).join(`
`)}toString(){let e=this.showSourceCode();return e&&(e=`

`+e+`
`),this.name+": "+this.message+e}};var fw=x_;x_.default=x_;const WL={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function tme(t){return t[0].toUpperCase()+t.slice(1)}let S_=class{constructor(e){this.builder=e}atrule(e,r){let n="@"+e.name,i=e.params?this.rawValue(e,"params"):"";if(typeof e.raws.afterName<"u"?n+=e.raws.afterName:i&&(n+=" "),e.nodes)this.block(e,n+i);else{let s=(e.raws.between||"")+(r?";":"");this.builder(n+i+s,e)}}beforeAfter(e,r){let n;e.type==="decl"?n=this.raw(e,null,"beforeDecl"):e.type==="comment"?n=this.raw(e,null,"beforeComment"):r==="before"?n=this.raw(e,null,"beforeRule"):n=this.raw(e,null,"beforeClose");let i=e.parent,s=0;for(;i&&i.type!=="root";)s+=1,i=i.parent;if(n.includes(`
`)){let a=this.raw(e,null,"indent");if(a.length)for(let o=0;o<s;o++)n+=a}return n}block(e,r){let n=this.raw(e,"between","beforeOpen");this.builder(r+n+"{",e,"start");let i;e.nodes&&e.nodes.length?(this.body(e),i=this.raw(e,"after")):i=this.raw(e,"after","emptyBody"),i&&this.builder(i),this.builder("}",e,"end")}body(e){let r=e.nodes.length-1;for(;r>0&&e.nodes[r].type==="comment";)r-=1;let n=this.raw(e,"semicolon");for(let i=0;i<e.nodes.length;i++){let s=e.nodes[i],a=this.raw(s,"before");a&&this.builder(a),this.stringify(s,r!==i||n)}}comment(e){let r=this.raw(e,"left","commentLeft"),n=this.raw(e,"right","commentRight");this.builder("/*"+r+e.text+n+"*/",e)}decl(e,r){let n=this.raw(e,"between","colon"),i=e.prop+n+this.rawValue(e,"value");e.important&&(i+=e.raws.important||" !important"),r&&(i+=";"),this.builder(i,e)}document(e){this.body(e)}raw(e,r,n){let i;if(n||(n=r),r&&(i=e.raws[r],typeof i<"u"))return i;let s=e.parent;if(n==="before"&&(!s||s.type==="root"&&s.first===e||s&&s.type==="document"))return"";if(!s)return WL[n];let a=e.root();if(a.rawCache||(a.rawCache={}),typeof a.rawCache[n]<"u")return a.rawCache[n];if(n==="before"||n==="after")return this.beforeAfter(e,n);{let o="raw"+tme(n);this[o]?i=this[o](a,e):a.walk(l=>{if(i=l.raws[r],typeof i<"u")return!1})}return typeof i>"u"&&(i=WL[n]),a.rawCache[n]=i,i}rawBeforeClose(e){let r;return e.walk(n=>{if(n.nodes&&n.nodes.length>0&&typeof n.raws.after<"u")return r=n.raws.after,r.includes(`
`)&&(r=r.replace(/[^\n]+$/,"")),!1}),r&&(r=r.replace(/\S/g,"")),r}rawBeforeComment(e,r){let n;return e.walkComments(i=>{if(typeof i.raws.before<"u")return n=i.raws.before,n.includes(`
`)&&(n=n.replace(/[^\n]+$/,"")),!1}),typeof n>"u"?n=this.raw(r,null,"beforeDecl"):n&&(n=n.replace(/\S/g,"")),n}rawBeforeDecl(e,r){let n;return e.walkDecls(i=>{if(typeof i.raws.before<"u")return n=i.raws.before,n.includes(`
`)&&(n=n.replace(/[^\n]+$/,"")),!1}),typeof n>"u"?n=this.raw(r,null,"beforeRule"):n&&(n=n.replace(/\S/g,"")),n}rawBeforeOpen(e){let r;return e.walk(n=>{if(n.type!=="decl"&&(r=n.raws.between,typeof r<"u"))return!1}),r}rawBeforeRule(e){let r;return e.walk(n=>{if(n.nodes&&(n.parent!==e||e.first!==n)&&typeof n.raws.before<"u")return r=n.raws.before,r.includes(`
`)&&(r=r.replace(/[^\n]+$/,"")),!1}),r&&(r=r.replace(/\S/g,"")),r}rawColon(e){let r;return e.walkDecls(n=>{if(typeof n.raws.between<"u")return r=n.raws.between.replace(/[^\s:]/g,""),!1}),r}rawEmptyBody(e){let r;return e.walk(n=>{if(n.nodes&&n.nodes.length===0&&(r=n.raws.after,typeof r<"u"))return!1}),r}rawIndent(e){if(e.raws.indent)return e.raws.indent;let r;return e.walk(n=>{let i=n.parent;if(i&&i!==e&&i.parent&&i.parent===e&&typeof n.raws.before<"u"){let s=n.raws.before.split(`
`);return r=s[s.length-1],r=r.replace(/\S/g,""),!1}}),r}rawSemicolon(e){let r;return e.walk(n=>{if(n.nodes&&n.nodes.length&&n.last.type==="decl"&&(r=n.raws.semicolon,typeof r<"u"))return!1}),r}rawValue(e,r){let n=e[r],i=e.raws[r];return i&&i.value===n?i.raw:n}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,r){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,r)}};var iF=S_;S_.default=S_;let rme=iF;function w_(t,e){new rme(e).stringify(t)}var Lv=w_;w_.default=w_;var af={};af.isClean=Symbol("isClean");af.my=Symbol("my");let nme=fw,ime=iF,sme=Lv,{isClean:ed,my:ame}=af;function A_(t,e){let r=new t.constructor;for(let n in t){if(!Object.prototype.hasOwnProperty.call(t,n)||n==="proxyCache")continue;let i=t[n],s=typeof i;n==="parent"&&s==="object"?e&&(r[n]=e):n==="source"?r[n]=i:Array.isArray(i)?r[n]=i.map(a=>A_(a,r)):(s==="object"&&i!==null&&(i=A_(i)),r[n]=i)}return r}let R_=class{constructor(e={}){this.raws={},this[ed]=!1,this[ame]=!0;for(let r in e)if(r==="nodes"){this.nodes=[];for(let n of e[r])typeof n.clone=="function"?this.append(n.clone()):this.append(n)}else this[r]=e[r]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let r=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${r.input.from}:${r.start.line}:${r.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let r in e)this[r]=e[r];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let r=A_(this);for(let n in e)r[n]=e[n];return r}cloneAfter(e={}){let r=this.clone(e);return this.parent.insertAfter(this,r),r}cloneBefore(e={}){let r=this.clone(e);return this.parent.insertBefore(this,r),r}error(e,r={}){if(this.source){let{end:n,start:i}=this.rangeBy(r);return this.source.input.error(e,{column:i.column,line:i.line},{column:n.column,line:n.line},r)}return new nme(e)}getProxyProcessor(){return{get(e,r){return r==="proxyOf"?e:r==="root"?()=>e.root().toProxy():e[r]},set(e,r,n){return e[r]===n||(e[r]=n,(r==="prop"||r==="value"||r==="name"||r==="params"||r==="important"||r==="text")&&e.markDirty()),!0}}}markClean(){this[ed]=!0}markDirty(){if(this[ed]){this[ed]=!1;let e=this;for(;e=e.parent;)e[ed]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e,r){let n=this.source.start;if(e.index)n=this.positionInside(e.index,r);else if(e.word){r=this.toString();let i=r.indexOf(e.word);i!==-1&&(n=this.positionInside(i,r))}return n}positionInside(e,r){let n=r||this.toString(),i=this.source.start.column,s=this.source.start.line;for(let a=0;a<e;a++)n[a]===`
`?(i=1,s+=1):i+=1;return{column:i,line:s}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e){let r={column:this.source.start.column,line:this.source.start.line},n=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:r.column+1,line:r.line};if(e.word){let i=this.toString(),s=i.indexOf(e.word);s!==-1&&(r=this.positionInside(s,i),n=this.positionInside(s+e.word.length,i))}else e.start?r={column:e.start.column,line:e.start.line}:e.index&&(r=this.positionInside(e.index)),e.end?n={column:e.end.column,line:e.end.line}:typeof e.endIndex=="number"?n=this.positionInside(e.endIndex):e.index&&(n=this.positionInside(e.index+1));return(n.line<r.line||n.line===r.line&&n.column<=r.column)&&(n={column:r.column+1,line:r.line}),{end:n,start:r}}raw(e,r){return new ime().raw(this,e,r)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let r=this,n=!1;for(let i of e)i===this?n=!0:n?(this.parent.insertAfter(r,i),r=i):this.parent.insertBefore(r,i);n||this.remove()}return this}root(){let e=this;for(;e.parent&&e.parent.type!=="document";)e=e.parent;return e}toJSON(e,r){let n={},i=r==null;r=r||new Map;let s=0;for(let a in this){if(!Object.prototype.hasOwnProperty.call(this,a)||a==="parent"||a==="proxyCache")continue;let o=this[a];if(Array.isArray(o))n[a]=o.map(l=>typeof l=="object"&&l.toJSON?l.toJSON(null,r):l);else if(typeof o=="object"&&o.toJSON)n[a]=o.toJSON(null,r);else if(a==="source"){let l=r.get(o.input);l==null&&(l=s,r.set(o.input,s),s++),n[a]={end:o.end,inputId:l,start:o.start}}else n[a]=o}return i&&(n.inputs=[...r.keys()].map(a=>a.toJSON())),n}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=sme){e.stringify&&(e=e.stringify);let r="";return e(this,n=>{r+=n}),r}warn(e,r,n){let i={node:this};for(let s in n)i[s]=n[s];return e.warn(r,i)}get proxyOf(){return this}};var Dv=R_;R_.default=R_;let ome=Dv,C_=class extends ome{constructor(e){super(e),this.type="comment"}};var Ov=C_;C_.default=C_;let lme=Dv,I_=class extends lme{constructor(e){e&&typeof e.value<"u"&&typeof e.value!="string"&&(e={...e,value:String(e.value)}),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}};var Mv=I_;I_.default=I_;let sF=Ov,aF=Mv,ume=Dv,{isClean:oF,my:lF}=af,pw,uF,cF,mw;function dF(t){return t.map(e=>(e.nodes&&(e.nodes=dF(e.nodes)),delete e.source,e))}function hF(t){if(t[oF]=!1,t.proxyOf.nodes)for(let e of t.proxyOf.nodes)hF(e)}let Js=class fF extends ume{append(...e){for(let r of e){let n=this.normalize(r,this.last);for(let i of n)this.proxyOf.nodes.push(i)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let r of this.nodes)r.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let r=this.getIterator(),n,i;for(;this.indexes[r]<this.proxyOf.nodes.length&&(n=this.indexes[r],i=e(this.proxyOf.nodes[n],n),i!==!1);)this.indexes[r]+=1;return delete this.indexes[r],i}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get(e,r){return r==="proxyOf"?e:e[r]?r==="each"||typeof r=="string"&&r.startsWith("walk")?(...n)=>e[r](...n.map(i=>typeof i=="function"?(s,a)=>i(s.toProxy(),a):i)):r==="every"||r==="some"?n=>e[r]((i,...s)=>n(i.toProxy(),...s)):r==="root"?()=>e.root().toProxy():r==="nodes"?e.nodes.map(n=>n.toProxy()):r==="first"||r==="last"?e[r].toProxy():e[r]:e[r]},set(e,r,n){return e[r]===n||(e[r]=n,(r==="name"||r==="params"||r==="selector")&&e.markDirty()),!0}}}index(e){return typeof e=="number"?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,r){let n=this.index(e),i=this.normalize(r,this.proxyOf.nodes[n]).reverse();n=this.index(e);for(let a of i)this.proxyOf.nodes.splice(n+1,0,a);let s;for(let a in this.indexes)s=this.indexes[a],n<s&&(this.indexes[a]=s+i.length);return this.markDirty(),this}insertBefore(e,r){let n=this.index(e),i=n===0?"prepend":!1,s=this.normalize(r,this.proxyOf.nodes[n],i).reverse();n=this.index(e);for(let o of s)this.proxyOf.nodes.splice(n,0,o);let a;for(let o in this.indexes)a=this.indexes[o],n<=a&&(this.indexes[o]=a+s.length);return this.markDirty(),this}normalize(e,r){if(typeof e=="string")e=dF(uF(e).nodes);else if(typeof e>"u")e=[];else if(Array.isArray(e)){e=e.slice(0);for(let i of e)i.parent&&i.parent.removeChild(i,"ignore")}else if(e.type==="root"&&this.type!=="document"){e=e.nodes.slice(0);for(let i of e)i.parent&&i.parent.removeChild(i,"ignore")}else if(e.type)e=[e];else if(e.prop){if(typeof e.value>"u")throw new Error("Value field is missed in node creation");typeof e.value!="string"&&(e.value=String(e.value)),e=[new aF(e)]}else if(e.selector||e.selectors)e=[new mw(e)];else if(e.name)e=[new pw(e)];else if(e.text)e=[new sF(e)];else throw new Error("Unknown node type in node creation");return e.map(i=>(i[lF]||fF.rebuild(i),i=i.proxyOf,i.parent&&i.parent.removeChild(i),i[oF]&&hF(i),typeof i.raws.before>"u"&&r&&typeof r.raws.before<"u"&&(i.raws.before=r.raws.before.replace(/\S/g,"")),i.parent=this.proxyOf,i))}prepend(...e){e=e.reverse();for(let r of e){let n=this.normalize(r,this.first,"prepend").reverse();for(let i of n)this.proxyOf.nodes.unshift(i);for(let i in this.indexes)this.indexes[i]=this.indexes[i]+n.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);let r;for(let n in this.indexes)r=this.indexes[n],r>=e&&(this.indexes[n]=r-1);return this.markDirty(),this}replaceValues(e,r,n){return n||(n=r,r={}),this.walkDecls(i=>{r.props&&!r.props.includes(i.prop)||r.fast&&!i.value.includes(r.fast)||(i.value=i.value.replace(e,n))}),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each((r,n)=>{let i;try{i=e(r,n)}catch(s){throw r.addToError(s)}return i!==!1&&r.walk&&(i=r.walk(e)),i})}walkAtRules(e,r){return r?e instanceof RegExp?this.walk((n,i)=>{if(n.type==="atrule"&&e.test(n.name))return r(n,i)}):this.walk((n,i)=>{if(n.type==="atrule"&&n.name===e)return r(n,i)}):(r=e,this.walk((n,i)=>{if(n.type==="atrule")return r(n,i)}))}walkComments(e){return this.walk((r,n)=>{if(r.type==="comment")return e(r,n)})}walkDecls(e,r){return r?e instanceof RegExp?this.walk((n,i)=>{if(n.type==="decl"&&e.test(n.prop))return r(n,i)}):this.walk((n,i)=>{if(n.type==="decl"&&n.prop===e)return r(n,i)}):(r=e,this.walk((n,i)=>{if(n.type==="decl")return r(n,i)}))}walkRules(e,r){return r?e instanceof RegExp?this.walk((n,i)=>{if(n.type==="rule"&&e.test(n.selector))return r(n,i)}):this.walk((n,i)=>{if(n.type==="rule"&&n.selector===e)return r(n,i)}):(r=e,this.walk((n,i)=>{if(n.type==="rule")return r(n,i)}))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}};Js.registerParse=t=>{uF=t};Js.registerRule=t=>{mw=t};Js.registerAtRule=t=>{pw=t};Js.registerRoot=t=>{cF=t};var Sl=Js;Js.default=Js;Js.rebuild=t=>{t.type==="atrule"?Object.setPrototypeOf(t,pw.prototype):t.type==="rule"?Object.setPrototypeOf(t,mw.prototype):t.type==="decl"?Object.setPrototypeOf(t,aF.prototype):t.type==="comment"?Object.setPrototypeOf(t,sF.prototype):t.type==="root"&&Object.setPrototypeOf(t,cF.prototype),t[lF]=!0,t.nodes&&t.nodes.forEach(e=>{Js.rebuild(e)})};let pF=Sl,Ag=class extends pF{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}};var gw=Ag;Ag.default=Ag;pF.registerAtRule(Ag);let cme=Sl,mF,gF,Mh=class extends cme{constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(e={}){return new mF(new gF,this,e).stringify()}};Mh.registerLazyResult=t=>{mF=t};Mh.registerProcessor=t=>{gF=t};var vw=Mh;Mh.default=Mh;let dme="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",hme=(t,e=21)=>(r=e)=>{let n="",i=r;for(;i--;)n+=t[Math.random()*t.length|0];return n},fme=(t=21)=>{let e="",r=t;for(;r--;)e+=dme[Math.random()*64|0];return e};var pme={nanoid:fme,customAlphabet:hme};let{existsSync:mme,readFileSync:gme}=ji,{dirname:gy,join:vme}=ji,{SourceMapConsumer:GL,SourceMapGenerator:KL}=ji;function bme(t){return Buffer?Buffer.from(t,"base64").toString():window.atob(t)}let k_=class{constructor(e,r){if(r.map===!1)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let n=r.map?r.map.prev:void 0,i=this.loadMap(r.from,n);!this.mapFile&&r.from&&(this.mapFile=r.from),this.mapFile&&(this.root=gy(this.mapFile)),i&&(this.text=i)}consumer(){return this.consumerCache||(this.consumerCache=new GL(this.text)),this.consumerCache}decodeInline(e){let r=/^data:application\/json;charset=utf-?8;base64,/,n=/^data:application\/json;base64,/,i=/^data:application\/json;charset=utf-?8,/,s=/^data:application\/json,/,a=e.match(i)||e.match(s);if(a)return decodeURIComponent(e.substr(a[0].length));let o=e.match(r)||e.match(n);if(o)return bme(e.substr(o[0].length));let l=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+l)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return typeof e!="object"?!1:typeof e.mappings=="string"||typeof e._mappings=="string"||Array.isArray(e.sections)}loadAnnotation(e){let r=e.match(/\/\*\s*# sourceMappingURL=/g);if(!r)return;let n=e.lastIndexOf(r.pop()),i=e.indexOf("*/",n);n>-1&&i>-1&&(this.annotation=this.getAnnotationURL(e.substring(n,i)))}loadFile(e){if(this.root=gy(e),mme(e))return this.mapFile=e,gme(e,"utf-8").toString().trim()}loadMap(e,r){if(r===!1)return!1;if(r){if(typeof r=="string")return r;if(typeof r=="function"){let n=r(e);if(n){let i=this.loadFile(n);if(!i)throw new Error("Unable to load previous source map: "+n.toString());return i}}else{if(r instanceof GL)return KL.fromSourceMap(r).toString();if(r instanceof KL)return r.toString();if(this.isMap(r))return JSON.stringify(r);throw new Error("Unsupported previous source map format: "+r.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let n=this.annotation;return e&&(n=vme(gy(e),n)),this.loadFile(n)}}}startWith(e,r){return e?e.substr(0,r.length)===r:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}};var vF=k_;k_.default=k_;let{nanoid:yme}=pme,{isAbsolute:L_,resolve:D_}=ji,{SourceMapConsumer:Eme,SourceMapGenerator:_me}=ji,{fileURLToPath:qL,pathToFileURL:v0}=ji,zL=fw,Tme=vF,vy=ji,by=Symbol("fromOffsetCache"),xme=!!(Eme&&_me),YL=!!(D_&&L_),Rg=class{constructor(e,r={}){if(e===null||typeof e>"u"||typeof e=="object"&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),this.css[0]==="\uFEFF"||this.css[0]==="￾"?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,r.from&&(!YL||/^\w+:\/\//.test(r.from)||L_(r.from)?this.file=r.from:this.file=D_(r.from)),YL&&xme){let n=new Tme(this.css,r);if(n.text){this.map=n;let i=n.consumer().file;!this.file&&i&&(this.file=this.mapResolve(i))}}this.file||(this.id="<input css "+yme(6)+">"),this.map&&(this.map.file=this.from)}error(e,r,n,i={}){let s,a,o;if(r&&typeof r=="object"){let u=r,c=n;if(typeof u.offset=="number"){let d=this.fromOffset(u.offset);r=d.line,n=d.col}else r=u.line,n=u.column;if(typeof c.offset=="number"){let d=this.fromOffset(c.offset);a=d.line,s=d.col}else a=c.line,s=c.column}else if(!n){let u=this.fromOffset(r);r=u.line,n=u.col}let l=this.origin(r,n,a,s);return l?o=new zL(e,l.endLine===void 0?l.line:{column:l.column,line:l.line},l.endLine===void 0?l.column:{column:l.endColumn,line:l.endLine},l.source,l.file,i.plugin):o=new zL(e,a===void 0?r:{column:n,line:r},a===void 0?n:{column:s,line:a},this.css,this.file,i.plugin),o.input={column:n,endColumn:s,endLine:a,line:r,source:this.css},this.file&&(v0&&(o.input.url=v0(this.file).toString()),o.input.file=this.file),o}fromOffset(e){let r,n;if(this[by])n=this[by];else{let s=this.css.split(`
`);n=new Array(s.length);let a=0;for(let o=0,l=s.length;o<l;o++)n[o]=a,a+=s[o].length+1;this[by]=n}r=n[n.length-1];let i=0;if(e>=r)i=n.length-1;else{let s=n.length-2,a;for(;i<s;)if(a=i+(s-i>>1),e<n[a])s=a-1;else if(e>=n[a+1])i=a+1;else{i=a;break}}return{col:e-n[i]+1,line:i+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:D_(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,r,n,i){if(!this.map)return!1;let s=this.map.consumer(),a=s.originalPositionFor({column:r,line:e});if(!a.source)return!1;let o;typeof n=="number"&&(o=s.originalPositionFor({column:i,line:n}));let l;L_(a.source)?l=v0(a.source):l=new URL(a.source,this.map.consumer().sourceRoot||v0(this.map.mapFile));let u={column:a.column,endColumn:o&&o.column,endLine:o&&o.line,line:a.line,url:l.toString()};if(l.protocol==="file:")if(qL)u.file=qL(l);else throw new Error("file: protocol is not available in this PostCSS build");let c=s.sourceContentFor(a.source);return c&&(u.source=c),u}toJSON(){let e={};for(let r of["hasBOM","css","file","id"])this[r]!=null&&(e[r]=this[r]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}get from(){return this.file||this.id}};var Pv=Rg;Rg.default=Rg;vy&&vy.registerInput&&vy.registerInput(Rg);let bF=Sl,yF,EF,hc=class extends bF{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,r,n){let i=super.normalize(e);if(r){if(n==="prepend")this.nodes.length>1?r.raws.before=this.nodes[1].raws.before:delete r.raws.before;else if(this.first!==r)for(let s of i)s.raws.before=r.raws.before}return i}removeChild(e,r){let n=this.index(e);return!r&&n===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[n].raws.before),super.removeChild(e)}toResult(e={}){return new yF(new EF,this,e).stringify()}};hc.registerLazyResult=t=>{yF=t};hc.registerProcessor=t=>{EF=t};var of=hc;hc.default=hc;bF.registerRoot(hc);let Ph={comma(t){return Ph.split(t,[","],!0)},space(t){let e=[" ",`
`,"	"];return Ph.split(t,e)},split(t,e,r){let n=[],i="",s=!1,a=0,o=!1,l="",u=!1;for(let c of t)u?u=!1:c==="\\"?u=!0:o?c===l&&(o=!1):c==='"'||c==="'"?(o=!0,l=c):c==="("?a+=1:c===")"?a>0&&(a-=1):a===0&&e.includes(c)&&(s=!0),s?(i!==""&&n.push(i.trim()),i="",s=!1):i+=c;return(r||i!=="")&&n.push(i.trim()),n}};var _F=Ph;Ph.default=Ph;let TF=Sl,Sme=_F,Cg=class extends TF{constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return Sme.comma(this.selector)}set selectors(e){let r=this.selector?this.selector.match(/,\s*/):null,n=r?r[0]:","+this.raw("between","beforeOpen");this.selector=e.join(n)}};var bw=Cg;Cg.default=Cg;TF.registerRule(Cg);let wme=gw,Ame=Ov,Rme=Mv,Cme=Pv,Ime=vF,kme=of,Lme=bw;function Nh(t,e){if(Array.isArray(t))return t.map(i=>Nh(i));let{inputs:r,...n}=t;if(r){e=[];for(let i of r){let s={...i,__proto__:Cme.prototype};s.map&&(s.map={...s.map,__proto__:Ime.prototype}),e.push(s)}}if(n.nodes&&(n.nodes=t.nodes.map(i=>Nh(i,e))),n.source){let{inputId:i,...s}=n.source;n.source=s,i!=null&&(n.source.input=e[i])}if(n.type==="root")return new kme(n);if(n.type==="decl")return new Rme(n);if(n.type==="rule")return new Lme(n);if(n.type==="comment")return new Ame(n);if(n.type==="atrule")return new wme(n);throw new Error("Unknown node type: "+t.type)}var Dme=Nh;Nh.default=Nh;let{dirname:om,relative:xF,resolve:SF,sep:wF}=ji,{SourceMapConsumer:AF,SourceMapGenerator:lm}=ji,{pathToFileURL:XL}=ji,Ome=Pv,Mme=!!(AF&&lm),Pme=!!(om&&SF&&xF&&wF),Nme=class{constructor(e,r,n,i){this.stringify=e,this.mapOpts=n.map||{},this.root=r,this.opts=n,this.css=i,this.originalCSS=i,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;this.isInline()?e="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?e=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?e=this.mapOpts.annotation(this.opts.to,this.root):e=this.outputFile()+".map";let r=`
`;this.css.includes(`\r
`)&&(r=`\r
`),this.css+=r+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let e of this.previous()){let r=this.toUrl(this.path(e.file)),n=e.root||om(e.file),i;this.mapOpts.sourcesContent===!1?(i=new AF(e.text),i.sourcesContent&&(i.sourcesContent=null)):i=e.consumer(),this.map.applySourceMap(i,r,this.toUrl(this.path(n)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let e;for(let r=this.root.nodes.length-1;r>=0;r--)e=this.root.nodes[r],e.type==="comment"&&e.text.startsWith("# sourceMappingURL=")&&this.root.removeChild(r)}else this.css&&(this.css=this.css.replace(/\n*\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),Pme&&Mme&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,r=>{e+=r}),[e]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=lm.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new lm({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new lm({file:this.outputFile(),ignoreInvalidMapping:!0});let e=1,r=1,n="<no source>",i={generated:{column:0,line:0},original:{column:0,line:0},source:""},s,a;this.stringify(this.root,(o,l,u)=>{if(this.css+=o,l&&u!=="end"&&(i.generated.line=e,i.generated.column=r-1,l.source&&l.source.start?(i.source=this.sourcePath(l),i.original.line=l.source.start.line,i.original.column=l.source.start.column-1,this.map.addMapping(i)):(i.source=n,i.original.line=1,i.original.column=0,this.map.addMapping(i))),a=o.match(/\n/g),a?(e+=a.length,s=o.lastIndexOf(`
`),r=o.length-s):r+=o.length,l&&u!=="start"){let c=l.parent||{raws:{}};(!(l.type==="decl"||l.type==="atrule"&&!l.nodes)||l!==c.last||c.raws.semicolon)&&(l.source&&l.source.end?(i.source=this.sourcePath(l),i.original.line=l.source.end.line,i.original.column=l.source.end.column-1,i.generated.line=e,i.generated.column=r-2,this.map.addMapping(i)):(i.source=n,i.original.line=1,i.original.column=0,i.generated.line=e,i.generated.column=r-1,this.map.addMapping(i)))}})}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation<"u"?this.mapOpts.annotation:this.previous().length?this.previous().some(e=>e.annotation):!0}isInline(){if(typeof this.mapOpts.inline<"u")return this.mapOpts.inline;let e=this.mapOpts.annotation;return typeof e<"u"&&e!==!0?!1:this.previous().length?this.previous().some(r=>r.inline):!0}isMap(){return typeof this.opts.map<"u"?!!this.opts.map:this.previous().length>0}isSourcesContent(){return typeof this.mapOpts.sourcesContent<"u"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(e=>e.withContent()):!0}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(e){if(this.mapOpts.absolute||e.charCodeAt(0)===60||/^\w+:\/\//.test(e))return e;let r=this.memoizedPaths.get(e);if(r)return r;let n=this.opts.to?om(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(n=om(SF(n,this.mapOpts.annotation)));let i=xF(n,e);return this.memoizedPaths.set(e,i),i}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(e=>{if(e.source&&e.source.input.map){let r=e.source.input.map;this.previousMaps.includes(r)||this.previousMaps.push(r)}});else{let e=new Ome(this.originalCSS,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk(r=>{if(r.source){let n=r.source.input.from;if(n&&!e[n]){e[n]=!0;let i=this.usesFileUrls?this.toFileUrl(n):this.toUrl(this.path(n));this.map.setSourceContent(i,r.source.input.css)}}});else if(this.css){let r=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(r,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let r=this.memoizedFileURLs.get(e);if(r)return r;if(XL){let n=XL(e).toString();return this.memoizedFileURLs.set(e,n),n}else throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let r=this.memoizedURLs.get(e);if(r)return r;wF==="\\"&&(e=e.replace(/\\/g,"/"));let n=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,n),n}};var RF=Nme;const yy=39,ZL=34,b0=92,QL=47,y0=10,td=32,E0=12,_0=9,T0=13,Fme=91,$me=93,Ume=40,Bme=41,jme=123,Hme=125,Vme=59,Wme=42,Gme=58,Kme=64,x0=/[\t\n\f\r "#'()/;[\\\]{}]/g,S0=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,qme=/.[\r\n"'(/\\]/,JL=/[\da-f]/i;var zme=function(e,r={}){let n=e.css.valueOf(),i=r.ignoreErrors,s,a,o,l,u,c,d,h,f,p,m=n.length,g=0,v=[],b=[];function y(){return g}function T(A){throw e.error("Unclosed "+A,g)}function x(){return b.length===0&&g>=m}function _(A){if(b.length)return b.pop();if(g>=m)return;let k=A?A.ignoreUnclosed:!1;switch(s=n.charCodeAt(g),s){case y0:case td:case _0:case T0:case E0:{l=g;do l+=1,s=n.charCodeAt(l);while(s===td||s===y0||s===_0||s===T0||s===E0);c=["space",n.slice(g,l)],g=l-1;break}case Fme:case $me:case jme:case Hme:case Gme:case Vme:case Bme:{let I=String.fromCharCode(s);c=[I,I,g];break}case Ume:{if(p=v.length?v.pop()[1]:"",f=n.charCodeAt(g+1),p==="url"&&f!==yy&&f!==ZL&&f!==td&&f!==y0&&f!==_0&&f!==E0&&f!==T0){l=g;do{if(d=!1,l=n.indexOf(")",l+1),l===-1)if(i||k){l=g;break}else T("bracket");for(h=l;n.charCodeAt(h-1)===b0;)h-=1,d=!d}while(d);c=["brackets",n.slice(g,l+1),g,l],g=l}else l=n.indexOf(")",g+1),a=n.slice(g,l+1),l===-1||qme.test(a)?c=["(","(",g]:(c=["brackets",a,g,l],g=l);break}case yy:case ZL:{u=s===yy?"'":'"',l=g;do{if(d=!1,l=n.indexOf(u,l+1),l===-1)if(i||k){l=g+1;break}else T("string");for(h=l;n.charCodeAt(h-1)===b0;)h-=1,d=!d}while(d);c=["string",n.slice(g,l+1),g,l],g=l;break}case Kme:{x0.lastIndex=g+1,x0.test(n),x0.lastIndex===0?l=n.length-1:l=x0.lastIndex-2,c=["at-word",n.slice(g,l+1),g,l],g=l;break}case b0:{for(l=g,o=!0;n.charCodeAt(l+1)===b0;)l+=1,o=!o;if(s=n.charCodeAt(l+1),o&&s!==QL&&s!==td&&s!==y0&&s!==_0&&s!==T0&&s!==E0&&(l+=1,JL.test(n.charAt(l)))){for(;JL.test(n.charAt(l+1));)l+=1;n.charCodeAt(l+1)===td&&(l+=1)}c=["word",n.slice(g,l+1),g,l],g=l;break}default:{s===QL&&n.charCodeAt(g+1)===Wme?(l=n.indexOf("*/",g+2)+1,l===0&&(i||k?l=n.length:T("comment")),c=["comment",n.slice(g,l+1),g,l],g=l):(S0.lastIndex=g+1,S0.test(n),S0.lastIndex===0?l=n.length-1:l=S0.lastIndex-2,c=["word",n.slice(g,l+1),g,l],v.push(c),g=l);break}}return g++,c}function S(A){b.push(A)}return{back:S,endOfFile:x,nextToken:_,position:y}};let Yme=gw,Xme=Ov,Zme=Mv,Qme=of,eD=bw,Jme=zme;const tD={empty:!0,space:!0};function ege(t){for(let e=t.length-1;e>=0;e--){let r=t[e],n=r[3]||r[2];if(n)return n}}let tge=class{constructor(e){this.input=e,this.root=new Qme,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let r=new Yme;r.name=e[1].slice(1),r.name===""&&this.unnamedAtrule(r,e),this.init(r,e[2]);let n,i,s,a=!1,o=!1,l=[],u=[];for(;!this.tokenizer.endOfFile();){if(e=this.tokenizer.nextToken(),n=e[0],n==="("||n==="["?u.push(n==="("?")":"]"):n==="{"&&u.length>0?u.push("}"):n===u[u.length-1]&&u.pop(),u.length===0)if(n===";"){r.source.end=this.getPosition(e[2]),r.source.end.offset++,this.semicolon=!0;break}else if(n==="{"){o=!0;break}else if(n==="}"){if(l.length>0){for(s=l.length-1,i=l[s];i&&i[0]==="space";)i=l[--s];i&&(r.source.end=this.getPosition(i[3]||i[2]),r.source.end.offset++)}this.end(e);break}else l.push(e);else l.push(e);if(this.tokenizer.endOfFile()){a=!0;break}}r.raws.between=this.spacesAndCommentsFromEnd(l),l.length?(r.raws.afterName=this.spacesAndCommentsFromStart(l),this.raw(r,"params",l),a&&(e=l[l.length-1],r.source.end=this.getPosition(e[3]||e[2]),r.source.end.offset++,this.spaces=r.raws.between,r.raws.between="")):(r.raws.afterName="",r.params=""),o&&(r.nodes=[],this.current=r)}checkMissedSemicolon(e){let r=this.colon(e);if(r===!1)return;let n=0,i;for(let s=r-1;s>=0&&(i=e[s],!(i[0]!=="space"&&(n+=1,n===2)));s--);throw this.input.error("Missed semicolon",i[0]==="word"?i[3]+1:i[2])}colon(e){let r=0,n,i,s;for(let[a,o]of e.entries()){if(i=o,s=i[0],s==="("&&(r+=1),s===")"&&(r-=1),r===0&&s===":")if(!n)this.doubleColon(i);else{if(n[0]==="word"&&n[1]==="progid")continue;return a}n=i}return!1}comment(e){let r=new Xme;this.init(r,e[2]),r.source.end=this.getPosition(e[3]||e[2]),r.source.end.offset++;let n=e[1].slice(2,-2);if(/^\s*$/.test(n))r.text="",r.raws.left=n,r.raws.right="";else{let i=n.match(/^(\s*)([^]*\S)(\s*)$/);r.text=i[2],r.raws.left=i[1],r.raws.right=i[3]}}createTokenizer(){this.tokenizer=Jme(this.input)}decl(e,r){let n=new Zme;this.init(n,e[0][2]);let i=e[e.length-1];for(i[0]===";"&&(this.semicolon=!0,e.pop()),n.source.end=this.getPosition(i[3]||i[2]||ege(e)),n.source.end.offset++;e[0][0]!=="word";)e.length===1&&this.unknownWord(e),n.raws.before+=e.shift()[1];for(n.source.start=this.getPosition(e[0][2]),n.prop="";e.length;){let u=e[0][0];if(u===":"||u==="space"||u==="comment")break;n.prop+=e.shift()[1]}n.raws.between="";let s;for(;e.length;)if(s=e.shift(),s[0]===":"){n.raws.between+=s[1];break}else s[0]==="word"&&/\w/.test(s[1])&&this.unknownWord([s]),n.raws.between+=s[1];(n.prop[0]==="_"||n.prop[0]==="*")&&(n.raws.before+=n.prop[0],n.prop=n.prop.slice(1));let a=[],o;for(;e.length&&(o=e[0][0],!(o!=="space"&&o!=="comment"));)a.push(e.shift());this.precheckMissedSemicolon(e);for(let u=e.length-1;u>=0;u--){if(s=e[u],s[1].toLowerCase()==="!important"){n.important=!0;let c=this.stringFrom(e,u);c=this.spacesFromEnd(e)+c,c!==" !important"&&(n.raws.important=c);break}else if(s[1].toLowerCase()==="important"){let c=e.slice(0),d="";for(let h=u;h>0;h--){let f=c[h][0];if(d.trim().startsWith("!")&&f!=="space")break;d=c.pop()[1]+d}d.trim().startsWith("!")&&(n.important=!0,n.raws.important=d,e=c)}if(s[0]!=="space"&&s[0]!=="comment")break}e.some(u=>u[0]!=="space"&&u[0]!=="comment")&&(n.raws.between+=a.map(u=>u[1]).join(""),a=[]),this.raw(n,"value",a.concat(e),r),n.value.includes(":")&&!r&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let r=new eD;this.init(r,e[2]),r.selector="",r.raws.between="",this.current=r}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let r=this.current.nodes[this.current.nodes.length-1];r&&r.type==="rule"&&!r.raws.ownSemicolon&&(r.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let r=this.input.fromOffset(e);return{column:r.col,line:r.line,offset:e}}init(e,r){this.current.push(e),e.source={input:this.input,start:this.getPosition(r)},e.raws.before=this.spaces,this.spaces="",e.type!=="comment"&&(this.semicolon=!1)}other(e){let r=!1,n=null,i=!1,s=null,a=[],o=e[1].startsWith("--"),l=[],u=e;for(;u;){if(n=u[0],l.push(u),n==="("||n==="[")s||(s=u),a.push(n==="("?")":"]");else if(o&&i&&n==="{")s||(s=u),a.push("}");else if(a.length===0)if(n===";")if(i){this.decl(l,o);return}else break;else if(n==="{"){this.rule(l);return}else if(n==="}"){this.tokenizer.back(l.pop()),r=!0;break}else n===":"&&(i=!0);else n===a[a.length-1]&&(a.pop(),a.length===0&&(s=null));u=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(r=!0),a.length>0&&this.unclosedBracket(s),r&&i){if(!o)for(;l.length&&(u=l[l.length-1][0],!(u!=="space"&&u!=="comment"));)this.tokenizer.back(l.pop());this.decl(l,o)}else this.unknownWord(l)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e);break}this.endFile()}precheckMissedSemicolon(){}raw(e,r,n,i){let s,a,o=n.length,l="",u=!0,c,d;for(let h=0;h<o;h+=1)s=n[h],a=s[0],a==="space"&&h===o-1&&!i?u=!1:a==="comment"?(d=n[h-1]?n[h-1][0]:"empty",c=n[h+1]?n[h+1][0]:"empty",!tD[d]&&!tD[c]?l.slice(-1)===","?u=!1:l+=s[1]:u=!1):l+=s[1];if(!u){let h=n.reduce((f,p)=>f+p[1],"");e.raws[r]={raw:h,value:l}}e[r]=l}rule(e){e.pop();let r=new eD;this.init(r,e[0][2]),r.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(r,"selector",e),this.current=r}spacesAndCommentsFromEnd(e){let r,n="";for(;e.length&&(r=e[e.length-1][0],!(r!=="space"&&r!=="comment"));)n=e.pop()[1]+n;return n}spacesAndCommentsFromStart(e){let r,n="";for(;e.length&&(r=e[0][0],!(r!=="space"&&r!=="comment"));)n+=e.shift()[1];return n}spacesFromEnd(e){let r,n="";for(;e.length&&(r=e[e.length-1][0],r==="space");)n=e.pop()[1]+n;return n}stringFrom(e,r){let n="";for(let i=r;i<e.length;i++)n+=e[i][1];return e.splice(r,e.length-r),n}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,r){throw this.input.error("At-rule without name",{offset:r[2]},{offset:r[2]+r[1].length})}};var rge=tge;let nge=Sl,ige=Pv,sge=rge;function Ig(t,e){let r=new ige(t,e),n=new sge(r);try{n.parse()}catch(i){throw i}return n.root}var yw=Ig;Ig.default=Ig;nge.registerParse(Ig);let O_=class{constructor(e,r={}){if(this.type="warning",this.text=e,r.node&&r.node.source){let n=r.node.rangeBy(r);this.line=n.start.line,this.column=n.start.column,this.endLine=n.end.line,this.endColumn=n.end.column}for(let n in r)this[n]=r[n]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};var CF=O_;O_.default=O_;let age=CF,M_=class{constructor(e,r,n){this.processor=e,this.messages=[],this.root=r,this.opts=n,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,r={}){r.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(r.plugin=this.lastPlugin.postcssPlugin);let n=new age(e,r);return this.messages.push(n),n}warnings(){return this.messages.filter(e=>e.type==="warning")}get content(){return this.css}};var Ew=M_;M_.default=M_;let oge=Sl,lge=vw,uge=RF,cge=yw,rD=Ew,dge=of,hge=Lv,{isClean:ss,my:fge}=af;const pge={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},mge={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},gge={Once:!0,postcssPlugin:!0,prepare:!0},fc=0;function rd(t){return typeof t=="object"&&typeof t.then=="function"}function IF(t){let e=!1,r=pge[t.type];return t.type==="decl"?e=t.prop.toLowerCase():t.type==="atrule"&&(e=t.name.toLowerCase()),e&&t.append?[r,r+"-"+e,fc,r+"Exit",r+"Exit-"+e]:e?[r,r+"-"+e,r+"Exit",r+"Exit-"+e]:t.append?[r,fc,r+"Exit"]:[r,r+"Exit"]}function nD(t){let e;return t.type==="document"?e=["Document",fc,"DocumentExit"]:t.type==="root"?e=["Root",fc,"RootExit"]:e=IF(t),{eventIndex:0,events:e,iterator:0,node:t,visitorIndex:0,visitors:[]}}function P_(t){return t[ss]=!1,t.nodes&&t.nodes.forEach(e=>P_(e)),t}let N_={},pc=class kF{constructor(e,r,n){this.stringified=!1,this.processed=!1;let i;if(typeof r=="object"&&r!==null&&(r.type==="root"||r.type==="document"))i=P_(r);else if(r instanceof kF||r instanceof rD)i=P_(r.root),r.map&&(typeof n.map>"u"&&(n.map={}),n.map.inline||(n.map.inline=!1),n.map.prev=r.map);else{let s=cge;n.syntax&&(s=n.syntax.parse),n.parser&&(s=n.parser),s.parse&&(s=s.parse);try{i=s(r,n)}catch(a){this.processed=!0,this.error=a}i&&!i[fge]&&oge.rebuild(i)}this.result=new rD(e,i,n),this.helpers={...N_,postcss:N_,result:this.result},this.plugins=this.processor.plugins.map(s=>typeof s=="object"&&s.prepare?{...s,...s.prepare(this.result)}:s)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,r){let n=this.result.lastPlugin;try{r&&r.addToError(e),this.error=e,e.name==="CssSyntaxError"&&!e.plugin?(e.plugin=n.postcssPlugin,e.setMessage()):n.postcssVersion}catch(i){console&&console.error&&console.error(i)}return e}prepareVisitors(){this.listeners={};let e=(r,n,i)=>{this.listeners[n]||(this.listeners[n]=[]),this.listeners[n].push([r,i])};for(let r of this.plugins)if(typeof r=="object")for(let n in r){if(!mge[n]&&/^[A-Z]/.test(n))throw new Error(`Unknown event ${n} in ${r.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!gge[n])if(typeof r[n]=="object")for(let i in r[n])i==="*"?e(r,n,r[n][i]):e(r,n+"-"+i.toLowerCase(),r[n][i]);else typeof r[n]=="function"&&e(r,n,r[n])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let r=this.plugins[e],n=this.runOnRoot(r);if(rd(n))try{await n}catch(i){throw this.handleError(i)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[ss];){e[ss]=!0;let r=[nD(e)];for(;r.length>0;){let n=this.visitTick(r);if(rd(n))try{await n}catch(i){let s=r[r.length-1].node;throw this.handleError(i,s)}}}if(this.listeners.OnceExit)for(let[r,n]of this.listeners.OnceExit){this.result.lastPlugin=r;try{if(e.type==="document"){let i=e.nodes.map(s=>n(s,this.helpers));await Promise.all(i)}else await n(e,this.helpers)}catch(i){throw this.handleError(i)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if(typeof e=="object"&&e.Once){if(this.result.root.type==="document"){let r=this.result.root.nodes.map(n=>e.Once(n,this.helpers));return rd(r[0])?Promise.all(r):r}return e.Once(this.result.root,this.helpers)}else if(typeof e=="function")return e(this.result.root,this.result)}catch(r){throw this.handleError(r)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,r=hge;e.syntax&&(r=e.syntax.stringify),e.stringifier&&(r=e.stringifier),r.stringify&&(r=r.stringify);let i=new uge(r,this.result.root,this.result.opts).generate();return this.result.css=i[0],this.result.map=i[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){let r=this.runOnRoot(e);if(rd(r))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[ss];)e[ss]=!0,this.walkSync(e);if(this.listeners.OnceExit)if(e.type==="document")for(let r of e.nodes)this.visitSync(this.listeners.OnceExit,r);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,r){return this.async().then(e,r)}toString(){return this.css}visitSync(e,r){for(let[n,i]of e){this.result.lastPlugin=n;let s;try{s=i(r,this.helpers)}catch(a){throw this.handleError(a,r.proxyOf)}if(r.type!=="root"&&r.type!=="document"&&!r.parent)return!0;if(rd(s))throw this.getAsyncError()}}visitTick(e){let r=e[e.length-1],{node:n,visitors:i}=r;if(n.type!=="root"&&n.type!=="document"&&!n.parent){e.pop();return}if(i.length>0&&r.visitorIndex<i.length){let[a,o]=i[r.visitorIndex];r.visitorIndex+=1,r.visitorIndex===i.length&&(r.visitors=[],r.visitorIndex=0),this.result.lastPlugin=a;try{return o(n.toProxy(),this.helpers)}catch(l){throw this.handleError(l,n)}}if(r.iterator!==0){let a=r.iterator,o;for(;o=n.nodes[n.indexes[a]];)if(n.indexes[a]+=1,!o[ss]){o[ss]=!0,e.push(nD(o));return}r.iterator=0,delete n.indexes[a]}let s=r.events;for(;r.eventIndex<s.length;){let a=s[r.eventIndex];if(r.eventIndex+=1,a===fc){n.nodes&&n.nodes.length&&(n[ss]=!0,r.iterator=n.getIterator());return}else if(this.listeners[a]){r.visitors=this.listeners[a];return}}e.pop()}walkSync(e){e[ss]=!0;let r=IF(e);for(let n of r)if(n===fc)e.nodes&&e.each(i=>{i[ss]||this.walkSync(i)});else{let i=this.listeners[n];if(i&&this.visitSync(i,e.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}};pc.registerPostcss=t=>{N_=t};var LF=pc;pc.default=pc;dge.registerLazyResult(pc);lge.registerLazyResult(pc);let vge=RF,bge=yw;const yge=Ew;let Ege=Lv,F_=class{constructor(e,r,n){r=r.toString(),this.stringified=!1,this._processor=e,this._css=r,this._opts=n,this._map=void 0;let i,s=Ege;this.result=new yge(this._processor,i,this._opts),this.result.css=r;let a=this;Object.defineProperty(this.result,"root",{get(){return a.root}});let o=new vge(s,i,this._opts,r);if(o.isMap()){let[l,u]=o.generate();l&&(this.result.css=l),u&&(this.result.map=u)}else o.clearAnnotation(),this.result.css=o.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,r){return this.async().then(e,r)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,r=bge;try{e=r(this._css,this._opts)}catch(n){this.error=n}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}};var _ge=F_;F_.default=F_;let Tge=vw,xge=LF,Sge=_ge,wge=of,Fh=class{constructor(e=[]){this.version="8.4.45",this.plugins=this.normalize(e)}normalize(e){let r=[];for(let n of e)if(n.postcss===!0?n=n():n.postcss&&(n=n.postcss),typeof n=="object"&&Array.isArray(n.plugins))r=r.concat(n.plugins);else if(typeof n=="object"&&n.postcssPlugin)r.push(n);else if(typeof n=="function")r.push(n);else if(!(typeof n=="object"&&(n.parse||n.stringify)))throw new Error(n+" is not a PostCSS plugin");return r}process(e,r={}){return!this.plugins.length&&!r.parser&&!r.stringifier&&!r.syntax?new Sge(this,e,r):new xge(this,e,r)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}};var Age=Fh;Fh.default=Fh;wge.registerProcessor(Fh);Tge.registerProcessor(Fh);var iD={};let DF=gw,OF=Ov,Rge=Sl,Cge=fw,MF=Mv,PF=vw,Ige=Dme,kge=Pv,Lge=LF,Dge=_F,Oge=Dv,Mge=yw,_w=Age,Pge=Ew,NF=of,FF=bw,Nge=Lv,Fge=CF;function Pt(...t){return t.length===1&&Array.isArray(t[0])&&(t=t[0]),new _w(t)}Pt.plugin=function(e,r){let n=!1;function i(...a){console&&console.warn&&!n&&(n=!0,console.warn(e+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),iD.LANG&&iD.LANG.startsWith("cn")&&console.warn(e+`: 里面 postcss.plugin 被弃用. 迁移指南:
https://www.w3ctech.com/topic/2226`));let o=r(...a);return o.postcssPlugin=e,o.postcssVersion=new _w().version,o}let s;return Object.defineProperty(i,"postcss",{get(){return s||(s=i()),s}}),i.process=function(a,o,l){return Pt([i(l)]).process(a,o)},i};Pt.stringify=Nge;Pt.parse=Mge;Pt.fromJSON=Ige;Pt.list=Dge;Pt.comment=t=>new OF(t);Pt.atRule=t=>new DF(t);Pt.decl=t=>new MF(t);Pt.rule=t=>new FF(t);Pt.root=t=>new NF(t);Pt.document=t=>new PF(t);Pt.CssSyntaxError=Cge;Pt.Declaration=MF;Pt.Container=Rge;Pt.Processor=_w;Pt.Document=PF;Pt.Comment=OF;Pt.Warning=Fge;Pt.AtRule=DF;Pt.Result=Pge;Pt.Input=kge;Pt.Rule=FF;Pt.Root=NF;Pt.Node=Oge;Lge.registerPostcss(Pt);var $ge=Pt;Pt.default=Pt;const Uge=U8,sD=Ppe,{isPlainObject:Bge}=dw,aD=Xpe,jge=Zpe,{parse:Hge}=$ge,Vge=["img","audio","video","picture","svg","object","map","iframe","embed"],Wge=["script","style"];function Fd(t,e){t&&Object.keys(t).forEach(function(r){e(t[r],r)})}function Us(t,e){return{}.hasOwnProperty.call(t,e)}function oD(t,e){const r=[];return Fd(t,function(n){e(n)&&r.push(n)}),r}function Gge(t){for(const e in t)if(Us(t,e))return!1;return!0}function Kge(t){return t.map(function(e){if(!e.url)throw new Error("URL missing");return e.url+(e.w?` ${e.w}w`:"")+(e.h?` ${e.h}h`:"")+(e.d?` ${e.d}x`:"")}).join(", ")}var qge=$h;const zge=/^[^\0\t\n\f\r /<=>]+$/;function $h(t,e,r){if(t==null)return"";typeof t=="number"&&(t=t.toString());let n="",i="";function s(M,U){const B=this;this.tag=M,this.attribs=U||{},this.tagPosition=n.length,this.text="",this.mediaChildren=[],this.updateParentNodeText=function(){if(g.length){const X=g[g.length-1];X.text+=B.text}},this.updateParentNodeMediaChildren=function(){g.length&&Vge.includes(this.tag)&&g[g.length-1].mediaChildren.push(this.tag)}}e=Object.assign({},$h.defaults,e),e.parser=Object.assign({},Yge,e.parser);const a=function(M){return e.allowedTags===!1||(e.allowedTags||[]).indexOf(M)>-1};Wge.forEach(function(M){a(M)&&!e.allowVulnerableTags&&console.warn(`

⚠️ Your \`allowedTags\` option includes, \`${M}\`, which is inherently
vulnerable to XSS attacks. Please remove it from \`allowedTags\`.
Or, to disable this warning, add the \`allowVulnerableTags\` option
and ensure you are accounting for this risk.

`)});const o=e.nonTextTags||["script","style","textarea","option"];let l,u;e.allowedAttributes&&(l={},u={},Fd(e.allowedAttributes,function(M,U){l[U]=[];const B=[];M.forEach(function(X){typeof X=="string"&&X.indexOf("*")>=0?B.push(sD(X).replace(/\\\*/g,".*")):l[U].push(X)}),B.length&&(u[U]=new RegExp("^("+B.join("|")+")$"))}));const c={},d={},h={};Fd(e.allowedClasses,function(M,U){if(l&&(Us(l,U)||(l[U]=[]),l[U].push("class")),c[U]=M,Array.isArray(M)){const B=[];c[U]=[],h[U]=[],M.forEach(function(X){typeof X=="string"&&X.indexOf("*")>=0?B.push(sD(X).replace(/\\\*/g,".*")):X instanceof RegExp?h[U].push(X):c[U].push(X)}),B.length&&(d[U]=new RegExp("^("+B.join("|")+")$"))}});const f={};let p;Fd(e.transformTags,function(M,U){let B;typeof M=="function"?B=M:typeof M=="string"&&(B=$h.simpleTransform(M)),U==="*"?p=B:f[U]=B});let m,g,v,b,y,T,x=!1;S();const _=new Uge.Parser({onopentag:function(M,U){if(e.enforceHtmlBoundary&&M==="html"&&S(),y){T++;return}const B=new s(M,U);g.push(B);let X=!1;const te=!!B.text;let D;if(Us(f,M)&&(D=f[M](M,U),B.attribs=U=D.attribs,D.text!==void 0&&(B.innerText=D.text),M!==D.tagName&&(B.name=M=D.tagName,b[m]=D.tagName)),p&&(D=p(M,U),B.attribs=U=D.attribs,M!==D.tagName&&(B.name=M=D.tagName,b[m]=D.tagName)),(!a(M)||e.disallowedTagsMode==="recursiveEscape"&&!Gge(v)||e.nestingLimit!=null&&m>=e.nestingLimit)&&(X=!0,v[m]=!0,(e.disallowedTagsMode==="discard"||e.disallowedTagsMode==="completelyDiscard")&&o.indexOf(M)!==-1&&(y=!0,T=1),v[m]=!0),m++,X){if(e.disallowedTagsMode==="discard"||e.disallowedTagsMode==="completelyDiscard")return;i=n,n=""}n+="<"+M,M==="script"&&(e.allowedScriptHostnames||e.allowedScriptDomains)&&(B.innerText=""),(!l||Us(l,M)||l["*"])&&Fd(U,function(L,Y){if(!zge.test(Y)){delete B.attribs[Y];return}if(L===""&&!e.allowedEmptyAttributes.includes(Y)&&(e.nonBooleanAttributes.includes(Y)||e.nonBooleanAttributes.includes("*"))){delete B.attribs[Y];return}let $=!1;if(!l||Us(l,M)&&l[M].indexOf(Y)!==-1||l["*"]&&l["*"].indexOf(Y)!==-1||Us(u,M)&&u[M].test(Y)||u["*"]&&u["*"].test(Y))$=!0;else if(l&&l[M]){for(const j of l[M])if(Bge(j)&&j.name&&j.name===Y){$=!0;let z="";if(j.multiple===!0){const re=L.split(" ");for(const ne of re)j.values.indexOf(ne)!==-1&&(z===""?z=ne:z+=" "+ne)}else j.values.indexOf(L)>=0&&(z=L);L=z}}if($){if(e.allowedSchemesAppliedToAttributes.indexOf(Y)!==-1&&k(M,L)){delete B.attribs[Y];return}if(M==="script"&&Y==="src"){let j=!0;try{const z=I(L);if(e.allowedScriptHostnames||e.allowedScriptDomains){const re=(e.allowedScriptHostnames||[]).find(function(ue){return ue===z.url.hostname}),ne=(e.allowedScriptDomains||[]).find(function(ue){return z.url.hostname===ue||z.url.hostname.endsWith(`.${ue}`)});j=re||ne}}catch{j=!1}if(!j){delete B.attribs[Y];return}}if(M==="iframe"&&Y==="src"){let j=!0;try{const z=I(L);if(z.isRelativeUrl)j=Us(e,"allowIframeRelativeUrls")?e.allowIframeRelativeUrls:!e.allowedIframeHostnames&&!e.allowedIframeDomains;else if(e.allowedIframeHostnames||e.allowedIframeDomains){const re=(e.allowedIframeHostnames||[]).find(function(ue){return ue===z.url.hostname}),ne=(e.allowedIframeDomains||[]).find(function(ue){return z.url.hostname===ue||z.url.hostname.endsWith(`.${ue}`)});j=re||ne}}catch{j=!1}if(!j){delete B.attribs[Y];return}}if(Y==="srcset")try{let j=jge(L);if(j.forEach(function(z){k("srcset",z.url)&&(z.evil=!0)}),j=oD(j,function(z){return!z.evil}),j.length)L=Kge(oD(j,function(z){return!z.evil})),B.attribs[Y]=L;else{delete B.attribs[Y];return}}catch{delete B.attribs[Y];return}if(Y==="class"){const j=c[M],z=c["*"],re=d[M],ne=h[M],ue=h["*"],Te=d["*"],ce=[re,Te].concat(ne,ue).filter(function(_e){return _e});if(j&&z?L=V(L,aD(j,z),ce):L=V(L,j||z,ce),!L.length){delete B.attribs[Y];return}}if(Y==="style"){if(e.parseStyleAttributes)try{const j=Hge(M+" {"+L+"}",{map:!1}),z=C(j,e.allowedStyles);if(L=N(z),L.length===0){delete B.attribs[Y];return}}catch{typeof window<"u"&&console.warn('Failed to parse "'+M+" {"+L+`}", If you're running this in a browser, we recommend to disable style parsing: options.parseStyleAttributes: false, since this only works in a node environment due to a postcss dependency, More info: https://github.com/apostrophecms/sanitize-html/issues/547`),delete B.attribs[Y];return}else if(e.allowedStyles)throw new Error("allowedStyles option cannot be used together with parseStyleAttributes: false.")}n+=" "+Y,L&&L.length?n+='="'+A(L,!0)+'"':e.allowedEmptyAttributes.includes(Y)&&(n+='=""')}else delete B.attribs[Y]}),e.selfClosing.indexOf(M)!==-1?n+=" />":(n+=">",B.innerText&&!te&&!e.textFilter&&(n+=A(B.innerText),x=!0)),X&&(n=i+A(n),i="")},ontext:function(M){if(y)return;const U=g[g.length-1];let B;if(U&&(B=U.tag,M=U.innerText!==void 0?U.innerText:M),e.disallowedTagsMode==="completelyDiscard"&&!a(B))M="";else if((e.disallowedTagsMode==="discard"||e.disallowedTagsMode==="completelyDiscard")&&(B==="script"||B==="style"))n+=M;else{const X=A(M,!1);e.textFilter&&!x?n+=e.textFilter(X,B):x||(n+=X)}if(g.length){const X=g[g.length-1];X.text+=M}},onclosetag:function(M,U){if(y)if(T--,!T)y=!1;else return;const B=g.pop();if(!B)return;if(B.tag!==M){g.push(B);return}y=e.enforceHtmlBoundary?M==="html":!1,m--;const X=v[m];if(X){if(delete v[m],e.disallowedTagsMode==="discard"||e.disallowedTagsMode==="completelyDiscard"){B.updateParentNodeText();return}i=n,n=""}if(b[m]&&(M=b[m],delete b[m]),e.exclusiveFilter&&e.exclusiveFilter(B)){n=n.substr(0,B.tagPosition);return}if(B.updateParentNodeMediaChildren(),B.updateParentNodeText(),e.selfClosing.indexOf(M)!==-1||U&&!a(M)&&["escape","recursiveEscape"].indexOf(e.disallowedTagsMode)>=0){X&&(n=i,i="");return}n+="</"+M+">",X&&(n=i+A(n),i=""),x=!1}},e.parser);return _.write(t),_.end(),n;function S(){n="",m=0,g=[],v={},b={},y=!1,T=0}function A(M,U){return typeof M!="string"&&(M=M+""),e.parser.decodeEntities&&(M=M.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),U&&(M=M.replace(/"/g,"&quot;"))),M=M.replace(/&(?![a-zA-Z0-9#]{1,20};)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),U&&(M=M.replace(/"/g,"&quot;")),M}function k(M,U){for(U=U.replace(/[\x00-\x20]+/g,"");;){const te=U.indexOf("<!--");if(te===-1)break;const D=U.indexOf("-->",te+4);if(D===-1)break;U=U.substring(0,te)+U.substring(D+3)}const B=U.match(/^([a-zA-Z][a-zA-Z0-9.\-+]*):/);if(!B)return U.match(/^[/\\]{2}/)?!e.allowProtocolRelative:!1;const X=B[1].toLowerCase();return Us(e.allowedSchemesByTag,M)?e.allowedSchemesByTag[M].indexOf(X)===-1:!e.allowedSchemes||e.allowedSchemes.indexOf(X)===-1}function I(M){if(M=M.replace(/^(\w+:)?\s*[\\/]\s*[\\/]/,"$1//"),M.startsWith("relative:"))throw new Error("relative: exploit attempt");let U="relative://relative-site";for(let te=0;te<100;te++)U+=`/${te}`;const B=new URL(M,U);return{isRelativeUrl:B&&B.hostname==="relative-site"&&B.protocol==="relative:",url:B}}function C(M,U){if(!U)return M;const B=M.nodes[0];let X;return U[B.selector]&&U["*"]?X=aD(U[B.selector],U["*"]):X=U[B.selector]||U["*"],X&&(M.nodes[0].nodes=B.nodes.reduce(P(X),[])),M}function N(M){return M.nodes[0].nodes.reduce(function(U,B){return U.push(`${B.prop}:${B.value}${B.important?" !important":""}`),U},[]).join(";")}function P(M){return function(U,B){return Us(M,B.prop)&&M[B.prop].some(function(te){return te.test(B.value)})&&U.push(B),U}}function V(M,U,B){return U?(M=M.split(/\s+/),M.filter(function(X){return U.indexOf(X)!==-1||B.some(function(te){return te.test(X)})}).join(" ")):M}}const Yge={decodeEntities:!0};$h.defaults={allowedTags:["address","article","aside","footer","header","h1","h2","h3","h4","h5","h6","hgroup","main","nav","section","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","main","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rb","rp","rt","rtc","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr"],nonBooleanAttributes:["abbr","accept","accept-charset","accesskey","action","allow","alt","as","autocapitalize","autocomplete","blocking","charset","cite","class","color","cols","colspan","content","contenteditable","coords","crossorigin","data","datetime","decoding","dir","dirname","download","draggable","enctype","enterkeyhint","fetchpriority","for","form","formaction","formenctype","formmethod","formtarget","headers","height","hidden","high","href","hreflang","http-equiv","id","imagesizes","imagesrcset","inputmode","integrity","is","itemid","itemprop","itemref","itemtype","kind","label","lang","list","loading","low","max","maxlength","media","method","min","minlength","name","nonce","optimum","pattern","ping","placeholder","popover","popovertarget","popovertargetaction","poster","preload","referrerpolicy","rel","rows","rowspan","sandbox","scope","shape","size","sizes","slot","span","spellcheck","src","srcdoc","srclang","srcset","start","step","style","tabindex","target","title","translate","type","usemap","value","width","wrap","onauxclick","onafterprint","onbeforematch","onbeforeprint","onbeforeunload","onbeforetoggle","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontextlost","oncontextmenu","oncontextrestored","oncopy","oncuechange","oncut","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onformdata","onhashchange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onlanguagechange","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmessageerror","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onoffline","ononline","onpagehide","onpageshow","onpaste","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreset","onresize","onrejectionhandled","onscroll","onscrollend","onsecuritypolicyviolation","onseeked","onseeking","onselect","onslotchange","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","ontoggle","onunhandledrejection","onunload","onvolumechange","onwaiting","onwheel"],disallowedTagsMode:"discard",allowedAttributes:{a:["href","name","target"],img:["src","srcset","alt","title","width","height","loading"]},allowedEmptyAttributes:["alt"],selfClosing:["img","br","hr","area","base","basefont","input","link","meta"],allowedSchemes:["http","https","ftp","mailto","tel"],allowedSchemesByTag:{},allowedSchemesAppliedToAttributes:["href","src","cite"],allowProtocolRelative:!0,enforceHtmlBoundary:!1,parseStyleAttributes:!0};$h.simpleTransform=function(t,e,r){return r=r===void 0?!0:r,e=e||{},function(n,i){let s;if(r)for(s in e)i[s]=e[s];else i=e;return{tagName:t,attribs:i}}};const $_=ct(qge),Xge=()=>({allowedTags:$_.defaults.allowedTags.concat(["img","iframe","video","source"]),allowedAttributes:{...$_.defaults.allowedAttributes,img:["alt","class","height","loading","src","srcset","style","title","width"],iframe:[{name:"sandbox",multiple:!0,values:["allow-popups","allow-same-origin","allow-scripts","allow-popups-to-escape-sandbox"]},"width","height","frameborder","allowfullscreen","loading","src"],video:["autoplay","controls","height","loop","muted","playsinline","poster","preload","src","width"],source:["src","type"],a:["href","name","target","rel","referrerpolicy"],sup:["id"],li:["id"]},allowedSchemes:["http","https","data","mailto"],allowedIframeHostnames:["www.youtube.com","www.youtube-nocookie.com","player.bilibili.com","player.vimeo.com"]}),Zge=t=>{const e=Xge();return $_(t,e)},Qge=(t,e,r)=>{const n=t.children.find(i=>i.type==="tag"&&i.name==="img");if(n){const i=e.findIndex(s=>s===n.attribs.src);return E.jsx($8,{index:i,isLinkWrapper:!0,node:t,togglePhotoSlider:r})}return t},Jge=t=>{if(/video\.bsky\.app.*thumbnail\.jpg$/.test(t.attribs.src)){const r=t.attribs.src,n=r.replace("thumbnail.jpg","playlist.m3u8");return E.jsx(O6,{controls:!0,poster:r,src:n})}return null},$F=(t,e,r)=>{const n=Jge(t);if(n)return n;const i=e.findIndex(s=>s===t.attribs.src);return E.jsx($8,{index:i,node:t,togglePhotoSlider:r})},eve=t=>t.children.map(e=>e.data||(e.name==="br"?`
`:"")).join("").replace(/&#39;/g,"'").replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"),tve=t=>{const r=t.children[0].children.find(a=>a.name==="tbody");if(!r)return null;const n=r.children.find(a=>a.name==="tr");if(!n||n.children.length!==2)return null;const s=n.children[1].children.find(a=>a.name==="pre");return s?eve(s):null},rve=(t,e,r)=>{const n=t.children[0];if(n.name==="img")return $F(n,e,r);if(n.name==="table"){const i=tve(n);if(i)return E.jsx(F8,{children:i})}return null},nve=t=>{var n,i;let e=t.next;for(;e;){const s=e.next,a=e.type==="text"&&/^\d+(<br>|\n)*/.test(e.data),o=e.type==="tag"&&e.name==="br";(a||o)&&(e.data="",e.type="text"),e=s}let r;return((n=t.children[0])==null?void 0:n.name)==="code"?r=((i=t.children[0].children[0])==null?void 0:i.data)||"":r=t.children.map(s=>s.data||"").join(""),E.jsx(F8,{children:r})},ive=t=>{var n;const e=(n=t.children)==null?void 0:n.find(i=>{var s;return i.name==="source"&&((s=i.attribs)==null?void 0:s.src)}),r=(e==null?void 0:e.attribs.src)||t.attribs.src;return r?E.jsx(O6,{controls:!0,poster:t.attribs.poster,src:r}):t},sve=(t,e)=>({replace:r=>{if(r.type!=="tag")return r;switch(r.name){case"a":return r.children.length>0?Qge(r,t,e):r;case"img":return $F(r,t,e);case"pre":return nve(r);case"figure":return rve(r,t,e);case"video":return ive(r);default:return r}}}),UF=R.forwardRef((t,e)=>{const r=Fi(),{isBelowMedium:n}=$i(),{activeContent:i}=oe(Ct),{articleWidth:s,edgeToEdgeImages:a,fontFamily:o,fontSize:l,titleAlignment:u}=oe(Lt),{isPhotoSliderVisible:c,setIsPhotoSliderVisible:d,selectedIndex:h,setSelectedIndex:f}=W3(),p=()=>{$y("author"),Fy(i.author)},m=A=>{f(A),d(k=>!k)},g=K3(i.content),v=sve(g,m),b=Zge(i.content),y=nce(b,v),{id:T,title:x}=i.feed.category,{id:_,title:S}=i.feed;return R.useEffect(()=>{mce()},[]),E.jsx("article",{ref:e,className:`article-content ${a?"edge-to-edge":""}`,tabIndex:-1,children:E.jsx(_c,{className:"scroll-container",children:E.jsxs(_g,{y:20,children:[E.jsxs("div",{className:"article-header",style:{width:`${s}%`,textAlign:u},children:[E.jsx(hr.Title,{className:"article-title",heading:3,style:{fontFamily:o},children:E.jsx("a",{href:i.url,rel:"noopener noreferrer",target:"_blank",children:i.title})}),E.jsxs("div",{className:"article-meta",children:[E.jsx(hr.Text,{children:E.jsx(rM,{text:S,url:`/feed/${_}`})}),E.jsx(hr.Text,{style:{cursor:"pointer"},onClick:p,children:` - ${i.author}`}),E.jsx(hr.Text,{children:E.jsx(qa,{size:"small",style:{marginLeft:"10px",cursor:"pointer"},onClick:()=>r(`/category/${T}`),children:x})})]}),E.jsx(hr.Text,{className:"article-date",children:Rj(i.published_at)}),E.jsx("br",{}),E.jsx(hr.Text,{className:"article-date",children:wO(i.reading_time)}),E.jsx(Rn,{})]}),E.jsxs("div",{className:"article-body",style:{fontSize:`${l}rem`,width:`${s}%`,fontFamily:o,"--article-width":s},children:[y,E.jsx(kce,{bannerVisible:!n,images:g.map(A=>({src:A,key:A})),index:h,loop:!1,maskClassName:"img-mask",maskOpacity:.6,visible:c,onIndexChange:f,onClose:()=>{d(!1)}})]},i.id)]})})})});UF.displayName="ArticleDetail";var U_=new Map,w0=new WeakMap,lD=0,ave=void 0;function ove(t){return t?(w0.has(t)||(lD+=1,w0.set(t,lD.toString())),w0.get(t)):"0"}function lve(t){return Object.keys(t).sort().filter(e=>t[e]!==void 0).map(e=>`${e}_${e==="root"?ove(t.root):t[e]}`).toString()}function uve(t){const e=lve(t);let r=U_.get(e);if(!r){const n=new Map;let i;const s=new IntersectionObserver(a=>{a.forEach(o=>{var l;const u=o.isIntersecting&&i.some(c=>o.intersectionRatio>=c);t.trackVisibility&&typeof o.isVisible>"u"&&(o.isVisible=u),(l=n.get(o.target))==null||l.forEach(c=>{c(u,o)})})},t);i=s.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),r={id:e,observer:s,elements:n},U_.set(e,r)}return r}function cve(t,e,r={},n=ave){if(typeof window.IntersectionObserver>"u"&&n!==void 0){const l=t.getBoundingClientRect();return e(n,{isIntersecting:n,target:t,intersectionRatio:typeof r.threshold=="number"?r.threshold:0,time:0,boundingClientRect:l,intersectionRect:l,rootBounds:l}),()=>{}}const{id:i,observer:s,elements:a}=uve(r),o=a.get(t)||[];return a.has(t)||a.set(t,o),o.push(e),s.observe(t),function(){o.splice(o.indexOf(e),1),o.length===0&&(a.delete(t),s.unobserve(t)),a.size===0&&(s.disconnect(),U_.delete(i))}}function BF({threshold:t,delay:e,trackVisibility:r,rootMargin:n,root:i,triggerOnce:s,skip:a,initialInView:o,fallbackInView:l,onChange:u}={}){var c;const[d,h]=R.useState(null),f=R.useRef(),[p,m]=R.useState({inView:!!o,entry:void 0});f.current=u,R.useEffect(()=>{if(a||!d)return;let y;return y=cve(d,(T,x)=>{m({inView:T,entry:x}),f.current&&f.current(T,x),x.isIntersecting&&s&&y&&(y(),y=void 0)},{root:i,rootMargin:n,threshold:t,trackVisibility:r,delay:e},l),()=>{y&&y()}},[Array.isArray(t)?t.toString():t,d,i,n,s,a,r,l,e]);const g=(c=p.entry)==null?void 0:c.target,v=R.useRef();!d&&g&&!s&&!a&&v.current!==g&&(v.current=g,m({inView:!!o,entry:void 0}));const b=[h,p.inView,p.entry];return b.ref=b[0],b.inView=b[1],b.entry=b[2],b}const dve=4/3,uD=({entry:t,isWideImage:e})=>{const r=e?{width:"100%",height:"100%"}:{width:"80px",height:"80px"};return E.jsx("div",{className:"card-thumbnail",children:E.jsx("img",{alt:t.id,src:t.coverSource,style:{width:r.width,height:r.height}})})},hve=t=>t?t.replace(/<[^>]*>/g,"").replace(/&nbsp;/g," ").replace(/&#(\d+);/g,(e,r)=>String.fromCharCode(r)).replace(/&([a-z]+);/g,(e,r)=>({amp:"&",lt:"<",gt:">",quot:'"',apos:"'"})[r]||"").trim():"",fve=({entry:t,handleEntryClick:e,children:r})=>{const{markReadOnScroll:n,showFeedIcon:i,showDetailedRelativeTime:s,showEstimatedReadingTime:a}=oe(Lt),{activeContent:o}=oe(Ct),l=o&&t.id===o.id,{handleToggleStatus:u}=Pg(),c=t.status==="unread",[d,h]=R.useState(!1),[f,p]=R.useState(!1),[m,g]=R.useState(!1),[v,b]=R.useState(!1),[y,T]=R.useState(!1),x=()=>u(t),_=20,{ref:S}=BF({skip:f,onChange:async(I,C)=>{if(!(!n||!c)){if(I)h(!0);else if(d){const{top:N}=C.boundingClientRect;N<_&&(await x(),p(!0))}}}});R.useEffect(()=>{if(t.coverSource){const I=new Image;I.src=t.coverSource,I.onload=()=>{const C=I.naturalWidth/I.naturalHeight;b(C>=dve),T(!0)},I.onerror=()=>{g(!0)}}},[t.coverSource]);const A=()=>{const I=t.coverSource&&!m&&!v;return!a&&I?4:3},k=R.useMemo(()=>hve(t.content),[t.content]);return E.jsxs("div",{ref:S,className:l?"card-wrapper selected":"card-wrapper","data-entry-id":t.id,onClick:()=>e(t),onKeyDown:I=>{(I.key==="Enter"||I.key===" ")&&(I.preventDefault(),e(t))},children:[E.jsxs("div",{className:"card-content",style:{opacity:c?1:.5},children:[E.jsxs("div",{className:"card-header",children:[E.jsxs("div",{className:"card-meta",children:[E.jsxs("div",{className:"card-source",children:[i&&E.jsx(cM,{className:"feed-icon-mini",feed:t.feed}),E.jsxs("div",{className:"card-source-content",children:[E.jsx("span",{className:"card-source-title",children:t.feed.title}),E.jsx("span",{className:"card-author",children:t.author})]})]}),E.jsxs("div",{className:"card-time-wrapper",children:[E.jsx("span",{className:"card-star",children:t.starred&&E.jsx(_D,{className:"icon-starred"})}),E.jsx("span",{className:"card-time",children:SO(t.published_at,s)})]})]}),E.jsx("h3",{className:"card-title",children:t.title})]}),t.coverSource&&!m&&y&&v&&E.jsx("div",{className:"card-image-wide",children:E.jsx(uD,{entry:t,isWideImage:v,setHasError:g})}),E.jsxs("div",{className:"card-body",children:[E.jsxs("div",{className:"card-text",children:[a&&E.jsxs("div",{className:"card-reading-time",children:[E.jsx(o9,{}),E.jsx("span",{children:wO(t.reading_time)})]}),E.jsx("p",{className:"card-preview",style:{lineClamp:A(),WebkitLineClamp:A()},children:k})]}),t.coverSource&&!m&&y&&!v&&E.jsx("div",{className:"card-image-mini",children:E.jsx(uD,{entry:t,isWideImage:v,setHasError:g})})]})]}),r]})},pve=({isArticleListReady:t})=>E.jsx(Rw,{className:"card-style",cover:null,children:E.jsx(Rw.Meta,{description:E.jsx(_y,{animation:!0,loading:!t,text:{rows:3,width:150}})})}),mve=()=>{const{isArticleListReady:t}=oe(Ct);return!t&&Array.from({length:4},(e,r)=>E.jsx(pve,{isArticleListReady:t},r))},gve=(t,e,r)=>{R.useLayoutEffect(()=>{let n=null;return t>0&&(clearTimeout(n),n=setTimeout(()=>{r(),clearTimeout(n)},e*4)),()=>clearTimeout(n)},[t,e,r])},vve=({duration:t,color:e})=>{const[r,n]=R.useState([]);gve(r.length,t,()=>{n([])});const i=s=>{const a=s.currentTarget.getBoundingClientRect(),o=a.width>a.height?a.width:a.height,l=s.pageX-a.x-o/2,u=s.pageY-a.y-o/2,c={x:l,y:u,size:o,id:`${new Date().getTime()}-${l}-${u}`};n([...r,c])};return E.jsx("div",{className:"ripple-container",onMouseDown:i,children:r.length>0&&r.map(s=>E.jsx("span",{className:"ripple-span",style:{top:s.y,left:s.x,width:s.size,height:s.size,backgroundColor:e,animationDuration:`${t}ms`}},s.id))})},jF=vc(!1),cD=Dt(jF),bve=(t,e)=>!e.some(r=>r.id===t.id),HF=()=>{const{offset:t}=oe(Ct),{pageSize:e,showStatus:r}=oe(Lt),n=oe(jF),i=a=>{const o=(l,u)=>u.filter(c=>bve(c,l));qh(l=>[...l,...o(l,a)]),ym(l=>l+e)};return{handleLoadMore:async a=>{var o;cD(!0);try{const l=r==="unread"?await a(t+e,"unread"):await a(t+e);if(((o=l==null?void 0:l.entries)==null?void 0:o.length)>0){const u=l.entries.map(q3);i(u)}else DO(!1)}catch(l){console.error("Error fetching more articles: ",l)}finally{cD(!1)}},loadingMore:n}},yve=({getEntries:t})=>{const{isArticleListReady:e,loadMoreVisible:r}=oe(Ct),{loadingMore:n,handleLoadMore:i}=HF(),{ref:s,inView:a}=BF(),o=R.useCallback(async()=>{r&&a&&e&&!n&&await i(t)},[r,a,e,n,i,t]);return R.useEffect(()=>{const l=setInterval(o,500);return()=>clearInterval(l)},[o]),e&&r&&E.jsxs("div",{ref:s,className:"load-more-container",children:[E.jsx(l9,{loading:n,style:{paddingRight:"10px"}}),"Loading more ..."]})},VF=R.forwardRef(({getEntries:t,handleEntryClick:e,cardsRef:r},n)=>{const{isArticleListReady:i,loadMoreVisible:s}=oe(Ct),a=oe(Kh),{loadingMore:o,handleLoadMore:l}=HF(),u=R.useMemo(()=>a,[a]),c=lM({count:u.length,getScrollElement:()=>r.current,estimateSize:()=>160,overscan:10}),d=c.getVirtualItems(),h=s&&i&&!o,f=R.useCallback(p=>{if(!h)return;const{scrollTop:m,clientHeight:g,scrollHeight:v}=p;(m+g)/v>=.8&&l(t)},[h,l,t]);return R.useEffect(()=>{const{scrollElement:p}=c;if(!p)return;const m=()=>f(p);return p.addEventListener("scroll",m),()=>{p.removeEventListener("scroll",m)}},[c,f]),E.jsxs(_c,{ref:n,className:"entry-list",scrollableNodeProps:{ref:r},children:[E.jsx(mve,{}),i&&E.jsx(_g,{y:20,style:{height:c.getTotalSize(),width:"100%",position:"relative"},children:d.map(p=>E.jsxs("div",{ref:c.measureElement,"data-index":p.index,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${p.start}px)`},children:[E.jsx(fve,{entry:a[p.index],handleEntryClick:e,children:E.jsx(vve,{color:"var(--color-text-4)",duration:1e3})}),p.index<a.length-1&&E.jsx(Rn,{style:{margin:"8px 0",borderBottom:"1px solid var(--color-border-2)"}})]},p.key))}),E.jsx(yve,{getEntries:t})]})});VF.displayName="ArticleList";function Eve(){const t=ai().pathname,{isBelowLarge:e}=$i(),[r,n]=R.useState(!1);return R.useEffect(()=>{e||n(!1)},[e]),R.useEffect(()=>{t&&n(!1)},[t]),E.jsxs("div",{children:[E.jsx("div",{className:"brand",children:E.jsx(ht,{className:"trigger",shape:"circle",size:"small",onClick:()=>n(!r),children:E.jsx(DT,{})})}),E.jsx(u9,{className:"sidebar-drawer",closable:!1,footer:null,placement:"left",title:null,visible:r,width:240,onCancel:()=>n(!1),children:E.jsx(dM,{})})]})}const _ve=()=>{const{filterDate:t,filterString:e,filterType:r}=oe(Ct),{orderDirection:n,showStatus:i}=oe(Lt),{polyglot:s}=oe(St),a=s.t("search.tooltip").split(`
`),o=ai(),[l,u]=R.useState(""),[c,d]=R.useState(!1),h=R.useMemo(()=>tW(g=>Fy(g),500),[]),f=g=>{u(g),h(g)},{isBelowMedium:p}=$i(),m=()=>{Zr({orderDirection:n==="desc"?"asc":"desc"})};return R.useEffect(()=>{mf(null),$y("title"),Fy(""),d(!1)},[o.pathname,i]),R.useEffect(()=>{if(!c){d(!0);return}e!==l&&u(e)},[e,c]),E.jsxs("div",{className:"search-and-sort-bar",children:[E.jsx(Eve,{}),E.jsx(Wn.Search,{allowClear:!0,placeholder:s.t("search.placeholder"),style:{width:p?"100%":272,marginLeft:8},value:l,addBefore:E.jsxs(cr,{style:{width:80},value:r,triggerProps:{autoAlignPopupWidth:!1,autoAlignPopupMinWidth:!0,position:"bl"},onChange:$y,children:[E.jsx(cr.Option,{value:"title",children:s.t("search.type_title")}),E.jsx(cr.Option,{value:"content",children:s.t("search.type_content")}),E.jsx(cr.Option,{value:"author",children:s.t("search.type_author")})]}),prefix:E.jsx(Uh,{mini:!0,content:E.jsx("div",{children:a.map((g,v)=>E.jsxs(R.Fragment,{children:[g,v<a.length-1&&E.jsx("br",{})]},`line-${v}-${g.length}`))}),children:E.jsx(H_,{})}),onChange:f}),E.jsxs("div",{className:"button-group",children:[E.jsx(c9,{position:"bottom",showNowBtn:!1,value:t,extra:E.jsxs("div",{className:"calendar-actions",children:[E.jsx(ht,{long:!0,size:"mini",type:"primary",onClick:()=>mf(Sj()),children:s.t("search.today")}),E.jsx(ht,{long:!0,size:"mini",onClick:()=>mf(null),children:s.t("search.clear_date")})]}),triggerElement:E.jsx(Mr,{mini:!0,content:s.t("search.select_date"),children:E.jsx(ht,{icon:E.jsx(bD,{}),shape:"circle",size:"small",style:{backgroundColor:t?"rgb(var(--primary-6))":"inherit"}})}),onChange:g=>mf(g)}),E.jsx(Mr,{mini:!0,content:n==="desc"?s.t("article_list.sort_direction_desc"):s.t("article_list.sort_direction_asc"),children:E.jsx(ht,{icon:n==="desc"?E.jsx(ST,{}):E.jsx(xT,{}),shape:"circle",size:"small",onClick:m})})]})]})},Tve=t=>{if((t==null?void 0:t.total)>=0){const e=t.entries.map(q3);qh(e),Pj(t.total),DO(e.length<t.total)}},xve=(t,e)=>{const{filterDate:r}=oe(Ct),{isAppDataReady:n}=oe(_r),{showStatus:i}=oe(Lt),s=R.useRef(!1),a=async o=>{if(!s.current){s.current=!0,_A(!1);try{const l=i==="unread"?await o(0,"unread"):await o();if(!r)switch(t.from){case"feed":i==="unread"&&nT(u=>({...u,[Number(t.id)]:l.total}));break;case"history":mm(l.total);break;case"starred":i!=="unread"&&gm(l.total);break;case"today":i==="unread"&&iT(l.total);break}Tve(l),_A(!0)}catch(l){console.error("Error fetching articles: ",l)}finally{s.current=!1}}};return R.useEffect(()=>{n&&a(e)},[n]),{fetchArticleList:a}},dD="ReactFlux",Sve=()=>{const{activeContent:t,infoFrom:e}=oe(Ct),{polyglot:r}=oe(St),{id:n}=z_(),i=oe(jh),s=oe(yc);R.useEffect(()=>{const o=(()=>{var c,d;if(t!=null&&t.title)return t.title;if(n){if(e==="category")return(c=s.find(h=>h.id===Number(n)))==null?void 0:c.title;if(e==="feed")return(d=i.find(h=>h.id===Number(n)))==null?void 0:d.title}const u={all:"sidebar.all",starred:"sidebar.starred",history:"sidebar.history",today:"sidebar.today"}[e];return u?r.t(u):""})();document.title=o?`${o} - ${dD}`:dD},[t,e,n,i,s,r])},Rc=({info:t,getEntries:e,markAllAsRead:r})=>{const{activeContent:n,filterDate:i,isArticleLoading:s}=oe(Ct),{isAppDataReady:a}=oe(_r),{orderBy:o,orderDirection:l,showHiddenFeeds:u,showStatus:c}=oe(Lt),{polyglot:d}=oe(St),h=oe(jT),f=oe(tT),p=oe(Hg),[m,g]=R.useState(!1),[v,b]=R.useState(!1),y=R.useRef(null);Sve();const{entryDetailRef:T,entryListRef:x,handleEntryClick:_}=G3(),{exitDetailView:S,fetchOriginalArticle:A,navigateToNextArticle:k,navigateToNextUnreadArticle:I,navigateToPreviousArticle:C,navigateToPreviousUnreadArticle:N,openLinkExternally:P,openPhotoSlider:V,saveToThirdPartyServices:M,showHotkeysSettings:U,toggleReadStatus:B,toggleStarStatus:X}=z3(),{fetchAppData:te}=Vg(),{fetchArticleList:D}=xve(t,e),{isBelowMedium:L}=$i(),{handleFetchContent:Y,handleSaveToThirdPartyServices:$,handleToggleStarred:j,handleToggleStatus:z}=Pg(),re={exitDetailView:S,fetchOriginalArticle:()=>A(Y),navigateToNextArticle:()=>k(),navigateToNextUnreadArticle:()=>I(),navigateToPreviousArticle:()=>C(),navigateToPreviousUnreadArticle:()=>N(),openLinkExternally:P,openPhotoSlider:V,saveToThirdPartyServices:()=>M($),showHotkeysSettings:U,toggleReadStatus:()=>B(()=>z(n)),toggleStarStatus:()=>X(()=>j(n))},ne=ke=>ke.filter(Oe=>!h.includes(Oe));for(const[ke,Oe]of Object.entries(re))GY(ne(p[ke]),Oe);const ue=async ke=>{ym(0),a?await D(ke):await te()},Te=ke=>{g(ke.dir==="Left"),b(ke.dir==="Right")},ce=()=>{g(!1),b(!1)},_e=R.useCallback(()=>k(),[k]),De=R.useCallback(()=>C(),[C]),nt=rX({onSwiping:Te,onSwiped:ce,onSwipedLeft:_e,onSwipedRight:De});return R.useEffect(()=>{if(h.length>0){const ke="duplicate-hotkeys";Or.error({id:ke,title:d.t("settings.duplicate_hotkeys"),duration:0,btn:E.jsxs("span",{children:[E.jsx(ht,{size:"small",style:{marginRight:8},type:"secondary",onClick:()=>Or.remove(ke),children:d.t("actions.dismiss")}),E.jsx(ht,{size:"small",type:"primary",onClick:()=>{U(),Or.remove(ke)},children:d.t("actions.check")})]})})}},[h,d,U]),R.useEffect(()=>{Mj(t.from),n&&Mi(null),ue(e)},[t]),R.useEffect(()=>{["starred","history"].includes(t.from)||ue(e)},[o]),R.useEffect(()=>{f.length===0||["starred","history"].includes(t.from)||ue(e)},[u]),R.useEffect(()=>{ue(e)},[i,l,c]),E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"entry-col",style:{opacity:L&&s?0:1},children:[E.jsx(_ve,{}),E.jsx(VF,{ref:x,cardsRef:y,getEntries:e,handleEntryClick:_}),E.jsx(iX,{info:t,markAllAsRead:r,refreshArticleList:()=>ue(e)})]}),n?E.jsxs("div",{className:"article-container content-wrapper",...nt,children:[!L&&E.jsx(dC,{}),s?E.jsx("div",{style:{flex:1}}):E.jsxs(E.Fragment,{children:[E.jsxs(IY,{children:[v&&E.jsx(_g,{className:"swipe-hint left",children:E.jsx(d9,{style:{fontSize:24}})},"swipe-hint-left"),m&&E.jsx(_g,{className:"swipe-hint right",children:E.jsx(yD,{style:{fontSize:24}})},"swipe-hint-right")]}),E.jsx(UF,{ref:T})]}),L&&E.jsx(dC,{})]}):E.jsxs("div",{className:"content-empty content-wrapper",children:[E.jsx(h9,{style:{fontSize:"64px"}}),E.jsx(hr.Title,{heading:6,style:{color:"var(--color-text-3)",marginTop:"10px"},children:"ReactFlux"})]})]})},wve=()=>E.jsx(Rc,{getEntries:Bj,info:{from:"all",id:""},markAllAsRead:tH}),Ave=()=>{const{id:t}=z_(),e=hn("orderBy"),r=hn("pageSize"),n=hn("showHiddenFeeds"),i=async(s=0,a=null)=>{const o={baseUrl:`/v1/categories/${t}/entries`,orderField:e,offset:s,limit:r,status:a},l={globally_visible:!n};return ut.get(Ec(o,l))};return E.jsx(Rc,{getEntries:i,info:{from:"category",id:t},markAllAsRead:()=>IB(t)})},Rve=()=>{const t=Fi(),e=UD();return console.error(e),R.useEffect(()=>{VT()},[]),E.jsx("div",{id:"error-page",style:{top:"30%",position:"relative"},children:E.jsx(f9,{status:"404",subTitle:e.statusText||e.message,extra:[E.jsx(ht,{type:"primary",onClick:()=>t("/"),children:"Back to Home"},"back")]})})},Cve=()=>{const{id:t}=z_(),e=hn("orderBy"),r=hn("pageSize"),n=async(i=0,s=null)=>{const a={baseUrl:`/v1/feeds/${t}/entries`,orderField:e,offset:i,limit:r,status:s};return ut.get(Ec(a))};return E.jsx(Rc,{getEntries:n,info:{from:"feed",id:t},markAllAsRead:()=>zj(t)})},Ive=()=>E.jsx(Rc,{getEntries:jj,info:{from:"history",id:""}}),kve=t=>{const e=t.getFieldsValue();let r=!0;for(const[n,i]of Object.entries(e))if(n!=="password"){const s=i==null?void 0:i.trim();t.setFieldValue(n,s),s||(r=!1)}else i||(r=!1);return r},A0=(t,e)=>{t.key==="Enter"&&e.submit()},Lve=()=>{EO(),hM();const t=oe(Bh),{homePage:e}=oe(Lt),{polyglot:r}=oe(St),[n]=p9(),[i,s]=R.useState(!1),[a,o]=R.useState("token"),l=ai(),u=Fi(),c=async h=>{var v;s(!0);const{server:f,token:p,username:m,password:g}=h;try{if((await Z_.raw("v1/me",{baseURL:f,headers:p?{"X-Auth-Token":p}:{Authorization:`Basic ${btoa(`${m}:${g}`)}`}})).status===200){Or.success({title:r.t("login.success")}),KD({server:f,token:p,username:m,password:g});const y=((v=l.state)==null?void 0:v.from)||`/${e}`;u(y,{replace:!0})}}catch(b){console.error(b),Or.error({title:r.t("login.error"),content:b.message})}s(!1)},d=async h=>{if(!pm(h)){et.error(r.t("login.auth_error"));return}await c(h)};return R.useEffect(()=>{VT()},[]),R.useEffect(()=>{const h=new URL(window.location.href),{server:f,token:p,username:m,password:g}=Object.fromEntries(h.searchParams);f&&(m&&o("user"),n.setFieldsValue({server:f,token:p,username:m,password:g}),n.submit())},[n,r]),pm(t)?E.jsx(Y_,{to:`/${e}`}):r&&E.jsxs("div",{className:"page-layout",children:[E.jsx("div",{className:"form-panel",children:E.jsxs("div",{className:"login-form",children:[E.jsx(hr.Title,{heading:3,children:r.t("login.login_to_your_server")}),E.jsxs(dr,{autoComplete:"off",form:n,layout:"vertical",onSubmit:async()=>{kve(n)?(history.replaceState(null,"","/login"),await d(n.getFieldsValue())):et.error(r.t("login.submit_error"))},children:[E.jsx(dr.Item,{field:"server",label:r.t("login.server_label"),rules:[{required:!0}],onKeyDown:h=>{A0(h,n)},children:E.jsx(Wn,{disabled:i,placeholder:r.t("login.server_placeholder"),prefix:E.jsx(vT,{})})}),a==="token"&&E.jsx(dr.Item,{field:"token",label:r.t("login.token_label"),rules:[{required:!0}],onKeyDown:h=>{A0(h,n)},children:E.jsx(Wn.Password,{disabled:i,placeholder:r.t("login.token_placeholder"),prefix:E.jsx(Em,{})})}),a==="user"&&E.jsxs(E.Fragment,{children:[E.jsx(dr.Item,{field:"username",label:r.t("login.username_label"),rules:[{required:!0}],onKeyDown:h=>{A0(h,n)},children:E.jsx(Wn,{disabled:i,placeholder:r.t("login.username_placeholder"),prefix:E.jsx(jg,{})})}),E.jsx(dr.Item,{field:"password",label:r.t("login.password_label"),rules:[{required:!0}],onKeyDown:h=>{A0(h,n)},children:E.jsx(Wn.Password,{disabled:i,placeholder:r.t("login.password_placeholder"),prefix:E.jsx(Em,{})})})]})]}),E.jsx(ht,{loading:i,long:!0,style:{marginTop:"20px"},type:"primary",onClick:()=>n.submit(),children:r.t("login.login_button")}),E.jsx(Rn,{children:r.t("login.another_login_method")}),E.jsx(ht,{long:!0,style:{marginTop:"20px"},type:"secondary",onClick:()=>o(a==="token"?"user":"token"),children:a==="token"?r.t("login.another_login_button"):r.t("login.token_label")}),E.jsxs("div",{style:{display:"flex",marginTop:"40px"},children:[E.jsx(hr.Text,{disabled:!0,children:r.t("login.need_help")}),E.jsx(m9,{href:"https://miniflux.app/docs/api.html#authentication",style:{fontWeight:"500"},children:r.t("login.miniflux_official_website")})]})]})}),E.jsx("div",{className:"background"})]})},Dve=()=>{const t=oe(Bh),e=ai();return pm(t)?E.jsx(BD,{}):E.jsx(Y_,{replace:!0,state:{from:e.pathname},to:"/login"})},Ove=()=>E.jsx(Rc,{getEntries:OO,info:{from:"starred",id:""}}),Mve=()=>{const t=async()=>{const e=await P0(0,"unread"),r=e.total;let n=e.entries;r>n.length&&(n=P0(0,"unread",r).then(s=>s.entries));const i=n.map(s=>s.id);return Ng(i,"read")};return E.jsx(Rc,{getEntries:P0,info:{from:"today",id:""},markAllAsRead:t})},Pve=hn("homePage"),Nve=[{path:"/all",element:E.jsx(wve,{})},{path:"/today",element:E.jsx(Mve,{})},{path:"/starred",element:E.jsx(Ove,{})},{path:"/history",element:E.jsx(Ive,{})},{path:"/category/:id",element:E.jsx(Ave,{})},{path:"/feed/:id",element:E.jsx(Cve,{})}],WF=X$([{path:"/login",element:E.jsx(Lve,{})},{path:"/",element:E.jsx(rG,{}),errorElement:E.jsx(Rve,{}),children:[{element:E.jsx(Dve,{}),children:[...Nve,{index:!0,element:E.jsx(Y_,{replace:!0,to:`/${Pve}`})}]}]}]),Fve={"es-ES":C9,"fr-FR":k9,"zh-CN":v9},$ve=()=>Fve[kB()]||A9;gU();I0e();Ty.createRoot(document.getElementById("root")).render(E.jsx(g9,{locale:$ve(),children:E.jsx(sU,{router:WF})}))});export default Uve();
